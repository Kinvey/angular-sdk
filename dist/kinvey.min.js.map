{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/append-query/index.js","kinvey.min.js","node_modules/asap/browser-raw.js","node_modules/babybird/lib/promise-extra.js","node_modules/babybird/lib/promise.js","node_modules/base64-js/lib/b64.js","node_modules/buffer/index.js","node_modules/buffer/node_modules/isarray/index.js","node_modules/events/events.js","node_modules/extend/index.js","node_modules/fast-memory-cache/lib/memory-cache.js","node_modules/hellojs/dist/hello.all.js","node_modules/ieee754/index.js","node_modules/indexeddbshim/dist/indexeddbshim.js","node_modules/inherits/inherits_browser.js","node_modules/is-arguments/index.js","node_modules/kinvey-javascript-sdk-core/src/Log.js","node_modules/kinvey-javascript-sdk-core/src/acl.js","node_modules/kinvey-javascript-sdk-core/src/aggregation.js","node_modules/kinvey-javascript-sdk-core/src/client.js","node_modules/kinvey-javascript-sdk-core/src/command.js","node_modules/kinvey-javascript-sdk-core/src/enums.js","node_modules/kinvey-javascript-sdk-core/src/errors.js","node_modules/kinvey-javascript-sdk-core/src/kinvey.js","node_modules/kinvey-javascript-sdk-core/src/log.js","node_modules/kinvey-javascript-sdk-core/src/metadata.js","node_modules/kinvey-javascript-sdk-core/src/mic.js","node_modules/kinvey-javascript-sdk-core/src/query.js","node_modules/kinvey-javascript-sdk-core/src/rack/asciiTree.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware/cache.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware/parse.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware/serialize.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/indexeddb.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/localstorage.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/memory.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/websql.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/db.js","node_modules/kinvey-javascript-sdk-core/src/rack/rack.js","node_modules/kinvey-javascript-sdk-core/src/requests/deltafetch.js","node_modules/kinvey-javascript-sdk-core/src/requests/local.js","node_modules/kinvey-javascript-sdk-core/src/requests/network.js","node_modules/kinvey-javascript-sdk-core/src/requests/properties.js","node_modules/kinvey-javascript-sdk-core/src/requests/request.js","node_modules/kinvey-javascript-sdk-core/src/requests/response.js","node_modules/kinvey-javascript-sdk-core/src/stores/cachestore.js","node_modules/kinvey-javascript-sdk-core/src/stores/datastore.js","node_modules/kinvey-javascript-sdk-core/src/stores/filestore.js","node_modules/kinvey-javascript-sdk-core/src/stores/networkstore.js","node_modules/kinvey-javascript-sdk-core/src/stores/syncstore.js","node_modules/kinvey-javascript-sdk-core/src/stores/userstore.js","node_modules/kinvey-javascript-sdk-core/src/sync.js","node_modules/kinvey-javascript-sdk-core/src/user.js","node_modules/kinvey-javascript-sdk-core/src/utils/device.js","node_modules/kinvey-javascript-sdk-core/src/utils/object.js","node_modules/kinvey-javascript-sdk-core/src/utils/popup.js","node_modules/kinvey-javascript-sdk-core/src/utils/string.js","node_modules/local-storage/local-storage.js","node_modules/local-storage/stub.js","node_modules/local-storage/tracking.js","node_modules/lodash/_Hash.js","node_modules/lodash/_Map.js","node_modules/lodash/_MapCache.js","node_modules/lodash/_Reflect.js","node_modules/lodash/_Set.js","node_modules/lodash/_SetCache.js","node_modules/lodash/_Stack.js","node_modules/lodash/_Symbol.js","node_modules/lodash/_Uint8Array.js","node_modules/lodash/_WeakMap.js","node_modules/lodash/_addMapEntry.js","node_modules/lodash/_addSetEntry.js","node_modules/lodash/_apply.js","node_modules/lodash/_arrayAggregator.js","node_modules/lodash/_arrayEach.js","node_modules/lodash/_arrayIncludes.js","node_modules/lodash/_arrayIncludesWith.js","node_modules/lodash/_arrayMap.js","node_modules/lodash/_arrayPush.js","node_modules/lodash/_arrayReduce.js","node_modules/lodash/_arraySome.js","node_modules/lodash/_assignMergeValue.js","node_modules/lodash/_assignValue.js","node_modules/lodash/_assocDelete.js","node_modules/lodash/_assocGet.js","node_modules/lodash/_assocHas.js","node_modules/lodash/_assocIndexOf.js","node_modules/lodash/_assocSet.js","node_modules/lodash/_baseAggregator.js","node_modules/lodash/_baseAssign.js","node_modules/lodash/_baseCastFunction.js","node_modules/lodash/_baseCastPath.js","node_modules/lodash/_baseClone.js","node_modules/lodash/_baseCreate.js","node_modules/lodash/_baseDifference.js","node_modules/lodash/_baseEach.js","node_modules/lodash/_baseFind.js","node_modules/lodash/_baseFindIndex.js","node_modules/lodash/_baseFlatten.js","node_modules/lodash/_baseFor.js","node_modules/lodash/_baseForOwn.js","node_modules/lodash/_baseGet.js","node_modules/lodash/_baseHas.js","node_modules/lodash/_baseHasIn.js","node_modules/lodash/_baseIndexOf.js","node_modules/lodash/_baseIsEqual.js","node_modules/lodash/_baseIsEqualDeep.js","node_modules/lodash/_baseIsMatch.js","node_modules/lodash/_baseIteratee.js","node_modules/lodash/_baseKeys.js","node_modules/lodash/_baseKeysIn.js","node_modules/lodash/_baseMap.js","node_modules/lodash/_baseMatches.js","node_modules/lodash/_baseMatchesProperty.js","node_modules/lodash/_baseMerge.js","node_modules/lodash/_baseMergeDeep.js","node_modules/lodash/_baseProperty.js","node_modules/lodash/_basePropertyDeep.js","node_modules/lodash/_baseReduce.js","node_modules/lodash/_baseSlice.js","node_modules/lodash/_baseTimes.js","node_modules/lodash/_baseToPairs.js","node_modules/lodash/_baseUnary.js","node_modules/lodash/_baseValues.js","node_modules/lodash/_cacheHas.js","node_modules/lodash/_cachePush.js","node_modules/lodash/_checkGlobal.js","node_modules/lodash/_cloneArrayBuffer.js","node_modules/lodash/_cloneBuffer.js","node_modules/lodash/_cloneMap.js","node_modules/lodash/_cloneRegExp.js","node_modules/lodash/_cloneSet.js","node_modules/lodash/_cloneSymbol.js","node_modules/lodash/_cloneTypedArray.js","node_modules/lodash/_copyArray.js","node_modules/lodash/_copyObject.js","node_modules/lodash/_copyObjectWith.js","node_modules/lodash/_copySymbols.js","node_modules/lodash/_createAggregator.js","node_modules/lodash/_createAssigner.js","node_modules/lodash/_createBaseEach.js","node_modules/lodash/_createBaseFor.js","node_modules/lodash/_equalArrays.js","node_modules/lodash/_equalByTag.js","node_modules/lodash/_equalObjects.js","node_modules/lodash/_getLength.js","node_modules/lodash/_getMatchData.js","node_modules/lodash/_getNative.js","node_modules/lodash/_getSymbols.js","node_modules/lodash/_getTag.js","node_modules/lodash/_hasPath.js","node_modules/lodash/_hashDelete.js","node_modules/lodash/_hashGet.js","node_modules/lodash/_hashHas.js","node_modules/lodash/_hashSet.js","node_modules/lodash/_indexKeys.js","node_modules/lodash/_indexOfNaN.js","node_modules/lodash/_initCloneArray.js","node_modules/lodash/_initCloneByTag.js","node_modules/lodash/_initCloneObject.js","node_modules/lodash/_isHostObject.js","node_modules/lodash/_isIndex.js","node_modules/lodash/_isIterateeCall.js","node_modules/lodash/_isKey.js","node_modules/lodash/_isKeyable.js","node_modules/lodash/_isPrototype.js","node_modules/lodash/_isStrictComparable.js","node_modules/lodash/_iteratorToArray.js","node_modules/lodash/_mapClear.js","node_modules/lodash/_mapDelete.js","node_modules/lodash/_mapGet.js","node_modules/lodash/_mapHas.js","node_modules/lodash/_mapSet.js","node_modules/lodash/_mapToArray.js","node_modules/lodash/_nativeCreate.js","node_modules/lodash/_parent.js","node_modules/lodash/_root.js","node_modules/lodash/_setToArray.js","node_modules/lodash/_stackClear.js","node_modules/lodash/_stackDelete.js","node_modules/lodash/_stackGet.js","node_modules/lodash/_stackHas.js","node_modules/lodash/_stackSet.js","node_modules/lodash/_stringToPath.js","node_modules/lodash/assign.js","node_modules/lodash/constant.js","node_modules/lodash/differenceBy.js","node_modules/lodash/eq.js","node_modules/lodash/find.js","node_modules/lodash/findIndex.js","node_modules/lodash/forEach.js","node_modules/lodash/get.js","node_modules/lodash/hasIn.js","node_modules/lodash/identity.js","node_modules/lodash/isArguments.js","node_modules/lodash/isArray.js","node_modules/lodash/isArrayLike.js","node_modules/lodash/isArrayLikeObject.js","node_modules/lodash/isBuffer.js","node_modules/lodash/isEmpty.js","node_modules/lodash/isFunction.js","node_modules/lodash/isLength.js","node_modules/lodash/isNative.js","node_modules/lodash/isNumber.js","node_modules/lodash/isObject.js","node_modules/lodash/isObjectLike.js","node_modules/lodash/isPlainObject.js","node_modules/lodash/isRegExp.js","node_modules/lodash/isString.js","node_modules/lodash/isSymbol.js","node_modules/lodash/isTypedArray.js","node_modules/lodash/keyBy.js","node_modules/lodash/keys.js","node_modules/lodash/keysIn.js","node_modules/lodash/last.js","node_modules/lodash/map.js","node_modules/lodash/merge.js","node_modules/lodash/property.js","node_modules/lodash/reduce.js","node_modules/lodash/rest.js","node_modules/lodash/result.js","node_modules/lodash/toInteger.js","node_modules/lodash/toNumber.js","node_modules/lodash/toPairs.js","node_modules/lodash/toPlainObject.js","node_modules/lodash/toString.js","node_modules/lodash/values.js","node_modules/loglevel/lib/loglevel.js","node_modules/path-browserify/index.js","node_modules/process/browser.js","node_modules/promise-queue/index.js","node_modules/promise-queue/lib/index.js","node_modules/punycode/punycode.js","node_modules/qs/lib/index.js","node_modules/qs/lib/parse.js","node_modules/qs/lib/stringify.js","node_modules/qs/lib/utils.js","node_modules/querystring-es3/decode.js","node_modules/querystring-es3/encode.js","node_modules/querystring-es3/index.js","node_modules/sift/sift.js","node_modules/uid/index.js","node_modules/url-pattern/lib/url-pattern.js","node_modules/url/url.js","node_modules/url/util.js","node_modules/util/support/isBufferBrowser.js","node_modules/util/util.js","package.json","src/device.js","src/http.js","src/index.js","src/popup.js","src/provider.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","serialize","obj","prefix","str","useArraySyntax","Array","isArray","Object","keys","forEach","prop","key","query","val","encodeURIComponent","push","join","querystring","extend","url","uri","q","parts","parse","parsedQuery","search","format",2,"global","rawAsap","task","queue","requestFlush","flushing","flush","index","currentIndex","capacity","scan","newLength","makeRequestCallFromMutationObserver","callback","toggle","observer","BrowserMutationObserver","node","document","createTextNode","observe","characterData","data","makeRequestCallFromTimer","handleTimer","clearTimeout","timeoutHandle","clearInterval","intervalHandle","setTimeout","setInterval","MutationObserver","WebKitMutationObserver","this","self","window",3,"tryCatch0r","fn","receiver","errorObj","tryCatch1","arg1","tryCatch2","arg2","tryCatch3","arg3","isArguments","_call","Function","bind","_forEach","prototype","_toString","toString","_floor","Math","floor","_abs","abs","Symbol","symbolIterator","iterator","defineProperties","object","map","name","method","defineProperty","configurable","enumerable","writable","value","TypeIsObject","x","ToObject","optMessage","TypeError","IsCallable","ToNumber","numberIsNaN","Number","isNaN","numberIsFinite","isFinite","ToInteger","number","ToLength","len","MAX_SAFE_INTEGER","ArrayIterator","array","next","retval","done","DEFAULT_ARRAY_ITERATOR","GetIterator","detectDefault","itFn","GetMethod","it","p","func","IteratorComplete","iterResult","IteratorClose","completionIsThrow","returnMethod","innerResult","innerException","IteratorNext0","result","IteratorStep","Promise","PromiseCapability","makeCapability","makeCapabilityFast","promiseReactionResolve","promiseReactionReject","optimizePromiseThen","symbolSpecies","getPromiseSpecies","C","S","_promiseAllResolver","values","capability","remaining","alreadyCalled","count","performPromiseAll","iteratorRecord","resultCapability","nextValue","rejectElement","constructor","reject","nextPromise","resolve","resolveElement","promise","performPromiseAllArray","performPromiseRace","all","iterable","ex","race","is-arguments",4,"arg","tryCatch2r","tryCatch1n","Fn","TypeIsNotObject","SpeciesConstructor","O","defaultConstructor","IsConstructor","IsPromise","undefined","_promise_state","resolver","thenFastPath","FAST_PATH_MAKE_CAP","FAST_PATH_NONE","freeCapabilityList","pop","strictConstructors","hasOwnProperty","dontReuse","thenFastPathResolver","wasFastPath","FAST_PATH_CTOR_BAILED","free","getPromiseAndFree","promiseCheckAndResolve","PROMISE_PENDING","resolvePromise","promiseCheckAndReject","rejectPromise","promiseCapability","handlerResult","noFree","promiseReactionJob","handler","argument","PROMISE_FAKE_CAPABILITY","PromiseReactionJobTask","triggerPromiseReaction","freePromiseReactionJobTasks","asap","fulfillPromise","_promise_fulfillReactions0","_promise_reactionCapability0","_promise_rejectReactions0","idx","_promise_result","PROMISE_FULFILLED","reason","PROMISE_REJECTED","getThen","then","PromiseResolveThenableJobTask","resolution","triggerPromiseResolveThenableJob","freePromiseResolveThenableJobTasks","promiseResolveThenableJob","thenable","alreadyResolved","promisePrototypeThen","fakeRetvalFromThen","onFulfilled","onReject","supportSpecies","dontReuseResolvers","useES2015Class","species","PROMISE_IDENTITY","v","PROMISE_THROWER","PROMISE_RESOLVING","PromiseConstruct","makeClass","eval","Promise$prototype","catch","onRejected","fakeRetval","then0","get","./promise-extra.js","asap/raw",5,"init","lookup","revLookup","charCodeAt","toByteArray","b64","j","tmp","placeHolders","arr","Arr","L","tripletToBase64","num","encodeChunk","uint8","start","end","output","fromByteArray","extraBytes","maxChunkLength","len2","Uint8Array",6,"typedArraySupport","foo","subarray","byteLength","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","parent","fromNumber","fromString","arguments","fromObject","that","allocate","checked","string","encoding","write","isBuffer","fromBuffer","fromArray","ArrayBuffer","buffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","copy","__proto__","type","fromPool","poolSize","rootParent","RangeError","SlowBuffer","subject","buf","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","Infinity","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","offset","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","slice","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","String","fromCharCode","apply","ret","out","toHex","bytes","checkOffset","ext","checkInt","max","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","replace","INVALID_BASE64_RE","trim","units","leadSurrogate","byteArray","c","hi","lo","src","dst","INSPECT_MAX_BYTES","_augment","b","_isBuffer","compare","y","isEncoding","concat","list","pos","item","equals","inspect","match","indexOf","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","target","targetStart","set","fill","base64-js","isarray",7,8,"EventEmitter","_events","_maxListeners","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","emit","er","args","listeners","error","addListener","listener","m","newListener","warned","console","trace","on","once","g","removeListener","fired","position","splice","removeAllListeners","listenerCount","evlistener","emitter",9,"hasOwn","isPlainObject","nodeType","has_own_constructor","has_is_property_of_method","options","copyIsArray","clone","deep",10,"MemoryCache","_cache","createMap","_timeouts","create","expireTime","clear",11,"process","F","k","fun","thisArg","filter","location","assign","_this","D","hello","use","utils","settings","redirect_uri","href","split","response_type","display","state","oauth_proxy","timeout","popup","resizable","scrollbars","width","height","scope","scope_map","basic","default_service","force","page_uri","services","service","Event","id","login","encodeFunction","filterEmpty","network","qs","diffKey","opts","merge","proxy","provider","callbackId","globalEvent","JSON","store","fulfill","authResponse","redirectUri","responseType","oauth","test","grant","client_id","session","SCOPE_SPLIT","scopeMap","unique","scope_delim","access_token","expires","Date","getTime","diff","unchanged","version","refresh_token","stringify","auth","iframe","timer","closed","response","logout","_opts","message","getAuthResponse","events","params","formatFunction","reg","RegExp","isEmpty","param","decodeURIComponent","json","localStorage","getItem","setItem","removeItem","cache","cookie","_m","days","append","attr","createElement","innerHTML","setAttribute","body","appendChild","getElementsByTagName","style","left","bottom","unshift","path","URL","cloneNode","STATE_PENDING","STATE_FULFILLED","STATE_REJECTED","api","executor","fulfillValue","rejectReason","deliver","curr","execute","execute_handlers","handlers","nextTick","setImmediate","cb","resolved","separator","findEvents","evt","off","emitAfter","guid","random","documentElement","dualScreenTop","screenTop","screen","top","innerHeight","clientHeight","dualScreenLeft","screenLeft","innerWidth","clientWidth","optionsArray","navigator","userAgent","open","focus","responseHandler","authCallback","closeWindow","frameElement","removeChild","close","addEventListener","oauth_token","hash","expires_in","error_message","error_description","oauth_redirect","oldSessions","expired","CURRENT_TIME","eventName","oldSess","refresh","getPath","defaults","base","request","headers","formatResponse","statusCode","success","wrap","paging","actions","delete","xhr","jsonp","form","formatUrl","sign","proxy_response_type","suppress_response_codes","hasBinary","cors","request_cors","onprogress","upload","onuploadprogress","_query","callbackID","post","XMLHttpRequest","domInstance","toUpperCase","Element","tagName","isBinary","FormData","headersToJSON","exec","binary","onload","responseText","_e","status","statusText","getAllResponseHeaders","onerror","File","Blob","HTMLInputElement","files","overrideMimeType","setRequestHeader","send","operaFix","bool","head","script","async","onreadystatechange","readyState","text","newform","doc","reenableAfterSubmit","win","callbackonload","elements","disabled","enctype","input","el","inputs","NodeList","parentNode","innerText","getAttribute","submit","ee","FileList","toBlob","dataURI","atob","dataToJSON","w","nodeListToJSON","file","nodelist","opener","chrome","identity","launchWebAuthFlow","_open","interactive","ref","responseUrl","_popup","storage","local","cordova","hidden","utilPopup","redirectUriOrigin","origin","protocol","hostname","executeScript","formatError","formatFile","req","root","thumb_exists","thumbnail","is_dir","mime_type","downloadLink","OAuth1Settings","token","OAuth2Settings","dropbox","redirect","me","me/files","me/folder","me/folders","default","fileName","del","uid","display_name","first_name","shift","last_name","contents","is_deleted","formatUser","picture","formatFriends","d","pictures","images","sort","cover_photo","photos","can_upload","upload_location","facebook","email","share","birthday","videos","friends","publish_files","publish","offline_access","auth_type","me/friends","me/following","me/followers","me/share","me/like","me/albums","me/album","me/photos","me/photo","friend/albums","friend/photos","getApiUrl","extraParams","skipNetwork","flickr","withUser","user_nsid","userId","user_id","getBuddyIcon","profile","size","nsid","iconserver","iconfarm","createPhotoUrl","farm","server","secret","stat","formatPhotos","photoset","checkResponse","photo","title","createPictures","source","NO_LIMIT","sizes","contacts","contact","realname","username","page","pages","per_page","photoset_id","_content","jsoncallback","meta","errorDetail","suffix","firstName","lastName","formatRequest","foursquare","user","items","avatar_url","Link","github","toInt","formatFeed","formatItem","thumbnailLink","mimeType","formatImage","image","feed","entry","formatEntry","gEntry","formatPerson","displayName","$t","gd$email","address","emails","updated","link","pic","gd$etag","category","_a","group","media$group","media$content","mediaContent","mediaThumbnail","media$thumbnail","description","summary","updated_time","created_time","published","rel","scheme","term","openSearch$itemsPerPage","openSearch$startIndex","total","openSearch$totalResults","nextPageToken","Multipart","addFile","fr","FileReader","addContent","btoa","lineBreak","readAsBinaryString","content","counter","ready","boundary","delim","dataUri","onready","uploadDrive","parents","contactsUrl","google","create_event","access_type","approval_prompt","me/contacts","me/feed","me/file","put","patch","family_name","familyName","given_name","givenName","error_type","formatFriend","profile_picture","full_name","pagination","next_url","instagram","caption","standard_resolution","errorCode","Message","ErrorCode","getErrorCode","details","Authorization","joinme","scheduler","meetings","meetings/info","meetings/start/adhoc","meetings/start/scheduled","meetingId","meetings/schedule","meetings/update","meetings/delete","fullName","formattedName","pictureUrl","emailAddress","_count","_start","_total","empty","formatQuery","oauth2_access_token","like","linkedin","visibility","attribution","comment","submitted-url","submitted-image-url","headline","next_href","soundcloud","profile_image_url_https","profile_image_url","users","errors","next_cursor_str","arrayToDataResponse","twitter","photo_max","error_code","error_msg","vk","fields","formatDefault","formatAlbums","preferred","is_friend","windows","Content-Type","results","nickname","handle","imageUrl","field","yql","yahoo","define","amd","_process",12,"isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","log","LN2",13,"idbModules","util","cleanInterface","testObject","context","event","StringList","_items","contains","quote","polyfill","compoundKeyPolyfill","cmp","IDBFactory","createObjectStore","IDBDatabase","createIndex","IDBObjectStore","add","indexGet","IDBIndex","indexGetKey","getKey","indexCursor","openCursor","indexKeyCursor","openKeyCursor","storeGet","storeDelete","storeCursor","storeKeyCursor","bound","IDBKeyRange","upperBound","lowerBound","only","requestResult","getOwnPropertyDescriptor","IDBRequest","cursorPrimaryKey","IDBCursor","cursorKey","cursorValue","IDBCursorWithValue","key1","key2","encodeCompoundKey","keyPath","encodeCompoundKeyPath","__insertData","isCompoundKey","setInlineCompoundKey","indexNames","lower","upper","lowerOpen","upperOpen","removeInlineCompoundKey","IDBTransaction","VERSION_CHANGE","compoundKeysPropertyName","propertySeparator","keySeparator","decodeCompoundKeyPath","propertySeparatorRegExp","encodedKeyPath","Key","getValue","encodedKey","decodeCompoundKey","validate","encode","validateKeyLength","decode","createDOMException","Sca","decycle","checkForCompletion","queuedObjects","returnCallback","derezObj","readBlobAsDataURL","blob","reader","onloadend","loadedEvent","dataURL","blobtype","updateEncodedBlob","readAsDataURL","encoded","derez","nu","Boolean","objects","$ref","paths","$type","$enc","retrocycle","$","dataURLToBlob","contentType","raw","BASE64_MARKER","rawLength","uInt8Array","rez","px","parseFloat","finishEncode","padBase32Exponent","padBase32Mantissa","zeros","flipBase32","flipped","pow32","mantissa","exponent","whole","fraction","expansion","roundToPrecision","precision","toPrecision","negate","getType","types","arrayValue","setValue","props","isMultiEntryMatch","encodedEntry","keyType","collations","substring","isKeyInRange","range","lowerMatch","upperMatch","__lower","__upper","findMultiEntryMatches","keyEntry","matches","nested","signValues","date","key32","decimalIndex","significantDigitIndex","inArray","encodedItem","decoded","decodedItem","createNativeEvent","debug","ShimEvent","bubbles","cancelable","eventPhase","timeStamp","valueOf","useNativeEvent","IDBVersionChangeEvent","createEvent","createNativeDOMException","DOMException","createNativeDOMError","DOMError","createError","logError","DEBUG","findError","err","useNativeDOMException","useNativeDOMError","createDOMError","onsuccess","transaction","IDBOpenDBRequest","onblocked","onupgradeneeded","direction","keyColumnName","valueColumnName","__assertActive","primaryKey","__store","__range","__req","__keyColumnName","__valueColumnName","__valueDecoder","__count","__offset","__lastKeyContinued","__multiEntryIndex","multiEntry","__unique","__find","__findMultiEntry","__findBasic","tx","recordsToLoad","quotedKeyColumnName","sql","sqlValues","__prefetchedData","__prefetchedIndex","executeSql","rows","__decode","__multiEntryOffset","rowItem","rowKey","matchingKey","reverse","__onsuccess","__matchedKeys","recordsToPreloadOnContinue","cursorPreloadPackSize","__pushToQueue","advance","update","valueToUpdate","__assertWritable","__addToTransactionQueue","__indexes","indexKey","rowsAffected","indexProperties","objectStore","columnName","optionalParams","__deleted","__clone","__createIndex","columnExists","failure","applyIndex","__updateIndexList","addIndexEntry","__deleteIndex","indexList","deleted","__fetchIndexData","opType","hasKey","recordCount","record","row","storeProperties","autoIncrement","autoInc","indexName","newStore","__createObjectStore","db","__objectStores","objectStoreNames","__versionTransaction","__assertVersionChange","__deleteObjectStore","__validateKey","__deriveKey","getNextAutoIncKey","seq","paramMap","sqlStart","sqlEnd","__createRequest","optionalParameters","deleteIndex","storeNames","mode","__id","uniqueID","__active","__running","__errored","__requests","__storeNames","onabort","oncomplete","__executeRequests","transactionError","abort","transactionFinished","__db","executeNextRequest","op","__tx","READ_ONLY","objectStoreName","READ_WRITE","__closed","onversionchange","storeName","createOptions","deleteObjectStore","createSysDB","sysDbCreateError","sysdb","openDatabase","DEFAULT_DB_SIZE","modules","dbCreateError","calledDbCreateError","openDB","oldVersion","systx","newVersion","__oncomplete","deleteDatabase","dbError","calledDBError","deleteFromDbVersions","tables","deleteTables","encodedKey1","encodedKey2","decodedKey1","decodedKey2","warn","shimIndexedDB","shim","__useShim","indexedDB","__debug","webkitIndexedDB","mozIndexedDB","oIndexedDB","msIndexedDB","poorIndexedDbSupport","webkitIDBDatabase","webkitIDBTransaction","webkitIDBCursor","webkitIDBKeyRange",14,"ctor","superCtor","super_","TempCtor",15,"toStr","isStandardArguments","isLegacyArguments","callee","supportsStandardArguments",16,"_interopRequireDefault","__esModule","Log","_loglevel","_loglevel2","originalFactory","methodFactory","methodName","logLevel","loggerName","rawMethod","setLevel","levels","ERROR","loglevel",17,"_classCallCheck","instance","Constructor","Acl","_createClass","descriptor","protoProps","staticProps","_errors","_isPlainObject","_isPlainObject2","aclAttribute","env","KINVEY_ACL_ATTRIBUTE","entity","KinveyError","acl","groups","gr","gw","creator","./errors","lodash/isPlainObject",18,"Aggregation","_query2","_result","_result2","_assign","_assign2","_forEach2","_isObject","_isObject2","_isString","_isString2","_isFunction","_isFunction2","initial","reduce","_initial","_key","_reduce","objectOrKey","Query","entities","aggregation","entityNames","attributes","segments","segment","condition","by","./query","lodash/assign","lodash/forEach","lodash/isFunction","lodash/isObject","lodash/isString","lodash/result",19,"Client","_localStorage","_localStorage2","_url","_url2","activeUserCollectionName","KINVEY_ACTIVE_USER_COLLECTION_NAME","activeSocialIdentityTokenCollectionName","KINVEY_ACTIVE_SOCIAL_IDENTITY_TOKEN_COLLECTION_NAME","_sharedInstance","KINVEY_API_PROTOCOL","host","KINVEY_API_HOST","appKey","appId","appSecret","masterSecret","hostnameParsed","encryptionKey","remove","socialIdentity","client","local-storage",20,"Command","_client","_enums","rpcNamespace","KINVEY_RPC_NAMESPACE","command","sharedInstance","executeNetworkRequest","HttpMethod","POST","pathname","properties","defaultAuth","./client","./enums",21,"AuthorizationGrant","AuthorizationCodeLoginPage","AuthorizationCodeAPI","freeze","AuthType","All","App","Basic","Default","Master","None","Session","DataStoreType","Sync","Cache","Network","User","GET","PATCH","PUT","DELETE","SocialIdentity","Facebook","Google","LinkedIn","StatusCode","Ok","Created","RedirectTemporarily","RedirectPermanetly","NotFound","ServerError",22,"NoResponseError","NotFoundError","NetworkConnectionError","InvalidCredentialsError","InsufficientCredentialsError","ActiveUserError","_util","_util2","SubType","captureStackTrace","inherits",23,"Kinvey","_babybird","_babybird2","_aggregation","_command","_log","_metadata","_datastore","_sync","_user","_network","appdataNamespace","KINVEY_DATASTORE_NAMESPACE","NetworkRequest","authType","DataStore","Metadata","./aggregation","./command","./log","./metadata","./requests/network","./stores/datastore","./sync","./user","babybird",24,25,"kmdAttribute","KINVEY_KMD_ATTRIBUTE","kmd","ect","emailVerification","lmt","lastModified","authtoken",26,"MobileIdentityConnect","_path","_path2","authPathname","KINVEY_MIC_AUTH_PATHNAME","tokenPathname","KINVEY_MIC_TOKEN_PATHNAME","KINVEY_MIC_PROTOCOL","KINVEY_MIC_HOST","authorizationGrant","clientId","requestCodeWithPopup","requestTempLoginUrl","requestCodeWithUrl","requestToken","temp_login_uri","_this2","Popup","loadHandler","loadedUrl","redirected","closeHandler","loginUrl","password","followRedirect","getHeader","grant_type","automaticallyRefreshAuthToken","KINVEY_MIC_IDENTITY","./utils/popup",27,"_typeof","_object","_sift","_sift2","_isArray","_isArray2","_isNumber","_isNumber2","_isRegExp","_isRegExp2","skip","_fields","_filter","_sort","_limit","_skip","addFilter","$and","nor","or","flag","divisor","remainder","regExp","ignoreCase","flags","multiline","extended","dotMatchesAll","coord","maxDistance","bottomLeftCoord","upperRightCoord","coords","$box","$polygon","_size","_parent","ascending","descending","operator","queries","currentQuery","members","member","_this3","_ret","aField","bField","modifier","./utils/object","lodash/isArray","lodash/isNumber","lodash/isRegExp","sift",28,"compose","level","c2","c0","c3","c1","AsciiTree","generate","tree","nodes","last","subTree",29,"_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","KinveyMiddleware","Middleware","_asciiTree","generateTree","_Middleware","getPrototypeOf","./asciiTree",30,"CacheMiddleware","_get","property","desc","getter","_middleware","_db","_urlPattern","_urlPattern2","_KinveyMiddleware","adapters","DBAdapter","IndexedDB","WebSQL","LocalStorage","Memory","pattern","_ref","collection","DB","findById","find","save","removeById","../../enums","../middleware","../persistence/db","url-pattern",31,"ParseMiddleware",32,"SerializeMiddleware",33,"dbCache","TransactionMode","ReadWrite","ReadOnly","inTransaction","containsCollection","txn","openTransaction","pending","cursor","_this4","singular","_this5","../../../errors","indexeddbshim",34,"_keyBy","_keyBy2","_merge","_merge2","_values","_values2","idAttribute","KINVEY_ID_ATTRIBUTE","existingEntities","existingEntitiesById","entitiesById","existingEntityIds","existingEntity","lodash/keyBy","lodash/merge","lodash/values",35,"_promiseQueue","_promiseQueue2","_fastMemoryCache","_fastMemoryCache2","_find","_find2","caches","configure","entityIds","fast-memory-cache","lodash/find","promise-queue",36,"_map","_map2","masterCollectionName","webSQL","parameters","escapedCollection","isMaster","isMulti","writeTxn","readTransaction","responses","_","resultSet","rowCount","lodash/map",37,"_indexeddb","_localstorage","_memory","_websql","_reduce2","adapter","isSupported","chars","objectId","objectIdPrefix","generateObjectId","promises","../../aggregation","../../errors","../../log","../../query","./adapters/indexeddb","./adapters/localstorage","./adapters/memory","./adapters/websql","lodash/reduce",38,"NetworkRack","CacheRack","KinveyRack","Rack","_parse","_serialize","_findIndex","_findIndex2","sharedCacheRackInstance","sharedNetworkRackInstance","middlewares","canceled","middleware","middlewareClass","existingMiddleware","_Rack","_KinveyRack","_KinveyRack2","./middleware","./middleware/cache","./middleware/parse","./middleware/serialize","lodash/findIndex",39,"DeltaFetchRequest","_request","_local","_response","_query3","lmtAttribute","KINVEY_LMT_ATTRIBUTE","maxIdsPerRequest","KINVEY_MAX_IDS","_KinveyRequest","localRequest","LocalRequest","Response","cacheResponse","cacheDocuments","networkRequest","networkResponse","networkDocuments","deltaSet","cacheDocumentIds","cacheDocument","networkDocument","deltaSetIds","ids","_networkRequest","_promise","initialResponse","isSuccess","addHeaders","KinveyRequest","../enums","../errors","../query","./local","./network","./request","./response",40,"_rack","rack","cancel","../rack/rack",41,"socialIdentityAttribute","KINVEY_SOCIAL_IDENTITY_ATTRIBUTE","micIdentity","usersNamespace","KINVEY_USERS_NAMESPACE","activeSocialIdentity","getActiveSocialIdentity","audience","activeUserData","getActiveUserData","setActiveUserData","setActiveSocialIdentity",42,"RequestProperties","appVersionKey","addProperties","clearProperty","_properties","getProperty","major","minor","appVersion","setProperty",43,"Request","_set","setter","_device","_string","_qs","_qs2","_appendQuery","_appendQuery2","_isEmpty","_isEmpty2","Auth","app","master","none","credentials","KINVEY_DEFAULT_TIMEOUT","executing","Accept","accept","header","setHeader","names","_method","_data","contentTypeHeader","removeHeader","_Request","KINVEY_API_VERSION","device","Device","skipBL","authorizationHeader","addHeader","customProperties","customPropertiesHeader","customPropertiesByteCount","byteCount","customPropertiesMaxBytesAllowed","KINVEY_MAX_HEADER_BYTES","queryString","authInfo","error2","../client","../utils/device","../utils/string","./properties","append-query","lodash/isEmpty",44,45,"CacheStore","_networkstore","_deltafetch","_differenceBy","_differenceBy2","syncCollectionName","KINVEY_SYNC_COLLECTION_NAME","_NetworkStore","ttl","useDeltaFetch","_pathname","networkPromise","syncCount","networkEntities","removedEntities","removeEntityIds","removeQuery","info","_this6","_this7","_this8","_this9","_syncPathname","metadata","saved","isLocalEntity","originalId","_id","removed","savedResults","removedResults","savedResult","removedResult","_this10","_this11","pushResponse","pull","pullResponse","_this12","syncData","NetworkStore","../aggregation","../log","../requests/deltafetch","../requests/local","../requests/network","../requests/response","../utils/object","./networkstore","lodash/differenceBy",46,"_syncstore","_userstore","_filestore","_cachestore","SyncStore","UserStore","FileStore","./cachestore","./filestore","./syncstore","./userstore",47,"filesNamespace","KINVEY_FILES_NAMESPACE","download","tls","ttl_in_seconds","downloadByUrl","_downloadURL","stream","_filename","public","_public","X-Kinvey-Content-Type","uploadUrl","_uploadURL","_requiredHeaders","_expiresAt","clearHeaders","uploadResponse",48,"_Log","../Log",49,"_CacheStore",50,"_identity","usernameExists",51,"enabled","KINVEY_SYNC_DEFAULT_STATE","isEnabled","enable","disable","syncStore","getInstance","greaterThan","sync",52,"_acl","_mic","usernameAttribute","KINVEY_USERNAME_ATTRIBUTE","emailAttribute","KINVEY_EMAIL_ATTRIBUTE","supportedIdentities","setActiveUser","activeUser","getActiveUser","usernameOrData","_socialIdentity","isActiveUser","isActive","setAsActiveUser","mic","connect","collectionName","isIdentitySupported","equalTo","helloSettings","signup","tokens","userStore","loginWithIdentity","loginWithMIC","connectWithIdentity","signupWithIdentity","./acl","./mic","hellojs",53,"./object",54,"dotProperty","current","isDefined","nsInterface",55,"_EventEmitter",56,"stringLength","partCount","encodeURI","randomString","_uid2","_uid",57,"accessor","ls","stub","tracking","./stub","./tracking",58,"ms","found",59,"listen","change","attachEvent","onstorage","fire","newValue","oldValue","listening","ns",60,"Hash","nativeCreate","objectProto","./_nativeCreate",61,"getNative","Map","./_getNative","./_root",62,"MapCache","mapClear","mapDelete","mapGet","mapHas","mapSet","has","./_mapClear","./_mapDelete","./_mapGet","./_mapHas","./_mapSet",63,"Reflect",64,"Set",65,"SetCache","__data__","cachePush","./_MapCache","./_cachePush",66,"Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","./_stackClear","./_stackDelete","./_stackGet","./_stackHas","./_stackSet",67,68,69,"WeakMap",70,"addMapEntry","pair",71,"addSetEntry",72,73,"arrayAggregator","iteratee","accumulator",74,"arrayEach",75,"arrayIncludes","baseIndexOf","./_baseIndexOf",76,"arrayIncludesWith","comparator",77,"arrayMap",78,"arrayPush",79,"arrayReduce","initAccum",80,"arraySome","predicate",81,"assignMergeValue","eq","./eq",82,"assignValue","objValue",83,"assocDelete","assocIndexOf","lastIndex","arrayProto","./_assocIndexOf",84,"assocGet",85,"assocHas",86,87,"assocSet",88,"baseAggregator","baseEach","./_baseEach",89,"baseAssign","copyObject","./_copyObject","./keys",90,"baseCastFunction","./identity",91,"baseCastPath","stringToPath","./_stringToPath","./isArray",92,"baseClone","isDeep","isFull","customizer","stack","isArr","initCloneArray","copyArray","tag","getTag","isFunc","funcTag","genTag","cloneBuffer","objectTag","argsTag","isHostObject","initCloneObject","copySymbols","cloneableTags","initCloneByTag","stacked","baseForOwn","subValue","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","./_Stack","./_arrayEach","./_assignValue","./_baseAssign","./_baseForOwn","./_cloneBuffer","./_copyArray","./_copySymbols","./_getTag","./_initCloneArray","./_initCloneByTag","./_initCloneObject","./_isHostObject","./isBuffer","./isObject",93,"baseCreate","proto","objectCreate",94,"baseDifference","includes","isCommon","valuesLength","baseUnary","LARGE_ARRAY_SIZE","cacheHas","outer","computed","valuesIndex","./_SetCache","./_arrayIncludes","./_arrayIncludesWith","./_arrayMap","./_baseUnary","./_cacheHas",95,"createBaseEach","./_createBaseEach",96,"baseFind","eachFunc","retKey",97,"baseFindIndex","fromRight",98,"baseFlatten","depth","isStrict","isArrayLikeObject","./_arrayPush","./isArguments","./isArrayLikeObject",99,"createBaseFor","baseFor","./_createBaseFor",100,"./_baseFor",101,"baseGet","isKey","./_baseCastPath","./_isKey",102,"baseHas",103,"baseHasIn",104,"fromIndex","indexOfNaN","./_indexOfNaN",105,"baseIsEqual","other","bitmask","isObjectLike","baseIsEqualDeep","./_baseIsEqualDeep","./isObjectLike",106,"equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","isTypedArray","equalArrays","equalByTag","PARTIAL_COMPARE_FLAG","objIsWrapped","othIsWrapped","equalObjects","./_equalArrays","./_equalByTag","./_equalObjects","./isTypedArray",107,"baseIsMatch","matchData","noCustomizer","srcValue","UNORDERED_COMPARE_FLAG","./_baseIsEqual",108,"baseIteratee","baseMatchesProperty","baseMatches","./_baseMatches","./_baseMatchesProperty","./property",109,"baseKeys","nativeKeys",110,"baseKeysIn","iteratorToArray","enumerate","propertyIsEnumerable","./_Reflect","./_iteratorToArray",111,"baseMap","isArrayLike","./isArrayLike",112,"getMatchData","./_baseIsMatch","./_getMatchData",113,"hasIn","./get","./hasIn",114,"baseMerge","srcIndex","keysIn","baseMergeDeep","./_assignMergeValue","./_baseMergeDeep","./keysIn",115,"mergeFunc","toPlainObject","./_baseClone","./isFunction","./isPlainObject","./toPlainObject",116,"baseProperty",117,"basePropertyDeep","./_baseGet",118,"baseReduce",119,"baseSlice",120,"baseTimes",121,"baseToPairs",122,123,"baseValues",124,"isKeyable","HASH_UNDEFINED","./_isKeyable",125,126,"checkGlobal",127,"cloneArrayBuffer","arrayBuffer","./_Uint8Array",128,129,"cloneMap","mapToArray","./_addMapEntry","./_arrayReduce","./_mapToArray",130,"cloneRegExp","regexp","reFlags",131,"cloneSet","setToArray","./_addSetEntry","./_setToArray",132,"cloneSymbol","symbol","symbolValueOf","symbolProto","./_Symbol",133,"cloneTypedArray","typedArray","./_cloneArrayBuffer",134,135,"copyObjectWith","./_copyObjectWith",136,137,"getSymbols","./_getSymbols",138,"createAggregator","initializer","./_arrayAggregator","./_baseAggregator","./_baseIteratee",139,"createAssigner","assigner","rest","sources","guard","isIterateeCall","./_isIterateeCall","./rest",140,141,"keysFunc",142,"isPartial","isUnordered","arrLength","othLength","arrValue","othValue","compared","./_arraySome",143,"convert",144,"objProps","objLength","othProps","skipCtor","objCtor","othCtor","./_baseHas",145,"getLength","./_baseProperty",146,"toPairs","isStrictComparable","./_isStrictComparable","./toPairs",147,"isNative","./isNative",148,"getOwnPropertySymbols",149,"objectToString","funcToString","mapCtorString","setCtorString","weakMapCtorString","Ctor","ctorString","./_Map","./_Set","./_WeakMap",150,"hasPath","hasFunc","isLength","isIndex","isString","./_isIndex","./_parent","./isLength","./isString","./last",151,"hashDelete","hashHas","./_hashHas",152,"hashGet",153,154,"hashSet",155,"indexKeys","./_baseTimes",156,157,158,"./_cloneMap","./_cloneRegExp","./_cloneSet","./_cloneSymbol","./_cloneTypedArray",159,"isPrototype","./_baseCreate","./_isPrototype",160,161,"reIsUint",162,163,"reIsPlainProp","reIsDeepProp",164,165,166,167,168,"./_Hash",169,"./_assocDelete","./_hashDelete",170,"./_assocGet","./_hashGet",171,"./_assocHas",172,"./_assocSet","./_hashSet",173,174,175,"./_baseSlice",176,"objectTypes","function","freeExports","freeModule","freeGlobal","freeSelf","freeWindow","thisGlobal","./_checkGlobal",177,178,179,180,181,182,183,"rePropName","reEscapeChar","./toString",184,"nonEnumShadows","./_createAssigner",185,"constant",186,"differenceBy","./_baseDifference","./_baseFlatten",187,188,"./_baseFind","./_baseFindIndex",189,"findIndex",190,"./_baseCastFunction",191,"defaultValue",192,"./_baseHasIn","./_hasPath",193,194,195,196,"./_getLength",197,198,"moduleExports","./constant",199,200,201,202,"reIsNative","reIsHostCtor","reRegExpChar",203,204,205,206,"objectCtorString",207,"isRegExp",208,209,"isSymbol",210,"typedArrayTags",211,"keyBy","./_createAggregator",212,"isProto","indexes","skipIndexes","./_baseKeys","./_indexKeys",213,"propsLength","./_baseKeysIn",214,215,"./_baseMap",216,"./_baseMerge",217,"./_basePropertyDeep",218,"./_baseReduce",219,"FUNC_ERROR_TEXT","nativeMax","toInteger","otherArgs","./_apply","./toInteger",220,221,"toNumber","INFINITY","MAX_INTEGER","./toNumber",222,"reTrim","reIsBinary","reIsOctal","freeParseInt","reIsBadHex","NAN",223,"./_baseToPairs",224,225,"symbolToString","./isSymbol",226,"./_baseValues",227,"definition","realMethod","undefinedType","bindMethod","noop","enableLoggingWhenConsoleArrives","replaceLoggingMethods","logMethods","defaultMethodFactory","Logger","defaultLevel","factory","persistLevelIfPossible","levelNum","levelName","storageKey","ignore","getPersistedLevel","storedLevel","currentLevel","TRACE","INFO","WARN","SILENT","getLevel","persist","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","noConflict",228,"normalizeArray","allowAboveRoot","up","xs","splitPathRe","splitPath","filename","resolvedPath","resolvedAbsolute","cwd","charAt","normalize","isAbsolute","trailingSlash","relative","from","to","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","dir","basename","extname",229,"cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","browser","argv","versions","binding","chdir","umask",230,"PROMISE_QUEUE_COVERAGE","./lib","./lib-cov",231,232,"Queue","maxPendingPromises","maxQueuedPromises","pendingPromises","LocalPromise","resolveWith","GlobalPromise","promiseGenerator","notify","_dequeue","getPendingLength","getQueueLength",233,"mapDomain","regexSeparators","labels","ucs2decode","extra","ucs2encode","stringFromCharCode","basicToDigit","digitToBasic","digit","adapt","delta","numPoints","firstTime","damp","baseMinusTMin","tMax","skew","oldi","baseMinusT","inputLength","initialN","bias","initialBias","lastIndexOf","maxInt","tMin","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","regexPunycode","toASCII","regexNonASCII","punycode","overflow","not-basic","invalid-input","ucs2",234,"Stringify","Parse","./parse","./stringify",235,"Utils","internals","arrayLimit","parameterLimit","strictNullHandling","plainObjects","allowPrototypes","allowDots","parseValues","part","parseObject","chain","cleanRoot","parseArrays","parseKeys","givenKey","child","tempObj","newObj","compact","./utils",236,"arrayPrefixGenerators","brackets","indices","repeat","skipNulls","generateArrayPrefix","toISOString","objKeys","arrayFormat",237,"hexTable","arrayToObject","mergeTarget","acc","references","refs","compacted",238,"maxKeys","kstr","vstr",239,"stringifyPrimitive","objectKeys","ks",240,"./decode","./encode",241,"comparable","validator","and","createValidator","nestedValidator","findValues","nv","keypath","createNestedValidator","$eq","validators","prepare","createRootValidator","$ne","$or","$gt","$gte","$lt","$lte","$mod","$in","$nin","$not","$all","$size","$nor","$regex","$where","$elemMatch","$exists","$options","plugin",242,243,"UrlPattern","P","astNodeContainsSegmentsForProvidedParams","astNodeToNames","astNodeToRegexString","baseAstNodeToRegexString","concatMap","defaultOptions","escapeForRegex","getParam","keysAndValuesToObject","newParser","regexGroupCount","stringConcatMap","regex","Result","Tagged","parser","tagged","sequence","parsers","pick","lazy","cached","baseMany","stringResult","atLeastOneResultRequired","endResult","parserResult","many1","concatMany1Till","firstChoice","U","wildcard","wildcardChar","optional","optionalSegmentStartChar","optionalSegmentEndChar","segmentNameCharset","named","segmentNameStartChar","escapedChar","escapeChar","segmentValueCharset","astNode","nextIndexes","sideEffects","maxIndex","groupCount","withoutWhitespace","isRegex","ast",244,"Url","slashes","port","urlParse","parseQueryString","slashesDenoteHost","urlFormat","urlResolve","urlResolveObject","resolveObject","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","http:","https:","ftp:","gopher:","file:","queryIndex","splitter","uSplit","slashRegex","simplePath","lowerProto","hostEnd","hec","atSign","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","h","ae","esc","escape","qm","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","hasTrailingSlash","./util",245,246,247,"ctx","seen","stylize","stylizeNoColor","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","styles","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","isDate","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","line","numLinesEst","prev","cur","ar","re","isPrimitive","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","formatRegExp","deprecate","msg","deprecated","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","null","./support/isBuffer",248,"homepage","bugs","licenses","author","contributors","main","repository","scripts","dependencies","kinvey-javascript-sdk-core","lodash","devDependencies","babel-eslint","babel-preset-es2015","babel-preset-stage-2","babelify","browserify","dotenv","envify","eslint-config-airbnb","eslint-plugin-react","exorcist","gulp","gulp-bump","gulp-eslint","gulp-git","gulp-if","gulp-plumber","gulp-prompt","gulp-rename","gulp-sourcemaps","gulp-uglify","gulp-util","run-sequence","semver-regex","vinyl-buffer","vinyl-source-stream","vinyl-transform","engines","keywords",249,"DeviceAdapter","_package","_package2","rChrome","rFirefox","rIE","rOpera","rSafari","environment","library","angular","full","os","sdk","../package.json",250,"HttpMiddleware","$injector","injector","$http","kinvey-javascript-sdk-core/src/rack/middleware",251,"_provider","ngKinvey","KinveyProvider","./provider",252,"PopupAdapter","interval",253,"_kinveyJavascriptSdkCore","_http","_popup2","_device2","networkRack","useAfter","./device","./http","./popup","kinvey-javascript-sdk-core/src/rack/middleware/serialize","kinvey-javascript-sdk-core/src/rack/rack","kinvey-javascript-sdk-core/src/utils/device","kinvey-javascript-sdk-core/src/utils/popup"],"mappings":"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","file":"kinvey.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var querystring = require('querystring')\n  , extend = require('extend')\n  , url = require('url')\n\nmodule.exports = function appendQuery(uri, q) {\n  var parts = url.parse(uri, true)\n    , parsedQuery = extend(true, {}, parts.query, typeof q === 'string' ? querystring.parse(q) : q)\n\n  parts.search = '?' + serialize(parsedQuery)\n  return url.format(parts)\n}\n\n// serialize an object recursively\nfunction serialize(obj, prefix) {\n  var str = []\n    , useArraySyntax = false\n\n  // if there's a prefix, and this object is an array, use array syntax\n  // i.e., `prefix[]=foo&prefix[]=bar` instead of `prefix[0]=foo&prefix[1]=bar`\n  if (Array.isArray(obj) && prefix) {\n    useArraySyntax = true\n  }\n\n  Object.keys(obj).forEach(function (prop) {\n    var key, query, val = obj[prop]\n\n    key = prefix ?\n      prefix + '[' + (useArraySyntax ? '' : prop) + ']' :\n      prop\n\n    query = typeof val === 'object' ?\n      serialize(val, key) :\n      encodeURIComponent(key) + '=' + encodeURIComponent(val)\n\n    str.push(query)\n  })\n\n  return str.join('&')\n}\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar querystring = require('querystring')\n  , extend = require('extend')\n  , url = require('url')\n\nmodule.exports = function appendQuery(uri, q) {\n  var parts = url.parse(uri, true)\n    , parsedQuery = extend(true, {}, parts.query, typeof q === 'string' ? querystring.parse(q) : q)\n\n  parts.search = '?' + serialize(parsedQuery)\n  return url.format(parts)\n}\n\n// serialize an object recursively\nfunction serialize(obj, prefix) {\n  var str = []\n    , useArraySyntax = false\n\n  // if there's a prefix, and this object is an array, use array syntax\n  // i.e., `prefix[]=foo&prefix[]=bar` instead of `prefix[0]=foo&prefix[1]=bar`\n  if (Array.isArray(obj) && prefix) {\n    useArraySyntax = true\n  }\n\n  Object.keys(obj).forEach(function (prop) {\n    var key, query, val = obj[prop]\n\n    key = prefix ?\n      prefix + '[' + (useArraySyntax ? '' : prop) + ']' :\n      prop\n\n    query = typeof val === 'object' ?\n      serialize(val, key) :\n      encodeURIComponent(key) + '=' + encodeURIComponent(val)\n\n    str.push(query)\n  })\n\n  return str.join('&')\n}\n\n},{\"extend\":9,\"querystring\":240,\"url\":244}],2:[function(require,module,exports){\n(function (global){\n\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\nvar BrowserMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],3:[function(require,module,exports){\n(function (global){\n/* Add Promise.all and Promise.race implementations. */\n'use strict';\nvar isArguments = require('is-arguments');\n\nvar _call = Function.call.bind(Function.call);\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\nvar _floor = Math.floor;\nvar _abs = Math.abs;\n\nvar Symbol = global.Symbol || {};\nvar symbolIterator = Symbol.iterator || '@@iterator';\n\nvar defineProperties = function(object, map) {\n  _forEach(Object.keys(map), function(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n};\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\n// The -r variant allows specifying the receiver.\nfunction tryCatch0r(fn, receiver) {\n  try {\n    return fn.call(receiver);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch1(fn, arg1) {\n  try {\n    return fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch3(fn, arg1, arg2, arg3) {\n  try {\n    return fn(arg1, arg2, arg3);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n\nvar TypeIsObject = function(x) {\n  /* jshint eqnull:true */\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  return x != null && Object(x) === x;\n};\n\nvar ToObject = function(o, optMessage) {\n  /* jshint eqnull:true */\n  if (o == null) {\n    throw new TypeError(optMessage || 'Cannot call method on ' + o);\n  }\n  return Object(o);\n};\n\nvar IsCallable = (typeof /abc/ === 'function') ? function(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function(x) { return typeof x === 'function'; /* Much faster */};\n\nvar ToNumber = function(value) {\n  /*\n  // Implementations which implement Symbol also throw the proper TypeError\n  // if it is converted to a number.\n  if (_toString(value) === '[object Symbol]') {\n    throw new TypeError('Cannot convert a Symbol value to a number');\n  }\n  */\n  return +value;\n};\n\nvar numberIsNaN = Number.isNaN || function isNaN(value) {\n  return value !== value;\n};\n\nvar numberIsFinite = Number.isFinite || function isFinite(value) {\n  return typeof value === 'number' && global.isFinite(value);\n};\n\nvar ToInteger = function(value) {\n  var number = ToNumber(value);\n  if (numberIsNaN(number)) { return 0; }\n  if (number === 0 || !numberIsFinite(number)) { return number; }\n  return (number > 0 ? 1 : -1) * _floor(_abs(number));\n};\n\nvar ToLength = function(value) {\n  var len = ToInteger(value);\n  if (len <= 0) { return 0; } // Includes converting -0 to +0\n  if (typeof Number.MAX_SAFE_INTEGER !== 'undefined') {\n    if (len > Number.MAX_SAFE_INTEGER) { return Number.MAX_SAFE_INTEGER; }\n  }\n  return len;\n};\n\n// Stripped down value-only ArrayIterator.\nvar ArrayIterator = function(array) {\n  this.i = 0;\n  this.array = array;\n};\ndefineProperties(ArrayIterator.prototype, {\n  next: function() {\n    var i = this.i;\n    var array = this.array;\n    if (!(this instanceof ArrayIterator)) {\n      throw new TypeError('Not an ArrayIterator');\n    }\n    if (typeof array !== 'undefined') {\n      var len = Array.isArray(array) ? array.length : ToLength(array.length);\n      for (; i < len; i++) {\n        var retval = array[i];\n        this.i = i + 1;\n        return { value: retval, done: false };\n      }\n    }\n    this.array = void 0;\n    return { value: void 0, done: true };\n  },\n});\nObject.defineProperty(ArrayIterator.prototype, symbolIterator, {\n  configurable: true,\n  enumerable: false,\n  writable: true,\n  value: function() { return this; },\n});\n\nvar DEFAULT_ARRAY_ITERATOR = {};\n\nvar GetIterator = function(o, detectDefault) {\n  var itFn = GetMethod(o, symbolIterator);\n  if (!IsCallable(itFn)) {\n    // Node 0.10 compatibility.\n    if (Array.isArray(o) || isArguments(o)) {\n      return detectDefault ? DEFAULT_ARRAY_ITERATOR : new ArrayIterator(o);\n    }\n    // Better diagnostics if itFn is null or undefined\n    throw new TypeError('value is not an iterable');\n  }\n  if (detectDefault && itFn === Array.prototype[symbolIterator]) {\n    return DEFAULT_ARRAY_ITERATOR;\n  }\n  var it = _call(itFn, o);\n  if (!TypeIsObject(it)) {\n    throw new TypeError('bad iterator');\n  }\n  return it;\n};\n\nvar GetMethod = function(o, p) {\n  var func = ToObject(o)[p];\n  if (func === void 0 || func === null) {\n    return void 0;\n  }\n  if (!IsCallable(func)) {\n    throw new TypeError('Method not callable: ' + p);\n  }\n  return func;\n};\n\nvar IteratorComplete = function(iterResult) {\n  return !!(iterResult.done);\n};\n\nvar IteratorClose = function(iterator, completionIsThrow) {\n  var returnMethod = GetMethod(iterator, 'return');\n  if (returnMethod === void 0) {\n    return;\n  }\n  var innerResult, innerException;\n  innerResult = tryCatch0r(returnMethod, iterator);\n  if (innerResult === errorObj) {\n    innerException = errorObj.e;\n  }\n  if (completionIsThrow) {\n    return;\n  }\n  if (innerException) {\n    throw innerException;\n  }\n  if (!TypeIsObject(innerResult)) {\n    throw new TypeError(\"Iterator's return method returned a non-object.\");\n  }\n};\n\nvar IteratorNext0 = function(it) {\n  var result = it.next();\n  if (!TypeIsObject(result)) {\n    throw new TypeError('bad iterator');\n  }\n  return result;\n};\n\nvar IteratorStep = function(it) {\n  var result = IteratorNext0(it);\n  var done = IteratorComplete(result);\n  return done ? false : result;\n};\n\nmodule.exports = function(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n) {\n\n  // This is a common step in many Promise methods\n  var getPromiseSpecies = function(C) {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Promise is not object');\n    }\n    if (symbolSpecies !== null) {\n      var S = C[symbolSpecies];\n      if (S !== void 0 && S !== null) {\n        return S;\n      }\n    }\n    return C;\n  };\n\n  var _promiseAllResolver = function(index, values, capability, remaining) {\n    var alreadyCalled = false;\n    return function(x) {\n      if (alreadyCalled) { return; }\n      alreadyCalled = true;\n      values[index] = x;\n      if ((--remaining.count) === 0) {\n        promiseReactionResolve(capability, values);\n      }\n    };\n  };\n\n  var performPromiseAll = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var values = [];\n    var remaining = { count: 1 };\n    var next, nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; ; index++) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseAllArray = function(array, C, resultCapability) {\n    var values = new Array(array.length);\n    var remaining = { count: 1 };\n    var nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; index < array.length; index++) {\n      nextValue = array[index];\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseRace = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var next, nextValue, nextPromise;\n    while (true) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        // NOTE: If iterable has no items, resulting promise will never\n        // resolve; see:\n        // https://github.com/domenic/promises-unwrapping/issues/75\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2515\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      nextPromise = C.resolve(nextValue);\n      optimizePromiseThen(\n        nextPromise, resultCapability.resolve, resultCapability.reject\n      );\n    }\n    return resultCapability.promise;\n  };\n\n  defineProperties(Promise, {\n    all: function all(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapabilityFast(C);\n      var iterator, iteratorRecord, result, ex;\n      iterator = tryCatch2(GetIterator, iterable, true);\n      if (iterator === DEFAULT_ARRAY_ITERATOR) {\n        // Fast path\n        result = tryCatch3(performPromiseAllArray, iterable, C, capability);\n        if (result !== errorObj) {\n          return result;\n        }\n        // Not safe to return capability to pool, since there may be\n        // calls to `resolve` still pending.\n        return promiseReactionReject(capability, errorObj.e, 'no free');\n      }\n      if (iterator === errorObj) {\n        return promiseReactionReject(capability, errorObj.e);\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseAll, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      // Not safe to return capability to pool, since there may be\n      // calls to `resolve` still pending.\n      return promiseReactionReject(capability, ex, 'no free');\n    },\n\n    race: function race(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapability(C);\n      var iterator, iteratorRecord, reject, result, ex;\n      iterator = tryCatch1(GetIterator, iterable);\n      if (iterator === errorObj) {\n        reject = capability.reject;\n        reject(errorObj.e);\n        return capability.promise;\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseRace, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      reject = capability.reject;\n      reject(ex);\n      return capability.promise;\n    },\n  });\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"is-arguments\":15}],4:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar asap = require('asap/raw');\n\n// When this is `false` we disable species support, for a little bit of\n// extra performance.\nvar supportSpecies = false;\n// When this is false we assume promise subclass constructors have no\n// side effects.\nvar strictConstructors = false;\n// When this is true, a new resolver is created for every Promise.\nvar dontReuseResolvers = false;\n// When this is true (and the engine supports it), the Promise will be a\n// true ES2015 class.  However, this currently slows the implementation down\n// by 30% since construction of ES2015 classes is unoptimized.\nvar useES2015Class = false;\n\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\n\nvar Symbol = global.Symbol || {};\nvar symbolSpecies = Symbol.species || (supportSpecies ? '@@species' : null);\n\nfunction defineProperties(object, map) {\n  _forEach(Object.keys(map), function definePropertiesForEach(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n}\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\nfunction tryCatch1(fn, arg) {\n  try {\n    return fn(arg);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -r variant allows specifying the receiver.\nfunction tryCatch2r(fn, receiver, arg1, arg2) {\n  try {\n    return fn.call(receiver, arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -n variant creates a new object.\nfunction tryCatch1n(Fn, arg1) {\n  try {\n    return new Fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n// Promises\n\n// Follow implementation in the ES6 spec as closely as possible, but\n// steal tricks from Bluebird for moar speed.\n// In particular, we go to great lengths to avoid allocating objects\n// and closures wherever possible in hot code.\n\nfunction TypeIsObject(x) {\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  if (false) {\n    return x !== void 0 && x !== null && Object(x) === x;\n  }\n  // It turns out that !TypeIsNotObject is faster...\n  return !TypeIsNotObject(x);\n}\nfunction TypeIsNotObject(val) {\n  // This is more appropriate when TypeIsObject may return false.\n  return val === void 0 || val === null || val === true || val === false ||\n    typeof val === 'string' || typeof val === 'number' ||\n    typeof val === 'symbol'; // jshint ignore:line\n}\n\nvar IsCallable = (typeof /abc/ === 'function') ? function IsCallableSlow(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function IsCallableFast(x) { return typeof x === 'function'; };\n\n// We can't tell callables from constructors in ES5\nvar IsConstructor = IsCallable;\n\nfunction SpeciesConstructor(O, defaultConstructor) {\n  var C = O.constructor;\n  if (C === void 0) {\n    return defaultConstructor;\n  }\n  var S;\n  if (symbolSpecies === null) {\n    S = C;\n  } else {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad constructor');\n    }\n    S = C[symbolSpecies];\n    if (S === void 0 || S === null) {\n      return defaultConstructor;\n    }\n  }\n  if (!IsConstructor(S)) {\n    throw new TypeError('Bad @@species');\n  }\n  return S;\n}\n\nfunction IsPromise(promise) {\n  if (!TypeIsObject(promise)) {\n    return false;\n  }\n  if (promise._promise_state === undefined) {\n    return false; // Uninitialized, or missing our hidden field.\n  }\n  return true;\n}\n\n// \"PromiseCapability\" in the spec is what most promise implementations\n// call a \"deferred\".\n// We're going to wrap it so that it never throws an exception.\nfunction PromiseCapability() {\n  // Declare fields of this object.\n  // (Helps with object shape optimization.)\n  var self = this;\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  this.resolver = function(resolve, reject) {\n    if (self.resolve !== void 0 || self.reject !== void 0) {\n      throw new TypeError('Bad Promise implementation!');\n    }\n    self.resolve = resolve;\n    self.reject = reject;\n  };\n}\nPromiseCapability.prototype.free = function() {\n  if (dontReuseResolvers) { return; }\n  if (this.dontReuse) { return; }\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  freeCapabilityList.push(this);\n};\nPromiseCapability.prototype.getPromiseAndFree = function() {\n  var promise = this.promise;\n  this.free();\n  return promise;\n};\nvar freeCapabilityList = [];\n\nfunction makeCapabilityFast(C) {\n  thenFastPath = FAST_PATH_MAKE_CAP;\n  // `thenFastPath` is always reset to FAST_PATH_NONE by `makeCapability`\n  return makeCapability(C);\n}\n\nfunction makeCapability(C) {\n  if (!IsConstructor(C)) {\n    thenFastPath = FAST_PATH_NONE;\n    throw new TypeError('Bad promise constructor');\n  }\n\n  var capability;\n  if (freeCapabilityList.length) {\n    capability = freeCapabilityList.pop();\n  } else {\n    capability = new PromiseCapability();\n  }\n  if (strictConstructors &&\n      C !== Promise && !C.hasOwnProperty('noSideEffects')) {\n    capability.dontReuse = true;\n  }\n  if (thenFastPath === FAST_PATH_MAKE_CAP) {\n    thenFastPathResolver = capability.resolver;\n    capability.promise = tryCatch1n(C, thenFastPathResolver);\n    var wasFastPath = (thenFastPath === FAST_PATH_CTOR_BAILED);\n    thenFastPathResolver = null;\n    thenFastPath = FAST_PATH_NONE;\n    if (capability.promise === errorObj) {\n      capability.free();\n      throw errorObj.e;\n    }\n    if (wasFastPath) { return capability.getPromiseAndFree(); }\n  } else {\n    capability.promise = new C(capability.resolver);\n  }\n  if (!(IsCallable(capability.resolve) && IsCallable(capability.reject))) {\n    throw new TypeError('Bad promise constructor');\n  }\n  return capability;\n}\n\n// Forward declaration\nvar promisePrototypeThen;\nvar fakeRetvalFromThen = false;\n\n// Constants for Promise implementation\nvar PROMISE_IDENTITY = (function PROMISE_IDENTITY(v) { return v; });\nvar PROMISE_THROWER = (function PROMISE_THROWER(t) { throw t; });\nvar PROMISE_FAKE_CAPABILITY = new PromiseCapability();\nvar PROMISE_PENDING = 0;\nvar PROMISE_RESOLVING = 1; // PROMISE_PENDING combined with alreadyResolved\nvar PROMISE_FULFILLED = 2;\nvar PROMISE_REJECTED = 3;\n\n// States for then-fast-path\nvar FAST_PATH_NONE = 0;\nvar FAST_PATH_MAKE_CAP = 1;\nvar FAST_PATH_CTOR_BAILED = 2;\n\nvar thenFastPath = FAST_PATH_NONE;\nvar thenFastPathResolver = null;\n\nfunction promiseCheckAndResolve(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  resolvePromise(promise, value);\n  return promise;\n}\nfunction promiseCheckAndReject(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  rejectPromise(promise, value);\n  return promise;\n}\nfunction promiseReactionResolve(promiseCapability, handlerResult) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var resolve = promiseCapability.resolve;\n    resolve(handlerResult);\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndResolve(promiseCapability, handlerResult);\n}\nfunction promiseReactionReject(promiseCapability, handlerResult, noFree) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var reject = promiseCapability.reject;\n    reject(handlerResult);\n    if (noFree) { return promiseCapability.promise; }\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndReject(promiseCapability, handlerResult);\n}\nfunction promiseReactionJob(handler, promiseCapability, argument) {\n  var handlerResult;\n  // Encapsulate try/catch here to avoid deoptimization.\n  handlerResult = tryCatch1(handler, argument);\n  if (promiseCapability === PROMISE_FAKE_CAPABILITY) { return; }\n  if (handlerResult === errorObj) {\n    handlerResult = errorObj.e;\n    return promiseReactionReject(promiseCapability, handlerResult);\n  }\n  return promiseReactionResolve(promiseCapability, handlerResult);\n}\n\nfunction PromiseReactionJobTask() {\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n}\nPromiseReactionJobTask.prototype.call = function() {\n  promiseReactionJob(this.handler, this.capability, this.argument);\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n  freePromiseReactionJobTasks.push(this);\n};\nvar freePromiseReactionJobTasks = [];\n\nfunction triggerPromiseReaction(handler, capability, argument) {\n  var task;\n  if (freePromiseReactionJobTasks.length) {\n    task = freePromiseReactionJobTasks.pop();\n  } else {\n    task = new PromiseReactionJobTask();\n  }\n  task.handler = handler;\n  task.capability = capability;\n  task.argument = argument;\n  asap(task);\n}\n\nfunction fulfillPromise(promise, value) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_fulfillReactions0,\n      promise._promise_reactionCapability0,\n      value);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx], promise[idx + 2], value);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = value;\n  promise._promise_state = PROMISE_FULFILLED;\n}\n\nfunction rejectPromise(promise, reason) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_rejectReactions0,\n      promise._promise_reactionCapability0,\n      reason);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx + 1], promise[idx + 2], reason);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = reason;\n  promise._promise_state = PROMISE_REJECTED;\n}\n\nfunction getThen(r) { return r.then; }\n\nfunction PromiseResolveThenableJobTask() {\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n}\nPromiseResolveThenableJobTask.prototype.call = function() {\n  promiseResolveThenableJob(this.promise, this.resolution, this.then);\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n  freePromiseResolveThenableJobTasks.push(this);\n};\nvar freePromiseResolveThenableJobTasks = [];\n\nfunction triggerPromiseResolveThenableJob(promise, resolution, then) {\n  var task;\n  if (freePromiseResolveThenableJobTasks.length) {\n    task = freePromiseResolveThenableJobTasks.pop();\n  } else {\n    task = new PromiseResolveThenableJobTask();\n  }\n  task.promise = promise;\n  task.resolution = resolution;\n  task.then = then;\n  asap(task);\n}\n\nfunction resolvePromise(promise, resolution) {\n  if (resolution === promise) {\n    return rejectPromise(promise, new TypeError('Self resolution'));\n  }\n  if (TypeIsNotObject(resolution)) {\n    return fulfillPromise(promise, resolution);\n  }\n  var then = tryCatch1(getThen, resolution);\n  if (then === errorObj) {\n    return rejectPromise(promise, errorObj.e);\n  }\n  if (!IsCallable(then)) {\n    return fulfillPromise(promise, resolution);\n  }\n  triggerPromiseResolveThenableJob(promise, resolution, then);\n}\n\nfunction promiseResolveThenableJob(promise, thenable, then) {\n  // Inlined copy of createResolvingFunctions(promise)\n  var alreadyResolved = false;\n  var resolve = function promiseResolveThenableJobResolve(resolution) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    resolvePromise(promise, resolution);\n  };\n  var reject = function promiseResolveThenableJobReject(reason) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    return rejectPromise(promise, reason);\n  };\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n  }\n  var value = tryCatch2r(then, thenable, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n}\n\nvar PromiseConstruct = function Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires \"new\"');\n  }\n  if (this._promise_state !== void 0) {\n    throw new TypeError('Bad construction');\n  }\n  // The spec requires no enumerable fields, but for speed we're going\n  // to expose our implementation here.\n  // Since most promises have exactly one handler, the first one is\n  // stored directly on the object.  The rest (if needed) are stored\n  // on the object's element array to avoid unnecessary indirection.\n  this._promise_result = void 0;\n  this._promise_state = PROMISE_PENDING;\n  this._promise_fulfillReactions0 = void 0;\n  this._promise_rejectReactions0 = void 0;\n  this._promise_reactionCapability0 = void 0;\n  if (thenFastPath === FAST_PATH_MAKE_CAP &&\n      resolver === thenFastPathResolver) {\n    // We will create the resolving functions lazily.\n    thenFastPath = FAST_PATH_CTOR_BAILED;\n    return;\n  }\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2482\n  // (This check has been reordered after the fast path.)\n  if (!IsCallable(resolver)) {\n    throw new TypeError('not a valid resolver');\n  }\n  // Inlined copy of createResolvingFunctions(this), using _promise_state\n  // to track the `alreadyResolved` boolean.\n  var promise = this;\n  var resolve = function PromiseResolve(resolution) {\n    promiseCheckAndResolve(promise, resolution);\n  };\n  var reject = function PromiseReject(reason) {\n    promiseCheckAndReject(promise, reason);\n  };\n  var value = tryCatch2(resolver, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n};\nvar Promise = (function makeClass() {\n  if (useES2015Class) {\n    try {\n      /* jshint evil:true */\n      return eval('(function(PromiseConstruct) {' +\n                  '\"use strict\";' +\n                  'return class Promise {' +\n                  '  constructor(executor) {' +\n                  '    PromiseConstruct.call(this, executor);' +\n                  '  }' +\n                  '};})')(PromiseConstruct);\n    } catch (e) { /* I guess ES2015 syntax isn't supported. */ }\n  }\n  return PromiseConstruct;\n})();\nvar Promise$prototype = Promise.prototype;\n\ndefineProperties(Promise, {\n  reject: function reject(reason) {\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionReject(capability, reason);\n  },\n\n  resolve: function resolve(v) {\n    // See https://esdiscuss.org/topic/fixing-promise-resolve for spec\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    if (IsPromise(v)) {\n      var constructor = v.constructor;\n      if (constructor === C) { return v; }\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionResolve(capability, v);\n  },\n});\n\ndefineProperties(Promise$prototype, {\n  catch: function catch_(onRejected) {\n    return this.then(void 0, onRejected);\n  },\n\n  then: function then(onFulfilled, onRejected) {\n    /* jshint bitwise: false */\n    var fakeRetval = fakeRetvalFromThen;\n    fakeRetvalFromThen = false;\n\n    var promise = this;\n    if (!IsPromise(promise)) { throw new TypeError('not a promise'); }\n    var resultCapability, C;\n    if ((!strictConstructors) && fakeRetval) {\n      resultCapability = PROMISE_FAKE_CAPABILITY;\n    } else {\n      C = SpeciesConstructor(promise, Promise);\n      if (fakeRetval &&\n          (C === Promise || C.hasOwnProperty('noSideEffects'))) {\n        resultCapability = PROMISE_FAKE_CAPABILITY;\n      } else {\n        // We might create a fake capability here.\n        resultCapability = makeCapabilityFast(C);\n      }\n    }\n    // PerformPromiseThen(promise, onFulfilled, onRejected, resultCapability)\n    if (!IsCallable(onFulfilled)) {\n      onFulfilled = PROMISE_IDENTITY;\n    }\n    if (!IsCallable(onRejected)) {\n      onRejected = PROMISE_THROWER;\n    }\n\n    var length;\n    switch (promise._promise_state & 3) {\n    case PROMISE_PENDING:\n    case PROMISE_RESOLVING:\n      length = promise._promise_state >>> 2;\n      if (length === 0) {\n        promise._promise_fulfillReactions0 = onFulfilled;\n        promise._promise_rejectReactions0 = onRejected;\n        promise._promise_reactionCapability0 = resultCapability;\n      } else {\n        var i = 3 * (length - 1);\n        promise[i] = onFulfilled;\n        promise[i + 1] = onRejected;\n        promise[i + 2] = resultCapability;\n      }\n      promise._promise_state += (1 << 2);\n      break;\n    case PROMISE_FULFILLED:\n      triggerPromiseReaction(onFulfilled, resultCapability,\n                             promise._promise_result);\n      break;\n    case PROMISE_REJECTED:\n      triggerPromiseReaction(onRejected, resultCapability,\n                             promise._promise_result);\n      break;\n    default:\n      throw new TypeError('unexpected');\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  },\n});\n// Store the identify of the Promise#then function for optimization.\npromisePrototypeThen = Promise$prototype.then;\n// This encapsulates the `then` optimization, for use by promise-extra.js\nfunction optimizePromiseThen(promise, onFulfilled, onReject) {\n  var then = promise.then;\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n    promisePrototypeThen.call(promise, onFulfilled, onReject);\n  } else {\n    then.call(promise, onFulfilled, onReject);\n  }\n}\n\n// Special \"extra\" method which is like `Promise#then` but it does\n// *not* return a `Promise`.  This can be much faster when you don't\n// need the result.\nPromise$prototype.then0 = function then0(f, r) {\n  optimizePromiseThen(this, f, r);\n};\n\nif (symbolSpecies !== null) {\n  // Default species getter.\n  Object.defineProperty(Promise, symbolSpecies, {\n    configurable: true,\n    enumerable: false,\n    get: function speciesGetter() { return this; },\n  });\n}\n\n// Add Promise.all / Promise.race methods\n// (These are split into a separate file since their implementation is\n// reasonably independent of the core and their performance is not critical.)\nrequire('./promise-extra.js')(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n);\n\nmodule.exports = Promise;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./promise-extra.js\":3,\"asap/raw\":2}],5:[function(require,module,exports){\n'use strict'\n\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nfunction init () {\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\ninit()\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n},{}],6:[function(require,module,exports){\n(function (global){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.foo = function () { return 42 }\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    this.length = 0\n    this.parent = undefined\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined') {\n    if (object.buffer instanceof ArrayBuffer) {\n      return fromTypedArray(that, object)\n    }\n    if (object instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, object)\n    }\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(array)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromTypedArray(that, new Uint8Array(array))\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n} else {\n  // pre-set for values that may exist in the future\n  Buffer.prototype.length = undefined\n  Buffer.prototype.parent = undefined\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; i--) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"base64-js\":5,\"ieee754\":12,\"isarray\":7}],7:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],8:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],9:[function(require,module,exports){\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t\"use strict\";\n\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval) {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t\"use strict\";\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== \"object\" && typeof target !== \"function\" || target == undefined) {\n\t\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n},{}],10:[function(require,module,exports){\n'use strict';\n\n/**\n * Provides in-memory cache.\n *\n * @name MemoryCache\n * @constructor\n */\nfunction MemoryCache() {\n    this._cache = createMap();\n    this._timeouts = createMap();\n}\n\n/**\n * Returns cache value for the specified key.\n *\n * @param {String} key\n * @returns {*} Value or `undefined` if value does not exist.\n */\nMemoryCache.prototype.get = function (key) {\n    return this._cache[key];\n};\n\n/**\n * Assigns value for the specified key.\n *\n * @param {String} key\n * @param {*} value\n * @param {Number} [expireTime=0] The length of time in seconds. After this time has expired, the\n *      value will be automatically deleted. 0 means that time never expire.\n */\nMemoryCache.prototype.set = function (key, value, expireTime) {\n    this.delete(key);\n    this._cache[key] = value;\n    if (expireTime) {\n        this._timeouts[key] = setTimeout(this.delete.bind(this, key), expireTime * 1000);\n    }\n};\n\n/**\n * Deletes value for the specified key.\n *\n * @param {String} key\n */\nMemoryCache.prototype.delete = function (key) {\n    delete this._cache[key];\n    if (key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n        delete this._timeouts[key];\n    }\n};\n\n/**\n * Clears the whole cache storage.\n */\nMemoryCache.prototype.clear = function () {\n    this._cache = createMap();\n    for (var key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n    }\n    this._timeouts = createMap();\n};\n\n/**\n * Creates a new object without a prototype. This object is useful for lookup without having to\n * guard against prototypically inherited properties via hasOwnProperty.\n *\n * @returns {Object}\n */\nfunction createMap() {\n    return Object.create(null);\n}\n\nmodule.exports = MemoryCache;\n\n},{}],11:[function(require,module,exports){\n(function (process){\n/*! hellojs v1.12.0 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */\r\n// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n\n/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (Array.isArray(r) && Array.isArray(a)) {\n\t\t\t\tArray.prototype.push.apply(r, a);\n\t\t\t}\n\t\t\telse if (r instanceof Object && a instanceof Object && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t// Clone it\n\t\t\t\t\ta = a.slice(0);\n\t\t\t\t}\n\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tdisplay: opts.display,\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = state.oauth_proxy + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tparent[cb](str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n\n// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n\n// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n\n(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\t\t\t\tdelete p.qs.display;\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.1\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// The facebook login window is a different size.\n\t\t\t\tp.options.popup.width = 580;\n\t\t\t\tp.options.popup.height = 400;\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/v2.4/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page:'@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tshare: '',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tif (p.qs.display === 'none') {\n\t\t\t\t\t// Google doesn't like display=none\n\t\t\t\t\tp.qs.display = '';\n\t\t\t\t}\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.approval_prompt = 'force';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\to.data = o.feed.entry.map(formatEntry);\n\t\tdelete o.feed;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments',\n\t\t\t\temail: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Instagram throws errors like 'JavaScript API is unsupported' if the display is 'popup'.\n\t\t\t\t// Make the display anything but 'popup'\n\t\t\t\tp.qs.display = '';\n\t\t\t},\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting',\n\t\t\t\temail: '',\n\t\t\t\tfriends: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n\n(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfiles: '',\n\t\t\t\tfriends: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish: 'w_share',\n\t\t\t\tpublish_files: 'w_share',\n\t\t\t\tshare: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel:{\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n\n// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function() {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n\n// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\t// See https://vk.com/dev/permissions\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\tfriends: 'friends',\n\t\t\t\tphotos: 'photos',\n\t\t\t\tvideos: 'video',\n\t\t\t\tshare: 'share',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tshare: 'wl.share',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token'\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n\n// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n\n// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n\n}).call(this,require('_process'))\n\n},{\"_process\":229}],12:[function(require,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}],13:[function(require,module,exports){\nvar idbModules = {  // jshint ignore:line\n    util: {\n        cleanInterface: false\n    }\n};\n\n(function () {\n    'use strict';\n\n    var testObject = {test: true};\n    //Test whether Object.defineProperty really works.\n    if (Object.defineProperty) {\n        try {\n            Object.defineProperty(testObject, 'test', { enumerable: false });\n            if (testObject.test) {\n                idbModules.util.cleanInterface = true;      // jshint ignore:line\n            }\n        } catch (e) {\n        //Object.defineProperty does not work as intended.\n        }\n    }\n})();\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * A utility method to callback onsuccess, onerror, etc as soon as the calling function's context is over\n     * @param {Object} fn\n     * @param {Object} context\n     * @param {Object} argArray\n     */\n    function callback(fn, context, event) {\n        //window.setTimeout(function(){\n        event.target = context;\n        (typeof context[fn] === \"function\") && context[fn].apply(context, [event]);\n        //}, 1);\n    }\n\n    /**\n     * Shim the DOMStringList object.\n     *\n     */\n    var StringList = function() {\n        this.length = 0;\n        this._items = [];\n        //Internal functions on the prototype have been made non-enumerable below.\n        if (idbModules.util.cleanInterface) {\n            Object.defineProperty(this, '_items', {\n                enumerable: false\n            });\n        }\n    };\n    StringList.prototype = {\n        // Interface.\n        contains: function(str) {\n            return -1 !== this._items.indexOf(str);\n        },\n        item: function(key) {\n            return this._items[key];\n        },\n\n        // Helpers. Should only be used internally.\n        indexOf: function(str) {\n            return this._items.indexOf(str);\n        },\n        push: function(item) {\n            this._items.push(item);\n            this.length += 1;\n            for (var i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        },\n        splice: function(/*index, howmany, item1, ..., itemX*/) {\n            this._items.splice.apply(this._items, arguments);\n            this.length = this._items.length;\n            for (var i in this) {\n                if (i === String(parseInt(i, 10))) {\n                    delete this[i];\n                }\n            }\n            for (i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        }\n    };\n    if (idbModules.util.cleanInterface) {\n        for (var i in {\n            'indexOf': false,\n            'push': false,\n            'splice': false\n        }) {\n            Object.defineProperty(StringList.prototype, i, {\n                enumerable: false\n            });\n        }\n    }\n\n    idbModules.util.callback = callback;\n    idbModules.util.StringList = StringList;\n    idbModules.util.quote = function(arg) {\n        return \"\\\"\" + arg + \"\\\"\";\n    };\n\n}(idbModules));\n\n(function (idbModules) {\n    'use strict';\n\n    /**\n     * Polyfills missing features in the browser's native IndexedDB implementation.\n     * This is used for browsers that DON'T support WebSQL but DO support IndexedDB\n     */\n    function polyfill() {\n        if (navigator.userAgent.match(/MSIE/) ||\n            navigator.userAgent.match(/Trident/) ||\n            navigator.userAgent.match(/Edge/)) {\n            // Internet Explorer's native IndexedDB does not support compound keys\n            compoundKeyPolyfill();\n        }\n    }\n\n    /**\n     * Polyfills support for compound keys\n     */\n    function compoundKeyPolyfill() {\n        var cmp = IDBFactory.prototype.cmp;\n        var createObjectStore = IDBDatabase.prototype.createObjectStore;\n        var createIndex = IDBObjectStore.prototype.createIndex;\n        var add = IDBObjectStore.prototype.add;\n        var put = IDBObjectStore.prototype.put;\n        var indexGet = IDBIndex.prototype.get;\n        var indexGetKey = IDBIndex.prototype.getKey;\n        var indexCursor = IDBIndex.prototype.openCursor;\n        var indexKeyCursor = IDBIndex.prototype.openKeyCursor;\n        var storeGet = IDBObjectStore.prototype.get;\n        var storeDelete = IDBObjectStore.prototype.delete;\n        var storeCursor = IDBObjectStore.prototype.openCursor;\n        var storeKeyCursor = IDBObjectStore.prototype.openKeyCursor;\n        var bound = IDBKeyRange.bound;\n        var upperBound = IDBKeyRange.upperBound;\n        var lowerBound = IDBKeyRange.lowerBound;\n        var only = IDBKeyRange.only;\n        var requestResult = Object.getOwnPropertyDescriptor(IDBRequest.prototype, 'result');\n        var cursorPrimaryKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'primaryKey');\n        var cursorKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'key');\n        var cursorValue = Object.getOwnPropertyDescriptor(IDBCursorWithValue.prototype, 'value');\n\n        IDBFactory.prototype.cmp = function(key1, key2) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key1 instanceof Array) {\n                args[0] = encodeCompoundKey(key1);\n            }\n            if (key2 instanceof Array) {\n                args[1] = encodeCompoundKey(key2);\n            }\n            return cmp.apply(this, args);\n        };\n\n        IDBDatabase.prototype.createObjectStore = function(name, opts) {\n            if (opts && opts.keyPath instanceof Array) {\n                opts.keyPath = encodeCompoundKeyPath(opts.keyPath);\n            }\n            return createObjectStore.apply(this, arguments);\n        };\n\n        IDBObjectStore.prototype.createIndex = function(name, keyPath, opts) {\n            var args = Array.prototype.slice.call(arguments);\n            if (keyPath instanceof Array) {\n                args[1] = encodeCompoundKeyPath(keyPath);\n            }\n            return createIndex.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.add = function(value, key) {\n            return this.__insertData(add, arguments);\n        };\n\n        IDBObjectStore.prototype.put = function(value, key) {\n            return this.__insertData(put, arguments);\n        };\n\n        IDBObjectStore.prototype.__insertData = function(method, args) {\n            args = Array.prototype.slice.call(args);\n            var value = args[0];\n            var key = args[1];\n\n            // out-of-line key\n            if (key instanceof Array) {\n                args[1] = encodeCompoundKey(key);\n            }\n\n            if (typeof value === 'object') {\n                // inline key\n                if (isCompoundKey(this.keyPath)) {\n                    setInlineCompoundKey(value, this.keyPath);\n                }\n\n                // inline indexes\n                for (var i = 0; i < this.indexNames.length; i++) {\n                    var index = this.index(this.indexNames[i]);\n                    if (isCompoundKey(index.keyPath)) {\n                        try {\n                            setInlineCompoundKey(value, index.keyPath);\n                        }\n                        catch (e) {\n                            // The value doesn't have a valid key for this index.\n                        }\n                    }\n                }\n            }\n            return method.apply(this, args);\n        };\n\n        IDBIndex.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGet.apply(this, args);\n        };\n\n        IDBIndex.prototype.getKey = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGetKey.apply(this, args);\n        };\n\n        IDBIndex.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexCursor.apply(this, args);\n        };\n\n        IDBIndex.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexKeyCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeGet.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.delete = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeDelete.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeKeyCursor.apply(this, args);\n        };\n\n        IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen) {\n            var args = Array.prototype.slice.call(arguments);\n            if (lower instanceof Array) {\n                args[0] = encodeCompoundKey(lower);\n            }\n            if (upper instanceof Array) {\n                args[1] = encodeCompoundKey(upper);\n            }\n            return bound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.upperBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return upperBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.lowerBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return lowerBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.only = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return only.apply(IDBKeyRange, args);\n        };\n\n        Object.defineProperty(IDBRequest.prototype, 'result', {\n            enumerable: requestResult.enumerable,\n            configurable: requestResult.configurable,\n            get: function() {\n                var result = requestResult.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'primaryKey', {\n            enumerable: cursorPrimaryKey.enumerable,\n            configurable: cursorPrimaryKey.configurable,\n            get: function() {\n                var result = cursorPrimaryKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'key', {\n            enumerable: cursorKey.enumerable,\n            configurable: cursorKey.configurable,\n            get: function() {\n                var result = cursorKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursorWithValue.prototype, 'value', {\n            enumerable: cursorValue.enumerable,\n            configurable: cursorValue.configurable,\n            get: function() {\n                var result = cursorValue.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        try {\n            if (!IDBTransaction.VERSION_CHANGE) {\n                IDBTransaction.VERSION_CHANGE = 'versionchange';\n            }\n        }\n        catch (e) {}\n    }\n\n    var compoundKeysPropertyName = '__$$compoundKey';\n    var propertySeparatorRegExp = /\\$\\$/g;\n    var propertySeparator = '$$$$';         // \"$$\" after RegExp escaping\n    var keySeparator = '$_$';\n\n    function isCompoundKey(keyPath) {\n        return keyPath && (keyPath.indexOf(compoundKeysPropertyName + '.') === 0);\n    }\n\n    function encodeCompoundKeyPath(keyPath) {\n        // Encoded dotted properties\n        // [\"name.first\", \"name.last\"] ==> [\"name$$first\", \"name$$last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(/\\./g, propertySeparator);\n        }\n\n        // Encode the array as a single property\n        // [\"name$$first\", \"name$$last\"] => \"__$$compoundKey.name$$first$_$name$$last\"\n        return compoundKeysPropertyName + '.' + keyPath.join(keySeparator);\n    }\n\n    function decodeCompoundKeyPath(keyPath) {\n        // Remove the \"__$$compoundKey.\" prefix\n        keyPath = keyPath.substr(compoundKeysPropertyName.length + 1);\n\n        // Split the properties into an array\n        // \"name$$first$_$name$$last\" ==> [\"name$$first\", \"name$$last\"]\n        keyPath = keyPath.split(keySeparator);\n\n        // Decode dotted properties\n        // [\"name$$first\", \"name$$last\"] ==> [\"name.first\", \"name.last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(propertySeparatorRegExp, '.');\n        }\n        return keyPath;\n    }\n\n    function setInlineCompoundKey(value, encodedKeyPath) {\n        // Encode the key\n        var keyPath = decodeCompoundKeyPath(encodedKeyPath);\n        var key = idbModules.Key.getValue(value, keyPath);\n        var encodedKey = encodeCompoundKey(key);\n\n        // Store the encoded key inline\n        encodedKeyPath = encodedKeyPath.substr(compoundKeysPropertyName.length + 1);\n        value[compoundKeysPropertyName] = value[compoundKeysPropertyName] || {};\n        value[compoundKeysPropertyName][encodedKeyPath] = encodedKey;\n    }\n\n    function removeInlineCompoundKey(value) {\n        if (typeof value === \"string\" && isCompoundKey(value)) {\n            return decodeCompoundKey(value);\n        }\n        else if (value && typeof value[compoundKeysPropertyName] === \"object\") {\n            delete value[compoundKeysPropertyName];\n        }\n        return value;\n    }\n\n    function encodeCompoundKey(key) {\n        // Validate and encode the key\n        idbModules.Key.validate(key);\n        key = idbModules.Key.encode(key);\n\n        // Prepend the \"__$$compoundKey.\" prefix\n        key = compoundKeysPropertyName + '.' + key;\n\n        validateKeyLength(key);\n        return key;\n    }\n\n    function decodeCompoundKey(key) {\n        validateKeyLength(key);\n\n        // Remove the \"__$$compoundKey.\" prefix\n        key = key.substr(compoundKeysPropertyName.length + 1);\n\n        // Decode the key\n        key = idbModules.Key.decode(key);\n        return key;\n    }\n\n    function validateKeyLength(key) {\n        // BUG: Internet Explorer truncates string keys at 889 characters\n        if (key.length > 889) {\n            throw idbModules.util.createDOMException(\"DataError\", \"The encoded key is \" + key.length + \" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.\");\n        }\n    }\n\n    idbModules.polyfill = polyfill;\n})(idbModules);\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * Implementation of the Structured Cloning Algorithm.  Supports the\n     * following object types:\n     * - Blob\n     * - Boolean\n     * - Date object\n     * - File object (deserialized as Blob object).\n     * - Number object\n     * - RegExp object\n     * - String object\n     * This is accomplished by doing the following:\n     * 1) Using the cycle/decycle functions from:\n     *    https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n     * 2) Serializing/deserializing objects to/from string that don't work with\n     *    JSON.stringify and JSON.parse by using object specific logic (eg use \n     *    the FileReader API to convert a Blob or File object to a data URL.   \n     * 3) JSON.stringify and JSON.parse do the final conversion to/from string.\n     */\n    var Sca = (function(){\n        return {\n            decycle: function(object, callback) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert the following object types to string\n                // so that they can properly be encoded using JSON.stringify:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Make a deep copy of an object or array, assuring that there is at most\n                // one instance of each object or array in the resulting structure. The\n                // duplicate references (which might be forming cycles) are replaced with\n                // an object of the form\n                //      {$ref: PATH}\n                // where the PATH is a JSONPath string that locates the first occurance.\n                // So,\n                //      var a = [];\n                //      a[0] = a;\n                //      return JSON.stringify(JSON.decycle(a));\n                // produces the string '[{\"$ref\":\"$\"}]'.\n\n                // JSONPath is used to locate the unique object. $ indicates the top level of\n                // the object or array. [NUMBER] or [STRING] indicates a child member or\n                // property.\n\n                var objects = [],   // Keep a reference to each unique object or array\n                paths = [],     // Keep the path to each unique object or array\n                queuedObjects = [],\n                returnCallback = callback;\n\n                /**\n                 * Check the queue to see if all objects have been processed.\n                 * if they have, call the callback with the converted object.\n                 */\n                function checkForCompletion() {\n                    if (queuedObjects.length === 0) {\n                        returnCallback(derezObj);\n                    }    \n                }\n\n                /**\n                 * Convert a blob to a data URL.\n                 * @param {Blob} blob to convert.\n                 * @param {String} path of blob in object being encoded.\n                 */\n                function readBlobAsDataURL(blob, path) {\n                    var reader = new FileReader();\n                    reader.onloadend = function(loadedEvent) {\n                        var dataURL = loadedEvent.target.result;\n                        var blobtype = 'Blob';\n                        if (blob instanceof File) {\n                            //blobtype = 'File';\n                        }\n                        updateEncodedBlob(dataURL, path, blobtype);\n                    };\n                    reader.readAsDataURL(blob);\n                }\n                \n                /**\n                 * Async handler to update a blob object to a data URL for encoding.\n                 * @param {String} dataURL\n                 * @param {String} path\n                 * @param {String} blobtype - file if the blob is a file; blob otherwise\n                 */\n                function updateEncodedBlob(dataURL, path, blobtype) {\n                    var encoded = queuedObjects.indexOf(path);\n                    path = path.replace('$','derezObj');\n                    eval(path+'.$enc=\"'+dataURL+'\"');\n                    eval(path+'.$type=\"'+blobtype+'\"');\n                    queuedObjects.splice(encoded, 1);\n                    checkForCompletion();\n                }\n\n                function derez(value, path) {\n\n                    // The derez recurses through the object, producing the deep copy.\n\n                    var i,          // The loop counter\n                    name,       // Property name\n                    nu;         // The new object or array\n\n                    // typeof null === 'object', so go on if this value is really an object but not\n                    // one of the weird builtin objects.\n\n                    if (typeof value === 'object' && value !== null &&\n                        !(value instanceof Boolean) &&\n                        !(value instanceof Date)    &&\n                        !(value instanceof Number)  &&\n                        !(value instanceof RegExp)  &&\n                        !(value instanceof Blob)  &&\n                        !(value instanceof String)) {\n\n                        // If the value is an object or array, look to see if we have already\n                        // encountered it. If so, return a $ref/path object. This is a hard way,\n                        // linear search that will get slower as the number of unique objects grows.\n\n                        for (i = 0; i < objects.length; i += 1) {\n                            if (objects[i] === value) {\n                                return {$ref: paths[i]};\n                            }\n                        }\n\n                        // Otherwise, accumulate the unique value and its path.\n\n                        objects.push(value);\n                        paths.push(path);\n\n                        // If it is an array, replicate the array.\n\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            nu = [];\n                            for (i = 0; i < value.length; i += 1) {\n                                nu[i] = derez(value[i], path + '[' + i + ']');\n                            }\n                        } else {\n                            // If it is an object, replicate the object.\n                            nu = {};\n                            for (name in value) {\n                                if (Object.prototype.hasOwnProperty.call(value, name)) {\n                                    nu[name] = derez(value[name],\n                                     path + '[' + JSON.stringify(name) + ']');\n                                }\n                            }\n                        }\n\n                        return nu;\n                    } else if (value instanceof Blob) {\n                        //Queue blob for conversion\n                        queuedObjects.push(path);\n                        readBlobAsDataURL(value, path);\n                    } else if (value instanceof Boolean) {\n                        value = {\n                            '$type': 'Boolean',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof Date) {\n                        value = {\n                            '$type': 'Date',\n                            '$enc': value.getTime()\n                        };\n                    } else if (value instanceof Number) {\n                        value = {\n                            '$type': 'Number',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof RegExp) {\n                        value = {\n                            '$type': 'RegExp',\n                            '$enc': value.toString()\n                        };\n                    } else if (typeof value === 'number') {\n                        value = {\n                            '$type': 'number',\n                            '$enc': value + ''  // handles NaN, Infinity, Negative Infinity\n                        };\n                    } else if (value === undefined) {\n                        value = {\n                            '$type': 'undefined'\n                        };\n                    }\n                    return value;\n                }\n                var derezObj = derez(object, '$');\n                checkForCompletion();\n            },\n                \n            retrocycle: function retrocycle($) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert strings to the following object types \n                // so that they can properly be decoded:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Restore an object that was reduced by decycle. Members whose values are\n                // objects of the form\n                //      {$ref: PATH}\n                // are replaced with references to the value found by the PATH. This will\n                // restore cycles. The object will be mutated.\n\n                // The eval function is used to locate the values described by a PATH. The\n                // root object is kept in a $ variable. A regular expression is used to\n                // assure that the PATH is extremely well formed. The regexp contains nested\n                // * quantifiers. That has been known to have extremely bad performance\n                // problems on some browsers for very long strings. A PATH is expected to be\n                // reasonably short. A PATH is allowed to belong to a very restricted subset of\n                // Goessner's JSONPath.\n\n                // So,\n                //      var s = '[{\"$ref\":\"$\"}]';\n                //      return JSON.retrocycle(JSON.parse(s));\n                // produces an array containing a single element which is the array itself.\n\n                var px = /^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\n                \n                /**\n                 * Converts the specified data URL to a Blob object\n                 * @param {String} dataURL to convert to a Blob\n                 * @returns {Blob} the converted Blob object\n                 */\n                function dataURLToBlob(dataURL) {\n                    var BASE64_MARKER = ';base64,',\n                        contentType,\n                        parts,\n                        raw;\n                    if (dataURL.indexOf(BASE64_MARKER) === -1) {\n                        parts = dataURL.split(',');\n                        contentType = parts[0].split(':')[1];\n                        raw = parts[1];\n\n                        return new Blob([raw], {type: contentType});\n                    }\n\n                    parts = dataURL.split(BASE64_MARKER);\n                    contentType = parts[0].split(':')[1];\n                    raw = window.atob(parts[1]);\n                    var rawLength = raw.length;\n                    var uInt8Array = new Uint8Array(rawLength);\n\n                    for (var i = 0; i < rawLength; ++i) {\n                        uInt8Array[i] = raw.charCodeAt(i);\n                    }\n                    return new Blob([uInt8Array.buffer], {type: contentType});\n                }\n                \n                function rez(value) {\n                    // The rez function walks recursively through the object looking for $ref\n                    // properties. When it finds one that has a value that is a path, then it\n                    // replaces the $ref object with a reference to the value that is found by\n                    // the path.\n\n                    var i, item, name, path;\n\n                    if (value && typeof value === 'object') {\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            for (i = 0; i < value.length; i += 1) {\n                                item = value[i];\n                                if (item && typeof item === 'object') {\n                                    path = item.$ref;\n                                    if (typeof path === 'string' && px.test(path)) {\n                                        value[i] = eval(path);\n                                    } else {\n                                        value[i] = rez(item);\n                                    }\n                                }\n                            }\n                        } else {\n                            if (value.$type !== undefined) {\n                                switch(value.$type) {\n                                    case 'Blob':\n                                    case 'File':\n                                        value = dataURLToBlob(value.$enc);\n                                        break;\n                                    case 'Boolean':\n                                        value = Boolean(value.$enc === 'true');\n                                        break;\n                                    case 'Date':\n                                        value = new Date(value.$enc);\n                                        break;\n                                    case 'Number':\n                                        value = Number(value.$enc);\n                                        break;\n                                    case 'RegExp':\n                                        value = eval(value.$enc);\n                                        break;\n                                    case 'number':\n                                        value = parseFloat(value.$enc);\n                                        break;\n                                    case 'undefined':\n                                        value = undefined;\n                                        break;\n                                }\n                            } else {\n                                for (name in value) {\n                                    if (typeof value[name] === 'object') {\n                                        item = value[name];\n                                        if (item) {\n                                            path = item.$ref;\n                                            if (typeof path === 'string' && px.test(path)) {\n                                                value[name] = eval(path);\n                                            } else {\n                                                value[name] = rez(item);\n                                            }\n                                        }\n                                    }   \n                                }\n                            }\n                        }\n                    }\n                    return value;\n                }\n                return rez($);\n\n            },\n\n            /**\n             * Encode the specified object as a string.  Because of the asynchronus\n             * conversion of Blob/File to string, the encode function requires\n             * a callback\n             * @param {Object} val the value to convert.\n             * @param {function} callback the function to call once conversion is\n             * complete.  The callback gets called with the converted value.\n             */\n            \"encode\": function(val, callback){\n                function finishEncode(val) {\n                    callback(JSON.stringify(val));\n                }\n                this.decycle(val, finishEncode);                        \n            },\n                    \n            /**\n             * Deserialize the specified string to an object\n             * @param {String} val the serialized string\n             * @returns {Object} the deserialized object\n             */\n            \"decode\": function(val){\n                return this.retrocycle(JSON.parse(val));\n            }\n        };\n    }());\n    idbModules.Sca = Sca;\n}(idbModules));\n\n(function(idbModules) {\n    \"use strict\";\n\n    /**\n     * Encodes the keys based on their types. This is required to maintain collations\n     */\n    var collations = [\"undefined\", \"number\", \"date\", \"string\", \"array\"];\n\n    /**\n     * The sign values for numbers, ordered from least to greatest.\n     *  - \"negativeInfinity\": Sorts below all other values.\n     *  - \"bigNegative\": Negative values less than or equal to negative one.\n     *  - \"smallNegative\": Negative values between negative one and zero, noninclusive.\n     *  - \"smallPositive\": Positive values between zero and one, including zero but not one.\n     *  - \"largePositive\": Positive values greater than or equal to one.\n     *  - \"positiveInfinity\": Sorts above all other values.\n     */\n    var signValues = [\"negativeInfinity\", \"bigNegative\", \"smallNegative\", \"smallPositive\", \"bigPositive\", \"positiveInfinity\"];\n\n    var types = {\n        // Undefined is not a valid key type.  It's only used when there is no key.\n        undefined: {\n            encode: function(key) {\n                return collations.indexOf(\"undefined\") + \"-\";\n            },\n            decode: function(key) {\n                return undefined;\n            }\n        },\n\n        // Dates are encoded as ISO 8601 strings, in UTC time zone.\n        date: {\n            encode: function(key) {\n                return collations.indexOf(\"date\") + \"-\" + key.toJSON();\n            },\n            decode: function(key) {\n                return new Date(key.substring(2));\n            }\n        },\n\n        // Numbers are represented in a lexically sortable base-32 sign-exponent-mantissa\n        // notation.\n        //\n        // sign: takes a value between zero and five, inclusive. Represents infinite cases\n        //     and the signs of both the exponent and the fractional part of the number.\n        // exponent: paded to two base-32 digits, represented by the 32's compliment in the\n        //     \"smallPositive\" and \"bigNegative\" cases to ensure proper lexical sorting.\n        // mantissa: also called the fractional part. Normed 11-digit base-32 representation.\n        //     Represented by the 32's compliment in the \"smallNegative\" and \"bigNegative\"\n        //     cases to ensure proper lexical sorting.\n        number: {\n            // The encode step checks for six numeric cases and generates 14-digit encoded\n            // sign-exponent-mantissa strings.\n            encode: function(key) {\n                var key32 = Math.abs(key).toString(32);\n                // Get the index of the decimal.\n                var decimalIndex = key32.indexOf(\".\");\n                // Remove the decimal.\n                key32 = (decimalIndex !== -1) ? key32.replace(\".\", \"\") : key32;\n                // Get the index of the first significant digit.\n                var significantDigitIndex = key32.search(/[^0]/);\n                // Truncate leading zeros.\n                key32 = key32.slice(significantDigitIndex);\n                var sign, exponent = zeros(2), mantissa = zeros(11);\n\n                // Finite cases:\n                if (isFinite(key)) {\n                    // Negative cases:\n                    if (key < 0) {\n                        // Negative exponent case:\n                        if (key > -1) {\n                            sign = signValues.indexOf(\"smallNegative\");\n                            exponent = padBase32Exponent(significantDigitIndex);\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigNegative\");\n                            exponent = flipBase32(padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            ));\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                    }\n                    // Non-negative cases:\n                    else {\n                        // Negative exponent case:\n                        if (key < 1) {\n                            sign = signValues.indexOf(\"smallPositive\");\n                            exponent = flipBase32(padBase32Exponent(significantDigitIndex));\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigPositive\");\n                            exponent = padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            );\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                    }\n                }\n                // Infinite cases:\n                else {\n                    sign = signValues.indexOf(\n                        key > 0 ? \"positiveInfinity\" : \"negativeInfinity\"\n                    );\n                }\n\n                return collations.indexOf(\"number\") + \"-\" + sign + exponent + mantissa;\n            },\n            // The decode step must interpret the sign, reflip values encoded as the 32's complements,\n            // apply signs to the exponent and mantissa, do the base-32 power operation, and return\n            // the original JavaScript number values.\n            decode: function(key) {\n                var sign = +key.substr(2, 1);\n                var exponent = key.substr(3, 2);\n                var mantissa = key.substr(5, 11);\n\n                switch (signValues[sign]) {\n                    case \"negativeInfinity\":\n                        return -Infinity;\n                    case \"positiveInfinity\":\n                        return Infinity;\n                    case \"bigPositive\":\n                        return pow32(mantissa, exponent);\n                    case \"smallPositive\":\n                        exponent = negate(flipBase32(exponent));\n                        return pow32(mantissa, exponent);\n                    case \"smallNegative\":\n                        exponent = negate(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    case \"bigNegative\":\n                        exponent = flipBase32(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    default:\n                        throw new Error(\"Invalid number.\");\n                }\n            }\n        },\n\n        // Strings are encoded as JSON strings (with quotes and unicode characters escaped).\n        //\n        // IF the strings are in an array, then some extra encoding is done to make sorting work correctly:\n        // Since we can't force all strings to be the same length, we need to ensure that characters line-up properly\n        // for sorting, while also accounting for the extra characters that are added when the array itself is encoded as JSON.\n        // To do this, each character of the string is prepended with a dash (\"-\"), and a space is added to the end of the string.\n        // This effectively doubles the size of every string, but it ensures that when two arrays of strings are compared,\n        // the indexes of each string's characters line up with each other.\n        string: {\n            encode: function(key, inArray) {\n                if (inArray) {\n                    // prepend each character with a dash, and append a space to the end\n                    key = key.replace(/(.)/g, '-$1') + ' ';\n                }\n                return collations.indexOf(\"string\") + \"-\" + key;\n            },\n            decode: function(key, inArray) {\n                key = key.substring(2);\n                if (inArray) {\n                    // remove the space at the end, and the dash before each character\n                    key = key.substr(0, key.length - 1).replace(/-(.)/g, '$1');\n                }\n                return key;\n            }\n        },\n\n        // Arrays are encoded as JSON strings.\n        // An extra, value is added to each array during encoding to make empty arrays sort correctly.\n        array: {\n            encode: function(key) {\n                var encoded = [];\n                for (var i = 0; i < key.length; i++) {\n                    var item = key[i];\n                    var encodedItem = idbModules.Key.encode(item, true);        // encode the array item\n                    encoded[i] = encodedItem;\n                }\n                encoded.push(collations.indexOf(\"undefined\") + \"-\");            // append an extra item, so empty arrays sort correctly\n                return collations.indexOf(\"array\") + \"-\" + JSON.stringify(encoded);\n            },\n            decode: function(key) {\n                var decoded = JSON.parse(key.substring(2));\n                decoded.pop();                                                  // remove the extra item\n                for (var i = 0; i < decoded.length; i++) {\n                    var item = decoded[i];\n                    var decodedItem = idbModules.Key.decode(item, true);        // decode the item\n                    decoded[i] = decodedItem;\n                }\n                return decoded;\n            }\n        }\n    };\n\n    /**\n     * Return a padded base-32 exponent value.\n     * @param {number}\n     * @return {string}\n     */\n    function padBase32Exponent(n) {\n        n = n.toString(32);\n        return (n.length === 1) ? \"0\" + n : n;\n    }\n\n    /**\n     * Return a padded base-32 mantissa.\n     * @param {string}\n     * @return {string}\n     */\n    function padBase32Mantissa(s) {\n        return (s + zeros(11)).slice(0, 11);\n    }\n\n    /**\n     * Flips each digit of a base-32 encoded string.\n     * @param {string} encoded\n     */\n    function flipBase32(encoded) {\n        var flipped = \"\";\n        for (var i = 0; i < encoded.length; i++) {\n            flipped += (31 - parseInt(encoded[i], 32)).toString(32);\n        }\n        return flipped;\n    }\n\n    /**\n     * Base-32 power function.\n     * RESEARCH: This function does not precisely decode floats because it performs\n     * floating point arithmetic to recover values. But can the original values be\n     * recovered exactly?\n     * Someone may have already figured out a good way to store JavaScript floats as\n     * binary strings and convert back. Barring a better method, however, one route\n     * may be to generate decimal strings that `parseFloat` decodes predictably.\n     * @param {string}\n     * @param {string}\n     * @return {number}\n     */\n    function pow32(mantissa, exponent) {\n        var whole, fraction, expansion;\n        exponent = parseInt(exponent, 32);\n        if (exponent < 0) {\n            return roundToPrecision(\n                parseInt(mantissa, 32) * Math.pow(32, exponent - 10)\n            );\n        }\n        else {\n            if (exponent < 11) {\n                whole = mantissa.slice(0, exponent);\n                whole = parseInt(whole, 32);\n                fraction = mantissa.slice(exponent);\n                fraction = parseInt(fraction, 32) * Math.pow(32, exponent - 11);\n                return roundToPrecision(whole + fraction);\n            }\n            else {\n                expansion = mantissa + zeros(exponent - 11);\n                return parseInt(expansion, 32);\n            }\n        }\n    }\n\n    /**\n     *\n     */\n    function roundToPrecision(num, precision) {\n        precision = precision || 16;\n        return parseFloat(num.toPrecision(precision));\n    }\n\n    /**\n     * Returns a string of n zeros.\n     * @param {number}\n     * @return {string}\n     */\n    function zeros(n) {\n        var result = \"\";\n        while (n--) {\n            result = result + \"0\";\n        }\n        return result;\n    }\n\n    /**\n     * Negates numeric strings.\n     * @param {string}\n     * @return {string}\n     */\n    function negate(s) {\n        return \"-\" + s;\n    }\n\n    /**\n     * Returns the string \"number\", \"date\", \"string\", or \"array\".\n     */\n    function getType(key) {\n        if (key instanceof Date) {\n            return \"date\";\n        }\n        if (key instanceof Array) {\n            return \"array\";\n        }\n        return typeof key;\n    }\n\n    /**\n     * Keys must be strings, numbers, Dates, or Arrays\n     */\n    function validate(key) {\n        var type = getType(key);\n        if (type === \"array\") {\n            for (var i = 0; i < key.length; i++) {\n                validate(key[i]);\n            }\n        }\n        else if (!types[type] || (type !== \"string\" && isNaN(key))) {\n            throw idbModules.util.createDOMException(\"DataError\", \"Not a valid key\");\n        }\n    }\n\n    /**\n     * Returns the value of an inline key\n     * @param {object} source\n     * @param {string|array} keyPath\n     */\n    function getValue(source, keyPath) {\n        try {\n            if (keyPath instanceof Array) {\n                var arrayValue = [];\n                for (var i = 0; i < keyPath.length; i++) {\n                    arrayValue.push(eval(\"source.\" + keyPath[i]));\n                }\n                return arrayValue;\n            } else {\n                return eval(\"source.\" + keyPath);\n            }\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n\n    /**\n     * Sets the inline key value\n     * @param {object} source\n     * @param {string} keyPath\n     * @param {*} value\n     */\n    function setValue(source, keyPath, value) {\n        var props = keyPath.split('.');\n        for (var i = 0; i < props.length - 1; i++) {\n            var prop = props[i];\n            source = source[prop] = source[prop] || {};\n        }\n        source[props[props.length - 1]] = value;\n    }\n\n    /**\n     * Determines whether an index entry matches a multi-entry key value.\n     * @param {string} encodedEntry     The entry value (already encoded)\n     * @param {string} encodedKey       The full index key (already encoded)\n     * @returns {boolean}\n     */\n    function isMultiEntryMatch(encodedEntry, encodedKey) {\n        var keyType = collations[encodedKey.substring(0, 1)];\n\n        if (keyType === \"array\") {\n            return encodedKey.indexOf(encodedEntry) > 1;\n        }\n        else {\n            return encodedKey === encodedEntry;\n        }\n    }\n\n    function isKeyInRange(key, range) {\n        var lowerMatch = range.lower === undefined;\n        var upperMatch = range.upper === undefined;\n        var encodedKey = idbModules.Key.encode(key, true);\n\n        if (range.lower !== undefined) {\n            if (range.lowerOpen && encodedKey > range.__lower) {\n                lowerMatch = true;\n            }\n            if (!range.lowerOpen && encodedKey >= range.__lower) {\n                lowerMatch = true;\n            }\n        }\n        if (range.upper !== undefined) {\n            if (range.upperOpen && encodedKey < range.__upper) {\n                upperMatch = true;\n            }\n            if (!range.upperOpen && encodedKey <= range.__upper) {\n                upperMatch = true;\n            }\n        }\n\n        return lowerMatch && upperMatch;\n    }\n\n    function findMultiEntryMatches(keyEntry, range) {\n        var matches = [];\n\n        if (keyEntry instanceof Array) {\n            for (var i = 0; i < keyEntry.length; i++) {\n                var key = keyEntry[i];\n\n                if (key instanceof Array) {\n                    if (range.lower === range.upper) {\n                        continue;\n                    }\n                    if (key.length === 1) {\n                        key = key[0];\n                    } else {\n                        var nested = findMultiEntryMatches(key, range);\n                        if (nested.length > 0) {\n                            matches.push(key);\n                        }\n                        continue;\n                    }\n                }\n\n                if (isKeyInRange(key, range)) {\n                    matches.push(key);\n                }\n            }\n        } else {\n            if (isKeyInRange(keyEntry, range)) {\n                matches.push(keyEntry);\n            }\n        }\n        return matches;\n    }\n\n    idbModules.Key = {\n        encode: function(key, inArray) {\n            if (key === undefined) {\n                return null;\n            }\n            return types[getType(key)].encode(key, inArray);\n        },\n        decode: function(key, inArray) {\n            if (typeof key !== \"string\") {\n                return undefined;\n            }\n            return types[collations[key.substring(0, 1)]].decode(key, inArray);\n        },\n        validate: validate,\n        getValue: getValue,\n        setValue: setValue,\n        isMultiEntryMatch: isMultiEntryMatch,\n        findMultiEntryMatches: findMultiEntryMatches\n    };\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native Event object, for browsers that support it\n     * @returns {Event}\n     */\n    function createNativeEvent(type, debug) {\n        var event = new Event(type);\n        event.debug = debug;\n\n        // Make the \"target\" writable\n        Object.defineProperty(event, 'target', {\n            writable: true\n        });\n\n        return event;\n    }\n\n    /**\n     * A shim Event class, for browsers that don't allow us to create native Event objects.\n     * @constructor\n     */\n    function ShimEvent(type, debug) {\n        this.type = type;\n        this.debug = debug;\n        this.bubbles = false;\n        this.cancelable = false;\n        this.eventPhase = 0;\n        this.timeStamp = new Date().valueOf();\n    }\n\n    var useNativeEvent = false;\n    try {\n        // Test whether we can use the browser's native Event class\n        var test = createNativeEvent('test type', 'test debug');\n        var target = {test: 'test target'};\n        test.target = target;\n\n        if (test instanceof Event && test.type === 'test type' && test.debug === 'test debug' && test.target === target) {\n            // Native events work as expected\n            useNativeEvent = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeEvent) {\n        idbModules.Event = Event;\n        idbModules.IDBVersionChangeEvent = Event;\n        idbModules.util.createEvent = createNativeEvent;\n    }\n    else {\n        idbModules.Event = ShimEvent;\n        idbModules.IDBVersionChangeEvent = ShimEvent;\n        idbModules.util.createEvent = function(type, debug) {\n            return new ShimEvent(type, debug);\n        };\n    }\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native DOMException, for browsers that support it\n     * @returns {DOMException}\n     */\n    function createNativeDOMException(name, message) {\n        var e = new DOMException.prototype.constructor(0, message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Creates a native DOMError, for browsers that support it\n     * @returns {DOMError}\n     */\n    function createNativeDOMError(name, message) {\n        name = name || 'DOMError';\n        var e = new DOMError(name, message);\n        e.name === name || (e.name = name);\n        e.message === message || (e.message = message);\n        return e;\n    }\n\n    /**\n     * Creates a generic Error object\n     * @returns {Error}\n     */\n    function createError(name, message) {\n        var e = new Error(message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Logs detailed error information to the console.\n     * @param {string} name\n     * @param {string} message\n     * @param {string|Error|null} error\n     */\n    idbModules.util.logError = function(name, message, error) {\n        if (idbModules.DEBUG) {\n            if (error && error.message) {\n                error = error.message;\n            }\n\n            var method = typeof(console.error) === 'function' ? 'error' : 'log';\n            console[method](name + ': ' + message + '. ' + (error || ''));\n            console.trace && console.trace();\n        }\n    };\n\n    /**\n     * Finds the error argument.  This is useful because some WebSQL callbacks\n     * pass the error as the first argument, and some pass it as the second argument.\n     * @param {array} args\n     * @returns {Error|DOMException|undefined}\n     */\n    idbModules.util.findError = function(args) {\n        var err;\n        if (args) {\n            if (args.length === 1) {\n                return args[0];\n            }\n            for (var i = 0; i < args.length; i++) {\n                var arg = args[i];\n                if (arg instanceof Error || arg instanceof DOMException) {\n                    return arg;\n                }\n                else if (arg && typeof arg.message === \"string\") {\n                    err = arg;\n                }\n            }\n        }\n        return err;\n    };\n\n    var test, useNativeDOMException = false, useNativeDOMError = false;\n\n    // Test whether we can use the browser's native DOMException class\n    try {\n        test = createNativeDOMException('test name', 'test message');\n        if (test instanceof DOMException && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMException works as expected\n            useNativeDOMException = true;\n        }\n    }\n    catch (e) {}\n\n    // Test whether we can use the browser's native DOMError class\n    try {\n        test = createNativeDOMError('test name', 'test message');\n        if (test instanceof DOMError && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMError works as expected\n            useNativeDOMError = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeDOMException) {\n        idbModules.DOMException = DOMException;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMException(name, message);\n        };\n    }\n    else {\n        idbModules.DOMException = Error;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n\n    if (useNativeDOMError) {\n        idbModules.DOMError = DOMError;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMError(name, message);\n        };\n    }\n    else {\n        idbModules.DOMError = Error;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * The IDBRequest Object that is returns for all async calls\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api\n     */\n    function IDBRequest(){\n        this.onsuccess = this.onerror = this.result = this.error = this.source = this.transaction = null;\n        this.readyState = \"pending\";\n    }\n\n    /**\n     * The IDBOpenDBRequest called when a database is opened\n     */\n    function IDBOpenDBRequest(){\n        this.onblocked = this.onupgradeneeded = null;\n    }\n    IDBOpenDBRequest.prototype = new IDBRequest();\n    IDBOpenDBRequest.prototype.constructor = IDBOpenDBRequest;\n    \n    idbModules.IDBRequest = IDBRequest;\n    idbModules.IDBOpenDBRequest = IDBOpenDBRequest;\n    \n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB KeyRange object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#dfn-key-range\n     * @param {Object} lower\n     * @param {Object} upper\n     * @param {Object} lowerOpen\n     * @param {Object} upperOpen\n     */\n    function IDBKeyRange(lower, upper, lowerOpen, upperOpen){\n        if (lower !== undefined) {\n            idbModules.Key.validate(lower);\n        }\n        if (upper !== undefined) {\n            idbModules.Key.validate(upper);\n        }\n\n        this.lower = lower;\n        this.upper = upper;\n        this.lowerOpen = !!lowerOpen;\n        this.upperOpen = !!upperOpen;\n    }\n\n    IDBKeyRange.only = function(value){\n        return new IDBKeyRange(value, value, false, false);\n    };\n\n    IDBKeyRange.lowerBound = function(value, open){\n        return new IDBKeyRange(value, undefined, open, undefined);\n    };\n    IDBKeyRange.upperBound = function(value, open){\n        return new IDBKeyRange(undefined, value, undefined, open);\n    };\n    IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen){\n        return new IDBKeyRange(lower, upper, lowerOpen, upperOpen);\n    };\n\n    idbModules.IDBKeyRange = IDBKeyRange;\n\n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB Cursor Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBCursor\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @param {IDBObjectStore} store\n     * @param {IDBObjectStore|IDBIndex} source\n     * @param {string} keyColumnName\n     * @param {string} valueColumnName\n     * @param {boolean} count\n     */\n    function IDBCursor(range, direction, store, source, keyColumnName, valueColumnName, count){\n        // Calling openCursor on an index or objectstore with null is allowed but we treat it as undefined internally\n        if (range === null) {\n            range = undefined;\n        }\n        if (range !== undefined && !(range instanceof idbModules.IDBKeyRange)) {\n            range = new idbModules.IDBKeyRange(range, range, false, false);\n        }\n        store.transaction.__assertActive();\n        if (direction !== undefined && [\"next\", \"prev\", \"nextunique\", \"prevunique\"].indexOf(direction) === -1) {\n            throw new TypeError(direction + \"is not a valid cursor direction\");\n        }\n\n        this.source = source;\n        this.direction = direction || \"next\";\n        this.key = undefined;\n        this.primaryKey = undefined;\n        this.__store = store;\n        this.__range = range;\n        this.__req = new idbModules.IDBRequest();\n        this.__keyColumnName = keyColumnName;\n        this.__valueColumnName = valueColumnName;\n        this.__valueDecoder = valueColumnName === \"value\" ? idbModules.Sca : idbModules.Key;\n        this.__count = count;\n        this.__offset = -1; // Setting this to -1 as continue will set it to 0 anyway\n        this.__lastKeyContinued = undefined; // Used when continuing with a key\n        this.__multiEntryIndex = source instanceof idbModules.IDBIndex ? source.multiEntry : false;\n        this.__unique = this.direction.indexOf(\"unique\") !== -1;\n\n        if (range !== undefined) {\n            // Encode the key range and cache the encoded values, so we don't have to re-encode them over and over\n            range.__lower = range.lower !== undefined && idbModules.Key.encode(range.lower, this.__multiEntryIndex);\n            range.__upper = range.upper !== undefined && idbModules.Key.encode(range.upper, this.__multiEntryIndex);\n        }\n\n        this[\"continue\"]();\n    }\n\n    IDBCursor.prototype.__find = function (/* key, tx, success, error, recordsToLoad */) {\n        var args = Array.prototype.slice.call(arguments);\n        if (this.__multiEntryIndex) {\n            this.__findMultiEntry.apply(this, args);\n        } else {\n            this.__findBasic.apply(this, args);\n        }\n    };\n\n    IDBCursor.prototype.__findBasic = function (key, tx, success, error, recordsToLoad) {\n        recordsToLoad = recordsToLoad || 1;\n\n        var me = this;\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined || me.__range.upper !== undefined )) {\n            sql.push(\"AND\");\n            if (me.__range.lower !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.lowerOpen ? \">\" : \">=\"), \"?\");\n                sqlValues.push(me.__range.__lower);\n            }\n            (me.__range.lower !== undefined && me.__range.upper !== undefined) && sql.push(\"AND\");\n            if (me.__range.upper !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.upperOpen ? \"<\" : \"<=\"), \"?\");\n                sqlValues.push(me.__range.__upper);\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY\", quotedKeyColumnName, direction);\n            sql.push(\"LIMIT\", recordsToLoad, \"OFFSET\", me.__offset);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            if (me.__count) {\n                success(undefined, data.rows.length, undefined);\n            }\n            else if (data.rows.length > 1) {\n                me.__prefetchedData = data.rows;\n                me.__prefetchedIndex = 0;\n                idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for cursor\");\n                me.__decode(data.rows.item(0), success);\n            }\n            else if (data.rows.length === 1) {\n                me.__decode(data.rows.item(0), success);\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of cursors\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    IDBCursor.prototype.__findMultiEntry = function (key, tx, success, error) {\n        var me = this;\n\n        if (me.__prefetchedData && me.__prefetchedData.length === me.__prefetchedIndex) {\n            idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n            success(undefined, undefined, undefined);\n            return;\n        }\n\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined && me.__range.upper !== undefined)) {\n            if (me.__range.upper.indexOf(me.__range.lower) === 0) {\n                sql.push(\"AND\", quotedKeyColumnName, \"LIKE ?\");\n                sqlValues.push(\"%\" + me.__range.__lower.slice(0, -1) + \"%\");\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY key\", direction);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            me.__multiEntryOffset = data.rows.length;\n\n            if (data.rows.length > 0) {\n                var rows = [];\n\n                for (var i = 0; i < data.rows.length; i++) {\n                    var rowItem = data.rows.item(i);\n                    var rowKey = idbModules.Key.decode(rowItem[me.__keyColumnName], true);\n                    var matches = idbModules.Key.findMultiEntryMatches(rowKey, me.__range);\n\n                    for (var j = 0; j < matches.length; j++) {\n                        var matchingKey = matches[j];\n                        var clone = {\n                            matchingKey: idbModules.Key.encode(matchingKey, true),\n                            key: rowItem.key\n                        };\n                        clone[me.__keyColumnName] = rowItem[me.__keyColumnName];\n                        clone[me.__valueColumnName] = rowItem[me.__valueColumnName];\n                        rows.push(clone);\n                    }\n                }\n\n                var reverse = me.direction.indexOf(\"prev\") === 0;\n                rows.sort(function (a, b) {\n                    if (a.matchingKey.replace('[','z') < b.matchingKey.replace('[','z')) {\n                        return reverse ? 1 : -1;\n                    }\n                    if (a.matchingKey.replace('[','z') > b.matchingKey.replace('[','z')) {\n                        return reverse ? -1 : 1;\n                    }\n                    if (a.key < b.key) {\n                        return me.direction === \"prev\" ? 1 : -1;\n                    }\n                    if (a.key > b.key) {\n                        return me.direction === \"prev\" ? -1 : 1;\n                    }\n                    return 0;\n                });\n\n                me.__prefetchedData = {\n                    data: rows,\n                    length: rows.length,\n                    item: function (index) {\n                        return this.data[index];\n                    }\n                };\n                me.__prefetchedIndex = 0;\n\n                if (me.__count) {\n                    success(undefined, rows.length, undefined);\n                }\n                else if (rows.length > 1) {\n                    idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else if (rows.length === 1) {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    success(undefined, undefined, undefined);\n                }\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    /**\n     * Creates an \"onsuccess\" callback\n     * @private\n     */\n    IDBCursor.prototype.__onsuccess = function(success) {\n        var me = this;\n        return function(key, value, primaryKey) {\n            if (me.__count) {\n                success(value, me.__req);\n            }\n            else {\n                me.key = key === undefined ? null : key;\n                me.value = value === undefined ? null : value;\n                me.primaryKey = primaryKey === undefined ? null : primaryKey;\n                var result = key === undefined ? null : me;\n                success(result, me.__req);\n            }\n        };\n    };\n\n    IDBCursor.prototype.__decode = function (rowItem, callback) {\n        if (this.__multiEntryIndex && this.__unique) {\n            if (!this.__matchedKeys) {\n                this.__matchedKeys = {};\n            }\n            if (this.__matchedKeys[rowItem.matchingKey]) {\n                callback(undefined, undefined, undefined);\n                return;\n            }\n            this.__matchedKeys[rowItem.matchingKey] = true;\n        }\n        var key = idbModules.Key.decode(this.__multiEntryIndex ? rowItem.matchingKey : rowItem[this.__keyColumnName], this.__multiEntryIndex);\n        var val = this.__valueDecoder.decode(rowItem[this.__valueColumnName]);\n        var primaryKey = idbModules.Key.decode(rowItem.key);\n        callback(key, val, primaryKey);\n    };\n\n    IDBCursor.prototype[\"continue\"] = function (key) {\n        var recordsToPreloadOnContinue = idbModules.cursorPreloadPackSize || 100;\n        var me = this;\n\n        this.__store.transaction.__pushToQueue(me.__req, function cursorContinue(tx, args, success, error) {\n            me.__offset++;\n\n            if (me.__prefetchedData) {\n                // We have pre-loaded data for the cursor\n                me.__prefetchedIndex++;\n                if (me.__prefetchedIndex < me.__prefetchedData.length) {\n                    me.__decode(me.__prefetchedData.item(me.__prefetchedIndex), me.__onsuccess(success));\n                    return;\n                }\n            }\n\n            // No pre-fetched data, do query\n            me.__find(key, tx, me.__onsuccess(success), error, recordsToPreloadOnContinue);\n        });\n    };\n\n    IDBCursor.prototype.advance = function(count){\n        if (count <= 0) {\n            throw idbModules.util.createDOMException(\"Type Error\", \"Count is invalid - 0 or negative\", count);\n        }\n        var me = this;\n        this.__store.transaction.__pushToQueue(me.__req, function cursorAdvance(tx, args, success, error){\n            me.__offset += count;\n            me.__find(undefined, tx, me.__onsuccess(success), error);\n        });\n    };\n\n    IDBCursor.prototype.update = function(valueToUpdate){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return me.__store.transaction.__addToTransactionQueue(function cursorUpdate(tx, args, success, error){\n            idbModules.Sca.encode(valueToUpdate, function(encoded) {\n                me.__find(undefined, tx, function(key, value, primaryKey){\n                    var store = me.__store;\n                    var params = [encoded];\n                    var sql = [\"UPDATE\", idbModules.util.quote(store.name), \"SET value = ?\"];\n                    idbModules.Key.validate(primaryKey);\n\n                    // Also correct the indexes in the table\n                    for (var i = 0; i < store.indexNames.length; i++) {\n                        var index = store.__indexes[store.indexNames[i]];\n                        var indexKey = idbModules.Key.getValue(valueToUpdate, index.keyPath);\n                        sql.push(\",\", idbModules.util.quote(index.name), \"= ?\");\n                        params.push(idbModules.Key.encode(indexKey, index.multiEntry));\n                    }\n\n                    sql.push(\"WHERE key = ?\");\n                    params.push(idbModules.Key.encode(primaryKey));\n\n                    idbModules.DEBUG && console.log(sql.join(\" \"), encoded, key, primaryKey);\n                    tx.executeSql(sql.join(\" \"), params, function(tx, data){\n                        me.__prefetchedData = null;\n                        me.__prefetchedIndex = 0;\n                        if (data.rowsAffected === 1) {\n                            success(key);\n                        }\n                        else {\n                            error(\"No rows with key found\" + key);\n                        }\n                    }, function(tx, data){\n                        error(data);\n                    });\n                }, error);\n            });\n        });\n    };\n\n    IDBCursor.prototype[\"delete\"] = function(){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return this.__store.transaction.__addToTransactionQueue(function cursorDelete(tx, args, success, error){\n            me.__find(undefined, tx, function(key, value, primaryKey){\n                var sql = \"DELETE FROM  \" + idbModules.util.quote(me.__store.name) + \" WHERE key = ?\";\n                idbModules.DEBUG && console.log(sql, key, primaryKey);\n                idbModules.Key.validate(primaryKey);\n                tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data){\n                    me.__prefetchedData = null;\n                    me.__prefetchedIndex = 0;\n                    if (data.rowsAffected === 1) {\n                        // lower the offset or we will miss a row\n                        me.__offset--;\n                        success(undefined);\n                    }\n                    else {\n                        error(\"No rows with key found\" + key);\n                    }\n                }, function(tx, data){\n                    error(data);\n                });\n            }, error);\n        });\n    };\n\n    idbModules.IDBCursor = IDBCursor;\n}(idbModules));\n\n(function(idbModules, undefined) {\n    'use strict';\n\n    /**\n     * IDB Index\n     * http://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex\n     * @param {IDBObjectStore} store\n     * @param {IDBIndexProperties} indexProperties\n     * @constructor\n     */\n    function IDBIndex(store, indexProperties) {\n        this.objectStore = store;\n        this.name = indexProperties.columnName;\n        this.keyPath = indexProperties.keyPath;\n        this.multiEntry = indexProperties.optionalParams && indexProperties.optionalParams.multiEntry;\n        this.unique = indexProperties.optionalParams && indexProperties.optionalParams.unique;\n        this.__deleted = !!indexProperties.__deleted;\n    }\n\n    /**\n     * Clones an IDBIndex instance for a different IDBObjectStore instance.\n     * @param {IDBIndex} index\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBIndex.__clone = function(index, store) {\n        return new IDBIndex(store, {\n            columnName: index.name,\n            keyPath: index.keyPath,\n            optionalParams: {\n                multiEntry: index.multiEntry,\n                unique: index.unique\n            }\n        });\n    };\n\n    /**\n     * Creates a new index on an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @returns {IDBIndex}\n     * @protected\n     */\n    IDBIndex.__createIndex = function(store, index) {\n        var columnExists = !!store.__indexes[index.name] && store.__indexes[index.name].__deleted;\n\n        // Add the index to the IDBObjectStore\n        store.__indexes[index.name] = index;\n        store.indexNames.push(index.name);\n\n        // Create the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not create index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            function applyIndex(tx) {\n                // Update the object store's index list\n                IDBIndex.__updateIndexList(store, tx, function() {\n                    // Add index entries for all existing records\n                    tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(store.name), [], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Adding existing \" + store.name + \" records to the \" + index.name + \" index\");\n                        addIndexEntry(0);\n\n                        function addIndexEntry(i) {\n                            if (i < data.rows.length) {\n                                try {\n                                    var value = idbModules.Sca.decode(data.rows.item(i).value);\n                                    var indexKey = idbModules.Key.getValue(value, index.keyPath);\n                                    indexKey = idbModules.Key.encode(indexKey, index.multiEntry);\n\n                                    tx.executeSql(\"UPDATE \" + idbModules.util.quote(store.name) + \" set \" + idbModules.util.quote(index.name) + \" = ? where key = ?\", [indexKey, data.rows.item(i).key], function(tx, data) {\n                                        addIndexEntry(i + 1);\n                                    }, error);\n                                }\n                                catch (e) {\n                                    // Not a valid value to insert into index, so just continue\n                                    addIndexEntry(i + 1);\n                                }\n                            }\n                            else {\n                                success(store);\n                            }\n                        }\n                    }, error);\n                }, error);\n            }\n\n            if (columnExists) {\n                // For a previously existing index, just update the index entries in the existing column\n                applyIndex(tx);\n            }\n            else {\n                // For a new index, add a new column to the object store, then apply the index\n                var sql = [\"ALTER TABLE\", idbModules.util.quote(store.name), \"ADD\", idbModules.util.quote(index.name), \"BLOB\"].join(\" \");\n                idbModules.DEBUG && console.log(sql);\n                tx.executeSql(sql, [], applyIndex, error);\n            }\n        });\n    };\n\n    /**\n     * Deletes an index from an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @protected\n     */\n    IDBIndex.__deleteIndex = function(store, index) {\n        // Remove the index from the IDBObjectStore\n        store.__indexes[index.name].__deleted = true;\n        store.indexNames.splice(store.indexNames.indexOf(index.name), 1);\n\n        // Remove the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            // Update the object store's index list\n            IDBIndex.__updateIndexList(store, tx, success, error);\n        });\n    };\n\n    /**\n     * Updates index list for the given object store.\n     * @param {IDBObjectStore} store\n     * @param {object} tx\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBIndex.__updateIndexList = function(store, tx, success, failure) {\n        var indexList = {};\n        for (var i = 0; i < store.indexNames.length; i++) {\n            var idx = store.__indexes[store.indexNames[i]];\n            /** @type {IDBIndexProperties} **/\n            indexList[idx.name] = {\n                columnName: idx.name,\n                keyPath: idx.keyPath,\n                optionalParams: {\n                    unique: idx.unique,\n                    multiEntry: idx.multiEntry\n                },\n                deleted: !!idx.deleted\n            };\n        }\n\n        idbModules.DEBUG && console.log(\"Updating the index list for \" + store.name, indexList);\n        tx.executeSql(\"UPDATE __sys__ set indexList = ? where name = ?\", [JSON.stringify(indexList), store.name], function() {\n            success(store);\n        }, failure);\n    };\n\n    /**\n     * Retrieves index data for the given key\n     * @param {*|IDBKeyRange} key\n     * @param {string} opType\n     * @returns {IDBRequest}\n     * @private\n     */\n    IDBIndex.prototype.__fetchIndexData = function(key, opType) {\n        var me = this;\n        var hasKey, encodedKey;\n\n        // key is optional\n        if (arguments.length === 1) {\n            opType = key;\n            hasKey = false;\n        }\n        else {\n            idbModules.Key.validate(key);\n            encodedKey = idbModules.Key.encode(key, me.multiEntry);\n            hasKey = true;\n        }\n\n        return me.objectStore.transaction.__addToTransactionQueue(function fetchIndexData(tx, args, success, error) {\n            var sql = [\"SELECT * FROM\", idbModules.util.quote(me.objectStore.name), \"WHERE\", idbModules.util.quote(me.name), \"NOT NULL\"];\n            var sqlValues = [];\n            if (hasKey) {\n                if (me.multiEntry) {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"LIKE ?\");\n                    sqlValues.push(\"%\" + encodedKey + \"%\");\n                }\n                else {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"= ?\");\n                    sqlValues.push(encodedKey);\n                }\n            }\n            idbModules.DEBUG && console.log(\"Trying to fetch data for Index\", sql.join(\" \"), sqlValues);\n            tx.executeSql(sql.join(\" \"), sqlValues, function(tx, data) {\n                var recordCount = 0, record = null;\n                if (me.multiEntry) {\n                    for (var i = 0; i < data.rows.length; i++) {\n                        var row = data.rows.item(i);\n                        var rowKey = idbModules.Key.decode(row[me.name]);\n                        if (hasKey && idbModules.Key.isMultiEntryMatch(encodedKey, row[me.name])) {\n                            recordCount++;\n                            record = record || row;\n                        }\n                        else if (!hasKey && rowKey !== undefined) {\n                            recordCount = recordCount + (rowKey instanceof Array ? rowKey.length : 1);\n                            record = record || row;\n                        }\n                    }\n                }\n                else {\n                    recordCount = data.rows.length;\n                    record = recordCount && data.rows.item(0);\n                }\n\n                if (opType === \"count\") {\n                    success(recordCount);\n                }\n                else if (recordCount === 0) {\n                    success(undefined);\n                }\n                else if (opType === \"key\") {\n                    success(idbModules.Key.decode(record.key));\n                }\n                else { // when opType is value\n                    success(idbModules.Sca.decode(record.value));\n                }\n            }, error);\n        });\n    };\n\n    /**\n     * Opens a cursor over the given key range.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"value\").__req;\n    };\n\n    /**\n     * Opens a cursor over the given key range.  The cursor only includes key values, not data.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openKeyCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"key\").__req;\n    };\n\n    IDBIndex.prototype.get = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"value\");\n    };\n\n    IDBIndex.prototype.getKey = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"key\");\n    };\n\n    IDBIndex.prototype.count = function(key) {\n        // key is optional\n        if (key === undefined) {\n            return this.__fetchIndexData(\"count\");\n        }\n        else if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this.objectStore, this, this.name, \"value\", true).__req;\n        }\n        else {\n            return this.__fetchIndexData(key, \"count\");\n        }\n    };\n\n    idbModules.IDBIndex = IDBIndex;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * IndexedDB Object Store\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBObjectStore\n     * @param {IDBObjectStoreProperties} storeProperties\n     * @param {IDBTransaction} transaction\n     * @constructor\n     */\n    function IDBObjectStore(storeProperties, transaction) {\n        this.name = storeProperties.name;\n        this.keyPath = JSON.parse(storeProperties.keyPath);\n        this.transaction = transaction;\n\n        // autoInc is numeric (0/1) on WinPhone\n        this.autoIncrement = typeof storeProperties.autoInc === \"string\" ? storeProperties.autoInc === \"true\" : !!storeProperties.autoInc;\n\n        this.__indexes = {};\n        this.indexNames = new idbModules.util.StringList();\n        var indexList = JSON.parse(storeProperties.indexList);\n        for (var indexName in indexList) {\n            if (indexList.hasOwnProperty(indexName)) {\n                var index = new idbModules.IDBIndex(this, indexList[indexName]);\n                this.__indexes[index.name] = index;\n                if (!index.__deleted) {\n                    this.indexNames.push(index.name);\n                }\n            }\n        }\n    }\n\n    /**\n     * Clones an IDBObjectStore instance for a different IDBTransaction instance.\n     * @param {IDBObjectStore} store\n     * @param {IDBTransaction} transaction\n     * @protected\n     */\n    IDBObjectStore.__clone = function(store, transaction) {\n        var newStore = new IDBObjectStore({\n            name: store.name,\n            keyPath: JSON.stringify(store.keyPath),\n            autoInc: JSON.stringify(store.autoIncrement),\n            indexList: \"{}\"\n        }, transaction);\n        newStore.__indexes = store.__indexes;\n        newStore.indexNames = store.indexNames;\n        return newStore;\n    };\n\n    /**\n     * Creates a new object store in the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__createObjectStore = function(db, store) {\n        // Add the object store to the IDBDatabase\n        db.__objectStores[store.name] = store;\n        db.objectStoreNames.push(store.name);\n\n        // Add the object store to WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function createObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                throw idbModules.util.createDOMException(0, \"Could not create object store \\\"\" + store.name + \"\\\"\", err);\n            }\n\n            //key INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL UNIQUE\n            var sql = [\"CREATE TABLE\", idbModules.util.quote(store.name), \"(key BLOB\", store.autoIncrement ? \"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT\" : \"PRIMARY KEY\", \", value BLOB)\"].join(\" \");\n            idbModules.DEBUG && console.log(sql);\n            tx.executeSql(sql, [], function(tx, data) {\n                tx.executeSql(\"INSERT INTO __sys__ VALUES (?,?,?,?)\", [store.name, JSON.stringify(store.keyPath), store.autoIncrement, \"{}\"], function() {\n                    success(store);\n                }, error);\n            }, error);\n        });\n    };\n\n    /**\n     * Deletes an object store from the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__deleteObjectStore = function(db, store) {\n        // Remove the object store from the IDBDatabase\n        db.__objectStores[store.name] = undefined;\n        db.objectStoreNames.splice(db.objectStoreNames.indexOf(store.name), 1);\n\n        // Remove the object store from WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function deleteObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete ObjectStore\", err));\n            }\n\n            tx.executeSql(\"SELECT * FROM __sys__ where name = ?\", [store.name], function(tx, data) {\n                if (data.rows.length > 0) {\n                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(store.name), [], function() {\n                        tx.executeSql(\"DELETE FROM __sys__ WHERE name = ?\", [store.name], function() {\n                            success();\n                        }, error);\n                    }, error);\n                }\n            });\n        });\n    };\n\n    /**\n     * Determines whether the given inline or out-of-line key is valid, according to the object store's schema.\n     * @param {*} value     Used for inline keys\n     * @param {*} key       Used for out-of-line keys\n     * @private\n     */\n    IDBObjectStore.prototype.__validateKey = function(value, key) {\n        if (this.keyPath) {\n            if (typeof key !== \"undefined\") {\n                throw idbModules.util.createDOMException(\"DataError\", \"The object store uses in-line keys and the key parameter was provided\", this);\n            }\n            else if (value && typeof value === \"object\") {\n                key = idbModules.Key.getValue(value, this.keyPath);\n                if (key === undefined) {\n                    if (this.autoIncrement) {\n                        // A key will be generated\n                        return;\n                    }\n                    else {\n                        throw idbModules.util.createDOMException(\"DataError\", \"Could not eval key from keyPath\");\n                    }\n                }\n            }\n            else {\n                throw idbModules.util.createDOMException(\"DataError\", \"KeyPath was specified, but value was not an object\");\n            }\n        }\n        else {\n            if (typeof key === \"undefined\") {\n                if (this.autoIncrement) {\n                    // A key will be generated\n                    return;\n                }\n                else {\n                    throw idbModules.util.createDOMException(\"DataError\", \"The object store uses out-of-line keys and has no key generator and the key parameter was not provided. \", this);\n                }\n            }\n        }\n\n        idbModules.Key.validate(key);\n    };\n\n    /**\n     * From the store properties and object, extracts the value for the key in hte object Store\n     * If the table has auto increment, get the next in sequence\n     * @param {Object} tx\n     * @param {Object} value\n     * @param {Object} key\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBObjectStore.prototype.__deriveKey = function(tx, value, key, success, failure) {\n        var me = this;\n\n        function getNextAutoIncKey(callback) {\n            tx.executeSql(\"SELECT * FROM sqlite_sequence where name like ?\", [me.name], function(tx, data) {\n                if (data.rows.length !== 1) {\n                    callback(1);\n                }\n                else {\n                    callback(data.rows.item(0).seq + 1);\n                }\n            }, function(tx, error) {\n                failure(idbModules.util.createDOMException(\"DataError\", \"Could not get the auto increment value for key\", error));\n            });\n        }\n\n        if (me.keyPath) {\n            var primaryKey = idbModules.Key.getValue(value, me.keyPath);\n            if (primaryKey === undefined && me.autoIncrement) {\n                getNextAutoIncKey(function(primaryKey) {\n                    try {\n                        // Update the value with the new key\n                        idbModules.Key.setValue(value, me.keyPath, primaryKey);\n                        success(primaryKey);\n                    }\n                    catch (e) {\n                        failure(idbModules.util.createDOMException(\"DataError\", \"Could not assign a generated value to the keyPath\", e));\n                    }\n                });\n            }\n            else {\n                success(primaryKey);\n            }\n        }\n        else {\n            if (typeof key === \"undefined\" && me.autoIncrement) {\n                // Looks like this has autoInc, so lets get the next in sequence and return that.\n                getNextAutoIncKey(success);\n            }\n            else {\n                success(key);\n            }\n        }\n    };\n\n    IDBObjectStore.prototype.__insertData = function(tx, encoded, value, primaryKey, success, error) {\n        try {\n            var paramMap = {};\n            if (typeof primaryKey !== \"undefined\") {\n                idbModules.Key.validate(primaryKey);\n                paramMap.key = idbModules.Key.encode(primaryKey);\n            }\n            for (var i = 0; i < this.indexNames.length; i++) {\n                var index = this.__indexes[this.indexNames[i]];\n                paramMap[index.name] = idbModules.Key.encode(idbModules.Key.getValue(value, index.keyPath), index.multiEntry);\n            }\n            var sqlStart = [\"INSERT INTO \", idbModules.util.quote(this.name), \"(\"];\n            var sqlEnd = [\" VALUES (\"];\n            var sqlValues = [];\n            for (var key in paramMap) {\n                sqlStart.push(idbModules.util.quote(key) + \",\");\n                sqlEnd.push(\"?,\");\n                sqlValues.push(paramMap[key]);\n            }\n            // removing the trailing comma\n            sqlStart.push(\"value )\");\n            sqlEnd.push(\"?)\");\n            sqlValues.push(encoded);\n\n            var sql = sqlStart.join(\" \") + sqlEnd.join(\" \");\n\n            idbModules.DEBUG && console.log(\"SQL for adding\", sql, sqlValues);\n            tx.executeSql(sql, sqlValues, function(tx, data) {\n                idbModules.Sca.encode(primaryKey, function(primaryKey) {\n                    primaryKey = idbModules.Sca.decode(primaryKey);\n                    success(primaryKey);\n                });\n            }, function(tx, err) {\n                error(idbModules.util.createDOMError(\"ConstraintError\", err.message, err));\n            });\n        }\n        catch (e) {\n            error(e);\n        }\n    };\n\n    IDBObjectStore.prototype.add = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStoreAdd(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    me.__insertData(tx, encoded, value, primaryKey, success, error);\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.put = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStorePut(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    // First try to delete if the record exists\n                    idbModules.Key.validate(primaryKey);\n                    var sql = \"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\";\n                    tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Did the row with the\", primaryKey, \"exist? \", data.rowsAffected);\n                        me.__insertData(tx, encoded, value, primaryKey, success, error);\n                    }, function(tx, err) {\n                        error(err);\n                    });\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.get = function(key) {\n        // TODO Key should also be a key range\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        return me.transaction.__addToTransactionQueue(function objectStoreGet(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Fetched data\", data);\n                var value;\n                try {\n                    // Opera can't deal with the try-catch here.\n                    if (0 === data.rows.length) {\n                        return success();\n                    }\n\n                    value = idbModules.Sca.decode(data.rows.item(0).value);\n                }\n                catch (e) {\n                    // If no result is returned, or error occurs when parsing JSON\n                    idbModules.DEBUG && console.log(e);\n                }\n                success(value);\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype[\"delete\"] = function(key) {\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        me.transaction.__assertWritable();\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        // TODO key should also support key ranges\n        return me.transaction.__addToTransactionQueue(function objectStoreDelete(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Deleted from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.clear = function() {\n        var me = this;\n        me.transaction.__assertWritable();\n        return me.transaction.__addToTransactionQueue(function objectStoreClear(tx, args, success, error) {\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name), [], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Cleared all records from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.count = function(key) {\n        if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this, this, \"key\", \"value\", true).__req;\n        }\n        else {\n            var me = this;\n            var hasKey = false;\n\n            // key is optional\n            if (key !== undefined) {\n                hasKey = true;\n                idbModules.Key.validate(key);\n            }\n\n            return me.transaction.__addToTransactionQueue(function objectStoreCount(tx, args, success, error) {\n                var sql = \"SELECT * FROM \" + idbModules.util.quote(me.name) + (hasKey ? \" WHERE key = ?\" : \"\");\n                var sqlValues = [];\n                hasKey && sqlValues.push(idbModules.Key.encode(key));\n                tx.executeSql(sql, sqlValues, function(tx, data) {\n                    success(data.rows.length);\n                }, function(tx, err) {\n                    error(err);\n                });\n            });\n        }\n    };\n\n    IDBObjectStore.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this, this, \"key\", \"value\").__req;\n    };\n\n    IDBObjectStore.prototype.index = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n\n        return idbModules.IDBIndex.__clone(index, this);\n    };\n\n    /**\n     * Creates a new index on the object store.\n     * @param {string} indexName\n     * @param {string} keyPath\n     * @param {object} optionalParameters\n     * @returns {IDBIndex}\n     */\n    IDBObjectStore.prototype.createIndex = function(indexName, keyPath, optionalParameters) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        if (arguments.length === 1) {\n            throw new TypeError(\"No key path was specified\");\n        }\n        if (keyPath instanceof Array && optionalParameters && optionalParameters.multiEntry) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"The keyPath argument was an array and the multiEntry option is true.\");\n        }\n        if (this.__indexes[indexName] && !this.__indexes[indexName].__deleted) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Index \\\"\" + indexName + \"\\\" already exists on \" + this.name);\n        }\n\n        this.transaction.__assertVersionChange();\n\n        optionalParameters = optionalParameters || {};\n        /** @name IDBIndexProperties **/\n        var indexProperties = {\n            columnName: indexName,\n            keyPath: keyPath,\n            optionalParams: {\n                unique: !!optionalParameters.unique,\n                multiEntry: !!optionalParameters.multiEntry\n            }\n        };\n        var index = new idbModules.IDBIndex(this, indexProperties);\n        idbModules.IDBIndex.__createIndex(this, index);\n        return index;\n    };\n\n    IDBObjectStore.prototype.deleteIndex = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n        this.transaction.__assertVersionChange();\n\n        idbModules.IDBIndex.__deleteIndex(this, index);\n    };\n\n    idbModules.IDBObjectStore = IDBObjectStore;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var uniqueID = 0;\n\n    /**\n     * The IndexedDB Transaction\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBTransaction\n     * @param {IDBDatabase} db\n     * @param {string[]} storeNames\n     * @param {string} mode\n     * @constructor\n     */\n    function IDBTransaction(db, storeNames, mode) {\n        this.__id = ++uniqueID; // for debugging simultaneous transactions\n        this.__active = true;\n        this.__running = false;\n        this.__errored = false;\n        this.__requests = [];\n        this.__storeNames = storeNames;\n        this.mode = mode;\n        this.db = db;\n        this.error = null;\n        this.onabort = this.onerror = this.oncomplete = null;\n\n        // Kick off the transaction as soon as all synchronous code is done.\n        var me = this;\n        setTimeout(function() { me.__executeRequests(); }, 0);\n    }\n\n    IDBTransaction.prototype.__executeRequests = function() {\n        if (this.__running) {\n            idbModules.DEBUG && console.log(\"Looks like the request set is already running\", this.mode);\n            return;\n        }\n\n        this.__running = true;\n        var me = this;\n\n        me.db.__db.transaction(function executeRequests(tx) {\n                me.__tx = tx;\n                var q = null, i = 0;\n\n                function success(result, req) {\n                    if (req) {\n                        q.req = req;// Need to do this in case of cursors\n                    }\n                    q.req.readyState = \"done\";\n                    q.req.result = result;\n                    delete q.req.error;\n                    var e = idbModules.util.createEvent(\"success\");\n                    idbModules.util.callback(\"onsuccess\", q.req, e);\n                    i++;\n                    executeNextRequest();\n                }\n\n                function error(tx, err) {\n                    err = idbModules.util.findError(arguments);\n                    try {\n                        // Fire an error event for the current IDBRequest\n                        q.req.readyState = \"done\";\n                        q.req.error = err || \"DOMError\";\n                        q.req.result = undefined;\n                        var e = idbModules.util.createEvent(\"error\", err);\n                        idbModules.util.callback(\"onerror\", q.req, e);\n                    }\n                    finally {\n                        // Fire an error event for the transaction\n                        transactionError(err);\n                    }\n                }\n\n                function executeNextRequest() {\n                    if (i >= me.__requests.length) {\n                        // All requests in the transaction are done\n                        me.__requests = [];\n                        if (me.__active) {\n                            me.__active = false;\n                            transactionFinished();\n                        }\n                    }\n                    else {\n                        try {\n                            q = me.__requests[i];\n                            q.op(tx, q.args, success, error);\n                        }\n                        catch (e) {\n                            error(e);\n                        }\n                    }\n                }\n\n                executeNextRequest();\n            },\n\n            function webSqlError(err) {\n                transactionError(err);\n            }\n        );\n\n        function transactionError(err) {\n            idbModules.util.logError(\"Error\", \"An error occurred in a transaction\", err);\n\n            if (me.__errored) {\n                // We've already called \"onerror\", \"onabort\", or thrown, so don't do it again.\n                return;\n            }\n\n            me.__errored = true;\n\n            if (!me.__active) {\n                // The transaction has already completed, so we can't call \"onerror\" or \"onabort\".\n                // So throw the error instead.\n                throw err;\n            }\n\n            try {\n                me.error = err;\n                var evt = idbModules.util.createEvent(\"error\");\n                idbModules.util.callback(\"onerror\", me, evt);\n                idbModules.util.callback(\"onerror\", me.db, evt);\n            }\n            finally {\n                me.abort();\n            }\n        }\n\n        function transactionFinished() {\n            idbModules.DEBUG && console.log(\"Transaction completed\");\n            var evt = idbModules.util.createEvent(\"complete\");\n            try {\n                idbModules.util.callback(\"oncomplete\", me, evt);\n                idbModules.util.callback(\"__oncomplete\", me, evt);\n            }\n            catch (e) {\n                // An error occurred in the \"oncomplete\" handler.\n                // It's too late to call \"onerror\" or \"onabort\". Throw a global error instead.\n                // (this may seem odd/bad, but it's how all native IndexedDB implementations work)\n                me.__errored = true;\n                throw e;\n            }\n        }\n    };\n\n    /**\n     * Creates a new IDBRequest for the transaction.\n     * NOTE: The transaction is not queued util you call {@link IDBTransaction#__pushToQueue}\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__createRequest = function() {\n        var request = new idbModules.IDBRequest();\n        request.source = this.db;\n        request.transaction = this;\n        return request;\n    };\n\n    /**\n     * Adds a callback function to the transaction queue\n     * @param {function} callback\n     * @param {*} args\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__addToTransactionQueue = function(callback, args) {\n        var request = this.__createRequest();\n        this.__pushToQueue(request, callback, args);\n        return request;\n    };\n\n    /**\n     * Adds an IDBRequest to the transaction queue\n     * @param {IDBRequest} request\n     * @param {function} callback\n     * @param {*} args\n     * @protected\n     */\n    IDBTransaction.prototype.__pushToQueue = function(request, callback, args) {\n        this.__assertActive();\n        this.__requests.push({\n            \"op\": callback,\n            \"args\": args,\n            \"req\": request\n        });\n    };\n\n    IDBTransaction.prototype.__assertActive = function() {\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"TransactionInactiveError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertWritable = function() {\n        if (this.mode === IDBTransaction.READ_ONLY) {\n            throw idbModules.util.createDOMException(\"ReadOnlyError\", \"The transaction is read only\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertVersionChange = function() {\n        IDBTransaction.__assertVersionChange(this);\n    };\n\n    IDBTransaction.__assertVersionChange = function(tx) {\n        if (!tx || tx.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"Not a version transaction\");\n        }\n    };\n\n    /**\n     * Returns the specified object store.\n     * @param {string} objectStoreName\n     * @returns {IDBObjectStore}\n     */\n    IDBTransaction.prototype.objectStore = function(objectStoreName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n        if (this.__storeNames.indexOf(objectStoreName) === -1 && this.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" is not participating in this transaction\");\n        }\n        var store = this.db.__objectStores[objectStoreName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" does not exist in \" + this.db.name);\n        }\n\n        return idbModules.IDBObjectStore.__clone(store, this);\n    };\n\n    IDBTransaction.prototype.abort = function() {\n        var me = this;\n        idbModules.DEBUG && console.log(\"The transaction was aborted\", me);\n        me.__active = false;\n        var evt = idbModules.util.createEvent(\"abort\");\n\n        // Fire the \"onabort\" event asynchronously, so errors don't bubble\n        setTimeout(function() {\n            idbModules.util.callback(\"onabort\", me, evt);\n        }, 0);\n    };\n\n    IDBTransaction.READ_ONLY = \"readonly\";\n    IDBTransaction.READ_WRITE = \"readwrite\";\n    IDBTransaction.VERSION_CHANGE = \"versionchange\";\n\n    idbModules.IDBTransaction = IDBTransaction;\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * IDB Database Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#database-interface\n     * @constructor\n     */\n    function IDBDatabase(db, name, version, storeProperties){\n        this.__db = db;\n        this.__closed = false;\n        this.version = version;\n        this.name = name;\n        this.onabort = this.onerror = this.onversionchange = null;\n\n        this.__objectStores = {};\n        this.objectStoreNames = new idbModules.util.StringList();\n        for (var i = 0; i < storeProperties.rows.length; i++) {\n            var store = new idbModules.IDBObjectStore(storeProperties.rows.item(i));\n            this.__objectStores[store.name] = store;\n            this.objectStoreNames.push(store.name);\n        }\n    }\n\n    /**\n     * Creates a new object store.\n     * @param {string} storeName\n     * @param {object} [createOptions]\n     * @returns {IDBObjectStore}\n     */\n    IDBDatabase.prototype.createObjectStore = function(storeName, createOptions){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (this.__objectStores[storeName]) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Object store \\\"\" + storeName + \"\\\" already exists in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        createOptions = createOptions || {};\n        /** @name IDBObjectStoreProperties **/\n        var storeProperties = {\n            name: storeName,\n            keyPath: JSON.stringify(createOptions.keyPath || null),\n            autoInc: JSON.stringify(createOptions.autoIncrement),\n            indexList: \"{}\"\n        };\n        var store = new idbModules.IDBObjectStore(storeProperties, this.__versionTransaction);\n        idbModules.IDBObjectStore.__createObjectStore(this, store);\n        return store;\n    };\n\n    /**\n     * Deletes an object store.\n     * @param {string} storeName\n     */\n    IDBDatabase.prototype.deleteObjectStore = function(storeName){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        var store = this.__objectStores[storeName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Object store \\\"\" + storeName + \"\\\" does not exist in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        idbModules.IDBObjectStore.__deleteObjectStore(this, store);\n    };\n\n    IDBDatabase.prototype.close = function(){\n        this.__closed = true;\n    };\n\n    /**\n     * Starts a new transaction.\n     * @param {string|string[]} storeNames\n     * @param {string} mode\n     * @returns {IDBTransaction}\n     */\n    IDBDatabase.prototype.transaction = function(storeNames, mode){\n        if (this.__closed) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"An attempt was made to start a new transaction on a database connection that is not open\");\n        }\n\n        if (typeof mode === \"number\") {\n            mode = mode === 1 ? IDBTransaction.READ_WRITE : IDBTransaction.READ_ONLY;\n            idbModules.DEBUG && console.log(\"Mode should be a string, but was specified as \", mode);\n        }\n        else {\n            mode = mode || IDBTransaction.READ_ONLY;\n        }\n\n        if (mode !== IDBTransaction.READ_ONLY && mode !== IDBTransaction.READ_WRITE) {\n            throw new TypeError(\"Invalid transaction mode: \" + mode);\n        }\n\n        storeNames = typeof storeNames === \"string\" ? [storeNames] : storeNames;\n        if (storeNames.length === 0) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"No object store names were specified\");\n        }\n        for (var i = 0; i < storeNames.length; i++) {\n            if (!this.objectStoreNames.contains(storeNames[i])) {\n                throw idbModules.util.createDOMException(\"NotFoundError\", \"The \\\"\" + storeNames[i] + \"\\\" object store does not exist\");\n            }\n        }\n\n        var transaction = new idbModules.IDBTransaction(this, storeNames, mode);\n        return transaction;\n    };\n    \n    idbModules.IDBDatabase = IDBDatabase;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var DEFAULT_DB_SIZE = 4 * 1024 * 1024;\n    var sysdb;\n\n    /**\n     * Craetes the sysDB to keep track of version numbers for databases\n     **/\n    function createSysDB(success, failure) {\n        function sysDbCreateError(tx, err) {\n            err = idbModules.util.findError(arguments);\n            idbModules.DEBUG && console.log(\"Error in sysdb transaction - when creating dbVersions\", err);\n            failure(err);\n        }\n\n        if (sysdb) {\n            success();\n        }\n        else {\n            sysdb = window.openDatabase(\"__sysdb__\", 1, \"System Database\", DEFAULT_DB_SIZE);\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);\", [], success, sysDbCreateError);\n            }, sysDbCreateError);\n        }\n    }\n\n    /**\n     * IDBFactory Class\n     * https://w3c.github.io/IndexedDB/#idl-def-IDBFactory\n     * @constructor\n     */\n    function IDBFactory() {\n        this.modules = idbModules;\n    }\n\n    /**\n     * The IndexedDB Method to create a new database and return the DB\n     * @param {string} name\n     * @param {number} version\n     */\n    IDBFactory.prototype.open = function(name, version) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDbCreateError = false;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        else if (arguments.length === 2) {\n            version = parseFloat(version);\n            if (isNaN(version) || !isFinite(version) || version <= 0) {\n                throw new TypeError('Invalid database version: ' + version);\n            }\n        }\n        name = name + ''; // cast to a string\n\n        function dbCreateError(tx, err) {\n            if (calledDbCreateError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            calledDbCreateError = true;\n            var evt = idbModules.util.createEvent(\"error\", arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            idbModules.util.callback(\"onerror\", req, evt);\n        }\n\n        function openDB(oldVersion) {\n            var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n            req.readyState = \"done\";\n            if (typeof version === \"undefined\") {\n                version = oldVersion || 1;\n            }\n            if (version <= 0 || oldVersion > version) {\n                var err = idbModules.util.createDOMError(\"VersionError\", \"An attempt was made to open a database using a lower version than the existing version.\", version);\n                dbCreateError(err);\n                return;\n            }\n\n            db.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)\", [], function() {\n                    tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                        var e = idbModules.util.createEvent(\"success\");\n                        req.source = req.result = new idbModules.IDBDatabase(db, name, version, data);\n                        if (oldVersion < version) {\n                            // DB Upgrade in progress\n                            sysdb.transaction(function(systx) {\n                                systx.executeSql(\"UPDATE dbVersions set version = ? where name = ?\", [version, name], function() {\n                                    var e = idbModules.util.createEvent(\"upgradeneeded\");\n                                    e.oldVersion = oldVersion;\n                                    e.newVersion = version;\n                                    req.transaction = req.result.__versionTransaction = new idbModules.IDBTransaction(req.source, [], idbModules.IDBTransaction.VERSION_CHANGE);\n                                    req.transaction.__addToTransactionQueue(function onupgradeneeded(tx, args, success) {\n                                        idbModules.util.callback(\"onupgradeneeded\", req, e);\n                                        success();\n                                    });\n                                    req.transaction.__oncomplete = function() {\n                                        req.transaction = null;\n                                        var e = idbModules.util.createEvent(\"success\");\n                                        idbModules.util.callback(\"onsuccess\", req, e);\n                                    };\n                                }, dbCreateError);\n                            }, dbCreateError);\n                        } else {\n                            idbModules.util.callback(\"onsuccess\", req, e);\n                        }\n                    }, dbCreateError);\n                }, dbCreateError);\n            }, dbCreateError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        // Database with this name does not exist\n                        tx.executeSql(\"INSERT INTO dbVersions VALUES (?,?)\", [name, version || 1], function() {\n                            openDB(0);\n                        }, dbCreateError);\n                    } else {\n                        openDB(data.rows.item(0).version);\n                    }\n                }, dbCreateError);\n            }, dbCreateError);\n        }, dbCreateError);\n\n        return req;\n    };\n\n    /**\n     * Deletes a database\n     * @param {string} name\n     * @returns {IDBOpenDBRequest}\n     */\n    IDBFactory.prototype.deleteDatabase = function(name) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDBError = false;\n        var version = null;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        name = name + ''; // cast to a string\n\n        function dbError(tx, err) {\n            if (calledDBError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            var e = idbModules.util.createEvent(\"error\");\n            e.debug = arguments;\n            idbModules.util.callback(\"onerror\", req, e);\n            calledDBError = true;\n        }\n\n        function deleteFromDbVersions() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"DELETE FROM dbVersions where name = ? \", [name], function() {\n                    req.result = undefined;\n                    var e = idbModules.util.createEvent(\"success\");\n                    e.newVersion = null;\n                    e.oldVersion = version;\n                    idbModules.util.callback(\"onsuccess\", req, e);\n                }, dbError);\n            }, dbError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        req.result = undefined;\n                        var e = idbModules.util.createEvent(\"success\");\n                        e.newVersion = null;\n                        e.oldVersion = version;\n                        idbModules.util.callback(\"onsuccess\", req, e);\n                        return;\n                    }\n                    version = data.rows.item(0).version;\n                    var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n                    db.transaction(function(tx) {\n                        tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                            var tables = data.rows;\n                            (function deleteTables(i) {\n                                if (i >= tables.length) {\n                                    // If all tables are deleted, delete the housekeeping tables\n                                    tx.executeSql(\"DROP TABLE IF EXISTS __sys__\", [], function() {\n                                        // Finally, delete the record for this DB from sysdb\n                                        deleteFromDbVersions();\n                                    }, dbError);\n                                } else {\n                                    // Delete all tables in this database, maintained in the sys table\n                                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(tables.item(i).name), [], function() {\n                                        deleteTables(i + 1);\n                                    }, function() {\n                                        deleteTables(i + 1);\n                                    });\n                                }\n                            }(0));\n                        }, function(e) {\n                            // __sysdb table does not exist, but that does not mean delete did not happen\n                            deleteFromDbVersions();\n                        });\n                    });\n                }, dbError);\n            }, dbError);\n        }, dbError);\n\n        return req;\n    };\n\n    /**\n     * Compares two keys\n     * @param key1\n     * @param key2\n     * @returns {number}\n     */\n    IDBFactory.prototype.cmp = function(key1, key2) {\n        if (arguments.length < 2) {\n            throw new TypeError(\"You must provide two keys to be compared\");\n        }\n\n        idbModules.Key.validate(key1);\n        idbModules.Key.validate(key2);\n        var encodedKey1 = idbModules.Key.encode(key1);\n        var encodedKey2 = idbModules.Key.encode(key2);\n        var result = encodedKey1 > encodedKey2 ? 1 : encodedKey1 === encodedKey2 ? 0 : -1;\n        \n        if (idbModules.DEBUG) {\n            // verify that the keys encoded correctly\n            var decodedKey1 = idbModules.Key.decode(encodedKey1);\n            var decodedKey2 = idbModules.Key.decode(encodedKey2);\n            if (typeof key1 === \"object\") {\n                key1 = JSON.stringify(key1);\n                decodedKey1 = JSON.stringify(decodedKey1);\n            }\n            if (typeof key2 === \"object\") {\n                key2 = JSON.stringify(key2);\n                decodedKey2 = JSON.stringify(decodedKey2);\n            }\n\n            // encoding/decoding mismatches are usually due to a loss of floating-point precision\n            if (decodedKey1 !== key1) {\n                console.warn(key1 + ' was incorrectly encoded as ' + decodedKey1);\n            }\n            if (decodedKey2 !== key2) {\n                console.warn(key2 + ' was incorrectly encoded as ' + decodedKey2);\n            }\n        }\n        \n        return result;\n    };\n\n\n    idbModules.shimIndexedDB = new IDBFactory();\n    idbModules.IDBFactory = IDBFactory;\n}(idbModules));\n\n(function(window, idbModules){\n    'use strict';\n\n    function shim(name, value) {\n        try {\n            // Try setting the property. This will fail if the property is read-only.\n            window[name] = value;\n        }\n        catch (e) {}\n\n        if (window[name] !== value && Object.defineProperty) {\n            // Setting a read-only property failed, so try re-defining the property\n            try {\n                Object.defineProperty(window, name, {\n                    value: value\n                });\n            }\n            catch (e) {}\n\n            if (window[name] !== value) {\n                window.console && console.warn && console.warn('Unable to shim ' + name);\n            }\n        }\n    }\n\n    shim('shimIndexedDB', idbModules.shimIndexedDB);\n    if (window.shimIndexedDB) {\n        window.shimIndexedDB.__useShim = function(){\n            if (typeof window.openDatabase !== \"undefined\") {\n                // Polyfill ALL of IndexedDB, using WebSQL\n                shim('indexedDB', idbModules.shimIndexedDB);\n                shim('IDBFactory', idbModules.IDBFactory);\n                shim('IDBDatabase', idbModules.IDBDatabase);\n                shim('IDBObjectStore', idbModules.IDBObjectStore);\n                shim('IDBIndex', idbModules.IDBIndex);\n                shim('IDBTransaction', idbModules.IDBTransaction);\n                shim('IDBCursor', idbModules.IDBCursor);\n                shim('IDBKeyRange', idbModules.IDBKeyRange);\n                shim('IDBRequest', idbModules.IDBRequest);\n                shim('IDBOpenDBRequest', idbModules.IDBOpenDBRequest);\n                shim('IDBVersionChangeEvent', idbModules.IDBVersionChangeEvent);\n            }\n            else if (typeof window.indexedDB === \"object\") {\n                // Polyfill the missing IndexedDB features\n                idbModules.polyfill();\n            }\n        };\n\n        window.shimIndexedDB.__debug = function(val){\n            idbModules.DEBUG = val;\n        };\n    }\n    \n    // Workaround to prevent an error in Firefox\n    if(!('indexedDB' in window)) {\n        window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.oIndexedDB || window.msIndexedDB;\n    }\n    \n    // Detect browsers with known IndexedDb issues (e.g. Android pre-4.4)\n    var poorIndexedDbSupport = false;\n    if (navigator.userAgent.match(/Android 2/) || navigator.userAgent.match(/Android 3/) || navigator.userAgent.match(/Android 4\\.[0-3]/)) {\n        /* Chrome is an exception. It supports IndexedDb */\n        if (!navigator.userAgent.match(/Chrome/)) {\n            poorIndexedDbSupport = true;\n        }\n    }\n\n    if ((typeof window.indexedDB === \"undefined\" || !window.indexedDB || poorIndexedDbSupport) && typeof window.openDatabase !== \"undefined\") {\n        window.shimIndexedDB.__useShim();\n    }\n    else {\n        window.IDBDatabase = window.IDBDatabase || window.webkitIDBDatabase;\n        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;\n        window.IDBCursor = window.IDBCursor || window.webkitIDBCursor;\n        window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;\n        if(!window.IDBTransaction){\n            window.IDBTransaction = {};\n        }\n        /* Some browsers (e.g. Chrome 18 on Android) support IndexedDb but do not allow writing of these properties */\n        try {\n            window.IDBTransaction.READ_ONLY = window.IDBTransaction.READ_ONLY || \"readonly\";\n            window.IDBTransaction.READ_WRITE = window.IDBTransaction.READ_WRITE || \"readwrite\";\n        } catch (e) {}\n    }\n    \n}(window, idbModules));\n\n\n},{}],14:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],15:[function(require,module,exports){\n'use strict';\n\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Log = undefined;\n\nvar _loglevel = require('loglevel');\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar originalFactory = _loglevel2.default.methodFactory;\n\n_loglevel2.default.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  var rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod('Kinvey: ' + message);\n  };\n};\n\n_loglevel2.default.setLevel(_loglevel2.default.levels.ERROR);\nexports.Log = _loglevel2.default;\n\n},{\"loglevel\":227}],17:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Acl = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar aclAttribute = process.env.KINVEY_ACL_ATTRIBUTE || '_acl';\n\n/**\n * Wrapper for reading and setting permissions on an entity level.\n *\n * @example\n * var entity = { _acl: {} };\n * var acl = new Kinvey.Acl(entity);\n */\n\nvar Acl = exports.Acl = function () {\n  function Acl() {\n    var entity = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Acl);\n\n    if (!(0, _isPlainObject2.default)(entity)) {\n      throw new _errors.KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.acl = entity[aclAttribute];\n  }\n\n  _createClass(Acl, [{\n    key: 'addReader',\n    value: function addReader(user) {\n      var r = this.acl.r || [];\n\n      if (r.indexOf(user) === -1) {\n        r.push(user);\n      }\n\n      this.acl.r = r;\n      return this;\n    }\n  }, {\n    key: 'addReaderGroup',\n    value: function addReaderGroup(group) {\n      var groups = this.acl.groups || {};\n      var r = groups.r || [];\n\n      if (r.indexOf(group) === -1) {\n        r.push(group);\n      }\n\n      groups.r = r;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'addWriter',\n    value: function addWriter(user) {\n      var w = this.acl.w || [];\n\n      if (w.indexOf(user) === -1) {\n        w.push(user);\n      }\n\n      this.acl.w = w;\n      return this;\n    }\n  }, {\n    key: 'addWriterGroup',\n    value: function addWriterGroup(group) {\n      var groups = this.acl.groups || {};\n      var w = groups.w || [];\n\n      if (w.indexOf(group) === -1) {\n        w.push(group);\n      }\n\n      groups.w = w;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'isGloballyReadable',\n    value: function isGloballyReadable() {\n      return this.acl.gr || false;\n    }\n  }, {\n    key: 'isGloballyWritable',\n    value: function isGloballyWritable() {\n      return this.acl.gw || false;\n    }\n  }, {\n    key: 'removeReader',\n    value: function removeReader(user) {\n      var r = this.acl.r || [];\n      var pos = r.indexOf(user);\n\n      if (pos !== -1) {\n        r.splice(pos, 1);\n      }\n\n      this.acl.r = r;\n      return this;\n    }\n  }, {\n    key: 'removeReaderGroup',\n    value: function removeReaderGroup(group) {\n      var groups = this.acl.groups || {};\n      var r = groups.r || [];\n      var pos = r.indexOf(group);\n\n      if (pos !== -1) {\n        r.splice(pos, 1);\n      }\n\n      groups.r = r;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'removeWriter',\n    value: function removeWriter(user) {\n      var w = this.acl.w || [];\n      var pos = w.indexOf(user);\n\n      if (pos !== -1) {\n        w.splice(pos, 1);\n      }\n\n      this.acl.w = w;\n      return this;\n    }\n  }, {\n    key: 'removeWriterGroup',\n    value: function removeWriterGroup(group) {\n      var groups = this.acl.groups || {};\n      var w = groups.w || [];\n      var pos = w.indexOf(group);\n\n      if (pos !== -1) {\n        w.splice(pos, 1);\n      }\n\n      groups.w = w;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.acl;\n    }\n  }, {\n    key: 'creator',\n    get: function get() {\n      return this.acl.creator;\n    }\n  }, {\n    key: 'readers',\n    get: function get() {\n      return this.acl.r || [];\n    }\n  }, {\n    key: 'writers',\n    get: function get() {\n      return this.acl.w || [];\n    }\n  }, {\n    key: 'readerGroups',\n    get: function get() {\n      return this.acl.groups ? this.acl.groups.r : [];\n    }\n  }, {\n    key: 'writerGroups',\n    get: function get() {\n      return this.acl.groups ? this.acl.groups.w : [];\n    }\n  }, {\n    key: 'globallyReadable',\n    set: function set(gr) {\n      this.acl.gr = gr || false;\n    }\n  }, {\n    key: 'globallyWritable',\n    set: function set(gw) {\n      this.acl.gw = gw || false;\n    }\n  }]);\n\n  return Acl;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./errors\":22,\"_process\":229,\"lodash/isPlainObject\":206}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Aggregation = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _query2 = require('./query');\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Aggregation = function () {\n  function Aggregation(options) {\n    _classCallCheck(this, Aggregation);\n\n    options = (0, _assign2.default)({\n      query: null,\n      initial: {},\n      key: {},\n      reduce: function () {}.toString()\n    }, options);\n\n    this.query(options.query);\n    this._initial = options.initial;\n    this._key = options.key;\n    this._reduce = options.reduce;\n  }\n\n  _createClass(Aggregation, [{\n    key: 'by',\n    value: function by(field) {\n      this._key[field] = true;\n      return this;\n    }\n  }, {\n    key: 'initial',\n    value: function initial(objectOrKey, value) {\n      if (typeof value === 'undefined' && !(0, _isObject2.default)(objectOrKey)) {\n        throw new _errors.KinveyError('objectOrKey argument must be an Object.');\n      }\n\n      if ((0, _isObject2.default)(objectOrKey)) {\n        this._initial = objectOrKey;\n      } else {\n        this._initial[objectOrKey] = value;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'query',\n    value: function query(_query) {\n      if (_query && !(_query instanceof _query2.Query)) {\n        _query = new _query2.Query((0, _result2.default)(_query, 'toJSON', _query));\n      }\n\n      this._query = _query;\n      return this;\n    }\n  }, {\n    key: 'process',\n    value: function process() {\n      var entities = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n      var groups = {};\n      var response = [];\n      var aggregation = this.toJSON();\n      var reduce = aggregation.reduce.replace(/function[\\s\\S]*?\\([\\s\\S]*?\\)/, '');\n      aggregation.reduce = new Function(['doc', 'out'], reduce); // eslint-disable-line no-new-func\n\n      if (this._query) {\n        entities = this._query.process(entities);\n      }\n\n      (0, _forEach2.default)(entities, function (entity) {\n        var group = {};\n        var entityNames = Object.keys(entity);\n\n        (0, _forEach2.default)(entityNames, function (name) {\n          group[name] = entity[name];\n        });\n\n        var key = JSON.stringify(group);\n        if (!groups[key]) {\n          groups[key] = group;\n          var attributes = Object.keys(aggregation.initial);\n\n          (0, _forEach2.default)(attributes, function (attr) {\n            groups[key][attr] = aggregation.initial[attr];\n          });\n        }\n\n        aggregation.reduce(entity, groups[key]);\n      });\n\n      var segments = Object.keys(groups);\n      (0, _forEach2.default)(segments, function (segment) {\n        response.push(groups[segment]);\n      });\n\n      return response;\n    }\n  }, {\n    key: 'reduce',\n    value: function reduce(fn) {\n      if ((0, _isFunction2.default)(fn)) {\n        fn = fn.toString();\n      }\n\n      if (!(0, _isString2.default)(fn)) {\n        throw new _errors.KinveyError('fn argument must be of type function or string.');\n      }\n\n      this._reduce = fn;\n      return this;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        key: this._key,\n        initial: this._initial,\n        reduce: this._reduce,\n        condition: this._query ? this._query.toJSON().filter : {},\n        query: this._query ? this._query.toJSON() : null\n      };\n\n      return json;\n    }\n  }], [{\n    key: 'count',\n    value: function count() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      var aggregation = new Aggregation();\n\n      if (field) {\n        aggregation.by(field);\n      }\n\n      aggregation.initial({ result: 0 });\n      aggregation.reduce(function (doc, out) {\n        out.result += 1;\n      });\n      return aggregation;\n    }\n  }, {\n    key: 'sum',\n    value: function sum() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ result: 0 });\n      aggregation.reduce('function(doc, out) { ' + (' out.result += doc[\"' + field + '\"]; ') + '}');\n      return aggregation;\n    }\n  }, {\n    key: 'min',\n    value: function min() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ result: Infinity });\n      aggregation.reduce('function(doc, out) { ' + (' out.result = Math.min(out.result, doc[\"' + field + '\"]); ') + '}');\n      return aggregation;\n    }\n  }, {\n    key: 'max',\n    value: function max() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ result: -Infinity });\n      aggregation.reduce('function(doc, out) { ' + (' out.result = Math.max(out.result, doc[\"' + field + '\"]); ') + '}');\n      return aggregation;\n    }\n  }, {\n    key: 'average',\n    value: function average() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ count: 0, result: 0 });\n      aggregation.reduce('function(doc, out) { ' + (' out.result = (out.result * out.count + doc[\"' + field + '\"]) / (out.count + 1);') + ' out.count += 1;' + '}');\n      return aggregation;\n    }\n  }]);\n\n  return Aggregation;\n}();\n\nexports.Aggregation = Aggregation;\n\n},{\"./errors\":22,\"./query\":27,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isFunction\":200,\"lodash/isObject\":204,\"lodash/isString\":208,\"lodash/result\":220}],19:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _localStorage = require('local-storage');\n\nvar _localStorage2 = _interopRequireDefault(_localStorage);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar activeUserCollectionName = process.env.KINVEY_ACTIVE_USER_COLLECTION_NAME || 'kinvey_activeUser';\nvar activeSocialIdentityTokenCollectionName = process.env.KINVEY_ACTIVE_SOCIAL_IDENTITY_TOKEN_COLLECTION_NAME || 'kinvey_activeSocialIdentityToken';\nvar _sharedInstance = void 0;\n\n/**\n * The Client class stores information regarding your application. You can create mutiple clients\n * to send requests to different environments on the Kinvey platform.\n *\n * @example\n * var client = new Kinvey.Client({\n *   appKey: '<appKey>',\n *   appSecret: '<appSecret>'\n * });\n */\n\nvar Client = exports.Client = function () {\n  /**\n   * Creates a new instance of the Client class. An `options.appKey` must be provided along with\n   * either and `options.appSecret` or `options.masterSecret`.\n   *\n   * @param {Object}    options                             Options\n   * @param {string}    [options.protocol='https']          Protocl used for requests\n   * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n   * @param {string}    options.appKey                      App Key\n   * @param {string}    [options.appSecret]                 App Secret\n   * @param {string}    [options.masterSecret]              App Master Secret\n   * @param {string}    [options.encryptionKey]             App Encryption Key\n   *\n   * @throws {KinveyError}  If an `options.appKey` is not provided.\n   * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   */\n\n  function Client() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Client);\n\n    options = (0, _assign2.default)({\n      protocol: process.env.KINVEY_API_PROTOCOL || 'https:',\n      host: process.env.KINVEY_API_HOST || 'baas.kinvey.com'\n    }, options);\n\n    if (!options.appKey && !options.appId) {\n      throw new _errors.KinveyError('No App Key was provided. ' + 'Unable to create a new Client without an App Key.');\n    }\n\n    if (!options.appSecret && !options.masterSecret) {\n      throw new _errors.KinveyError('No App Secret or Master Secret was provided. ' + 'Unable to create a new Client without an App Key.');\n    }\n\n    if (options.hostname && (0, _isString2.default)(options.hostname)) {\n      var hostnameParsed = _url2.default.parse(options.hostname);\n      options.protocol = hostnameParsed.protocol;\n      options.host = hostnameParsed.host;\n    }\n\n    /**\n     * @type {string}\n     */\n    this.protocol = options.protocol;\n\n    /**\n     * @type {string}\n     */\n    this.host = options.host;\n\n    /**\n     * @type {string}\n     */\n    this.appKey = options.appKey || options.appId;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.appSecret = options.appSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.masterSecret = options.masterSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.encryptionKey = options.encryptionKey;\n  }\n\n  _createClass(Client, [{\n    key: 'getActiveUserData',\n    value: function getActiveUserData() {\n      return _localStorage2.default.get('' + this.appKey + activeUserCollectionName);\n    }\n  }, {\n    key: 'setActiveUserData',\n    value: function setActiveUserData(data) {\n      if (data) {\n        try {\n          return _localStorage2.default.set('' + this.appKey + activeUserCollectionName, data);\n        } catch (error) {\n          return false;\n        }\n      }\n\n      return _localStorage2.default.remove('' + this.appKey + activeUserCollectionName);\n    }\n  }, {\n    key: 'getActiveSocialIdentity',\n    value: function getActiveSocialIdentity() {\n      return _localStorage2.default.get('' + this.appKey + activeSocialIdentityTokenCollectionName);\n    }\n  }, {\n    key: 'setActiveSocialIdentity',\n    value: function setActiveSocialIdentity(socialIdentity) {\n      if (socialIdentity) {\n        try {\n          return _localStorage2.default.set('' + this.appKey + activeSocialIdentityTokenCollectionName, socialIdentity);\n        } catch (error) {\n          return false;\n        }\n      }\n\n      return _localStorage2.default.remove('' + this.appKey + activeSocialIdentityTokenCollectionName);\n    }\n\n    /**\n     * Returns an object containing all the information for this Client.\n     *\n     * @return {Object} JSON\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        protocol: this.protocol,\n        host: this.host,\n        appKey: this.appKey,\n        appSecret: this.appSecret,\n        masterSecret: this.masterSecret,\n        encryptionKey: this.encryptionKey\n      };\n\n      return json;\n    }\n\n    /**\n     * Initializes the library by creating a new instance of the\n     * Client class and storing it as a shared instance.\n     *\n     * @param {Object}    options                             Options\n     * @param {string}    [options.protocol='https']          Protocl used for requests\n     * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n     * @param {string}    options.appKey                      App Key\n     * @param {string}    [options.appSecret]                 App Secret\n     * @param {string}    [options.masterSecret]              App Master Secret\n     * @param {string}    [options.encryptionKey]             App Encryption Key\n     *\n     * @throws {KinveyError}  If an `options.appKey` is not provided.\n     * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n     *\n     * @return {Client}  An instance of Client.\n     *\n     * @example\n     * var client = Kinvey.Client.init({\n     *   appKey: '<appKey>',\n     *   appSecret: '<appSecret>'\n     * });\n     */\n\n  }, {\n    key: 'baseUrl',\n    get: function get() {\n      return _url2.default.format({\n        protocol: this.protocol,\n        host: this.host\n      });\n    }\n  }], [{\n    key: 'init',\n    value: function init(options) {\n      var client = new Client(options);\n      _sharedInstance = client;\n      return client;\n    }\n\n    /**\n     * Returns the shared client instance used by the library.\n     *\n     * @throws {KinveyError} If `Kinvey.init()` has not been called.\n     *\n     * @return {Client} The shared instance.\n     */\n\n  }, {\n    key: 'sharedInstance',\n    value: function sharedInstance() {\n      var client = _sharedInstance;\n\n      if (!client) {\n        throw new _errors.KinveyError('You have not initialized the library. ' + 'Please call Kinvey.init() to initialize the library.');\n      }\n\n      return client;\n    }\n  }]);\n\n  return Client;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./errors\":22,\"_process\":229,\"local-storage\":57,\"lodash/assign\":184,\"lodash/isString\":208,\"url\":244}],20:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Command = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _client = require('./client');\n\nvar _enums = require('./enums');\n\nvar _errors = require('./errors');\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\n\n/**\n * Executes a custom command.\n */\n\nvar Command = exports.Command = function () {\n  function Command() {\n    _classCallCheck(this, Command);\n  }\n\n  _createClass(Command, null, [{\n    key: 'execute',\n\n    /**\n     * Execute a custom command. A promise will be returned that will be resolved\n     * with the result of the command or rejected with an error.\n     *\n     * @param   {String}          command                           Command to execute.\n     * @param   {Object}          [args]                            Command arguments\n     * @param   {Object}          [options]                         Options\n     * @param   {Properties}      [options.properties]              Custom properties to send with\n     *                                                              the request.\n     * @param   {Number}          [options.timeout]                 Timeout for the request.\n     * @return  {Promise}                                           Promise\n     *\n     * @example\n     * var promise = Kinvey.Command.execute('myCustomCommand').then(function(data) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function execute(command, args) {\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var client = _client.Client.sharedInstance();\n\n      if (!command) {\n        throw new _errors.KinveyError('A command is required.');\n      }\n\n      if (!(0, _isString2.default)(command)) {\n        throw new _errors.KinveyError('Command must be a string.');\n      }\n\n      return client.executeNetworkRequest({\n        method: _enums.HttpMethod.POST,\n        pathname: '/' + rpcNamespace + '/' + options.client.appKey + '/custom/' + command,\n        properties: options.properties,\n        auth: client.defaultAuth(),\n        data: args,\n        timeout: options.timeout\n      }).then(function (response) {\n        return response.data;\n      });\n    }\n  }]);\n\n  return Command;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./client\":19,\"./enums\":21,\"./errors\":22,\"_process\":229,\"lodash/isString\":208}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Enum for Mobile Identity Connect authorization grants.\n */\nvar AuthorizationGrant = {\n  AuthorizationCodeLoginPage: 'AuthorizationCodeLoginPage',\n  AuthorizationCodeAPI: 'AuthorizationCodeAPI'\n};\nObject.freeze(AuthorizationGrant);\nexports.AuthorizationGrant = AuthorizationGrant;\n\n\nvar AuthType = {\n  All: 'All',\n  App: 'App',\n  Basic: 'Basic',\n  Default: 'Default',\n  Master: 'Master',\n  None: 'None',\n  Session: 'Session'\n};\nObject.freeze(AuthType);\nexports.AuthType = AuthType;\n\n/**\n * Enum for DataStore types.\n */\n\nvar DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexports.DataStoreType = DataStoreType;\n\n/**\n * @private\n * Enum for Http Methods.\n */\n\nvar HttpMethod = {\n  GET: 'GET',\n  POST: 'POST',\n  PATCH: 'PATCH',\n  PUT: 'PUT',\n  DELETE: 'DELETE'\n};\nObject.freeze(HttpMethod);\nexports.HttpMethod = HttpMethod;\n\n/**\n * Enum for Social Identities.\n */\n\nvar SocialIdentity = {\n  Facebook: 'facebook',\n  Google: 'google',\n  LinkedIn: 'linkedin'\n};\nObject.freeze(SocialIdentity);\nexports.SocialIdentity = SocialIdentity;\n\n/**\n * @provate\n * Enum for Status Codes.\n */\n\nvar StatusCode = {\n  Ok: 200,\n  Created: 201,\n  RedirectTemporarily: 301,\n  RedirectPermanetly: 302,\n  NotFound: 404,\n  ServerError: 500\n};\nObject.freeze(StatusCode);\nexports.StatusCode = StatusCode;\n\n},{}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NoResponseError = exports.NotFoundError = exports.NetworkConnectionError = exports.KinveyError = exports.InvalidCredentialsError = exports.InsufficientCredentialsError = exports.ActiveUserError = undefined;\n\nvar _util = require('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @private\n */\nError.extend = function extend(name) {\n  var SubType = function SubType(message, debug) {\n    if (!(this instanceof SubType)) {\n      return new SubType(message, debug);\n    }\n\n    this.name = name;\n    this.message = message;\n    this.description = message;\n    this.debug = debug;\n\n    if ((0, _isFunction2.default)(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  };\n\n  _util2.default.inherits(SubType, this);\n\n  SubType.prototype.toString = function toString() {\n    return this.name + ': ' + _util2.default.inspect(this.message);\n  };\n\n  SubType.extend = this.extend;\n  return SubType;\n};\n\nvar ActiveUserError = exports.ActiveUserError = Error.extend('ActiveUserError');\nvar InsufficientCredentialsError = exports.InsufficientCredentialsError = Error.extend('InsufficientCredentialsError');\nvar InvalidCredentialsError = exports.InvalidCredentialsError = Error.extend('InvalidCredentialsError');\nvar KinveyError = exports.KinveyError = Error.extend('KinveyError');\nvar NetworkConnectionError = exports.NetworkConnectionError = Error.extend('NetworkConnectionError');\nvar NotFoundError = exports.NotFoundError = Error.extend('NotFoundError');\nvar NoResponseError = exports.NoResponseError = Error.extend('NoResponseError');\n\n},{\"lodash/isFunction\":200,\"util\":247}],23:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Kinvey = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _aggregation = require('./aggregation');\n\nvar _client = require('./client');\n\nvar _command = require('./command');\n\nvar _log = require('./log');\n\nvar _metadata = require('./metadata');\n\nvar _query = require('./query');\n\nvar _datastore = require('./stores/datastore');\n\nvar _sync = require('./sync');\n\nvar _user = require('./user');\n\nvar _enums = require('./enums');\n\nvar _network = require('./requests/network');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\n\nvar Kinvey = function () {\n  function Kinvey() {\n    _classCallCheck(this, Kinvey);\n  }\n\n  _createClass(Kinvey, null, [{\n    key: 'init',\n\n    /**\n     * Initializes the library with your app's information.\n     *\n     * @param   {Object}        options                         Options\n     * @param   {string}        options.appKey                  My app key\n     * @param   {string}        [options.appSecret]             My app secret\n     * @param   {string}        [options.masterSecret]          My app's master secret\n     * @param   {string}        [options.encryptionKey]         My app's encryption key\n     * @param   {string}        [options.protocol]              The protocol of the client.\n     * @param   {string}        [options.host]                  The host of the client.\n     * @return  {Client}                                        An instance of Client.\n     *\n     * @throws  {KinveyError}  If an `options.appKey` is not provided.\n     * @throws  {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n     *\n     * @example\n     * var client = Kinvey.init({\n     *   appKey: 'appKey',\n     *   appSecret: 'appSecret'\n     * });\n     */\n    value: function init(options) {\n      var client = _client.Client.init(options);\n      return client;\n    }\n\n    /**\n     * Pings the Kinvey service.\n     *\n     * @returns {Promise} The response.\n     */\n\n  }, {\n    key: 'ping',\n    value: function ping() {\n      var client = arguments.length <= 0 || arguments[0] === undefined ? _client.Client.sharedInstance() : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.All,\n        url: _url2.default.format({\n          protocol: client.protocol,\n          host: client.host,\n          pathname: appdataNamespace + '/' + client.appKey\n        })\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }]);\n\n  return Kinvey;\n}();\n\nKinvey.Aggregation = _aggregation.Aggregation;\nKinvey.AuthorizationGrant = _enums.AuthorizationGrant;\nKinvey.Command = _command.Command;\nKinvey.DataStore = _datastore.DataStore;\nKinvey.DataStoreType = _enums.DataStoreType;\nKinvey.Log = _log.Log;\nKinvey.Metadata = _metadata.Metadata;\nKinvey.Promise = _babybird2.default;\nKinvey.Query = _query.Query;\nKinvey.SocialIdentity = _enums.SocialIdentity;\nKinvey.Sync = _sync.Sync;\nKinvey.User = _user.User;\nexports.Kinvey = Kinvey;\n\n}).call(this,require('_process'))\n\n},{\"./aggregation\":18,\"./client\":19,\"./command\":20,\"./enums\":21,\"./log\":24,\"./metadata\":25,\"./query\":27,\"./requests/network\":41,\"./stores/datastore\":46,\"./sync\":51,\"./user\":52,\"_process\":229,\"babybird\":4,\"url\":244}],24:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Log = undefined;\n\nvar _loglevel = require('loglevel');\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar originalFactory = _loglevel2.default.methodFactory;\n\n_loglevel2.default.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  var rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod('Kinvey: ' + message);\n  };\n};\n\n_loglevel2.default.setLevel(_loglevel2.default.levels.ERROR);\nexports.Log = _loglevel2.default;\n\n},{\"loglevel\":227}],25:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Metadata = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * Wrapper for accessing the `_kmd` properties of an entity.\n */\n\nvar Metadata = exports.Metadata = function () {\n  function Metadata() {\n    var entity = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Metadata);\n\n    if (!(0, _isPlainObject2.default)(entity)) {\n      throw new _errors.KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.kmd = entity[kmdAttribute] || {};\n\n    /**\n     * The entity.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.entity = entity;\n  }\n\n  _createClass(Metadata, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.kmd;\n    }\n  }, {\n    key: 'createdAt',\n    get: function get() {\n      if (this.kmd.ect) {\n        return Date.parse(this.kmd.ect);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'emailVerification',\n    get: function get() {\n      return this.kmd.emailVerification.status;\n    }\n  }, {\n    key: 'lastModified',\n    get: function get() {\n      if (this.kmd.lmt) {\n        return Date.parse(this.kmd.lmt);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'lmt',\n    get: function get() {\n      return this.lastModified;\n    }\n  }, {\n    key: 'authtoken',\n    get: function get() {\n      return this.kmd.authtoken;\n    },\n    set: function set(authtoken) {\n      this.kmd.authtoken = authtoken;\n    }\n  }]);\n\n  return Metadata;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./errors\":22,\"_process\":229,\"lodash/isPlainObject\":206}],26:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MobileIdentityConnect = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _enums = require('./enums');\n\nvar _errors = require('./errors');\n\nvar _network = require('./requests/network');\n\nvar _client = require('./client');\n\nvar _popup = require('./utils/popup');\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar authPathname = process.env.KINVEY_MIC_AUTH_PATHNAME || '/oauth/auth';\nvar tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\n\n/**\n * @private\n */\n\nvar MobileIdentityConnect = exports.MobileIdentityConnect = function () {\n  function MobileIdentityConnect() {\n    var client = arguments.length <= 0 || arguments[0] === undefined ? _client.Client.sharedInstance() : arguments[0];\n\n    _classCallCheck(this, MobileIdentityConnect);\n\n    this.client = new _client.Client({\n      protocol: process.env.KINVEY_MIC_PROTOCOL || 'https:',\n      host: process.env.KINVEY_MIC_HOST || 'auth.kinvey.com',\n      appKey: client.appKey,\n      appSecret: client.appSecret,\n      masterSecret: client.masterSecret,\n      encryptionKey: client.encryptionKey\n    });\n  }\n\n  _createClass(MobileIdentityConnect, [{\n    key: 'login',\n    value: function login(redirectUri) {\n      var _this = this;\n\n      var authorizationGrant = arguments.length <= 1 || arguments[1] === undefined ? _enums.AuthorizationGrant.AuthorizationCodeLoginPage : arguments[1];\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var clientId = this.client.appKey;\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (authorizationGrant === _enums.AuthorizationGrant.AuthorizationCodeLoginPage) {\n          // Step 1: Request a code\n          return _this.requestCodeWithPopup(clientId, redirectUri, options);\n        } else if (authorizationGrant === _enums.AuthorizationGrant.AuthorizationCodeAPI) {\n          // Step 1a: Request a temp login url\n          return _this.requestTempLoginUrl(clientId, redirectUri, options).then(function (url) {\n            // Step 1b: Request a code\n            return _this.requestCodeWithUrl(url, clientId, redirectUri, options);\n          });\n        }\n\n        throw new _errors.KinveyError('The authorization grant ' + authorizationGrant + ' is unsupported. ' + 'Please use a supported authorization grant.');\n      }).then(function (code) {\n        // Step 3: Request a token\n        return _this.requestToken(code, clientId, redirectUri, options);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'requestTempLoginUrl',\n    value: function requestTempLoginUrl(clientId, redirectUri) {\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var pathname = '/';\n\n      if (options.version) {\n        var version = options.version;\n\n        if (!(0, _isString2.default)(version)) {\n          version = String(version);\n        }\n\n        pathname = _path2.default.join(pathname, version.indexOf('v') === 0 ? version : 'v' + version);\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: _path2.default.join(pathname, authPathname)\n        }),\n        properties: options.properties,\n        data: {\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          response_type: 'code'\n        }\n      });\n      return request.execute().then(function (response) {\n        return response.data.temp_login_uri;\n      });\n    }\n  }, {\n    key: 'requestCodeWithPopup',\n    value: function requestCodeWithPopup(clientId, redirectUri) {\n      var _this2 = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var pathname = '/';\n\n        if (options.version) {\n          var version = options.version;\n\n          if (!(0, _isString2.default)(version)) {\n            version = String(version);\n          }\n\n          pathname = _path2.default.join(pathname, version.indexOf('v') === 0 ? version : 'v' + version);\n        }\n\n        var popup = new _popup.Popup(_url2.default.format({\n          protocol: _this2.client.protocol,\n          host: _this2.client.host,\n          pathname: _path2.default.join(pathname, authPathname),\n          query: {\n            client_id: clientId,\n            redirect_uri: redirectUri,\n            response_type: 'code'\n          }\n        }));\n        return popup.open();\n      }).then(function (popup) {\n        return new _babybird2.default(function (resolve, reject) {\n          var redirected = false;\n\n          function loadHandler(loadedUrl) {\n            if (loadedUrl.indexOf(redirectUri) === 0) {\n              redirected = true;\n              popup.removeAllListeners();\n              popup.close();\n              resolve(_url2.default.parse(loadedUrl, true).query.code);\n            }\n          }\n\n          function closeHandler() {\n            popup.removeAllListeners();\n\n            if (!redirected) {\n              reject(new Error('Login has been cancelled.'));\n            }\n          }\n\n          popup.on('loaded', loadHandler);\n          popup.on('closed', closeHandler);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'requestCodeWithUrl',\n    value: function requestCodeWithUrl(loginUrl, clientId, redirectUri) {\n      var options = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.POST,\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          url: loginUrl,\n          properties: options.properties,\n          data: {\n            client_id: clientId,\n            redirect_uri: redirectUri,\n            response_type: 'code',\n            username: options.username,\n            password: options.password\n          },\n          followRedirect: false\n        });\n        return request.execute();\n      }).then(function (response) {\n        var location = response.getHeader('location');\n\n        if (location) {\n          return _url2.default.parse(location, true).query.code;\n        }\n\n        throw new _errors.KinveyError('Unable to authorize user with username ' + options.username + '.');\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'requestToken',\n    value: function requestToken(code, clientId, redirectUri) {\n      var options = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: tokenPathname\n        }),\n        properties: options.properties,\n        data: {\n          grant_type: 'authorization_code',\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          code: code\n        }\n      });\n      request.automaticallyRefreshAuthToken = false;\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n      return promise;\n    }\n\n    // refresh(token, options) {\n    //   const clientId = this.client.appKey;\n    //   return this.refreshToken(clientId, token, options);\n    // }\n\n    // refreshToken(clientId, token, options = {}) {\n    //   const request = new NetworkRequest({\n    //     method: HttpMethod.POST,\n    //     headers: {\n    //       'Content-Type': 'application/x-www-form-urlencoded'\n    //     },\n    //     authType: AuthType.App,\n    //     url: url.format({\n    //       protocol: this.client.protocol,\n    //       host: this.client.host,\n    //       pathname: tokenPathname\n    //     }),\n    //     properties: options.properties,\n    //     data: {\n    //       grant_type: 'refresh_token',\n    //       client_id: clientId,\n    //       redirect_uri: token.redirect_uri,\n    //       refresh_token: token.refresh_token\n    //     }\n    //   });\n    //   request.automaticallyRefreshAuthToken = false;\n\n    //   const promise = request.execute().then(response => {\n    //     return response.data;\n    //   });\n\n    //   return promise;\n    // }\n\n  }], [{\n    key: 'identity',\n    get: function get() {\n      return process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\n    }\n  }]);\n\n  return MobileIdentityConnect;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./client\":19,\"./enums\":21,\"./errors\":22,\"./requests/network\":41,\"./utils/popup\":55,\"_process\":229,\"babybird\":4,\"lodash/isString\":208,\"path\":228,\"url\":244}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Query = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _object = require('./utils/object');\n\nvar _sift = require('sift');\n\nvar _sift2 = _interopRequireDefault(_sift);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _isRegExp = require('lodash/isRegExp');\n\nvar _isRegExp2 = _interopRequireDefault(_isRegExp);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Query = function () {\n  function Query(options) {\n    _classCallCheck(this, Query);\n\n    options = (0, _assign2.default)({\n      fields: [],\n      filter: {},\n      sort: {},\n      limit: null,\n      skip: 0\n    }, options);\n\n    /**\n     * Fields to select.\n     *\n     * @type {Array}\n     */\n    this._fields = options.fields;\n\n    /**\n     * The MongoDB query.\n     *\n     * @type {Object}\n     */\n    this._filter = options.filter;\n\n    /**\n     * The sorting order.\n     *\n     * @type {Object}\n     */\n    this._sort = options.sort;\n\n    /**\n     * Number of documents to select.\n     *\n     * @type {?Number}\n     */\n    this._limit = options.limit;\n\n    /**\n     * Number of documents to skip from the start.\n     *\n     * @type {Number}\n     */\n    this._skip = options.skip;\n\n    /**\n     * Maintain reference to the parent query in case the query is part of a\n     * join.\n     *\n     * @type {?PrivateQuery}\n     */\n    this.parent = null;\n  }\n\n  /**\n   * Adds an equal to filter to the query. Requires `field` to equal `value`.\n   * Any existing filters on `field` will be discarded.\n   * http://docs.mongodb.org/manual/reference/operators/#comparison\n   *\n   * @param   {String}        field     Field.\n   * @param   {*}             value     Value.\n   * @returns {Query}                   The query.\n   */\n\n\n  _createClass(Query, [{\n    key: 'equalTo',\n    value: function equalTo(field, value) {\n      this._filter[field] = value;\n      return this;\n    }\n\n    /**\n     * Adds a contains filter to the query. Requires `field` to contain at least\n     * one of the members of `list`.\n     * http://docs.mongodb.org/manual/reference/operator/in/\n     *\n     * @param   {String}        field     Field.\n     * @param   {Array}         values    List of values.\n     * @throws  {Error}                   `values` must be of type: `Array`.\n     * @returns {Query}                   The query.\n     */\n\n  }, {\n    key: 'contains',\n    value: function contains(field, values) {\n      if (!(0, _isArray2.default)(values)) {\n        values = [values];\n      }\n\n      return this.addFilter(field, '$in', values);\n    }\n\n    /**\n     * Adds a contains all filter to the query. Requires `field` to contain all\n     * members of `list`.\n     * http://docs.mongodb.org/manual/reference/operator/all/\n     *\n     * @param   {String}  field     Field.\n     * @param   {Array}   values    List of values.\n     * @throws  {Error}             `values` must be of type: `Array`.\n     * @returns {Query}             The query.\n     */\n\n  }, {\n    key: 'containsAll',\n    value: function containsAll(field, values) {\n      if (!(0, _isArray2.default)(values)) {\n        values = [values];\n      }\n\n      return this.addFilter(field, '$all', values);\n    }\n\n    /**\n     * Adds a greater than filter to the query. Requires `field` to be greater\n     * than `value`.\n     * http://docs.mongodb.org/manual/reference/operator/gt/\n     *\n     * @param   {String}          field     Field.\n     * @param   {Number|String}   value     Value.\n     * @throws  {Error}                     `value` must be of type: `number` or `string`.\n     * @returns {Query}                     The query.\n     */\n\n  }, {\n    key: 'greaterThan',\n    value: function greaterThan(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$gt', value);\n    }\n  }, {\n    key: 'greaterThanOrEqualTo',\n    value: function greaterThanOrEqualTo(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$gte', value);\n    }\n  }, {\n    key: 'lessThan',\n    value: function lessThan(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$lt', value);\n    }\n  }, {\n    key: 'lessThanOrEqualTo',\n    value: function lessThanOrEqualTo(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$lte', value);\n    }\n  }, {\n    key: 'notEqualTo',\n    value: function notEqualTo(field, value) {\n      return this.addFilter(field, '$ne', value);\n    }\n  }, {\n    key: 'notContainedIn',\n    value: function notContainedIn(field, values) {\n      if (!(0, _isArray2.default)(values)) {\n        values = [values];\n      }\n\n      return this.addFilter(field, '$nin', values);\n    }\n  }, {\n    key: 'and',\n    value: function and() {\n      return this.join('$and', Array.prototype.slice.call(arguments));\n    }\n  }, {\n    key: 'nor',\n    value: function nor() {\n      if (this.parent && this.parent.filter.$and) {\n        return this.parent.nor.apply(this.parent, arguments);\n      }\n\n      return this.join('$nor', Array.prototype.slice.call(arguments));\n    }\n  }, {\n    key: 'or',\n    value: function or() {\n      if (this.parent) {\n        return this.parent.or.apply(this.parent, arguments);\n      }\n\n      return this.join('$or', Array.prototype.slice.call(arguments));\n    }\n  }, {\n    key: 'exists',\n    value: function exists(field, flag) {\n      flag = typeof flag === 'undefined' ? true : flag || false;\n      return this.addFilter(field, '$exists', flag);\n    }\n  }, {\n    key: 'mod',\n    value: function mod(field, divisor, remainder) {\n      remainder = remainder || 0;\n\n      if ((0, _isString2.default)(divisor)) {\n        divisor = parseFloat(divisor);\n      }\n\n      if ((0, _isString2.default)(remainder)) {\n        remainder = parseFloat(remainder);\n      }\n\n      if (!(0, _isNumber2.default)(divisor)) {\n        throw new Error('Divisor must be a number.');\n      }\n\n      if (!(0, _isNumber2.default)(remainder)) {\n        throw new Error('Remainder must be a number.');\n      }\n\n      return this.addFilter(field, '$mod', [divisor, remainder]);\n    }\n  }, {\n    key: 'matches',\n    value: function matches(field, regExp, options) {\n      options = options || {};\n\n      if (!(0, _isRegExp2.default)(regExp)) {\n        regExp = new RegExp(regExp);\n      }\n\n      if ((regExp.ignoreCase || options.ignoreCase) && options.ignoreCase !== false) {\n        throw new Error('ignoreCase glag is not supported.');\n      }\n\n      if (regExp.source.indexOf('^') !== 0) {\n        throw new Error('regExp must have `^` at the beginning of the expression ' + 'to make it an anchored expression.');\n      }\n\n      var flags = [];\n\n      if ((regExp.multiline || options.multiline) && options.multiline !== false) {\n        flags.push('m');\n      }\n\n      if (options.extended) {\n        flags.push('x');\n      }\n\n      if (options.dotMatchesAll) {\n        flags.push('s');\n      }\n\n      var result = this.addFilter(field, '$regex', regExp.source);\n\n      if (flags.length) {\n        this.addFilter(field, '$options', flags.join(''));\n      }\n\n      return result;\n    }\n  }, {\n    key: 'near',\n    value: function near(field, coord, maxDistance) {\n      if (!(0, _isArray2.default)(coord) || !coord[0] || !coord[1]) {\n        throw new Error('coord argument must be of type: [number, number]');\n      }\n\n      coord[0] = parseFloat(coord[0]);\n      coord[1] = parseFloat(coord[1]);\n\n      var result = this.addFilter(field, '$nearSphere', [coord[0], coord[1]]);\n\n      if (maxDistance) {\n        this.addFilter(field, '$maxDistance', maxDistance);\n      }\n\n      return result;\n    }\n  }, {\n    key: 'withinBox',\n    value: function withinBox(field, bottomLeftCoord, upperRightCoord) {\n      if (!(0, _isArray2.default)(bottomLeftCoord) || !bottomLeftCoord[0] || !bottomLeftCoord[1]) {\n        throw new Error('bottomLeftCoord argument must be of type: [number, number]');\n      }\n\n      if (!(0, _isArray2.default)(upperRightCoord) || !upperRightCoord[0] || !upperRightCoord[1]) {\n        throw new Error('upperRightCoord argument must be of type: [number, number]');\n      }\n\n      bottomLeftCoord[0] = parseFloat(bottomLeftCoord[0]);\n      bottomLeftCoord[1] = parseFloat(bottomLeftCoord[1]);\n      upperRightCoord[0] = parseFloat(upperRightCoord[0]);\n      upperRightCoord[1] = parseFloat(upperRightCoord[1]);\n\n      var coords = [[bottomLeftCoord[0], bottomLeftCoord[1]], [upperRightCoord[0], upperRightCoord[1]]];\n      return this.addFilter(field, '$within', { $box: coords });\n    }\n  }, {\n    key: 'withinPolygon',\n    value: function withinPolygon(field, coords) {\n      if (!(0, _isArray2.default)(coords) || coords.length > 3) {\n        throw new Error('coords argument must be of type: [[number, number]]');\n      }\n\n      coords = coords.map(function (coord) {\n        if (!coord[0] || !coord[1]) {\n          throw new Error('coords argument must be of type: [number, number]');\n        }\n\n        return [parseFloat(coord[0]), parseFloat(coord[1])];\n      });\n\n      return this.addFilter(field, '$within', { $polygon: coords });\n    }\n  }, {\n    key: 'size',\n    value: function size(field, _size) {\n      if ((0, _isString2.default)(_size)) {\n        _size = parseFloat(_size);\n      }\n\n      if (!(0, _isNumber2.default)(_size)) {\n        throw new Error('size argument must be a number');\n      }\n\n      return this.addFilter(field, '$size', _size);\n    }\n  }, {\n    key: 'fields',\n    value: function fields(_fields) {\n      _fields = _fields || [];\n\n      if (!(0, _isArray2.default)(_fields)) {\n        throw new Error('fields argument must an Array.');\n      }\n\n      if (this.parent) {\n        this.parent.fields(_fields);\n      } else {\n        this._fields = _fields;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'limit',\n    value: function limit(_limit) {\n      if ((0, _isString2.default)(_limit)) {\n        _limit = parseFloat(_limit);\n      }\n\n      if (_limit && !(0, _isNumber2.default)(_limit)) {\n        throw new Error('limit argument must be of type: number.');\n      }\n\n      if (this._parent) {\n        this.parent.limit(_limit);\n      } else {\n        this._limit = _limit;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'skip',\n    value: function skip(_skip) {\n      if ((0, _isString2.default)(_skip)) {\n        _skip = parseFloat(_skip);\n      }\n\n      if (!(0, _isNumber2.default)(_skip)) {\n        throw new Error('skip argument must be of type: number.');\n      }\n\n      if (this.parent) {\n        this.parent.skip(_skip);\n      } else {\n        this._skip = _skip;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'ascending',\n    value: function ascending(field) {\n      if (this.parent) {\n        this.parent.ascending(field);\n      } else {\n        this._sort[field] = 1;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'descending',\n    value: function descending(field) {\n      if (this.parent) {\n        this.parent.descending(field);\n      } else {\n        this._sort[field] = -1;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'sort',\n    value: function sort(_sort) {\n      if (_sort && !(0, _isObject2.default)(_sort)) {\n        throw new Error('sort argument must be of type: Object.');\n      }\n\n      if (this.parent) {\n        this.parent.sort(_sort);\n      } else {\n        this._sort = _sort || {};\n      }\n\n      return this;\n    }\n\n    /**\n     * Adds a filter to the query.\n     *\n     * @param   {String}          field       Field.\n     * @param   {String}          condition   Condition.\n     * @param   {*}               value       Value.\n     * @returns {PrivateQuery}                The query.\n     */\n\n  }, {\n    key: 'addFilter',\n    value: function addFilter(field, condition, values) {\n      if (!(0, _isObject2.default)(this._filter[field])) {\n        this._filter[field] = {};\n      }\n\n      this._filter[field][condition] = values;\n      return this;\n    }\n\n    /**\n     * Joins the current query with another query using an operator.\n     *\n     * @param   {String}                    operator    Operator.\n     * @param   {PrivateQuery[]|Object[]}   queries     Queries.\n     * @throws  {Error}                                `query` must be of type: `Kinvey.Query[]` or `Object[]`.\n     * @returns {PrivateQuery}                          The query.\n     */\n\n  }, {\n    key: 'join',\n    value: function join(operator, queries) {\n      var _this2 = this;\n\n      var _this = this;\n      var currentQuery = {};\n\n      // Cast, validate, and parse arguments. If `queries` are supplied, obtain\n      // the `filter` for joining. The eventual return function will be the\n      // current query.\n      queries = queries.map(function (query) {\n        if (!(query instanceof Query)) {\n          if ((0, _isObject2.default)(query)) {\n            query = new Query(query);\n          } else {\n            throw new Error('query argument must be of type: Kinvey.Query[] or Object[].');\n          }\n        }\n\n        return query.toJSON().filter;\n      });\n\n      // If there are no `queries` supplied, create a new (empty) `Query`.\n      // This query is the right-hand side of the join expression, and will be\n      // returned to allow for a fluent interface.\n      if (queries.length === 0) {\n        _this = new Query();\n        queries = [_this.toJSON().filter];\n        _this.parent = this; // Required for operator precedence and `toJSON`.\n      }\n\n      // Join operators operate on the top-level of `filter`. Since the `toJSON`\n      // magic requires `filter` to be passed by reference, we cannot simply re-\n      // assign `filter`. Instead, empty it without losing the reference.\n      var members = Object.keys(this._filter);\n      (0, _forEach2.default)(members, function (member) {\n        currentQuery[member] = _this2._filter[member];\n        delete _this2._filter[member];\n      });\n\n      // `currentQuery` is the left-hand side query. Join with `queries`.\n      this._filter[operator] = [currentQuery].concat(queries);\n\n      // Return the current query if there are `queries`, and the new (empty)\n      // `PrivateQuery` otherwise.\n      return _this;\n    }\n\n    /**\n     * Processes the data by applying fields, sort, limit, and skip.\n     *\n     * @param   {Array}   data    The raw data.\n     * @throws  {Error}               `data` must be of type: `Array`.\n     * @returns {Array}               The processed data.\n     */\n\n  }, {\n    key: '_process',\n    value: function _process(data) {\n      var _this3 = this;\n\n      if (data) {\n        var _ret = function () {\n          // Validate arguments.\n          if (!(0, _isArray2.default)(data)) {\n            throw new Error('data argument must be of type: Array.');\n          }\n\n          // Apply the query\n          var json = _this3.toJSON();\n          data = (0, _sift2.default)(json.filter, data);\n\n          // Remove fields\n          if (json.fields && json.fields.length > 0) {\n            data = data.map(function (item) {\n              var keys = Object.keys(item);\n              (0, _forEach2.default)(keys, function (key) {\n                if (json.fields.indexOf(key) === -1) {\n                  delete item[key];\n                }\n              });\n\n              return item;\n            });\n          }\n\n          // Sorting.\n          data = data.sort(function (a, b) {\n            var fields = Object.keys(json.sort);\n            (0, _forEach2.default)(fields, function (field) {\n              // Find field in objects.\n              var aField = (0, _object.nested)(a, field);\n              var bField = (0, _object.nested)(b, field);\n\n              // Elements which do not contain the field should always be sorted\n              // lower.\n              if (aField && !bField) {\n                return -1;\n              }\n\n              if (bField && !aField) {\n                return 1;\n              }\n\n              // Sort on the current field. The modifier adjusts the sorting order\n              // (ascending (-1), or descending(1)). If the fields are equal,\n              // continue sorting based on the next field (if any).\n              if (aField !== bField) {\n                var modifier = json.sort[field]; // 1 or -1.\n                return (aField < bField ? -1 : 1) * modifier;\n              }\n            });\n\n            return 0;\n          });\n\n          // Limit and skip.\n          if (json.limit) {\n            return {\n              v: data.slice(json.skip, json.skip + json.limit)\n            };\n          }\n\n          return {\n            v: data.slice(json.skip)\n          };\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n\n      return data;\n    }\n\n    /**\n     * Returns JSON representation of the query.\n     *\n     * @returns {Object} JSON object-literal.\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      if (this.parent) {\n        return this.parent.toJSON();\n      }\n\n      // Return set of parameters.\n      var json = {\n        fields: this._fields,\n        filter: this._filter,\n        sort: this._sort,\n        skip: this._skip,\n        limit: this._limit\n      };\n\n      return json;\n    }\n  }]);\n\n  return Query;\n}();\n\nexports.Query = Query;\n\n},{\"./utils/object\":54,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isNumber\":203,\"lodash/isObject\":204,\"lodash/isRegExp\":207,\"lodash/isString\":208,\"sift\":241}],28:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar levels = [];\nvar c0 = String.fromCharCode(9500);\nvar c1 = String.fromCharCode(9472);\nvar c2 = String.fromCharCode(9492);\nvar c3 = String.fromCharCode(9474);\n\nfunction compose(node, end) {\n  if (node.level === 0) {\n    return node.value;\n  }\n\n  var ret = '\\r\\n';\n  var c = end ? c2 : c0;\n\n  for (var i = 1; i < node.level; i++) {\n    ret = '' + ret + (levels[i] ? ' ' : c3);\n    ret = ret + '  ';\n  }\n\n  return '' + ret + c + c1 + ' ' + node.value;\n}\n\n/**\n * @private\n */\nvar AsciiTree = exports.AsciiTree = {\n  generate: function generate() {\n    var _this = this;\n\n    var tree = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var end = arguments[1];\n\n    var result = compose(tree, end);\n\n    if (tree.nodes.length > 0) {\n      (function () {\n        var last = tree.nodes.length - 1;\n        tree.nodes.forEach(function (subTree, index) {\n          levels[subTree.level] = index === last;\n          result = result + _this.generate(subTree, index === last);\n        });\n      })();\n    }\n\n    return result;\n  }\n};\n\n},{}],29:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KinveyMiddleware = exports.Middleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _asciiTree = require('./asciiTree');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @private\n */\n\nvar Middleware = exports.Middleware = function () {\n  function Middleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Middleware' : arguments[0];\n\n    _classCallCheck(this, Middleware);\n\n    this.name = name;\n  }\n\n  _createClass(Middleware, [{\n    key: 'handle',\n    value: function handle() {\n      var request = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return _babybird2.default.resolve(request);\n    }\n  }, {\n    key: 'generateTree',\n    value: function generateTree() {\n      var level = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];\n\n      var root = {\n        value: this.name,\n        level: level,\n        nodes: []\n      };\n      return root;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var root = this.generateTree();\n      return _asciiTree.AsciiTree.generate(root);\n    }\n  }]);\n\n  return Middleware;\n}();\n\n/**\n * @private\n */\n\n\nvar KinveyMiddleware = exports.KinveyMiddleware = function (_Middleware) {\n  _inherits(KinveyMiddleware, _Middleware);\n\n  function KinveyMiddleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Middleware' : arguments[0];\n\n    _classCallCheck(this, KinveyMiddleware);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(KinveyMiddleware).call(this, name));\n  }\n\n  _createClass(KinveyMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      return new _babybird2.default(function (resolve, reject) {\n        if (!request) {\n          return reject(new Error('Request is null. Please provide a valid request.', request));\n        }\n\n        return resolve(request);\n      });\n    }\n  }]);\n\n  return KinveyMiddleware;\n}(Middleware);\n\n},{\"./asciiTree\":28,\"babybird\":4}],30:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CacheMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('../middleware');\n\nvar _db = require('../persistence/db');\n\nvar _enums = require('../../enums');\n\nvar _urlPattern = require('url-pattern');\n\nvar _urlPattern2 = _interopRequireDefault(_urlPattern);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar CacheMiddleware = exports.CacheMiddleware = function (_KinveyMiddleware) {\n  _inherits(CacheMiddleware, _KinveyMiddleware);\n\n  function CacheMiddleware() {\n    var adapters = arguments.length <= 0 || arguments[0] === undefined ? [_db.DBAdapter.IndexedDB, _db.DBAdapter.WebSQL, _db.DBAdapter.LocalStorage, _db.DBAdapter.Memory] : arguments[0];\n\n    _classCallCheck(this, CacheMiddleware);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CacheMiddleware).call(this, 'Kinvey Cache Middleware'));\n\n    _this.adapters = adapters;\n    return _this;\n  }\n\n  _createClass(CacheMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      var _this2 = this;\n\n      return _get(Object.getPrototypeOf(CacheMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        var pathname = _url2.default.parse(request.url).pathname;\n        var pattern = new _urlPattern2.default('(/:namespace)(/)(:appKey)(/)(:collection)(/)(:id)(/)');\n\n        var _ref = pattern.match(pathname) || {};\n\n        var appKey = _ref.appKey;\n        var collection = _ref.collection;\n        var id = _ref.id;\n\n        var method = request.method;\n        var query = request.query;\n        var data = request.data;\n        var db = new _db.DB(appKey, _this2.adapters);\n        var promise = void 0;\n\n        if (method === _enums.HttpMethod.GET) {\n          if (id) {\n            if (id === '_count') {\n              promise = db.count(collection, query);\n            } else if (id === '_group') {\n              promise = db.group(collection, data);\n            } else {\n              promise = db.findById(collection, id);\n            }\n          } else {\n            promise = db.find(collection, query);\n          }\n        } else if (method === _enums.HttpMethod.POST || method === _enums.HttpMethod.PUT) {\n          promise = db.save(collection, data);\n        } else if (method === _enums.HttpMethod.DELETE) {\n          if (id) {\n            promise = db.removeById(collection, id);\n          } else {\n            promise = db.remove(collection, query);\n          }\n        }\n\n        return promise.then(function (result) {\n          var statusCode = _enums.StatusCode.Ok;\n\n          if (method === _enums.HttpMethod.POST) {\n            statusCode = _enums.StatusCode.Created;\n          }\n\n          request.response = {\n            statusCode: statusCode,\n            headers: {},\n            data: result\n          };\n\n          return request;\n        });\n      });\n    }\n  }]);\n\n  return CacheMiddleware;\n}(_middleware.KinveyMiddleware);\n\n},{\"../../enums\":21,\"../middleware\":29,\"../persistence/db\":37,\"url\":244,\"url-pattern\":243}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParseMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('../middleware');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar ParseMiddleware = exports.ParseMiddleware = function (_KinveyMiddleware) {\n  _inherits(ParseMiddleware, _KinveyMiddleware);\n\n  function ParseMiddleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Parse Middleware' : arguments[0];\n\n    _classCallCheck(this, ParseMiddleware);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(ParseMiddleware).call(this, name));\n  }\n\n  _createClass(ParseMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      return _get(Object.getPrototypeOf(ParseMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        var response = request.response;\n\n        if (response && response.data) {\n          var contentType = response.headers['content-type'] || response.headers['Content-Type'];\n\n          if (contentType.indexOf('application/json') === 0) {\n            try {\n              response.data = JSON.parse(response.data);\n            } catch (err) {\n              response.data = response.data;\n            }\n\n            request.response = response;\n          }\n        }\n\n        return request;\n      });\n    }\n  }]);\n\n  return ParseMiddleware;\n}(_middleware.KinveyMiddleware);\n\n},{\"../middleware\":29}],32:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SerializeMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('../middleware');\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar SerializeMiddleware = exports.SerializeMiddleware = function (_KinveyMiddleware) {\n  _inherits(SerializeMiddleware, _KinveyMiddleware);\n\n  function SerializeMiddleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Serialize Middleware' : arguments[0];\n\n    _classCallCheck(this, SerializeMiddleware);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(SerializeMiddleware).call(this, name));\n  }\n\n  _createClass(SerializeMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      return _get(Object.getPrototypeOf(SerializeMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        if (request && request.data) {\n          var contentType = request.headers['content-type'] || request.headers['Content-Type'];\n\n          if (contentType.indexOf('application/json') === 0) {\n            request.data = JSON.stringify(request.data);\n          } else if (contentType.indexOf('application/x-www-form-urlencoded') === 0) {\n            (function () {\n              var data = request.data;\n              var str = [];\n              var keys = Object.keys(data);\n\n              (0, _forEach2.default)(keys, function (key) {\n                str.push(global.encodeURIComponent(key) + '=' + global.encodeURIComponent(data[key]));\n              });\n\n              request.data = str.join('&');\n            })();\n          }\n        }\n\n        return request;\n      });\n    }\n  }]);\n\n  return SerializeMiddleware;\n}(_middleware.KinveyMiddleware);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../middleware\":29,\"lodash/forEach\":190}],33:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IndexedDB = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../../../errors');\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar dbCache = {};\n\nvar TransactionMode = {\n  ReadWrite: 'readwrite',\n  ReadOnly: 'readonly'\n};\nObject.freeze(TransactionMode);\n\nif (typeof window !== 'undefined') {\n  require('indexeddbshim');\n  global.shimIndexedDB.__useShim();\n}\n\nvar indexedDB = global.shimIndexedDB || global.indexedDB || global.mozIndexedDB || global.webkitIndexedDB || global.msIndexedDB;\n\n/**\n * @private\n */\n\nvar IndexedDB = exports.IndexedDB = function () {\n  function IndexedDB(name) {\n    _classCallCheck(this, IndexedDB);\n\n    if (!name) {\n      throw new _errors.KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!(0, _isString2.default)(name)) {\n      throw new _errors.KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.inTransaction = false;\n    this.queue = [];\n  }\n\n  _createClass(IndexedDB, [{\n    key: 'openTransaction',\n    value: function openTransaction(collection) {\n      var write = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n      var success = arguments[2];\n\n      var _this = this;\n\n      var error = arguments[3];\n      var force = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\n      var db = dbCache[this.name];\n\n      if (db) {\n        var containsCollection = (0, _isFunction2.default)(db.objectStoreNames.contains) ? db.objectStoreNames.contains(collection) : db.objectStoreNames.indexOf(collection) !== -1;\n\n        if (containsCollection) {\n          try {\n            var mode = write ? TransactionMode.ReadWrite : TransactionMode.ReadOnly;\n            var txn = db.transaction([collection], mode);\n\n            if (txn) {\n              var store = txn.objectStore(collection);\n              return success(store);\n            }\n\n            throw new _errors.KinveyError('Unable to open a transaction for the ' + collection + ' ' + ('collection on the ' + this.name + ' indexedDB database.'));\n          } catch (err) {\n            return error(err);\n          }\n        } else if (!write) {\n          return error(new _errors.NotFoundError('The ' + collection + ' collection was not found on ' + ('the ' + this.name + ' indexedDB database.')));\n        }\n      }\n\n      if (!force && this.inTransaction) {\n        return this.queue.push(function () {\n          _this.openTransaction(collection, write, success, error);\n        });\n      }\n\n      // Switch flag\n      this.inTransaction = true;\n      var request = void 0;\n\n      if (db) {\n        var version = db.version + 1;\n        request = indexedDB.open(this.name, version);\n      } else {\n        request = indexedDB.open(this.name);\n      }\n\n      // If the database is opened with an higher version than its current, the\n      // `upgradeneeded` event is fired. Save the handle to the database, and\n      // create the collection.\n      request.onupgradeneeded = function (e) {\n        db = e.target.result;\n\n        if (write) {\n          db.createObjectStore(collection, { keyPath: '_id' });\n        }\n      };\n\n      // The `success` event is fired after `upgradeneeded` terminates.\n      // Save the handle to the database.\n      request.onsuccess = function (e) {\n        db = e.target.result;\n        dbCache[_this.name] = db;\n\n        // If a second instance of the same IndexedDB database performs an\n        // upgrade operation, the `versionchange` event is fired. Then, close the\n        // database to allow the external upgrade to proceed.\n        db.onversionchange = function () {\n          if (db) {\n            db.close();\n            db = null;\n            dbCache[_this.name] = null;\n          }\n        };\n\n        // Try to obtain the collection handle by recursing. Append the handlers\n        // to empty the queue upon success and failure. Set the `force` flag so\n        // all but the current transaction remain queued.\n        var wrap = function wrap(done) {\n          return function (arg) {\n            done(arg);\n\n            // Switch flag\n            _this.inTransaction = false;\n\n            // The database handle has been established, we can now safely empty\n            // the queue. The queue must be emptied before invoking the concurrent\n            // operations to avoid infinite recursion.\n            if (_this.queue.length > 0) {\n              var pending = _this.queue;\n              _this.queue = [];\n              (0, _forEach2.default)(pending, function (fn) {\n                fn.call(_this);\n              });\n            }\n          };\n        };\n\n        _this.openTransaction(collection, write, wrap(success), wrap(error), true);\n      };\n\n      request.onblocked = function () {\n        error(new _errors.KinveyError('The ' + _this.name + ' indexedDB database version can\\'t be upgraded ' + 'because the database is already open.'));\n      };\n\n      request.onerror = function (e) {\n        error(new _errors.KinveyError('Unable to open the ' + _this.name + ' indexedDB database. ' + ('Received the error code ' + e.target.errorCode + '.')));\n      };\n    }\n  }, {\n    key: 'find',\n    value: function find(collection) {\n      var _this2 = this;\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        if (!collection) {\n          return reject(new _errors.KinveyError('A collection was not provided.'));\n        }\n\n        _this2.openTransaction(collection, false, function (store) {\n          var request = store.openCursor();\n          var response = [];\n\n          request.onsuccess = function onSuccess(e) {\n            var cursor = e.target.result;\n\n            if (cursor) {\n              response.push(cursor.value);\n              return cursor.continue();\n            }\n\n            resolve(response);\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while fetching data from the ' + collection + ' ' + ('collection on the ' + _this2.name + ' indexedDB database. Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, function (error) {\n          if (error instanceof _errors.NotFoundError) {\n            return resolve([]);\n          }\n\n          reject(error);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this3 = this;\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        _this3.openTransaction(collection, false, function (store) {\n          var request = store.get(id);\n\n          request.onsuccess = function (e) {\n            var entity = e.target.result;\n\n            if (entity) {\n              return resolve(entity);\n            }\n\n            reject(new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this3.name + ' indexedDB database.')));\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while retrieving an entity with _id = ' + id + ' ' + ('from the ' + collection + ' collection on the ' + _this3.name + ' indexedDB database. ') + ('Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, function (error) {\n          if (error instanceof _errors.NotFoundError) {\n            return reject(new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this3.name + ' indexedDB database.')));\n          }\n\n          reject(error);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var _this4 = this;\n\n      var singular = false;\n\n      if (!(0, _isArray2.default)(entities)) {\n        entities = [entities];\n        singular = true;\n      }\n\n      if (entities.length === 0) {\n        return _babybird2.default.resolve(entities);\n      }\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        _this4.openTransaction(collection, true, function (store) {\n          var request = store.transaction;\n\n          (0, _forEach2.default)(entities, function (entity) {\n            store.put(entity);\n          });\n\n          request.oncomplete = function onComplete() {\n            resolve(singular ? entities[0] : entities);\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while saving the entities to the ' + collection + ' ' + ('collection on the ' + _this4.name + ' indexedDB database. Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, reject);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this5 = this;\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        _this5.openTransaction(collection, true, function (store) {\n          var request = store.transaction;\n          var doc = store.get(id);\n          store.delete(id);\n\n          request.oncomplete = function () {\n            if (!doc.result) {\n              return reject(new _errors.NotFoundError('An entity with id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this5.name + ' indexedDB database.')));\n            }\n\n            resolve({\n              count: 1,\n              entities: [doc.result]\n            });\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while deleting an entity with id = ' + id + ' ' + ('in the ' + collection + ' collection on the ' + _this5.name + ' indexedDB database. ') + ('Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, reject);\n      });\n\n      return promise;\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      return indexedDB ? true : false;\n    }\n  }]);\n\n  return IndexedDB;\n}();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../../errors\":22,\"babybird\":4,\"indexeddbshim\":13,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isFunction\":200,\"lodash/isString\":208}],34:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocalStorage = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../../../errors');\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _merge = require('lodash/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _values = require('lodash/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar localStorage = global.localStorage;\n\n/**\n * @private\n */\n\nvar LocalStorage = exports.LocalStorage = function () {\n  function LocalStorage() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'kinvey' : arguments[0];\n\n    _classCallCheck(this, LocalStorage);\n\n    this.name = name;\n  }\n\n  _createClass(LocalStorage, [{\n    key: 'find',\n    value: function find(collection) {\n      var _this = this;\n\n      return _babybird2.default.resolve().then(function () {\n        var data = localStorage.getItem('' + _this.name + collection);\n\n        try {\n          return JSON.parse(data);\n        } catch (err) {\n          return data;\n        }\n      }).then(function (entities) {\n        if (!entities) {\n          return [];\n        }\n\n        return entities;\n      });\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this2 = this;\n\n      return this.find(collection).then(function (entities) {\n        var entity = find(entities, function (entity) {\n          return entity[idAttribute] === id;\n        });\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this2.name + ' memory database.'));\n        }\n\n        return entity;\n      });\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var _this3 = this;\n\n      return this.find(collection).then(function (existingEntities) {\n        var existingEntitiesById = (0, _keyBy2.default)(existingEntities, idAttribute);\n        var entitiesById = (0, _keyBy2.default)(entities, idAttribute);\n        var existingEntityIds = Object.keys(existingEntitiesById);\n\n        (0, _forEach2.default)(existingEntityIds, function (id) {\n          var existingEntity = existingEntitiesById[id];\n          var entity = entitiesById[id];\n\n          if (entity) {\n            entitiesById[id] = (0, _merge2.default)(existingEntity, entity);\n          }\n        });\n\n        localStorage.setItem('' + _this3.name + collection, JSON.stringify((0, _values2.default)(entitiesById)));\n        return entities;\n      });\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this4 = this;\n\n      return this.find(collection).then(function (entities) {\n        var entitiesById = (0, _keyBy2.default)(entities, idAttribute);\n        var entity = entitiesById[id];\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this4.name + ' memory database.'));\n        }\n\n        delete entitiesById[id];\n        localStorage.setItem('' + _this4.name + collection, JSON.stringify((0, _values2.default)(entitiesById)));\n\n        return {\n          count: 1,\n          entities: [entity]\n        };\n      });\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      if (localStorage) {\n        var item = 'testLocalStorageSupport';\n        try {\n          localStorage.setItem(item, item);\n          localStorage.removeItem(item);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return LocalStorage;\n}();\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../../errors\":22,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/keyBy\":211,\"lodash/merge\":216,\"lodash/values\":226}],35:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Memory = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _promiseQueue = require('promise-queue');\n\nvar _promiseQueue2 = _interopRequireDefault(_promiseQueue);\n\nvar _errors = require('../../../errors');\n\nvar _fastMemoryCache = require('fast-memory-cache');\n\nvar _fastMemoryCache2 = _interopRequireDefault(_fastMemoryCache);\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _values = require('lodash/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _find = require('lodash/find');\n\nvar _find2 = _interopRequireDefault(_find);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar caches = [];\n\n_promiseQueue2.default.configure(_babybird2.default);\nvar queue = new _promiseQueue2.default(1, Infinity);\n\n/**\n * @private\n */\n\nvar Memory = exports.Memory = function () {\n  function Memory(name) {\n    _classCallCheck(this, Memory);\n\n    if (!name) {\n      throw new _errors.KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!(0, _isString2.default)(name)) {\n      throw new _errors.KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.cache = caches[name];\n\n    if (!this.cache) {\n      this.cache = new _fastMemoryCache2.default();\n      caches[name] = this.cache;\n    }\n  }\n\n  _createClass(Memory, [{\n    key: 'find',\n    value: function find(collection) {\n      var _this = this;\n\n      return queue.add(function () {\n        return _babybird2.default.resolve().then(function () {\n          var entities = _this.cache.get('' + _this.name + collection);\n\n          if (entities) {\n            try {\n              return JSON.parse(entities);\n            } catch (err) {\n              return entities;\n            }\n          }\n\n          return entities;\n        }).then(function (entities) {\n          if (!entities) {\n            return [];\n          }\n\n          return entities;\n        });\n      });\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this2 = this;\n\n      return this.find(collection).then(function (entities) {\n        var entity = (0, _find2.default)(entities, function (entity) {\n          return entity[idAttribute] === id;\n        });\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this2.name + ' memory database.'));\n        }\n\n        return entity;\n      });\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var _this3 = this;\n\n      var singular = false;\n\n      if (!(0, _isArray2.default)(entities)) {\n        entities = [entities];\n        singular = true;\n      }\n\n      if (entities.length === 0) {\n        return _babybird2.default.resolve(entities);\n      }\n\n      return this.find(collection).then(function (existingEntities) {\n        existingEntities = (0, _keyBy2.default)(existingEntities, idAttribute);\n        entities = (0, _keyBy2.default)(entities, idAttribute);\n        var entityIds = Object.keys(entities);\n\n        (0, _forEach2.default)(entityIds, function (id) {\n          existingEntities[id] = entities[id];\n        });\n\n        _this3.cache.set('' + _this3.name + collection, JSON.stringify((0, _values2.default)(existingEntities)));\n        entities = (0, _values2.default)(entities);\n        return singular ? entities[0] : entities;\n      });\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this4 = this;\n\n      return this.find(collection).then(function (entities) {\n        entities = (0, _keyBy2.default)(entities, idAttribute);\n        var entity = entities[id];\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this4.name + ' memory database.'));\n        }\n\n        delete entities[id];\n        _this4.cache.set('' + _this4.name + collection, JSON.stringify((0, _values2.default)(entities)));\n\n        return {\n          count: 1,\n          entities: [entity]\n        };\n      });\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      return true;\n    }\n  }]);\n\n  return Memory;\n}();\n\n}).call(this,require('_process'))\n\n},{\"../../../errors\":22,\"_process\":229,\"babybird\":4,\"fast-memory-cache\":10,\"lodash/find\":188,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isString\":208,\"lodash/keyBy\":211,\"lodash/values\":226,\"promise-queue\":230}],36:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WebSQL = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../../../errors');\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar masterCollectionName = 'sqlite_master';\nvar size = 5 * 1000 * 1000; // Database size in bytes\nvar webSQL = null;\nvar dbCache = {};\n\nif (typeof window !== 'undefined') {\n  webSQL = {\n    openDatabase: typeof openDatabase !== 'undefined' ? openDatabase : global.openDatabase\n  };\n}\n\n/**\n * @private\n */\n\nvar WebSQL = exports.WebSQL = function () {\n  function WebSQL() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'kinvey' : arguments[0];\n\n    _classCallCheck(this, WebSQL);\n\n    this.name = name;\n  }\n\n  _createClass(WebSQL, [{\n    key: 'openTransaction',\n    value: function openTransaction(collection, query, parameters) {\n      var _this = this;\n\n      var write = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n      var db = dbCache[this.name];\n      var escapedCollection = '\"' + collection + '\"';\n      var isMaster = collection === masterCollectionName;\n      var isMulti = (0, _isArray2.default)(query);\n\n      query = isMulti ? query : [[query, parameters]];\n\n      if (!db) {\n        db = webSQL.openDatabase(this.name, 1, '', size);\n        dbCache[this.name] = db;\n      }\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        var writeTxn = write || !(0, _isFunction2.default)(db.readTransaction);\n        db[writeTxn ? 'transaction' : 'readTransaction'](function (tx) {\n          if (write && !isMaster) {\n            tx.executeSql('CREATE TABLE IF NOT EXISTS ' + escapedCollection + ' ' + '(key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)');\n          }\n\n          var pending = query.length;\n          var responses = [];\n\n          (0, _forEach2.default)(query, function (parts) {\n            var sql = parts[0].replace('#{collection}', escapedCollection);\n\n            tx.executeSql(sql, parts[1], function (_, resultSet) {\n              var response = {\n                rowCount: resultSet.rowsAffected,\n                result: []\n              };\n\n              if (resultSet.rows.length) {\n                for (var i = 0, len = resultSet.rows.length; i < len; i++) {\n                  try {\n                    var value = resultSet.rows.item(i).value;\n                    var entity = isMaster ? value : JSON.parse(value);\n                    response.result.push(entity);\n                  } catch (err) {\n                    // Catch the error\n                  }\n                }\n              }\n\n              responses.push(response);\n              pending = pending - 1;\n\n              if (pending === 0) {\n                resolve(isMulti ? responses : responses.shift());\n              }\n            });\n          });\n        }, function (err) {\n          err = (0, _isString2.default)(err) ? err : err.message;\n\n          if (err && err.indexOf('no such table') === -1) {\n            return reject(new _errors.NotFoundError('The ' + collection + ' collection was not found on ' + ('the ' + _this.name + ' webSQL database.')));\n          }\n\n          var query = 'SELECT name AS value from #{collection} WHERE type = ? AND name = ?';\n          var parameters = ['table', collection];\n\n          _this.openTransaction(masterCollectionName, query, parameters).then(function (response) {\n            if (response.result.length === 0) {\n              return reject(new _errors.NotFoundError('The ' + collection + ' collection was not found on ' + ('the ' + _this.name + ' webSQL database.')));\n            }\n\n            reject(new _errors.KinveyError('Unable to open a transaction for the ' + collection + ' ' + ('collection on the ' + _this.name + ' webSQL database.')));\n          }).catch(function (err) {\n            reject(new _errors.KinveyError('Unable to open a transaction for the ' + collection + ' ' + ('collection on the ' + _this.name + ' webSQL database.'), err));\n          });\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'find',\n    value: function find(collection) {\n      var sql = 'SELECT value FROM #{collection}';\n      var promise = this.openTransaction(collection, sql, []).then(function (response) {\n        return response.result;\n      }).catch(function (error) {\n        if (error instanceof _errors.NotFoundError) {\n          return [];\n        }\n\n        throw error;\n      });\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this2 = this;\n\n      var sql = 'SELECT value FROM #{collection} WHERE key = ?';\n      var promise = this.openTransaction(collection, sql, [id]).then(function (response) {\n        var entities = response.result;\n\n        if (entities.length === 0) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this2.name + ' webSQL database.'));\n        }\n\n        return entities[0];\n      });\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var queries = [];\n      entities = (0, _map2.default)(entities, function (entity) {\n        queries.push(['REPLACE INTO #{collection} (key, value) VALUES (?, ?)', [entity[idAttribute], JSON.stringify(entity)]]);\n\n        return entity;\n      });\n\n      var promise = this.openTransaction(collection, queries, null, true).then(function () {\n        return entities;\n      });\n      return promise;\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this3 = this;\n\n      var promise = this.openTransaction(collection, [['SELECT value FROM #{collection} WHERE key = ?', [id]], ['DELETE FROM #{collection} WHERE key = ?', [id]]], null, true).then(function (response) {\n        var entities = response[0].result;\n        var count = response[1].rowCount;\n        count = count ? count : entities.length;\n\n        if (count === 0) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this3.name + ' webSQL database.'));\n        }\n\n        return {\n          count: 1,\n          entities: entities\n        };\n      });\n\n      return promise;\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      return webSQL ? true : false;\n    }\n  }]);\n\n  return WebSQL;\n}();\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../../errors\":22,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isFunction\":200,\"lodash/isString\":208,\"lodash/map\":215}],37:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DB = exports.DBAdapter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _query = require('../../query');\n\nvar _aggregation = require('../../aggregation');\n\nvar _indexeddb = require('./adapters/indexeddb');\n\nvar _localstorage = require('./adapters/localstorage');\n\nvar _memory = require('./adapters/memory');\n\nvar _websql = require('./adapters/websql');\n\nvar _errors = require('../../errors');\n\nvar _log = require('../../log');\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * @private\n * Enum for DB Adapters.\n */\nvar DBAdapter = {\n  IndexedDB: 'IndexedDB',\n  LocalStorage: 'LocalStorage',\n  Memory: 'Memory',\n  WebSQL: 'WebSQL'\n};\nObject.freeze(DBAdapter);\nexports.DBAdapter = DBAdapter;\n\n/**\n * @private\n */\n\nvar DB = exports.DB = function () {\n  function DB(name) {\n    var _this = this;\n\n    var adapters = arguments.length <= 1 || arguments[1] === undefined ? [DBAdapter.IndexedDB, DBAdapter.WebSQL, DBAdapter.LocalStorage, DBAdapter.Memory] : arguments[1];\n\n    _classCallCheck(this, DB);\n\n    if (!(0, _isArray2.default)(adapters)) {\n      adapters = [adapters];\n    }\n\n    (0, _forEach2.default)(adapters, function (adapter) {\n      switch (adapter) {\n        case DBAdapter.IndexedDB:\n          if (_indexeddb.IndexedDB.isSupported()) {\n            _this.adapter = new _indexeddb.IndexedDB(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.LocalStorage:\n          if (_localstorage.LocalStorage.isSupported()) {\n            _this.adapter = new _localstorage.LocalStorage(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.Memory:\n          if (_memory.Memory.isSupported()) {\n            _this.adapter = new _memory.Memory(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.WebSQL:\n          if (_websql.WebSQL.isSupported()) {\n            _this.adapter = new _websql.WebSQL(name);\n            return false;\n          }\n\n          break;\n        default:\n          _log.Log.warn('The ' + adapter + ' adapter is is not recognized.');\n      }\n    });\n\n    if (!this.adapter) {\n      if (_memory.Memory.isSupported()) {\n        _log.Log.error('Provided adapters are unsupported on this platform. ' + 'Defaulting to StoreAdapter.Memory adapter.', adapters);\n        this.adapter = new _memory.Memory(name);\n      } else {\n        _log.Log.error('Provided adapters are unsupported on this platform.', adapters);\n      }\n    }\n  }\n\n  _createClass(DB, [{\n    key: 'generateObjectId',\n    value: function generateObjectId() {\n      var length = arguments.length <= 0 || arguments[0] === undefined ? 24 : arguments[0];\n\n      var chars = 'abcdef0123456789';\n      var objectId = '';\n\n      for (var i = 0, j = chars.length; i < length; i++) {\n        var pos = Math.floor(Math.random() * j);\n        objectId += chars.substring(pos, pos + 1);\n      }\n\n      objectId = '' + this.objectIdPrefix + objectId;\n      return objectId;\n    }\n  }, {\n    key: 'find',\n    value: function find(collection, query) {\n      var promise = this.adapter.find(collection).then(function (entities) {\n        if (!entities) {\n          return [];\n        }\n\n        return entities;\n      }).then(function (entities) {\n        if (query && !(query instanceof _query.Query)) {\n          query = new _query.Query((0, _result2.default)(query, 'toJSON', query));\n        }\n\n        if (entities.length > 0 && query) {\n          entities = query._process(entities);\n        }\n\n        return entities;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'count',\n    value: function count(collection, query) {\n      var promise = this.find(collection, query).then(function (entities) {\n        return entities.length;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'group',\n    value: function group(collection, aggregation) {\n      var promise = this.find(collection).then(function (entities) {\n        if (!(aggregation instanceof _aggregation.Aggregation)) {\n          aggregation = new _aggregation.Aggregation((0, _result2.default)(aggregation, 'toJSON', aggregation));\n        }\n\n        if (entities.length > 0 && aggregation) {\n          return aggregation.process(entities);\n        }\n\n        return null;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      if (!(0, _isString2.default)(id)) {\n        return _babybird2.default.reject(new _errors.KinveyError('id must be a string', id));\n      }\n\n      var promise = this.adapter.findById(collection, id);\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save(collection) {\n      var _this2 = this;\n\n      var entities = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n      var singular = false;\n\n      if (!entities) {\n        return _babybird2.default.resolve(null);\n      }\n\n      if (!(0, _isArray2.default)(entities)) {\n        singular = true;\n        entities = [entities];\n      }\n\n      entities = (0, _map2.default)(entities, function (entity) {\n        var id = entity[idAttribute];\n        var kmd = entity[kmdAttribute] || {};\n\n        if (!id) {\n          id = _this2.generateObjectId();\n          kmd.local = true;\n        }\n\n        delete kmd.lmt;\n        entity[idAttribute] = id;\n        entity[kmdAttribute] = kmd;\n        return entity;\n      });\n\n      return this.adapter.save(collection, entities).then(function (entities) {\n        if (singular && entities.length > 0) {\n          return entities[0];\n        }\n\n        return entities;\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(collection, query) {\n      var _this3 = this;\n\n      if (query && !(query instanceof _query.Query)) {\n        query = new _query.Query((0, _result2.default)(query, 'toJSON', query));\n      }\n\n      // Removing should not take the query sort, limit, and skip into account.\n      if (query) {\n        query.sort(null).limit(null).skip(0);\n      }\n\n      var promise = this.find(collection, query).then(function (entities) {\n        var promises = entities.map(function (entity) {\n          return _this3.removeById(collection, entity[idAttribute]);\n        });\n\n        return _babybird2.default.all(promises);\n      }).then(function (responses) {\n        return (0, _reduce2.default)(responses, function (result, response) {\n          result.count += response.count;\n          result.entities = result.entities.concat(response.entities);\n          return result;\n        }, {\n          count: 0,\n          entities: []\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      if (!id) {\n        return _babybird2.default.resolve({\n          count: 0,\n          entities: []\n        });\n      }\n\n      if (!(0, _isString2.default)(id)) {\n        return _babybird2.default.reject(new _errors.KinveyError('id must be a string', id));\n      }\n\n      var promise = this.adapter.removeById(collection, id);\n      return promise;\n    }\n  }, {\n    key: 'objectIdPrefix',\n    get: function get() {\n      return '';\n    }\n  }]);\n\n  return DB;\n}();\n\n}).call(this,require('_process'))\n\n},{\"../../aggregation\":18,\"../../errors\":22,\"../../log\":24,\"../../query\":27,\"./adapters/indexeddb\":33,\"./adapters/localstorage\":34,\"./adapters/memory\":35,\"./adapters/websql\":36,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isString\":208,\"lodash/map\":215,\"lodash/reduce\":218,\"lodash/result\":220}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkRack = exports.CacheRack = exports.KinveyRack = exports.Rack = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _middleware = require('./middleware');\n\nvar _cache = require('./middleware/cache');\n\nvar _parse = require('./middleware/parse');\n\nvar _serialize = require('./middleware/serialize');\n\nvar _findIndex = require('lodash/findIndex');\n\nvar _findIndex2 = _interopRequireDefault(_findIndex);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar sharedCacheRackInstance = void 0;\nvar sharedNetworkRackInstance = void 0;\n\n/**\n * @private\n */\n\nvar Rack = exports.Rack = function (_KinveyMiddleware) {\n  _inherits(Rack, _KinveyMiddleware);\n\n  function Rack() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Rack' : arguments[0];\n\n    _classCallCheck(this, Rack);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Rack).call(this, name));\n\n    _this.middlewares = [];\n    _this.canceled = false;\n    return _this;\n  }\n\n  _createClass(Rack, [{\n    key: 'getMiddleware',\n    value: function getMiddleware() {\n      var index = arguments.length <= 0 || arguments[0] === undefined ? -1 : arguments[0];\n\n      var middlewares = this.middlewares;\n\n      if (index < -1 || index >= middlewares.length) {\n        throw new Error('Index ' + index + ' is out of bounds.');\n      }\n\n      return middlewares[index];\n    }\n  }, {\n    key: 'use',\n    value: function use(middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.KinveyMiddleware) {\n          this.middlewares.push(middleware);\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'useBefore',\n    value: function useBefore(middlewareClass, middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.Middleware) {\n          var middlewares = this.middlewares;\n          var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n            return existingMiddleware instanceof middlewareClass;\n          });\n\n          if (index > -1) {\n            middlewares.splice(index, 0, middleware);\n            this.middlewares = middlewares;\n          }\n\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'useAfter',\n    value: function useAfter(middlewareClass, middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.Middleware) {\n          var middlewares = this.middlewares;\n          var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n            return existingMiddleware instanceof middlewareClass;\n          });\n\n          if (index > -1) {\n            middlewares.splice(index + 1, 0, middleware);\n            this.middlewares = middlewares;\n          }\n\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'swap',\n    value: function swap(middlewareClass, middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.Middleware) {\n          var middlewares = this.middlewares;\n          var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n            return existingMiddleware instanceof middlewareClass;\n          });\n\n          if (index > -1) {\n            middlewares.splice(index, 1, middleware);\n            this.middlewares = middlewares;\n          }\n\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(middlewareClass) {\n      var middlewares = this.middlewares;\n      var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n        return existingMiddleware instanceof middlewareClass;\n      });\n\n      if (index > -1) {\n        middlewares.splice(index, 1);\n        this.middlewares = middlewares;\n        this.remove(middlewareClass);\n      }\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.middlewares = [];\n    }\n  }, {\n    key: 'execute',\n    value: function execute(request) {\n      if (!request) {\n        return _babybird2.default.reject(new Error('Request is null. Please provide a valid request.'));\n      }\n\n      return (0, _reduce2.default)(this.middlewares, function (promise, middleware) {\n        return promise.then(function (request) {\n          return middleware.handle(request);\n        });\n      }, _babybird2.default.resolve(request));\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.canceled = true;\n    }\n  }, {\n    key: 'handle',\n    value: function handle(request) {\n      return this.execute(request);\n    }\n  }, {\n    key: 'generateTree',\n    value: function generateTree() {\n      var level = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];\n\n      var root = _get(Object.getPrototypeOf(Rack.prototype), 'generateTree', this).call(this, level);\n      var middlewares = this.middlewares;\n\n      middlewares.forEach(function (middleware) {\n        root.nodes.push(middleware.generateTree(level + 1));\n      });\n\n      return root;\n    }\n  }]);\n\n  return Rack;\n}(_middleware.KinveyMiddleware);\n\n/**\n * @private\n */\n\n\nvar KinveyRack = exports.KinveyRack = function (_Rack) {\n  _inherits(KinveyRack, _Rack);\n\n  function KinveyRack() {\n    _classCallCheck(this, KinveyRack);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(KinveyRack).apply(this, arguments));\n  }\n\n  _createClass(KinveyRack, [{\n    key: 'execute',\n    value: function execute(request) {\n      var promise = _get(Object.getPrototypeOf(KinveyRack.prototype), 'execute', this).call(this, request).then(function (request) {\n        return request.response;\n      });\n      return promise;\n    }\n  }]);\n\n  return KinveyRack;\n}(Rack);\n\n/**\n * @private\n */\n\n\nvar CacheRack = exports.CacheRack = function (_KinveyRack) {\n  _inherits(CacheRack, _KinveyRack);\n\n  function CacheRack() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Cache Rack' : arguments[0];\n\n    _classCallCheck(this, CacheRack);\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(CacheRack).call(this, name));\n\n    _this3.use(new _cache.CacheMiddleware());\n    return _this3;\n  }\n\n  _createClass(CacheRack, null, [{\n    key: 'sharedInstance',\n    value: function sharedInstance() {\n      var instance = sharedCacheRackInstance;\n\n      if (!instance) {\n        instance = new CacheRack();\n        sharedCacheRackInstance = instance;\n      }\n\n      return instance;\n    }\n  }]);\n\n  return CacheRack;\n}(KinveyRack);\n\n/**\n * @private\n */\n\n\nvar NetworkRack = exports.NetworkRack = function (_KinveyRack2) {\n  _inherits(NetworkRack, _KinveyRack2);\n\n  function NetworkRack() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Network Rack' : arguments[0];\n\n    _classCallCheck(this, NetworkRack);\n\n    var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(NetworkRack).call(this, name));\n\n    _this4.use(new _serialize.SerializeMiddleware());\n    _this4.use(new _parse.ParseMiddleware());\n    return _this4;\n  }\n\n  _createClass(NetworkRack, null, [{\n    key: 'sharedInstance',\n    value: function sharedInstance() {\n      var instance = sharedNetworkRackInstance;\n\n      if (!instance) {\n        instance = new NetworkRack();\n        sharedNetworkRackInstance = instance;\n      }\n\n      return instance;\n    }\n  }]);\n\n  return NetworkRack;\n}(KinveyRack);\n\n},{\"./middleware\":29,\"./middleware/cache\":30,\"./middleware/parse\":31,\"./middleware/serialize\":32,\"babybird\":4,\"lodash/findIndex\":189,\"lodash/reduce\":218}],39:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DeltaFetchRequest = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _request = require('./request');\n\nvar _local = require('./local');\n\nvar _network = require('./network');\n\nvar _response = require('./response');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _query3 = require('../query');\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _values = require('lodash/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nvar lmtAttribute = process.env.KINVEY_LMT_ATTRIBUTE || 'lmt';\nvar maxIdsPerRequest = process.env.KINVEY_MAX_IDS || 200;\n\n/**\n * @private\n */\n\nvar DeltaFetchRequest = exports.DeltaFetchRequest = function (_KinveyRequest) {\n  _inherits(DeltaFetchRequest, _KinveyRequest);\n\n  function DeltaFetchRequest() {\n    _classCallCheck(this, DeltaFetchRequest);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(DeltaFetchRequest).apply(this, arguments));\n  }\n\n  _createClass(DeltaFetchRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      var promise = _get(Object.getPrototypeOf(DeltaFetchRequest.prototype), 'execute', this).call(this).then(function () {\n        if (_this2.method !== _enums.HttpMethod.GET) {\n          throw new Error('Invalid http method. Http GET requests are only supported by DeltaFetchRequests.');\n        }\n\n        var localRequest = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _this2.url,\n          headers: _this2.headers,\n          query: _this2.query,\n          timeout: _this2.timeout,\n          client: _this2.client\n        });\n        return localRequest.execute();\n      }).catch(function (error) {\n        if (error instanceof _errors.NotFoundError) {\n          return new _response.Response({\n            statusCode: _enums.StatusCode.Ok,\n            data: []\n          });\n        }\n\n        throw error;\n      }).then(function (cacheResponse) {\n        if (cacheResponse.data.length > 0) {\n          var _ret = function () {\n            var cacheDocuments = (0, _keyBy2.default)(cacheResponse.data, idAttribute);\n            var query = new _query3.Query((0, _result2.default)(_this2.query, 'toJSON', _this2.query));\n            query.fields([idAttribute, kmdAttribute]);\n            var networkRequest = new _network.NetworkRequest({\n              method: _enums.HttpMethod.GET,\n              url: _this2.url,\n              headers: _this2.headers,\n              auth: _this2.auth,\n              query: query,\n              timeout: _this2.timeout,\n              client: _this2.client\n            });\n\n            return {\n              v: networkRequest.execute().then(function (networkResponse) {\n                var networkDocuments = (0, _keyBy2.default)(networkResponse.data, idAttribute);\n                var deltaSet = networkDocuments;\n                var cacheDocumentIds = Object.keys(cacheDocuments);\n\n                (0, _forEach2.default)(cacheDocumentIds, function (id) {\n                  var cacheDocument = cacheDocuments[id];\n                  var networkDocument = networkDocuments[id];\n\n                  if (networkDocument) {\n                    if (networkDocument[kmdAttribute] && cacheDocument[kmdAttribute] && networkDocument[kmdAttribute][lmtAttribute] === cacheDocument[kmdAttribute][lmtAttribute]) {\n                      delete deltaSet[id];\n                    } else {\n                      delete cacheDocuments[id];\n                    }\n                  } else {\n                    delete cacheDocuments[id];\n                  }\n                });\n\n                var deltaSetIds = Object.keys(deltaSet);\n                var promises = [];\n                var i = 0;\n\n                while (i < deltaSetIds.length) {\n                  var _query = new _query3.Query((0, _result2.default)(_this2.query, 'toJSON', _this2.query));\n                  var ids = deltaSetIds.slice(i, deltaSetIds.length > maxIdsPerRequest + i ? maxIdsPerRequest : deltaSetIds.length);\n                  _query.contains(idAttribute, ids);\n                  var _networkRequest = new _network.NetworkRequest({\n                    method: _enums.HttpMethod.GET,\n                    url: _this2.url,\n                    headers: _this2.headers,\n                    auth: _this2.auth,\n                    query: _query,\n                    timeout: _this2.timeout,\n                    client: _this2.client\n                  });\n\n                  var _promise = _networkRequest.execute();\n                  promises.push(_promise);\n                  i += maxIdsPerRequest;\n                }\n\n                return _babybird2.default.all(promises).then(function (responses) {\n                  var initialResponse = new _response.Response({\n                    statusCode: _enums.StatusCode.Ok,\n                    data: []\n                  });\n                  return (0, _reduce2.default)(responses, function (result, response) {\n                    if (response.isSuccess()) {\n                      result.addHeaders(response.headers);\n                      result.data = result.data.concat(response.data);\n                    }\n\n                    return result;\n                  }, initialResponse);\n                }).then(function (response) {\n                  response.data = response.data.concat((0, _values2.default)(cacheDocuments));\n\n                  if (_this2.query) {\n                    var _query2 = new _query3.Query((0, _result2.default)(_this2.query, 'toJSON', _this2.query));\n                    _query2.skip(0).limit(0);\n                    response.data = _query2._process(response.data);\n                  }\n\n                  return response;\n                });\n              })\n            };\n          }();\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n\n        var networkRequest = new _network.NetworkRequest({\n          method: _enums.HttpMethod.GET,\n          url: _this2.url,\n          headers: _this2.headers,\n          auth: _this2.auth,\n          query: _this2.query,\n          timeout: _this2.timeout,\n          client: _this2.client\n        });\n        return networkRequest.execute();\n      });\n\n      return promise;\n    }\n  }]);\n\n  return DeltaFetchRequest;\n}(_request.KinveyRequest);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../query\":27,\"./local\":40,\"./network\":41,\"./request\":43,\"./response\":44,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/keyBy\":211,\"lodash/reduce\":218,\"lodash/result\":220,\"lodash/values\":226}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocalRequest = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _request = require('./request');\n\nvar _rack = require('../rack/rack');\n\nvar _errors = require('../errors');\n\nvar _response = require('./response');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar LocalRequest = exports.LocalRequest = function (_KinveyRequest) {\n  _inherits(LocalRequest, _KinveyRequest);\n\n  function LocalRequest(options) {\n    _classCallCheck(this, LocalRequest);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LocalRequest).call(this, options));\n\n    _this.rack = _rack.CacheRack.sharedInstance();\n    return _this;\n  }\n\n  _createClass(LocalRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      var promise = _get(Object.getPrototypeOf(LocalRequest.prototype), 'execute', this).call(this).then(function () {\n        return _this2.rack.execute(_this2);\n      }).then(function (response) {\n        if (!response) {\n          throw new _errors.NoResponseError();\n        }\n\n        if (!(response instanceof _response.Response)) {\n          return new _response.Response({\n            statusCode: response.statusCode,\n            headers: response.headers,\n            data: response.data\n          });\n        }\n\n        return response;\n      }).then(function (response) {\n        if (!response.isSuccess()) {\n          throw response.error;\n        }\n\n        return response;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      var _this3 = this;\n\n      var promise = _get(Object.getPrototypeOf(LocalRequest.prototype), 'cancel', this).call(this).then(function () {\n        return _this3.rack.cancel();\n      });\n      return promise;\n    }\n  }]);\n\n  return LocalRequest;\n}(_request.KinveyRequest);\n\n},{\"../errors\":22,\"../rack/rack\":38,\"./request\":43,\"./response\":44}],41:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkRequest = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _request = require('./request');\n\nvar _rack = require('../rack/rack');\n\nvar _errors = require('../errors');\n\nvar _enums = require('../enums');\n\nvar _response = require('./response');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nvar micIdentity = process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\nvar tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\nvar usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\n\n/**\n * @private\n */\n\nvar NetworkRequest = exports.NetworkRequest = function (_KinveyRequest) {\n  _inherits(NetworkRequest, _KinveyRequest);\n\n  function NetworkRequest(options) {\n    _classCallCheck(this, NetworkRequest);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(NetworkRequest).call(this, options));\n\n    _this.rack = _rack.NetworkRack.sharedInstance();\n    _this.automaticallyRefreshAuthToken = true;\n    return _this;\n  }\n\n  _createClass(NetworkRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      var promise = _get(Object.getPrototypeOf(NetworkRequest.prototype), 'execute', this).call(this).then(function () {\n        return _this2.rack.execute(_this2);\n      }).then(function (response) {\n        if (!response) {\n          throw new _errors.NoResponseError();\n        }\n\n        if (!(response instanceof _response.Response)) {\n          return new _response.Response({\n            statusCode: response.statusCode,\n            headers: response.headers,\n            data: response.data\n          });\n        }\n\n        return response;\n      }).then(function (response) {\n        if (!response.isSuccess()) {\n          throw response.error;\n        }\n\n        return response;\n      }).catch(function (error) {\n        if (error instanceof _errors.InvalidCredentialsError && _this2.automaticallyRefreshAuthToken) {\n          var _ret = function () {\n            _this2.automaticallyRefreshAuthToken = false;\n            var activeSocialIdentity = _this2.client.getActiveSocialIdentity();\n\n            // Refresh MIC Auth Token\n            if (activeSocialIdentity && activeSocialIdentity.identity === micIdentity) {\n              // Refresh the token\n              var token = activeSocialIdentity.token;\n              var request = new NetworkRequest({\n                method: _enums.HttpMethod.POST,\n                headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                authType: _enums.AuthType.App,\n                url: _url2.default.format({\n                  protocol: activeSocialIdentity.client.protocol,\n                  host: activeSocialIdentity.client.host,\n                  pathname: tokenPathname\n                }),\n                properties: _this2.properties,\n                data: {\n                  grant_type: 'refresh_token',\n                  client_id: token.audience,\n                  redirect_uri: activeSocialIdentity.redirectUri,\n                  refresh_token: token.refresh_token\n                }\n              });\n              request.automaticallyRefreshAuthToken = false;\n\n              return {\n                v: request.execute().then(function (response) {\n                  return response.data;\n                }).then(function (token) {\n                  // Login the user with the new token\n                  var activeUserData = _this2.client.getActiveUserData();\n                  var socialIdentity = activeUserData[socialIdentityAttribute];\n                  socialIdentity[activeSocialIdentity.identity] = token;\n                  activeUserData[socialIdentityAttribute] = socialIdentity;\n\n                  var request = new NetworkRequest({\n                    method: _enums.HttpMethod.POST,\n                    authType: _enums.AuthType.App,\n                    url: _url2.default.format({\n                      protocol: _this2.client.protocol,\n                      host: _this2.client.host,\n                      pathname: '/' + usersNamespace + '/' + _this2.client.appKey + '/login'\n                    }),\n                    properties: _this2.properties,\n                    data: activeUserData,\n                    timeout: _this2.timeout,\n                    client: _this2.client\n                  });\n                  request.automaticallyRefreshAuthToken = false;\n                  return request.execute();\n                }).then(function (response) {\n                  // Store the new data\n                  _this2.client.setActiveUserData(response.data);\n                  _this2.client.setActiveSocialIdentity({\n                    identity: activeSocialIdentity.identity,\n                    redirectUri: activeSocialIdentity.redirectUri,\n                    token: response.data[socialIdentityAttribute][activeSocialIdentity.identity]\n                  });\n\n                  // Execute the original request\n                  return _this2.execute();\n                }).catch(function () {\n                  throw error;\n                })\n              };\n            }\n          }();\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n\n        throw error;\n      }).then(function (response) {\n        _this2.automaticallyRefreshAuthToken = true;\n        return response;\n      }).catch(function (error) {\n        _this2.automaticallyRefreshAuthToken = true;\n        throw error;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      var _this3 = this;\n\n      var promise = _get(Object.getPrototypeOf(NetworkRequest.prototype), 'cancel', this).call(this).then(function () {\n        return _this3.rack.cancel();\n      });\n      return promise;\n    }\n  }]);\n\n  return NetworkRequest;\n}(_request.KinveyRequest);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../rack/rack\":38,\"./request\":43,\"./response\":44,\"_process\":229,\"url\":244}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestProperties = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('../errors');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appVersionKey = 'appVersion';\n\n/**\n * Request Properties class\n */\n\nvar RequestProperties = exports.RequestProperties = function () {\n  function RequestProperties() {\n    var properties = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, RequestProperties);\n\n    this.properties = properties;\n  }\n\n  _createClass(RequestProperties, [{\n    key: 'getProperty',\n\n\n    /**\n     * Returns the request property for the key or `undefined` if\n     * it has not been set.\n     *\n     * @param  {String} key Request property key\n     * @return {*} Request property value\n     */\n    value: function getProperty(key) {\n      var properties = this.toJSON();\n\n      if (key && properties.hasOwnProperty(key)) {\n        return properties[key];\n      }\n\n      return undefined;\n    }\n\n    /**\n     * Sets the request property key to the value.\n     *\n     * @param {String} key Request property key\n     * @param {*} value Request property value\n     * @return {RequestProperties} The request properties instance.\n     */\n\n  }, {\n    key: 'setProperty',\n    value: function setProperty(key, value) {\n      var properties = {};\n      properties[key] = value;\n      this.addProperties(properties);\n      return this;\n    }\n  }, {\n    key: 'addProperties',\n    value: function addProperties(properties) {\n      var _this = this;\n\n      if (!(0, _isPlainObject2.default)(properties)) {\n        throw new _errors.KinveyError('properties argument must be an object');\n      }\n\n      Object.keys(properties).forEach(function (key) {\n        var value = properties[key];\n\n        if (value) {\n          _this.properties[key] = value;\n        } else {\n          delete _this.properties[key];\n        }\n      });\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.properties = {};\n    }\n  }, {\n    key: 'clearProperty',\n    value: function clearProperty(key) {\n      var properties = this.properties;\n\n      if (key && properties.hasOwnProperty(key)) {\n        delete properties[key];\n      }\n    }\n\n    /**\n     * Clears the app version property.\n     *\n     * @return {RequestProperties} The request properties instance.\n     */\n\n  }, {\n    key: 'clearAppVersion',\n    value: function clearAppVersion() {\n      return this.clearProperty(appVersionKey);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.properties;\n    }\n  }, {\n    key: 'properties',\n    get: function get() {\n      return this._properties;\n    },\n    set: function set(properties) {\n      this._properties = properties;\n    }\n\n    /**\n     * Return the app version request property.\n     *\n     * @return {String} App version\n     */\n\n  }, {\n    key: 'appVersion',\n    get: function get() {\n      return this.getProperty(appVersionKey);\n    }\n\n    /**\n     * Set the app version request property. The app version can be provided\n     * in major.minor.patch format or something specific to your application.\n     *\n     * @param  {Any} version App version.\n     * @return {RequestProperties} The request properties instance.\n     */\n    ,\n    set: function set(version) {\n      version = Array.prototype.slice.call(arguments, 1);\n      var major = version[0];\n      var minor = version[1];\n      var patch = version[2];\n      var appVersion = '';\n\n      if (major) {\n        appVersion = (major + '').trim();\n      }\n\n      if (minor) {\n        appVersion = ('.' + minor).trim();\n      }\n\n      if (patch) {\n        appVersion = ('.' + patch).trim();\n      }\n\n      this.setProperty(appVersionKey, appVersion);\n      return this;\n    }\n  }]);\n\n  return RequestProperties;\n}();\n\n},{\"../errors\":22,\"lodash/isPlainObject\":206}],43:[function(require,module,exports){\n(function (process,Buffer){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KinveyRequest = exports.Request = undefined;\n\nvar _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { set(parent, property, value, receiver); } } else if (\"value\" in desc && desc.writable) { desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { setter.call(receiver, value); } } return value; };\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _enums = require('../enums');\n\nvar _device = require('../utils/device');\n\nvar _properties = require('./properties');\n\nvar _rack = require('../rack/rack');\n\nvar _client = require('../client');\n\nvar _string = require('../utils/string');\n\nvar _qs = require('qs');\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nvar _appendQuery = require('append-query');\n\nvar _appendQuery2 = _interopRequireDefault(_appendQuery);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _isEmpty = require('lodash/isEmpty');\n\nvar _isEmpty2 = _interopRequireDefault(_isEmpty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\nvar Auth = {\n  /**\n   * Authenticate through (1) user credentials, (2) Master Secret, or (3) App\n   * Secret.\n   *\n   * @returns {Object}\n   */\n\n  all: function all(client) {\n    try {\n      return Auth.session(client);\n    } catch (error) {\n      return Auth.basic(client);\n    }\n  },\n\n\n  /**\n   * Authenticate through App Secret.\n   *\n   * @returns {Object}\n   */\n  app: function app(client) {\n    if (!client.appKey || !client.appSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.appSecret\n    };\n  },\n\n\n  /**\n   * Authenticate through (1) Master Secret, or (2) App Secret.\n   *\n   * @returns {Object}\n   */\n  basic: function basic(client) {\n    try {\n      return Auth.master(client);\n    } catch (error) {\n      return Auth.app(client);\n    }\n  },\n\n\n  /**\n   * Authenticate through Master Secret.\n   *\n   * @returns {Object}\n   */\n  master: function master(client) {\n    if (!client.appKey || !client.masterSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.masterSecret\n    };\n  },\n\n\n  /**\n   * Do not authenticate.\n   *\n   * @returns {Null}\n   */\n  none: function none() {\n    return null;\n  },\n\n\n  /**\n   * Authenticate through user credentials.\n   *\n   * @returns {Object}\n   */\n  session: function session(client) {\n    var activeUserData = client.getActiveUserData();\n\n    if (!activeUserData) {\n      throw new Error('There is not an active user.');\n    }\n\n    return {\n      scheme: 'Kinvey',\n      credentials: activeUserData[kmdAttribute].authtoken\n    };\n  }\n};\n\n/**\n * @private\n */\n\nvar Request = exports.Request = function () {\n  function Request() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Request);\n\n    options = (0, _assign2.default)({\n      method: _enums.HttpMethod.GET,\n      headers: {},\n      url: '',\n      data: null,\n      timeout: process.env.KINVEY_DEFAULT_TIMEOUT || 10000,\n      followRedirect: true\n    }, options);\n\n    this.method = options.method;\n    this.url = options.url;\n    this.data = options.data || options.body;\n    this.timeout = options.timeout;\n    this.followRedirect = options.followRedirect;\n    this.executing = false;\n\n    var headers = options.headers && (0, _isPlainObject2.default)(options.headers) ? options.headers : {};\n\n    if (!headers.Accept || !headers.accept) {\n      headers.Accept = 'application/json; charset=utf-8';\n    }\n\n    this.addHeaders(headers);\n  }\n\n  _createClass(Request, [{\n    key: 'getHeader',\n    value: function getHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        var keys = Object.keys(headers);\n\n        for (var i = 0, len = keys.length; i < len; i++) {\n          var key = keys[i];\n\n          if (key.toLowerCase() === name.toLowerCase()) {\n            return headers[key];\n          }\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'setHeader',\n    value: function setHeader(name, value) {\n      if (!name || !value) {\n        throw new Error('A name and value must be provided to set a header.');\n      }\n\n      if (!(0, _isString2.default)(name)) {\n        name = String(name);\n      }\n\n      var headers = this.headers || {};\n\n      if (!(0, _isString2.default)(value)) {\n        headers[name] = JSON.stringify(value);\n      } else {\n        headers[name] = value;\n      }\n\n      this.headers = headers;\n    }\n  }, {\n    key: 'addHeader',\n    value: function addHeader() {\n      var header = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.setHeader(header.name, header.value);\n    }\n  }, {\n    key: 'addHeaders',\n    value: function addHeaders(headers) {\n      var _this = this;\n\n      if (!(0, _isPlainObject2.default)(headers)) {\n        throw new Error('Headers argument must be an object.');\n      }\n\n      var names = Object.keys(headers);\n\n      (0, _forEach2.default)(names, function (name) {\n        var value = headers[name];\n        _this.setHeader(name, value);\n      });\n    }\n  }, {\n    key: 'removeHeader',\n    value: function removeHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        delete headers[name];\n        this.headers = headers;\n      }\n    }\n  }, {\n    key: 'clearHeaders',\n    value: function clearHeaders() {\n      this.headers = {};\n    }\n  }, {\n    key: 'isExecuting',\n    value: function isExecuting() {\n      return this.executing ? true : false;\n    }\n  }, {\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      if (this.executing) {\n        return _babybird2.default.reject(new Error('Unable to execute the request. The request is already executing.'));\n      }\n\n      this.executing = _babybird2.default.resolve().then(function (response) {\n        _this2.executing = false;\n        return response;\n      }).catch(function (error) {\n        _this2.executing = false;\n        throw error;\n      });\n\n      return this.executing;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        method: this.method,\n        headers: this.headers,\n        url: this.url,\n        data: this.data,\n        followRedirect: this.followRedirect\n      };\n\n      return json;\n    }\n  }, {\n    key: 'method',\n    get: function get() {\n      return this._method;\n    },\n    set: function set(method) {\n      if (!(0, _isString2.default)(method)) {\n        method = String(method);\n      }\n\n      method = method.toUpperCase();\n\n      switch (method) {\n        case _enums.HttpMethod.GET:\n        case _enums.HttpMethod.POST:\n        case _enums.HttpMethod.PATCH:\n        case _enums.HttpMethod.PUT:\n        case _enums.HttpMethod.DELETE:\n          this._method = method;\n          break;\n        default:\n          throw new Error('Invalid Http Method. Only GET, POST, PATCH, PUT, and DELETE are allowed.');\n      }\n    }\n  }, {\n    key: 'url',\n    get: function get() {\n      return (0, _appendQuery2.default)(this._url, _qs2.default.stringify({\n        _: Math.random().toString(36).substr(2)\n      }));\n    },\n    set: function set(url) {\n      this._url = url;\n    }\n  }, {\n    key: 'body',\n    get: function get() {\n      return this.data;\n    },\n    set: function set(body) {\n      this.data = body;\n    }\n  }, {\n    key: 'data',\n    get: function get() {\n      return this._data;\n    },\n    set: function set(data) {\n      if (data) {\n        var contentTypeHeader = this.getHeader('Content-Type');\n        if (!contentTypeHeader) {\n          this.setHeader('Content-Type', 'application/json; charset=utf-8');\n        }\n      } else {\n        this.removeHeader('Content-Type');\n      }\n\n      this._data = data;\n    }\n  }]);\n\n  return Request;\n}();\n\n/**\n * @private\n */\n\n\nvar KinveyRequest = exports.KinveyRequest = function (_Request) {\n  _inherits(KinveyRequest, _Request);\n\n  function KinveyRequest() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, KinveyRequest);\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(KinveyRequest).call(this, options));\n\n    options = (0, _assign2.default)({\n      authType: _enums.AuthType.None,\n      properties: null,\n      query: null,\n      client: _client.Client.sharedInstance()\n    }, options);\n\n    _this3.rack = new _rack.KinveyRack();\n    _this3.authType = options.authType;\n    _this3.properties = options.properties;\n    _this3.query = (0, _result2.default)(options.query, 'toJSON', options.query);\n    _this3.client = options.client;\n\n    var headers = {};\n    headers['X-Kinvey-Api-Version'] = process.env.KINVEY_API_VERSION || 3;\n\n    var device = new _device.Device();\n    headers['X-Kinvey-Device-Information'] = JSON.stringify(device.toJSON());\n\n    if (options.contentType) {\n      headers['X-Kinvey-Content-Type'] = options.contentType;\n    }\n\n    if (options.skipBL === true) {\n      headers['X-Kinvey-Skip-Business-Logic'] = true;\n    }\n\n    if (options.trace === true) {\n      headers['X-Kinvey-Include-Headers-In-Response'] = 'X-Kinvey-Request-Id';\n      headers['X-Kinvey-ResponseWrapper'] = true;\n    }\n\n    _this3.addHeaders(headers);\n    return _this3;\n  }\n\n  _createClass(KinveyRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var authorizationHeader = this.authorizationHeader;\n\n      if (authorizationHeader) {\n        this.addHeader(authorizationHeader);\n      }\n\n      var promise = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'execute', this).call(this);\n      return promise;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      var promise = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'cancel', this).call(this);\n      return promise;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'toJSON', this).call(this);\n      json.query = this.query;\n      return json;\n    }\n  }, {\n    key: 'properties',\n    set: function set(properties) {\n      if (properties) {\n        if (!(properties instanceof _properties.RequestProperties)) {\n          properties = new _properties.RequestProperties((0, _result2.default)(properties, 'toJSON', properties));\n        }\n\n        var appVersion = properties.appVersion;\n\n        if (appVersion) {\n          this.setHeader('X-Kinvey-Client-App-Version', appVersion);\n        } else {\n          this.removeHeader('X-Kinvey-Client-App-Version');\n        }\n\n        var customProperties = (0, _result2.default)(properties, 'toJSON', {});\n        delete customProperties.appVersion;\n        var customPropertiesHeader = JSON.stringify(customProperties);\n        var customPropertiesByteCount = (0, _string.byteCount)(customPropertiesHeader);\n        var customPropertiesMaxBytesAllowed = process.env.KINVEY_MAX_HEADER_BYTES || 2000;\n\n        if (customPropertiesByteCount >= customPropertiesMaxBytesAllowed) {\n          throw new Error('The custom properties are ' + customPropertiesByteCount + ' bytes.' + ('It must be less then ' + customPropertiesMaxBytesAllowed + ' bytes.'), 'Please remove some custom properties.');\n        }\n\n        this.setHeader('X-Kinvey-Custom-Request-Properties', customPropertiesHeader);\n      }\n    }\n  }, {\n    key: 'url',\n    get: function get() {\n      var url = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'url', this);\n      var queryString = {};\n\n      if (this.query) {\n        queryString.query = this.query.filter;\n\n        if (!(0, _isEmpty2.default)(this.query.fields)) {\n          queryString.fields = this.query.fields.join(',');\n        }\n\n        if (this.query.limit) {\n          queryString.limit = this.query.limit;\n        }\n\n        if (this.query.skip > 0) {\n          queryString.skip = this.query.skip;\n        }\n\n        if (!(0, _isEmpty2.default)(this.query.sort)) {\n          queryString.sort = this.query.sort;\n        }\n      }\n\n      var keys = Object.keys(queryString);\n      (0, _forEach2.default)(keys, function (key) {\n        queryString[key] = (0, _isString2.default)(queryString[key]) ? queryString[key] : JSON.stringify(queryString[key]);\n      });\n\n      if ((0, _isEmpty2.default)(queryString)) {\n        return url;\n      }\n\n      return (0, _appendQuery2.default)(url, _qs2.default.stringify(queryString));\n    },\n    set: function set(url) {\n      _set(Object.getPrototypeOf(KinveyRequest.prototype), 'url', url, this);\n    }\n  }, {\n    key: 'authorizationHeader',\n    get: function get() {\n      var authInfo = void 0;\n\n      switch (this.authType) {\n        case _enums.AuthType.All:\n          authInfo = Auth.all(this.client);\n          break;\n        case _enums.AuthType.App:\n          authInfo = Auth.app(this.client);\n          break;\n        case _enums.AuthType.Basic:\n          authInfo = Auth.basic(this.client);\n          break;\n        case _enums.AuthType.Master:\n          authInfo = Auth.master(this.client);\n          break;\n        case _enums.AuthType.None:\n          authInfo = Auth.none(this.client);\n          break;\n        case _enums.AuthType.Session:\n          authInfo = Auth.session(this.client);\n          break;\n        default:\n          try {\n            authInfo = Auth.session(this.client);\n          } catch (error) {\n            try {\n              authInfo = Auth.master(this.client);\n            } catch (error2) {\n              throw error;\n            }\n          }\n      }\n\n      if (authInfo) {\n        var credentials = authInfo.credentials;\n\n        if (authInfo.username) {\n          credentials = new Buffer(authInfo.username + ':' + authInfo.password).toString('base64');\n        }\n\n        return {\n          name: 'Authorization',\n          value: authInfo.scheme + ' ' + credentials\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return KinveyRequest;\n}(Request);\n\n}).call(this,require('_process'),require(\"buffer\").Buffer)\n\n},{\"../client\":19,\"../enums\":21,\"../rack/rack\":38,\"../utils/device\":53,\"../utils/string\":56,\"./properties\":42,\"_process\":229,\"append-query\":1,\"babybird\":4,\"buffer\":6,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isEmpty\":199,\"lodash/isPlainObject\":206,\"lodash/isString\":208,\"lodash/result\":220,\"qs\":234}],44:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Response = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @private\n */\n\nvar Response = exports.Response = function () {\n  function Response() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Response);\n\n    options = (0, _assign2.default)({\n      statusCode: _enums.StatusCode.Ok,\n      headers: {\n        'Content-Type': 'application/json; charset=utf-8'\n      },\n      data: null\n    }, options);\n\n    this.statusCode = options.statusCode;\n    this.addHeaders(options.headers);\n    this.data = options.data;\n  }\n\n  _createClass(Response, [{\n    key: 'getHeader',\n    value: function getHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        var keys = Object.keys(headers);\n\n        for (var i = 0, len = keys.length; i < len; i++) {\n          var key = keys[i];\n\n          if (key.toLowerCase() === name.toLowerCase()) {\n            return headers[key];\n          }\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'setHeader',\n    value: function setHeader(name, value) {\n      if (!name || !value) {\n        throw new Error('A name and value must be provided to set a header.');\n      }\n\n      if (!(0, _isString2.default)(name)) {\n        name = String(name);\n      }\n\n      var headers = this.headers || {};\n\n      if (!(0, _isString2.default)(value)) {\n        headers[name] = JSON.stringify(value);\n      } else {\n        headers[name] = value;\n      }\n\n      this.headers = headers;\n    }\n  }, {\n    key: 'addHeader',\n    value: function addHeader() {\n      var header = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.setHeader(header.name, header.value);\n    }\n  }, {\n    key: 'addHeaders',\n    value: function addHeaders(headers) {\n      var _this = this;\n\n      if (!(0, _isPlainObject2.default)(headers)) {\n        throw new Error('Headers argument must be an object.');\n      }\n\n      var names = Object.keys(headers);\n\n      (0, _forEach2.default)(names, function (name) {\n        var value = headers[name];\n        _this.setHeader(name, value);\n      });\n    }\n  }, {\n    key: 'removeHeader',\n    value: function removeHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        delete headers[name];\n        this.headers = headers;\n      }\n    }\n  }, {\n    key: 'clearHeaders',\n    value: function clearHeaders() {\n      this.headers = {};\n    }\n  }, {\n    key: 'isSuccess',\n    value: function isSuccess() {\n      return this.statusCode >= 200 && this.statusCode < 300 || this.statusCode === 302;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        statusCode: this.statusCode,\n        headers: this.headers,\n        data: this.data\n      };\n      return json;\n    }\n  }, {\n    key: 'error',\n    get: function get() {\n      if (this.isSuccess()) {\n        return null;\n      }\n\n      var data = this.data || {};\n      var name = data.name || data.error;\n      var message = data.message || data.description;\n      var debug = data.debug;\n\n      if (name === 'EntityNotFound' || name === 'CollectionNotFound' || name === 'AppNotFound' || name === 'UserNotFound' || name === 'BlobNotFound' || name === 'DocumentNotFound') {\n        return new _errors.NotFoundError(message, debug);\n      } else if (name === 'InsufficientCredentials') {\n        return new _errors.InsufficientCredentialsError(message, debug);\n      } else if (name === 'InvalidCredentials') {\n        return new _errors.InvalidCredentialsError(message, debug);\n      }\n\n      return new _errors.KinveyError(message, debug);\n    }\n  }]);\n\n  return Response;\n}();\n\n},{\"../enums\":21,\"../errors\":22,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isPlainObject\":206,\"lodash/isString\":208}],45:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CacheStore = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _networkstore = require('./networkstore');\n\nvar _response = require('../requests/response');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _local = require('../requests/local');\n\nvar _network = require('../requests/network');\n\nvar _deltafetch = require('../requests/deltafetch');\n\nvar _query = require('../query');\n\nvar _aggregation = require('../aggregation');\n\nvar _log = require('../log');\n\nvar _object = require('../utils/object');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _differenceBy = require('lodash/differenceBy');\n\nvar _differenceBy2 = _interopRequireDefault(_differenceBy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nvar syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * The CacheStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network using a cache on the device.\n */\n\nvar CacheStore = function (_NetworkStore) {\n  _inherits(CacheStore, _NetworkStore);\n\n  /**\n   * Creates a new instance of the CacheStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n\n  function CacheStore(name) {\n    _classCallCheck(this, CacheStore);\n\n    /**\n     * @type {Number}\n     */\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CacheStore).call(this, name));\n\n    _this.ttl = undefined;\n    return _this;\n  }\n\n  /**\n   * The sync pathname for the store.\n   *\n   * @param   {Client}   [client]     Client\n   * @return  {string}                Sync pathname\n   */\n\n\n  _createClass(CacheStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all entities in a collection. A query can be optionally provided to return\n     * a subset of all entities in a collection or omitted to return all entities in\n     * a collection. The number of entities returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the entities or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n    value: function find(query) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Retrieving the entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        useDeltaFetch: true\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this2.client.protocol,\n            host: _this2.client.host,\n            pathname: _this2._pathname\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this2.client\n        });\n        return request.execute();\n      }).then(function (cacheResponse) {\n        var result = {\n          cache: cacheResponse.data\n        };\n\n        result.networkPromise = _this2.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this2.push().then(function () {\n              return _this2.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          if (options.useDeltaFetch) {\n            var request = new _deltafetch.DeltaFetchRequest({\n              method: _enums.HttpMethod.GET,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this2.client.protocol,\n                host: _this2.client.host,\n                pathname: _this2._pathname\n              }),\n              properties: options.properties,\n              query: query,\n              timeout: options.timeout,\n              client: _this2.client\n            });\n            return request.execute().then(function (response) {\n              return response.data;\n            });\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'find', _this2).call(_this2, query, options);\n        }).then(function (networkEntities) {\n          var removedEntities = (0, _differenceBy2.default)(cacheResponse.data, networkEntities, idAttribute);\n          var removeEntityIds = Object.keys((0, _keyBy2.default)(removedEntities, idAttribute));\n          var removeQuery = new _query.Query();\n          removeQuery.contains(idAttribute, removeEntityIds);\n\n          var request = new _local.LocalRequest({\n            method: _enums.HttpMethod.DELETE,\n            url: _url2.default.format({\n              protocol: _this2.client.protocol,\n              host: _this2.client.host,\n              pathname: _this2._pathname\n            }),\n            properties: options.properties,\n            query: removeQuery,\n            timeout: options.timeout,\n            client: _this2.client\n          });\n          return request.execute().then(function () {\n            return _this2._cache(networkEntities);\n          });\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entities in the ' + _this2.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to retrieve the entities in the ' + _this2.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Groups entities in a collection. An aggregation can be optionally provided to group\n     * a subset of entities in a collection or omitted to group all the entities\n     * in a collection. A promise will be returned that will be resolved with the result\n     * or rejected with an error.\n     *\n     * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'group',\n    value: function group(aggregation) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Grouping the entities in the ' + this.name + ' collection.', aggregation, options);\n\n      options = (0, _assign2.default)({\n        force: false\n      }, options);\n\n      if (!(aggregation instanceof _aggregation.Aggregation)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid aggregation. ' + 'It must be an instance of the Kinvey.Aggregation class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this3.client.protocol,\n            host: _this3.client.host,\n            pathname: _this3._pathname + '/_group'\n          }),\n          properties: options.properties,\n          data: aggregation.toJSON(),\n          timeout: options.timeout,\n          client: _this3.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var result = {\n          cache: response.data\n        };\n\n        result.networkPromise = _this3.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this3.push().then(function () {\n              return _this3.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'group', _this3).call(_this3, aggregation, options);\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Grouped the entities in the ' + _this3.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to group the entities in the ' + _this3.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Counts entities in a collection. A query can be optionally provided to count\n     * a subset of entities in a collection or omitted to count all the entities\n     * in a collection. A promise will be returned that will be resolved with the count\n     * or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'count',\n    value: function count(query) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Counting the number of entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        force: false\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this4.client.protocol,\n            host: _this4.client.host,\n            pathname: _this4._pathname + '/_count'\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this4.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var result = {\n          cache: response.data\n        };\n\n        result.networkPromise = _this4.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this4.push().then(function () {\n              return _this4.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'count', _this4).call(_this4, query, options);\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Counted the number of entities in the ' + _this4.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to count the number of entities in the ' + _this4.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Retrieves a single entity in a collection by id. A promise will be returned that will\n     * be resolved with the entity or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(id) {\n      var _this5 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to retrieve an entity.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Retrieving the entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      options = (0, _assign2.default)({\n        force: false,\n        useDeltaFetch: true\n      }, options);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this5.client.protocol,\n            host: _this5.client.host,\n            pathname: _this5._pathname + '/' + id\n          }),\n          properties: options.properties,\n          timeout: options.timeout,\n          client: _this5.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var result = {\n          cache: response.data\n        };\n\n        result.networkPromise = _this5.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this5.push().then(function () {\n              return _this5.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          if (options.useDeltaFetch) {\n            var request = new _deltafetch.DeltaFetchRequest({\n              method: _enums.HttpMethod.GET,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this5.client.protocol,\n                host: _this5.client.host,\n                pathname: _this5._pathname + '/' + id\n              }),\n              properties: options.properties,\n              timeout: options.timeout,\n              client: _this5.client\n            });\n            return request.execute().then(function (response) {\n              return response.data;\n            });\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'findById', _this5).call(_this5, id, options);\n        }).then(function (data) {\n          return _this5._cache(data);\n        }).catch(function (error) {\n          if (error instanceof _errors.NotFoundError) {\n            var request = new _local.LocalRequest({\n              method: _enums.HttpMethod.DELETE,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this5.client.protocol,\n                host: _this5.client.host,\n                pathname: _this5._pathname + '/' + id\n              }),\n              properties: options.properties,\n              timeout: options.timeout,\n              client: _this5.client\n            });\n            return request.execute().then(function () {\n              throw error;\n            });\n          }\n\n          throw error;\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entity in the ' + _this5.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (error) {\n        _log.Log.error('Failed to retrieve the entity in the ' + _this5.name + ' collection with id = ' + id + '.', error);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Save a entity or an array of entities to a collection. A promise will be returned that\n     * will be resolved with the saved entity/entities or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity or entities to save.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data saved\n     *                                                                            in the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'save',\n    value: function save(entity) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!entity) {\n        _log.Log.warn('No entity was provided to be saved.', entity);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Saving the entity(s) to the ' + this.name + ' collection.', entity);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.POST,\n          url: _url2.default.format({\n            protocol: _this6.client.protocol,\n            host: _this6.client.host,\n            pathname: _this6._pathname\n          }),\n          properties: options.properties,\n          data: entity,\n          timeout: options.timeout,\n          client: _this6.client\n        });\n\n        if (entity[idAttribute]) {\n          request.method = _enums.HttpMethod.PUT;\n          request.url = _url2.default.format({\n            protocol: _this6.client.protocol,\n            host: _this6.client.host,\n            pathname: _this6._pathname + '/' + entity[idAttribute]\n          });\n        }\n\n        return request.execute();\n      }).then(function (response) {\n        return _this6._sync(response.data, options).then(function () {\n          var data = (0, _isArray2.default)(response.data) ? response.data : [response.data];\n          var ids = Object.keys((0, _keyBy2.default)(data, idAttribute));\n          var query = new _query.Query().contains(idAttribute, ids);\n          return _this6.push(query, options);\n        }).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Saved the entity(s) to the ' + _this6.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to save the entity(s) to the ' + _this6.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove entities in a collection. A query can be optionally provided to remove\n     * a subset of entities in a collection or omitted to remove all entities in a\n     * collection. A promise will be returned that will be resolved with a count of the\n     * number of entities removed or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(query) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Removing the entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.DELETE,\n          url: _url2.default.format({\n            protocol: _this7.client.protocol,\n            host: _this7.client.host,\n            pathname: _this7._pathname\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this7.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        return _this7._sync(response.data.entities, options).then(function () {\n          var query = new _query.Query().contains(idAttribute, []);\n          return _this7.push(query, options);\n        }).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entities in the ' + _this7.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entities in the ' + _this7.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove an entity in a collection. A promise will be returned that will be\n     * resolved with a count of the number of entities removed or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'removeById',\n    value: function removeById(id) {\n      var _this8 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to be removed.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Removing an entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.DELETE,\n          url: _url2.default.format({\n            protocol: _this8.client.protocol,\n            host: _this8.client.host,\n            pathname: _this8._pathname + '/' + id\n          }),\n          properties: options.properties,\n          authType: _enums.AuthType.Default,\n          timeout: options.timeout,\n          client: _this8.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        return _this8._sync(response.data.entities, options).then(function () {\n          var query = new _query.Query().contains(idAttribute, [id]);\n          return _this8.push(query, options);\n        }).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entity in the ' + _this8.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entity in the ' + _this8.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Push sync items for a collection to the network. A promise will be returned that will be\n     * resolved with the result of the push or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to push a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.DataStore.getInstance('books');\n     * store.push().then(function(result) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'push',\n    value: function push(query) {\n      var _this9 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this9.client.protocol,\n            host: _this9.client.host,\n            pathname: _this9._syncPathname\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this9.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var save = [];\n        var remove = [];\n        var entities = response.data.entities;\n        var ids = Object.keys(entities);\n        var size = response.data.size;\n\n        var promises = (0, _map2.default)(ids, function (id) {\n          var metadata = entities[id];\n          var request = new _local.LocalRequest({\n            method: _enums.HttpMethod.GET,\n            url: _url2.default.format({\n              protocol: _this9.client.protocol,\n              host: _this9.client.host,\n              pathname: _this9._pathname + '/' + id\n            }),\n            properties: metadata.properties,\n            timeout: options.timeout,\n            client: _this9.client\n          });\n          return request.execute().then(function (response) {\n            save.push(response.data);\n            return response.data;\n          }).catch(function (err) {\n            if (err instanceof _errors.NotFoundError) {\n              remove.push(id);\n              return null;\n            }\n\n            throw err;\n          });\n        });\n\n        return _babybird2.default.all(promises).then(function () {\n          var saved = (0, _map2.default)(save, function (entity) {\n            var metadata = entities[entity[idAttribute]];\n            var isLocalEntity = (0, _object.nested)(entity, kmdAttribute + '.local');\n\n            if (isLocalEntity) {\n              var _ret = function () {\n                var originalId = entity[idAttribute];\n                delete entity[idAttribute];\n                delete entity[kmdAttribute];\n\n                var request = new _network.NetworkRequest({\n                  method: _enums.HttpMethod.POST,\n                  authType: _enums.AuthType.Default,\n                  url: _url2.default.format({\n                    protocol: _this9.client.protocol,\n                    host: _this9.client.host,\n                    pathname: _this9._pathname\n                  }),\n                  properties: metadata.properties,\n                  data: entity,\n                  timeout: options.timeout,\n                  client: _this9.client\n                });\n\n                return {\n                  v: request.execute().then(function (response) {\n                    var request = new _local.LocalRequest({\n                      method: _enums.HttpMethod.PUT,\n                      url: _url2.default.format({\n                        protocol: _this9.client.protocol,\n                        host: _this9.client.host,\n                        pathname: _this9._pathname\n                      }),\n                      properties: metadata.properties,\n                      data: response.data,\n                      timeout: options.timeout,\n                      client: _this9.client\n                    });\n                    return request.execute();\n                  }).then(function () {\n                    var request = new _local.LocalRequest({\n                      method: _enums.HttpMethod.DELETE,\n                      url: _url2.default.format({\n                        protocol: _this9.client.protocol,\n                        host: _this9.client.host,\n                        pathname: _this9._pathname + '/' + originalId\n                      }),\n                      properties: metadata.properties,\n                      timeout: options.timeout,\n                      client: _this9.client\n                    });\n\n                    return request.execute().then(function (response) {\n                      var result = response.data;\n                      if (result.count === 1) {\n                        size = size - 1;\n                        delete entities[originalId];\n                        return {\n                          _id: originalId,\n                          entity: entity\n                        };\n                      }\n\n                      return {\n                        _id: originalId,\n                        error: new _errors.KinveyError('Expected count to be 1 but instead it was ' + result.count + ' ' + ('when trying to remove entity with _id ' + originalId + '.'))\n                      };\n                    });\n                  }).catch(function (err) {\n                    return {\n                      _id: originalId,\n                      error: err\n                    };\n                  })\n                };\n              }();\n\n              if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n            }\n\n            var request = new _network.NetworkRequest({\n              method: _enums.HttpMethod.PUT,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this9.client.protocol,\n                host: _this9.client.host,\n                pathname: _this9._pathname + '/' + entity[idAttribute]\n              }),\n              properties: metadata.properties,\n              data: entity,\n              timeout: options.timeout,\n              client: _this9.client\n            });\n\n            return request.execute().then(function (response) {\n              size = size - 1;\n              delete entities[response.data[idAttribute]];\n              return {\n                _id: response.data[idAttribute],\n                entity: response.data\n              };\n            }).catch(function (err) {\n              // If the credentials used to authenticate this request are\n              // not authorized to run the operation then just remove the entity\n              // from the sync table\n              if (err instanceof _errors.InsufficientCredentialsError) {\n                size = size - 1;\n                delete entities[entity[idAttribute]];\n                return {\n                  _id: entity[idAttribute],\n                  error: err\n                };\n              }\n\n              return {\n                _id: entity[idAttribute],\n                error: err\n              };\n            });\n          });\n\n          var removed = (0, _map2.default)(remove, function (id) {\n            var metadata = entities[id];\n            var request = new _network.NetworkRequest({\n              method: _enums.HttpMethod.DELETE,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this9.client.protocol,\n                host: _this9.client.host,\n                pathname: _this9._pathname + '/' + id\n              }),\n              properties: metadata.properties,\n              timeout: options.timeout,\n              client: _this9.client\n            });\n\n            return request.execute().then(function (response) {\n              var result = response.data;\n\n              if (result.count === 1) {\n                size = size - 1;\n                delete entities[id];\n                return {\n                  _id: id\n                };\n              }\n\n              return {\n                _id: id,\n                error: new _errors.KinveyError('Expected count to be 1 but instead it was ' + result.count + ' ' + ('when trying to remove entity with _id ' + id + '.'))\n              };\n            }).catch(function (err) {\n              // If the credentials used to authenticate this request are\n              // not authorized to run the operation or the entity was\n              // not found then just remove the entity from the sync table\n              if (err instanceof _errors.NotFoundError || err instanceof _errors.InsufficientCredentialsError) {\n                size = size - 1;\n                delete entities[id];\n                return {\n                  _id: id,\n                  error: err\n                };\n              }\n\n              return {\n                _id: id,\n                error: err\n              };\n            });\n          });\n\n          return _babybird2.default.all([_babybird2.default.all(saved), _babybird2.default.all(removed)]);\n        }).then(function (results) {\n          var savedResults = results[0];\n          var removedResults = results[1];\n          var result = {\n            collection: _this9.name,\n            success: [],\n            error: []\n          };\n\n          (0, _forEach2.default)(savedResults, function (savedResult) {\n            if (savedResult.error) {\n              result.error.push(savedResult);\n            } else {\n              result.success.push(savedResult);\n            }\n          });\n\n          (0, _forEach2.default)(removedResults, function (removedResult) {\n            if (removedResult.error) {\n              result.error.push(removedResult);\n            } else {\n              result.success.push(removedResult);\n            }\n          });\n\n          return result;\n        }).then(function (result) {\n          response.data.size = size;\n          response.data.entities = entities;\n\n          var request = new _local.LocalRequest({\n            method: _enums.HttpMethod.PUT,\n            url: _url2.default.format({\n              protocol: _this9.client.protocol,\n              host: _this9.client.host,\n              pathname: _this9._syncPathname\n            }),\n            properties: options.properties,\n            data: response.data,\n            timeout: options.timeout,\n            client: _this9.client\n          });\n          return request.execute().then(function () {\n            return result;\n          });\n        });\n      }).catch(function (err) {\n        if (err instanceof _errors.NotFoundError) {\n          return {\n            collection: _this9.name,\n            success: [],\n            error: []\n          };\n        }\n\n        throw err;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Pull items for a collection from the network to your local cache. A promise will be\n     * returned that will be resolved with the result of the pull or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to pull a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.Store.getInstance('books');\n     * store.pull().then(function(result) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'pull',\n    value: function pull(query) {\n      var _this10 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = this.syncCount(null, options).then(function (count) {\n        if (count > 0) {\n          throw new _errors.KinveyError('Unable to pull data. You must push the pending sync items first.', 'Call store.push() to push the pending sync items before you pull new data.');\n        }\n\n        return _this10.find(query, options);\n      }).then(function (result) {\n        return result.network;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Sync items for a collection. This will push pending sync items first and then\n     * pull items from the network into your local cache. A promise will be\n     * returned that will be resolved with the result of the pull or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to pull a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.Store.getInstance('books');\n     * store.sync().then(function(result) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'sync',\n    value: function sync(query) {\n      var _this11 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = this.push(null, options).then(function (pushResponse) {\n        return _this11.pull(query, options).then(function (pullResponse) {\n          return {\n            push: pushResponse,\n            pull: pullResponse\n          };\n        });\n      });\n\n      return promise;\n    }\n\n    /**\n     * Count the number of entities waiting to be pushed to the network. A promise will be\n     * returned with the count of entities or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the local cache.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.Store.getInstance('books');\n     * store.syncCount().then(function(count) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'syncCount',\n    value: function syncCount(query) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data.size || 0;\n      }).catch(function (err) {\n        if (err instanceof _errors.NotFoundError) {\n          return 0;\n        }\n\n        throw err;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Add or update entities stored in the cache. A promise will be returned with the entities\n     * or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity(s) to add or update in the cache.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: '_cache',\n    value: function _cache(entities) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.PUT,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entities,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Add entities to be pushed. A promise will be returned with null or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity(s) to add to the sync table.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: '_sync',\n    value: function _sync(entities) {\n      var _this12 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!this.name) {\n        return _babybird2.default.reject(new _errors.KinveyError('Unable to add entities to the sync table for a store with no name.'));\n      }\n\n      if (!entities) {\n        return _babybird2.default.resolve(null);\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().catch(function (error) {\n        if (error instanceof _errors.NotFoundError) {\n          return new _response.Response({\n            statusCode: _enums.StatusCode.Ok,\n            data: {\n              _id: _this12.name,\n              entities: {},\n              size: 0\n            }\n          });\n        }\n\n        throw error;\n      }).then(function (response) {\n        var syncData = response.data || {\n          _id: _this12.name,\n          entities: {},\n          size: 0\n        };\n\n        if (!(0, _isArray2.default)(entities)) {\n          entities = [entities];\n        }\n\n        (0, _forEach2.default)(entities, function (entity) {\n          if (entity[idAttribute]) {\n            if (!syncData.entities.hasOwnProperty(entity[idAttribute])) {\n              syncData.size = syncData.size + 1;\n            }\n\n            syncData.entities[entity[idAttribute]] = {\n              lmt: entity[kmdAttribute] ? entity[kmdAttribute].lmt : null\n            };\n          }\n        });\n\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.PUT,\n          url: _url2.default.format({\n            protocol: _this12.client.protocol,\n            host: _this12.client.host,\n            pathname: _this12._syncPathname\n          }),\n          properties: options.properties,\n          data: syncData,\n          timeout: options.timeout,\n          client: _this12.client\n        });\n        return request.execute();\n      }).then(function () {\n        return null;\n      });\n\n      return promise;\n    }\n  }, {\n    key: '_syncPathname',\n    get: function get() {\n      if (!this.name) {\n        throw new Error('Unable to get a sync pathname for a collection with no name.');\n      }\n\n      return '/' + appdataNamespace + '/' + this.client.appKey + '/' + syncCollectionName + '/' + this.name;\n    }\n  }]);\n\n  return CacheStore;\n}(_networkstore.NetworkStore);\n\nexports.CacheStore = CacheStore;\n\n}).call(this,require('_process'))\n\n},{\"../aggregation\":18,\"../enums\":21,\"../errors\":22,\"../log\":24,\"../query\":27,\"../requests/deltafetch\":39,\"../requests/local\":40,\"../requests/network\":41,\"../requests/response\":44,\"../utils/object\":54,\"./networkstore\":48,\"_process\":229,\"babybird\":4,\"lodash/assign\":184,\"lodash/differenceBy\":186,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/keyBy\":211,\"lodash/map\":215,\"url\":244}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataStore = exports.DataStoreType = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _syncstore = require('./syncstore');\n\nvar _networkstore = require('./networkstore');\n\nvar _userstore = require('./userstore');\n\nvar _filestore = require('./filestore');\n\nvar _cachestore = require('./cachestore');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Enum for DataStore types.\n */\nvar DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexports.DataStoreType = DataStoreType;\n\nvar DataStore = exports.DataStore = function () {\n  function DataStore() {\n    _classCallCheck(this, DataStore);\n  }\n\n  _createClass(DataStore, null, [{\n    key: 'getInstance',\n\n    /**\n     * Returns an instance of the Store class based on the type provided.\n     *\n     * @param  {string}       [name]                      Name of the collection.\n     * @param  {StoreType}    [type=DataStoreType.Cache]  Type of store to return.\n     * @return {Object}                                   Store\n     */\n    value: function getInstance(name) {\n      var type = arguments.length <= 1 || arguments[1] === undefined ? DataStoreType.Cache : arguments[1];\n\n      var store = void 0;\n\n      switch (type) {\n        case DataStoreType.Sync:\n          store = new _syncstore.SyncStore(name);\n          break;\n        case DataStoreType.Network:\n          store = new _networkstore.NetworkStore(name);\n          break;\n        case DataStoreType.User:\n          store = new _userstore.UserStore();\n          break;\n        case DataStoreType.File:\n          store = new _filestore.FileStore();\n          break;\n        case DataStoreType.Cache:\n        default:\n          store = new _cachestore.CacheStore(name);\n      }\n\n      return store;\n    }\n  }]);\n\n  return DataStore;\n}();\n\n},{\"./cachestore\":45,\"./filestore\":47,\"./networkstore\":48,\"./syncstore\":49,\"./userstore\":50}],47:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FileStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _networkstore = require('./networkstore');\n\nvar _network = require('../requests/network');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar filesNamespace = process.env.KINVEY_FILES_NAMESPACE || 'blob';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The FilesStore class is used to find, save, update, remove, count and group files.\n */\n\nvar FileStore = exports.FileStore = function (_NetworkStore) {\n  _inherits(FileStore, _NetworkStore);\n\n  function FileStore() {\n    _classCallCheck(this, FileStore);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(FileStore).apply(this, arguments));\n  }\n\n  _createClass(FileStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all files. A query can be optionally provided to return\n     * a subset of all the files for your application or omitted to return all the files.\n     * The number of files returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the files or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Boolean}               [options.tls]                             Use Transport Layer Security\n     * @param   {Boolean}               [options.download]                        Download the files\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var filesStore = new Kinvey.FilesStore();\n     * var query = new Kinvey.Query();\n     * query.equalTo('location', 'Boston');\n     * files.find(query, {\n     *   tls: true, // Use transport layer security\n     *   ttl: 60 * 60 * 24, // 1 day in seconds\n     *   download: true // download the files\n     * }).then(function(files) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n    value: function find(query) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        download: false,\n        tls: false\n      }, options);\n\n      options.flags = {\n        tls: options.tls === true ? true : false,\n        ttl_in_seconds: options.ttl\n      };\n\n      var promise = _get(Object.getPrototypeOf(FileStore.prototype), 'find', this).call(this, query, options).then(function (files) {\n        if (options.download === true) {\n          var promises = (0, _map2.default)(files, function (file) {\n            return _this2.downloadByUrl(file._downloadURL, options);\n          });\n          return _babybird2.default.all(promises);\n        }\n\n        return files;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(id, options) {\n      return this.download(id, options);\n    }\n\n    /**\n     * Download a file. A promise will be returned that will be resolved with the file or rejected with\n     * an error.\n     *\n     * @param   {string}        name                                          Name\n     * @param   {Object}        [options]                                     Options\n     * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n     * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n     * @param   {Boolean}       [options.stream]                              Stream the file\n     * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n     * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n     * @return  {Promise}                                                     Promise\n     *\n     * @example\n     * var files = new Kinvey.Files();\n     * files.download('BostonTeaParty.png', {\n     *   tls: true, // Use transport layer security\n     *   ttl: 60 * 60 * 24, // 1 day in seconds\n     *   stream: true // stream the file\n     * }).then(function(file) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'download',\n    value: function download(name) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        stream: false,\n        tls: false\n      }, options);\n\n      options.flags = {\n        tls: options.tls === true ? true : false,\n        ttl_in_seconds: options.ttl\n      };\n\n      var promise = _get(Object.getPrototypeOf(FileStore.prototype), 'findById', this).call(this, name, options).then(function (file) {\n        if (options.stream === true) {\n          return file;\n        }\n\n        return _this3.downloadByUrl(file._downloadURL, options);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'downloadByUrl',\n    value: function downloadByUrl(url) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.GET,\n          url: url,\n          timeout: options.timeout\n        });\n        request.setHeader('Accept', options.mimeType || 'application-octet-stream');\n        request.removeHeader('Content-Type');\n        request.removeHeader('X-Kinvey-Api-Version');\n        return request.execute();\n      }).then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Stream a file. A promise will be returned that will be resolved with the file or rejected with\n     * an error.\n     *\n     * @param   {string}        name                                          File name\n     * @param   {Object}        [options]                                     Options\n     * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n     * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n     * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n     * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n     * @return  {Promise}                                                     Promise\n     *\n     * @example\n     * var files = new Kinvey.Files();\n     * files.stream('BostonTeaParty.png', {\n     *   tls: true, // Use transport layer security\n     *   ttl: 60 * 60 * 24, // 1 day in seconds\n     * }).then(function(file) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'stream',\n    value: function stream(name) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options.stream = true;\n      return this.download(name, options);\n    }\n  }, {\n    key: 'upload',\n    value: function upload(file) {\n      var metadata = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      metadata._filename = metadata._filename || file._filename || file.name;\n      metadata.size = metadata.size || file.size || file.length;\n      metadata.mimeType = metadata.mimeType || file.mimeType || file.type || 'application/octet-stream';\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        public: false,\n        handler: function handler() {}\n      }, options);\n\n      if (options.public) {\n        metadata._public = true;\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        headers: {\n          'X-Kinvey-Content-Type': metadata.mimeType\n        },\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        data: metadata,\n        client: this.client\n      });\n\n      if (metadata[idAttribute]) {\n        request.method = _enums.HttpMethod.PUT;\n        request.url = _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + metadata._id\n        });\n      }\n\n      var promise = request.execute().then(function (response) {\n        var uploadUrl = response.data._uploadURL;\n        var headers = response.data._requiredHeaders || {};\n        headers['Content-Type'] = metadata.mimeType;\n        headers['Content-Length'] = metadata.size;\n\n        // Delete fields from the response\n        delete response.data._expiresAt;\n        delete response.data._requiredHeaders;\n        delete response.data._uploadURL;\n\n        // Upload the file\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.PUT,\n          url: uploadUrl,\n          data: file\n        });\n        request.clearHeaders();\n        request.addHeaders(headers);\n\n        return request.execute().then(function (uploadResponse) {\n          if (uploadResponse.isSuccess()) {\n            response.data._data = file;\n            return response.data;\n          }\n\n          throw uploadResponse.error;\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save() {\n      return _babybird2.default.reject(new _errors.KinveyError('Please use `upload()` to save files.'));\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      return _babybird2.default.reject(new _errors.KinveyError('Please use `upload()` to update files.'));\n    }\n  }, {\n    key: '_pathname',\n\n    /**\n     * The pathname for the store.\n     *\n     * @return  {string}                Pathname\n     */\n    get: function get() {\n      return '/' + filesNamespace + '/' + this.client.appKey;\n    }\n  }]);\n\n  return FileStore;\n}(_networkstore.NetworkStore);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../requests/network\":41,\"./networkstore\":48,\"_process\":229,\"babybird\":4,\"lodash/assign\":184,\"lodash/map\":215,\"url\":244}],48:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _aggregation = require('../aggregation');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _client = require('../client');\n\nvar _network = require('../requests/network');\n\nvar _query = require('../query');\n\nvar _Log = require('../Log');\n\nvar _qs = require('qs');\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The NetworkStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network.\n */\n\nvar NetworkStore = exports.NetworkStore = function () {\n  /**\n   * Creates a new instance of the NetworkStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n\n  function NetworkStore(name) {\n    _classCallCheck(this, NetworkStore);\n\n    if (name && !(0, _isString2.default)(name)) {\n      throw new _errors.KinveyError('Name must be a string.');\n    }\n\n    /**\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * @private\n     * @type {Client}\n     */\n    this.client = _client.Client.sharedInstance();\n  }\n\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}                Pathname\n   */\n\n\n  _createClass(NetworkStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all entities in a collection. A query can be optionally provided to return\n     * a subset of all entities in a collection or omitted to return all entities in\n     * a collection. The number of entities returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the entities or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n    value: function find(query) {\n      var _this = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Retrieving the entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n      options.flags = _qs2.default.parse(options.flags);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Retrieved the entities in the ' + _this.name + ' collection.', response);\n      }).catch(function (error) {\n        _Log.Log.error('Failed to retrieve the entities in the ' + _this.name + ' collection.', error);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Groups entities in a collection. An aggregation can be optionally provided to group\n     * a subset of entities in a collection or omitted to group all the entities\n     * in a collection. A promise will be returned that will be resolved with the result\n     * or rejected with an error.\n     *\n     * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'group',\n    value: function group(aggregation) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Grouping the entities in the ' + this.name + ' collection.', aggregation, options);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        useDeltaFetch: true,\n        handler: function handler() {}\n      }, options);\n\n      if (!(aggregation instanceof _aggregation.Aggregation)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid aggregation. ' + 'It must be an instance of the Kinvey.Aggregation class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_group'\n        }),\n        properties: options.properties,\n        data: aggregation.toJSON(),\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Grouped the entities in the ' + _this2.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to group the entities in the ' + _this2.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Counts entities in a collection. A query can be optionally provided to count\n     * a subset of entities in a collection or omitted to count all the entities\n     * in a collection. A promise will be returned that will be resolved with the count\n     * or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'count',\n    value: function count(query) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Counting the number of entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        useDeltaFetch: true,\n        handler: function handler() {}\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_count'\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Counted the number of entities in the ' + _this3.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to count the number of entities in the ' + _this3.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Retrieves a single entity in a collection by id. A promise will be returned that will\n     * be resolved with the entity or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(id) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _Log.Log.warn('No id was provided to retrieve an entity.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _Log.Log.debug('Retrieving the entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Retrieved the entity in the ' + _this4.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to retrieve the entity in the ' + _this4.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Save a entity or an array of entities to a collection. A promise will be returned that\n     * will be resolved with the saved entity/entities or rejected with an error.\n     *\n     * @param   {Object|Array}          doc                                       Document or entities to save.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'save',\n    value: function save(entity) {\n      var _this5 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!entity) {\n        _Log.Log.warn('No entity was provided to be saved.', entity);\n        return _babybird2.default.resolve(null);\n      }\n\n      _Log.Log.debug('Saving the entity(s) to the ' + this.name + ' collection.', entity);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entity,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      if (entity[idAttribute]) {\n        request.method = _enums.HttpMethod.PUT;\n        request.url = _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + entity[idAttribute]\n        });\n      }\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Saved the entity(s) to the ' + _this5.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to save the entity(s) to the ' + _this5.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove entities in a collection. A query can be optionally provided to remove\n     * a subset of entities in a collection or omitted to remove all entities in a\n     * collection. A promise will be returned that will be resolved with a count of the\n     * number of entities removed or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(query) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Removing the entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Removed the entities in the ' + _this6.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to remove the entities in the ' + _this6.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove an entity in a collection. A promise will be returned that will be\n     * resolved with a count of the number of entities removed or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'removeById',\n    value: function removeById(id) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _Log.Log.warn('No id was provided to be removed.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _Log.Log.debug('Removing an entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Removed the entity in the ' + _this7.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to remove the entity in the ' + _this7.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n  }, {\n    key: '_pathname',\n    get: function get() {\n      var pathname = '/' + appdataNamespace + '/' + this.client.appKey;\n\n      if (this.name) {\n        pathname = pathname + '/' + this.name;\n      }\n\n      return pathname;\n    }\n  }]);\n\n  return NetworkStore;\n}();\n\n}).call(this,require('_process'))\n\n},{\"../Log\":16,\"../aggregation\":18,\"../client\":19,\"../enums\":21,\"../errors\":22,\"../query\":27,\"../requests/network\":41,\"_process\":229,\"babybird\":4,\"lodash/assign\":184,\"lodash/isString\":208,\"qs\":234,\"url\":244}],49:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SyncStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _cachestore = require('./cachestore');\n\nvar _local = require('../requests/local');\n\nvar _aggregation = require('../aggregation');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _query = require('../query');\n\nvar _log = require('../log');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\nvar SyncStore = exports.SyncStore = function (_CacheStore) {\n  _inherits(SyncStore, _CacheStore);\n\n  function SyncStore() {\n    _classCallCheck(this, SyncStore);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(SyncStore).apply(this, arguments));\n  }\n\n  _createClass(SyncStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all entities in a collection. A query can be optionally provided to return\n     * a subset of all entities in a collection or omitted to return all entities in\n     * a collection. The number of entities returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the entities or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n    value: function find(query) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Retrieving the entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entities in the ' + _this2.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to retrieve the entities in the ' + _this2.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Groups entities in a collection. An aggregation can be optionally provided to group\n     * a subset of entities in a collection or omitted to group all the entities\n     * in a collection. A promise will be returned that will be resolved with the result\n     * or rejected with an error.\n     *\n     * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'group',\n    value: function group(aggregation) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Grouping the entities in the ' + this.name + ' collection.', aggregation, options);\n\n      if (!(aggregation instanceof _aggregation.Aggregation)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid aggregation. ' + 'It must be an instance of the Kinvey.Aggregation class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_group'\n        }),\n        properties: options.properties,\n        data: aggregation.toJSON(),\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Grouped the entities in the ' + _this3.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to group the entities in the ' + _this3.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Counts entities in a collection. A query can be optionally provided to count\n     * a subset of entities in a collection or omitted to count all the entities\n     * in a collection. A promise will be returned that will be resolved with the count\n     * or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'count',\n    value: function count(query) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Counting the number of entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_count'\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Counted the number of entities in the ' + _this4.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to count the number of entities in the ' + _this4.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Retrieves a single entity in a collection by id. A promise will be returned that will\n     * be resolved with the entity or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(id) {\n      var _this5 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to retrieve an entity.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Retrieving the entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entity in the ' + _this5.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to retrieve the entity in the ' + _this5.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Save a entity or an array of entities to a collection. A promise will be returned that\n     * will be resolved with the saved entity/entities or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity or entities to save.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data saved\n     *                                                                            in the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'save',\n    value: function save(entity) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!entity) {\n        _log.Log.warn('No entity was provided to be saved.', entity);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Saving the entity(s) to the ' + this.name + ' collection.', entity);\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.POST,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entity,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      if (entity[idAttribute]) {\n        request.url = _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + entity[idAttribute]\n        });\n      }\n\n      var promise = request.execute().then(function (response) {\n        return _this6._sync(response.data, options).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Saved the entity(s) to the ' + _this6.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to save the entity(s) to the ' + _this6.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove entities in a collection. A query can be optionally provided to remove\n     * a subset of entities in a collection or omitted to remove all entities in a\n     * collection. A promise will be returned that will be resolved with a count of the\n     * number of entities removed or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(query) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Removing the entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.DELETE,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return _this7._sync(response.data.entities, options).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entities in the ' + _this7.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entities in the ' + _this7.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove an entity in a collection. A promise will be returned that will be\n     * resolved with a count of the number of entities removed or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'removeById',\n    value: function removeById(id) {\n      var _this8 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to be removed.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Removing an entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.DELETE,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return _this8._sync(response.data.entities, options).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entity in the ' + _this8.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entity in the ' + _this8.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Pull items for a collection from the network to your local cache. A promise will be\n     * returned that will be resolved with the result of the pull or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to pull a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'pull',\n    value: function pull(query) {\n      var _this9 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = this.syncCount(null, options).then(function (count) {\n        if (count > 0) {\n          throw new _errors.KinveyError('Unable to pull data. You must push the pending sync items first.', 'Call store.push() to push the pending sync items before you pull new data.');\n        }\n\n        return _get(Object.getPrototypeOf(SyncStore.prototype), 'find', _this9).call(_this9, query, options);\n      }).then(function (result) {\n        return result.networkPromise;\n      });\n\n      return promise;\n    }\n  }]);\n\n  return SyncStore;\n}(_cachestore.CacheStore);\n\n}).call(this,require('_process'))\n\n},{\"../aggregation\":18,\"../enums\":21,\"../errors\":22,\"../log\":24,\"../query\":27,\"../requests/local\":40,\"./cachestore\":45,\"_process\":229,\"babybird\":4,\"url\":244}],50:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../errors');\n\nvar _networkstore = require('./networkstore');\n\nvar _enums = require('../enums');\n\nvar _network = require('../requests/network');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nvar rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\n\nvar UserStore = exports.UserStore = function (_NetworkStore) {\n  _inherits(UserStore, _NetworkStore);\n\n  function UserStore() {\n    _classCallCheck(this, UserStore);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(UserStore).apply(this, arguments));\n  }\n\n  _createClass(UserStore, [{\n    key: 'save',\n    value: function save(user) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (!user) {\n          throw new _errors.KinveyError('No user was provided to be updated.');\n        }\n\n        if ((0, _isArray2.default)(user)) {\n          throw new _errors.KinveyError('Please only update one user at a time.', user);\n        }\n\n        if (!user[idAttribute]) {\n          throw new _errors.KinveyError('User must have an _id.');\n        }\n\n        if (options._identity) {\n          var socialIdentity = user[socialIdentityAttribute];\n          if (socialIdentity) {\n            for (var identity in socialIdentity) {\n              if (socialIdentity.hasOwnProperty(identity)) {\n                if (socialIdentity[identity] && options._identity !== identity) {\n                  delete socialIdentity[identity];\n                }\n              }\n            }\n          }\n        }\n\n        return _get(Object.getPrototypeOf(UserStore.prototype), 'save', _this2).call(_this2, user, options);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'exists',\n    value: function exists(username, options) {\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/check-username-exists'\n        }),\n        properties: options.properties,\n        data: { username: username },\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data.usernameExists;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'restore',\n    value: function restore(id) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.Master,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/id'\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }, {\n    key: '_pathname',\n\n    /**\n     * The pathname for the store.\n     *\n     * @return  {string}   Pathname\n     */\n    get: function get() {\n      return '/' + usersNamespace + '/' + this.client.appKey;\n    }\n  }]);\n\n  return UserStore;\n}(_networkstore.NetworkStore);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../requests/network\":41,\"./networkstore\":48,\"_process\":229,\"babybird\":4,\"lodash/isArray\":195,\"url\":244}],51:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sync = undefined;\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _datastore = require('./stores/datastore');\n\nvar _query = require('./query');\n\nvar _enums = require('./enums');\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar enabled = process.env.KINVEY_SYNC_DEFAULT_STATE || true;\n\nvar Sync = {\n  isEnabled: function isEnabled() {\n    return enabled;\n  },\n  enable: function enable() {\n    enabled = true;\n  },\n  disable: function disable() {\n    enabled = false;\n  },\n  count: function count(query, options) {\n    var syncStore = _datastore.DataStore.getInstance(syncCollectionName, _enums.DataStoreType.Sync);\n    var promise = syncStore.find(query, options).then(function (syncData) {\n      return (0, _reduce2.default)(syncData, function (result, data) {\n        return result + data.size;\n      }, 0);\n    });\n    return promise;\n  },\n  push: function push(options) {\n    var syncStore = _datastore.DataStore.getInstance(syncCollectionName, _enums.DataStoreType.Sync);\n    var query = new _query.Query();\n    query.greaterThan('size', 0);\n    var promise = syncStore.find(query, options).then(function (syncData) {\n      var promises = syncData.map(function (data) {\n        var store = _datastore.DataStore.getInstance(data[idAttribute], _enums.DataStoreType.Sync);\n        return store.push();\n      });\n      return _babybird2.default.all(promises);\n    });\n    return promise;\n  },\n  sync: function sync() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var syncStore = _datastore.DataStore.getInstance(syncCollectionName, _enums.DataStoreType.Sync);\n    var promise = syncStore.find(null, options).then(function (syncData) {\n      var promises = syncData.map(function (data) {\n        var store = _datastore.DataStore.getInstance(data[idAttribute], _enums.DataStoreType.Sync);\n        return store.sync();\n      });\n      return _babybird2.default.all(promises);\n    });\n    return promise;\n  }\n};\n\nexports.Sync = Sync;\n\n}).call(this,require('_process'))\n\n},{\"./enums\":21,\"./query\":27,\"./stores/datastore\":46,\"_process\":229,\"babybird\":4,\"lodash/reduce\":218}],52:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.User = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _client = require('./client');\n\nvar _query = require('./query');\n\nvar _acl = require('./acl');\n\nvar _metadata = require('./metadata');\n\nvar _errors = require('./errors');\n\nvar _mic = require('./mic');\n\nvar _enums = require('./enums');\n\nvar _datastore = require('./stores/datastore');\n\nvar _network = require('./requests/network');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nvar usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nvar rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nvar socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nvar usernameAttribute = process.env.KINVEY_USERNAME_ATTRIBUTE || 'username';\nvar emailAttribute = process.env.KINVEY_EMAIL_ATTRIBUTE || 'email';\nvar supportedIdentities = ['facebook', 'google', 'linkedIn'];\nvar hello = void 0;\n\nif (typeof window !== 'undefined') {\n  hello = require('hellojs');\n}\n\n/**\n * The User class is used to represent a single user on the Kinvey platform.\n * Use the user class to manage the active user lifecycle and perform user operations.\n */\n\nvar User = exports.User = function () {\n  /**\n   * Create a new instance of a User.\n   *\n   * @param  {Object}   [data={}]    Data for the user.\n   * @return {User}                  User\n   *\n   * @example\n   * var user = new User();\n   */\n\n  function User() {\n    var data = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, User);\n\n    /**\n     * The users data.\n     *\n     * @type {Object}\n     */\n    this.data = data;\n\n    /**\n     * @private\n     * The client used by this user.\n     *\n     * @type {Client}\n     */\n    this.client = _client.Client.sharedInstance();\n  }\n\n  /**\n   * The _id for the user.\n   *\n   * @return {?string} _id\n   *\n   * @example\n   * var _id = user._id;\n   */\n\n\n  _createClass(User, [{\n    key: 'setAsActiveUser',\n\n\n    /**\n     * Set this user as the active user.\n     *\n     * @return {Promise<User>}  The active user.\n     *\n     * @example\n     * var promise = user.setAsActiveUser();\n     * promise.then(function(activeUser) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function setAsActiveUser() {\n      return User.setActiveUser(this, this.client);\n    }\n\n    /**\n     * Checks if this user is the active user.\n     *\n     * @return {Promise<Boolean>} True or false if this user is the active user.\n     *\n     * @example\n     * var promise = user.isActiveUser();\n     * promise.then(function(isActiveUser) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      var activeUser = User.getActiveUser(this.client);\n\n      if (activeUser && activeUser._id === this._id) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'login',\n\n\n    /**\n     * Login using a username or password.\n     *\n     * @param  {string|Object}      usernameOrData    Username or an object with username\n     *                                                and password properties.\n     * @param  {string}             [password]        Users password.\n     * @param  {Object}             [options={}]      Options\n     * @return {Promise<User>}                        The logged in user.\n     *\n     * @example\n     * var promise = user.login('username', 'password');\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function login(usernameOrData, password) {\n      var _this = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      if (!(0, _isObject2.default)(usernameOrData)) {\n        usernameOrData = {\n          username: usernameOrData,\n          password: password\n        };\n      }\n\n      if (!usernameOrData._socialIdentity) {\n        if (usernameOrData.username) {\n          usernameOrData.username = String(usernameOrData.username).trim();\n        }\n\n        if (usernameOrData.password) {\n          usernameOrData.password = String(usernameOrData.password).trim();\n        }\n      }\n\n      var isActiveUser = this.isActive();\n      if (isActiveUser) {\n        return _babybird2.default.reject(new _errors.ActiveUserError('This user is already the active user.'));\n      }\n\n      var activeUser = User.getActiveUser(this.client);\n      if (activeUser) {\n        return _babybird2.default.reject(new _errors.ActiveUserError('An active user already exists. ' + 'Please logout the active user before you login.'));\n      }\n\n      if ((!usernameOrData.username || usernameOrData.username === '' || !usernameOrData.password || usernameOrData.password === '') && !usernameOrData[socialIdentityAttribute]) {\n        return _babybird2.default.reject(new _errors.KinveyError('Username and/or password missing. ' + 'Please provide both a username and password to login.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/login'\n        }),\n        data: usernameOrData,\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        _this.data = response.data;\n        return _this.setAsActiveUser();\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'loginWithIdentity',\n    value: function loginWithIdentity(identity, token, options) {\n      var data = { _socialIdentity: {} };\n      data._socialIdentity[identity] = token;\n      return this.login(data, options);\n    }\n  }, {\n    key: 'loginWithMIC',\n\n\n    /* eslint-disable max-len */\n    /**\n     * Login using Mobile Identity Connect.\n     *\n     * @param  {string}                 redirectUri                                                         The redirect uri used\n     *                                                                                                      for MIC logins.\n     * @param  {AuthorizationGrant}     [authorizationGrant=AuthoizationGrant.AuthorizationCodeLoginPage]   MIC authorization grant to use.\n     * @param  {Object}                 [options={}]                                                        Options\n     * @return {Promise<User>}                                                                              The logged in user.\n     *\n     * @example\n     * var promise = user.loginWithMIC('http://example.com');\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    /* eslint-enable max-len */\n    value: function loginWithMIC(redirectUri, authorizationGrant) {\n      var _this2 = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var mic = new _mic.MobileIdentityConnect(this.client);\n      return mic.login(redirectUri, authorizationGrant, options).then(function (token) {\n        options.redirectUri = redirectUri;\n        options.client = (0, _result2.default)(mic.client, 'toJSON', mic.client);\n        return _this2.connect(_mic.MobileIdentityConnect.identity, token, options);\n      });\n    }\n\n    /**\n     * Logout the user. If the user was the active user then the active user will be set to null.\n     *\n     * @param  {Object}         [options={}]    Options\n     * @return {Promise<User>}                  The logged out user.\n     *\n     * @example\n     * var promise = user.logout();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'logout',\n    value: function logout() {\n      var _this3 = this;\n\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var isActive = this.isActive();\n\n      if (!isActive) {\n        return _babybird2.default.resolve();\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.Session,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + usersNamespace + '/' + this.client.appKey + '/_logout'\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().catch(function () {\n        return null;\n      }).then(function () {\n        var isActive = _this3.isActive();\n        if (isActive) {\n          return User.setActiveUser(null, _this3.client);\n        }\n      }).then(function () {\n        return _this3;\n      });\n\n      return promise;\n    }\n\n    /**\n     * @private\n     * Returns true or false if identity connect is supported.\n     *\n     * @return {Boolean}  True or false if identity connect is supported.\n     *\n     * @example\n     * var isIdentitySupported = user.isIdentitySupported('identity');\n     */\n\n  }, {\n    key: 'connectWithIdentity',\n\n\n    /* eslint-disable max-len */\n    /**\n     * Connect using an identity (Facebook, Google, LinkedIn etc.).\n     *\n     * @param  {SocialIdentity|string}         identity                                Identity used to connect the user.\n     * @param  {Object}                        [options={}]                            Options\n     * @param  {string}                        [options.collectionName='Identities']   Collection name to use to lookup credentials\n     *                                                                                 for the identity.\n     * @return {Promise<User>}                                                         The connected user.\n     *\n     * @example\n     * var promise = user.connectWithIdentity(SocialIdentity.Facebook);\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    /* eslint-enable max-len */\n    value: function connectWithIdentity(identity) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        collectionName: 'identities'\n      }, options);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (!identity) {\n          throw new _errors.KinveyError('An identity is required to connect the user.');\n        }\n\n        if (!User.isIdentitySupported(identity)) {\n          throw new _errors.KinveyError('Identity ' + identity + ' is not supported on this platform.');\n        }\n\n        var query = new _query.Query().equalTo('identity', identity);\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.GET,\n          authType: _enums.AuthType.None,\n          url: _url2.default.format({\n            protocol: _this4.client.protocol,\n            host: _this4.client.host,\n            pathname: '/' + appdataNamespace + '/' + _this4.client.appKey + '/' + options.collectionName\n          }),\n          query: query,\n          properties: options.properties,\n          timeout: options.timeout\n        });\n        return request.execute();\n      }).then(function (response) {\n        if (response.data.length === 1) {\n          var helloSettings = {};\n          helloSettings[identity] = response.data[0].key || response.data[0].appId || response.data[0].clientId;\n          hello.init(helloSettings);\n          return hello(identity).login();\n        }\n\n        throw new _errors.KinveyError('Unsupported identity.');\n      }).then(function () {\n        var authResponse = hello(identity).getAuthResponse();\n        return _this4.connect(identity, authResponse, options);\n      });\n\n      return promise;\n    }\n\n    /**\n     * @private\n     *\n     * Connects with the provided accessToken and identity.\n     *\n     * @param  {SocialIdentity|string}         identity      Identity used to connect the user.\n     * @param  {string}                        accessToken   Access token for the identity.\n     * @param  {number}                        [expiresIn]   Time in seconds for how long the access token is valid.\n     * @param  {Object}                        [options={}]  Options\n     * @return {Promise<User>}                               The connected user.\n     *\n     * @example\n     * var token = {\n     *   access_token: 'access_token',\n     *   refresh_token: 'refresh_token',\n     *   expires_in: 3600\n     * };\n     * var promise = user.connect(SocialIdentity.Facebook, token);\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connect',\n    value: function connect(identity, token) {\n      var _this5 = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var data = this.data;\n      var socialIdentity = data[socialIdentityAttribute] || {};\n      socialIdentity[identity] = token;\n      data[socialIdentityAttribute] = socialIdentity;\n      this.data = data;\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var isActive = _this5.isActive();\n\n        if (isActive) {\n          options._identity = identity;\n          return _this5.update(data, options);\n        }\n\n        return _this5.login(data, null, options);\n      }).catch(function (err) {\n        if (err instanceof _errors.NotFoundError) {\n          return _this5.signup(data, options).then(function () {\n            return _this5.connect(identity, token, options);\n          });\n        }\n\n        throw err;\n      }).then(function () {\n        _this5.client.setActiveSocialIdentity({\n          identity: identity,\n          token: _this5._socialIdentity[identity],\n          redirectUri: options.redirectUri,\n          client: options.client\n        });\n        return _this5;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect(identity) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var data = this.data;\n      var socialIdentity = data[socialIdentityAttribute] || {};\n      delete socialIdentity[identity];\n      data[socialIdentityAttribute] = socialIdentity;\n      this.data = data;\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (!_this6._id) {\n          return _this6;\n        }\n\n        return _this6.update(data, options);\n      }).then(function () {\n        var activeSocialIdentity = _this6.client.getActiveSocialIdentity();\n\n        if (activeSocialIdentity.identity === identity) {\n          _this6.client.setActiveSocialIdentity(null);\n        }\n\n        return _this6;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'signup',\n\n\n    /**\n     * Sign up. If options.state is set to true then the user\n     * will be set as the active user after succesfully signing up the\n     * user.\n     *\n     * @param  {User|Object}    data                    Users data.\n     * @param  {Object}         [options={}]            Options\n     * @param  {Boolean}        [options.state=true]    If set to true, the user will be\n     *                                                  set as the active user after successfully\n     *                                                  being signed up.\n     * @return {Promise<User>}                          The signed up user.\n     *\n     * @example\n     * var promise = user.signup({\n     *   username: 'admin',\n     *   password: 'admin'\n     * });\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function signup(data) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        state: true\n      }, options);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (options.state === true) {\n          var activeUser = User.getActiveUser(_this7.client);\n          if (activeUser) {\n            throw new _errors.ActiveUserError('An active user already exists. ' + 'Please logout the active user before you login.');\n          }\n        }\n      }).then(function () {\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.POST,\n          authType: _enums.AuthType.App,\n          url: _url2.default.format({\n            protocol: _this7.client.protocol,\n            host: _this7.client.host,\n            pathname: '/' + usersNamespace + '/' + _this7.client.appKey\n          }),\n          data: (0, _result2.default)(data, 'toJSON', data),\n          properties: options.properties,\n          timeout: options.timeout\n        });\n        return request.execute();\n      }).then(function (response) {\n        _this7.data = response.data;\n\n        if (options.state === true) {\n          return _this7.setAsActiveUser();\n        }\n\n        return _this7;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'signupWithIdentity',\n    value: function signupWithIdentity(identity, tokens, options) {\n      var data = { _socialIdentity: {} };\n      data._socialIdentity[identity] = tokens;\n      return this.signup(data, options);\n    }\n  }, {\n    key: 'update',\n    value: function update(data, options) {\n      var _this8 = this;\n\n      var userStore = _datastore.DataStore.getInstance(null, _datastore.DataStoreType.User);\n      return userStore.save(data, options).then(function (data) {\n        _this8.data = data;\n\n        if (_this8.isActive()) {\n          return _this8.setAsActiveUser();\n        }\n\n        return _this8;\n      });\n    }\n  }, {\n    key: 'me',\n    value: function me() {\n      var _this9 = this;\n\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Session,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + usersNamespace + '/' + this.client.appKey + '/_me'\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        _this9.data = response.data;\n\n        if (!_this9.authtoken) {\n          var activeUser = User.getActiveUser(_this9.client);\n\n          if (activeUser) {\n            _this9.authtoken = activeUser.authtoken;\n          }\n        }\n\n        return _this9.setAsActiveUser();\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'verifyEmail',\n    value: function verifyEmail() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/' + this.username + '/user-email-verification-initiate'\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'forgotUsername',\n    value: function forgotUsername() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/user-forgot-username'\n        }),\n        properties: options.properties,\n        data: { email: this.email },\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'resetPassword',\n    value: function resetPassword() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/' + this.username + '/user-password-reset-initiate'\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n\n    // refreshAuthToken(options = {}) {\n    //   const socialIdentity = this.data[socialIdentityAttribute];\n    //   const identity = socialIdentity.activeIdentity;\n    //   const token = socialIdentity[identity];\n    //   let promise;\n\n    //   switch (identity) {\n    //     case MobileIdentityConnect.identity:\n    //       const mic = new MobileIdentityConnect(this.client);\n    //       promise = mic.refresh(token, options);\n    //       break;\n    //     default:\n    //       promise = Promise.reject(new KinveyError(`Unable to refresh the auth token because ` +\n    //         `the ${identity} identity is not supported.`));\n    //   }\n\n    //   return promise.then(token => {\n    //     return this.connect(identity, token, options);\n    //   });\n    // }\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.data;\n    }\n  }, {\n    key: '_id',\n    get: function get() {\n      return this.data[idAttribute];\n    }\n\n    /**\n     * The _acl for the user.\n     *\n     * @return {Acl} _acl\n     *\n     * @example\n     * var _acl = user._acl;\n     */\n\n  }, {\n    key: '_acl',\n    get: function get() {\n      return new _acl.Acl(this.data);\n    }\n\n    /**\n     * The metadata for the user.\n     *\n     * @return {Metadata} metadata\n     *\n     * @example\n     * var metadata = user.metadata;\n     */\n\n  }, {\n    key: 'metadata',\n    get: function get() {\n      return new _metadata.Metadata(this.data);\n    },\n    set: function set(metadata) {\n      this.data[kmdAttribute] = (0, _result2.default)(metadata, 'toJSON', metadata);\n    }\n\n    /**\n     * The _kmd for the user.\n     *\n     * @return {Metadata} _kmd\n     *\n     * @example\n     * var _kmd = user._kmd;\n     */\n\n  }, {\n    key: '_kmd',\n    get: function get() {\n      return this.metadata;\n    },\n    set: function set(kmd) {\n      this.metadata = kmd;\n    }\n  }, {\n    key: '_socialIdentity',\n    get: function get() {\n      return this.data[socialIdentityAttribute];\n    }\n\n    /**\n     * The auth token for the user.\n     *\n     * @return {?string} Auth token\n     *\n     * @example\n     * var authtoken = user.authtoken;\n     */\n\n  }, {\n    key: 'authtoken',\n    get: function get() {\n      return this.metadata.authtoken;\n    }\n\n    /**\n     * Set the auth token for the user.\n     *\n     * @param  {?string} authtoken Auth token\n     *\n     * @example\n     * user.authtoken = 'authtoken';\n     */\n    ,\n    set: function set(authtoken) {\n      var metadata = this.metadata;\n      metadata.authtoken = authtoken;\n      this.metadata = metadata;\n    }\n\n    /**\n     * The username for the user.\n     *\n     * @return {?string} Username\n     *\n     * @example\n     * var username = user.username;\n     */\n\n  }, {\n    key: 'username',\n    get: function get() {\n      return this.data[usernameAttribute];\n    }\n\n    /**\n     * The email for the user.\n     *\n     * @return {?string} Email\n     *\n     * @example\n     * var email = user.email;\n     */\n\n  }, {\n    key: 'email',\n    get: function get() {\n      return this.data[emailAttribute];\n    }\n  }, {\n    key: '_pathname',\n    get: function get() {\n      return '/' + usersNamespace + '/' + this.client.appKey;\n    }\n\n    /**\n     * Gets the active user. You can optionally provide a client\n     * to use to lookup the active user.\n     *\n     * @param  {Client}           [client=Client.sharedInstance()]   Client to use to set the active user.\n     * @return {Promise<User>}                                       The active user on the client. The\n     *                                                               active user could be null if one does\n     *                                                               not exist.\n     *\n     * @example\n     * var _id = user._id;\n     */\n\n  }], [{\n    key: 'getActiveUser',\n    value: function getActiveUser() {\n      var client = arguments.length <= 0 || arguments[0] === undefined ? _client.Client.sharedInstance() : arguments[0];\n\n      var data = client.getActiveUserData();\n      var user = null;\n\n      if (data) {\n        user = new User(data);\n        user.client = client;\n      }\n\n      return user;\n    }\n\n    /**\n     * Sets the active user. You can optionally provide a client to\n     * set the active user on. Only one active user per client is\n     * allowed.\n     *\n     * @param  {?(User|Object)}      [user]                               User to set as the active user.\n     * @param  {Client}              [client=Client.sharedInstance()]     The client to use to set the active user on.\n     * @return {Promise<User>}                                            The active user on the client. The active user\n     *                                                                    could be null if one does not exist.\n     *\n     * @example\n     * var user = new User();\n     * var promise = User.setActiveUser(user);\n     * promise.then(function(activeUser) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'setActiveUser',\n    value: function setActiveUser(user) {\n      var client = arguments.length <= 1 || arguments[1] === undefined ? _client.Client.sharedInstance() : arguments[1];\n\n      var data = (0, _result2.default)(user, 'toJSON', user);\n      client.setActiveUserData(data);\n      return User.getActiveUser(client);\n    }\n  }, {\n    key: 'login',\n    value: function login(usernameOrData, password, options) {\n      var user = new User();\n      return user.login(usernameOrData, password, options);\n    }\n  }, {\n    key: 'loginWithIdentity',\n    value: function loginWithIdentity(identity, tokens, options) {\n      var user = new User();\n      return user.loginWithIdentity(identity, tokens, options);\n    }\n  }, {\n    key: 'loginWithMIC',\n    value: function loginWithMIC(redirectUri, authorizationGrant, options) {\n      var user = new User();\n      return user.loginWithMIC(redirectUri, authorizationGrant, options);\n    }\n  }, {\n    key: 'isIdentitySupported',\n    value: function isIdentitySupported(identity) {\n      return hello && supportedIdentities.indexOf(identity) !== -1;\n    }\n\n    /**\n     * Connect using Facebook.\n     *\n     * @param  {Object}         [options={}]  Options\n     * @return {Promise<User>}                The connected user.\n     *\n     * @example\n     * var promise = user.connectWithFacebook();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connectWithFacebook',\n    value: function connectWithFacebook() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return User.connectWithIdentity(_enums.SocialIdentity.Facebook, options);\n    }\n\n    /**\n     * Connect using Google.\n     *\n     * @param  {Object}         [options={}]  Options\n     * @return {Promise<User>}                The connected user.\n     *\n     * @example\n     * var promise = user.connectWithGoogle();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connectWithGoogle',\n    value: function connectWithGoogle() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return User.connectWithIdentity(_enums.SocialIdentity.Google, options);\n    }\n\n    /**\n     * Connect using LinkedIn.\n     *\n     * @param  {Object}         [options={}]  Options\n     * @return {Promise<User>}                The connected user.\n     *\n     * @example\n     * var promise = user.connectWithLinkedIn();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connectWithLinkedIn',\n    value: function connectWithLinkedIn() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return User.connectWithIdentity(_enums.SocialIdentity.LinkedIn, options);\n    }\n  }, {\n    key: 'connectWithIdentity',\n    value: function connectWithIdentity(identity, options) {\n      var user = new User();\n      return user.connectWithIdentity(identity, options);\n    }\n  }, {\n    key: 'signup',\n    value: function signup(data, options) {\n      var user = new User();\n      return user.signup(data, options);\n    }\n  }, {\n    key: 'signupWithIdentity',\n    value: function signupWithIdentity(identity, tokens, options) {\n      var user = new User();\n      return user.signupWithIdentity(identity, tokens, options);\n    }\n  }]);\n\n  return User;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./acl\":17,\"./client\":19,\"./enums\":21,\"./errors\":22,\"./metadata\":25,\"./mic\":26,\"./query\":27,\"./requests/network\":41,\"./stores/datastore\":46,\"_process\":229,\"babybird\":4,\"hellojs\":11,\"lodash/assign\":184,\"lodash/isObject\":204,\"lodash/result\":220,\"url\":244}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Device = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _object = require('./object');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @private\n */\n\nvar Device = exports.Device = function () {\n  function Device() {\n    _classCallCheck(this, Device);\n  }\n\n  _createClass(Device, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      throw new Error('method unsupported');\n    }\n  }]);\n\n  return Device;\n}();\n\nDevice.use = (0, _object.use)(['toJSON']);\n\n},{\"./object\":54}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.nested = nested;\nexports.isDefined = isDefined;\nexports.use = use;\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @private\n */\nfunction nested(obj, dotProperty, value) {\n  if (!dotProperty) {\n    obj = value ? value : obj;\n    return obj;\n  }\n\n  var parts = dotProperty.split('.');\n  var current = parts.shift();\n  while (current && obj) {\n    obj = obj[current];\n    current = parts.shift();\n  }\n\n  return value ? value : obj;\n}\n\n/**\n * @private\n */\nfunction isDefined(obj) {\n  return obj !== undefined && obj !== null;\n}\n\n/**\n * @private\n */\nfunction use(nsInterface) {\n  return function () {\n    var _this = this;\n\n    var adapter = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    (0, _forEach2.default)(nsInterface, function (methodName) {\n      if ((0, _isFunction2.default)(adapter[methodName])) {\n        _this.prototype[methodName] = function () {\n          return adapter[methodName].apply(this, arguments);\n        };\n      }\n    });\n  };\n}\n\n},{\"lodash/forEach\":190,\"lodash/isFunction\":200}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Popup = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = require('events');\n\nvar _object = require('./object');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar Popup = exports.Popup = function (_EventEmitter) {\n  _inherits(Popup, _EventEmitter);\n\n  function Popup() {\n    var url = arguments.length <= 0 || arguments[0] === undefined ? '/' : arguments[0];\n\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Popup).call(this));\n\n    _this.url = url;\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: 'open',\n    value: function open() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'loadHandler',\n    value: function loadHandler() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'clickHandler',\n    value: function clickHandler() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'closeHandler',\n    value: function closeHandler() {\n      throw new Error('method unsupported');\n    }\n  }]);\n\n  return Popup;\n}(_events.EventEmitter);\n\nPopup.use = (0, _object.use)(['open', 'close', 'loadHandler', 'clickHandler', 'closeHandler']);\n\n},{\"./object\":54,\"events\":8}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.byteCount = byteCount;\nexports.randomString = randomString;\n\nvar _uid = require('uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @private\n */\nfunction byteCount(str) {\n  var count = 0;\n  var stringLength = str.length;\n  str = String(str || '');\n\n  for (var i = 0; i < stringLength; i++) {\n    var partCount = encodeURI(str[i]).split('%').length;\n    count += partCount === 1 ? 1 : partCount - 1;\n  }\n\n  return count;\n}\n\nfunction randomString(size) {\n  var prefix = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n  return '' + prefix + (0, _uid2.default)(size);\n}\n\n},{\"uid\":242}],57:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar stub = require('./stub');\nvar tracking = require('./tracking');\nvar ls = 'localStorage' in global && global.localStorage ? global.localStorage : stub;\n\nfunction accessor (key, value) {\n  if (arguments.length === 1) {\n    return get(key);\n  }\n  return set(key, value);\n}\n\nfunction get (key) {\n  return JSON.parse(ls.getItem(key));\n}\n\nfunction set (key, value) {\n  try {\n    ls.setItem(key, JSON.stringify(value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction remove (key) {\n  return ls.removeItem(key);\n}\n\nfunction clear () {\n  return ls.clear();\n}\n\naccessor.set = set;\naccessor.get = get;\naccessor.remove = remove;\naccessor.clear = clear;\naccessor.on = tracking.on;\naccessor.off = tracking.off;\n\nmodule.exports = accessor;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./stub\":58,\"./tracking\":59}],58:[function(require,module,exports){\n'use strict';\n\nvar ms = {};\n\nfunction getItem (key) {\n  return key in ms ? ms[key] : null;\n}\n\nfunction setItem (key, value) {\n  ms[key] = value;\n  return true;\n}\n\nfunction removeItem (key) {\n  var found = key in ms;\n  if (found) {\n    return delete ms[key];\n  }\n  return false;\n}\n\nfunction clear () {\n  ms = {};\n  return true;\n}\n\nmodule.exports = {\n  getItem: getItem,\n  setItem: setItem,\n  removeItem: removeItem,\n  clear: clear\n};\n\n},{}],59:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar listeners = {};\nvar listening = false;\n\nfunction listen () {\n  if (global.addEventListener) {\n    global.addEventListener('storage', change, false);\n  } else if (global.attachEvent) {\n    global.attachEvent('onstorage', change);\n  } else {\n    global.onstorage = change;\n  }\n}\n\nfunction change (e) {\n  if (!e) {\n    e = global.event;\n  }\n  var all = listeners[e.key];\n  if (all) {\n    all.forEach(fire);\n  }\n\n  function fire (listener) {\n    listener(JSON.parse(e.newValue), JSON.parse(e.oldValue), e.url || e.uri);\n  }\n}\n\nfunction on (key, fn) {\n  if (listeners[key]) {\n    listeners[key].push(fn);\n  } else {\n    listeners[key] = [fn];\n  }\n  if (listening === false) {\n    listen();\n  }\n}\n\nfunction off (key, fn) {\n  var ns = listeners[key];\n  if (ns.length > 1) {\n    ns.splice(ns.indexOf(fn), 1);\n  } else {\n    listeners[key] = [];\n  }\n}\n\nmodule.exports = {\n  on: on,\n  off: off\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],60:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Creates an hash object.\n *\n * @private\n * @constructor\n * @returns {Object} Returns the new hash object.\n */\nfunction Hash() {}\n\n// Avoid inheriting from `Object.prototype` when possible.\nHash.prototype = nativeCreate ? nativeCreate(null) : objectProto;\n\nmodule.exports = Hash;\n\n},{\"./_nativeCreate\":174}],61:[function(require,module,exports){\nvar getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n\n},{\"./_getNative\":147,\"./_root\":176}],62:[function(require,module,exports){\nvar mapClear = require('./_mapClear'),\n    mapDelete = require('./_mapDelete'),\n    mapGet = require('./_mapGet'),\n    mapHas = require('./_mapHas'),\n    mapSet = require('./_mapSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction MapCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `MapCache`.\nMapCache.prototype.clear = mapClear;\nMapCache.prototype['delete'] = mapDelete;\nMapCache.prototype.get = mapGet;\nMapCache.prototype.has = mapHas;\nMapCache.prototype.set = mapSet;\n\nmodule.exports = MapCache;\n\n},{\"./_mapClear\":168,\"./_mapDelete\":169,\"./_mapGet\":170,\"./_mapHas\":171,\"./_mapSet\":172}],63:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Reflect = root.Reflect;\n\nmodule.exports = Reflect;\n\n},{\"./_root\":176}],64:[function(require,module,exports){\nvar getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n\n},{\"./_getNative\":147,\"./_root\":176}],65:[function(require,module,exports){\nvar MapCache = require('./_MapCache'),\n    cachePush = require('./_cachePush');\n\n/**\n *\n * Creates a set cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.push(values[index]);\n  }\n}\n\n// Add functions to the `SetCache`.\nSetCache.prototype.push = cachePush;\n\nmodule.exports = SetCache;\n\n},{\"./_MapCache\":62,\"./_cachePush\":125}],66:[function(require,module,exports){\nvar stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction Stack(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `Stack` cache.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n\n},{\"./_stackClear\":178,\"./_stackDelete\":179,\"./_stackGet\":180,\"./_stackHas\":181,\"./_stackSet\":182}],67:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n},{\"./_root\":176}],68:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n\n},{\"./_root\":176}],69:[function(require,module,exports){\nvar getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n\n},{\"./_getNative\":147,\"./_root\":176}],70:[function(require,module,exports){\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `Map#set` because it doesn't return the map instance in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\nmodule.exports = addMapEntry;\n\n},{}],71:[function(require,module,exports){\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  set.add(value);\n  return set;\n}\n\nmodule.exports = addSetEntry;\n\n},{}],72:[function(require,module,exports){\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n\n},{}],73:[function(require,module,exports){\n/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n\n},{}],74:[function(require,module,exports){\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n\n},{}],75:[function(require,module,exports){\nvar baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  return !!array.length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n\n},{\"./_baseIndexOf\":104}],76:[function(require,module,exports){\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n\n},{}],77:[function(require,module,exports){\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n},{}],78:[function(require,module,exports){\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n\n},{}],79:[function(require,module,exports){\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n\n},{}],80:[function(require,module,exports){\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check, else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n\n},{}],81:[function(require,module,exports){\nvar eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (typeof key == 'number' && value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignMergeValue;\n\n},{\"./eq\":187}],82:[function(require,module,exports){\nvar eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignValue;\n\n},{\"./eq\":187}],83:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the associative array.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction assocDelete(array, key) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = array.length - 1;\n  if (index == lastIndex) {\n    array.pop();\n  } else {\n    splice.call(array, index, 1);\n  }\n  return true;\n}\n\nmodule.exports = assocDelete;\n\n},{\"./_assocIndexOf\":86}],84:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the associative array value for `key`.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction assocGet(array, key) {\n  var index = assocIndexOf(array, key);\n  return index < 0 ? undefined : array[index][1];\n}\n\nmodule.exports = assocGet;\n\n},{\"./_assocIndexOf\":86}],85:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if an associative array value for `key` exists.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction assocHas(array, key) {\n  return assocIndexOf(array, key) > -1;\n}\n\nmodule.exports = assocHas;\n\n},{\"./_assocIndexOf\":86}],86:[function(require,module,exports){\nvar eq = require('./eq');\n\n/**\n * Gets the index at which the first occurrence of `key` is found in `array`\n * of key-value pairs.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n\n},{\"./eq\":187}],87:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the associative array `key` to `value`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction assocSet(array, key, value) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    array.push([key, value]);\n  } else {\n    array[index][1] = value;\n  }\n}\n\nmodule.exports = assocSet;\n\n},{\"./_assocIndexOf\":86}],88:[function(require,module,exports){\nvar baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n\n},{\"./_baseEach\":95}],89:[function(require,module,exports){\nvar copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n\n},{\"./_copyObject\":135,\"./keys\":212}],90:[function(require,module,exports){\nvar identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the array-like object.\n */\nfunction baseCastFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = baseCastFunction;\n\n},{\"./identity\":193}],91:[function(require,module,exports){\nvar isArray = require('./isArray'),\n    stringToPath = require('./_stringToPath');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction baseCastPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\nmodule.exports = baseCastPath;\n\n},{\"./_stringToPath\":183,\"./isArray\":195}],92:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseForOwn = require('./_baseForOwn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isHostObject = require('./_isHostObject'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\ncloneableTags[dateTag] = cloneableTags[float32Tag] =\ncloneableTags[float64Tag] = cloneableTags[int8Tag] =\ncloneableTags[int16Tag] = cloneableTags[int32Tag] =\ncloneableTags[mapTag] = cloneableTags[numberTag] =\ncloneableTags[objectTag] = cloneableTags[regexpTag] =\ncloneableTags[setTag] = cloneableTags[stringTag] =\ncloneableTags[symbolTag] = cloneableTags[uint8Tag] =\ncloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] =\ncloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        result = baseAssign(result, value);\n        return isFull ? copySymbols(value, result) : result;\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  // Recursively populate clone (susceptible to call stack limits).\n  (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return (isFull && !isArr) ? copySymbols(value, result) : result;\n}\n\nmodule.exports = baseClone;\n\n},{\"./_Stack\":66,\"./_arrayEach\":74,\"./_assignValue\":82,\"./_baseAssign\":89,\"./_baseForOwn\":100,\"./_cloneBuffer\":128,\"./_copyArray\":134,\"./_copySymbols\":137,\"./_getTag\":149,\"./_initCloneArray\":157,\"./_initCloneByTag\":158,\"./_initCloneObject\":159,\"./_isHostObject\":160,\"./isArray\":195,\"./isBuffer\":198,\"./isObject\":204}],93:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\nmodule.exports = baseCreate;\n\n},{\"./isObject\":204}],94:[function(require,module,exports){\nvar SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support for\n * excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n\n},{\"./_SetCache\":65,\"./_arrayIncludes\":75,\"./_arrayIncludesWith\":76,\"./_arrayMap\":77,\"./_baseUnary\":122,\"./_cacheHas\":124}],95:[function(require,module,exports){\nvar baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n\n},{\"./_baseForOwn\":100,\"./_createBaseEach\":140}],96:[function(require,module,exports){\n/**\n * The base implementation of methods like `_.find` and `_.findKey`, without\n * support for iteratee shorthands, which iterates over `collection` using\n * `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @param {boolean} [retKey] Specify returning the key of the found element instead of the element itself.\n * @returns {*} Returns the found element or its key, else `undefined`.\n */\nfunction baseFind(collection, predicate, eachFunc, retKey) {\n  var result;\n  eachFunc(collection, function(value, key, collection) {\n    if (predicate(value, key, collection)) {\n      result = retKey ? key : value;\n      return false;\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFind;\n\n},{}],97:[function(require,module,exports){\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n\n},{}],98:[function(require,module,exports){\nvar arrayPush = require('./_arrayPush'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && isArrayLikeObject(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n\n},{\"./_arrayPush\":78,\"./isArguments\":194,\"./isArray\":195,\"./isArrayLikeObject\":197}],99:[function(require,module,exports){\nvar createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n\n},{\"./_createBaseFor\":141}],100:[function(require,module,exports){\nvar baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n\n},{\"./_baseFor\":99,\"./keys\":212}],101:[function(require,module,exports){\nvar baseCastPath = require('./_baseCastPath'),\n    isKey = require('./_isKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path + ''] : baseCastPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n\n},{\"./_baseCastPath\":91,\"./_isKey\":163}],102:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n  // that are composed entirely of index properties, return `false` for\n  // `hasOwnProperty` checks of them.\n  return hasOwnProperty.call(object, key) ||\n    (typeof object == 'object' && key in object && getPrototypeOf(object) === null);\n}\n\nmodule.exports = baseHas;\n\n},{}],103:[function(require,module,exports){\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n\n},{}],104:[function(require,module,exports){\nvar indexOfNaN = require('./_indexOfNaN');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return indexOfNaN(array, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOf;\n\n},{\"./_indexOfNaN\":156}],105:[function(require,module,exports){\nvar baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObject = require('./isObject'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqual;\n\n},{\"./_baseIsEqualDeep\":106,\"./isObject\":204,\"./isObjectLike\":205}],106:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isHostObject = require('./_isHostObject'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      stack || (stack = new Stack);\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n\n},{\"./_Stack\":66,\"./_equalArrays\":142,\"./_equalByTag\":143,\"./_equalObjects\":144,\"./_getTag\":149,\"./_isHostObject\":160,\"./isArray\":195,\"./isTypedArray\":210}],107:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack,\n          result = customizer ? customizer(objValue, srcValue, key, object, source, stack) : undefined;\n\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n\n},{\"./_Stack\":66,\"./_baseIsEqual\":105}],108:[function(require,module,exports){\nvar baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  var type = typeof value;\n  if (type == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n\n},{\"./_baseMatches\":112,\"./_baseMatchesProperty\":113,\"./identity\":193,\"./isArray\":195,\"./property\":217}],109:[function(require,module,exports){\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = Object.keys;\n\n/**\n * The base implementation of `_.keys` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  return nativeKeys(Object(object));\n}\n\nmodule.exports = baseKeys;\n\n},{}],110:[function(require,module,exports){\nvar Reflect = require('./_Reflect'),\n    iteratorToArray = require('./_iteratorToArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar enumerate = Reflect ? Reflect.enumerate : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.keysIn` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  object = object == null ? object : Object(object);\n\n  var result = [];\n  for (var key in object) {\n    result.push(key);\n  }\n  return result;\n}\n\n// Fallback for IE < 9 with es6-shim.\nif (enumerate && !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf')) {\n  baseKeysIn = function(object) {\n    return iteratorToArray(enumerate(object));\n  };\n}\n\nmodule.exports = baseKeysIn;\n\n},{\"./_Reflect\":63,\"./_iteratorToArray\":167}],111:[function(require,module,exports){\nvar baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n\n},{\"./_baseEach\":95,\"./isArrayLike\":196}],112:[function(require,module,exports){\nvar baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value &&\n        (value !== undefined || (key in Object(object)));\n    };\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n\n},{\"./_baseIsMatch\":107,\"./_getMatchData\":146}],113:[function(require,module,exports){\nvar baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n\n},{\"./_baseIsEqual\":105,\"./get\":191,\"./hasIn\":192}],114:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isArray = require('./isArray'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  var props = (isArray(source) || isTypedArray(source))\n    ? undefined\n    : keysIn(source);\n\n  arrayEach(props || source, function(srcValue, key) {\n    if (props) {\n      key = srcValue;\n      srcValue = source[key];\n    }\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(object[key], srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  });\n}\n\nmodule.exports = baseMerge;\n\n},{\"./_Stack\":66,\"./_arrayEach\":74,\"./_assignMergeValue\":81,\"./_baseMergeDeep\":115,\"./isArray\":195,\"./isObject\":204,\"./isTypedArray\":210,\"./keysIn\":213}],115:[function(require,module,exports){\nvar assignMergeValue = require('./_assignMergeValue'),\n    baseClone = require('./_baseClone'),\n    copyArray = require('./_copyArray'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = object[key],\n      srcValue = source[key],\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    newValue = srcValue;\n    if (isArray(srcValue) || isTypedArray(srcValue)) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || (srcIndex && isFunction(objValue))) {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n      else {\n        newValue = objValue;\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  stack.set(srcValue, newValue);\n\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n  }\n  stack['delete'](srcValue);\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n\n},{\"./_assignMergeValue\":81,\"./_baseClone\":92,\"./_copyArray\":134,\"./isArguments\":194,\"./isArray\":195,\"./isArrayLikeObject\":197,\"./isFunction\":200,\"./isObject\":204,\"./isPlainObject\":206,\"./isTypedArray\":210,\"./toPlainObject\":224}],116:[function(require,module,exports){\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n\n},{}],117:[function(require,module,exports){\nvar baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n\n},{\"./_baseGet\":101}],118:[function(require,module,exports){\n/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n\n},{}],119:[function(require,module,exports){\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n\n},{}],120:[function(require,module,exports){\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n\n},{}],121:[function(require,module,exports){\nvar arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n * of key-value pairs for `object` corresponding to the property names of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the new array of key-value pairs.\n */\nfunction baseToPairs(object, props) {\n  return arrayMap(props, function(key) {\n    return [key, object[key]];\n  });\n}\n\nmodule.exports = baseToPairs;\n\n},{\"./_arrayMap\":77}],122:[function(require,module,exports){\n/**\n * The base implementation of `_.unary` without support for storing wrapper metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n\n},{}],123:[function(require,module,exports){\nvar arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n\n},{\"./_arrayMap\":77}],124:[function(require,module,exports){\nvar isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Checks if `value` is in `cache`.\n *\n * @private\n * @param {Object} cache The set cache to search.\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction cacheHas(cache, value) {\n  var map = cache.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    return hash[value] === HASH_UNDEFINED;\n  }\n  return map.has(value);\n}\n\nmodule.exports = cacheHas;\n\n},{\"./_isKeyable\":164}],125:[function(require,module,exports){\nvar isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the set cache.\n *\n * @private\n * @name push\n * @memberOf SetCache\n * @param {*} value The value to cache.\n */\nfunction cachePush(value) {\n  var map = this.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    hash[value] = HASH_UNDEFINED;\n  }\n  else {\n    map.set(value, HASH_UNDEFINED);\n  }\n}\n\nmodule.exports = cachePush;\n\n},{\"./_isKeyable\":164}],126:[function(require,module,exports){\n/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\nmodule.exports = checkGlobal;\n\n},{}],127:[function(require,module,exports){\nvar Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n\n},{\"./_Uint8Array\":68}],128:[function(require,module,exports){\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n\n},{}],129:[function(require,module,exports){\nvar addMapEntry = require('./_addMapEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    mapToArray = require('./_mapToArray');\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map) {\n  return arrayReduce(mapToArray(map), addMapEntry, new map.constructor);\n}\n\nmodule.exports = cloneMap;\n\n},{\"./_addMapEntry\":70,\"./_arrayReduce\":79,\"./_mapToArray\":173}],130:[function(require,module,exports){\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n\n},{}],131:[function(require,module,exports){\nvar addSetEntry = require('./_addSetEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    setToArray = require('./_setToArray');\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set) {\n  return arrayReduce(setToArray(set), addSetEntry, new set.constructor);\n}\n\nmodule.exports = cloneSet;\n\n},{\"./_addSetEntry\":71,\"./_arrayReduce\":79,\"./_setToArray\":177}],132:[function(require,module,exports){\nvar Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n\n},{\"./_Symbol\":67}],133:[function(require,module,exports){\nvar cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n\n},{\"./_cloneArrayBuffer\":127}],134:[function(require,module,exports){\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n\n},{}],135:[function(require,module,exports){\nvar copyObjectWith = require('./_copyObjectWith');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object) {\n  return copyObjectWith(source, props, object);\n}\n\nmodule.exports = copyObject;\n\n},{\"./_copyObjectWith\":136}],136:[function(require,module,exports){\nvar assignValue = require('./_assignValue');\n\n/**\n * This function is like `copyObject` except that it accepts a function to\n * customize copied values.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObjectWith(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\nmodule.exports = copyObjectWith;\n\n},{\"./_assignValue\":82}],137:[function(require,module,exports){\nvar copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n\n},{\"./_copyObject\":135,\"./_getSymbols\":148}],138:[function(require,module,exports){\nvar arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n\n},{\"./_arrayAggregator\":73,\"./_baseAggregator\":88,\"./_baseIteratee\":108,\"./isArray\":195}],139:[function(require,module,exports){\nvar isIterateeCall = require('./_isIterateeCall'),\n    rest = require('./rest');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = typeof customizer == 'function'\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n\n},{\"./_isIterateeCall\":162,\"./rest\":219}],140:[function(require,module,exports){\nvar isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n\n},{\"./isArrayLike\":196}],141:[function(require,module,exports){\n/**\n * Creates a base function for methods like `_.forIn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n\n},{}],142:[function(require,module,exports){\nvar arraySome = require('./_arraySome');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var index = -1,\n      isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      isUnordered = bitmask & UNORDERED_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(array, other);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isUnordered) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack);\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  return result;\n}\n\nmodule.exports = equalArrays;\n\n},{\"./_arraySome\":80}],143:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object) ? other != +other : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      // Recursively compare objects (susceptible to call stack limits).\n      return equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask | UNORDERED_COMPARE_FLAG, stack.set(object, other));\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n\n},{\"./_Symbol\":67,\"./_Uint8Array\":68,\"./_equalArrays\":142,\"./_mapToArray\":173,\"./_setToArray\":177}],144:[function(require,module,exports){\nvar baseHas = require('./_baseHas'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : baseHas(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  return result;\n}\n\nmodule.exports = equalObjects;\n\n},{\"./_baseHas\":102,\"./keys\":212}],145:[function(require,module,exports){\nvar baseProperty = require('./_baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n\n},{\"./_baseProperty\":116}],146:[function(require,module,exports){\nvar isStrictComparable = require('./_isStrictComparable'),\n    toPairs = require('./toPairs');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = toPairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n\n},{\"./_isStrictComparable\":166,\"./toPairs\":223}],147:[function(require,module,exports){\nvar isNative = require('./isNative');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n\n},{\"./isNative\":202}],148:[function(require,module,exports){\n/** Built-in value references. */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = getOwnPropertySymbols || function() {\n  return [];\n};\n\nmodule.exports = getSymbols;\n\n},{}],149:[function(require,module,exports){\nvar Map = require('./_Map'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect maps, sets, and weakmaps. */\nvar mapCtorString = Map ? funcToString.call(Map) : '',\n    setCtorString = Set ? funcToString.call(Set) : '',\n    weakMapCtorString = WeakMap ? funcToString.call(WeakMap) : '';\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction getTag(value) {\n  return objectToString.call(value);\n}\n\n// Fallback for IE 11 providing `toStringTag` values for maps, sets, and weakmaps.\nif ((Map && getTag(new Map) != mapTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : null,\n        ctorString = typeof Ctor == 'function' ? funcToString.call(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case mapCtorString: return mapTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n\n},{\"./_Map\":61,\"./_Set\":64,\"./_WeakMap\":69}],150:[function(require,module,exports){\nvar baseCastPath = require('./_baseCastPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isKey = require('./_isKey'),\n    isLength = require('./isLength'),\n    isString = require('./isString'),\n    last = require('./last'),\n    parent = require('./_parent');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  if (object == null) {\n    return false;\n  }\n  var result = hasFunc(object, path);\n  if (!result && !isKey(path)) {\n    path = baseCastPath(path);\n    object = parent(object, path);\n    if (object != null) {\n      path = last(path);\n      result = hasFunc(object, path);\n    }\n  }\n  var length = object ? object.length : undefined;\n  return result || (\n    !!length && isLength(length) && isIndex(path, length) &&\n    (isArray(object) || isString(object) || isArguments(object))\n  );\n}\n\nmodule.exports = hasPath;\n\n},{\"./_baseCastPath\":91,\"./_isIndex\":161,\"./_isKey\":163,\"./_parent\":175,\"./isArguments\":194,\"./isArray\":195,\"./isLength\":201,\"./isString\":208,\"./last\":214}],151:[function(require,module,exports){\nvar hashHas = require('./_hashHas');\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(hash, key) {\n  return hashHas(hash, key) && delete hash[key];\n}\n\nmodule.exports = hashDelete;\n\n},{\"./_hashHas\":153}],152:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(hash, key) {\n  if (nativeCreate) {\n    var result = hash[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(hash, key) ? hash[key] : undefined;\n}\n\nmodule.exports = hashGet;\n\n},{\"./_nativeCreate\":174}],153:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(hash, key) {\n  return nativeCreate ? hash[key] !== undefined : hasOwnProperty.call(hash, key);\n}\n\nmodule.exports = hashHas;\n\n},{\"./_nativeCreate\":174}],154:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction hashSet(hash, key, value) {\n  hash[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n}\n\nmodule.exports = hashSet;\n\n},{\"./_nativeCreate\":174}],155:[function(require,module,exports){\nvar baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isLength = require('./isLength'),\n    isString = require('./isString');\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\nmodule.exports = indexKeys;\n\n},{\"./_baseTimes\":120,\"./isArguments\":194,\"./isArray\":195,\"./isLength\":201,\"./isString\":208}],156:[function(require,module,exports){\n/**\n * Gets the index at which the first occurrence of `NaN` is found in `array`.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n */\nfunction indexOfNaN(array, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 0 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    var other = array[index];\n    if (other !== other) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = indexOfNaN;\n\n},{}],157:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n\n},{}],158:[function(require,module,exports){\nvar cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneMap = require('./_cloneMap'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSet = require('./_cloneSet'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n\n},{\"./_cloneArrayBuffer\":127,\"./_cloneMap\":129,\"./_cloneRegExp\":130,\"./_cloneSet\":131,\"./_cloneSymbol\":132,\"./_cloneTypedArray\":133}],159:[function(require,module,exports){\nvar baseCreate = require('./_baseCreate'),\n    isPrototype = require('./_isPrototype');\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototypeOf(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n\n},{\"./_baseCreate\":93,\"./_isPrototype\":165}],160:[function(require,module,exports){\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\nmodule.exports = isHostObject;\n\n},{}],161:[function(require,module,exports){\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n\n},{}],162:[function(require,module,exports){\nvar eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n\n},{\"./_isIndex\":161,\"./eq\":187,\"./isArrayLike\":196,\"./isObject\":204}],163:[function(require,module,exports){\nvar isArray = require('./isArray');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (typeof value == 'number') {\n    return true;\n  }\n  return !isArray(value) &&\n    (reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n      (object != null && value in Object(object)));\n}\n\nmodule.exports = isKey;\n\n},{\"./isArray\":195}],164:[function(require,module,exports){\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return type == 'number' || type == 'boolean' ||\n    (type == 'string' && value != '__proto__') || value == null;\n}\n\nmodule.exports = isKeyable;\n\n},{}],165:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n\n},{}],166:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n\n},{\"./isObject\":204}],167:[function(require,module,exports){\n/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\nmodule.exports = iteratorToArray;\n\n},{}],168:[function(require,module,exports){\nvar Hash = require('./_Hash'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': Map ? new Map : [],\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapClear;\n\n},{\"./_Hash\":60,\"./_Map\":61}],169:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocDelete = require('./_assocDelete'),\n    hashDelete = require('./_hashDelete'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapDelete(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashDelete(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map['delete'](key) : assocDelete(data.map, key);\n}\n\nmodule.exports = mapDelete;\n\n},{\"./_Map\":61,\"./_assocDelete\":83,\"./_hashDelete\":151,\"./_isKeyable\":164}],170:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocGet = require('./_assocGet'),\n    hashGet = require('./_hashGet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapGet(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashGet(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.get(key) : assocGet(data.map, key);\n}\n\nmodule.exports = mapGet;\n\n},{\"./_Map\":61,\"./_assocGet\":84,\"./_hashGet\":152,\"./_isKeyable\":164}],171:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocHas = require('./_assocHas'),\n    hashHas = require('./_hashHas'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapHas(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashHas(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.has(key) : assocHas(data.map, key);\n}\n\nmodule.exports = mapHas;\n\n},{\"./_Map\":61,\"./_assocHas\":85,\"./_hashHas\":153,\"./_isKeyable\":164}],172:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocSet = require('./_assocSet'),\n    hashSet = require('./_hashSet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache object.\n */\nfunction mapSet(key, value) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    hashSet(typeof key == 'string' ? data.string : data.hash, key, value);\n  } else if (Map) {\n    data.map.set(key, value);\n  } else {\n    assocSet(data.map, key, value);\n  }\n  return this;\n}\n\nmodule.exports = mapSet;\n\n},{\"./_Map\":61,\"./_assocSet\":87,\"./_hashSet\":154,\"./_isKeyable\":164}],173:[function(require,module,exports){\n/**\n * Converts `map` to an array.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n\n},{}],174:[function(require,module,exports){\nvar getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n\n},{\"./_getNative\":147}],175:[function(require,module,exports){\nvar baseSlice = require('./_baseSlice'),\n    get = require('./get');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length == 1 ? object : get(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n\n},{\"./_baseSlice\":119,\"./get\":191}],176:[function(require,module,exports){\n(function (global){\nvar checkGlobal = require('./_checkGlobal');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\nmodule.exports = root;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./_checkGlobal\":126}],177:[function(require,module,exports){\n/**\n * Converts `set` to an array.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n\n},{}],178:[function(require,module,exports){\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = { 'array': [], 'map': null };\n}\n\nmodule.exports = stackClear;\n\n},{}],179:[function(require,module,exports){\nvar assocDelete = require('./_assocDelete');\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocDelete(array, key) : data.map['delete'](key);\n}\n\nmodule.exports = stackDelete;\n\n},{\"./_assocDelete\":83}],180:[function(require,module,exports){\nvar assocGet = require('./_assocGet');\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocGet(array, key) : data.map.get(key);\n}\n\nmodule.exports = stackGet;\n\n},{\"./_assocGet\":84}],181:[function(require,module,exports){\nvar assocHas = require('./_assocHas');\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocHas(array, key) : data.map.has(key);\n}\n\nmodule.exports = stackHas;\n\n},{\"./_assocHas\":85}],182:[function(require,module,exports){\nvar MapCache = require('./_MapCache'),\n    assocSet = require('./_assocSet');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache object.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__,\n      array = data.array;\n\n  if (array) {\n    if (array.length < (LARGE_ARRAY_SIZE - 1)) {\n      assocSet(array, key, value);\n    } else {\n      data.array = null;\n      data.map = new MapCache(array);\n    }\n  }\n  var map = data.map;\n  if (map) {\n    map.set(key, value);\n  }\n  return this;\n}\n\nmodule.exports = stackSet;\n\n},{\"./_MapCache\":62,\"./_assocSet\":87}],183:[function(require,module,exports){\nvar toString = require('./toString');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nfunction stringToPath(string) {\n  var result = [];\n  toString(string).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = stringToPath;\n\n},{\"./toString\":225}],184:[function(require,module,exports){\nvar assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Assigns own enumerable properties of source objects to the destination\n * object. Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function Foo() {\n *   this.c = 3;\n * }\n *\n * function Bar() {\n *   this.e = 5;\n * }\n *\n * Foo.prototype.d = 4;\n * Bar.prototype.f = 6;\n *\n * _.assign({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3, 'e': 5 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n\n},{\"./_assignValue\":82,\"./_copyObject\":135,\"./_createAssigner\":139,\"./_isPrototype\":165,\"./isArrayLike\":196,\"./keys\":212}],185:[function(require,module,exports){\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var getter = _.constant(object);\n *\n * getter() === object;\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n\n},{}],186:[function(require,module,exports){\nvar baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last'),\n    rest = require('./rest');\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. Result values are chosen from the first array.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([3.1, 2.2, 1.3], [4.4, 2.5], Math.floor);\n * // => [3.1, 1.3]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = rest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, true), baseIteratee(iteratee))\n    : [];\n});\n\nmodule.exports = differenceBy;\n\n},{\"./_baseDifference\":94,\"./_baseFlatten\":98,\"./_baseIteratee\":108,\"./isArrayLikeObject\":197,\"./last\":214,\"./rest\":219}],187:[function(require,module,exports){\n/**\n * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n\n},{}],188:[function(require,module,exports){\nvar baseEach = require('./_baseEach'),\n    baseFind = require('./_baseFind'),\n    baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three arguments:\n * (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nfunction find(collection, predicate) {\n  predicate = baseIteratee(predicate, 3);\n  if (isArray(collection)) {\n    var index = baseFindIndex(collection, predicate);\n    return index > -1 ? collection[index] : undefined;\n  }\n  return baseFind(collection, predicate, baseEach);\n}\n\nmodule.exports = find;\n\n},{\"./_baseEach\":95,\"./_baseFind\":96,\"./_baseFindIndex\":97,\"./_baseIteratee\":108,\"./isArray\":195}],189:[function(require,module,exports){\nvar baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate) {\n  return (array && array.length)\n    ? baseFindIndex(array, baseIteratee(predicate, 3))\n    : -1;\n}\n\nmodule.exports = findIndex;\n\n},{\"./_baseFindIndex\":97,\"./_baseIteratee\":108}],190:[function(require,module,exports){\nvar arrayEach = require('./_arrayEach'),\n    baseCastFunction = require('./_baseCastFunction'),\n    baseEach = require('./_baseEach'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior use `_.forIn` or `_.forOwn`\n * for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(value) {\n *   console.log(value);\n * });\n * // => logs `1` then `2`\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => logs 'a' then 'b' (iteration order is not guaranteed)\n */\nfunction forEach(collection, iteratee) {\n  return (typeof iteratee == 'function' && isArray(collection))\n    ? arrayEach(collection, iteratee)\n    : baseEach(collection, baseCastFunction(iteratee));\n}\n\nmodule.exports = forEach;\n\n},{\"./_arrayEach\":74,\"./_baseCastFunction\":90,\"./_baseEach\":95,\"./isArray\":195}],191:[function(require,module,exports){\nvar baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined` the `defaultValue` is used in its place.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n\n},{\"./_baseGet\":101}],192:[function(require,module,exports){\nvar baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': _.create({ 'c': 3 }) }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b.c');\n * // => true\n *\n * _.hasIn(object, ['a', 'b', 'c']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n\n},{\"./_baseHasIn\":103,\"./_hasPath\":150}],193:[function(require,module,exports){\n/**\n * This method returns the first argument given to it.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n\n},{}],194:[function(require,module,exports){\nvar isArrayLikeObject = require('./isArrayLikeObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\nmodule.exports = isArguments;\n\n},{\"./isArrayLikeObject\":197}],195:[function(require,module,exports){\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n},{}],196:[function(require,module,exports){\nvar getLength = require('./_getLength'),\n    isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value)) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n\n},{\"./_getLength\":145,\"./isFunction\":200,\"./isLength\":201}],197:[function(require,module,exports){\nvar isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n\n},{\"./isArrayLike\":196,\"./isObjectLike\":205}],198:[function(require,module,exports){\nvar constant = require('./constant'),\n    root = require('./_root');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = (freeModule && freeModule.exports === freeExports)\n  ? freeExports\n  : undefined;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = !Buffer ? constant(false) : function(value) {\n  return value instanceof Buffer;\n};\n\nmodule.exports = isBuffer;\n\n},{\"./_root\":176,\"./constant\":185}],199:[function(require,module,exports){\nvar isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isFunction = require('./isFunction'),\n    isString = require('./isString');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty collection or object. A value is considered\n * empty if it's an `arguments` object, array, string, or jQuery-like collection\n * with a length of `0` or has no own enumerable properties.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || isString(value) ||\n        isFunction(value.splice) || isArguments(value))) {\n    return !value.length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n\n},{\"./isArguments\":194,\"./isArray\":195,\"./isArrayLike\":196,\"./isFunction\":200,\"./isString\":208}],200:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\nmodule.exports = isFunction;\n\n},{\"./isObject\":204}],201:[function(require,module,exports){\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n},{}],202:[function(require,module,exports){\nvar isFunction = require('./isFunction'),\n    isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns). */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(funcToString.call(value));\n  }\n  return isObjectLike(value) &&\n    (isHostObject(value) ? reIsNative : reIsHostCtor).test(value);\n}\n\nmodule.exports = isNative;\n\n},{\"./_isHostObject\":160,\"./isFunction\":200,\"./isObjectLike\":205}],203:[function(require,module,exports){\nvar isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && objectToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n\n},{\"./isObjectLike\":205}],204:[function(require,module,exports){\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n},{}],205:[function(require,module,exports){\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],206:[function(require,module,exports){\nvar isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n\n},{\"./_isHostObject\":160,\"./isObjectLike\":205}],207:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nfunction isRegExp(value) {\n  return isObject(value) && objectToString.call(value) == regexpTag;\n}\n\nmodule.exports = isRegExp;\n\n},{\"./isObject\":204}],208:[function(require,module,exports){\nvar isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n\n},{\"./isArray\":195,\"./isObjectLike\":205}],209:[function(require,module,exports){\nvar isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n\n},{\"./isObjectLike\":205}],210:[function(require,module,exports){\nvar isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n\n},{\"./isLength\":201,\"./isObjectLike\":205}],211:[function(require,module,exports){\nvar createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` through `iteratee`. The corresponding value\n * of each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  result[key] = value;\n});\n\nmodule.exports = keyBy;\n\n},{\"./_createAggregator\":138}],212:[function(require,module,exports){\nvar baseHas = require('./_baseHas'),\n    baseKeys = require('./_baseKeys'),\n    indexKeys = require('./_indexKeys'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  var isProto = isPrototype(object);\n  if (!(isProto || isArrayLike(object))) {\n    return baseKeys(object);\n  }\n  var indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  for (var key in object) {\n    if (baseHas(object, key) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(isProto && key == 'constructor')) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keys;\n\n},{\"./_baseHas\":102,\"./_baseKeys\":109,\"./_indexKeys\":155,\"./_isIndex\":161,\"./_isPrototype\":165,\"./isArrayLike\":196}],213:[function(require,module,exports){\nvar baseKeysIn = require('./_baseKeysIn'),\n    indexKeys = require('./_indexKeys'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  var index = -1,\n      isProto = isPrototype(object),\n      props = baseKeysIn(object),\n      propsLength = props.length,\n      indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if (!(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n\n},{\"./_baseKeysIn\":110,\"./_indexKeys\":155,\"./_isIndex\":161,\"./_isPrototype\":165}],214:[function(require,module,exports){\n/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n\n},{}],215:[function(require,module,exports){\nvar arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `curry`, `curryRight`, `drop`, `dropRight`, `every`, `fill`,\n * `invert`, `parseInt`, `random`, `range`, `rangeRight`, `slice`, `some`,\n * `sortBy`, `take`, `takeRight`, `template`, `trim`, `trimEnd`, `trimStart`,\n * and `words`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n\n},{\"./_arrayMap\":77,\"./_baseIteratee\":108,\"./_baseMap\":111,\"./isArray\":195}],216:[function(require,module,exports){\nvar baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable properties of source objects into the destination\n * object. Source properties that resolve to `undefined` are skipped if a\n * destination value exists. Array and plain object properties are merged\n * recursively.Other objects and value types are overridden by assignment.\n * Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var users = {\n *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n * };\n *\n * var ages = {\n *   'data': [{ 'age': 36 }, { 'age': 40 }]\n * };\n *\n * _.merge(users, ages);\n * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n\n},{\"./_baseMerge\":114,\"./_createAssigner\":139}],217:[function(require,module,exports){\nvar baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n\n},{\"./_baseProperty\":116,\"./_basePropertyDeep\":117,\"./_isKey\":163}],218:[function(require,module,exports){\nvar arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` through `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n\n},{\"./_arrayReduce\":79,\"./_baseEach\":95,\"./_baseIteratee\":108,\"./_baseReduce\":118,\"./isArray\":195}],219:[function(require,module,exports){\nvar apply = require('./_apply'),\n    toInteger = require('./toInteger');\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = rest;\n\n},{\"./_apply\":72,\"./toInteger\":221}],220:[function(require,module,exports){\nvar baseCastPath = require('./_baseCastPath'),\n    get = require('./get'),\n    isFunction = require('./isFunction'),\n    isKey = require('./_isKey'),\n    parent = require('./_parent');\n\n/**\n * This method is like `_.get` except that if the resolved value is a function\n * it's invoked with the `this` binding of its parent object and its result\n * is returned.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to resolve.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n *\n * _.result(object, 'a[0].b.c1');\n * // => 3\n *\n * _.result(object, 'a[0].b.c2');\n * // => 4\n *\n * _.result(object, 'a[0].b.c3', 'default');\n * // => 'default'\n *\n * _.result(object, 'a[0].b.c3', _.constant('default'));\n * // => 'default'\n */\nfunction result(object, path, defaultValue) {\n  if (!isKey(path, object)) {\n    path = baseCastPath(path);\n    var result = get(object, path);\n    object = parent(object, path);\n  } else {\n    result = object == null ? undefined : object[path];\n  }\n  if (result === undefined) {\n    result = defaultValue;\n  }\n  return isFunction(result) ? result.call(object) : result;\n}\n\nmodule.exports = result;\n\n},{\"./_baseCastPath\":91,\"./_isKey\":163,\"./_parent\":175,\"./get\":191,\"./isFunction\":200}],221:[function(require,module,exports){\nvar toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\nmodule.exports = toInteger;\n\n},{\"./toNumber\":222}],222:[function(require,module,exports){\nvar isFunction = require('./isFunction'),\n    isObject = require('./isObject');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n\n},{\"./isFunction\":200,\"./isObject\":204}],223:[function(require,module,exports){\nvar baseToPairs = require('./_baseToPairs'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable key-value pairs for `object` which\n * can be consumed by `_.fromPairs`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.toPairs(new Foo);\n * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n */\nfunction toPairs(object) {\n  return baseToPairs(object, keys(object));\n}\n\nmodule.exports = toPairs;\n\n},{\"./_baseToPairs\":121,\"./keys\":212}],224:[function(require,module,exports){\nvar copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable\n * properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n\n},{\"./_copyObject\":135,\"./keysIn\":213}],225:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (value == null) {\n    return '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toString;\n\n},{\"./_Symbol\":67,\"./isSymbol\":209}],226:[function(require,module,exports){\nvar baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = values;\n\n},{\"./_baseValues\":123,\"./keys\":212}],227:[function(require,module,exports){\n/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n(function (root, definition) {\r\n    \"use strict\";\r\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\r\n        module.exports = definition();\r\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\r\n        define(definition);\r\n    } else {\r\n        root.log = definition();\r\n    }\r\n}(this, function () {\r\n    \"use strict\";\r\n    var noop = function() {};\r\n    var undefinedType = \"undefined\";\r\n\r\n    function realMethod(methodName) {\r\n        if (typeof console === undefinedType) {\r\n            return false; // We can't build a real method without a console to log to\r\n        } else if (console[methodName] !== undefined) {\r\n            return bindMethod(console, methodName);\r\n        } else if (console.log !== undefined) {\r\n            return bindMethod(console, 'log');\r\n        } else {\r\n            return noop;\r\n        }\r\n    }\r\n\r\n    function bindMethod(obj, methodName) {\r\n        var method = obj[methodName];\r\n        if (typeof method.bind === 'function') {\r\n            return method.bind(obj);\r\n        } else {\r\n            try {\r\n                return Function.prototype.bind.call(method, obj);\r\n            } catch (e) {\r\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n                return function() {\r\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // these private functions always need `this` to be set properly\r\n\r\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n        return function () {\r\n            if (typeof console !== undefinedType) {\r\n                replaceLoggingMethods.call(this, level, loggerName);\r\n                this[methodName].apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    function replaceLoggingMethods(level, loggerName) {\r\n        /*jshint validthis:true */\r\n        for (var i = 0; i < logMethods.length; i++) {\r\n            var methodName = logMethods[i];\r\n            this[methodName] = (i < level) ?\r\n                noop :\r\n                this.methodFactory(methodName, level, loggerName);\r\n        }\r\n    }\r\n\r\n    function defaultMethodFactory(methodName, level, loggerName) {\r\n        /*jshint validthis:true */\r\n        return realMethod(methodName) ||\r\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n    }\r\n\r\n    var logMethods = [\r\n        \"trace\",\r\n        \"debug\",\r\n        \"info\",\r\n        \"warn\",\r\n        \"error\"\r\n    ];\r\n\r\n    function Logger(name, defaultLevel, factory) {\r\n      var self = this;\r\n      var currentLevel;\r\n      var storageKey = \"loglevel\";\r\n      if (name) {\r\n        storageKey += \":\" + name;\r\n      }\r\n\r\n      function persistLevelIfPossible(levelNum) {\r\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\r\n          // Use localStorage if available\r\n          try {\r\n              window.localStorage[storageKey] = levelName;\r\n              return;\r\n          } catch (ignore) {}\r\n\r\n          // Use session cookie as fallback\r\n          try {\r\n              window.document.cookie =\r\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n          } catch (ignore) {}\r\n      }\r\n\r\n      function getPersistedLevel() {\r\n          var storedLevel;\r\n\r\n          try {\r\n              storedLevel = window.localStorage[storageKey];\r\n          } catch (ignore) {}\r\n\r\n          if (typeof storedLevel === undefinedType) {\r\n              try {\r\n                  var cookie = window.document.cookie;\r\n                  var location = cookie.indexOf(\r\n                      encodeURIComponent(storageKey) + \"=\");\r\n                  if (location) {\r\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n                  }\r\n              } catch (ignore) {}\r\n          }\r\n\r\n          // If the stored level is not valid, treat it as if nothing was stored.\r\n          if (self.levels[storedLevel] === undefined) {\r\n              storedLevel = undefined;\r\n          }\r\n\r\n          return storedLevel;\r\n      }\r\n\r\n      /*\r\n       *\r\n       * Public API\r\n       *\r\n       */\r\n\r\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n          \"ERROR\": 4, \"SILENT\": 5};\r\n\r\n      self.methodFactory = factory || defaultMethodFactory;\r\n\r\n      self.getLevel = function () {\r\n          return currentLevel;\r\n      };\r\n\r\n      self.setLevel = function (level, persist) {\r\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n              level = self.levels[level.toUpperCase()];\r\n          }\r\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n              currentLevel = level;\r\n              if (persist !== false) {  // defaults to true\r\n                  persistLevelIfPossible(level);\r\n              }\r\n              replaceLoggingMethods.call(self, level, name);\r\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n                  return \"No console available for logging\";\r\n              }\r\n          } else {\r\n              throw \"log.setLevel() called with invalid level: \" + level;\r\n          }\r\n      };\r\n\r\n      self.setDefaultLevel = function (level) {\r\n          if (!getPersistedLevel()) {\r\n              self.setLevel(level, false);\r\n          }\r\n      };\r\n\r\n      self.enableAll = function(persist) {\r\n          self.setLevel(self.levels.TRACE, persist);\r\n      };\r\n\r\n      self.disableAll = function(persist) {\r\n          self.setLevel(self.levels.SILENT, persist);\r\n      };\r\n\r\n      // Initialize with the right level\r\n      var initialLevel = getPersistedLevel();\r\n      if (initialLevel == null) {\r\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n      }\r\n      self.setLevel(initialLevel, false);\r\n    }\r\n\r\n    /*\r\n     *\r\n     * Package-level API\r\n     *\r\n     */\r\n\r\n    var defaultLogger = new Logger();\r\n\r\n    var _loggersByName = {};\r\n    defaultLogger.getLogger = function getLogger(name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n        }\r\n\r\n        var logger = _loggersByName[name];\r\n        if (!logger) {\r\n          logger = _loggersByName[name] = new Logger(\r\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n        }\r\n        return logger;\r\n    };\r\n\r\n    // Grab the current global log variable in case of overwrite\r\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n    defaultLogger.noConflict = function() {\r\n        if (typeof window !== undefinedType &&\r\n               window.log === defaultLogger) {\r\n            window.log = _log;\r\n        }\r\n\r\n        return defaultLogger;\r\n    };\r\n\r\n    return defaultLogger;\r\n}));\r\n\n},{}],228:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n}).call(this,require('_process'))\n\n},{\"_process\":229}],229:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],230:[function(require,module,exports){\n(function (process){\nmodule.exports = process.env.PROMISE_QUEUE_COVERAGE ?\n    require('./lib-cov') :\n    require('./lib');\n\n}).call(this,require('_process'))\n\n},{\"./lib\":232,\"./lib-cov\":231,\"_process\":229}],231:[function(require,module,exports){\n\n},{}],232:[function(require,module,exports){\n/* global define, Promise */\n(function (root, factory) {\n    'use strict';\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\n        // CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else {\n        // Browser globals\n        root.Queue = factory();\n    }\n})\n(this, function () {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var LocalPromise = typeof Promise !== 'undefined' ? Promise : function () {\n        return {\n            then: function () {\n                throw new Error('Queue.configure() before use Queue');\n            }\n        };\n    };\n\n    var noop = function () {};\n\n    /**\n     * @param {*} value\n     * @returns {LocalPromise}\n     */\n    var resolveWith = function (value) {\n        if (value && typeof value.then === 'function') {\n            return value;\n        }\n\n        return new LocalPromise(function (resolve) {\n            resolve(value);\n        });\n    };\n\n    /**\n     * It limits concurrently executed promises\n     *\n     * @param {Number} [maxPendingPromises=Infinity] max number of concurrently executed promises\n     * @param {Number} [maxQueuedPromises=Infinity]  max number of queued promises\n     * @constructor\n     *\n     * @example\n     *\n     * var queue = new Queue(1);\n     *\n     * queue.add(function () {\n     *     // resolve of this promise will resume next request\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     *\n     * queue.add(function () {\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * // This request will be paused\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     */\n    function Queue(maxPendingPromises, maxQueuedPromises) {\n        this.pendingPromises = 0;\n        this.maxPendingPromises = typeof maxPendingPromises !== 'undefined' ? maxPendingPromises : Infinity;\n        this.maxQueuedPromises = typeof maxQueuedPromises !== 'undefined' ? maxQueuedPromises : Infinity;\n        this.queue = [];\n    }\n\n    /**\n     * Defines promise promiseFactory\n     * @param {Function} GlobalPromise\n     */\n    Queue.configure = function (GlobalPromise) {\n        LocalPromise = GlobalPromise;\n    };\n\n    /**\n     * @param {Function} promiseGenerator\n     * @return {LocalPromise}\n     */\n    Queue.prototype.add = function (promiseGenerator) {\n        var self = this;\n        return new LocalPromise(function (resolve, reject, notify) {\n            // Do not queue to much promises\n            if (self.queue.length >= self.maxQueuedPromises) {\n                reject(new Error('Queue limit reached'));\n                return;\n            }\n\n            // Add to queue\n            self.queue.push({\n                promiseGenerator: promiseGenerator,\n                resolve: resolve,\n                reject: reject,\n                notify: notify || noop\n            });\n\n            self._dequeue();\n        });\n    };\n\n    /**\n     * Number of simultaneously running promises (which are resolving)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getPendingLength = function () {\n        return this.pendingPromises;\n    };\n\n    /**\n     * Number of queued promises (which are waiting)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getQueueLength = function () {\n        return this.queue.length;\n    };\n\n    /**\n     * @returns {boolean} true if first item removed from queue\n     * @private\n     */\n    Queue.prototype._dequeue = function () {\n        var self = this;\n        if (this.pendingPromises >= this.maxPendingPromises) {\n            return false;\n        }\n\n        // Remove from queue\n        var item = this.queue.shift();\n        if (!item) {\n            return false;\n        }\n\n        try {\n            this.pendingPromises++;\n\n            resolveWith(item.promiseGenerator())\n            // Forward all stuff\n                .then(function (value) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should pass values\n                    item.resolve(value);\n                    self._dequeue();\n                }, function (err) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should not mask errors\n                    item.reject(err);\n                    self._dequeue();\n                }, function (message) {\n                    // It should pass notifications\n                    item.notify(message);\n                });\n        } catch (err) {\n            self.pendingPromises--;\n            item.reject(err);\n            self._dequeue();\n\n        }\n\n        return true;\n    };\n\n    return Queue;\n});\n\n},{}],233:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],234:[function(require,module,exports){\n'use strict';\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n\n},{\"./parse\":235,\"./stringify\":236}],235:[function(require,module,exports){\n'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000,\n    strictNullHandling: false,\n    plainObjects: false,\n    allowPrototypes: false,\n    allowDots: false\n};\n\ninternals.parseValues = function (str, options) {\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n\n            if (options.strictNullHandling) {\n                obj[Utils.decode(part)] = null;\n            }\n        } else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                obj[key] = [].concat(obj[key]).concat(val);\n            } else {\n                obj[key] = val;\n            }\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseObject = function (chain, val, options) {\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj;\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    } else {\n        obj = options.plainObjects ? Object.create(null) : {};\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        if (\n            !isNaN(index) &&\n            root !== cleanRoot &&\n            String(index) === cleanRoot &&\n            index >= 0 &&\n            (options.parseArrays && index <= options.arrayLimit)\n        ) {\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        } else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseKeys = function (givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^\\.\\[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1])) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1].replace(/\\[|\\]/g, ''))) {\n            if (!options.allowPrototypes) {\n                continue;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : internals.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : internals.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : internals.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n\n    if (\n        str === '' ||\n        str === null ||\n        typeof str === 'undefined'\n    ) {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj, options);\n    }\n\n    return Utils.compact(obj);\n};\n\n},{\"./utils\":237}],236:[function(require,module,exports){\n'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix) {\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix) {\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\ninternals.stringify = function (object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (Utils.isBuffer(obj)) {\n        obj = String(obj);\n    } else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        } else {\n            values = values.concat(internals.stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n    }\n\n    return keys.join(delimiter);\n};\n\n},{\"./utils\":237}],237:[function(require,module,exports){\n'use strict';\n\nvar hexTable = (function () {\n    var array = new Array(256);\n    for (var i = 0; i < 256; ++i) {\n        array[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();\n    }\n\n    return array;\n}());\n\nexports.arrayToObject = function (source, options) {\n    var obj = options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nexports.merge = function (target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            target[source] = true;\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = exports.arrayToObject(target, options);\n    }\n\n\treturn Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (Object.prototype.hasOwnProperty.call(acc, key)) {\n            acc[key] = exports.merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n\t\treturn acc;\n    }, mergeTarget);\n};\n\nexports.decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += (hexTable[0xF0 | (c >> 18)] + hexTable[0x80 | ((c >> 12) & 0x3F)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, references) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n\n    var refs = references || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0; i < obj.length; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (var j = 0; j < keys.length; ++j) {\n        var key = keys[j];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\nexports.isRegExp = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nexports.isBuffer = function (obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\n},{}],238:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n},{}],239:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n},{}],240:[function(require,module,exports){\n'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n},{\"./decode\":238,\"./encode\":239}],241:[function(require,module,exports){\n/*\n * Sift 3.x\n *\n * Copryright 2015, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\n(function() {\n\n  'use strict';\n\n  /**\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   */\n\n  function isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n\n  /**\n   */\n\n  function comparable(value) {\n    if (value instanceof Date) {\n      return value.getTime();\n    } else if (value instanceof Array) {\n      return value.map(comparable);\n    } else {\n      return value;\n    }\n  }\n\n  function get(obj, key) {\n    if (obj.get) return obj.get(key);\n    return obj[key];\n  }\n\n  /**\n   */\n\n  function or(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (validator(a, get(b,i))) return true;\n      return false;\n    }\n  }\n\n  /**\n   */\n\n  function and(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (!validator(a, get(b, i))) return false;\n      return true;\n    };\n  }\n\n  function validate(validator, b) {\n    return validator.v(validator.a, b);\n  }\n\n\n  var operator = {\n\n    /**\n     */\n\n    $eq: or(function(a, b) {\n      return a(b);\n    }),\n\n    /**\n     */\n\n    $ne: and(function(a, b) {\n      return !a(b);\n    }),\n\n    /**\n     */\n\n    $or: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return true;\n      return false;\n    },\n\n    /**\n     */\n\n    $gt: or(function(a, b) {\n      return sift.compare(comparable(b), a) > 0;\n    }),\n\n    /**\n     */\n\n    $gte: or(function(a, b) {\n      return sift.compare(comparable(b), a) >= 0;\n    }),\n\n    /**\n     */\n\n    $lt: or(function(a, b) {\n      return sift.compare(comparable(b), a) < 0;\n    }),\n\n    /**\n     */\n\n    $lte: or(function(a, b) {\n      return sift.compare(comparable(b), a) <= 0;\n    }),\n\n    /**\n     */\n\n    $mod: or(function(a, b) {\n      return b % a[0] == a[1];\n    }),\n\n    /**\n     */\n\n    $in: function(a, b) {\n\n      if (b instanceof Array) {\n        for (var i = b.length; i--;) {\n          if (~a.indexOf(comparable(get(b, i)))) return true;\n        }\n      } else {\n        return !!~a.indexOf(comparable(b));\n      }\n\n      return false;\n    },\n\n    /**\n     */\n\n    $nin: function(a, b) {\n      return !operator.$in(a, b);\n    },\n\n    /**\n     */\n\n    $not: function(a, b) {\n      return !validate(a, b);\n    },\n\n    /**\n     */\n\n    $type: function(a, b) {\n      return b != void 0 ? b instanceof a || b.constructor == a : false;\n     },\n\n    /**\n     */\n\n    $all: function(a, b) {\n      if (!b) b = [];\n      for (var i = a.length; i--;) {\n        if (!~comparable(b).indexOf(get(a, i))) return false;\n      }\n      return true;\n    },\n\n    /**\n     */\n\n    $size: function(a, b) {\n      return b ? a === b.length : false;\n    },\n\n    /**\n     */\n\n    $nor: function(a, b) {\n      // todo - this suffice? return !operator.$in(a)\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $and: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (!validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $regex: or(function(a, b) {\n      return typeof b === 'string' && a.test(b);\n    }),\n\n    /**\n     */\n\n    $where: function(a, b) {\n      return a.call(b, b);\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a, b) {\n      if (isArray(b)) return !!~search(b, a);\n      return validate(a, b);\n    },\n\n    /**\n     */\n\n    $exists: function(a, b) {\n      return (b != void 0) === a;\n    }\n  };\n\n  /**\n   */\n\n  var prepare = {\n\n    /**\n     */\n\n    $eq: function(a) {\n\n      if (a instanceof RegExp) {\n        return function(b) {\n          return typeof b === 'string' && a.test(b);\n        };\n      } else if (a instanceof Function) {\n        return a;\n      } else if (isArray(a) && !a.length) {\n        // Special case of a == []\n        return function(b) {\n          return (isArray(b) && !b.length);\n        };\n      } else if (a === null){\n        return function(b){\n          //will match both null and undefined\n          return b == null;\n        }\n      }\n\n      return function(b) {\n        return sift.compare(comparable(b), a) === 0;\n      };\n    },\n\n    /**\n     */\n\n    $ne: function(a) {\n      return prepare.$eq(a);\n    },\n\n    /**\n     */\n\n    $and: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $or: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $nor: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $not: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $regex: function(a, query) {\n      return new RegExp(a, query.$options);\n    },\n\n    /**\n     */\n\n    $where: function(a) {\n      return typeof a === 'string' ? new Function('obj', 'return ' + a) : a;\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $exists: function(a) {\n      return !!a;\n    }\n  };\n\n  /**\n   */\n\n  function search(array, validator) {\n\n    for (var i = 0; i < array.length; i++) {\n      if (validate(validator, get(array, i))) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   */\n\n  function createValidator(a, validate) {\n    return { a: a, v: validate };\n  }\n\n  /**\n   */\n\n  function nestedValidator(a, b) {\n    var values  = [];\n    findValues(b, a.k, 0, values);\n\n    if (values.length === 1) {\n      return validate(a.nv, values[0]);\n    }\n\n    return !!~search(values, a.nv);\n  }\n\n  /**\n   */\n\n  function findValues(current, keypath, index, values) {\n\n    if (index === keypath.length || current == void 0) {\n      values.push(current);\n      return;\n    }\n\n    var k = get(keypath, index);\n\n    // ensure that if current is an array, that the current key\n    // is NOT an array index. This sort of thing needs to work:\n    // sift({'foo.0':42}, [{foo: [42]}]);\n    if (isArray(current) && isNaN(Number(k))) {\n      for (var i = 0, n = current.length; i < n; i++) {\n        findValues(get(current, i), keypath, index, values);\n      }\n    } else {\n      findValues(get(current, k), keypath, index + 1, values);\n    }\n  }\n\n  /**\n   */\n\n  function createNestedValidator(keypath, a) {\n    return { a: { k: keypath, nv: a }, v: nestedValidator };\n  }\n\n  /**\n   * flatten the query\n   */\n\n  function parse(query) {\n    query = comparable(query);\n\n    if (!query || (query.constructor.toString() !== 'Object' &&\n        query.constructor.toString().replace(/\\n/g,'').replace(/ /g, '') !== 'functionObject(){[nativecode]}')) { // cross browser support\n      query = { $eq: query };\n    }\n\n    var validators = [];\n\n    for (var key in query) {\n      var a = query[key];\n\n      if (key === '$options') continue;\n\n      if (operator[key]) {\n        if (prepare[key]) a = prepare[key](a, query);\n        validators.push(createValidator(comparable(a), operator[key]));\n      } else {\n\n        if (key.charCodeAt(0) === 36) {\n          throw new Error('Unknown operation ' + key);\n        }\n\n        validators.push(createNestedValidator(key.split('.'), parse(a)));\n      }\n    }\n\n    return validators.length === 1 ? validators[0] : createValidator(validators, operator.$and);\n  }\n\n  /**\n   */\n\n  function createRootValidator(query, getter) {\n    var validator = parse(query);\n    if (getter) {\n      validator = {\n        a: validator,\n        v: function(a, b) {\n          return validate(a, getter(b));\n        }\n      };\n    }\n    return validator;\n  }\n\n  /**\n   */\n\n  function sift(query, array, getter) {\n\n    if (isFunction(array)) {\n      getter = array;\n      array  = void 0;\n    }\n\n    var validator = createRootValidator(query, getter);\n\n    function filter(b) {\n      return validate(validator, b);\n    }\n\n    if (array) {\n      return array.filter(filter);\n    }\n\n    return filter;\n  }\n\n  /**\n   */\n\n  sift.use = function(plugin) {\n    if (isFunction(plugin)) return plugin(sift);\n    for (var key in plugin) {\n      if (key.charCodeAt(0) === 36) operator[key] = plugin[key];\n    }\n  };\n\n  /**\n   */\n\n  sift.indexOf = function(query, array, getter) {\n    return search(array, createRootValidator(query, getter));\n  };\n\n  /**\n   */\n\n  sift.compare = function(a, b) {\n    if(a===b) return 0;\n    if(typeof a === typeof b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n    }\n  };\n\n  /* istanbul ignore next */\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = sift;\n  }\n\n  if (typeof window !== 'undefined') {\n    window.sift = sift;\n  }\n})();\n\n},{}],242:[function(require,module,exports){\n/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n\n},{}],243:[function(require,module,exports){\n// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n\n},{}],244:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n},{\"./util\":245,\"punycode\":233,\"querystring\":240}],245:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n},{}],246:[function(require,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],247:[function(require,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./support/isBuffer\":246,\"_process\":229,\"inherits\":14}],248:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"kinvey-angular-sdk\",\n  \"version\": \"3.0.0-beta.12\",\n  \"description\": \"Kinvey JavaScript SDK for AngularJS applications.\",\n  \"homepage\": \"http://www.kinvey.com\",\n  \"bugs\": {\n    \"url\": \"http://support.kinvey.com\"\n  },\n  \"licenses\": [\n    {\n      \"type\": \"Apache-2.0\",\n      \"url\": \"https://raw.github.com/Kinvey/kinvey-angular-sdk/master/LICENSE\"\n    }\n  ],\n  \"author\": \"Kinvey, Inc.\",\n  \"contributors\": [\n    \"Thomas Conner <thomas@kinvey.com>\"\n  ],\n  \"main\": \"./src/index.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git@github.com:Kinvey/kinvey-angular-sdk\"\n  },\n  \"scripts\": {},\n  \"dependencies\": {\n    \"kinvey-javascript-sdk-core\": \"3.0.0-beta.13\",\n    \"lodash\": \"^4.3.0\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"6.0.0-beta.6\",\n    \"babel-preset-es2015\": \"^6.0.0\",\n    \"babel-preset-stage-2\": \"^6.0.15\",\n    \"babelify\": \"^7.2.0\",\n    \"browserify\": \"^13.0.0\",\n    \"del\": \"^2.0.2\",\n    \"dotenv\": \"^2.0.0\",\n    \"envify\": \"^3.4.0\",\n    \"eslint-config-airbnb\": \"^6.0.0\",\n    \"eslint-plugin-react\": \"^4.2.3\",\n    \"exorcist\": \"^0.4.0\",\n    \"gulp\": \"^3.9.0\",\n    \"gulp-bump\": \"^1.0.0\",\n    \"gulp-eslint\": \"^2.0.0\",\n    \"gulp-git\": \"^1.7.0\",\n    \"gulp-if\": \"^2.0.0\",\n    \"gulp-plumber\": \"^1.0.1\",\n    \"gulp-prompt\": \"^0.1.2\",\n    \"gulp-rename\": \"^1.2.2\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.1\",\n    \"gulp-util\": \"^3.0.6\",\n    \"run-sequence\": \"^1.1.5\",\n    \"semver-regex\": \"^1.0.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"vinyl-transform\": \"^1.0.0\"\n  },\n  \"engines\": {\n    \"node\": \">=4.0\"\n  },\n  \"keywords\": [\n    \"Kinvey\",\n    \"JavaScript\",\n    \"Angular\"\n  ]\n}\n\n},{}],249:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DeviceAdapter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _package = require('../package.json');\n\nvar _package2 = _interopRequireDefault(_package);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DeviceAdapter = exports.DeviceAdapter = function () {\n  function DeviceAdapter() {\n    _classCallCheck(this, DeviceAdapter);\n  }\n\n  _createClass(DeviceAdapter, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      var userAgent = global.navigator.userAgent.toLowerCase();\n      var rChrome = /(chrome)\\/([\\w]+)/;\n      var rFirefox = /(firefox)\\/([\\w.]+)/;\n      var rIE = /(msie) ([\\w.]+)/i;\n      var rOpera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/;\n      var rSafari = /(safari)\\/([\\w.]+)/;\n      var browser = rChrome.exec(userAgent) || rFirefox.exec(userAgent) || rIE.exec(userAgent) || rOpera.exec(userAgent) || rSafari.exec(userAgent) || [];\n\n      return {\n        environment: 'angular',\n        library: {\n          name: 'angular',\n          version: global.angular.version.full\n        },\n        os: {\n          name: browser[1],\n          version: browser[2]\n        },\n        sdk: {\n          name: _package2.default.name,\n          version: _package2.default.version\n        }\n      };\n    }\n  }]);\n\n  return DeviceAdapter;\n}();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../package.json\":248}],250:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HttpMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('kinvey-javascript-sdk-core/src/rack/middleware');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar $injector = angular.injector(['ng']);\n\nvar HttpMiddleware = exports.HttpMiddleware = function (_KinveyMiddleware) {\n  _inherits(HttpMiddleware, _KinveyMiddleware);\n\n  function HttpMiddleware() {\n    _classCallCheck(this, HttpMiddleware);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HttpMiddleware).call(this, 'Kinvey Angular Http Middleware'));\n\n    _this.$http = $injector.get('$http');\n    return _this;\n  }\n\n  _createClass(HttpMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      var _this2 = this;\n\n      return _get(Object.getPrototypeOf(HttpMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        var promise = _this2.$http({\n          url: request.url,\n          method: request.method,\n          headers: request.headers,\n          data: request.data\n        }).then(function (response) {\n          request.response = {\n            statusCode: response.status,\n            headers: response.headers(),\n            data: response.data\n          };\n\n          return request;\n        }).catch(function (response) {\n          request.response = {\n            statusCode: response.status,\n            headers: response.headers(),\n            data: response.data\n          };\n\n          return request;\n        });\n        return promise;\n      });\n    }\n  }]);\n\n  return HttpMiddleware;\n}(_middleware.KinveyMiddleware);\n\n},{\"kinvey-javascript-sdk-core/src/rack/middleware\":29}],251:[function(require,module,exports){\n'use strict';\n\nvar _provider = require('./provider');\n\nvar ngKinvey = angular.module('kinvey', []);\nngKinvey.provider('$kinvey', _provider.KinveyProvider);\n\nvar Kinvey = {\n  name: 'kinvey'\n};\n\nmodule.exports = Kinvey;\n\n},{\"./provider\":253}],252:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PopupAdapter = exports.PopupAdapter = function () {\n  function PopupAdapter() {\n    _classCallCheck(this, PopupAdapter);\n  }\n\n  _createClass(PopupAdapter, [{\n    key: 'open',\n    value: function open() {\n      var _this = this;\n\n      var promise = new Promise(function (resolve, reject) {\n        _this.popup = global.open(_this.url, '_blank', 'toolbar=no,location=no');\n\n        if (_this.popup) {\n          _this.interval = setInterval(function () {\n            if (_this.popup.closed) {\n              _this.closeHandler();\n            } else {\n              try {\n                _this.loadHandler({\n                  url: _this.popup.location.href\n                });\n              } catch (e) {}\n            }\n          }, 100);\n        } else {\n          return reject(new Error('The popup was blocked.'));\n        }\n\n        return resolve(_this);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      var _this2 = this;\n\n      var promise = new Promise(function (resolve) {\n        _this2.popup.close();\n        resolve();\n      });\n      return promise;\n    }\n  }, {\n    key: 'loadHandler',\n    value: function loadHandler(event) {\n      this.emit('loaded', event.url);\n    }\n  }, {\n    key: 'clickHandler',\n    value: function clickHandler() {\n      this.close();\n    }\n  }, {\n    key: 'closeHandler',\n    value: function closeHandler() {\n      clearTimeout(this.interval);\n      this.emit('closed');\n    }\n  }]);\n\n  return PopupAdapter;\n}();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],253:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KinveyProvider = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _kinveyJavascriptSdkCore = require('kinvey-javascript-sdk-core');\n\nvar _rack = require('kinvey-javascript-sdk-core/src/rack/rack');\n\nvar _serialize = require('kinvey-javascript-sdk-core/src/rack/middleware/serialize');\n\nvar _http = require('./http');\n\nvar _popup = require('kinvey-javascript-sdk-core/src/utils/popup');\n\nvar _popup2 = require('./popup');\n\nvar _device = require('kinvey-javascript-sdk-core/src/utils/device');\n\nvar _device2 = require('./device');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KinveyProvider = exports.KinveyProvider = function () {\n  function KinveyProvider() {\n    _classCallCheck(this, KinveyProvider);\n\n    var networkRack = _rack.NetworkRack.sharedInstance();\n    networkRack.useAfter(_serialize.SerializeMiddleware, new _http.HttpMiddleware());\n\n    _device.Device.use(new _device2.DeviceAdapter());\n\n    _popup.Popup.use(new _popup2.PopupAdapter());\n  }\n\n  _createClass(KinveyProvider, [{\n    key: 'init',\n    value: function init() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return _kinveyJavascriptSdkCore.Kinvey.init(options);\n    }\n  }, {\n    key: '$get',\n    value: function $get() {\n      return _kinveyJavascriptSdkCore.Kinvey;\n    }\n  }]);\n\n  return KinveyProvider;\n}();\n\n},{\"./device\":249,\"./http\":250,\"./popup\":252,\"kinvey-javascript-sdk-core\":23,\"kinvey-javascript-sdk-core/src/rack/middleware/serialize\":32,\"kinvey-javascript-sdk-core/src/rack/rack\":38,\"kinvey-javascript-sdk-core/src/utils/device\":53,\"kinvey-javascript-sdk-core/src/utils/popup\":55}]},{},[251])\n\n","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\nvar BrowserMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","/* Add Promise.all and Promise.race implementations. */\n'use strict';\nvar isArguments = require('is-arguments');\n\nvar _call = Function.call.bind(Function.call);\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\nvar _floor = Math.floor;\nvar _abs = Math.abs;\n\nvar Symbol = global.Symbol || {};\nvar symbolIterator = Symbol.iterator || '@@iterator';\n\nvar defineProperties = function(object, map) {\n  _forEach(Object.keys(map), function(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n};\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\n// The -r variant allows specifying the receiver.\nfunction tryCatch0r(fn, receiver) {\n  try {\n    return fn.call(receiver);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch1(fn, arg1) {\n  try {\n    return fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch3(fn, arg1, arg2, arg3) {\n  try {\n    return fn(arg1, arg2, arg3);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n\nvar TypeIsObject = function(x) {\n  /* jshint eqnull:true */\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  return x != null && Object(x) === x;\n};\n\nvar ToObject = function(o, optMessage) {\n  /* jshint eqnull:true */\n  if (o == null) {\n    throw new TypeError(optMessage || 'Cannot call method on ' + o);\n  }\n  return Object(o);\n};\n\nvar IsCallable = (typeof /abc/ === 'function') ? function(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function(x) { return typeof x === 'function'; /* Much faster */};\n\nvar ToNumber = function(value) {\n  /*\n  // Implementations which implement Symbol also throw the proper TypeError\n  // if it is converted to a number.\n  if (_toString(value) === '[object Symbol]') {\n    throw new TypeError('Cannot convert a Symbol value to a number');\n  }\n  */\n  return +value;\n};\n\nvar numberIsNaN = Number.isNaN || function isNaN(value) {\n  return value !== value;\n};\n\nvar numberIsFinite = Number.isFinite || function isFinite(value) {\n  return typeof value === 'number' && global.isFinite(value);\n};\n\nvar ToInteger = function(value) {\n  var number = ToNumber(value);\n  if (numberIsNaN(number)) { return 0; }\n  if (number === 0 || !numberIsFinite(number)) { return number; }\n  return (number > 0 ? 1 : -1) * _floor(_abs(number));\n};\n\nvar ToLength = function(value) {\n  var len = ToInteger(value);\n  if (len <= 0) { return 0; } // Includes converting -0 to +0\n  if (typeof Number.MAX_SAFE_INTEGER !== 'undefined') {\n    if (len > Number.MAX_SAFE_INTEGER) { return Number.MAX_SAFE_INTEGER; }\n  }\n  return len;\n};\n\n// Stripped down value-only ArrayIterator.\nvar ArrayIterator = function(array) {\n  this.i = 0;\n  this.array = array;\n};\ndefineProperties(ArrayIterator.prototype, {\n  next: function() {\n    var i = this.i;\n    var array = this.array;\n    if (!(this instanceof ArrayIterator)) {\n      throw new TypeError('Not an ArrayIterator');\n    }\n    if (typeof array !== 'undefined') {\n      var len = Array.isArray(array) ? array.length : ToLength(array.length);\n      for (; i < len; i++) {\n        var retval = array[i];\n        this.i = i + 1;\n        return { value: retval, done: false };\n      }\n    }\n    this.array = void 0;\n    return { value: void 0, done: true };\n  },\n});\nObject.defineProperty(ArrayIterator.prototype, symbolIterator, {\n  configurable: true,\n  enumerable: false,\n  writable: true,\n  value: function() { return this; },\n});\n\nvar DEFAULT_ARRAY_ITERATOR = {};\n\nvar GetIterator = function(o, detectDefault) {\n  var itFn = GetMethod(o, symbolIterator);\n  if (!IsCallable(itFn)) {\n    // Node 0.10 compatibility.\n    if (Array.isArray(o) || isArguments(o)) {\n      return detectDefault ? DEFAULT_ARRAY_ITERATOR : new ArrayIterator(o);\n    }\n    // Better diagnostics if itFn is null or undefined\n    throw new TypeError('value is not an iterable');\n  }\n  if (detectDefault && itFn === Array.prototype[symbolIterator]) {\n    return DEFAULT_ARRAY_ITERATOR;\n  }\n  var it = _call(itFn, o);\n  if (!TypeIsObject(it)) {\n    throw new TypeError('bad iterator');\n  }\n  return it;\n};\n\nvar GetMethod = function(o, p) {\n  var func = ToObject(o)[p];\n  if (func === void 0 || func === null) {\n    return void 0;\n  }\n  if (!IsCallable(func)) {\n    throw new TypeError('Method not callable: ' + p);\n  }\n  return func;\n};\n\nvar IteratorComplete = function(iterResult) {\n  return !!(iterResult.done);\n};\n\nvar IteratorClose = function(iterator, completionIsThrow) {\n  var returnMethod = GetMethod(iterator, 'return');\n  if (returnMethod === void 0) {\n    return;\n  }\n  var innerResult, innerException;\n  innerResult = tryCatch0r(returnMethod, iterator);\n  if (innerResult === errorObj) {\n    innerException = errorObj.e;\n  }\n  if (completionIsThrow) {\n    return;\n  }\n  if (innerException) {\n    throw innerException;\n  }\n  if (!TypeIsObject(innerResult)) {\n    throw new TypeError(\"Iterator's return method returned a non-object.\");\n  }\n};\n\nvar IteratorNext0 = function(it) {\n  var result = it.next();\n  if (!TypeIsObject(result)) {\n    throw new TypeError('bad iterator');\n  }\n  return result;\n};\n\nvar IteratorStep = function(it) {\n  var result = IteratorNext0(it);\n  var done = IteratorComplete(result);\n  return done ? false : result;\n};\n\nmodule.exports = function(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n) {\n\n  // This is a common step in many Promise methods\n  var getPromiseSpecies = function(C) {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Promise is not object');\n    }\n    if (symbolSpecies !== null) {\n      var S = C[symbolSpecies];\n      if (S !== void 0 && S !== null) {\n        return S;\n      }\n    }\n    return C;\n  };\n\n  var _promiseAllResolver = function(index, values, capability, remaining) {\n    var alreadyCalled = false;\n    return function(x) {\n      if (alreadyCalled) { return; }\n      alreadyCalled = true;\n      values[index] = x;\n      if ((--remaining.count) === 0) {\n        promiseReactionResolve(capability, values);\n      }\n    };\n  };\n\n  var performPromiseAll = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var values = [];\n    var remaining = { count: 1 };\n    var next, nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; ; index++) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseAllArray = function(array, C, resultCapability) {\n    var values = new Array(array.length);\n    var remaining = { count: 1 };\n    var nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; index < array.length; index++) {\n      nextValue = array[index];\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseRace = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var next, nextValue, nextPromise;\n    while (true) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        // NOTE: If iterable has no items, resulting promise will never\n        // resolve; see:\n        // https://github.com/domenic/promises-unwrapping/issues/75\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2515\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      nextPromise = C.resolve(nextValue);\n      optimizePromiseThen(\n        nextPromise, resultCapability.resolve, resultCapability.reject\n      );\n    }\n    return resultCapability.promise;\n  };\n\n  defineProperties(Promise, {\n    all: function all(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapabilityFast(C);\n      var iterator, iteratorRecord, result, ex;\n      iterator = tryCatch2(GetIterator, iterable, true);\n      if (iterator === DEFAULT_ARRAY_ITERATOR) {\n        // Fast path\n        result = tryCatch3(performPromiseAllArray, iterable, C, capability);\n        if (result !== errorObj) {\n          return result;\n        }\n        // Not safe to return capability to pool, since there may be\n        // calls to `resolve` still pending.\n        return promiseReactionReject(capability, errorObj.e, 'no free');\n      }\n      if (iterator === errorObj) {\n        return promiseReactionReject(capability, errorObj.e);\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseAll, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      // Not safe to return capability to pool, since there may be\n      // calls to `resolve` still pending.\n      return promiseReactionReject(capability, ex, 'no free');\n    },\n\n    race: function race(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapability(C);\n      var iterator, iteratorRecord, reject, result, ex;\n      iterator = tryCatch1(GetIterator, iterable);\n      if (iterator === errorObj) {\n        reject = capability.reject;\n        reject(errorObj.e);\n        return capability.promise;\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseRace, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      reject = capability.reject;\n      reject(ex);\n      return capability.promise;\n    },\n  });\n};\n","'use strict';\n\nvar asap = require('asap/raw');\n\n// When this is `false` we disable species support, for a little bit of\n// extra performance.\nvar supportSpecies = false;\n// When this is false we assume promise subclass constructors have no\n// side effects.\nvar strictConstructors = false;\n// When this is true, a new resolver is created for every Promise.\nvar dontReuseResolvers = false;\n// When this is true (and the engine supports it), the Promise will be a\n// true ES2015 class.  However, this currently slows the implementation down\n// by 30% since construction of ES2015 classes is unoptimized.\nvar useES2015Class = false;\n\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\n\nvar Symbol = global.Symbol || {};\nvar symbolSpecies = Symbol.species || (supportSpecies ? '@@species' : null);\n\nfunction defineProperties(object, map) {\n  _forEach(Object.keys(map), function definePropertiesForEach(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n}\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\nfunction tryCatch1(fn, arg) {\n  try {\n    return fn(arg);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -r variant allows specifying the receiver.\nfunction tryCatch2r(fn, receiver, arg1, arg2) {\n  try {\n    return fn.call(receiver, arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -n variant creates a new object.\nfunction tryCatch1n(Fn, arg1) {\n  try {\n    return new Fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n// Promises\n\n// Follow implementation in the ES6 spec as closely as possible, but\n// steal tricks from Bluebird for moar speed.\n// In particular, we go to great lengths to avoid allocating objects\n// and closures wherever possible in hot code.\n\nfunction TypeIsObject(x) {\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  if (false) {\n    return x !== void 0 && x !== null && Object(x) === x;\n  }\n  // It turns out that !TypeIsNotObject is faster...\n  return !TypeIsNotObject(x);\n}\nfunction TypeIsNotObject(val) {\n  // This is more appropriate when TypeIsObject may return false.\n  return val === void 0 || val === null || val === true || val === false ||\n    typeof val === 'string' || typeof val === 'number' ||\n    typeof val === 'symbol'; // jshint ignore:line\n}\n\nvar IsCallable = (typeof /abc/ === 'function') ? function IsCallableSlow(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function IsCallableFast(x) { return typeof x === 'function'; };\n\n// We can't tell callables from constructors in ES5\nvar IsConstructor = IsCallable;\n\nfunction SpeciesConstructor(O, defaultConstructor) {\n  var C = O.constructor;\n  if (C === void 0) {\n    return defaultConstructor;\n  }\n  var S;\n  if (symbolSpecies === null) {\n    S = C;\n  } else {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad constructor');\n    }\n    S = C[symbolSpecies];\n    if (S === void 0 || S === null) {\n      return defaultConstructor;\n    }\n  }\n  if (!IsConstructor(S)) {\n    throw new TypeError('Bad @@species');\n  }\n  return S;\n}\n\nfunction IsPromise(promise) {\n  if (!TypeIsObject(promise)) {\n    return false;\n  }\n  if (promise._promise_state === undefined) {\n    return false; // Uninitialized, or missing our hidden field.\n  }\n  return true;\n}\n\n// \"PromiseCapability\" in the spec is what most promise implementations\n// call a \"deferred\".\n// We're going to wrap it so that it never throws an exception.\nfunction PromiseCapability() {\n  // Declare fields of this object.\n  // (Helps with object shape optimization.)\n  var self = this;\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  this.resolver = function(resolve, reject) {\n    if (self.resolve !== void 0 || self.reject !== void 0) {\n      throw new TypeError('Bad Promise implementation!');\n    }\n    self.resolve = resolve;\n    self.reject = reject;\n  };\n}\nPromiseCapability.prototype.free = function() {\n  if (dontReuseResolvers) { return; }\n  if (this.dontReuse) { return; }\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  freeCapabilityList.push(this);\n};\nPromiseCapability.prototype.getPromiseAndFree = function() {\n  var promise = this.promise;\n  this.free();\n  return promise;\n};\nvar freeCapabilityList = [];\n\nfunction makeCapabilityFast(C) {\n  thenFastPath = FAST_PATH_MAKE_CAP;\n  // `thenFastPath` is always reset to FAST_PATH_NONE by `makeCapability`\n  return makeCapability(C);\n}\n\nfunction makeCapability(C) {\n  if (!IsConstructor(C)) {\n    thenFastPath = FAST_PATH_NONE;\n    throw new TypeError('Bad promise constructor');\n  }\n\n  var capability;\n  if (freeCapabilityList.length) {\n    capability = freeCapabilityList.pop();\n  } else {\n    capability = new PromiseCapability();\n  }\n  if (strictConstructors &&\n      C !== Promise && !C.hasOwnProperty('noSideEffects')) {\n    capability.dontReuse = true;\n  }\n  if (thenFastPath === FAST_PATH_MAKE_CAP) {\n    thenFastPathResolver = capability.resolver;\n    capability.promise = tryCatch1n(C, thenFastPathResolver);\n    var wasFastPath = (thenFastPath === FAST_PATH_CTOR_BAILED);\n    thenFastPathResolver = null;\n    thenFastPath = FAST_PATH_NONE;\n    if (capability.promise === errorObj) {\n      capability.free();\n      throw errorObj.e;\n    }\n    if (wasFastPath) { return capability.getPromiseAndFree(); }\n  } else {\n    capability.promise = new C(capability.resolver);\n  }\n  if (!(IsCallable(capability.resolve) && IsCallable(capability.reject))) {\n    throw new TypeError('Bad promise constructor');\n  }\n  return capability;\n}\n\n// Forward declaration\nvar promisePrototypeThen;\nvar fakeRetvalFromThen = false;\n\n// Constants for Promise implementation\nvar PROMISE_IDENTITY = (function PROMISE_IDENTITY(v) { return v; });\nvar PROMISE_THROWER = (function PROMISE_THROWER(t) { throw t; });\nvar PROMISE_FAKE_CAPABILITY = new PromiseCapability();\nvar PROMISE_PENDING = 0;\nvar PROMISE_RESOLVING = 1; // PROMISE_PENDING combined with alreadyResolved\nvar PROMISE_FULFILLED = 2;\nvar PROMISE_REJECTED = 3;\n\n// States for then-fast-path\nvar FAST_PATH_NONE = 0;\nvar FAST_PATH_MAKE_CAP = 1;\nvar FAST_PATH_CTOR_BAILED = 2;\n\nvar thenFastPath = FAST_PATH_NONE;\nvar thenFastPathResolver = null;\n\nfunction promiseCheckAndResolve(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  resolvePromise(promise, value);\n  return promise;\n}\nfunction promiseCheckAndReject(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  rejectPromise(promise, value);\n  return promise;\n}\nfunction promiseReactionResolve(promiseCapability, handlerResult) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var resolve = promiseCapability.resolve;\n    resolve(handlerResult);\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndResolve(promiseCapability, handlerResult);\n}\nfunction promiseReactionReject(promiseCapability, handlerResult, noFree) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var reject = promiseCapability.reject;\n    reject(handlerResult);\n    if (noFree) { return promiseCapability.promise; }\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndReject(promiseCapability, handlerResult);\n}\nfunction promiseReactionJob(handler, promiseCapability, argument) {\n  var handlerResult;\n  // Encapsulate try/catch here to avoid deoptimization.\n  handlerResult = tryCatch1(handler, argument);\n  if (promiseCapability === PROMISE_FAKE_CAPABILITY) { return; }\n  if (handlerResult === errorObj) {\n    handlerResult = errorObj.e;\n    return promiseReactionReject(promiseCapability, handlerResult);\n  }\n  return promiseReactionResolve(promiseCapability, handlerResult);\n}\n\nfunction PromiseReactionJobTask() {\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n}\nPromiseReactionJobTask.prototype.call = function() {\n  promiseReactionJob(this.handler, this.capability, this.argument);\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n  freePromiseReactionJobTasks.push(this);\n};\nvar freePromiseReactionJobTasks = [];\n\nfunction triggerPromiseReaction(handler, capability, argument) {\n  var task;\n  if (freePromiseReactionJobTasks.length) {\n    task = freePromiseReactionJobTasks.pop();\n  } else {\n    task = new PromiseReactionJobTask();\n  }\n  task.handler = handler;\n  task.capability = capability;\n  task.argument = argument;\n  asap(task);\n}\n\nfunction fulfillPromise(promise, value) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_fulfillReactions0,\n      promise._promise_reactionCapability0,\n      value);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx], promise[idx + 2], value);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = value;\n  promise._promise_state = PROMISE_FULFILLED;\n}\n\nfunction rejectPromise(promise, reason) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_rejectReactions0,\n      promise._promise_reactionCapability0,\n      reason);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx + 1], promise[idx + 2], reason);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = reason;\n  promise._promise_state = PROMISE_REJECTED;\n}\n\nfunction getThen(r) { return r.then; }\n\nfunction PromiseResolveThenableJobTask() {\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n}\nPromiseResolveThenableJobTask.prototype.call = function() {\n  promiseResolveThenableJob(this.promise, this.resolution, this.then);\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n  freePromiseResolveThenableJobTasks.push(this);\n};\nvar freePromiseResolveThenableJobTasks = [];\n\nfunction triggerPromiseResolveThenableJob(promise, resolution, then) {\n  var task;\n  if (freePromiseResolveThenableJobTasks.length) {\n    task = freePromiseResolveThenableJobTasks.pop();\n  } else {\n    task = new PromiseResolveThenableJobTask();\n  }\n  task.promise = promise;\n  task.resolution = resolution;\n  task.then = then;\n  asap(task);\n}\n\nfunction resolvePromise(promise, resolution) {\n  if (resolution === promise) {\n    return rejectPromise(promise, new TypeError('Self resolution'));\n  }\n  if (TypeIsNotObject(resolution)) {\n    return fulfillPromise(promise, resolution);\n  }\n  var then = tryCatch1(getThen, resolution);\n  if (then === errorObj) {\n    return rejectPromise(promise, errorObj.e);\n  }\n  if (!IsCallable(then)) {\n    return fulfillPromise(promise, resolution);\n  }\n  triggerPromiseResolveThenableJob(promise, resolution, then);\n}\n\nfunction promiseResolveThenableJob(promise, thenable, then) {\n  // Inlined copy of createResolvingFunctions(promise)\n  var alreadyResolved = false;\n  var resolve = function promiseResolveThenableJobResolve(resolution) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    resolvePromise(promise, resolution);\n  };\n  var reject = function promiseResolveThenableJobReject(reason) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    return rejectPromise(promise, reason);\n  };\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n  }\n  var value = tryCatch2r(then, thenable, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n}\n\nvar PromiseConstruct = function Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires \"new\"');\n  }\n  if (this._promise_state !== void 0) {\n    throw new TypeError('Bad construction');\n  }\n  // The spec requires no enumerable fields, but for speed we're going\n  // to expose our implementation here.\n  // Since most promises have exactly one handler, the first one is\n  // stored directly on the object.  The rest (if needed) are stored\n  // on the object's element array to avoid unnecessary indirection.\n  this._promise_result = void 0;\n  this._promise_state = PROMISE_PENDING;\n  this._promise_fulfillReactions0 = void 0;\n  this._promise_rejectReactions0 = void 0;\n  this._promise_reactionCapability0 = void 0;\n  if (thenFastPath === FAST_PATH_MAKE_CAP &&\n      resolver === thenFastPathResolver) {\n    // We will create the resolving functions lazily.\n    thenFastPath = FAST_PATH_CTOR_BAILED;\n    return;\n  }\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2482\n  // (This check has been reordered after the fast path.)\n  if (!IsCallable(resolver)) {\n    throw new TypeError('not a valid resolver');\n  }\n  // Inlined copy of createResolvingFunctions(this), using _promise_state\n  // to track the `alreadyResolved` boolean.\n  var promise = this;\n  var resolve = function PromiseResolve(resolution) {\n    promiseCheckAndResolve(promise, resolution);\n  };\n  var reject = function PromiseReject(reason) {\n    promiseCheckAndReject(promise, reason);\n  };\n  var value = tryCatch2(resolver, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n};\nvar Promise = (function makeClass() {\n  if (useES2015Class) {\n    try {\n      /* jshint evil:true */\n      return eval('(function(PromiseConstruct) {' +\n                  '\"use strict\";' +\n                  'return class Promise {' +\n                  '  constructor(executor) {' +\n                  '    PromiseConstruct.call(this, executor);' +\n                  '  }' +\n                  '};})')(PromiseConstruct);\n    } catch (e) { /* I guess ES2015 syntax isn't supported. */ }\n  }\n  return PromiseConstruct;\n})();\nvar Promise$prototype = Promise.prototype;\n\ndefineProperties(Promise, {\n  reject: function reject(reason) {\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionReject(capability, reason);\n  },\n\n  resolve: function resolve(v) {\n    // See https://esdiscuss.org/topic/fixing-promise-resolve for spec\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    if (IsPromise(v)) {\n      var constructor = v.constructor;\n      if (constructor === C) { return v; }\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionResolve(capability, v);\n  },\n});\n\ndefineProperties(Promise$prototype, {\n  catch: function catch_(onRejected) {\n    return this.then(void 0, onRejected);\n  },\n\n  then: function then(onFulfilled, onRejected) {\n    /* jshint bitwise: false */\n    var fakeRetval = fakeRetvalFromThen;\n    fakeRetvalFromThen = false;\n\n    var promise = this;\n    if (!IsPromise(promise)) { throw new TypeError('not a promise'); }\n    var resultCapability, C;\n    if ((!strictConstructors) && fakeRetval) {\n      resultCapability = PROMISE_FAKE_CAPABILITY;\n    } else {\n      C = SpeciesConstructor(promise, Promise);\n      if (fakeRetval &&\n          (C === Promise || C.hasOwnProperty('noSideEffects'))) {\n        resultCapability = PROMISE_FAKE_CAPABILITY;\n      } else {\n        // We might create a fake capability here.\n        resultCapability = makeCapabilityFast(C);\n      }\n    }\n    // PerformPromiseThen(promise, onFulfilled, onRejected, resultCapability)\n    if (!IsCallable(onFulfilled)) {\n      onFulfilled = PROMISE_IDENTITY;\n    }\n    if (!IsCallable(onRejected)) {\n      onRejected = PROMISE_THROWER;\n    }\n\n    var length;\n    switch (promise._promise_state & 3) {\n    case PROMISE_PENDING:\n    case PROMISE_RESOLVING:\n      length = promise._promise_state >>> 2;\n      if (length === 0) {\n        promise._promise_fulfillReactions0 = onFulfilled;\n        promise._promise_rejectReactions0 = onRejected;\n        promise._promise_reactionCapability0 = resultCapability;\n      } else {\n        var i = 3 * (length - 1);\n        promise[i] = onFulfilled;\n        promise[i + 1] = onRejected;\n        promise[i + 2] = resultCapability;\n      }\n      promise._promise_state += (1 << 2);\n      break;\n    case PROMISE_FULFILLED:\n      triggerPromiseReaction(onFulfilled, resultCapability,\n                             promise._promise_result);\n      break;\n    case PROMISE_REJECTED:\n      triggerPromiseReaction(onRejected, resultCapability,\n                             promise._promise_result);\n      break;\n    default:\n      throw new TypeError('unexpected');\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  },\n});\n// Store the identify of the Promise#then function for optimization.\npromisePrototypeThen = Promise$prototype.then;\n// This encapsulates the `then` optimization, for use by promise-extra.js\nfunction optimizePromiseThen(promise, onFulfilled, onReject) {\n  var then = promise.then;\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n    promisePrototypeThen.call(promise, onFulfilled, onReject);\n  } else {\n    then.call(promise, onFulfilled, onReject);\n  }\n}\n\n// Special \"extra\" method which is like `Promise#then` but it does\n// *not* return a `Promise`.  This can be much faster when you don't\n// need the result.\nPromise$prototype.then0 = function then0(f, r) {\n  optimizePromiseThen(this, f, r);\n};\n\nif (symbolSpecies !== null) {\n  // Default species getter.\n  Object.defineProperty(Promise, symbolSpecies, {\n    configurable: true,\n    enumerable: false,\n    get: function speciesGetter() { return this; },\n  });\n}\n\n// Add Promise.all / Promise.race methods\n// (These are split into a separate file since their implementation is\n// reasonably independent of the core and their performance is not critical.)\nrequire('./promise-extra.js')(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n);\n\nmodule.exports = Promise;\n","'use strict'\n\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nfunction init () {\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\ninit()\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.foo = function () { return 42 }\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    this.length = 0\n    this.parent = undefined\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined') {\n    if (object.buffer instanceof ArrayBuffer) {\n      return fromTypedArray(that, object)\n    }\n    if (object instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, object)\n    }\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(array)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromTypedArray(that, new Uint8Array(array))\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n} else {\n  // pre-set for values that may exist in the future\n  Buffer.prototype.length = undefined\n  Buffer.prototype.parent = undefined\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; i--) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t\"use strict\";\n\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval) {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t\"use strict\";\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== \"object\" && typeof target !== \"function\" || target == undefined) {\n\t\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n","'use strict';\n\n/**\n * Provides in-memory cache.\n *\n * @name MemoryCache\n * @constructor\n */\nfunction MemoryCache() {\n    this._cache = createMap();\n    this._timeouts = createMap();\n}\n\n/**\n * Returns cache value for the specified key.\n *\n * @param {String} key\n * @returns {*} Value or `undefined` if value does not exist.\n */\nMemoryCache.prototype.get = function (key) {\n    return this._cache[key];\n};\n\n/**\n * Assigns value for the specified key.\n *\n * @param {String} key\n * @param {*} value\n * @param {Number} [expireTime=0] The length of time in seconds. After this time has expired, the\n *      value will be automatically deleted. 0 means that time never expire.\n */\nMemoryCache.prototype.set = function (key, value, expireTime) {\n    this.delete(key);\n    this._cache[key] = value;\n    if (expireTime) {\n        this._timeouts[key] = setTimeout(this.delete.bind(this, key), expireTime * 1000);\n    }\n};\n\n/**\n * Deletes value for the specified key.\n *\n * @param {String} key\n */\nMemoryCache.prototype.delete = function (key) {\n    delete this._cache[key];\n    if (key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n        delete this._timeouts[key];\n    }\n};\n\n/**\n * Clears the whole cache storage.\n */\nMemoryCache.prototype.clear = function () {\n    this._cache = createMap();\n    for (var key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n    }\n    this._timeouts = createMap();\n};\n\n/**\n * Creates a new object without a prototype. This object is useful for lookup without having to\n * guard against prototypically inherited properties via hasOwnProperty.\n *\n * @returns {Object}\n */\nfunction createMap() {\n    return Object.create(null);\n}\n\nmodule.exports = MemoryCache;\n","/*! hellojs v1.12.0 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */\r\n// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n\n/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (Array.isArray(r) && Array.isArray(a)) {\n\t\t\t\tArray.prototype.push.apply(r, a);\n\t\t\t}\n\t\t\telse if (r instanceof Object && a instanceof Object && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t// Clone it\n\t\t\t\t\ta = a.slice(0);\n\t\t\t\t}\n\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tdisplay: opts.display,\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = state.oauth_proxy + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tparent[cb](str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n\n// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n\n// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n\n(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\t\t\t\tdelete p.qs.display;\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.1\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// The facebook login window is a different size.\n\t\t\t\tp.options.popup.width = 580;\n\t\t\t\tp.options.popup.height = 400;\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/v2.4/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page:'@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tshare: '',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tif (p.qs.display === 'none') {\n\t\t\t\t\t// Google doesn't like display=none\n\t\t\t\t\tp.qs.display = '';\n\t\t\t\t}\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.approval_prompt = 'force';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\to.data = o.feed.entry.map(formatEntry);\n\t\tdelete o.feed;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments',\n\t\t\t\temail: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Instagram throws errors like 'JavaScript API is unsupported' if the display is 'popup'.\n\t\t\t\t// Make the display anything but 'popup'\n\t\t\t\tp.qs.display = '';\n\t\t\t},\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting',\n\t\t\t\temail: '',\n\t\t\t\tfriends: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n\n(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfiles: '',\n\t\t\t\tfriends: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish: 'w_share',\n\t\t\t\tpublish_files: 'w_share',\n\t\t\t\tshare: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel:{\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n\n// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function() {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n\n// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\t// See https://vk.com/dev/permissions\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\tfriends: 'friends',\n\t\t\t\tphotos: 'photos',\n\t\t\t\tvideos: 'video',\n\t\t\t\tshare: 'share',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tshare: 'wl.share',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token'\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n\n// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n\n// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var idbModules = {  // jshint ignore:line\n    util: {\n        cleanInterface: false\n    }\n};\n\n(function () {\n    'use strict';\n\n    var testObject = {test: true};\n    //Test whether Object.defineProperty really works.\n    if (Object.defineProperty) {\n        try {\n            Object.defineProperty(testObject, 'test', { enumerable: false });\n            if (testObject.test) {\n                idbModules.util.cleanInterface = true;      // jshint ignore:line\n            }\n        } catch (e) {\n        //Object.defineProperty does not work as intended.\n        }\n    }\n})();\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * A utility method to callback onsuccess, onerror, etc as soon as the calling function's context is over\n     * @param {Object} fn\n     * @param {Object} context\n     * @param {Object} argArray\n     */\n    function callback(fn, context, event) {\n        //window.setTimeout(function(){\n        event.target = context;\n        (typeof context[fn] === \"function\") && context[fn].apply(context, [event]);\n        //}, 1);\n    }\n\n    /**\n     * Shim the DOMStringList object.\n     *\n     */\n    var StringList = function() {\n        this.length = 0;\n        this._items = [];\n        //Internal functions on the prototype have been made non-enumerable below.\n        if (idbModules.util.cleanInterface) {\n            Object.defineProperty(this, '_items', {\n                enumerable: false\n            });\n        }\n    };\n    StringList.prototype = {\n        // Interface.\n        contains: function(str) {\n            return -1 !== this._items.indexOf(str);\n        },\n        item: function(key) {\n            return this._items[key];\n        },\n\n        // Helpers. Should only be used internally.\n        indexOf: function(str) {\n            return this._items.indexOf(str);\n        },\n        push: function(item) {\n            this._items.push(item);\n            this.length += 1;\n            for (var i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        },\n        splice: function(/*index, howmany, item1, ..., itemX*/) {\n            this._items.splice.apply(this._items, arguments);\n            this.length = this._items.length;\n            for (var i in this) {\n                if (i === String(parseInt(i, 10))) {\n                    delete this[i];\n                }\n            }\n            for (i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        }\n    };\n    if (idbModules.util.cleanInterface) {\n        for (var i in {\n            'indexOf': false,\n            'push': false,\n            'splice': false\n        }) {\n            Object.defineProperty(StringList.prototype, i, {\n                enumerable: false\n            });\n        }\n    }\n\n    idbModules.util.callback = callback;\n    idbModules.util.StringList = StringList;\n    idbModules.util.quote = function(arg) {\n        return \"\\\"\" + arg + \"\\\"\";\n    };\n\n}(idbModules));\n\n(function (idbModules) {\n    'use strict';\n\n    /**\n     * Polyfills missing features in the browser's native IndexedDB implementation.\n     * This is used for browsers that DON'T support WebSQL but DO support IndexedDB\n     */\n    function polyfill() {\n        if (navigator.userAgent.match(/MSIE/) ||\n            navigator.userAgent.match(/Trident/) ||\n            navigator.userAgent.match(/Edge/)) {\n            // Internet Explorer's native IndexedDB does not support compound keys\n            compoundKeyPolyfill();\n        }\n    }\n\n    /**\n     * Polyfills support for compound keys\n     */\n    function compoundKeyPolyfill() {\n        var cmp = IDBFactory.prototype.cmp;\n        var createObjectStore = IDBDatabase.prototype.createObjectStore;\n        var createIndex = IDBObjectStore.prototype.createIndex;\n        var add = IDBObjectStore.prototype.add;\n        var put = IDBObjectStore.prototype.put;\n        var indexGet = IDBIndex.prototype.get;\n        var indexGetKey = IDBIndex.prototype.getKey;\n        var indexCursor = IDBIndex.prototype.openCursor;\n        var indexKeyCursor = IDBIndex.prototype.openKeyCursor;\n        var storeGet = IDBObjectStore.prototype.get;\n        var storeDelete = IDBObjectStore.prototype.delete;\n        var storeCursor = IDBObjectStore.prototype.openCursor;\n        var storeKeyCursor = IDBObjectStore.prototype.openKeyCursor;\n        var bound = IDBKeyRange.bound;\n        var upperBound = IDBKeyRange.upperBound;\n        var lowerBound = IDBKeyRange.lowerBound;\n        var only = IDBKeyRange.only;\n        var requestResult = Object.getOwnPropertyDescriptor(IDBRequest.prototype, 'result');\n        var cursorPrimaryKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'primaryKey');\n        var cursorKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'key');\n        var cursorValue = Object.getOwnPropertyDescriptor(IDBCursorWithValue.prototype, 'value');\n\n        IDBFactory.prototype.cmp = function(key1, key2) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key1 instanceof Array) {\n                args[0] = encodeCompoundKey(key1);\n            }\n            if (key2 instanceof Array) {\n                args[1] = encodeCompoundKey(key2);\n            }\n            return cmp.apply(this, args);\n        };\n\n        IDBDatabase.prototype.createObjectStore = function(name, opts) {\n            if (opts && opts.keyPath instanceof Array) {\n                opts.keyPath = encodeCompoundKeyPath(opts.keyPath);\n            }\n            return createObjectStore.apply(this, arguments);\n        };\n\n        IDBObjectStore.prototype.createIndex = function(name, keyPath, opts) {\n            var args = Array.prototype.slice.call(arguments);\n            if (keyPath instanceof Array) {\n                args[1] = encodeCompoundKeyPath(keyPath);\n            }\n            return createIndex.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.add = function(value, key) {\n            return this.__insertData(add, arguments);\n        };\n\n        IDBObjectStore.prototype.put = function(value, key) {\n            return this.__insertData(put, arguments);\n        };\n\n        IDBObjectStore.prototype.__insertData = function(method, args) {\n            args = Array.prototype.slice.call(args);\n            var value = args[0];\n            var key = args[1];\n\n            // out-of-line key\n            if (key instanceof Array) {\n                args[1] = encodeCompoundKey(key);\n            }\n\n            if (typeof value === 'object') {\n                // inline key\n                if (isCompoundKey(this.keyPath)) {\n                    setInlineCompoundKey(value, this.keyPath);\n                }\n\n                // inline indexes\n                for (var i = 0; i < this.indexNames.length; i++) {\n                    var index = this.index(this.indexNames[i]);\n                    if (isCompoundKey(index.keyPath)) {\n                        try {\n                            setInlineCompoundKey(value, index.keyPath);\n                        }\n                        catch (e) {\n                            // The value doesn't have a valid key for this index.\n                        }\n                    }\n                }\n            }\n            return method.apply(this, args);\n        };\n\n        IDBIndex.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGet.apply(this, args);\n        };\n\n        IDBIndex.prototype.getKey = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGetKey.apply(this, args);\n        };\n\n        IDBIndex.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexCursor.apply(this, args);\n        };\n\n        IDBIndex.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexKeyCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeGet.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.delete = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeDelete.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeKeyCursor.apply(this, args);\n        };\n\n        IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen) {\n            var args = Array.prototype.slice.call(arguments);\n            if (lower instanceof Array) {\n                args[0] = encodeCompoundKey(lower);\n            }\n            if (upper instanceof Array) {\n                args[1] = encodeCompoundKey(upper);\n            }\n            return bound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.upperBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return upperBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.lowerBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return lowerBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.only = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return only.apply(IDBKeyRange, args);\n        };\n\n        Object.defineProperty(IDBRequest.prototype, 'result', {\n            enumerable: requestResult.enumerable,\n            configurable: requestResult.configurable,\n            get: function() {\n                var result = requestResult.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'primaryKey', {\n            enumerable: cursorPrimaryKey.enumerable,\n            configurable: cursorPrimaryKey.configurable,\n            get: function() {\n                var result = cursorPrimaryKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'key', {\n            enumerable: cursorKey.enumerable,\n            configurable: cursorKey.configurable,\n            get: function() {\n                var result = cursorKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursorWithValue.prototype, 'value', {\n            enumerable: cursorValue.enumerable,\n            configurable: cursorValue.configurable,\n            get: function() {\n                var result = cursorValue.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        try {\n            if (!IDBTransaction.VERSION_CHANGE) {\n                IDBTransaction.VERSION_CHANGE = 'versionchange';\n            }\n        }\n        catch (e) {}\n    }\n\n    var compoundKeysPropertyName = '__$$compoundKey';\n    var propertySeparatorRegExp = /\\$\\$/g;\n    var propertySeparator = '$$$$';         // \"$$\" after RegExp escaping\n    var keySeparator = '$_$';\n\n    function isCompoundKey(keyPath) {\n        return keyPath && (keyPath.indexOf(compoundKeysPropertyName + '.') === 0);\n    }\n\n    function encodeCompoundKeyPath(keyPath) {\n        // Encoded dotted properties\n        // [\"name.first\", \"name.last\"] ==> [\"name$$first\", \"name$$last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(/\\./g, propertySeparator);\n        }\n\n        // Encode the array as a single property\n        // [\"name$$first\", \"name$$last\"] => \"__$$compoundKey.name$$first$_$name$$last\"\n        return compoundKeysPropertyName + '.' + keyPath.join(keySeparator);\n    }\n\n    function decodeCompoundKeyPath(keyPath) {\n        // Remove the \"__$$compoundKey.\" prefix\n        keyPath = keyPath.substr(compoundKeysPropertyName.length + 1);\n\n        // Split the properties into an array\n        // \"name$$first$_$name$$last\" ==> [\"name$$first\", \"name$$last\"]\n        keyPath = keyPath.split(keySeparator);\n\n        // Decode dotted properties\n        // [\"name$$first\", \"name$$last\"] ==> [\"name.first\", \"name.last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(propertySeparatorRegExp, '.');\n        }\n        return keyPath;\n    }\n\n    function setInlineCompoundKey(value, encodedKeyPath) {\n        // Encode the key\n        var keyPath = decodeCompoundKeyPath(encodedKeyPath);\n        var key = idbModules.Key.getValue(value, keyPath);\n        var encodedKey = encodeCompoundKey(key);\n\n        // Store the encoded key inline\n        encodedKeyPath = encodedKeyPath.substr(compoundKeysPropertyName.length + 1);\n        value[compoundKeysPropertyName] = value[compoundKeysPropertyName] || {};\n        value[compoundKeysPropertyName][encodedKeyPath] = encodedKey;\n    }\n\n    function removeInlineCompoundKey(value) {\n        if (typeof value === \"string\" && isCompoundKey(value)) {\n            return decodeCompoundKey(value);\n        }\n        else if (value && typeof value[compoundKeysPropertyName] === \"object\") {\n            delete value[compoundKeysPropertyName];\n        }\n        return value;\n    }\n\n    function encodeCompoundKey(key) {\n        // Validate and encode the key\n        idbModules.Key.validate(key);\n        key = idbModules.Key.encode(key);\n\n        // Prepend the \"__$$compoundKey.\" prefix\n        key = compoundKeysPropertyName + '.' + key;\n\n        validateKeyLength(key);\n        return key;\n    }\n\n    function decodeCompoundKey(key) {\n        validateKeyLength(key);\n\n        // Remove the \"__$$compoundKey.\" prefix\n        key = key.substr(compoundKeysPropertyName.length + 1);\n\n        // Decode the key\n        key = idbModules.Key.decode(key);\n        return key;\n    }\n\n    function validateKeyLength(key) {\n        // BUG: Internet Explorer truncates string keys at 889 characters\n        if (key.length > 889) {\n            throw idbModules.util.createDOMException(\"DataError\", \"The encoded key is \" + key.length + \" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.\");\n        }\n    }\n\n    idbModules.polyfill = polyfill;\n})(idbModules);\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * Implementation of the Structured Cloning Algorithm.  Supports the\n     * following object types:\n     * - Blob\n     * - Boolean\n     * - Date object\n     * - File object (deserialized as Blob object).\n     * - Number object\n     * - RegExp object\n     * - String object\n     * This is accomplished by doing the following:\n     * 1) Using the cycle/decycle functions from:\n     *    https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n     * 2) Serializing/deserializing objects to/from string that don't work with\n     *    JSON.stringify and JSON.parse by using object specific logic (eg use \n     *    the FileReader API to convert a Blob or File object to a data URL.   \n     * 3) JSON.stringify and JSON.parse do the final conversion to/from string.\n     */\n    var Sca = (function(){\n        return {\n            decycle: function(object, callback) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert the following object types to string\n                // so that they can properly be encoded using JSON.stringify:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Make a deep copy of an object or array, assuring that there is at most\n                // one instance of each object or array in the resulting structure. The\n                // duplicate references (which might be forming cycles) are replaced with\n                // an object of the form\n                //      {$ref: PATH}\n                // where the PATH is a JSONPath string that locates the first occurance.\n                // So,\n                //      var a = [];\n                //      a[0] = a;\n                //      return JSON.stringify(JSON.decycle(a));\n                // produces the string '[{\"$ref\":\"$\"}]'.\n\n                // JSONPath is used to locate the unique object. $ indicates the top level of\n                // the object or array. [NUMBER] or [STRING] indicates a child member or\n                // property.\n\n                var objects = [],   // Keep a reference to each unique object or array\n                paths = [],     // Keep the path to each unique object or array\n                queuedObjects = [],\n                returnCallback = callback;\n\n                /**\n                 * Check the queue to see if all objects have been processed.\n                 * if they have, call the callback with the converted object.\n                 */\n                function checkForCompletion() {\n                    if (queuedObjects.length === 0) {\n                        returnCallback(derezObj);\n                    }    \n                }\n\n                /**\n                 * Convert a blob to a data URL.\n                 * @param {Blob} blob to convert.\n                 * @param {String} path of blob in object being encoded.\n                 */\n                function readBlobAsDataURL(blob, path) {\n                    var reader = new FileReader();\n                    reader.onloadend = function(loadedEvent) {\n                        var dataURL = loadedEvent.target.result;\n                        var blobtype = 'Blob';\n                        if (blob instanceof File) {\n                            //blobtype = 'File';\n                        }\n                        updateEncodedBlob(dataURL, path, blobtype);\n                    };\n                    reader.readAsDataURL(blob);\n                }\n                \n                /**\n                 * Async handler to update a blob object to a data URL for encoding.\n                 * @param {String} dataURL\n                 * @param {String} path\n                 * @param {String} blobtype - file if the blob is a file; blob otherwise\n                 */\n                function updateEncodedBlob(dataURL, path, blobtype) {\n                    var encoded = queuedObjects.indexOf(path);\n                    path = path.replace('$','derezObj');\n                    eval(path+'.$enc=\"'+dataURL+'\"');\n                    eval(path+'.$type=\"'+blobtype+'\"');\n                    queuedObjects.splice(encoded, 1);\n                    checkForCompletion();\n                }\n\n                function derez(value, path) {\n\n                    // The derez recurses through the object, producing the deep copy.\n\n                    var i,          // The loop counter\n                    name,       // Property name\n                    nu;         // The new object or array\n\n                    // typeof null === 'object', so go on if this value is really an object but not\n                    // one of the weird builtin objects.\n\n                    if (typeof value === 'object' && value !== null &&\n                        !(value instanceof Boolean) &&\n                        !(value instanceof Date)    &&\n                        !(value instanceof Number)  &&\n                        !(value instanceof RegExp)  &&\n                        !(value instanceof Blob)  &&\n                        !(value instanceof String)) {\n\n                        // If the value is an object or array, look to see if we have already\n                        // encountered it. If so, return a $ref/path object. This is a hard way,\n                        // linear search that will get slower as the number of unique objects grows.\n\n                        for (i = 0; i < objects.length; i += 1) {\n                            if (objects[i] === value) {\n                                return {$ref: paths[i]};\n                            }\n                        }\n\n                        // Otherwise, accumulate the unique value and its path.\n\n                        objects.push(value);\n                        paths.push(path);\n\n                        // If it is an array, replicate the array.\n\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            nu = [];\n                            for (i = 0; i < value.length; i += 1) {\n                                nu[i] = derez(value[i], path + '[' + i + ']');\n                            }\n                        } else {\n                            // If it is an object, replicate the object.\n                            nu = {};\n                            for (name in value) {\n                                if (Object.prototype.hasOwnProperty.call(value, name)) {\n                                    nu[name] = derez(value[name],\n                                     path + '[' + JSON.stringify(name) + ']');\n                                }\n                            }\n                        }\n\n                        return nu;\n                    } else if (value instanceof Blob) {\n                        //Queue blob for conversion\n                        queuedObjects.push(path);\n                        readBlobAsDataURL(value, path);\n                    } else if (value instanceof Boolean) {\n                        value = {\n                            '$type': 'Boolean',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof Date) {\n                        value = {\n                            '$type': 'Date',\n                            '$enc': value.getTime()\n                        };\n                    } else if (value instanceof Number) {\n                        value = {\n                            '$type': 'Number',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof RegExp) {\n                        value = {\n                            '$type': 'RegExp',\n                            '$enc': value.toString()\n                        };\n                    } else if (typeof value === 'number') {\n                        value = {\n                            '$type': 'number',\n                            '$enc': value + ''  // handles NaN, Infinity, Negative Infinity\n                        };\n                    } else if (value === undefined) {\n                        value = {\n                            '$type': 'undefined'\n                        };\n                    }\n                    return value;\n                }\n                var derezObj = derez(object, '$');\n                checkForCompletion();\n            },\n                \n            retrocycle: function retrocycle($) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert strings to the following object types \n                // so that they can properly be decoded:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Restore an object that was reduced by decycle. Members whose values are\n                // objects of the form\n                //      {$ref: PATH}\n                // are replaced with references to the value found by the PATH. This will\n                // restore cycles. The object will be mutated.\n\n                // The eval function is used to locate the values described by a PATH. The\n                // root object is kept in a $ variable. A regular expression is used to\n                // assure that the PATH is extremely well formed. The regexp contains nested\n                // * quantifiers. That has been known to have extremely bad performance\n                // problems on some browsers for very long strings. A PATH is expected to be\n                // reasonably short. A PATH is allowed to belong to a very restricted subset of\n                // Goessner's JSONPath.\n\n                // So,\n                //      var s = '[{\"$ref\":\"$\"}]';\n                //      return JSON.retrocycle(JSON.parse(s));\n                // produces an array containing a single element which is the array itself.\n\n                var px = /^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\n                \n                /**\n                 * Converts the specified data URL to a Blob object\n                 * @param {String} dataURL to convert to a Blob\n                 * @returns {Blob} the converted Blob object\n                 */\n                function dataURLToBlob(dataURL) {\n                    var BASE64_MARKER = ';base64,',\n                        contentType,\n                        parts,\n                        raw;\n                    if (dataURL.indexOf(BASE64_MARKER) === -1) {\n                        parts = dataURL.split(',');\n                        contentType = parts[0].split(':')[1];\n                        raw = parts[1];\n\n                        return new Blob([raw], {type: contentType});\n                    }\n\n                    parts = dataURL.split(BASE64_MARKER);\n                    contentType = parts[0].split(':')[1];\n                    raw = window.atob(parts[1]);\n                    var rawLength = raw.length;\n                    var uInt8Array = new Uint8Array(rawLength);\n\n                    for (var i = 0; i < rawLength; ++i) {\n                        uInt8Array[i] = raw.charCodeAt(i);\n                    }\n                    return new Blob([uInt8Array.buffer], {type: contentType});\n                }\n                \n                function rez(value) {\n                    // The rez function walks recursively through the object looking for $ref\n                    // properties. When it finds one that has a value that is a path, then it\n                    // replaces the $ref object with a reference to the value that is found by\n                    // the path.\n\n                    var i, item, name, path;\n\n                    if (value && typeof value === 'object') {\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            for (i = 0; i < value.length; i += 1) {\n                                item = value[i];\n                                if (item && typeof item === 'object') {\n                                    path = item.$ref;\n                                    if (typeof path === 'string' && px.test(path)) {\n                                        value[i] = eval(path);\n                                    } else {\n                                        value[i] = rez(item);\n                                    }\n                                }\n                            }\n                        } else {\n                            if (value.$type !== undefined) {\n                                switch(value.$type) {\n                                    case 'Blob':\n                                    case 'File':\n                                        value = dataURLToBlob(value.$enc);\n                                        break;\n                                    case 'Boolean':\n                                        value = Boolean(value.$enc === 'true');\n                                        break;\n                                    case 'Date':\n                                        value = new Date(value.$enc);\n                                        break;\n                                    case 'Number':\n                                        value = Number(value.$enc);\n                                        break;\n                                    case 'RegExp':\n                                        value = eval(value.$enc);\n                                        break;\n                                    case 'number':\n                                        value = parseFloat(value.$enc);\n                                        break;\n                                    case 'undefined':\n                                        value = undefined;\n                                        break;\n                                }\n                            } else {\n                                for (name in value) {\n                                    if (typeof value[name] === 'object') {\n                                        item = value[name];\n                                        if (item) {\n                                            path = item.$ref;\n                                            if (typeof path === 'string' && px.test(path)) {\n                                                value[name] = eval(path);\n                                            } else {\n                                                value[name] = rez(item);\n                                            }\n                                        }\n                                    }   \n                                }\n                            }\n                        }\n                    }\n                    return value;\n                }\n                return rez($);\n\n            },\n\n            /**\n             * Encode the specified object as a string.  Because of the asynchronus\n             * conversion of Blob/File to string, the encode function requires\n             * a callback\n             * @param {Object} val the value to convert.\n             * @param {function} callback the function to call once conversion is\n             * complete.  The callback gets called with the converted value.\n             */\n            \"encode\": function(val, callback){\n                function finishEncode(val) {\n                    callback(JSON.stringify(val));\n                }\n                this.decycle(val, finishEncode);                        \n            },\n                    \n            /**\n             * Deserialize the specified string to an object\n             * @param {String} val the serialized string\n             * @returns {Object} the deserialized object\n             */\n            \"decode\": function(val){\n                return this.retrocycle(JSON.parse(val));\n            }\n        };\n    }());\n    idbModules.Sca = Sca;\n}(idbModules));\n\n(function(idbModules) {\n    \"use strict\";\n\n    /**\n     * Encodes the keys based on their types. This is required to maintain collations\n     */\n    var collations = [\"undefined\", \"number\", \"date\", \"string\", \"array\"];\n\n    /**\n     * The sign values for numbers, ordered from least to greatest.\n     *  - \"negativeInfinity\": Sorts below all other values.\n     *  - \"bigNegative\": Negative values less than or equal to negative one.\n     *  - \"smallNegative\": Negative values between negative one and zero, noninclusive.\n     *  - \"smallPositive\": Positive values between zero and one, including zero but not one.\n     *  - \"largePositive\": Positive values greater than or equal to one.\n     *  - \"positiveInfinity\": Sorts above all other values.\n     */\n    var signValues = [\"negativeInfinity\", \"bigNegative\", \"smallNegative\", \"smallPositive\", \"bigPositive\", \"positiveInfinity\"];\n\n    var types = {\n        // Undefined is not a valid key type.  It's only used when there is no key.\n        undefined: {\n            encode: function(key) {\n                return collations.indexOf(\"undefined\") + \"-\";\n            },\n            decode: function(key) {\n                return undefined;\n            }\n        },\n\n        // Dates are encoded as ISO 8601 strings, in UTC time zone.\n        date: {\n            encode: function(key) {\n                return collations.indexOf(\"date\") + \"-\" + key.toJSON();\n            },\n            decode: function(key) {\n                return new Date(key.substring(2));\n            }\n        },\n\n        // Numbers are represented in a lexically sortable base-32 sign-exponent-mantissa\n        // notation.\n        //\n        // sign: takes a value between zero and five, inclusive. Represents infinite cases\n        //     and the signs of both the exponent and the fractional part of the number.\n        // exponent: paded to two base-32 digits, represented by the 32's compliment in the\n        //     \"smallPositive\" and \"bigNegative\" cases to ensure proper lexical sorting.\n        // mantissa: also called the fractional part. Normed 11-digit base-32 representation.\n        //     Represented by the 32's compliment in the \"smallNegative\" and \"bigNegative\"\n        //     cases to ensure proper lexical sorting.\n        number: {\n            // The encode step checks for six numeric cases and generates 14-digit encoded\n            // sign-exponent-mantissa strings.\n            encode: function(key) {\n                var key32 = Math.abs(key).toString(32);\n                // Get the index of the decimal.\n                var decimalIndex = key32.indexOf(\".\");\n                // Remove the decimal.\n                key32 = (decimalIndex !== -1) ? key32.replace(\".\", \"\") : key32;\n                // Get the index of the first significant digit.\n                var significantDigitIndex = key32.search(/[^0]/);\n                // Truncate leading zeros.\n                key32 = key32.slice(significantDigitIndex);\n                var sign, exponent = zeros(2), mantissa = zeros(11);\n\n                // Finite cases:\n                if (isFinite(key)) {\n                    // Negative cases:\n                    if (key < 0) {\n                        // Negative exponent case:\n                        if (key > -1) {\n                            sign = signValues.indexOf(\"smallNegative\");\n                            exponent = padBase32Exponent(significantDigitIndex);\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigNegative\");\n                            exponent = flipBase32(padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            ));\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                    }\n                    // Non-negative cases:\n                    else {\n                        // Negative exponent case:\n                        if (key < 1) {\n                            sign = signValues.indexOf(\"smallPositive\");\n                            exponent = flipBase32(padBase32Exponent(significantDigitIndex));\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigPositive\");\n                            exponent = padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            );\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                    }\n                }\n                // Infinite cases:\n                else {\n                    sign = signValues.indexOf(\n                        key > 0 ? \"positiveInfinity\" : \"negativeInfinity\"\n                    );\n                }\n\n                return collations.indexOf(\"number\") + \"-\" + sign + exponent + mantissa;\n            },\n            // The decode step must interpret the sign, reflip values encoded as the 32's complements,\n            // apply signs to the exponent and mantissa, do the base-32 power operation, and return\n            // the original JavaScript number values.\n            decode: function(key) {\n                var sign = +key.substr(2, 1);\n                var exponent = key.substr(3, 2);\n                var mantissa = key.substr(5, 11);\n\n                switch (signValues[sign]) {\n                    case \"negativeInfinity\":\n                        return -Infinity;\n                    case \"positiveInfinity\":\n                        return Infinity;\n                    case \"bigPositive\":\n                        return pow32(mantissa, exponent);\n                    case \"smallPositive\":\n                        exponent = negate(flipBase32(exponent));\n                        return pow32(mantissa, exponent);\n                    case \"smallNegative\":\n                        exponent = negate(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    case \"bigNegative\":\n                        exponent = flipBase32(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    default:\n                        throw new Error(\"Invalid number.\");\n                }\n            }\n        },\n\n        // Strings are encoded as JSON strings (with quotes and unicode characters escaped).\n        //\n        // IF the strings are in an array, then some extra encoding is done to make sorting work correctly:\n        // Since we can't force all strings to be the same length, we need to ensure that characters line-up properly\n        // for sorting, while also accounting for the extra characters that are added when the array itself is encoded as JSON.\n        // To do this, each character of the string is prepended with a dash (\"-\"), and a space is added to the end of the string.\n        // This effectively doubles the size of every string, but it ensures that when two arrays of strings are compared,\n        // the indexes of each string's characters line up with each other.\n        string: {\n            encode: function(key, inArray) {\n                if (inArray) {\n                    // prepend each character with a dash, and append a space to the end\n                    key = key.replace(/(.)/g, '-$1') + ' ';\n                }\n                return collations.indexOf(\"string\") + \"-\" + key;\n            },\n            decode: function(key, inArray) {\n                key = key.substring(2);\n                if (inArray) {\n                    // remove the space at the end, and the dash before each character\n                    key = key.substr(0, key.length - 1).replace(/-(.)/g, '$1');\n                }\n                return key;\n            }\n        },\n\n        // Arrays are encoded as JSON strings.\n        // An extra, value is added to each array during encoding to make empty arrays sort correctly.\n        array: {\n            encode: function(key) {\n                var encoded = [];\n                for (var i = 0; i < key.length; i++) {\n                    var item = key[i];\n                    var encodedItem = idbModules.Key.encode(item, true);        // encode the array item\n                    encoded[i] = encodedItem;\n                }\n                encoded.push(collations.indexOf(\"undefined\") + \"-\");            // append an extra item, so empty arrays sort correctly\n                return collations.indexOf(\"array\") + \"-\" + JSON.stringify(encoded);\n            },\n            decode: function(key) {\n                var decoded = JSON.parse(key.substring(2));\n                decoded.pop();                                                  // remove the extra item\n                for (var i = 0; i < decoded.length; i++) {\n                    var item = decoded[i];\n                    var decodedItem = idbModules.Key.decode(item, true);        // decode the item\n                    decoded[i] = decodedItem;\n                }\n                return decoded;\n            }\n        }\n    };\n\n    /**\n     * Return a padded base-32 exponent value.\n     * @param {number}\n     * @return {string}\n     */\n    function padBase32Exponent(n) {\n        n = n.toString(32);\n        return (n.length === 1) ? \"0\" + n : n;\n    }\n\n    /**\n     * Return a padded base-32 mantissa.\n     * @param {string}\n     * @return {string}\n     */\n    function padBase32Mantissa(s) {\n        return (s + zeros(11)).slice(0, 11);\n    }\n\n    /**\n     * Flips each digit of a base-32 encoded string.\n     * @param {string} encoded\n     */\n    function flipBase32(encoded) {\n        var flipped = \"\";\n        for (var i = 0; i < encoded.length; i++) {\n            flipped += (31 - parseInt(encoded[i], 32)).toString(32);\n        }\n        return flipped;\n    }\n\n    /**\n     * Base-32 power function.\n     * RESEARCH: This function does not precisely decode floats because it performs\n     * floating point arithmetic to recover values. But can the original values be\n     * recovered exactly?\n     * Someone may have already figured out a good way to store JavaScript floats as\n     * binary strings and convert back. Barring a better method, however, one route\n     * may be to generate decimal strings that `parseFloat` decodes predictably.\n     * @param {string}\n     * @param {string}\n     * @return {number}\n     */\n    function pow32(mantissa, exponent) {\n        var whole, fraction, expansion;\n        exponent = parseInt(exponent, 32);\n        if (exponent < 0) {\n            return roundToPrecision(\n                parseInt(mantissa, 32) * Math.pow(32, exponent - 10)\n            );\n        }\n        else {\n            if (exponent < 11) {\n                whole = mantissa.slice(0, exponent);\n                whole = parseInt(whole, 32);\n                fraction = mantissa.slice(exponent);\n                fraction = parseInt(fraction, 32) * Math.pow(32, exponent - 11);\n                return roundToPrecision(whole + fraction);\n            }\n            else {\n                expansion = mantissa + zeros(exponent - 11);\n                return parseInt(expansion, 32);\n            }\n        }\n    }\n\n    /**\n     *\n     */\n    function roundToPrecision(num, precision) {\n        precision = precision || 16;\n        return parseFloat(num.toPrecision(precision));\n    }\n\n    /**\n     * Returns a string of n zeros.\n     * @param {number}\n     * @return {string}\n     */\n    function zeros(n) {\n        var result = \"\";\n        while (n--) {\n            result = result + \"0\";\n        }\n        return result;\n    }\n\n    /**\n     * Negates numeric strings.\n     * @param {string}\n     * @return {string}\n     */\n    function negate(s) {\n        return \"-\" + s;\n    }\n\n    /**\n     * Returns the string \"number\", \"date\", \"string\", or \"array\".\n     */\n    function getType(key) {\n        if (key instanceof Date) {\n            return \"date\";\n        }\n        if (key instanceof Array) {\n            return \"array\";\n        }\n        return typeof key;\n    }\n\n    /**\n     * Keys must be strings, numbers, Dates, or Arrays\n     */\n    function validate(key) {\n        var type = getType(key);\n        if (type === \"array\") {\n            for (var i = 0; i < key.length; i++) {\n                validate(key[i]);\n            }\n        }\n        else if (!types[type] || (type !== \"string\" && isNaN(key))) {\n            throw idbModules.util.createDOMException(\"DataError\", \"Not a valid key\");\n        }\n    }\n\n    /**\n     * Returns the value of an inline key\n     * @param {object} source\n     * @param {string|array} keyPath\n     */\n    function getValue(source, keyPath) {\n        try {\n            if (keyPath instanceof Array) {\n                var arrayValue = [];\n                for (var i = 0; i < keyPath.length; i++) {\n                    arrayValue.push(eval(\"source.\" + keyPath[i]));\n                }\n                return arrayValue;\n            } else {\n                return eval(\"source.\" + keyPath);\n            }\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n\n    /**\n     * Sets the inline key value\n     * @param {object} source\n     * @param {string} keyPath\n     * @param {*} value\n     */\n    function setValue(source, keyPath, value) {\n        var props = keyPath.split('.');\n        for (var i = 0; i < props.length - 1; i++) {\n            var prop = props[i];\n            source = source[prop] = source[prop] || {};\n        }\n        source[props[props.length - 1]] = value;\n    }\n\n    /**\n     * Determines whether an index entry matches a multi-entry key value.\n     * @param {string} encodedEntry     The entry value (already encoded)\n     * @param {string} encodedKey       The full index key (already encoded)\n     * @returns {boolean}\n     */\n    function isMultiEntryMatch(encodedEntry, encodedKey) {\n        var keyType = collations[encodedKey.substring(0, 1)];\n\n        if (keyType === \"array\") {\n            return encodedKey.indexOf(encodedEntry) > 1;\n        }\n        else {\n            return encodedKey === encodedEntry;\n        }\n    }\n\n    function isKeyInRange(key, range) {\n        var lowerMatch = range.lower === undefined;\n        var upperMatch = range.upper === undefined;\n        var encodedKey = idbModules.Key.encode(key, true);\n\n        if (range.lower !== undefined) {\n            if (range.lowerOpen && encodedKey > range.__lower) {\n                lowerMatch = true;\n            }\n            if (!range.lowerOpen && encodedKey >= range.__lower) {\n                lowerMatch = true;\n            }\n        }\n        if (range.upper !== undefined) {\n            if (range.upperOpen && encodedKey < range.__upper) {\n                upperMatch = true;\n            }\n            if (!range.upperOpen && encodedKey <= range.__upper) {\n                upperMatch = true;\n            }\n        }\n\n        return lowerMatch && upperMatch;\n    }\n\n    function findMultiEntryMatches(keyEntry, range) {\n        var matches = [];\n\n        if (keyEntry instanceof Array) {\n            for (var i = 0; i < keyEntry.length; i++) {\n                var key = keyEntry[i];\n\n                if (key instanceof Array) {\n                    if (range.lower === range.upper) {\n                        continue;\n                    }\n                    if (key.length === 1) {\n                        key = key[0];\n                    } else {\n                        var nested = findMultiEntryMatches(key, range);\n                        if (nested.length > 0) {\n                            matches.push(key);\n                        }\n                        continue;\n                    }\n                }\n\n                if (isKeyInRange(key, range)) {\n                    matches.push(key);\n                }\n            }\n        } else {\n            if (isKeyInRange(keyEntry, range)) {\n                matches.push(keyEntry);\n            }\n        }\n        return matches;\n    }\n\n    idbModules.Key = {\n        encode: function(key, inArray) {\n            if (key === undefined) {\n                return null;\n            }\n            return types[getType(key)].encode(key, inArray);\n        },\n        decode: function(key, inArray) {\n            if (typeof key !== \"string\") {\n                return undefined;\n            }\n            return types[collations[key.substring(0, 1)]].decode(key, inArray);\n        },\n        validate: validate,\n        getValue: getValue,\n        setValue: setValue,\n        isMultiEntryMatch: isMultiEntryMatch,\n        findMultiEntryMatches: findMultiEntryMatches\n    };\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native Event object, for browsers that support it\n     * @returns {Event}\n     */\n    function createNativeEvent(type, debug) {\n        var event = new Event(type);\n        event.debug = debug;\n\n        // Make the \"target\" writable\n        Object.defineProperty(event, 'target', {\n            writable: true\n        });\n\n        return event;\n    }\n\n    /**\n     * A shim Event class, for browsers that don't allow us to create native Event objects.\n     * @constructor\n     */\n    function ShimEvent(type, debug) {\n        this.type = type;\n        this.debug = debug;\n        this.bubbles = false;\n        this.cancelable = false;\n        this.eventPhase = 0;\n        this.timeStamp = new Date().valueOf();\n    }\n\n    var useNativeEvent = false;\n    try {\n        // Test whether we can use the browser's native Event class\n        var test = createNativeEvent('test type', 'test debug');\n        var target = {test: 'test target'};\n        test.target = target;\n\n        if (test instanceof Event && test.type === 'test type' && test.debug === 'test debug' && test.target === target) {\n            // Native events work as expected\n            useNativeEvent = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeEvent) {\n        idbModules.Event = Event;\n        idbModules.IDBVersionChangeEvent = Event;\n        idbModules.util.createEvent = createNativeEvent;\n    }\n    else {\n        idbModules.Event = ShimEvent;\n        idbModules.IDBVersionChangeEvent = ShimEvent;\n        idbModules.util.createEvent = function(type, debug) {\n            return new ShimEvent(type, debug);\n        };\n    }\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native DOMException, for browsers that support it\n     * @returns {DOMException}\n     */\n    function createNativeDOMException(name, message) {\n        var e = new DOMException.prototype.constructor(0, message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Creates a native DOMError, for browsers that support it\n     * @returns {DOMError}\n     */\n    function createNativeDOMError(name, message) {\n        name = name || 'DOMError';\n        var e = new DOMError(name, message);\n        e.name === name || (e.name = name);\n        e.message === message || (e.message = message);\n        return e;\n    }\n\n    /**\n     * Creates a generic Error object\n     * @returns {Error}\n     */\n    function createError(name, message) {\n        var e = new Error(message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Logs detailed error information to the console.\n     * @param {string} name\n     * @param {string} message\n     * @param {string|Error|null} error\n     */\n    idbModules.util.logError = function(name, message, error) {\n        if (idbModules.DEBUG) {\n            if (error && error.message) {\n                error = error.message;\n            }\n\n            var method = typeof(console.error) === 'function' ? 'error' : 'log';\n            console[method](name + ': ' + message + '. ' + (error || ''));\n            console.trace && console.trace();\n        }\n    };\n\n    /**\n     * Finds the error argument.  This is useful because some WebSQL callbacks\n     * pass the error as the first argument, and some pass it as the second argument.\n     * @param {array} args\n     * @returns {Error|DOMException|undefined}\n     */\n    idbModules.util.findError = function(args) {\n        var err;\n        if (args) {\n            if (args.length === 1) {\n                return args[0];\n            }\n            for (var i = 0; i < args.length; i++) {\n                var arg = args[i];\n                if (arg instanceof Error || arg instanceof DOMException) {\n                    return arg;\n                }\n                else if (arg && typeof arg.message === \"string\") {\n                    err = arg;\n                }\n            }\n        }\n        return err;\n    };\n\n    var test, useNativeDOMException = false, useNativeDOMError = false;\n\n    // Test whether we can use the browser's native DOMException class\n    try {\n        test = createNativeDOMException('test name', 'test message');\n        if (test instanceof DOMException && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMException works as expected\n            useNativeDOMException = true;\n        }\n    }\n    catch (e) {}\n\n    // Test whether we can use the browser's native DOMError class\n    try {\n        test = createNativeDOMError('test name', 'test message');\n        if (test instanceof DOMError && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMError works as expected\n            useNativeDOMError = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeDOMException) {\n        idbModules.DOMException = DOMException;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMException(name, message);\n        };\n    }\n    else {\n        idbModules.DOMException = Error;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n\n    if (useNativeDOMError) {\n        idbModules.DOMError = DOMError;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMError(name, message);\n        };\n    }\n    else {\n        idbModules.DOMError = Error;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * The IDBRequest Object that is returns for all async calls\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api\n     */\n    function IDBRequest(){\n        this.onsuccess = this.onerror = this.result = this.error = this.source = this.transaction = null;\n        this.readyState = \"pending\";\n    }\n\n    /**\n     * The IDBOpenDBRequest called when a database is opened\n     */\n    function IDBOpenDBRequest(){\n        this.onblocked = this.onupgradeneeded = null;\n    }\n    IDBOpenDBRequest.prototype = new IDBRequest();\n    IDBOpenDBRequest.prototype.constructor = IDBOpenDBRequest;\n    \n    idbModules.IDBRequest = IDBRequest;\n    idbModules.IDBOpenDBRequest = IDBOpenDBRequest;\n    \n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB KeyRange object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#dfn-key-range\n     * @param {Object} lower\n     * @param {Object} upper\n     * @param {Object} lowerOpen\n     * @param {Object} upperOpen\n     */\n    function IDBKeyRange(lower, upper, lowerOpen, upperOpen){\n        if (lower !== undefined) {\n            idbModules.Key.validate(lower);\n        }\n        if (upper !== undefined) {\n            idbModules.Key.validate(upper);\n        }\n\n        this.lower = lower;\n        this.upper = upper;\n        this.lowerOpen = !!lowerOpen;\n        this.upperOpen = !!upperOpen;\n    }\n\n    IDBKeyRange.only = function(value){\n        return new IDBKeyRange(value, value, false, false);\n    };\n\n    IDBKeyRange.lowerBound = function(value, open){\n        return new IDBKeyRange(value, undefined, open, undefined);\n    };\n    IDBKeyRange.upperBound = function(value, open){\n        return new IDBKeyRange(undefined, value, undefined, open);\n    };\n    IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen){\n        return new IDBKeyRange(lower, upper, lowerOpen, upperOpen);\n    };\n\n    idbModules.IDBKeyRange = IDBKeyRange;\n\n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB Cursor Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBCursor\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @param {IDBObjectStore} store\n     * @param {IDBObjectStore|IDBIndex} source\n     * @param {string} keyColumnName\n     * @param {string} valueColumnName\n     * @param {boolean} count\n     */\n    function IDBCursor(range, direction, store, source, keyColumnName, valueColumnName, count){\n        // Calling openCursor on an index or objectstore with null is allowed but we treat it as undefined internally\n        if (range === null) {\n            range = undefined;\n        }\n        if (range !== undefined && !(range instanceof idbModules.IDBKeyRange)) {\n            range = new idbModules.IDBKeyRange(range, range, false, false);\n        }\n        store.transaction.__assertActive();\n        if (direction !== undefined && [\"next\", \"prev\", \"nextunique\", \"prevunique\"].indexOf(direction) === -1) {\n            throw new TypeError(direction + \"is not a valid cursor direction\");\n        }\n\n        this.source = source;\n        this.direction = direction || \"next\";\n        this.key = undefined;\n        this.primaryKey = undefined;\n        this.__store = store;\n        this.__range = range;\n        this.__req = new idbModules.IDBRequest();\n        this.__keyColumnName = keyColumnName;\n        this.__valueColumnName = valueColumnName;\n        this.__valueDecoder = valueColumnName === \"value\" ? idbModules.Sca : idbModules.Key;\n        this.__count = count;\n        this.__offset = -1; // Setting this to -1 as continue will set it to 0 anyway\n        this.__lastKeyContinued = undefined; // Used when continuing with a key\n        this.__multiEntryIndex = source instanceof idbModules.IDBIndex ? source.multiEntry : false;\n        this.__unique = this.direction.indexOf(\"unique\") !== -1;\n\n        if (range !== undefined) {\n            // Encode the key range and cache the encoded values, so we don't have to re-encode them over and over\n            range.__lower = range.lower !== undefined && idbModules.Key.encode(range.lower, this.__multiEntryIndex);\n            range.__upper = range.upper !== undefined && idbModules.Key.encode(range.upper, this.__multiEntryIndex);\n        }\n\n        this[\"continue\"]();\n    }\n\n    IDBCursor.prototype.__find = function (/* key, tx, success, error, recordsToLoad */) {\n        var args = Array.prototype.slice.call(arguments);\n        if (this.__multiEntryIndex) {\n            this.__findMultiEntry.apply(this, args);\n        } else {\n            this.__findBasic.apply(this, args);\n        }\n    };\n\n    IDBCursor.prototype.__findBasic = function (key, tx, success, error, recordsToLoad) {\n        recordsToLoad = recordsToLoad || 1;\n\n        var me = this;\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined || me.__range.upper !== undefined )) {\n            sql.push(\"AND\");\n            if (me.__range.lower !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.lowerOpen ? \">\" : \">=\"), \"?\");\n                sqlValues.push(me.__range.__lower);\n            }\n            (me.__range.lower !== undefined && me.__range.upper !== undefined) && sql.push(\"AND\");\n            if (me.__range.upper !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.upperOpen ? \"<\" : \"<=\"), \"?\");\n                sqlValues.push(me.__range.__upper);\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY\", quotedKeyColumnName, direction);\n            sql.push(\"LIMIT\", recordsToLoad, \"OFFSET\", me.__offset);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            if (me.__count) {\n                success(undefined, data.rows.length, undefined);\n            }\n            else if (data.rows.length > 1) {\n                me.__prefetchedData = data.rows;\n                me.__prefetchedIndex = 0;\n                idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for cursor\");\n                me.__decode(data.rows.item(0), success);\n            }\n            else if (data.rows.length === 1) {\n                me.__decode(data.rows.item(0), success);\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of cursors\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    IDBCursor.prototype.__findMultiEntry = function (key, tx, success, error) {\n        var me = this;\n\n        if (me.__prefetchedData && me.__prefetchedData.length === me.__prefetchedIndex) {\n            idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n            success(undefined, undefined, undefined);\n            return;\n        }\n\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined && me.__range.upper !== undefined)) {\n            if (me.__range.upper.indexOf(me.__range.lower) === 0) {\n                sql.push(\"AND\", quotedKeyColumnName, \"LIKE ?\");\n                sqlValues.push(\"%\" + me.__range.__lower.slice(0, -1) + \"%\");\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY key\", direction);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            me.__multiEntryOffset = data.rows.length;\n\n            if (data.rows.length > 0) {\n                var rows = [];\n\n                for (var i = 0; i < data.rows.length; i++) {\n                    var rowItem = data.rows.item(i);\n                    var rowKey = idbModules.Key.decode(rowItem[me.__keyColumnName], true);\n                    var matches = idbModules.Key.findMultiEntryMatches(rowKey, me.__range);\n\n                    for (var j = 0; j < matches.length; j++) {\n                        var matchingKey = matches[j];\n                        var clone = {\n                            matchingKey: idbModules.Key.encode(matchingKey, true),\n                            key: rowItem.key\n                        };\n                        clone[me.__keyColumnName] = rowItem[me.__keyColumnName];\n                        clone[me.__valueColumnName] = rowItem[me.__valueColumnName];\n                        rows.push(clone);\n                    }\n                }\n\n                var reverse = me.direction.indexOf(\"prev\") === 0;\n                rows.sort(function (a, b) {\n                    if (a.matchingKey.replace('[','z') < b.matchingKey.replace('[','z')) {\n                        return reverse ? 1 : -1;\n                    }\n                    if (a.matchingKey.replace('[','z') > b.matchingKey.replace('[','z')) {\n                        return reverse ? -1 : 1;\n                    }\n                    if (a.key < b.key) {\n                        return me.direction === \"prev\" ? 1 : -1;\n                    }\n                    if (a.key > b.key) {\n                        return me.direction === \"prev\" ? -1 : 1;\n                    }\n                    return 0;\n                });\n\n                me.__prefetchedData = {\n                    data: rows,\n                    length: rows.length,\n                    item: function (index) {\n                        return this.data[index];\n                    }\n                };\n                me.__prefetchedIndex = 0;\n\n                if (me.__count) {\n                    success(undefined, rows.length, undefined);\n                }\n                else if (rows.length > 1) {\n                    idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else if (rows.length === 1) {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    success(undefined, undefined, undefined);\n                }\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    /**\n     * Creates an \"onsuccess\" callback\n     * @private\n     */\n    IDBCursor.prototype.__onsuccess = function(success) {\n        var me = this;\n        return function(key, value, primaryKey) {\n            if (me.__count) {\n                success(value, me.__req);\n            }\n            else {\n                me.key = key === undefined ? null : key;\n                me.value = value === undefined ? null : value;\n                me.primaryKey = primaryKey === undefined ? null : primaryKey;\n                var result = key === undefined ? null : me;\n                success(result, me.__req);\n            }\n        };\n    };\n\n    IDBCursor.prototype.__decode = function (rowItem, callback) {\n        if (this.__multiEntryIndex && this.__unique) {\n            if (!this.__matchedKeys) {\n                this.__matchedKeys = {};\n            }\n            if (this.__matchedKeys[rowItem.matchingKey]) {\n                callback(undefined, undefined, undefined);\n                return;\n            }\n            this.__matchedKeys[rowItem.matchingKey] = true;\n        }\n        var key = idbModules.Key.decode(this.__multiEntryIndex ? rowItem.matchingKey : rowItem[this.__keyColumnName], this.__multiEntryIndex);\n        var val = this.__valueDecoder.decode(rowItem[this.__valueColumnName]);\n        var primaryKey = idbModules.Key.decode(rowItem.key);\n        callback(key, val, primaryKey);\n    };\n\n    IDBCursor.prototype[\"continue\"] = function (key) {\n        var recordsToPreloadOnContinue = idbModules.cursorPreloadPackSize || 100;\n        var me = this;\n\n        this.__store.transaction.__pushToQueue(me.__req, function cursorContinue(tx, args, success, error) {\n            me.__offset++;\n\n            if (me.__prefetchedData) {\n                // We have pre-loaded data for the cursor\n                me.__prefetchedIndex++;\n                if (me.__prefetchedIndex < me.__prefetchedData.length) {\n                    me.__decode(me.__prefetchedData.item(me.__prefetchedIndex), me.__onsuccess(success));\n                    return;\n                }\n            }\n\n            // No pre-fetched data, do query\n            me.__find(key, tx, me.__onsuccess(success), error, recordsToPreloadOnContinue);\n        });\n    };\n\n    IDBCursor.prototype.advance = function(count){\n        if (count <= 0) {\n            throw idbModules.util.createDOMException(\"Type Error\", \"Count is invalid - 0 or negative\", count);\n        }\n        var me = this;\n        this.__store.transaction.__pushToQueue(me.__req, function cursorAdvance(tx, args, success, error){\n            me.__offset += count;\n            me.__find(undefined, tx, me.__onsuccess(success), error);\n        });\n    };\n\n    IDBCursor.prototype.update = function(valueToUpdate){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return me.__store.transaction.__addToTransactionQueue(function cursorUpdate(tx, args, success, error){\n            idbModules.Sca.encode(valueToUpdate, function(encoded) {\n                me.__find(undefined, tx, function(key, value, primaryKey){\n                    var store = me.__store;\n                    var params = [encoded];\n                    var sql = [\"UPDATE\", idbModules.util.quote(store.name), \"SET value = ?\"];\n                    idbModules.Key.validate(primaryKey);\n\n                    // Also correct the indexes in the table\n                    for (var i = 0; i < store.indexNames.length; i++) {\n                        var index = store.__indexes[store.indexNames[i]];\n                        var indexKey = idbModules.Key.getValue(valueToUpdate, index.keyPath);\n                        sql.push(\",\", idbModules.util.quote(index.name), \"= ?\");\n                        params.push(idbModules.Key.encode(indexKey, index.multiEntry));\n                    }\n\n                    sql.push(\"WHERE key = ?\");\n                    params.push(idbModules.Key.encode(primaryKey));\n\n                    idbModules.DEBUG && console.log(sql.join(\" \"), encoded, key, primaryKey);\n                    tx.executeSql(sql.join(\" \"), params, function(tx, data){\n                        me.__prefetchedData = null;\n                        me.__prefetchedIndex = 0;\n                        if (data.rowsAffected === 1) {\n                            success(key);\n                        }\n                        else {\n                            error(\"No rows with key found\" + key);\n                        }\n                    }, function(tx, data){\n                        error(data);\n                    });\n                }, error);\n            });\n        });\n    };\n\n    IDBCursor.prototype[\"delete\"] = function(){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return this.__store.transaction.__addToTransactionQueue(function cursorDelete(tx, args, success, error){\n            me.__find(undefined, tx, function(key, value, primaryKey){\n                var sql = \"DELETE FROM  \" + idbModules.util.quote(me.__store.name) + \" WHERE key = ?\";\n                idbModules.DEBUG && console.log(sql, key, primaryKey);\n                idbModules.Key.validate(primaryKey);\n                tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data){\n                    me.__prefetchedData = null;\n                    me.__prefetchedIndex = 0;\n                    if (data.rowsAffected === 1) {\n                        // lower the offset or we will miss a row\n                        me.__offset--;\n                        success(undefined);\n                    }\n                    else {\n                        error(\"No rows with key found\" + key);\n                    }\n                }, function(tx, data){\n                    error(data);\n                });\n            }, error);\n        });\n    };\n\n    idbModules.IDBCursor = IDBCursor;\n}(idbModules));\n\n(function(idbModules, undefined) {\n    'use strict';\n\n    /**\n     * IDB Index\n     * http://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex\n     * @param {IDBObjectStore} store\n     * @param {IDBIndexProperties} indexProperties\n     * @constructor\n     */\n    function IDBIndex(store, indexProperties) {\n        this.objectStore = store;\n        this.name = indexProperties.columnName;\n        this.keyPath = indexProperties.keyPath;\n        this.multiEntry = indexProperties.optionalParams && indexProperties.optionalParams.multiEntry;\n        this.unique = indexProperties.optionalParams && indexProperties.optionalParams.unique;\n        this.__deleted = !!indexProperties.__deleted;\n    }\n\n    /**\n     * Clones an IDBIndex instance for a different IDBObjectStore instance.\n     * @param {IDBIndex} index\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBIndex.__clone = function(index, store) {\n        return new IDBIndex(store, {\n            columnName: index.name,\n            keyPath: index.keyPath,\n            optionalParams: {\n                multiEntry: index.multiEntry,\n                unique: index.unique\n            }\n        });\n    };\n\n    /**\n     * Creates a new index on an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @returns {IDBIndex}\n     * @protected\n     */\n    IDBIndex.__createIndex = function(store, index) {\n        var columnExists = !!store.__indexes[index.name] && store.__indexes[index.name].__deleted;\n\n        // Add the index to the IDBObjectStore\n        store.__indexes[index.name] = index;\n        store.indexNames.push(index.name);\n\n        // Create the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not create index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            function applyIndex(tx) {\n                // Update the object store's index list\n                IDBIndex.__updateIndexList(store, tx, function() {\n                    // Add index entries for all existing records\n                    tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(store.name), [], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Adding existing \" + store.name + \" records to the \" + index.name + \" index\");\n                        addIndexEntry(0);\n\n                        function addIndexEntry(i) {\n                            if (i < data.rows.length) {\n                                try {\n                                    var value = idbModules.Sca.decode(data.rows.item(i).value);\n                                    var indexKey = idbModules.Key.getValue(value, index.keyPath);\n                                    indexKey = idbModules.Key.encode(indexKey, index.multiEntry);\n\n                                    tx.executeSql(\"UPDATE \" + idbModules.util.quote(store.name) + \" set \" + idbModules.util.quote(index.name) + \" = ? where key = ?\", [indexKey, data.rows.item(i).key], function(tx, data) {\n                                        addIndexEntry(i + 1);\n                                    }, error);\n                                }\n                                catch (e) {\n                                    // Not a valid value to insert into index, so just continue\n                                    addIndexEntry(i + 1);\n                                }\n                            }\n                            else {\n                                success(store);\n                            }\n                        }\n                    }, error);\n                }, error);\n            }\n\n            if (columnExists) {\n                // For a previously existing index, just update the index entries in the existing column\n                applyIndex(tx);\n            }\n            else {\n                // For a new index, add a new column to the object store, then apply the index\n                var sql = [\"ALTER TABLE\", idbModules.util.quote(store.name), \"ADD\", idbModules.util.quote(index.name), \"BLOB\"].join(\" \");\n                idbModules.DEBUG && console.log(sql);\n                tx.executeSql(sql, [], applyIndex, error);\n            }\n        });\n    };\n\n    /**\n     * Deletes an index from an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @protected\n     */\n    IDBIndex.__deleteIndex = function(store, index) {\n        // Remove the index from the IDBObjectStore\n        store.__indexes[index.name].__deleted = true;\n        store.indexNames.splice(store.indexNames.indexOf(index.name), 1);\n\n        // Remove the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            // Update the object store's index list\n            IDBIndex.__updateIndexList(store, tx, success, error);\n        });\n    };\n\n    /**\n     * Updates index list for the given object store.\n     * @param {IDBObjectStore} store\n     * @param {object} tx\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBIndex.__updateIndexList = function(store, tx, success, failure) {\n        var indexList = {};\n        for (var i = 0; i < store.indexNames.length; i++) {\n            var idx = store.__indexes[store.indexNames[i]];\n            /** @type {IDBIndexProperties} **/\n            indexList[idx.name] = {\n                columnName: idx.name,\n                keyPath: idx.keyPath,\n                optionalParams: {\n                    unique: idx.unique,\n                    multiEntry: idx.multiEntry\n                },\n                deleted: !!idx.deleted\n            };\n        }\n\n        idbModules.DEBUG && console.log(\"Updating the index list for \" + store.name, indexList);\n        tx.executeSql(\"UPDATE __sys__ set indexList = ? where name = ?\", [JSON.stringify(indexList), store.name], function() {\n            success(store);\n        }, failure);\n    };\n\n    /**\n     * Retrieves index data for the given key\n     * @param {*|IDBKeyRange} key\n     * @param {string} opType\n     * @returns {IDBRequest}\n     * @private\n     */\n    IDBIndex.prototype.__fetchIndexData = function(key, opType) {\n        var me = this;\n        var hasKey, encodedKey;\n\n        // key is optional\n        if (arguments.length === 1) {\n            opType = key;\n            hasKey = false;\n        }\n        else {\n            idbModules.Key.validate(key);\n            encodedKey = idbModules.Key.encode(key, me.multiEntry);\n            hasKey = true;\n        }\n\n        return me.objectStore.transaction.__addToTransactionQueue(function fetchIndexData(tx, args, success, error) {\n            var sql = [\"SELECT * FROM\", idbModules.util.quote(me.objectStore.name), \"WHERE\", idbModules.util.quote(me.name), \"NOT NULL\"];\n            var sqlValues = [];\n            if (hasKey) {\n                if (me.multiEntry) {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"LIKE ?\");\n                    sqlValues.push(\"%\" + encodedKey + \"%\");\n                }\n                else {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"= ?\");\n                    sqlValues.push(encodedKey);\n                }\n            }\n            idbModules.DEBUG && console.log(\"Trying to fetch data for Index\", sql.join(\" \"), sqlValues);\n            tx.executeSql(sql.join(\" \"), sqlValues, function(tx, data) {\n                var recordCount = 0, record = null;\n                if (me.multiEntry) {\n                    for (var i = 0; i < data.rows.length; i++) {\n                        var row = data.rows.item(i);\n                        var rowKey = idbModules.Key.decode(row[me.name]);\n                        if (hasKey && idbModules.Key.isMultiEntryMatch(encodedKey, row[me.name])) {\n                            recordCount++;\n                            record = record || row;\n                        }\n                        else if (!hasKey && rowKey !== undefined) {\n                            recordCount = recordCount + (rowKey instanceof Array ? rowKey.length : 1);\n                            record = record || row;\n                        }\n                    }\n                }\n                else {\n                    recordCount = data.rows.length;\n                    record = recordCount && data.rows.item(0);\n                }\n\n                if (opType === \"count\") {\n                    success(recordCount);\n                }\n                else if (recordCount === 0) {\n                    success(undefined);\n                }\n                else if (opType === \"key\") {\n                    success(idbModules.Key.decode(record.key));\n                }\n                else { // when opType is value\n                    success(idbModules.Sca.decode(record.value));\n                }\n            }, error);\n        });\n    };\n\n    /**\n     * Opens a cursor over the given key range.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"value\").__req;\n    };\n\n    /**\n     * Opens a cursor over the given key range.  The cursor only includes key values, not data.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openKeyCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"key\").__req;\n    };\n\n    IDBIndex.prototype.get = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"value\");\n    };\n\n    IDBIndex.prototype.getKey = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"key\");\n    };\n\n    IDBIndex.prototype.count = function(key) {\n        // key is optional\n        if (key === undefined) {\n            return this.__fetchIndexData(\"count\");\n        }\n        else if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this.objectStore, this, this.name, \"value\", true).__req;\n        }\n        else {\n            return this.__fetchIndexData(key, \"count\");\n        }\n    };\n\n    idbModules.IDBIndex = IDBIndex;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * IndexedDB Object Store\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBObjectStore\n     * @param {IDBObjectStoreProperties} storeProperties\n     * @param {IDBTransaction} transaction\n     * @constructor\n     */\n    function IDBObjectStore(storeProperties, transaction) {\n        this.name = storeProperties.name;\n        this.keyPath = JSON.parse(storeProperties.keyPath);\n        this.transaction = transaction;\n\n        // autoInc is numeric (0/1) on WinPhone\n        this.autoIncrement = typeof storeProperties.autoInc === \"string\" ? storeProperties.autoInc === \"true\" : !!storeProperties.autoInc;\n\n        this.__indexes = {};\n        this.indexNames = new idbModules.util.StringList();\n        var indexList = JSON.parse(storeProperties.indexList);\n        for (var indexName in indexList) {\n            if (indexList.hasOwnProperty(indexName)) {\n                var index = new idbModules.IDBIndex(this, indexList[indexName]);\n                this.__indexes[index.name] = index;\n                if (!index.__deleted) {\n                    this.indexNames.push(index.name);\n                }\n            }\n        }\n    }\n\n    /**\n     * Clones an IDBObjectStore instance for a different IDBTransaction instance.\n     * @param {IDBObjectStore} store\n     * @param {IDBTransaction} transaction\n     * @protected\n     */\n    IDBObjectStore.__clone = function(store, transaction) {\n        var newStore = new IDBObjectStore({\n            name: store.name,\n            keyPath: JSON.stringify(store.keyPath),\n            autoInc: JSON.stringify(store.autoIncrement),\n            indexList: \"{}\"\n        }, transaction);\n        newStore.__indexes = store.__indexes;\n        newStore.indexNames = store.indexNames;\n        return newStore;\n    };\n\n    /**\n     * Creates a new object store in the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__createObjectStore = function(db, store) {\n        // Add the object store to the IDBDatabase\n        db.__objectStores[store.name] = store;\n        db.objectStoreNames.push(store.name);\n\n        // Add the object store to WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function createObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                throw idbModules.util.createDOMException(0, \"Could not create object store \\\"\" + store.name + \"\\\"\", err);\n            }\n\n            //key INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL UNIQUE\n            var sql = [\"CREATE TABLE\", idbModules.util.quote(store.name), \"(key BLOB\", store.autoIncrement ? \"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT\" : \"PRIMARY KEY\", \", value BLOB)\"].join(\" \");\n            idbModules.DEBUG && console.log(sql);\n            tx.executeSql(sql, [], function(tx, data) {\n                tx.executeSql(\"INSERT INTO __sys__ VALUES (?,?,?,?)\", [store.name, JSON.stringify(store.keyPath), store.autoIncrement, \"{}\"], function() {\n                    success(store);\n                }, error);\n            }, error);\n        });\n    };\n\n    /**\n     * Deletes an object store from the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__deleteObjectStore = function(db, store) {\n        // Remove the object store from the IDBDatabase\n        db.__objectStores[store.name] = undefined;\n        db.objectStoreNames.splice(db.objectStoreNames.indexOf(store.name), 1);\n\n        // Remove the object store from WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function deleteObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete ObjectStore\", err));\n            }\n\n            tx.executeSql(\"SELECT * FROM __sys__ where name = ?\", [store.name], function(tx, data) {\n                if (data.rows.length > 0) {\n                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(store.name), [], function() {\n                        tx.executeSql(\"DELETE FROM __sys__ WHERE name = ?\", [store.name], function() {\n                            success();\n                        }, error);\n                    }, error);\n                }\n            });\n        });\n    };\n\n    /**\n     * Determines whether the given inline or out-of-line key is valid, according to the object store's schema.\n     * @param {*} value     Used for inline keys\n     * @param {*} key       Used for out-of-line keys\n     * @private\n     */\n    IDBObjectStore.prototype.__validateKey = function(value, key) {\n        if (this.keyPath) {\n            if (typeof key !== \"undefined\") {\n                throw idbModules.util.createDOMException(\"DataError\", \"The object store uses in-line keys and the key parameter was provided\", this);\n            }\n            else if (value && typeof value === \"object\") {\n                key = idbModules.Key.getValue(value, this.keyPath);\n                if (key === undefined) {\n                    if (this.autoIncrement) {\n                        // A key will be generated\n                        return;\n                    }\n                    else {\n                        throw idbModules.util.createDOMException(\"DataError\", \"Could not eval key from keyPath\");\n                    }\n                }\n            }\n            else {\n                throw idbModules.util.createDOMException(\"DataError\", \"KeyPath was specified, but value was not an object\");\n            }\n        }\n        else {\n            if (typeof key === \"undefined\") {\n                if (this.autoIncrement) {\n                    // A key will be generated\n                    return;\n                }\n                else {\n                    throw idbModules.util.createDOMException(\"DataError\", \"The object store uses out-of-line keys and has no key generator and the key parameter was not provided. \", this);\n                }\n            }\n        }\n\n        idbModules.Key.validate(key);\n    };\n\n    /**\n     * From the store properties and object, extracts the value for the key in hte object Store\n     * If the table has auto increment, get the next in sequence\n     * @param {Object} tx\n     * @param {Object} value\n     * @param {Object} key\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBObjectStore.prototype.__deriveKey = function(tx, value, key, success, failure) {\n        var me = this;\n\n        function getNextAutoIncKey(callback) {\n            tx.executeSql(\"SELECT * FROM sqlite_sequence where name like ?\", [me.name], function(tx, data) {\n                if (data.rows.length !== 1) {\n                    callback(1);\n                }\n                else {\n                    callback(data.rows.item(0).seq + 1);\n                }\n            }, function(tx, error) {\n                failure(idbModules.util.createDOMException(\"DataError\", \"Could not get the auto increment value for key\", error));\n            });\n        }\n\n        if (me.keyPath) {\n            var primaryKey = idbModules.Key.getValue(value, me.keyPath);\n            if (primaryKey === undefined && me.autoIncrement) {\n                getNextAutoIncKey(function(primaryKey) {\n                    try {\n                        // Update the value with the new key\n                        idbModules.Key.setValue(value, me.keyPath, primaryKey);\n                        success(primaryKey);\n                    }\n                    catch (e) {\n                        failure(idbModules.util.createDOMException(\"DataError\", \"Could not assign a generated value to the keyPath\", e));\n                    }\n                });\n            }\n            else {\n                success(primaryKey);\n            }\n        }\n        else {\n            if (typeof key === \"undefined\" && me.autoIncrement) {\n                // Looks like this has autoInc, so lets get the next in sequence and return that.\n                getNextAutoIncKey(success);\n            }\n            else {\n                success(key);\n            }\n        }\n    };\n\n    IDBObjectStore.prototype.__insertData = function(tx, encoded, value, primaryKey, success, error) {\n        try {\n            var paramMap = {};\n            if (typeof primaryKey !== \"undefined\") {\n                idbModules.Key.validate(primaryKey);\n                paramMap.key = idbModules.Key.encode(primaryKey);\n            }\n            for (var i = 0; i < this.indexNames.length; i++) {\n                var index = this.__indexes[this.indexNames[i]];\n                paramMap[index.name] = idbModules.Key.encode(idbModules.Key.getValue(value, index.keyPath), index.multiEntry);\n            }\n            var sqlStart = [\"INSERT INTO \", idbModules.util.quote(this.name), \"(\"];\n            var sqlEnd = [\" VALUES (\"];\n            var sqlValues = [];\n            for (var key in paramMap) {\n                sqlStart.push(idbModules.util.quote(key) + \",\");\n                sqlEnd.push(\"?,\");\n                sqlValues.push(paramMap[key]);\n            }\n            // removing the trailing comma\n            sqlStart.push(\"value )\");\n            sqlEnd.push(\"?)\");\n            sqlValues.push(encoded);\n\n            var sql = sqlStart.join(\" \") + sqlEnd.join(\" \");\n\n            idbModules.DEBUG && console.log(\"SQL for adding\", sql, sqlValues);\n            tx.executeSql(sql, sqlValues, function(tx, data) {\n                idbModules.Sca.encode(primaryKey, function(primaryKey) {\n                    primaryKey = idbModules.Sca.decode(primaryKey);\n                    success(primaryKey);\n                });\n            }, function(tx, err) {\n                error(idbModules.util.createDOMError(\"ConstraintError\", err.message, err));\n            });\n        }\n        catch (e) {\n            error(e);\n        }\n    };\n\n    IDBObjectStore.prototype.add = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStoreAdd(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    me.__insertData(tx, encoded, value, primaryKey, success, error);\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.put = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStorePut(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    // First try to delete if the record exists\n                    idbModules.Key.validate(primaryKey);\n                    var sql = \"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\";\n                    tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Did the row with the\", primaryKey, \"exist? \", data.rowsAffected);\n                        me.__insertData(tx, encoded, value, primaryKey, success, error);\n                    }, function(tx, err) {\n                        error(err);\n                    });\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.get = function(key) {\n        // TODO Key should also be a key range\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        return me.transaction.__addToTransactionQueue(function objectStoreGet(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Fetched data\", data);\n                var value;\n                try {\n                    // Opera can't deal with the try-catch here.\n                    if (0 === data.rows.length) {\n                        return success();\n                    }\n\n                    value = idbModules.Sca.decode(data.rows.item(0).value);\n                }\n                catch (e) {\n                    // If no result is returned, or error occurs when parsing JSON\n                    idbModules.DEBUG && console.log(e);\n                }\n                success(value);\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype[\"delete\"] = function(key) {\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        me.transaction.__assertWritable();\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        // TODO key should also support key ranges\n        return me.transaction.__addToTransactionQueue(function objectStoreDelete(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Deleted from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.clear = function() {\n        var me = this;\n        me.transaction.__assertWritable();\n        return me.transaction.__addToTransactionQueue(function objectStoreClear(tx, args, success, error) {\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name), [], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Cleared all records from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.count = function(key) {\n        if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this, this, \"key\", \"value\", true).__req;\n        }\n        else {\n            var me = this;\n            var hasKey = false;\n\n            // key is optional\n            if (key !== undefined) {\n                hasKey = true;\n                idbModules.Key.validate(key);\n            }\n\n            return me.transaction.__addToTransactionQueue(function objectStoreCount(tx, args, success, error) {\n                var sql = \"SELECT * FROM \" + idbModules.util.quote(me.name) + (hasKey ? \" WHERE key = ?\" : \"\");\n                var sqlValues = [];\n                hasKey && sqlValues.push(idbModules.Key.encode(key));\n                tx.executeSql(sql, sqlValues, function(tx, data) {\n                    success(data.rows.length);\n                }, function(tx, err) {\n                    error(err);\n                });\n            });\n        }\n    };\n\n    IDBObjectStore.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this, this, \"key\", \"value\").__req;\n    };\n\n    IDBObjectStore.prototype.index = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n\n        return idbModules.IDBIndex.__clone(index, this);\n    };\n\n    /**\n     * Creates a new index on the object store.\n     * @param {string} indexName\n     * @param {string} keyPath\n     * @param {object} optionalParameters\n     * @returns {IDBIndex}\n     */\n    IDBObjectStore.prototype.createIndex = function(indexName, keyPath, optionalParameters) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        if (arguments.length === 1) {\n            throw new TypeError(\"No key path was specified\");\n        }\n        if (keyPath instanceof Array && optionalParameters && optionalParameters.multiEntry) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"The keyPath argument was an array and the multiEntry option is true.\");\n        }\n        if (this.__indexes[indexName] && !this.__indexes[indexName].__deleted) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Index \\\"\" + indexName + \"\\\" already exists on \" + this.name);\n        }\n\n        this.transaction.__assertVersionChange();\n\n        optionalParameters = optionalParameters || {};\n        /** @name IDBIndexProperties **/\n        var indexProperties = {\n            columnName: indexName,\n            keyPath: keyPath,\n            optionalParams: {\n                unique: !!optionalParameters.unique,\n                multiEntry: !!optionalParameters.multiEntry\n            }\n        };\n        var index = new idbModules.IDBIndex(this, indexProperties);\n        idbModules.IDBIndex.__createIndex(this, index);\n        return index;\n    };\n\n    IDBObjectStore.prototype.deleteIndex = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n        this.transaction.__assertVersionChange();\n\n        idbModules.IDBIndex.__deleteIndex(this, index);\n    };\n\n    idbModules.IDBObjectStore = IDBObjectStore;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var uniqueID = 0;\n\n    /**\n     * The IndexedDB Transaction\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBTransaction\n     * @param {IDBDatabase} db\n     * @param {string[]} storeNames\n     * @param {string} mode\n     * @constructor\n     */\n    function IDBTransaction(db, storeNames, mode) {\n        this.__id = ++uniqueID; // for debugging simultaneous transactions\n        this.__active = true;\n        this.__running = false;\n        this.__errored = false;\n        this.__requests = [];\n        this.__storeNames = storeNames;\n        this.mode = mode;\n        this.db = db;\n        this.error = null;\n        this.onabort = this.onerror = this.oncomplete = null;\n\n        // Kick off the transaction as soon as all synchronous code is done.\n        var me = this;\n        setTimeout(function() { me.__executeRequests(); }, 0);\n    }\n\n    IDBTransaction.prototype.__executeRequests = function() {\n        if (this.__running) {\n            idbModules.DEBUG && console.log(\"Looks like the request set is already running\", this.mode);\n            return;\n        }\n\n        this.__running = true;\n        var me = this;\n\n        me.db.__db.transaction(function executeRequests(tx) {\n                me.__tx = tx;\n                var q = null, i = 0;\n\n                function success(result, req) {\n                    if (req) {\n                        q.req = req;// Need to do this in case of cursors\n                    }\n                    q.req.readyState = \"done\";\n                    q.req.result = result;\n                    delete q.req.error;\n                    var e = idbModules.util.createEvent(\"success\");\n                    idbModules.util.callback(\"onsuccess\", q.req, e);\n                    i++;\n                    executeNextRequest();\n                }\n\n                function error(tx, err) {\n                    err = idbModules.util.findError(arguments);\n                    try {\n                        // Fire an error event for the current IDBRequest\n                        q.req.readyState = \"done\";\n                        q.req.error = err || \"DOMError\";\n                        q.req.result = undefined;\n                        var e = idbModules.util.createEvent(\"error\", err);\n                        idbModules.util.callback(\"onerror\", q.req, e);\n                    }\n                    finally {\n                        // Fire an error event for the transaction\n                        transactionError(err);\n                    }\n                }\n\n                function executeNextRequest() {\n                    if (i >= me.__requests.length) {\n                        // All requests in the transaction are done\n                        me.__requests = [];\n                        if (me.__active) {\n                            me.__active = false;\n                            transactionFinished();\n                        }\n                    }\n                    else {\n                        try {\n                            q = me.__requests[i];\n                            q.op(tx, q.args, success, error);\n                        }\n                        catch (e) {\n                            error(e);\n                        }\n                    }\n                }\n\n                executeNextRequest();\n            },\n\n            function webSqlError(err) {\n                transactionError(err);\n            }\n        );\n\n        function transactionError(err) {\n            idbModules.util.logError(\"Error\", \"An error occurred in a transaction\", err);\n\n            if (me.__errored) {\n                // We've already called \"onerror\", \"onabort\", or thrown, so don't do it again.\n                return;\n            }\n\n            me.__errored = true;\n\n            if (!me.__active) {\n                // The transaction has already completed, so we can't call \"onerror\" or \"onabort\".\n                // So throw the error instead.\n                throw err;\n            }\n\n            try {\n                me.error = err;\n                var evt = idbModules.util.createEvent(\"error\");\n                idbModules.util.callback(\"onerror\", me, evt);\n                idbModules.util.callback(\"onerror\", me.db, evt);\n            }\n            finally {\n                me.abort();\n            }\n        }\n\n        function transactionFinished() {\n            idbModules.DEBUG && console.log(\"Transaction completed\");\n            var evt = idbModules.util.createEvent(\"complete\");\n            try {\n                idbModules.util.callback(\"oncomplete\", me, evt);\n                idbModules.util.callback(\"__oncomplete\", me, evt);\n            }\n            catch (e) {\n                // An error occurred in the \"oncomplete\" handler.\n                // It's too late to call \"onerror\" or \"onabort\". Throw a global error instead.\n                // (this may seem odd/bad, but it's how all native IndexedDB implementations work)\n                me.__errored = true;\n                throw e;\n            }\n        }\n    };\n\n    /**\n     * Creates a new IDBRequest for the transaction.\n     * NOTE: The transaction is not queued util you call {@link IDBTransaction#__pushToQueue}\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__createRequest = function() {\n        var request = new idbModules.IDBRequest();\n        request.source = this.db;\n        request.transaction = this;\n        return request;\n    };\n\n    /**\n     * Adds a callback function to the transaction queue\n     * @param {function} callback\n     * @param {*} args\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__addToTransactionQueue = function(callback, args) {\n        var request = this.__createRequest();\n        this.__pushToQueue(request, callback, args);\n        return request;\n    };\n\n    /**\n     * Adds an IDBRequest to the transaction queue\n     * @param {IDBRequest} request\n     * @param {function} callback\n     * @param {*} args\n     * @protected\n     */\n    IDBTransaction.prototype.__pushToQueue = function(request, callback, args) {\n        this.__assertActive();\n        this.__requests.push({\n            \"op\": callback,\n            \"args\": args,\n            \"req\": request\n        });\n    };\n\n    IDBTransaction.prototype.__assertActive = function() {\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"TransactionInactiveError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertWritable = function() {\n        if (this.mode === IDBTransaction.READ_ONLY) {\n            throw idbModules.util.createDOMException(\"ReadOnlyError\", \"The transaction is read only\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertVersionChange = function() {\n        IDBTransaction.__assertVersionChange(this);\n    };\n\n    IDBTransaction.__assertVersionChange = function(tx) {\n        if (!tx || tx.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"Not a version transaction\");\n        }\n    };\n\n    /**\n     * Returns the specified object store.\n     * @param {string} objectStoreName\n     * @returns {IDBObjectStore}\n     */\n    IDBTransaction.prototype.objectStore = function(objectStoreName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n        if (this.__storeNames.indexOf(objectStoreName) === -1 && this.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" is not participating in this transaction\");\n        }\n        var store = this.db.__objectStores[objectStoreName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" does not exist in \" + this.db.name);\n        }\n\n        return idbModules.IDBObjectStore.__clone(store, this);\n    };\n\n    IDBTransaction.prototype.abort = function() {\n        var me = this;\n        idbModules.DEBUG && console.log(\"The transaction was aborted\", me);\n        me.__active = false;\n        var evt = idbModules.util.createEvent(\"abort\");\n\n        // Fire the \"onabort\" event asynchronously, so errors don't bubble\n        setTimeout(function() {\n            idbModules.util.callback(\"onabort\", me, evt);\n        }, 0);\n    };\n\n    IDBTransaction.READ_ONLY = \"readonly\";\n    IDBTransaction.READ_WRITE = \"readwrite\";\n    IDBTransaction.VERSION_CHANGE = \"versionchange\";\n\n    idbModules.IDBTransaction = IDBTransaction;\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * IDB Database Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#database-interface\n     * @constructor\n     */\n    function IDBDatabase(db, name, version, storeProperties){\n        this.__db = db;\n        this.__closed = false;\n        this.version = version;\n        this.name = name;\n        this.onabort = this.onerror = this.onversionchange = null;\n\n        this.__objectStores = {};\n        this.objectStoreNames = new idbModules.util.StringList();\n        for (var i = 0; i < storeProperties.rows.length; i++) {\n            var store = new idbModules.IDBObjectStore(storeProperties.rows.item(i));\n            this.__objectStores[store.name] = store;\n            this.objectStoreNames.push(store.name);\n        }\n    }\n\n    /**\n     * Creates a new object store.\n     * @param {string} storeName\n     * @param {object} [createOptions]\n     * @returns {IDBObjectStore}\n     */\n    IDBDatabase.prototype.createObjectStore = function(storeName, createOptions){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (this.__objectStores[storeName]) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Object store \\\"\" + storeName + \"\\\" already exists in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        createOptions = createOptions || {};\n        /** @name IDBObjectStoreProperties **/\n        var storeProperties = {\n            name: storeName,\n            keyPath: JSON.stringify(createOptions.keyPath || null),\n            autoInc: JSON.stringify(createOptions.autoIncrement),\n            indexList: \"{}\"\n        };\n        var store = new idbModules.IDBObjectStore(storeProperties, this.__versionTransaction);\n        idbModules.IDBObjectStore.__createObjectStore(this, store);\n        return store;\n    };\n\n    /**\n     * Deletes an object store.\n     * @param {string} storeName\n     */\n    IDBDatabase.prototype.deleteObjectStore = function(storeName){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        var store = this.__objectStores[storeName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Object store \\\"\" + storeName + \"\\\" does not exist in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        idbModules.IDBObjectStore.__deleteObjectStore(this, store);\n    };\n\n    IDBDatabase.prototype.close = function(){\n        this.__closed = true;\n    };\n\n    /**\n     * Starts a new transaction.\n     * @param {string|string[]} storeNames\n     * @param {string} mode\n     * @returns {IDBTransaction}\n     */\n    IDBDatabase.prototype.transaction = function(storeNames, mode){\n        if (this.__closed) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"An attempt was made to start a new transaction on a database connection that is not open\");\n        }\n\n        if (typeof mode === \"number\") {\n            mode = mode === 1 ? IDBTransaction.READ_WRITE : IDBTransaction.READ_ONLY;\n            idbModules.DEBUG && console.log(\"Mode should be a string, but was specified as \", mode);\n        }\n        else {\n            mode = mode || IDBTransaction.READ_ONLY;\n        }\n\n        if (mode !== IDBTransaction.READ_ONLY && mode !== IDBTransaction.READ_WRITE) {\n            throw new TypeError(\"Invalid transaction mode: \" + mode);\n        }\n\n        storeNames = typeof storeNames === \"string\" ? [storeNames] : storeNames;\n        if (storeNames.length === 0) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"No object store names were specified\");\n        }\n        for (var i = 0; i < storeNames.length; i++) {\n            if (!this.objectStoreNames.contains(storeNames[i])) {\n                throw idbModules.util.createDOMException(\"NotFoundError\", \"The \\\"\" + storeNames[i] + \"\\\" object store does not exist\");\n            }\n        }\n\n        var transaction = new idbModules.IDBTransaction(this, storeNames, mode);\n        return transaction;\n    };\n    \n    idbModules.IDBDatabase = IDBDatabase;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var DEFAULT_DB_SIZE = 4 * 1024 * 1024;\n    var sysdb;\n\n    /**\n     * Craetes the sysDB to keep track of version numbers for databases\n     **/\n    function createSysDB(success, failure) {\n        function sysDbCreateError(tx, err) {\n            err = idbModules.util.findError(arguments);\n            idbModules.DEBUG && console.log(\"Error in sysdb transaction - when creating dbVersions\", err);\n            failure(err);\n        }\n\n        if (sysdb) {\n            success();\n        }\n        else {\n            sysdb = window.openDatabase(\"__sysdb__\", 1, \"System Database\", DEFAULT_DB_SIZE);\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);\", [], success, sysDbCreateError);\n            }, sysDbCreateError);\n        }\n    }\n\n    /**\n     * IDBFactory Class\n     * https://w3c.github.io/IndexedDB/#idl-def-IDBFactory\n     * @constructor\n     */\n    function IDBFactory() {\n        this.modules = idbModules;\n    }\n\n    /**\n     * The IndexedDB Method to create a new database and return the DB\n     * @param {string} name\n     * @param {number} version\n     */\n    IDBFactory.prototype.open = function(name, version) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDbCreateError = false;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        else if (arguments.length === 2) {\n            version = parseFloat(version);\n            if (isNaN(version) || !isFinite(version) || version <= 0) {\n                throw new TypeError('Invalid database version: ' + version);\n            }\n        }\n        name = name + ''; // cast to a string\n\n        function dbCreateError(tx, err) {\n            if (calledDbCreateError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            calledDbCreateError = true;\n            var evt = idbModules.util.createEvent(\"error\", arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            idbModules.util.callback(\"onerror\", req, evt);\n        }\n\n        function openDB(oldVersion) {\n            var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n            req.readyState = \"done\";\n            if (typeof version === \"undefined\") {\n                version = oldVersion || 1;\n            }\n            if (version <= 0 || oldVersion > version) {\n                var err = idbModules.util.createDOMError(\"VersionError\", \"An attempt was made to open a database using a lower version than the existing version.\", version);\n                dbCreateError(err);\n                return;\n            }\n\n            db.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)\", [], function() {\n                    tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                        var e = idbModules.util.createEvent(\"success\");\n                        req.source = req.result = new idbModules.IDBDatabase(db, name, version, data);\n                        if (oldVersion < version) {\n                            // DB Upgrade in progress\n                            sysdb.transaction(function(systx) {\n                                systx.executeSql(\"UPDATE dbVersions set version = ? where name = ?\", [version, name], function() {\n                                    var e = idbModules.util.createEvent(\"upgradeneeded\");\n                                    e.oldVersion = oldVersion;\n                                    e.newVersion = version;\n                                    req.transaction = req.result.__versionTransaction = new idbModules.IDBTransaction(req.source, [], idbModules.IDBTransaction.VERSION_CHANGE);\n                                    req.transaction.__addToTransactionQueue(function onupgradeneeded(tx, args, success) {\n                                        idbModules.util.callback(\"onupgradeneeded\", req, e);\n                                        success();\n                                    });\n                                    req.transaction.__oncomplete = function() {\n                                        req.transaction = null;\n                                        var e = idbModules.util.createEvent(\"success\");\n                                        idbModules.util.callback(\"onsuccess\", req, e);\n                                    };\n                                }, dbCreateError);\n                            }, dbCreateError);\n                        } else {\n                            idbModules.util.callback(\"onsuccess\", req, e);\n                        }\n                    }, dbCreateError);\n                }, dbCreateError);\n            }, dbCreateError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        // Database with this name does not exist\n                        tx.executeSql(\"INSERT INTO dbVersions VALUES (?,?)\", [name, version || 1], function() {\n                            openDB(0);\n                        }, dbCreateError);\n                    } else {\n                        openDB(data.rows.item(0).version);\n                    }\n                }, dbCreateError);\n            }, dbCreateError);\n        }, dbCreateError);\n\n        return req;\n    };\n\n    /**\n     * Deletes a database\n     * @param {string} name\n     * @returns {IDBOpenDBRequest}\n     */\n    IDBFactory.prototype.deleteDatabase = function(name) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDBError = false;\n        var version = null;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        name = name + ''; // cast to a string\n\n        function dbError(tx, err) {\n            if (calledDBError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            var e = idbModules.util.createEvent(\"error\");\n            e.debug = arguments;\n            idbModules.util.callback(\"onerror\", req, e);\n            calledDBError = true;\n        }\n\n        function deleteFromDbVersions() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"DELETE FROM dbVersions where name = ? \", [name], function() {\n                    req.result = undefined;\n                    var e = idbModules.util.createEvent(\"success\");\n                    e.newVersion = null;\n                    e.oldVersion = version;\n                    idbModules.util.callback(\"onsuccess\", req, e);\n                }, dbError);\n            }, dbError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        req.result = undefined;\n                        var e = idbModules.util.createEvent(\"success\");\n                        e.newVersion = null;\n                        e.oldVersion = version;\n                        idbModules.util.callback(\"onsuccess\", req, e);\n                        return;\n                    }\n                    version = data.rows.item(0).version;\n                    var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n                    db.transaction(function(tx) {\n                        tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                            var tables = data.rows;\n                            (function deleteTables(i) {\n                                if (i >= tables.length) {\n                                    // If all tables are deleted, delete the housekeeping tables\n                                    tx.executeSql(\"DROP TABLE IF EXISTS __sys__\", [], function() {\n                                        // Finally, delete the record for this DB from sysdb\n                                        deleteFromDbVersions();\n                                    }, dbError);\n                                } else {\n                                    // Delete all tables in this database, maintained in the sys table\n                                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(tables.item(i).name), [], function() {\n                                        deleteTables(i + 1);\n                                    }, function() {\n                                        deleteTables(i + 1);\n                                    });\n                                }\n                            }(0));\n                        }, function(e) {\n                            // __sysdb table does not exist, but that does not mean delete did not happen\n                            deleteFromDbVersions();\n                        });\n                    });\n                }, dbError);\n            }, dbError);\n        }, dbError);\n\n        return req;\n    };\n\n    /**\n     * Compares two keys\n     * @param key1\n     * @param key2\n     * @returns {number}\n     */\n    IDBFactory.prototype.cmp = function(key1, key2) {\n        if (arguments.length < 2) {\n            throw new TypeError(\"You must provide two keys to be compared\");\n        }\n\n        idbModules.Key.validate(key1);\n        idbModules.Key.validate(key2);\n        var encodedKey1 = idbModules.Key.encode(key1);\n        var encodedKey2 = idbModules.Key.encode(key2);\n        var result = encodedKey1 > encodedKey2 ? 1 : encodedKey1 === encodedKey2 ? 0 : -1;\n        \n        if (idbModules.DEBUG) {\n            // verify that the keys encoded correctly\n            var decodedKey1 = idbModules.Key.decode(encodedKey1);\n            var decodedKey2 = idbModules.Key.decode(encodedKey2);\n            if (typeof key1 === \"object\") {\n                key1 = JSON.stringify(key1);\n                decodedKey1 = JSON.stringify(decodedKey1);\n            }\n            if (typeof key2 === \"object\") {\n                key2 = JSON.stringify(key2);\n                decodedKey2 = JSON.stringify(decodedKey2);\n            }\n\n            // encoding/decoding mismatches are usually due to a loss of floating-point precision\n            if (decodedKey1 !== key1) {\n                console.warn(key1 + ' was incorrectly encoded as ' + decodedKey1);\n            }\n            if (decodedKey2 !== key2) {\n                console.warn(key2 + ' was incorrectly encoded as ' + decodedKey2);\n            }\n        }\n        \n        return result;\n    };\n\n\n    idbModules.shimIndexedDB = new IDBFactory();\n    idbModules.IDBFactory = IDBFactory;\n}(idbModules));\n\n(function(window, idbModules){\n    'use strict';\n\n    function shim(name, value) {\n        try {\n            // Try setting the property. This will fail if the property is read-only.\n            window[name] = value;\n        }\n        catch (e) {}\n\n        if (window[name] !== value && Object.defineProperty) {\n            // Setting a read-only property failed, so try re-defining the property\n            try {\n                Object.defineProperty(window, name, {\n                    value: value\n                });\n            }\n            catch (e) {}\n\n            if (window[name] !== value) {\n                window.console && console.warn && console.warn('Unable to shim ' + name);\n            }\n        }\n    }\n\n    shim('shimIndexedDB', idbModules.shimIndexedDB);\n    if (window.shimIndexedDB) {\n        window.shimIndexedDB.__useShim = function(){\n            if (typeof window.openDatabase !== \"undefined\") {\n                // Polyfill ALL of IndexedDB, using WebSQL\n                shim('indexedDB', idbModules.shimIndexedDB);\n                shim('IDBFactory', idbModules.IDBFactory);\n                shim('IDBDatabase', idbModules.IDBDatabase);\n                shim('IDBObjectStore', idbModules.IDBObjectStore);\n                shim('IDBIndex', idbModules.IDBIndex);\n                shim('IDBTransaction', idbModules.IDBTransaction);\n                shim('IDBCursor', idbModules.IDBCursor);\n                shim('IDBKeyRange', idbModules.IDBKeyRange);\n                shim('IDBRequest', idbModules.IDBRequest);\n                shim('IDBOpenDBRequest', idbModules.IDBOpenDBRequest);\n                shim('IDBVersionChangeEvent', idbModules.IDBVersionChangeEvent);\n            }\n            else if (typeof window.indexedDB === \"object\") {\n                // Polyfill the missing IndexedDB features\n                idbModules.polyfill();\n            }\n        };\n\n        window.shimIndexedDB.__debug = function(val){\n            idbModules.DEBUG = val;\n        };\n    }\n    \n    // Workaround to prevent an error in Firefox\n    if(!('indexedDB' in window)) {\n        window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.oIndexedDB || window.msIndexedDB;\n    }\n    \n    // Detect browsers with known IndexedDb issues (e.g. Android pre-4.4)\n    var poorIndexedDbSupport = false;\n    if (navigator.userAgent.match(/Android 2/) || navigator.userAgent.match(/Android 3/) || navigator.userAgent.match(/Android 4\\.[0-3]/)) {\n        /* Chrome is an exception. It supports IndexedDb */\n        if (!navigator.userAgent.match(/Chrome/)) {\n            poorIndexedDbSupport = true;\n        }\n    }\n\n    if ((typeof window.indexedDB === \"undefined\" || !window.indexedDB || poorIndexedDbSupport) && typeof window.openDatabase !== \"undefined\") {\n        window.shimIndexedDB.__useShim();\n    }\n    else {\n        window.IDBDatabase = window.IDBDatabase || window.webkitIDBDatabase;\n        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;\n        window.IDBCursor = window.IDBCursor || window.webkitIDBCursor;\n        window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;\n        if(!window.IDBTransaction){\n            window.IDBTransaction = {};\n        }\n        /* Some browsers (e.g. Chrome 18 on Android) support IndexedDb but do not allow writing of these properties */\n        try {\n            window.IDBTransaction.READ_ONLY = window.IDBTransaction.READ_ONLY || \"readonly\";\n            window.IDBTransaction.READ_WRITE = window.IDBTransaction.READ_WRITE || \"readwrite\";\n        } catch (e) {}\n    }\n    \n}(window, idbModules));\n\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","import Log from 'loglevel';\nconst originalFactory = Log.methodFactory;\n\nLog.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  const rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod(`Kinvey: ${message}`);\n  };\n};\n\nLog.setLevel(Log.levels.ERROR);\nexport { Log };\n","import { KinveyError } from './errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst aclAttribute = process.env.KINVEY_ACL_ATTRIBUTE || '_acl';\n\n/**\n * Wrapper for reading and setting permissions on an entity level.\n *\n * @example\n * var entity = { _acl: {} };\n * var acl = new Kinvey.Acl(entity);\n */\nexport class Acl {\n  constructor(entity = {}) {\n    if (!isPlainObject(entity)) {\n      throw new KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.acl = entity[aclAttribute];\n  }\n\n  get creator() {\n    return this.acl.creator;\n  }\n\n  get readers() {\n    return this.acl.r || [];\n  }\n\n  get writers() {\n    return this.acl.w || [];\n  }\n\n  get readerGroups() {\n    return this.acl.groups ? this.acl.groups.r : [];\n  }\n\n  get writerGroups() {\n    return this.acl.groups ? this.acl.groups.w : [];\n  }\n\n  set globallyReadable(gr) {\n    this.acl.gr = gr || false;\n  }\n\n  set globallyWritable(gw) {\n    this.acl.gw = gw || false;\n  }\n\n  addReader(user) {\n    const r = this.acl.r || [];\n\n    if (r.indexOf(user) === -1) {\n      r.push(user);\n    }\n\n    this.acl.r = r;\n    return this;\n  }\n\n  addReaderGroup(group) {\n    const groups = this.acl.groups || {};\n    const r = groups.r || [];\n\n    if (r.indexOf(group) === -1) {\n      r.push(group);\n    }\n\n    groups.r = r;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  addWriter(user) {\n    const w = this.acl.w || [];\n\n    if (w.indexOf(user) === -1) {\n      w.push(user);\n    }\n\n    this.acl.w = w;\n    return this;\n  }\n\n  addWriterGroup(group) {\n    const groups = this.acl.groups || {};\n    const w = groups.w || [];\n\n    if (w.indexOf(group) === -1) {\n      w.push(group);\n    }\n\n    groups.w = w;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  isGloballyReadable() {\n    return this.acl.gr || false;\n  }\n\n  isGloballyWritable() {\n    return this.acl.gw || false;\n  }\n\n  removeReader(user) {\n    const r = this.acl.r || [];\n    const pos = r.indexOf(user);\n\n    if (pos !== -1) {\n      r.splice(pos, 1);\n    }\n\n    this.acl.r = r;\n    return this;\n  }\n\n  removeReaderGroup(group) {\n    const groups = this.acl.groups || {};\n    const r = groups.r || [];\n    const pos = r.indexOf(group);\n\n    if (pos !== -1) {\n      r.splice(pos, 1);\n    }\n\n    groups.r = r;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  removeWriter(user) {\n    const w = this.acl.w || [];\n    const pos = w.indexOf(user);\n\n    if (pos !== -1) {\n      w.splice(pos, 1);\n    }\n\n    this.acl.w = w;\n    return this;\n  }\n\n  removeWriterGroup(group) {\n    const groups = this.acl.groups || {};\n    const w = groups.w || [];\n    const pos = w.indexOf(group);\n\n    if (pos !== -1) {\n      w.splice(pos, 1);\n    }\n\n    groups.w = w;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  toJSON() {\n    return this.acl;\n  }\n}\n","import { KinveyError } from './errors';\nimport { Query } from './query';\nimport result from 'lodash/result';\nimport assign from 'lodash/assign';\nimport forEach from 'lodash/forEach';\nimport isObject from 'lodash/isObject';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\n\nexport class Aggregation {\n  constructor(options) {\n    options = assign({\n      query: null,\n      initial: {},\n      key: {},\n      reduce: function () {}.toString()\n    }, options);\n\n    this.query(options.query);\n    this._initial = options.initial;\n    this._key = options.key;\n    this._reduce = options.reduce;\n  }\n\n  by(field) {\n    this._key[field] = true;\n    return this;\n  }\n\n  initial(objectOrKey, value) {\n    if (typeof value === 'undefined' && !isObject(objectOrKey)) {\n      throw new KinveyError('objectOrKey argument must be an Object.');\n    }\n\n    if (isObject(objectOrKey)) {\n      this._initial = objectOrKey;\n    } else {\n      this._initial[objectOrKey] = value;\n    }\n\n    return this;\n  }\n\n  query(query) {\n    if (query && !(query instanceof Query)) {\n      query = new Query(result(query, 'toJSON', query));\n    }\n\n    this._query = query;\n    return this;\n  }\n\n  process(entities = []) {\n    const groups = {};\n    const response = [];\n    const aggregation = this.toJSON();\n    const reduce = aggregation.reduce.replace(/function[\\s\\S]*?\\([\\s\\S]*?\\)/, '');\n    aggregation.reduce = new Function(['doc', 'out'], reduce); // eslint-disable-line no-new-func\n\n    if (this._query) {\n      entities = this._query.process(entities);\n    }\n\n    forEach(entities, entity => {\n      const group = {};\n      const entityNames = Object.keys(entity);\n\n      forEach(entityNames, name => {\n        group[name] = entity[name];\n      });\n\n      const key = JSON.stringify(group);\n      if (!groups[key]) {\n        groups[key] = group;\n        const attributes = Object.keys(aggregation.initial);\n\n        forEach(attributes, attr => {\n          groups[key][attr] = aggregation.initial[attr];\n        });\n      }\n\n      aggregation.reduce(entity, groups[key]);\n    });\n\n    const segments = Object.keys(groups);\n    forEach(segments, segment => {\n      response.push(groups[segment]);\n    });\n\n    return response;\n  }\n\n  reduce(fn) {\n    if (isFunction(fn)) {\n      fn = fn.toString();\n    }\n\n    if (!isString(fn)) {\n      throw new KinveyError('fn argument must be of type function or string.');\n    }\n\n    this._reduce = fn;\n    return this;\n  }\n\n  toJSON() {\n    const json = {\n      key: this._key,\n      initial: this._initial,\n      reduce: this._reduce,\n      condition: this._query ? this._query.toJSON().filter : {},\n      query: this._query ? this._query.toJSON() : null\n    };\n\n    return json;\n  }\n\n  static count(field = '') {\n    const aggregation = new Aggregation();\n\n    if (field) {\n      aggregation.by(field);\n    }\n\n    aggregation.initial({ result: 0 });\n    aggregation.reduce(function (doc, out) {\n      out.result += 1;\n    });\n    return aggregation;\n  }\n\n  static sum(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ result: 0 });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result += doc[\"${field}\"]; ` +\n      `}`\n    );\n    return aggregation;\n  }\n\n  static min(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ result: Infinity });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result = Math.min(out.result, doc[\"${field}\"]); ` +\n      `}`\n    );\n    return aggregation;\n  }\n\n  static max(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ result: -Infinity });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result = Math.max(out.result, doc[\"${field}\"]); ` +\n      `}`\n    );\n    return aggregation;\n  }\n\n  static average(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ count: 0, result: 0 });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result = (out.result * out.count + doc[\"${field}\"]) / (out.count + 1);` +\n      ` out.count += 1;` +\n      `}`\n    );\n    return aggregation;\n  }\n}\n","import { KinveyError } from './errors';\nimport localStorage from 'local-storage';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport isString from 'lodash/isString';\nconst activeUserCollectionName = process.env.KINVEY_ACTIVE_USER_COLLECTION_NAME || 'kinvey_activeUser';\nconst activeSocialIdentityTokenCollectionName = process.env.KINVEY_ACTIVE_SOCIAL_IDENTITY_TOKEN_COLLECTION_NAME\n                                                || 'kinvey_activeSocialIdentityToken';\nlet sharedInstance;\n\n/**\n * The Client class stores information regarding your application. You can create mutiple clients\n * to send requests to different environments on the Kinvey platform.\n *\n * @example\n * var client = new Kinvey.Client({\n *   appKey: '<appKey>',\n *   appSecret: '<appSecret>'\n * });\n */\nexport class Client {\n  /**\n   * Creates a new instance of the Client class. An `options.appKey` must be provided along with\n   * either and `options.appSecret` or `options.masterSecret`.\n   *\n   * @param {Object}    options                             Options\n   * @param {string}    [options.protocol='https']          Protocl used for requests\n   * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n   * @param {string}    options.appKey                      App Key\n   * @param {string}    [options.appSecret]                 App Secret\n   * @param {string}    [options.masterSecret]              App Master Secret\n   * @param {string}    [options.encryptionKey]             App Encryption Key\n   *\n   * @throws {KinveyError}  If an `options.appKey` is not provided.\n   * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   */\n  constructor(options = {}) {\n    options = assign({\n      protocol: process.env.KINVEY_API_PROTOCOL || 'https:',\n      host: process.env.KINVEY_API_HOST || 'baas.kinvey.com'\n    }, options);\n\n    if (!options.appKey && !options.appId) {\n      throw new KinveyError('No App Key was provided. ' +\n        'Unable to create a new Client without an App Key.');\n    }\n\n    if (!options.appSecret && !options.masterSecret) {\n      throw new KinveyError('No App Secret or Master Secret was provided. ' +\n        'Unable to create a new Client without an App Key.');\n    }\n\n    if (options.hostname && isString(options.hostname)) {\n      const hostnameParsed = url.parse(options.hostname);\n      options.protocol = hostnameParsed.protocol;\n      options.host = hostnameParsed.host;\n    }\n\n    /**\n     * @type {string}\n     */\n    this.protocol = options.protocol;\n\n    /**\n     * @type {string}\n     */\n    this.host = options.host;\n\n    /**\n     * @type {string}\n     */\n    this.appKey = options.appKey || options.appId;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.appSecret = options.appSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.masterSecret = options.masterSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.encryptionKey = options.encryptionKey;\n  }\n\n  get baseUrl() {\n    return url.format({\n      protocol: this.protocol,\n      host: this.host\n    });\n  }\n\n  getActiveUserData() {\n    return localStorage.get(`${this.appKey}${activeUserCollectionName}`);\n  }\n\n  setActiveUserData(data) {\n    if (data) {\n      try {\n        return localStorage.set(`${this.appKey}${activeUserCollectionName}`, data);\n      } catch (error) {\n        return false;\n      }\n    }\n\n    return localStorage.remove(`${this.appKey}${activeUserCollectionName}`);\n  }\n\n  getActiveSocialIdentity() {\n    return localStorage.get(`${this.appKey}${activeSocialIdentityTokenCollectionName}`);\n  }\n\n  setActiveSocialIdentity(socialIdentity) {\n    if (socialIdentity) {\n      try {\n        return localStorage.set(`${this.appKey}${activeSocialIdentityTokenCollectionName}`, socialIdentity);\n      } catch (error) {\n        return false;\n      }\n    }\n\n    return localStorage.remove(`${this.appKey}${activeSocialIdentityTokenCollectionName}`);\n  }\n\n  /**\n   * Returns an object containing all the information for this Client.\n   *\n   * @return {Object} JSON\n   */\n  toJSON() {\n    const json = {\n      protocol: this.protocol,\n      host: this.host,\n      appKey: this.appKey,\n      appSecret: this.appSecret,\n      masterSecret: this.masterSecret,\n      encryptionKey: this.encryptionKey\n    };\n\n    return json;\n  }\n\n  /**\n   * Initializes the library by creating a new instance of the\n   * Client class and storing it as a shared instance.\n   *\n   * @param {Object}    options                             Options\n   * @param {string}    [options.protocol='https']          Protocl used for requests\n   * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n   * @param {string}    options.appKey                      App Key\n   * @param {string}    [options.appSecret]                 App Secret\n   * @param {string}    [options.masterSecret]              App Master Secret\n   * @param {string}    [options.encryptionKey]             App Encryption Key\n   *\n   * @throws {KinveyError}  If an `options.appKey` is not provided.\n   * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   *\n   * @return {Client}  An instance of Client.\n   *\n   * @example\n   * var client = Kinvey.Client.init({\n   *   appKey: '<appKey>',\n   *   appSecret: '<appSecret>'\n   * });\n   */\n  static init(options) {\n    const client = new Client(options);\n    sharedInstance = client;\n    return client;\n  }\n\n  /**\n   * Returns the shared client instance used by the library.\n   *\n   * @throws {KinveyError} If `Kinvey.init()` has not been called.\n   *\n   * @return {Client} The shared instance.\n   */\n  static sharedInstance() {\n    const client = sharedInstance;\n\n    if (!client) {\n      throw new KinveyError('You have not initialized the library. ' +\n        'Please call Kinvey.init() to initialize the library.');\n    }\n\n    return client;\n  }\n}\n","import { Client } from './client';\nimport { HttpMethod } from './enums';\nimport { KinveyError } from './errors';\nimport isString from 'lodash/isString';\nconst rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\n\n/**\n * Executes a custom command.\n */\nexport class Command {\n  /**\n   * Execute a custom command. A promise will be returned that will be resolved\n   * with the result of the command or rejected with an error.\n   *\n   * @param   {String}          command                           Command to execute.\n   * @param   {Object}          [args]                            Command arguments\n   * @param   {Object}          [options]                         Options\n   * @param   {Properties}      [options.properties]              Custom properties to send with\n   *                                                              the request.\n   * @param   {Number}          [options.timeout]                 Timeout for the request.\n   * @return  {Promise}                                           Promise\n   *\n   * @example\n   * var promise = Kinvey.Command.execute('myCustomCommand').then(function(data) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static execute(command, args, options = {}) {\n    const client = Client.sharedInstance();\n\n    if (!command) {\n      throw new KinveyError('A command is required.');\n    }\n\n    if (!isString(command)) {\n      throw new KinveyError('Command must be a string.');\n    }\n\n    return client.executeNetworkRequest({\n      method: HttpMethod.POST,\n      pathname: `/${rpcNamespace}/${options.client.appKey}/custom/${command}`,\n      properties: options.properties,\n      auth: client.defaultAuth(),\n      data: args,\n      timeout: options.timeout\n    }).then(response => {\n      return response.data;\n    });\n  }\n}\n","/**\n * Enum for Mobile Identity Connect authorization grants.\n */\nconst AuthorizationGrant = {\n  AuthorizationCodeLoginPage: 'AuthorizationCodeLoginPage',\n  AuthorizationCodeAPI: 'AuthorizationCodeAPI'\n};\nObject.freeze(AuthorizationGrant);\nexport { AuthorizationGrant };\n\nconst AuthType = {\n  All: 'All',\n  App: 'App',\n  Basic: 'Basic',\n  Default: 'Default',\n  Master: 'Master',\n  None: 'None',\n  Session: 'Session'\n};\nObject.freeze(AuthType);\nexport { AuthType };\n\n/**\n * Enum for DataStore types.\n */\nconst DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexport { DataStoreType };\n\n/**\n * @private\n * Enum for Http Methods.\n */\nconst HttpMethod = {\n  GET: 'GET',\n  POST: 'POST',\n  PATCH: 'PATCH',\n  PUT: 'PUT',\n  DELETE: 'DELETE'\n};\nObject.freeze(HttpMethod);\nexport { HttpMethod };\n\n/**\n * Enum for Social Identities.\n */\nconst SocialIdentity = {\n  Facebook: 'facebook',\n  Google: 'google',\n  LinkedIn: 'linkedin'\n};\nObject.freeze(SocialIdentity);\nexport { SocialIdentity };\n\n/**\n * @provate\n * Enum for Status Codes.\n */\nconst StatusCode = {\n  Ok: 200,\n  Created: 201,\n  RedirectTemporarily: 301,\n  RedirectPermanetly: 302,\n  NotFound: 404,\n  ServerError: 500\n};\nObject.freeze(StatusCode);\nexport { StatusCode };\n","import util from 'util';\nimport isFunction from 'lodash/isFunction';\n\n/**\n * @private\n */\nError.extend = function extend(name) {\n  const SubType = function SubType(message, debug) {\n    if (!(this instanceof SubType)) {\n      return new SubType(message, debug);\n    }\n\n    this.name = name;\n    this.message = message;\n    this.description = message;\n    this.debug = debug;\n\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  };\n\n  util.inherits(SubType, this);\n\n  SubType.prototype.toString = function toString() {\n    return `${this.name}: ${util.inspect(this.message)}`;\n  };\n\n  SubType.extend = this.extend;\n  return SubType;\n};\n\nexport const ActiveUserError = Error.extend('ActiveUserError');\nexport const InsufficientCredentialsError = Error.extend('InsufficientCredentialsError');\nexport const InvalidCredentialsError = Error.extend('InvalidCredentialsError');\nexport const KinveyError = Error.extend('KinveyError');\nexport const NetworkConnectionError = Error.extend('NetworkConnectionError');\nexport const NotFoundError = Error.extend('NotFoundError');\nexport const NoResponseError = Error.extend('NoResponseError');\n","import Promise from 'babybird';\nimport { Aggregation } from './aggregation';\nimport { Client } from './client';\nimport { Command } from './command';\nimport { Log } from './log';\nimport { Metadata } from './metadata';\nimport { Query } from './query';\nimport { DataStore } from './stores/datastore';\nimport { Sync } from './sync';\nimport { User } from './user';\nimport { AuthType, AuthorizationGrant, SocialIdentity, HttpMethod, DataStoreType } from './enums';\nimport { NetworkRequest } from './requests/network';\nimport url from 'url';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\n\nclass Kinvey {\n  /**\n   * Initializes the library with your app's information.\n   *\n   * @param   {Object}        options                         Options\n   * @param   {string}        options.appKey                  My app key\n   * @param   {string}        [options.appSecret]             My app secret\n   * @param   {string}        [options.masterSecret]          My app's master secret\n   * @param   {string}        [options.encryptionKey]         My app's encryption key\n   * @param   {string}        [options.protocol]              The protocol of the client.\n   * @param   {string}        [options.host]                  The host of the client.\n   * @return  {Client}                                        An instance of Client.\n   *\n   * @throws  {KinveyError}  If an `options.appKey` is not provided.\n   * @throws  {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   *\n   * @example\n   * var client = Kinvey.init({\n   *   appKey: 'appKey',\n   *   appSecret: 'appSecret'\n   * });\n   */\n  static init(options) {\n    const client = Client.init(options);\n    return client;\n  }\n\n  /**\n   * Pings the Kinvey service.\n   *\n   * @returns {Promise} The response.\n   */\n  static ping(client = Client.sharedInstance()) {\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.All,\n      url: url.format({\n        protocol: client.protocol,\n        host: client.host,\n        pathname: `${appdataNamespace}/${client.appKey}`\n      })\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n}\n\nKinvey.Aggregation = Aggregation;\nKinvey.AuthorizationGrant = AuthorizationGrant;\nKinvey.Command = Command;\nKinvey.DataStore = DataStore;\nKinvey.DataStoreType = DataStoreType;\nKinvey.Log = Log;\nKinvey.Metadata = Metadata;\nKinvey.Promise = Promise;\nKinvey.Query = Query;\nKinvey.SocialIdentity = SocialIdentity;\nKinvey.Sync = Sync;\nKinvey.User = User;\nexport { Kinvey };\n","import Log from 'loglevel';\nconst originalFactory = Log.methodFactory;\n\nLog.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  const rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod(`Kinvey: ${message}`);\n  };\n};\n\nLog.setLevel(Log.levels.ERROR);\nexport { Log };\n","import { KinveyError } from './errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * Wrapper for accessing the `_kmd` properties of an entity.\n */\nexport class Metadata {\n  constructor(entity = {}) {\n    if (!isPlainObject(entity)) {\n      throw new KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.kmd = entity[kmdAttribute] || {};\n\n    /**\n     * The entity.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.entity = entity;\n  }\n\n  get createdAt() {\n    if (this.kmd.ect) {\n      return Date.parse(this.kmd.ect);\n    }\n\n    return undefined;\n  }\n\n  get emailVerification() {\n    return this.kmd.emailVerification.status;\n  }\n\n  get lastModified() {\n    if (this.kmd.lmt) {\n      return Date.parse(this.kmd.lmt);\n    }\n\n    return undefined;\n  }\n\n  get lmt() {\n    return this.lastModified;\n  }\n\n  get authtoken() {\n    return this.kmd.authtoken;\n  }\n\n  set authtoken(authtoken) {\n    this.kmd.authtoken = authtoken;\n  }\n\n  toJSON() {\n    return this.kmd;\n  }\n}\n","import Promise from 'babybird';\nimport { AuthType, HttpMethod, AuthorizationGrant } from './enums';\nimport { KinveyError } from './errors';\nimport { NetworkRequest } from './requests/network';\nimport { Client } from './client';\nimport { Popup } from './utils/popup';\nimport path from 'path';\nimport url from 'url';\nimport isString from 'lodash/isString';\nconst authPathname = process.env.KINVEY_MIC_AUTH_PATHNAME || '/oauth/auth';\nconst tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\n\n/**\n * @private\n */\nexport class MobileIdentityConnect {\n  constructor(client = Client.sharedInstance()) {\n    this.client = new Client({\n      protocol: process.env.KINVEY_MIC_PROTOCOL || 'https:',\n      host: process.env.KINVEY_MIC_HOST || 'auth.kinvey.com',\n      appKey: client.appKey,\n      appSecret: client.appSecret,\n      masterSecret: client.masterSecret,\n      encryptionKey: client.encryptionKey\n    });\n  }\n\n  static get identity() {\n    return process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\n  }\n\n  login(redirectUri, authorizationGrant = AuthorizationGrant.AuthorizationCodeLoginPage, options = {}) {\n    const clientId = this.client.appKey;\n\n    const promise = Promise.resolve().then(() => {\n      if (authorizationGrant === AuthorizationGrant.AuthorizationCodeLoginPage) {\n        // Step 1: Request a code\n        return this.requestCodeWithPopup(clientId, redirectUri, options);\n      } else if (authorizationGrant === AuthorizationGrant.AuthorizationCodeAPI) {\n        // Step 1a: Request a temp login url\n        return this.requestTempLoginUrl(clientId, redirectUri, options).then(url => {\n          // Step 1b: Request a code\n          return this.requestCodeWithUrl(url, clientId, redirectUri, options);\n        });\n      }\n\n      throw new KinveyError(`The authorization grant ${authorizationGrant} is unsupported. ` +\n        `Please use a supported authorization grant.`);\n    }).then(code => {\n      // Step 3: Request a token\n      return this.requestToken(code, clientId, redirectUri, options);\n    });\n\n    return promise;\n  }\n\n  requestTempLoginUrl(clientId, redirectUri, options = {}) {\n    let pathname = '/';\n\n    if (options.version) {\n      let version = options.version;\n\n      if (!isString(version)) {\n        version = String(version);\n      }\n\n      pathname = path.join(pathname, version.indexOf('v') === 0 ? version : `v${version}`);\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: path.join(pathname, authPathname)\n      }),\n      properties: options.properties,\n      data: {\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        response_type: 'code'\n      }\n    });\n    return request.execute().then(response => {\n      return response.data.temp_login_uri;\n    });\n  }\n\n  requestCodeWithPopup(clientId, redirectUri, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      let pathname = '/';\n\n      if (options.version) {\n        let version = options.version;\n\n        if (!isString(version)) {\n          version = String(version);\n        }\n\n        pathname = path.join(pathname, version.indexOf('v') === 0 ? version : `v${version}`);\n      }\n\n      const popup = new Popup(url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: path.join(pathname, authPathname),\n        query: {\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          response_type: 'code'\n        }\n      }));\n      return popup.open();\n    }).then((popup) => {\n      return new Promise((resolve, reject) => {\n        let redirected = false;\n\n        function loadHandler(loadedUrl) {\n          if (loadedUrl.indexOf(redirectUri) === 0) {\n            redirected = true;\n            popup.removeAllListeners();\n            popup.close();\n            resolve(url.parse(loadedUrl, true).query.code);\n          }\n        }\n\n        function closeHandler() {\n          popup.removeAllListeners();\n\n          if (!redirected) {\n            reject(new Error('Login has been cancelled.'));\n          }\n        }\n\n        popup.on('loaded', loadHandler);\n        popup.on('closed', closeHandler);\n      });\n    });\n\n    return promise;\n  }\n\n  requestCodeWithUrl(loginUrl, clientId, redirectUri, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      const request = new NetworkRequest({\n        method: HttpMethod.POST,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        url: loginUrl,\n        properties: options.properties,\n        data: {\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          response_type: 'code',\n          username: options.username,\n          password: options.password\n        },\n        followRedirect: false\n      });\n      return request.execute();\n    }).then(response => {\n      const location = response.getHeader('location');\n\n      if (location) {\n        return url.parse(location, true).query.code;\n      }\n\n      throw new KinveyError(`Unable to authorize user with username ${options.username}.`);\n    });\n\n    return promise;\n  }\n\n  requestToken(code, clientId, redirectUri, options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: tokenPathname\n      }),\n      properties: options.properties,\n      data: {\n        grant_type: 'authorization_code',\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        code: code\n      }\n    });\n    request.automaticallyRefreshAuthToken = false;\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n    return promise;\n  }\n\n  // refresh(token, options) {\n  //   const clientId = this.client.appKey;\n  //   return this.refreshToken(clientId, token, options);\n  // }\n\n  // refreshToken(clientId, token, options = {}) {\n  //   const request = new NetworkRequest({\n  //     method: HttpMethod.POST,\n  //     headers: {\n  //       'Content-Type': 'application/x-www-form-urlencoded'\n  //     },\n  //     authType: AuthType.App,\n  //     url: url.format({\n  //       protocol: this.client.protocol,\n  //       host: this.client.host,\n  //       pathname: tokenPathname\n  //     }),\n  //     properties: options.properties,\n  //     data: {\n  //       grant_type: 'refresh_token',\n  //       client_id: clientId,\n  //       redirect_uri: token.redirect_uri,\n  //       refresh_token: token.refresh_token\n  //     }\n  //   });\n  //   request.automaticallyRefreshAuthToken = false;\n\n  //   const promise = request.execute().then(response => {\n  //     return response.data;\n  //   });\n\n  //   return promise;\n  // }\n}\n","import { nested } from './utils/object';\nimport sift from 'sift';\nimport assign from 'lodash/assign';\nimport isArray from 'lodash/isArray';\nimport isNumber from 'lodash/isNumber';\nimport isString from 'lodash/isString';\nimport isObject from 'lodash/isObject';\nimport isRegExp from 'lodash/isRegExp';\nimport forEach from 'lodash/forEach';\n\nexport class Query {\n  constructor(options) {\n    options = assign({\n      fields: [],\n      filter: {},\n      sort: {},\n      limit: null,\n      skip: 0\n    }, options);\n\n    /**\n     * Fields to select.\n     *\n     * @type {Array}\n     */\n    this._fields = options.fields;\n\n    /**\n     * The MongoDB query.\n     *\n     * @type {Object}\n     */\n    this._filter = options.filter;\n\n    /**\n     * The sorting order.\n     *\n     * @type {Object}\n     */\n    this._sort = options.sort;\n\n    /**\n     * Number of documents to select.\n     *\n     * @type {?Number}\n     */\n    this._limit = options.limit;\n\n    /**\n     * Number of documents to skip from the start.\n     *\n     * @type {Number}\n     */\n    this._skip = options.skip;\n\n    /**\n     * Maintain reference to the parent query in case the query is part of a\n     * join.\n     *\n     * @type {?PrivateQuery}\n     */\n    this.parent = null;\n  }\n\n  /**\n   * Adds an equal to filter to the query. Requires `field` to equal `value`.\n   * Any existing filters on `field` will be discarded.\n   * http://docs.mongodb.org/manual/reference/operators/#comparison\n   *\n   * @param   {String}        field     Field.\n   * @param   {*}             value     Value.\n   * @returns {Query}                   The query.\n   */\n  equalTo(field, value) {\n    this._filter[field] = value;\n    return this;\n  }\n\n  /**\n   * Adds a contains filter to the query. Requires `field` to contain at least\n   * one of the members of `list`.\n   * http://docs.mongodb.org/manual/reference/operator/in/\n   *\n   * @param   {String}        field     Field.\n   * @param   {Array}         values    List of values.\n   * @throws  {Error}                   `values` must be of type: `Array`.\n   * @returns {Query}                   The query.\n   */\n  contains(field, values) {\n    if (!isArray(values)) {\n      values = [values];\n    }\n\n    return this.addFilter(field, '$in', values);\n  }\n\n  /**\n   * Adds a contains all filter to the query. Requires `field` to contain all\n   * members of `list`.\n   * http://docs.mongodb.org/manual/reference/operator/all/\n   *\n   * @param   {String}  field     Field.\n   * @param   {Array}   values    List of values.\n   * @throws  {Error}             `values` must be of type: `Array`.\n   * @returns {Query}             The query.\n   */\n  containsAll(field, values) {\n    if (!isArray(values)) {\n      values = [values];\n    }\n\n    return this.addFilter(field, '$all', values);\n  }\n\n  /**\n   * Adds a greater than filter to the query. Requires `field` to be greater\n   * than `value`.\n   * http://docs.mongodb.org/manual/reference/operator/gt/\n   *\n   * @param   {String}          field     Field.\n   * @param   {Number|String}   value     Value.\n   * @throws  {Error}                     `value` must be of type: `number` or `string`.\n   * @returns {Query}                     The query.\n   */\n  greaterThan(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$gt', value);\n  }\n\n  greaterThanOrEqualTo(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$gte', value);\n  }\n\n  lessThan(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$lt', value);\n  }\n\n  lessThanOrEqualTo(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$lte', value);\n  }\n\n  notEqualTo(field, value) {\n    return this.addFilter(field, '$ne', value);\n  }\n\n  notContainedIn(field, values) {\n    if (!isArray(values)) {\n      values = [values];\n    }\n\n    return this.addFilter(field, '$nin', values);\n  }\n\n  and() {\n    return this.join('$and', Array.prototype.slice.call(arguments));\n  }\n\n  nor() {\n    if (this.parent && this.parent.filter.$and) {\n      return this.parent.nor.apply(this.parent, arguments);\n    }\n\n    return this.join('$nor', Array.prototype.slice.call(arguments));\n  }\n\n  or() {\n    if (this.parent) {\n      return this.parent.or.apply(this.parent, arguments);\n    }\n\n    return this.join('$or', Array.prototype.slice.call(arguments));\n  }\n\n  exists(field, flag) {\n    flag = typeof flag === 'undefined' ? true : flag || false;\n    return this.addFilter(field, '$exists', flag);\n  }\n\n  mod(field, divisor, remainder) {\n    remainder = remainder || 0;\n\n    if (isString(divisor)) {\n      divisor = parseFloat(divisor);\n    }\n\n    if (isString(remainder)) {\n      remainder = parseFloat(remainder);\n    }\n\n    if (!isNumber(divisor)) {\n      throw new Error('Divisor must be a number.');\n    }\n\n    if (!isNumber(remainder)) {\n      throw new Error('Remainder must be a number.');\n    }\n\n    return this.addFilter(field, '$mod', [divisor, remainder]);\n  }\n\n  matches(field, regExp, options) {\n    options = options || {};\n\n    if (!isRegExp(regExp)) {\n      regExp = new RegExp(regExp);\n    }\n\n    if ((regExp.ignoreCase || options.ignoreCase) && options.ignoreCase !== false) {\n      throw new Error('ignoreCase glag is not supported.');\n    }\n\n    if (regExp.source.indexOf('^') !== 0) {\n      throw new Error('regExp must have `^` at the beginning of the expression ' +\n        'to make it an anchored expression.');\n    }\n\n    const flags = [];\n\n    if ((regExp.multiline || options.multiline) && options.multiline !== false) {\n      flags.push('m');\n    }\n\n    if (options.extended) {\n      flags.push('x');\n    }\n\n    if (options.dotMatchesAll) {\n      flags.push('s');\n    }\n\n    const result = this.addFilter(field, '$regex', regExp.source);\n\n    if (flags.length) {\n      this.addFilter(field, '$options', flags.join(''));\n    }\n\n    return result;\n  }\n\n  near(field, coord, maxDistance) {\n    if (!isArray(coord) || !coord[0] || !coord[1]) {\n      throw new Error('coord argument must be of type: [number, number]');\n    }\n\n    coord[0] = parseFloat(coord[0]);\n    coord[1] = parseFloat(coord[1]);\n\n    const result = this.addFilter(field, '$nearSphere', [coord[0], coord[1]]);\n\n    if (maxDistance) {\n      this.addFilter(field, '$maxDistance', maxDistance);\n    }\n\n    return result;\n  }\n\n  withinBox(field, bottomLeftCoord, upperRightCoord) {\n    if (!isArray(bottomLeftCoord) || !bottomLeftCoord[0] || !bottomLeftCoord[1]) {\n      throw new Error('bottomLeftCoord argument must be of type: [number, number]');\n    }\n\n    if (!isArray(upperRightCoord) || !upperRightCoord[0] || !upperRightCoord[1]) {\n      throw new Error('upperRightCoord argument must be of type: [number, number]');\n    }\n\n    bottomLeftCoord[0] = parseFloat(bottomLeftCoord[0]);\n    bottomLeftCoord[1] = parseFloat(bottomLeftCoord[1]);\n    upperRightCoord[0] = parseFloat(upperRightCoord[0]);\n    upperRightCoord[1] = parseFloat(upperRightCoord[1]);\n\n    const coords = [\n      [bottomLeftCoord[0], bottomLeftCoord[1]],\n      [upperRightCoord[0], upperRightCoord[1]]\n    ];\n    return this.addFilter(field, '$within', { $box: coords });\n  }\n\n  withinPolygon(field, coords) {\n    if (!isArray(coords) || coords.length > 3) {\n      throw new Error('coords argument must be of type: [[number, number]]');\n    }\n\n    coords = coords.map(function (coord) {\n      if (!coord[0] || !coord[1]) {\n        throw new Error('coords argument must be of type: [number, number]');\n      }\n\n      return [parseFloat(coord[0]), parseFloat(coord[1])];\n    });\n\n    return this.addFilter(field, '$within', { $polygon: coords });\n  }\n\n  size(field, size) {\n    if (isString(size)) {\n      size = parseFloat(size);\n    }\n\n    if (!isNumber(size)) {\n      throw new Error('size argument must be a number');\n    }\n\n    return this.addFilter(field, '$size', size);\n  }\n\n  fields(fields) {\n    fields = fields || [];\n\n    if (!isArray(fields)) {\n      throw new Error('fields argument must an Array.');\n    }\n\n    if (this.parent) {\n      this.parent.fields(fields);\n    } else {\n      this._fields = fields;\n    }\n\n    return this;\n  }\n\n  limit(limit) {\n    if (isString(limit)) {\n      limit = parseFloat(limit);\n    }\n\n    if (limit && !isNumber(limit)) {\n      throw new Error('limit argument must be of type: number.');\n    }\n\n    if (this._parent) {\n      this.parent.limit(limit);\n    } else {\n      this._limit = limit;\n    }\n\n    return this;\n  }\n\n  skip(skip) {\n    if (isString(skip)) {\n      skip = parseFloat(skip);\n    }\n\n    if (!isNumber(skip)) {\n      throw new Error('skip argument must be of type: number.');\n    }\n\n    if (this.parent) {\n      this.parent.skip(skip);\n    } else {\n      this._skip = skip;\n    }\n\n    return this;\n  }\n\n  ascending(field) {\n    if (this.parent) {\n      this.parent.ascending(field);\n    } else {\n      this._sort[field] = 1;\n    }\n\n    return this;\n  }\n\n  descending(field) {\n    if (this.parent) {\n      this.parent.descending(field);\n    } else {\n      this._sort[field] = -1;\n    }\n\n    return this;\n  }\n\n  sort(sort) {\n    if (sort && !isObject(sort)) {\n      throw new Error('sort argument must be of type: Object.');\n    }\n\n    if (this.parent) {\n      this.parent.sort(sort);\n    } else {\n      this._sort = sort || {};\n    }\n\n    return this;\n  }\n\n  /**\n   * Adds a filter to the query.\n   *\n   * @param   {String}          field       Field.\n   * @param   {String}          condition   Condition.\n   * @param   {*}               value       Value.\n   * @returns {PrivateQuery}                The query.\n   */\n  addFilter(field, condition, values) {\n    if (!isObject(this._filter[field])) {\n      this._filter[field] = {};\n    }\n\n    this._filter[field][condition] = values;\n    return this;\n  }\n\n  /**\n   * Joins the current query with another query using an operator.\n   *\n   * @param   {String}                    operator    Operator.\n   * @param   {PrivateQuery[]|Object[]}   queries     Queries.\n   * @throws  {Error}                                `query` must be of type: `Kinvey.Query[]` or `Object[]`.\n   * @returns {PrivateQuery}                          The query.\n   */\n  join(operator, queries) {\n    let _this = this;\n    const currentQuery = {};\n\n    // Cast, validate, and parse arguments. If `queries` are supplied, obtain\n    // the `filter` for joining. The eventual return function will be the\n    // current query.\n    queries = queries.map(function (query) {\n      if (!(query instanceof Query)) {\n        if (isObject(query)) {\n          query = new Query(query);\n        } else {\n          throw new Error('query argument must be of type: Kinvey.Query[] or Object[].');\n        }\n      }\n\n      return query.toJSON().filter;\n    });\n\n    // If there are no `queries` supplied, create a new (empty) `Query`.\n    // This query is the right-hand side of the join expression, and will be\n    // returned to allow for a fluent interface.\n    if (queries.length === 0) {\n      _this = new Query();\n      queries = [_this.toJSON().filter];\n      _this.parent = this; // Required for operator precedence and `toJSON`.\n    }\n\n    // Join operators operate on the top-level of `filter`. Since the `toJSON`\n    // magic requires `filter` to be passed by reference, we cannot simply re-\n    // assign `filter`. Instead, empty it without losing the reference.\n    const members = Object.keys(this._filter);\n    forEach(members, member => {\n      currentQuery[member] = this._filter[member];\n      delete this._filter[member];\n    });\n\n    // `currentQuery` is the left-hand side query. Join with `queries`.\n    this._filter[operator] = [currentQuery].concat(queries);\n\n    // Return the current query if there are `queries`, and the new (empty)\n    // `PrivateQuery` otherwise.\n    return _this;\n  }\n\n  /**\n   * Processes the data by applying fields, sort, limit, and skip.\n   *\n   * @param   {Array}   data    The raw data.\n   * @throws  {Error}               `data` must be of type: `Array`.\n   * @returns {Array}               The processed data.\n   */\n  _process(data) {\n    if (data) {\n      // Validate arguments.\n      if (!isArray(data)) {\n        throw new Error('data argument must be of type: Array.');\n      }\n\n      // Apply the query\n      const json = this.toJSON();\n      data = sift(json.filter, data);\n\n      // Remove fields\n      if (json.fields && json.fields.length > 0) {\n        data = data.map((item) => {\n          const keys = Object.keys(item);\n          forEach(keys, key => {\n            if (json.fields.indexOf(key) === -1) {\n              delete item[key];\n            }\n          });\n\n          return item;\n        });\n      }\n\n      // Sorting.\n      data = data.sort((a, b) => {\n        const fields = Object.keys(json.sort);\n        forEach(fields, field => {\n          // Find field in objects.\n          const aField = nested(a, field);\n          const bField = nested(b, field);\n\n          // Elements which do not contain the field should always be sorted\n          // lower.\n          if (aField && !bField) {\n            return -1;\n          }\n\n          if (bField && !aField) {\n            return 1;\n          }\n\n          // Sort on the current field. The modifier adjusts the sorting order\n          // (ascending (-1), or descending(1)). If the fields are equal,\n          // continue sorting based on the next field (if any).\n          if (aField !== bField) {\n            const modifier = json.sort[field]; // 1 or -1.\n            return (aField < bField ? -1 : 1) * modifier;\n          }\n        });\n\n        return 0;\n      });\n\n      // Limit and skip.\n      if (json.limit) {\n        return data.slice(json.skip, json.skip + json.limit);\n      }\n\n      return data.slice(json.skip);\n    }\n\n    return data;\n  }\n\n  /**\n   * Returns JSON representation of the query.\n   *\n   * @returns {Object} JSON object-literal.\n   */\n  toJSON() {\n    if (this.parent) {\n      return this.parent.toJSON();\n    }\n\n    // Return set of parameters.\n    const json = {\n      fields: this._fields,\n      filter: this._filter,\n      sort: this._sort,\n      skip: this._skip,\n      limit: this._limit\n    };\n\n    return json;\n  }\n}\n","const levels = [];\nconst c0 = String.fromCharCode(9500);\nconst c1 = String.fromCharCode(9472);\nconst c2 = String.fromCharCode(9492);\nconst c3 = String.fromCharCode(9474);\n\nfunction compose(node, end) {\n  if (node.level === 0) {\n    return node.value;\n  }\n\n  let ret = '\\r\\n';\n  const c = end ? c2 : c0;\n\n  for (let i = 1; i < node.level; i++) {\n    ret = `${ret}${levels[i] ? ' ' : c3}`;\n    ret = `${ret}  `;\n  }\n\n  return `${ret}${c}${c1} ${node.value}`;\n}\n\n/**\n * @private\n */\nexport const AsciiTree = {\n  generate(tree = {}, end) {\n    let result = compose(tree, end);\n\n    if (tree.nodes.length > 0) {\n      const last = tree.nodes.length - 1;\n      tree.nodes.forEach((subTree, index) => {\n        levels[subTree.level] = index === last;\n        result = result + this.generate(subTree, index === last);\n      });\n    }\n\n    return result;\n  }\n};\n","import Promise from 'babybird';\nimport { AsciiTree } from './asciiTree';\n\n/**\n * @private\n */\nexport class Middleware {\n  constructor(name = 'Middleware') {\n    this.name = name;\n  }\n\n  handle(request = {}) {\n    return Promise.resolve(request);\n  }\n\n  generateTree(level = 0) {\n    const root = {\n      value: this.name,\n      level: level,\n      nodes: []\n    };\n    return root;\n  }\n\n  toString() {\n    const root = this.generateTree();\n    return AsciiTree.generate(root);\n  }\n}\n\n/**\n * @private\n */\nexport class KinveyMiddleware extends Middleware {\n  constructor(name = 'Kinvey Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return new Promise((resolve, reject) => {\n      if (!request) {\n        return reject(new Error('Request is null. Please provide a valid request.', request));\n      }\n\n      return resolve(request);\n    });\n  }\n}\n","import { KinveyMiddleware } from '../middleware';\nimport { DB, DBAdapter } from '../persistence/db';\nimport { HttpMethod, StatusCode } from '../../enums';\nimport UrlPattern from 'url-pattern';\nimport url from 'url';\n\n/**\n * @private\n */\nexport class CacheMiddleware extends KinveyMiddleware {\n  constructor(adapters = [DBAdapter.IndexedDB, DBAdapter.WebSQL, DBAdapter.LocalStorage, DBAdapter.Memory]) {\n    super('Kinvey Cache Middleware');\n    this.adapters = adapters;\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const pathname = url.parse(request.url).pathname;\n      const pattern = new UrlPattern('(/:namespace)(/)(:appKey)(/)(:collection)(/)(:id)(/)');\n      const { appKey, collection, id } = pattern.match(pathname) || {};\n      const method = request.method;\n      const query = request.query;\n      const data = request.data;\n      const db = new DB(appKey, this.adapters);\n      let promise;\n\n      if (method === HttpMethod.GET) {\n        if (id) {\n          if (id === '_count') {\n            promise = db.count(collection, query);\n          } else if (id === '_group') {\n            promise = db.group(collection, data);\n          } else {\n            promise = db.findById(collection, id);\n          }\n        } else {\n          promise = db.find(collection, query);\n        }\n      } else if (method === HttpMethod.POST || method === HttpMethod.PUT) {\n        promise = db.save(collection, data);\n      } else if (method === HttpMethod.DELETE) {\n        if (id) {\n          promise = db.removeById(collection, id);\n        } else {\n          promise = db.remove(collection, query);\n        }\n      }\n\n      return promise.then(result => {\n        let statusCode = StatusCode.Ok;\n\n        if (method === HttpMethod.POST) {\n          statusCode = StatusCode.Created;\n        }\n\n        request.response = {\n          statusCode: statusCode,\n          headers: {},\n          data: result\n        };\n\n        return request;\n      });\n    });\n  }\n}\n","import { KinveyMiddleware } from '../middleware';\n\n/**\n * @private\n */\nexport class ParseMiddleware extends KinveyMiddleware {\n  constructor(name = 'Kinvey Parse Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const response = request.response;\n\n      if (response && response.data) {\n        const contentType = response.headers['content-type'] || response.headers['Content-Type'];\n\n        if (contentType.indexOf('application/json') === 0) {\n          try {\n            response.data = JSON.parse(response.data);\n          } catch (err) {\n            response.data = response.data;\n          }\n\n          request.response = response;\n        }\n      }\n\n      return request;\n    });\n  }\n}\n","import { KinveyMiddleware } from '../middleware';\nimport forEach from 'lodash/forEach';\n\n/**\n * @private\n */\nexport class SerializeMiddleware extends KinveyMiddleware {\n  constructor(name = 'Kinvey Serialize Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      if (request && request.data) {\n        const contentType = request.headers['content-type'] || request.headers['Content-Type'];\n\n        if (contentType.indexOf('application/json') === 0) {\n          request.data = JSON.stringify(request.data);\n        } else if (contentType.indexOf('application/x-www-form-urlencoded') === 0) {\n          const data = request.data;\n          const str = [];\n          const keys = Object.keys(data);\n\n          forEach(keys, key => {\n            str.push(`${global.encodeURIComponent(key)}=${global.encodeURIComponent(data[key])}`);\n          });\n\n          request.data = str.join('&');\n        }\n      }\n\n      return request;\n    });\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyError, NotFoundError } from '../../../errors';\nimport forEach from 'lodash/forEach';\nimport isArray from 'lodash/isArray';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\nconst dbCache = {};\n\nconst TransactionMode = {\n  ReadWrite: 'readwrite',\n  ReadOnly: 'readonly',\n};\nObject.freeze(TransactionMode);\n\nif (typeof window !== 'undefined') {\n  require('indexeddbshim');\n  global.shimIndexedDB.__useShim();\n}\n\nconst indexedDB = global.shimIndexedDB ||\n                  global.indexedDB ||\n                  global.mozIndexedDB ||\n                  global.webkitIndexedDB ||\n                  global.msIndexedDB;\n\n/**\n * @private\n */\nexport class IndexedDB {\n  constructor(name) {\n    if (!name) {\n      throw new KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!isString(name)) {\n      throw new KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.inTransaction = false;\n    this.queue = [];\n  }\n\n  openTransaction(collection, write = false, success, error, force = false) {\n    let db = dbCache[this.name];\n\n    if (db) {\n      const containsCollection = isFunction(db.objectStoreNames.contains) ?\n        db.objectStoreNames.contains(collection) : db.objectStoreNames.indexOf(collection) !== -1;\n\n      if (containsCollection) {\n        try {\n          const mode = write ? TransactionMode.ReadWrite : TransactionMode.ReadOnly;\n          const txn = db.transaction([collection], mode);\n\n          if (txn) {\n            const store = txn.objectStore(collection);\n            return success(store);\n          }\n\n          throw new KinveyError(`Unable to open a transaction for the ${collection} ` +\n            `collection on the ${this.name} indexedDB database.`);\n        } catch (err) {\n          return error(err);\n        }\n      } else if (!write) {\n        return error(new NotFoundError(`The ${collection} collection was not found on ` +\n          `the ${this.name} indexedDB database.`));\n      }\n    }\n\n    if (!force && this.inTransaction) {\n      return this.queue.push(() => {\n        this.openTransaction(collection, write, success, error);\n      });\n    }\n\n    // Switch flag\n    this.inTransaction = true;\n    let request;\n\n    if (db) {\n      const version = db.version + 1;\n      request = indexedDB.open(this.name, version);\n    } else {\n      request = indexedDB.open(this.name);\n    }\n\n    // If the database is opened with an higher version than its current, the\n    // `upgradeneeded` event is fired. Save the handle to the database, and\n    // create the collection.\n    request.onupgradeneeded = e => {\n      db = e.target.result;\n\n      if (write) {\n        db.createObjectStore(collection, { keyPath: '_id' });\n      }\n    };\n\n    // The `success` event is fired after `upgradeneeded` terminates.\n    // Save the handle to the database.\n    request.onsuccess = e => {\n      db = e.target.result;\n      dbCache[this.name] = db;\n\n      // If a second instance of the same IndexedDB database performs an\n      // upgrade operation, the `versionchange` event is fired. Then, close the\n      // database to allow the external upgrade to proceed.\n      db.onversionchange = () => {\n        if (db) {\n          db.close();\n          db = null;\n          dbCache[this.name] = null;\n        }\n      };\n\n      // Try to obtain the collection handle by recursing. Append the handlers\n      // to empty the queue upon success and failure. Set the `force` flag so\n      // all but the current transaction remain queued.\n      const wrap = done => {\n        return arg => {\n          done(arg);\n\n          // Switch flag\n          this.inTransaction = false;\n\n          // The database handle has been established, we can now safely empty\n          // the queue. The queue must be emptied before invoking the concurrent\n          // operations to avoid infinite recursion.\n          if (this.queue.length > 0) {\n            const pending = this.queue;\n            this.queue = [];\n            forEach(pending, fn => {\n              fn.call(this);\n            });\n          }\n        };\n      };\n\n      this.openTransaction(collection, write, wrap(success), wrap(error), true);\n    };\n\n    request.onblocked = () => {\n      error(new KinveyError(`The ${this.name} indexedDB database version can't be upgraded ` +\n        `because the database is already open.`));\n    };\n\n    request.onerror = e => {\n      error(new KinveyError(`Unable to open the ${this.name} indexedDB database. ` +\n        `Received the error code ${e.target.errorCode}.`));\n    };\n  }\n\n  find(collection) {\n    const promise = new Promise((resolve, reject) => {\n      if (!collection) {\n        return reject(new KinveyError('A collection was not provided.'));\n      }\n\n      this.openTransaction(collection, false, store => {\n        const request = store.openCursor();\n        const response = [];\n\n        request.onsuccess = function onSuccess(e) {\n          const cursor = e.target.result;\n\n          if (cursor) {\n            response.push(cursor.value);\n            return cursor.continue();\n          }\n\n          resolve(response);\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while fetching data from the ${collection} ` +\n            `collection on the ${this.name} indexedDB database. Received the error code ${e.target.errorCode}.`));\n        };\n      }, error => {\n        if (error instanceof NotFoundError) {\n          return resolve([]);\n        }\n\n        reject(error);\n      });\n    });\n\n    return promise;\n  }\n\n  findById(collection, id) {\n    const promise = new Promise((resolve, reject) => {\n      this.openTransaction(collection, false, store => {\n        const request = store.get(id);\n\n        request.onsuccess = (e) => {\n          const entity = e.target.result;\n\n          if (entity) {\n            return resolve(entity);\n          }\n\n          reject(new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n            `collection on the ${this.name} indexedDB database.`));\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while retrieving an entity with _id = ${id} ` +\n            `from the ${collection} collection on the ${this.name} indexedDB database. ` +\n            `Received the error code ${e.target.errorCode}.`));\n        };\n      }, error => {\n        if (error instanceof NotFoundError) {\n          return reject(new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n            `collection on the ${this.name} indexedDB database.`));\n        }\n\n        reject(error);\n      });\n    });\n\n    return promise;\n  }\n\n  save(collection, entities) {\n    let singular = false;\n\n    if (!isArray(entities)) {\n      entities = [entities];\n      singular = true;\n    }\n\n    if (entities.length === 0) {\n      return Promise.resolve(entities);\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      this.openTransaction(collection, true, store => {\n        const request = store.transaction;\n\n        forEach(entities, entity => {\n          store.put(entity);\n        });\n\n        request.oncomplete = function onComplete() {\n          resolve(singular ? entities[0] : entities);\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while saving the entities to the ${collection} ` +\n            `collection on the ${this.name} indexedDB database. Received the error code ${e.target.errorCode}.`));\n        };\n      }, reject);\n    });\n\n    return promise;\n  }\n\n  removeById(collection, id) {\n    const promise = new Promise((resolve, reject) => {\n      this.openTransaction(collection, true, store => {\n        const request = store.transaction;\n        const doc = store.get(id);\n        store.delete(id);\n\n        request.oncomplete = () => {\n          if (!doc.result) {\n            return reject(new NotFoundError(`An entity with id = ${id} was not found in the ${collection} `\n              + `collection on the ${this.name} indexedDB database.`));\n          }\n\n          resolve({\n            count: 1,\n            entities: [doc.result]\n          });\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while deleting an entity with id = ${id} ` +\n            `in the ${collection} collection on the ${this.name} indexedDB database. ` +\n            `Received the error code ${e.target.errorCode}.`));\n        };\n      }, reject);\n    });\n\n    return promise;\n  }\n\n  static isSupported() {\n    return indexedDB ? true : false;\n  }\n}\n","import Promise from 'babybird';\nimport { NotFoundError } from '../../../errors';\nimport keyBy from 'lodash/keyBy';\nimport merge from 'lodash/merge';\nimport values from 'lodash/values';\nimport forEach from 'lodash/forEach';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst localStorage = global.localStorage;\n\n/**\n * @private\n */\nexport class LocalStorage {\n  constructor(name = 'kinvey') {\n    this.name = name;\n  }\n\n  find(collection) {\n    return Promise.resolve().then(() => {\n      const data = localStorage.getItem(`${this.name}${collection}`);\n\n      try {\n        return JSON.parse(data);\n      } catch (err) {\n        return data;\n      }\n    }).then(entities => {\n      if (!entities) {\n        return [];\n      }\n\n      return entities;\n    });\n  }\n\n  findById(collection, id) {\n    return this.find(collection).then(entities => {\n      const entity = find(entities, entity => {\n        return entity[idAttribute] === id;\n      });\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      return entity;\n    });\n  }\n\n  save(collection, entities) {\n    return this.find(collection).then(existingEntities => {\n      const existingEntitiesById = keyBy(existingEntities, idAttribute);\n      const entitiesById = keyBy(entities, idAttribute);\n      const existingEntityIds = Object.keys(existingEntitiesById);\n\n      forEach(existingEntityIds, id => {\n        const existingEntity = existingEntitiesById[id];\n        const entity = entitiesById[id];\n\n        if (entity) {\n          entitiesById[id] = merge(existingEntity, entity);\n        }\n      });\n\n      localStorage.setItem(`${this.name}${collection}`, JSON.stringify(values(entitiesById)));\n      return entities;\n    });\n  }\n\n  removeById(collection, id) {\n    return this.find(collection).then(entities => {\n      const entitiesById = keyBy(entities, idAttribute);\n      const entity = entitiesById[id];\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      delete entitiesById[id];\n      localStorage.setItem(`${this.name}${collection}`, JSON.stringify(values(entitiesById)));\n\n      return {\n        count: 1,\n        entities: [entity]\n      };\n    });\n  }\n\n  static isSupported() {\n    if (localStorage) {\n      const item = 'testLocalStorageSupport';\n      try {\n        localStorage.setItem(item, item);\n        localStorage.removeItem(item);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n\n    return false;\n  }\n}\n","import Promise from 'babybird';\nimport Queue from 'promise-queue';\nimport { KinveyError, NotFoundError } from '../../../errors';\nimport MemoryCache from 'fast-memory-cache';\nimport keyBy from 'lodash/keyBy';\nimport forEach from 'lodash/forEach';\nimport values from 'lodash/values';\nimport find from 'lodash/find';\nimport isString from 'lodash/isString';\nimport isArray from 'lodash/isArray';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst caches = [];\n\nQueue.configure(Promise);\nconst queue = new Queue(1, Infinity);\n\n/**\n * @private\n */\nexport class Memory {\n  constructor(name) {\n    if (!name) {\n      throw new KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!isString(name)) {\n      throw new KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.cache = caches[name];\n\n    if (!this.cache) {\n      this.cache = new MemoryCache();\n      caches[name] = this.cache;\n    }\n  }\n\n  find(collection) {\n    return queue.add(() => {\n      return Promise.resolve().then(() => {\n        const entities = this.cache.get(`${this.name}${collection}`);\n\n        if (entities) {\n          try {\n            return JSON.parse(entities);\n          } catch (err) {\n            return entities;\n          }\n        }\n\n        return entities;\n      }).then(entities => {\n        if (!entities) {\n          return [];\n        }\n\n        return entities;\n      });\n    });\n  }\n\n  findById(collection, id) {\n    return this.find(collection).then(entities => {\n      const entity = find(entities, entity => {\n        return entity[idAttribute] === id;\n      });\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      return entity;\n    });\n  }\n\n  save(collection, entities) {\n    let singular = false;\n\n    if (!isArray(entities)) {\n      entities = [entities];\n      singular = true;\n    }\n\n    if (entities.length === 0) {\n      return Promise.resolve(entities);\n    }\n\n    return this.find(collection).then(existingEntities => {\n      existingEntities = keyBy(existingEntities, idAttribute);\n      entities = keyBy(entities, idAttribute);\n      const entityIds = Object.keys(entities);\n\n      forEach(entityIds, id => {\n        existingEntities[id] = entities[id];\n      });\n\n      this.cache.set(`${this.name}${collection}`, JSON.stringify(values(existingEntities)));\n      entities = values(entities);\n      return singular ? entities[0] : entities;\n    });\n  }\n\n  removeById(collection, id) {\n    return this.find(collection).then(entities => {\n      entities = keyBy(entities, idAttribute);\n      const entity = entities[id];\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      delete entities[id];\n      this.cache.set(`${this.name}${collection}`, JSON.stringify(values(entities)));\n\n      return {\n        count: 1,\n        entities: [entity]\n      };\n    });\n  }\n\n  static isSupported() {\n    return true;\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyError, NotFoundError } from '../../../errors';\nimport map from 'lodash/map';\nimport forEach from 'lodash/forEach';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst masterCollectionName = 'sqlite_master';\nconst size = 5 * 1000 * 1000; // Database size in bytes\nlet webSQL = null;\nconst dbCache = {};\n\nif (typeof window !== 'undefined') {\n  webSQL = {\n    openDatabase: typeof openDatabase !== 'undefined' ? openDatabase : global.openDatabase\n  };\n}\n\n/**\n * @private\n */\nexport class WebSQL {\n  constructor(name = 'kinvey') {\n    this.name = name;\n  }\n\n  openTransaction(collection, query, parameters, write = false) {\n    let db = dbCache[this.name];\n    const escapedCollection = `\"${collection}\"`;\n    const isMaster = collection === masterCollectionName;\n    const isMulti = isArray(query);\n\n    query = isMulti ? query : [[query, parameters]];\n\n    if (!db) {\n      db = webSQL.openDatabase(this.name, 1, '', size);\n      dbCache[this.name] = db;\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      const writeTxn = write || !isFunction(db.readTransaction);\n      db[writeTxn ? 'transaction' : 'readTransaction'](tx => {\n        if (write && !isMaster) {\n          tx.executeSql(`CREATE TABLE IF NOT EXISTS ${escapedCollection} ` +\n            `(key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)`);\n        }\n\n        let pending = query.length;\n        const responses = [];\n\n        forEach(query, parts => {\n          const sql = parts[0].replace('#{collection}', escapedCollection);\n\n          tx.executeSql(sql, parts[1], (_, resultSet) => {\n            const response = {\n              rowCount: resultSet.rowsAffected,\n              result: []\n            };\n\n            if (resultSet.rows.length) {\n              for (let i = 0, len = resultSet.rows.length; i < len; i++) {\n                try {\n                  const value = resultSet.rows.item(i).value;\n                  const entity = isMaster ? value : JSON.parse(value);\n                  response.result.push(entity);\n                } catch (err) {\n                  // Catch the error\n                }\n              }\n            }\n\n            responses.push(response);\n            pending = pending - 1;\n\n            if (pending === 0) {\n              resolve(isMulti ? responses : responses.shift());\n            }\n          });\n        });\n      }, err => {\n        err = isString(err) ? err : err.message;\n\n        if (err && err.indexOf('no such table') === -1) {\n          return reject(new NotFoundError(`The ${collection} collection was not found on ` +\n            `the ${this.name} webSQL database.`));\n        }\n\n        const query = `SELECT name AS value from #{collection} WHERE type = ? AND name = ?`;\n        const parameters = ['table', collection];\n\n        this.openTransaction(masterCollectionName, query, parameters).then(response => {\n          if (response.result.length === 0) {\n            return reject(new NotFoundError(`The ${collection} collection was not found on ` +\n              `the ${this.name} webSQL database.`));\n          }\n\n          reject(new KinveyError(`Unable to open a transaction for the ${collection} ` +\n            `collection on the ${this.name} webSQL database.`));\n        }).catch(err => {\n          reject(new KinveyError(`Unable to open a transaction for the ${collection} ` +\n            `collection on the ${this.name} webSQL database.`, err));\n        });\n      });\n    });\n\n    return promise;\n  }\n\n  find(collection) {\n    const sql = 'SELECT value FROM #{collection}';\n    const promise = this.openTransaction(collection, sql, []).then(response => {\n      return response.result;\n    }).catch(error => {\n      if (error instanceof NotFoundError) {\n        return [];\n      }\n\n      throw error;\n    });\n    return promise;\n  }\n\n  findById(collection, id) {\n    const sql = 'SELECT value FROM #{collection} WHERE key = ?';\n    const promise = this.openTransaction(collection, sql, [id]).then(response => {\n      const entities = response.result;\n\n      if (entities.length === 0) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} webSQL database.`);\n      }\n\n      return entities[0];\n    });\n    return promise;\n  }\n\n  save(collection, entities) {\n    const queries = [];\n    entities = map(entities, entity => {\n      queries.push([\n        'REPLACE INTO #{collection} (key, value) VALUES (?, ?)',\n        [entity[idAttribute], JSON.stringify(entity)]\n      ]);\n\n      return entity;\n    });\n\n    const promise = this.openTransaction(collection, queries, null, true).then(() => {\n      return entities;\n    });\n    return promise;\n  }\n\n  removeById(collection, id) {\n    const promise = this.openTransaction(collection, [\n      ['SELECT value FROM #{collection} WHERE key = ?', [id]],\n      ['DELETE FROM #{collection} WHERE key = ?', [id]],\n    ], null, true).then(response => {\n      const entities = response[0].result;\n      let count = response[1].rowCount;\n      count = count ? count : entities.length;\n\n      if (count === 0) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} webSQL database.`);\n      }\n\n      return {\n        count: 1,\n        entities: entities\n      };\n    });\n\n    return promise;\n  }\n\n  static isSupported() {\n    return webSQL ? true : false;\n  }\n}\n","import Promise from 'babybird';\nimport { Query } from '../../query';\nimport { Aggregation } from '../../aggregation';\nimport { IndexedDB } from './adapters/indexeddb';\nimport { LocalStorage } from './adapters/localstorage';\nimport { Memory } from './adapters/memory';\nimport { WebSQL } from './adapters/websql';\nimport { KinveyError } from '../../errors';\nimport { Log } from '../../log';\nimport map from 'lodash/map';\nimport result from 'lodash/result';\nimport reduce from 'lodash/reduce';\nimport forEach from 'lodash/forEach';\nimport isString from 'lodash/isString';\nimport isArray from 'lodash/isArray';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * @private\n * Enum for DB Adapters.\n */\nconst DBAdapter = {\n  IndexedDB: 'IndexedDB',\n  LocalStorage: 'LocalStorage',\n  Memory: 'Memory',\n  WebSQL: 'WebSQL'\n};\nObject.freeze(DBAdapter);\nexport { DBAdapter };\n\n/**\n * @private\n */\nexport class DB {\n  constructor(name, adapters = [DBAdapter.IndexedDB, DBAdapter.WebSQL, DBAdapter.LocalStorage, DBAdapter.Memory]) {\n    if (!isArray(adapters)) {\n      adapters = [adapters];\n    }\n\n    forEach(adapters, adapter => {\n      switch (adapter) {\n        case DBAdapter.IndexedDB:\n          if (IndexedDB.isSupported()) {\n            this.adapter = new IndexedDB(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.LocalStorage:\n          if (LocalStorage.isSupported()) {\n            this.adapter = new LocalStorage(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.Memory:\n          if (Memory.isSupported()) {\n            this.adapter = new Memory(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.WebSQL:\n          if (WebSQL.isSupported()) {\n            this.adapter = new WebSQL(name);\n            return false;\n          }\n\n          break;\n        default:\n          Log.warn(`The ${adapter} adapter is is not recognized.`);\n      }\n    });\n\n    if (!this.adapter) {\n      if (Memory.isSupported()) {\n        Log.error('Provided adapters are unsupported on this platform. ' +\n          'Defaulting to StoreAdapter.Memory adapter.', adapters);\n        this.adapter = new Memory(name);\n      } else {\n        Log.error('Provided adapters are unsupported on this platform.', adapters);\n      }\n    }\n  }\n\n  get objectIdPrefix() {\n    return '';\n  }\n\n  generateObjectId(length = 24) {\n    const chars = 'abcdef0123456789';\n    let objectId = '';\n\n    for (let i = 0, j = chars.length; i < length; i++) {\n      const pos = Math.floor(Math.random() * j);\n      objectId += chars.substring(pos, pos + 1);\n    }\n\n    objectId = `${this.objectIdPrefix}${objectId}`;\n    return objectId;\n  }\n\n  find(collection, query) {\n    const promise = this.adapter.find(collection).then(entities => {\n      if (!entities) {\n        return [];\n      }\n\n      return entities;\n    }).then(entities => {\n      if (query && !(query instanceof Query)) {\n        query = new Query(result(query, 'toJSON', query));\n      }\n\n      if (entities.length > 0 && query) {\n        entities = query._process(entities);\n      }\n\n      return entities;\n    });\n\n    return promise;\n  }\n\n  count(collection, query) {\n    const promise = this.find(collection, query).then(entities => {\n      return entities.length;\n    });\n\n    return promise;\n  }\n\n  group(collection, aggregation) {\n    const promise = this.find(collection).then(entities => {\n      if (!(aggregation instanceof Aggregation)) {\n        aggregation = new Aggregation(result(aggregation, 'toJSON', aggregation));\n      }\n\n      if (entities.length > 0 && aggregation) {\n        return aggregation.process(entities);\n      }\n\n      return null;\n    });\n\n    return promise;\n  }\n\n  findById(collection, id) {\n    if (!isString(id)) {\n      return Promise.reject(new KinveyError('id must be a string', id));\n    }\n\n    const promise = this.adapter.findById(collection, id);\n    return promise;\n  }\n\n  save(collection, entities = []) {\n    let singular = false;\n\n    if (!entities) {\n      return Promise.resolve(null);\n    }\n\n    if (!isArray(entities)) {\n      singular = true;\n      entities = [entities];\n    }\n\n    entities = map(entities, entity => {\n      let id = entity[idAttribute];\n      const kmd = entity[kmdAttribute] || {};\n\n      if (!id) {\n        id = this.generateObjectId();\n        kmd.local = true;\n      }\n\n      delete kmd.lmt;\n      entity[idAttribute] = id;\n      entity[kmdAttribute] = kmd;\n      return entity;\n    });\n\n    return this.adapter.save(collection, entities).then(entities => {\n      if (singular && entities.length > 0) {\n        return entities[0];\n      }\n\n      return entities;\n    });\n  }\n\n  remove(collection, query) {\n    if (query && !(query instanceof Query)) {\n      query = new Query(result(query, 'toJSON', query));\n    }\n\n    // Removing should not take the query sort, limit, and skip into account.\n    if (query) {\n      query.sort(null).limit(null).skip(0);\n    }\n\n    const promise = this.find(collection, query).then(entities => {\n      const promises = entities.map(entity => {\n        return this.removeById(collection, entity[idAttribute]);\n      });\n\n      return Promise.all(promises);\n    }).then(responses => {\n      return reduce(responses, (result, response) => {\n        result.count += response.count;\n        result.entities = result.entities.concat(response.entities);\n        return result;\n      }, {\n        count: 0,\n        entities: []\n      });\n    });\n\n    return promise;\n  }\n\n  removeById(collection, id) {\n    if (!id) {\n      return Promise.resolve({\n        count: 0,\n        entities: []\n      });\n    }\n\n    if (!isString(id)) {\n      return Promise.reject(new KinveyError('id must be a string', id));\n    }\n\n    const promise = this.adapter.removeById(collection, id);\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { Middleware, KinveyMiddleware } from './middleware';\nimport { CacheMiddleware } from './middleware/cache';\nimport { ParseMiddleware } from './middleware/parse';\nimport { SerializeMiddleware } from './middleware/serialize';\nimport findIndex from 'lodash/findIndex';\nimport reduce from 'lodash/reduce';\nlet sharedCacheRackInstance;\nlet sharedNetworkRackInstance;\n\n/**\n * @private\n */\nexport class Rack extends KinveyMiddleware {\n  constructor(name = 'Rack') {\n    super(name);\n    this.middlewares = [];\n    this.canceled = false;\n  }\n\n  getMiddleware(index = -1) {\n    const middlewares = this.middlewares;\n\n    if (index < -1 || index >= middlewares.length) {\n      throw new Error(`Index ${index} is out of bounds.`);\n    }\n\n    return middlewares[index];\n  }\n\n  use(middleware) {\n    if (middleware) {\n      if (middleware instanceof KinveyMiddleware) {\n        this.middlewares.push(middleware);\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  useBefore(middlewareClass, middleware) {\n    if (middleware) {\n      if (middleware instanceof Middleware) {\n        const middlewares = this.middlewares;\n        const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n        if (index > -1) {\n          middlewares.splice(index, 0, middleware);\n          this.middlewares = middlewares;\n        }\n\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  useAfter(middlewareClass, middleware) {\n    if (middleware) {\n      if (middleware instanceof Middleware) {\n        const middlewares = this.middlewares;\n        const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n        if (index > -1) {\n          middlewares.splice(index + 1, 0, middleware);\n          this.middlewares = middlewares;\n        }\n\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  swap(middlewareClass, middleware) {\n    if (middleware) {\n      if (middleware instanceof Middleware) {\n        const middlewares = this.middlewares;\n        const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n        if (index > -1) {\n          middlewares.splice(index, 1, middleware);\n          this.middlewares = middlewares;\n        }\n\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  remove(middlewareClass) {\n    const middlewares = this.middlewares;\n    const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n    if (index > -1) {\n      middlewares.splice(index, 1);\n      this.middlewares = middlewares;\n      this.remove(middlewareClass);\n    }\n  }\n\n  reset() {\n    this.middlewares = [];\n  }\n\n  execute(request) {\n    if (!request) {\n      return Promise.reject(new Error('Request is null. Please provide a valid request.'));\n    }\n\n    return reduce(this.middlewares, (promise, middleware) => {\n      return promise.then(request => {\n        return middleware.handle(request);\n      });\n    }, Promise.resolve(request));\n  }\n\n  cancel() {\n    this.canceled = true;\n  }\n\n  handle(request) {\n    return this.execute(request);\n  }\n\n  generateTree(level = 0) {\n    const root = super.generateTree(level);\n    const middlewares = this.middlewares;\n\n    middlewares.forEach((middleware) => {\n      root.nodes.push(middleware.generateTree(level + 1));\n    });\n\n    return root;\n  }\n}\n\n/**\n * @private\n */\nexport class KinveyRack extends Rack {\n  execute(request) {\n    const promise = super.execute(request).then(request => {\n      return request.response;\n    });\n    return promise;\n  }\n}\n\n/**\n * @private\n */\nexport class CacheRack extends KinveyRack {\n  constructor(name = 'Kinvey Cache Rack') {\n    super(name);\n    this.use(new CacheMiddleware());\n  }\n\n  static sharedInstance() {\n    let instance = sharedCacheRackInstance;\n\n    if (!instance) {\n      instance = new CacheRack();\n      sharedCacheRackInstance = instance;\n    }\n\n    return instance;\n  }\n}\n\n/**\n * @private\n */\nexport class NetworkRack extends KinveyRack {\n  constructor(name = 'Kinvey Network Rack') {\n    super(name);\n    this.use(new SerializeMiddleware());\n    this.use(new ParseMiddleware());\n  }\n\n  static sharedInstance() {\n    let instance = sharedNetworkRackInstance;\n\n    if (!instance) {\n      instance = new NetworkRack();\n      sharedNetworkRackInstance = instance;\n    }\n\n    return instance;\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyRequest } from './request';\nimport { LocalRequest } from './local';\nimport { NetworkRequest } from './network';\nimport { Response } from './response';\nimport { HttpMethod, StatusCode } from '../enums';\nimport { NotFoundError } from '../errors';\nimport { Query } from '../query';\nimport keyBy from 'lodash/keyBy';\nimport reduce from 'lodash/reduce';\nimport result from 'lodash/result';\nimport values from 'lodash/values';\nimport forEach from 'lodash/forEach';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nconst lmtAttribute = process.env.KINVEY_LMT_ATTRIBUTE || 'lmt';\nconst maxIdsPerRequest = process.env.KINVEY_MAX_IDS || 200;\n\n/**\n * @private\n */\nexport class DeltaFetchRequest extends KinveyRequest {\n  execute() {\n    const promise = super.execute().then(() => {\n      if (this.method !== HttpMethod.GET) {\n        throw new Error('Invalid http method. Http GET requests are only supported by DeltaFetchRequests.');\n      }\n\n      const localRequest = new LocalRequest({\n        method: HttpMethod.GET,\n        url: this.url,\n        headers: this.headers,\n        query: this.query,\n        timeout: this.timeout,\n        client: this.client\n      });\n      return localRequest.execute();\n    }).catch(error => {\n      if (error instanceof NotFoundError) {\n        return new Response({\n          statusCode: StatusCode.Ok,\n          data: []\n        });\n      }\n\n      throw error;\n    }).then(cacheResponse => {\n      if (cacheResponse.data.length > 0) {\n        const cacheDocuments = keyBy(cacheResponse.data, idAttribute);\n        const query = new Query(result(this.query, 'toJSON', this.query));\n        query.fields([idAttribute, kmdAttribute]);\n        const networkRequest = new NetworkRequest({\n          method: HttpMethod.GET,\n          url: this.url,\n          headers: this.headers,\n          auth: this.auth,\n          query: query,\n          timeout: this.timeout,\n          client: this.client\n        });\n\n        return networkRequest.execute().then(networkResponse => {\n          const networkDocuments = keyBy(networkResponse.data, idAttribute);\n          const deltaSet = networkDocuments;\n          const cacheDocumentIds = Object.keys(cacheDocuments);\n\n          forEach(cacheDocumentIds, id => {\n            const cacheDocument = cacheDocuments[id];\n            const networkDocument = networkDocuments[id];\n\n            if (networkDocument) {\n              if (networkDocument[kmdAttribute] && cacheDocument[kmdAttribute]\n                  && networkDocument[kmdAttribute][lmtAttribute] === cacheDocument[kmdAttribute][lmtAttribute]) {\n                delete deltaSet[id];\n              } else {\n                delete cacheDocuments[id];\n              }\n            } else {\n              delete cacheDocuments[id];\n            }\n          });\n\n          const deltaSetIds = Object.keys(deltaSet);\n          const promises = [];\n          let i = 0;\n\n          while (i < deltaSetIds.length) {\n            const query = new Query(result(this.query, 'toJSON', this.query));\n            const ids = deltaSetIds.slice(i, deltaSetIds.length > maxIdsPerRequest + i ?\n                                             maxIdsPerRequest : deltaSetIds.length);\n            query.contains(idAttribute, ids);\n            const networkRequest = new NetworkRequest({\n              method: HttpMethod.GET,\n              url: this.url,\n              headers: this.headers,\n              auth: this.auth,\n              query: query,\n              timeout: this.timeout,\n              client: this.client\n            });\n\n            const promise = networkRequest.execute();\n            promises.push(promise);\n            i += maxIdsPerRequest;\n          }\n\n          return Promise.all(promises).then(responses => {\n            const initialResponse = new Response({\n              statusCode: StatusCode.Ok,\n              data: []\n            });\n            return reduce(responses, (result, response) => {\n              if (response.isSuccess()) {\n                result.addHeaders(response.headers);\n                result.data = result.data.concat(response.data);\n              }\n\n              return result;\n            }, initialResponse);\n          }).then(response => {\n            response.data = response.data.concat(values(cacheDocuments));\n\n            if (this.query) {\n              const query = new Query(result(this.query, 'toJSON', this.query));\n              query.skip(0).limit(0);\n              response.data = query._process(response.data);\n            }\n\n            return response;\n          });\n        });\n      }\n\n      const networkRequest = new NetworkRequest({\n        method: HttpMethod.GET,\n        url: this.url,\n        headers: this.headers,\n        auth: this.auth,\n        query: this.query,\n        timeout: this.timeout,\n        client: this.client\n      });\n      return networkRequest.execute();\n    });\n\n    return promise;\n  }\n}\n","import { KinveyRequest } from './request';\nimport { CacheRack } from '../rack/rack';\nimport { NoResponseError } from '../errors';\nimport { Response } from './response';\n\n/**\n * @private\n */\nexport class LocalRequest extends KinveyRequest {\n  constructor(options) {\n    super(options);\n    this.rack = CacheRack.sharedInstance();\n  }\n\n  execute() {\n    const promise = super.execute().then(() => {\n      return this.rack.execute(this);\n    }).then(response => {\n      if (!response) {\n        throw new NoResponseError();\n      }\n\n      if (!(response instanceof Response)) {\n        return new Response({\n          statusCode: response.statusCode,\n          headers: response.headers,\n          data: response.data\n        });\n      }\n\n      return response;\n    }).then(response => {\n      if (!response.isSuccess()) {\n        throw response.error;\n      }\n\n      return response;\n    });\n\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel().then(() => {\n      return this.rack.cancel();\n    });\n    return promise;\n  }\n}\n","import { KinveyRequest } from './request';\nimport { NetworkRack } from '../rack/rack';\nimport { NoResponseError, InvalidCredentialsError } from '../errors';\nimport { HttpMethod, AuthType } from '../enums';\nimport { Response } from './response';\nimport url from 'url';\nconst socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nconst micIdentity = process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\nconst tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\nconst usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\n\n/**\n * @private\n */\nexport class NetworkRequest extends KinveyRequest {\n  constructor(options) {\n    super(options);\n    this.rack = NetworkRack.sharedInstance();\n    this.automaticallyRefreshAuthToken = true;\n  }\n\n  execute() {\n    const promise = super.execute().then(() => {\n      return this.rack.execute(this);\n    }).then(response => {\n      if (!response) {\n        throw new NoResponseError();\n      }\n\n      if (!(response instanceof Response)) {\n        return new Response({\n          statusCode: response.statusCode,\n          headers: response.headers,\n          data: response.data\n        });\n      }\n\n      return response;\n    }).then(response => {\n      if (!response.isSuccess()) {\n        throw response.error;\n      }\n\n      return response;\n    }).catch(error => {\n      if (error instanceof InvalidCredentialsError && this.automaticallyRefreshAuthToken) {\n        this.automaticallyRefreshAuthToken = false;\n        const activeSocialIdentity = this.client.getActiveSocialIdentity();\n\n        // Refresh MIC Auth Token\n        if (activeSocialIdentity && activeSocialIdentity.identity === micIdentity) {\n          // Refresh the token\n          const token = activeSocialIdentity.token;\n          const request = new NetworkRequest({\n            method: HttpMethod.POST,\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            authType: AuthType.App,\n            url: url.format({\n              protocol: activeSocialIdentity.client.protocol,\n              host: activeSocialIdentity.client.host,\n              pathname: tokenPathname\n            }),\n            properties: this.properties,\n            data: {\n              grant_type: 'refresh_token',\n              client_id: token.audience,\n              redirect_uri: activeSocialIdentity.redirectUri,\n              refresh_token: token.refresh_token\n            }\n          });\n          request.automaticallyRefreshAuthToken = false;\n\n          return request.execute().then(response => {\n            return response.data;\n          }).then(token => {\n            // Login the user with the new token\n            const activeUserData = this.client.getActiveUserData();\n            const socialIdentity = activeUserData[socialIdentityAttribute];\n            socialIdentity[activeSocialIdentity.identity] = token;\n            activeUserData[socialIdentityAttribute] = socialIdentity;\n\n            const request = new NetworkRequest({\n              method: HttpMethod.POST,\n              authType: AuthType.App,\n              url: url.format({\n                protocol: this.client.protocol,\n                host: this.client.host,\n                pathname: `/${usersNamespace}/${this.client.appKey}/login`\n              }),\n              properties: this.properties,\n              data: activeUserData,\n              timeout: this.timeout,\n              client: this.client\n            });\n            request.automaticallyRefreshAuthToken = false;\n            return request.execute();\n          }).then(response => {\n            // Store the new data\n            this.client.setActiveUserData(response.data);\n            this.client.setActiveSocialIdentity({\n              identity: activeSocialIdentity.identity,\n              redirectUri: activeSocialIdentity.redirectUri,\n              token: response.data[socialIdentityAttribute][activeSocialIdentity.identity]\n            });\n\n            // Execute the original request\n            return this.execute();\n          }).catch(() => {\n            throw error;\n          });\n        }\n      }\n\n      throw error;\n    }).then(response => {\n      this.automaticallyRefreshAuthToken = true;\n      return response;\n    }).catch(error => {\n      this.automaticallyRefreshAuthToken = true;\n      throw error;\n    });\n\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel().then(() => {\n      return this.rack.cancel();\n    });\n    return promise;\n  }\n}\n","import { KinveyError } from '../errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst appVersionKey = 'appVersion';\n\n/**\n * Request Properties class\n */\nexport class RequestProperties {\n  constructor(properties = {}) {\n    this.properties = properties;\n  }\n\n  get properties() {\n    return this._properties;\n  }\n\n  set properties(properties) {\n    this._properties = properties;\n  }\n\n  /**\n   * Return the app version request property.\n   *\n   * @return {String} App version\n   */\n  get appVersion() {\n    return this.getProperty(appVersionKey);\n  }\n\n  /**\n   * Set the app version request property. The app version can be provided\n   * in major.minor.patch format or something specific to your application.\n   *\n   * @param  {Any} version App version.\n   * @return {RequestProperties} The request properties instance.\n   */\n  set appVersion(version) {\n    version = Array.prototype.slice.call(arguments, 1);\n    const major = version[0];\n    const minor = version[1];\n    const patch = version[2];\n    let appVersion = '';\n\n    if (major) {\n      appVersion = (major + '').trim();\n    }\n\n    if (minor) {\n      appVersion = ('.' + minor).trim();\n    }\n\n    if (patch) {\n      appVersion = ('.' + patch).trim();\n    }\n\n    this.setProperty(appVersionKey, appVersion);\n    return this;\n  }\n\n  /**\n   * Returns the request property for the key or `undefined` if\n   * it has not been set.\n   *\n   * @param  {String} key Request property key\n   * @return {*} Request property value\n   */\n  getProperty(key) {\n    const properties = this.toJSON();\n\n    if (key && properties.hasOwnProperty(key)) {\n      return properties[key];\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Sets the request property key to the value.\n   *\n   * @param {String} key Request property key\n   * @param {*} value Request property value\n   * @return {RequestProperties} The request properties instance.\n   */\n  setProperty(key, value) {\n    const properties = {};\n    properties[key] = value;\n    this.addProperties(properties);\n    return this;\n  }\n\n  addProperties(properties) {\n    if (!isPlainObject(properties)) {\n      throw new KinveyError('properties argument must be an object');\n    }\n\n    Object.keys(properties).forEach((key) => {\n      const value = properties[key];\n\n      if (value) {\n        this.properties[key] = value;\n      } else {\n        delete this.properties[key];\n      }\n    });\n  }\n\n  clear() {\n    this.properties = {};\n  }\n\n  clearProperty(key) {\n    const properties = this.properties;\n\n    if (key && properties.hasOwnProperty(key)) {\n      delete properties[key];\n    }\n  }\n\n  /**\n   * Clears the app version property.\n   *\n   * @return {RequestProperties} The request properties instance.\n   */\n  clearAppVersion() {\n    return this.clearProperty(appVersionKey);\n  }\n\n  toJSON() {\n    return this.properties;\n  }\n}\n","import Promise from 'babybird';\nimport { HttpMethod, AuthType } from '../enums';\nimport { Device } from '../utils/device';\nimport { RequestProperties } from './properties';\nimport { KinveyRack } from '../rack/rack';\nimport { Client } from '../client';\nimport { byteCount } from '../utils/string';\nimport qs from 'qs';\nimport appendQuery from 'append-query';\nimport assign from 'lodash/assign';\nimport result from 'lodash/result';\nimport forEach from 'lodash/forEach';\nimport isString from 'lodash/isString';\nimport isPlainObject from 'lodash/isPlainObject';\nimport isEmpty from 'lodash/isEmpty';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\nconst Auth = {\n  /**\n   * Authenticate through (1) user credentials, (2) Master Secret, or (3) App\n   * Secret.\n   *\n   * @returns {Object}\n   */\n  all(client) {\n    try {\n      return Auth.session(client);\n    } catch (error) {\n      return Auth.basic(client);\n    }\n  },\n\n  /**\n   * Authenticate through App Secret.\n   *\n   * @returns {Object}\n   */\n  app(client) {\n    if (!client.appKey || !client.appSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.appSecret\n    };\n  },\n\n  /**\n   * Authenticate through (1) Master Secret, or (2) App Secret.\n   *\n   * @returns {Object}\n   */\n  basic(client) {\n    try {\n      return Auth.master(client);\n    } catch (error) {\n      return Auth.app(client);\n    }\n  },\n\n  /**\n   * Authenticate through Master Secret.\n   *\n   * @returns {Object}\n   */\n  master(client) {\n    if (!client.appKey || !client.masterSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.masterSecret\n    };\n  },\n\n  /**\n   * Do not authenticate.\n   *\n   * @returns {Null}\n   */\n  none() {\n    return null;\n  },\n\n  /**\n   * Authenticate through user credentials.\n   *\n   * @returns {Object}\n   */\n  session(client) {\n    const activeUserData = client.getActiveUserData();\n\n    if (!activeUserData) {\n      throw new Error('There is not an active user.');\n    }\n\n    return {\n      scheme: 'Kinvey',\n      credentials: activeUserData[kmdAttribute].authtoken\n    };\n  }\n};\n\n/**\n * @private\n */\nexport class Request {\n  constructor(options = {}) {\n    options = assign({\n      method: HttpMethod.GET,\n      headers: {},\n      url: '',\n      data: null,\n      timeout: process.env.KINVEY_DEFAULT_TIMEOUT || 10000,\n      followRedirect: true\n    }, options);\n\n    this.method = options.method;\n    this.url = options.url;\n    this.data = options.data || options.body;\n    this.timeout = options.timeout;\n    this.followRedirect = options.followRedirect;\n    this.executing = false;\n\n    const headers = options.headers && isPlainObject(options.headers) ? options.headers : {};\n\n    if (!headers.Accept || !headers.accept) {\n      headers.Accept = 'application/json; charset=utf-8';\n    }\n\n    this.addHeaders(headers);\n  }\n\n  get method() {\n    return this._method;\n  }\n\n  set method(method) {\n    if (!isString(method)) {\n      method = String(method);\n    }\n\n    method = method.toUpperCase();\n\n    switch (method) {\n      case HttpMethod.GET:\n      case HttpMethod.POST:\n      case HttpMethod.PATCH:\n      case HttpMethod.PUT:\n      case HttpMethod.DELETE:\n        this._method = method;\n        break;\n      default:\n        throw new Error('Invalid Http Method. Only GET, POST, PATCH, PUT, and DELETE are allowed.');\n    }\n  }\n\n  get url() {\n    return appendQuery(this._url, qs.stringify({\n      _: Math.random().toString(36).substr(2)\n    }));\n  }\n\n  set url(url) {\n    this._url = url;\n  }\n\n  get body() {\n    return this.data;\n  }\n\n  set body(body) {\n    this.data = body;\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  set data(data) {\n    if (data) {\n      const contentTypeHeader = this.getHeader('Content-Type');\n      if (!contentTypeHeader) {\n        this.setHeader('Content-Type', 'application/json; charset=utf-8');\n      }\n    } else {\n      this.removeHeader('Content-Type');\n    }\n\n    this._data = data;\n  }\n\n  getHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      const keys = Object.keys(headers);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const key = keys[i];\n\n        if (key.toLowerCase() === name.toLowerCase()) {\n          return headers[key];\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  setHeader(name, value) {\n    if (!name || !value) {\n      throw new Error('A name and value must be provided to set a header.');\n    }\n\n    if (!isString(name)) {\n      name = String(name);\n    }\n\n    const headers = this.headers || {};\n\n    if (!isString(value)) {\n      headers[name] = JSON.stringify(value);\n    } else {\n      headers[name] = value;\n    }\n\n    this.headers = headers;\n  }\n\n  addHeader(header = {}) {\n    return this.setHeader(header.name, header.value);\n  }\n\n  addHeaders(headers) {\n    if (!isPlainObject(headers)) {\n      throw new Error('Headers argument must be an object.');\n    }\n\n    const names = Object.keys(headers);\n\n    forEach(names, name => {\n      const value = headers[name];\n      this.setHeader(name, value);\n    });\n  }\n\n  removeHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      delete headers[name];\n      this.headers = headers;\n    }\n  }\n\n  clearHeaders() {\n    this.headers = {};\n  }\n\n  isExecuting() {\n    return this.executing ? true : false;\n  }\n\n  execute() {\n    if (this.executing) {\n      return Promise.reject(new Error('Unable to execute the request. The request is already executing.'));\n    }\n\n    this.executing = Promise.resolve().then(response => {\n      this.executing = false;\n      return response;\n    }).catch(error => {\n      this.executing = false;\n      throw error;\n    });\n\n    return this.executing;\n  }\n\n  toJSON() {\n    const json = {\n      method: this.method,\n      headers: this.headers,\n      url: this.url,\n      data: this.data,\n      followRedirect: this.followRedirect\n    };\n\n    return json;\n  }\n}\n\n/**\n * @private\n */\nexport class KinveyRequest extends Request {\n  constructor(options = {}) {\n    super(options);\n\n    options = assign({\n      authType: AuthType.None,\n      properties: null,\n      query: null,\n      client: Client.sharedInstance()\n    }, options);\n\n    this.rack = new KinveyRack();\n    this.authType = options.authType;\n    this.properties = options.properties;\n    this.query = result(options.query, 'toJSON', options.query);\n    this.client = options.client;\n\n    const headers = {};\n    headers['X-Kinvey-Api-Version'] = process.env.KINVEY_API_VERSION || 3;\n\n    const device = new Device();\n    headers['X-Kinvey-Device-Information'] = JSON.stringify(device.toJSON());\n\n    if (options.contentType) {\n      headers['X-Kinvey-Content-Type'] = options.contentType;\n    }\n\n    if (options.skipBL === true) {\n      headers['X-Kinvey-Skip-Business-Logic'] = true;\n    }\n\n    if (options.trace === true) {\n      headers['X-Kinvey-Include-Headers-In-Response'] = 'X-Kinvey-Request-Id';\n      headers['X-Kinvey-ResponseWrapper'] = true;\n    }\n\n    this.addHeaders(headers);\n  }\n\n  set properties(properties) {\n    if (properties) {\n      if (!(properties instanceof RequestProperties)) {\n        properties = new RequestProperties(result(properties, 'toJSON', properties));\n      }\n\n      const appVersion = properties.appVersion;\n\n      if (appVersion) {\n        this.setHeader('X-Kinvey-Client-App-Version', appVersion);\n      } else {\n        this.removeHeader('X-Kinvey-Client-App-Version');\n      }\n\n      const customProperties = result(properties, 'toJSON', {});\n      delete customProperties.appVersion;\n      const customPropertiesHeader = JSON.stringify(customProperties);\n      const customPropertiesByteCount = byteCount(customPropertiesHeader);\n      const customPropertiesMaxBytesAllowed = process.env.KINVEY_MAX_HEADER_BYTES || 2000;\n\n      if (customPropertiesByteCount >= customPropertiesMaxBytesAllowed) {\n        throw new Error(\n          `The custom properties are ${customPropertiesByteCount} bytes.` +\n          `It must be less then ${customPropertiesMaxBytesAllowed} bytes.`,\n          'Please remove some custom properties.');\n      }\n\n      this.setHeader('X-Kinvey-Custom-Request-Properties', customPropertiesHeader);\n    }\n  }\n\n  get url() {\n    const url = super.url;\n    const queryString = {};\n\n    if (this.query) {\n      queryString.query = this.query.filter;\n\n      if (!isEmpty(this.query.fields)) {\n        queryString.fields = this.query.fields.join(',');\n      }\n\n      if (this.query.limit) {\n        queryString.limit = this.query.limit;\n      }\n\n      if (this.query.skip > 0) {\n        queryString.skip = this.query.skip;\n      }\n\n      if (!isEmpty(this.query.sort)) {\n        queryString.sort = this.query.sort;\n      }\n    }\n\n    const keys = Object.keys(queryString);\n    forEach(keys, key => {\n      queryString[key] = isString(queryString[key]) ? queryString[key] : JSON.stringify(queryString[key]);\n    });\n\n    if (isEmpty(queryString)) {\n      return url;\n    }\n\n    return appendQuery(url, qs.stringify(queryString));\n  }\n\n  set url(url) {\n    super.url = url;\n  }\n\n  get authorizationHeader() {\n    let authInfo;\n\n    switch (this.authType) {\n      case AuthType.All:\n        authInfo = Auth.all(this.client);\n        break;\n      case AuthType.App:\n        authInfo = Auth.app(this.client);\n        break;\n      case AuthType.Basic:\n        authInfo = Auth.basic(this.client);\n        break;\n      case AuthType.Master:\n        authInfo = Auth.master(this.client);\n        break;\n      case AuthType.None:\n        authInfo = Auth.none(this.client);\n        break;\n      case AuthType.Session:\n        authInfo = Auth.session(this.client);\n        break;\n      default:\n        try {\n          authInfo = Auth.session(this.client);\n        } catch (error) {\n          try {\n            authInfo = Auth.master(this.client);\n          } catch (error2) {\n            throw error;\n          }\n        }\n    }\n\n    if (authInfo) {\n      let credentials = authInfo.credentials;\n\n      if (authInfo.username) {\n        credentials = new Buffer(`${authInfo.username}:${authInfo.password}`).toString('base64');\n      }\n\n      return {\n        name: 'Authorization',\n        value: `${authInfo.scheme} ${credentials}`\n      };\n    }\n\n    return null;\n  }\n\n  execute() {\n    const authorizationHeader = this.authorizationHeader;\n\n    if (authorizationHeader) {\n      this.addHeader(authorizationHeader);\n    }\n\n    const promise = super.execute();\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel();\n    return promise;\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.query = this.query;\n    return json;\n  }\n}\n","import { StatusCode } from '../enums';\nimport { InsufficientCredentialsError, InvalidCredentialsError, KinveyError, NotFoundError } from '../errors';\nimport assign from 'lodash/assign';\nimport forEach from 'lodash/forEach';\nimport isString from 'lodash/isString';\nimport isPlainObject from 'lodash/isPlainObject';\n\n/**\n * @private\n */\nexport class Response {\n  constructor(options = {}) {\n    options = assign({\n      statusCode: StatusCode.Ok,\n      headers: {\n        'Content-Type': 'application/json; charset=utf-8'\n      },\n      data: null\n    }, options);\n\n    this.statusCode = options.statusCode;\n    this.addHeaders(options.headers);\n    this.data = options.data;\n  }\n\n  get error() {\n    if (this.isSuccess()) {\n      return null;\n    }\n\n    const data = this.data || {};\n    const name = data.name || data.error;\n    const message = data.message || data.description;\n    const debug = data.debug;\n\n    if (name === 'EntityNotFound'\n        || name === 'CollectionNotFound'\n        || name === 'AppNotFound'\n        || name === 'UserNotFound'\n        || name === 'BlobNotFound'\n        || name === 'DocumentNotFound') {\n      return new NotFoundError(message, debug);\n    } else if (name === 'InsufficientCredentials') {\n      return new InsufficientCredentialsError(message, debug);\n    } else if (name === 'InvalidCredentials') {\n      return new InvalidCredentialsError(message, debug);\n    }\n\n    return new KinveyError(message, debug);\n  }\n\n  getHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      const keys = Object.keys(headers);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const key = keys[i];\n\n        if (key.toLowerCase() === name.toLowerCase()) {\n          return headers[key];\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  setHeader(name, value) {\n    if (!name || !value) {\n      throw new Error('A name and value must be provided to set a header.');\n    }\n\n    if (!isString(name)) {\n      name = String(name);\n    }\n\n    const headers = this.headers || {};\n\n    if (!isString(value)) {\n      headers[name] = JSON.stringify(value);\n    } else {\n      headers[name] = value;\n    }\n\n    this.headers = headers;\n  }\n\n  addHeader(header = {}) {\n    return this.setHeader(header.name, header.value);\n  }\n\n  addHeaders(headers) {\n    if (!isPlainObject(headers)) {\n      throw new Error('Headers argument must be an object.');\n    }\n\n    const names = Object.keys(headers);\n\n    forEach(names, name => {\n      const value = headers[name];\n      this.setHeader(name, value);\n    });\n  }\n\n  removeHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      delete headers[name];\n      this.headers = headers;\n    }\n  }\n\n  clearHeaders() {\n    this.headers = {};\n  }\n\n  isSuccess() {\n    return (this.statusCode >= 200 && this.statusCode < 300) || this.statusCode === 302;\n  }\n\n  toJSON() {\n    const json = {\n      statusCode: this.statusCode,\n      headers: this.headers,\n      data: this.data\n    };\n    return json;\n  }\n}\n","import Promise from 'babybird';\nimport { NetworkStore } from './networkstore';\nimport { Response } from '../requests/response';\nimport { AuthType, HttpMethod, StatusCode } from '../enums';\nimport { InsufficientCredentialsError, KinveyError, NotFoundError } from '../errors';\nimport { LocalRequest } from '../requests/local';\nimport { NetworkRequest } from '../requests/network';\nimport { DeltaFetchRequest } from '../requests/deltafetch';\nimport { Query } from '../query';\nimport { Aggregation } from '../aggregation';\nimport { Log } from '../log';\nimport { nested } from '../utils/object';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport forEach from 'lodash/forEach';\nimport map from 'lodash/map';\nimport isArray from 'lodash/isArray';\nimport keyBy from 'lodash/keyBy';\nimport differenceBy from 'lodash/differenceBy';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nconst syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * The CacheStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network using a cache on the device.\n */\nclass CacheStore extends NetworkStore {\n  /**\n   * Creates a new instance of the CacheStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n  constructor(name) {\n    super(name);\n\n    /**\n     * @type {Number}\n     */\n    this.ttl = undefined;\n  }\n\n  /**\n   * The sync pathname for the store.\n   *\n   * @param   {Client}   [client]     Client\n   * @return  {string}                Sync pathname\n   */\n  get _syncPathname() {\n    if (!this.name) {\n      throw new Error('Unable to get a sync pathname for a collection with no name.');\n    }\n\n    return `/${appdataNamespace}/${this.client.appKey}/${syncCollectionName}/${this.name}`;\n  }\n\n  /**\n   * Finds all entities in a collection. A query can be optionally provided to return\n   * a subset of all entities in a collection or omitted to return all entities in\n   * a collection. The number of entities returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the entities or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  find(query, options = {}) {\n    Log.debug(`Retrieving the entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      useDeltaFetch: true\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(cacheResponse => {\n      const result = {\n        cache: cacheResponse.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        if (options.useDeltaFetch) {\n          const request = new DeltaFetchRequest({\n            method: HttpMethod.GET,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: this._pathname\n            }),\n            properties: options.properties,\n            query: query,\n            timeout: options.timeout,\n            client: this.client\n          });\n          return request.execute().then(response => {\n            return response.data;\n          });\n        }\n\n        return super.find(query, options);\n      }).then(networkEntities => {\n        const removedEntities = differenceBy(cacheResponse.data, networkEntities, idAttribute);\n        const removeEntityIds = Object.keys(keyBy(removedEntities, idAttribute));\n        const removeQuery = new Query();\n        removeQuery.contains(idAttribute, removeEntityIds);\n\n        const request = new LocalRequest({\n          method: HttpMethod.DELETE,\n          url: url.format({\n            protocol: this.client.protocol,\n            host: this.client.host,\n            pathname: this._pathname\n          }),\n          properties: options.properties,\n          query: removeQuery,\n          timeout: options.timeout,\n          client: this.client\n        });\n        return request.execute().then(() => {\n          return this._cache(networkEntities);\n        });\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Groups entities in a collection. An aggregation can be optionally provided to group\n   * a subset of entities in a collection or omitted to group all the entities\n   * in a collection. A promise will be returned that will be resolved with the result\n   * or rejected with an error.\n   *\n   * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  group(aggregation, options = {}) {\n    Log.debug(`Grouping the entities in the ${this.name} collection.`, aggregation, options);\n\n    options = assign({\n      force: false\n    }, options);\n\n    if (!(aggregation instanceof Aggregation)) {\n      return Promise.reject(new KinveyError('Invalid aggregation. ' +\n        'It must be an instance of the Kinvey.Aggregation class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/_group`\n        }),\n        properties: options.properties,\n        data: aggregation.toJSON(),\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const result = {\n        cache: response.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        return super.group(aggregation, options);\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Grouped the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to group the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Counts entities in a collection. A query can be optionally provided to count\n   * a subset of entities in a collection or omitted to count all the entities\n   * in a collection. A promise will be returned that will be resolved with the count\n   * or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  count(query, options = {}) {\n    Log.debug(`Counting the number of entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      force: false\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/_count`\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const result = {\n        cache: response.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        return super.count(query, options);\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Counted the number of entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to count the number of entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Retrieves a single entity in a collection by id. A promise will be returned that will\n   * be resolved with the entity or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  findById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to retrieve an entity.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Retrieving the entity in the ${this.name} collection with id = ${id}.`);\n\n    options = assign({\n      force: false,\n      useDeltaFetch: true\n    }, options);\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/${id}`\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const result = {\n        cache: response.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        if (options.useDeltaFetch) {\n          const request = new DeltaFetchRequest({\n            method: HttpMethod.GET,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${id}`\n            }),\n            properties: options.properties,\n            timeout: options.timeout,\n            client: this.client\n          });\n          return request.execute().then(response => {\n            return response.data;\n          });\n        }\n\n        return super.findById(id, options);\n      }).then(data => {\n        return this._cache(data);\n      }).catch(error => {\n        if (error instanceof NotFoundError) {\n          const request = new LocalRequest({\n            method: HttpMethod.DELETE,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${id}`\n            }),\n            properties: options.properties,\n            timeout: options.timeout,\n            client: this.client\n          });\n          return request.execute().then(() => {\n            throw error;\n          });\n        }\n\n        throw error;\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(error => {\n      Log.error(`Failed to retrieve the entity in the ${this.name} collection with id = ${id}.`, error);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save a entity or an array of entities to a collection. A promise will be returned that\n   * will be resolved with the saved entity/entities or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity or entities to save.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data saved\n   *                                                                            in the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  save(entity, options = {}) {\n    if (!entity) {\n      Log.warn('No entity was provided to be saved.', entity);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Saving the entity(s) to the ${this.name} collection.`, entity);\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.POST,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entity,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      if (entity[idAttribute]) {\n        request.method = HttpMethod.PUT;\n        request.url = url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/${entity[idAttribute]}`\n        });\n      }\n\n      return request.execute();\n    }).then(response => {\n      return this._sync(response.data, options).then(() => {\n        const data = isArray(response.data) ? response.data : [response.data];\n        const ids = Object.keys(keyBy(data, idAttribute));\n        const query = new Query().contains(idAttribute, ids);\n        return this.push(query, options);\n      }).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Saved the entity(s) to the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to save the entity(s) to the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove entities in a collection. A query can be optionally provided to remove\n   * a subset of entities in a collection or omitted to remove all entities in a\n   * collection. A promise will be returned that will be resolved with a count of the\n   * number of entities removed or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  remove(query, options = {}) {\n    Log.debug(`Removing the entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.DELETE,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        const query = new Query().contains(idAttribute, []);\n        return this.push(query, options);\n      }).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove an entity in a collection. A promise will be returned that will be\n   * resolved with a count of the number of entities removed or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  removeById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to be removed.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Removing an entity in the ${this.name} collection with id = ${id}.`);\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.DELETE,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/${id}`\n        }),\n        properties: options.properties,\n        authType: AuthType.Default,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        const query = new Query().contains(idAttribute, [id]);\n        return this.push(query, options);\n      }).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Push sync items for a collection to the network. A promise will be returned that will be\n   * resolved with the result of the push or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to push a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.DataStore.getInstance('books');\n   * store.push().then(function(result) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  push(query, options = {}) {\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const save = [];\n      const remove = [];\n      const entities = response.data.entities;\n      const ids = Object.keys(entities);\n      let size = response.data.size;\n\n      const promises = map(ids, id => {\n        const metadata = entities[id];\n        const request = new LocalRequest({\n          method: HttpMethod.GET,\n          url: url.format({\n            protocol: this.client.protocol,\n            host: this.client.host,\n            pathname: `${this._pathname}/${id}`\n          }),\n          properties: metadata.properties,\n          timeout: options.timeout,\n          client: this.client\n        });\n        return request.execute().then(response => {\n          save.push(response.data);\n          return response.data;\n        }).catch(err => {\n          if (err instanceof NotFoundError) {\n            remove.push(id);\n            return null;\n          }\n\n          throw err;\n        });\n      });\n\n      return Promise.all(promises).then(() => {\n        const saved = map(save, entity => {\n          const metadata = entities[entity[idAttribute]];\n          const isLocalEntity = nested(entity, `${kmdAttribute}.local`);\n\n          if (isLocalEntity) {\n            const originalId = entity[idAttribute];\n            delete entity[idAttribute];\n            delete entity[kmdAttribute];\n\n            const request = new NetworkRequest({\n              method: HttpMethod.POST,\n              authType: AuthType.Default,\n              url: url.format({\n                protocol: this.client.protocol,\n                host: this.client.host,\n                pathname: this._pathname\n              }),\n              properties: metadata.properties,\n              data: entity,\n              timeout: options.timeout,\n              client: this.client\n            });\n\n            return request.execute().then(response => {\n              const request = new LocalRequest({\n                method: HttpMethod.PUT,\n                url: url.format({\n                  protocol: this.client.protocol,\n                  host: this.client.host,\n                  pathname: this._pathname\n                }),\n                properties: metadata.properties,\n                data: response.data,\n                timeout: options.timeout,\n                client: this.client\n              });\n              return request.execute();\n            }).then(() => {\n              const request = new LocalRequest({\n                method: HttpMethod.DELETE,\n                url: url.format({\n                  protocol: this.client.protocol,\n                  host: this.client.host,\n                  pathname: `${this._pathname}/${originalId}`\n                }),\n                properties: metadata.properties,\n                timeout: options.timeout,\n                client: this.client\n              });\n\n              return request.execute().then(response => {\n                const result = response.data;\n                if (result.count === 1) {\n                  size = size - 1;\n                  delete entities[originalId];\n                  return {\n                    _id: originalId,\n                    entity: entity\n                  };\n                }\n\n                return {\n                  _id: originalId,\n                  error: new KinveyError(`Expected count to be 1 but instead it was ${result.count} ` +\n                    `when trying to remove entity with _id ${originalId}.`)\n                };\n              });\n            }).catch(err => {\n              return {\n                _id: originalId,\n                error: err\n              };\n            });\n          }\n\n          const request = new NetworkRequest({\n            method: HttpMethod.PUT,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${entity[idAttribute]}`\n            }),\n            properties: metadata.properties,\n            data: entity,\n            timeout: options.timeout,\n            client: this.client\n          });\n\n          return request.execute().then(response => {\n            size = size - 1;\n            delete entities[response.data[idAttribute]];\n            return {\n              _id: response.data[idAttribute],\n              entity: response.data\n            };\n          }).catch(err => {\n            // If the credentials used to authenticate this request are\n            // not authorized to run the operation then just remove the entity\n            // from the sync table\n            if (err instanceof InsufficientCredentialsError) {\n              size = size - 1;\n              delete entities[entity[idAttribute]];\n              return {\n                _id: entity[idAttribute],\n                error: err\n              };\n            }\n\n            return {\n              _id: entity[idAttribute],\n              error: err\n            };\n          });\n        });\n\n        const removed = map(remove, id => {\n          const metadata = entities[id];\n          const request = new NetworkRequest({\n            method: HttpMethod.DELETE,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${id}`\n            }),\n            properties: metadata.properties,\n            timeout: options.timeout,\n            client: this.client\n          });\n\n          return request.execute().then(response => {\n            const result = response.data;\n\n            if (result.count === 1) {\n              size = size - 1;\n              delete entities[id];\n              return {\n                _id: id\n              };\n            }\n\n            return {\n              _id: id,\n              error: new KinveyError(`Expected count to be 1 but instead it was ${result.count} ` +\n                `when trying to remove entity with _id ${id}.`)\n            };\n          }).catch(err => {\n            // If the credentials used to authenticate this request are\n            // not authorized to run the operation or the entity was\n            // not found then just remove the entity from the sync table\n            if (err instanceof NotFoundError || err instanceof InsufficientCredentialsError) {\n              size = size - 1;\n              delete entities[id];\n              return {\n                _id: id,\n                error: err\n              };\n            }\n\n            return {\n              _id: id,\n              error: err\n            };\n          });\n        });\n\n        return Promise.all([Promise.all(saved), Promise.all(removed)]);\n      }).then(results => {\n        const savedResults = results[0];\n        const removedResults = results[1];\n        const result = {\n          collection: this.name,\n          success: [],\n          error: []\n        };\n\n        forEach(savedResults, savedResult => {\n          if (savedResult.error) {\n            result.error.push(savedResult);\n          } else {\n            result.success.push(savedResult);\n          }\n        });\n\n        forEach(removedResults, removedResult => {\n          if (removedResult.error) {\n            result.error.push(removedResult);\n          } else {\n            result.success.push(removedResult);\n          }\n        });\n\n        return result;\n      }).then(result => {\n        response.data.size = size;\n        response.data.entities = entities;\n\n        const request = new LocalRequest({\n          method: HttpMethod.PUT,\n          url: url.format({\n            protocol: this.client.protocol,\n            host: this.client.host,\n            pathname: this._syncPathname\n          }),\n          properties: options.properties,\n          data: response.data,\n          timeout: options.timeout,\n          client: this.client\n        });\n        return request.execute().then(() => {\n          return result;\n        });\n      });\n    }).catch(err => {\n      if (err instanceof NotFoundError) {\n        return {\n          collection: this.name,\n          success: [],\n          error: []\n        };\n      }\n\n      throw err;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Pull items for a collection from the network to your local cache. A promise will be\n   * returned that will be resolved with the result of the pull or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to pull a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.Store.getInstance('books');\n   * store.pull().then(function(result) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  pull(query, options = {}) {\n    const promise = this.syncCount(null, options).then(count => {\n      if (count > 0) {\n        throw new KinveyError('Unable to pull data. You must push the pending sync items first.',\n          'Call store.push() to push the pending sync items before you pull new data.');\n      }\n\n      return this.find(query, options);\n    }).then(result => {\n      return result.network;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Sync items for a collection. This will push pending sync items first and then\n   * pull items from the network into your local cache. A promise will be\n   * returned that will be resolved with the result of the pull or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to pull a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.Store.getInstance('books');\n   * store.sync().then(function(result) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  sync(query, options = {}) {\n    const promise = this.push(null, options).then(pushResponse => {\n      return this.pull(query, options).then(pullResponse => {\n        return {\n          push: pushResponse,\n          pull: pullResponse\n        };\n      });\n    });\n\n    return promise;\n  }\n\n  /**\n   * Count the number of entities waiting to be pushed to the network. A promise will be\n   * returned with the count of entities or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the local cache.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.Store.getInstance('books');\n   * store.syncCount().then(function(count) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  syncCount(query, options = {}) {\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._syncPathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data.size || 0;\n    }).catch(err => {\n      if (err instanceof NotFoundError) {\n        return 0;\n      }\n\n      throw err;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Add or update entities stored in the cache. A promise will be returned with the entities\n   * or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity(s) to add or update in the cache.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  _cache(entities, options = {}) {\n    const request = new LocalRequest({\n      method: HttpMethod.PUT,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      data: entities,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Add entities to be pushed. A promise will be returned with null or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity(s) to add to the sync table.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  _sync(entities, options = {}) {\n    if (!this.name) {\n      return Promise.reject(new KinveyError('Unable to add entities to the sync table for a store with no name.'));\n    }\n\n    if (!entities) {\n      return Promise.resolve(null);\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._syncPathname\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().catch(error => {\n      if (error instanceof NotFoundError) {\n        return new Response({\n          statusCode: StatusCode.Ok,\n          data: {\n            _id: this.name,\n            entities: {},\n            size: 0\n          }\n        });\n      }\n\n      throw error;\n    }).then(response => {\n      const syncData = response.data || {\n        _id: this.name,\n        entities: {},\n        size: 0\n      };\n\n      if (!isArray(entities)) {\n        entities = [entities];\n      }\n\n      forEach(entities, entity => {\n        if (entity[idAttribute]) {\n          if (!syncData.entities.hasOwnProperty(entity[idAttribute])) {\n            syncData.size = syncData.size + 1;\n          }\n\n          syncData.entities[entity[idAttribute]] = {\n            lmt: entity[kmdAttribute] ? entity[kmdAttribute].lmt : null\n          };\n        }\n      });\n\n      const request = new LocalRequest({\n        method: HttpMethod.PUT,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        data: syncData,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(() => {\n      return null;\n    });\n\n    return promise;\n  }\n}\n\nexport { CacheStore };\n","import { SyncStore } from './syncstore';\nimport { NetworkStore } from './networkstore';\nimport { UserStore } from './userstore';\nimport { FileStore } from './filestore';\nimport { CacheStore } from './cachestore';\n\n/**\n * Enum for DataStore types.\n */\nconst DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexport { DataStoreType };\n\n\nexport class DataStore {\n  /**\n   * Returns an instance of the Store class based on the type provided.\n   *\n   * @param  {string}       [name]                      Name of the collection.\n   * @param  {StoreType}    [type=DataStoreType.Cache]  Type of store to return.\n   * @return {Object}                                   Store\n   */\n  static getInstance(name, type = DataStoreType.Cache) {\n    let store;\n\n    switch (type) {\n      case DataStoreType.Sync:\n        store = new SyncStore(name);\n        break;\n      case DataStoreType.Network:\n        store = new NetworkStore(name);\n        break;\n      case DataStoreType.User:\n        store = new UserStore();\n        break;\n      case DataStoreType.File:\n        store = new FileStore();\n        break;\n      case DataStoreType.Cache:\n      default:\n        store = new CacheStore(name);\n    }\n\n    return store;\n  }\n}\n","import Promise from 'babybird';\nimport { NetworkStore } from './networkstore';\nimport { NetworkRequest } from '../requests/network';\nimport { AuthType, HttpMethod } from '../enums';\nimport { KinveyError } from '../errors';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport map from 'lodash/map';\nconst filesNamespace = process.env.KINVEY_FILES_NAMESPACE || 'blob';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The FilesStore class is used to find, save, update, remove, count and group files.\n */\nexport class FileStore extends NetworkStore {\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}                Pathname\n   */\n  get _pathname() {\n    return `/${filesNamespace}/${this.client.appKey}`;\n  }\n\n  /**\n   * Finds all files. A query can be optionally provided to return\n   * a subset of all the files for your application or omitted to return all the files.\n   * The number of files returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the files or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Boolean}               [options.tls]                             Use Transport Layer Security\n   * @param   {Boolean}               [options.download]                        Download the files\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var filesStore = new Kinvey.FilesStore();\n   * var query = new Kinvey.Query();\n   * query.equalTo('location', 'Boston');\n   * files.find(query, {\n   *   tls: true, // Use transport layer security\n   *   ttl: 60 * 60 * 24, // 1 day in seconds\n   *   download: true // download the files\n   * }).then(function(files) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  find(query, options = {}) {\n    options = assign({\n      download: false,\n      tls: false\n    }, options);\n\n    options.flags = {\n      tls: options.tls === true ? true : false,\n      ttl_in_seconds: options.ttl\n    };\n\n    const promise = super.find(query, options).then(files => {\n      if (options.download === true) {\n        const promises = map(files, file => {\n          return this.downloadByUrl(file._downloadURL, options);\n        });\n        return Promise.all(promises);\n      }\n\n      return files;\n    });\n\n    return promise;\n  }\n\n  findById(id, options) {\n    return this.download(id, options);\n  }\n\n  /**\n   * Download a file. A promise will be returned that will be resolved with the file or rejected with\n   * an error.\n   *\n   * @param   {string}        name                                          Name\n   * @param   {Object}        [options]                                     Options\n   * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n   * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n   * @param   {Boolean}       [options.stream]                              Stream the file\n   * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n   * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n   * @return  {Promise}                                                     Promise\n   *\n   * @example\n   * var files = new Kinvey.Files();\n   * files.download('BostonTeaParty.png', {\n   *   tls: true, // Use transport layer security\n   *   ttl: 60 * 60 * 24, // 1 day in seconds\n   *   stream: true // stream the file\n   * }).then(function(file) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  download(name, options = {}) {\n    options = assign({\n      stream: false,\n      tls: false\n    }, options);\n\n    options.flags = {\n      tls: options.tls === true ? true : false,\n      ttl_in_seconds: options.ttl\n    };\n\n    const promise = super.findById(name, options).then(file => {\n      if (options.stream === true) {\n        return file;\n      }\n\n      return this.downloadByUrl(file._downloadURL, options);\n    });\n\n    return promise;\n  }\n\n  downloadByUrl(url, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      const request = new NetworkRequest({\n        method: HttpMethod.GET,\n        url: url,\n        timeout: options.timeout\n      });\n      request.setHeader('Accept', options.mimeType || 'application-octet-stream');\n      request.removeHeader('Content-Type');\n      request.removeHeader('X-Kinvey-Api-Version');\n      return request.execute();\n    }).then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Stream a file. A promise will be returned that will be resolved with the file or rejected with\n   * an error.\n   *\n   * @param   {string}        name                                          File name\n   * @param   {Object}        [options]                                     Options\n   * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n   * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n   * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n   * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n   * @return  {Promise}                                                     Promise\n   *\n   * @example\n   * var files = new Kinvey.Files();\n   * files.stream('BostonTeaParty.png', {\n   *   tls: true, // Use transport layer security\n   *   ttl: 60 * 60 * 24, // 1 day in seconds\n   * }).then(function(file) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  stream(name, options = {}) {\n    options.stream = true;\n    return this.download(name, options);\n  }\n\n  upload(file, metadata = {}, options = {}) {\n    metadata._filename = metadata._filename || file._filename || file.name;\n    metadata.size = metadata.size || file.size || file.length;\n    metadata.mimeType = metadata.mimeType || file.mimeType || file.type || 'application/octet-stream';\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      public: false,\n      handler() {}\n    }, options);\n\n    if (options.public) {\n      metadata._public = true;\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      headers: {\n        'X-Kinvey-Content-Type': metadata.mimeType\n      },\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      data: metadata,\n      client: this.client\n    });\n\n    if (metadata[idAttribute]) {\n      request.method = HttpMethod.PUT;\n      request.url = url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${metadata._id}`\n      });\n    }\n\n    const promise = request.execute().then(response => {\n      const uploadUrl = response.data._uploadURL;\n      const headers = response.data._requiredHeaders || {};\n      headers['Content-Type'] = metadata.mimeType;\n      headers['Content-Length'] = metadata.size;\n\n      // Delete fields from the response\n      delete response.data._expiresAt;\n      delete response.data._requiredHeaders;\n      delete response.data._uploadURL;\n\n      // Upload the file\n      const request = new NetworkRequest({\n        method: HttpMethod.PUT,\n        url: uploadUrl,\n        data: file\n      });\n      request.clearHeaders();\n      request.addHeaders(headers);\n\n      return request.execute().then(uploadResponse => {\n        if (uploadResponse.isSuccess()) {\n          response.data._data = file;\n          return response.data;\n        }\n\n        throw uploadResponse.error;\n      });\n    });\n\n    return promise;\n  }\n\n  save() {\n    return Promise.reject(new KinveyError('Please use `upload()` to save files.'));\n  }\n\n  update() {\n    return Promise.reject(new KinveyError('Please use `upload()` to update files.'));\n  }\n}\n","import Promise from 'babybird';\nimport { Aggregation } from '../aggregation';\nimport { AuthType, HttpMethod } from '../enums';\nimport { KinveyError } from '../errors';\nimport { Client } from '../client';\nimport { NetworkRequest } from '../requests/network';\nimport { Query } from '../query';\nimport { Log } from '../Log';\nimport qs from 'qs';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport isString from 'lodash/isString';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The NetworkStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network.\n */\nexport class NetworkStore {\n  /**\n   * Creates a new instance of the NetworkStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n  constructor(name) {\n    if (name && !isString(name)) {\n      throw new KinveyError('Name must be a string.');\n    }\n\n    /**\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * @private\n     * @type {Client}\n     */\n    this.client = Client.sharedInstance();\n  }\n\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}                Pathname\n   */\n  get _pathname() {\n    let pathname = `/${appdataNamespace}/${this.client.appKey}`;\n\n    if (this.name) {\n      pathname = `${pathname}/${this.name}`;\n    }\n\n    return pathname;\n  }\n\n  /**\n   * Finds all entities in a collection. A query can be optionally provided to return\n   * a subset of all entities in a collection or omitted to return all entities in\n   * a collection. The number of entities returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the entities or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  find(query, options = {}) {\n    Log.debug(`Retrieving the entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n    options.flags = qs.parse(options.flags);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entities in the ${this.name} collection.`, response);\n    }).catch(error => {\n      Log.error(`Failed to retrieve the entities in the ${this.name} collection.`, error);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Groups entities in a collection. An aggregation can be optionally provided to group\n   * a subset of entities in a collection or omitted to group all the entities\n   * in a collection. A promise will be returned that will be resolved with the result\n   * or rejected with an error.\n   *\n   * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  group(aggregation, options = {}) {\n    Log.debug(`Grouping the entities in the ${this.name} collection.`, aggregation, options);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      useDeltaFetch: true,\n      handler() {}\n    }, options);\n\n    if (!(aggregation instanceof Aggregation)) {\n      return Promise.reject(new KinveyError('Invalid aggregation. ' +\n        'It must be an instance of the Kinvey.Aggregation class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_group`\n      }),\n      properties: options.properties,\n      data: aggregation.toJSON(),\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Grouped the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to group the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Counts entities in a collection. A query can be optionally provided to count\n   * a subset of entities in a collection or omitted to count all the entities\n   * in a collection. A promise will be returned that will be resolved with the count\n   * or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  count(query, options = {}) {\n    Log.debug(`Counting the number of entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      useDeltaFetch: true,\n      handler() {}\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_count`\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Counted the number of entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to count the number of entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Retrieves a single entity in a collection by id. A promise will be returned that will\n   * be resolved with the entity or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  findById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to retrieve an entity.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Retrieving the entity in the ${this.name} collection with id = ${id}.`);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`,\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save a entity or an array of entities to a collection. A promise will be returned that\n   * will be resolved with the saved entity/entities or rejected with an error.\n   *\n   * @param   {Object|Array}          doc                                       Document or entities to save.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  save(entity, options = {}) {\n    if (!entity) {\n      Log.warn('No entity was provided to be saved.', entity);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Saving the entity(s) to the ${this.name} collection.`, entity);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      data: entity,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    if (entity[idAttribute]) {\n      request.method = HttpMethod.PUT;\n      request.url = url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${entity[idAttribute]}`\n      });\n    }\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Saved the entity(s) to the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to save the entity(s) to the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove entities in a collection. A query can be optionally provided to remove\n   * a subset of entities in a collection or omitted to remove all entities in a\n   * collection. A promise will be returned that will be resolved with a count of the\n   * number of entities removed or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  remove(query, options = {}) {\n    Log.debug(`Removing the entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname,\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove an entity in a collection. A promise will be returned that will be\n   * resolved with a count of the number of entities removed or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  removeById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to be removed.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Removing an entity in the ${this.name} collection with id = ${id}.`);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`,\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { CacheStore } from './cachestore';\nimport { LocalRequest } from '../requests/local';\nimport { Aggregation } from '../aggregation';\nimport { HttpMethod } from '../enums';\nimport { KinveyError } from '../errors';\nimport { Query } from '../query';\nimport { Log } from '../log';\nimport url from 'url';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\nexport class SyncStore extends CacheStore {\n\n  /**\n   * Finds all entities in a collection. A query can be optionally provided to return\n   * a subset of all entities in a collection or omitted to return all entities in\n   * a collection. The number of entities returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the entities or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  find(query, options = {}) {\n    Log.debug(`Retrieving the entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Groups entities in a collection. An aggregation can be optionally provided to group\n   * a subset of entities in a collection or omitted to group all the entities\n   * in a collection. A promise will be returned that will be resolved with the result\n   * or rejected with an error.\n   *\n   * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  group(aggregation, options = {}) {\n    Log.debug(`Grouping the entities in the ${this.name} collection.`, aggregation, options);\n\n    if (!(aggregation instanceof Aggregation)) {\n      return Promise.reject(new KinveyError('Invalid aggregation. ' +\n        'It must be an instance of the Kinvey.Aggregation class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_group`\n      }),\n      properties: options.properties,\n      data: aggregation.toJSON(),\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Grouped the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to group the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Counts entities in a collection. A query can be optionally provided to count\n   * a subset of entities in a collection or omitted to count all the entities\n   * in a collection. A promise will be returned that will be resolved with the count\n   * or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  count(query, options = {}) {\n    Log.debug(`Counting the number of entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_count`\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Counted the number of entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to count the number of entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Retrieves a single entity in a collection by id. A promise will be returned that will\n   * be resolved with the entity or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  findById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to retrieve an entity.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Retrieving the entity in the ${this.name} collection with id = ${id}.`);\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save a entity or an array of entities to a collection. A promise will be returned that\n   * will be resolved with the saved entity/entities or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity or entities to save.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data saved\n   *                                                                            in the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  save(entity, options = {}) {\n    if (!entity) {\n      Log.warn('No entity was provided to be saved.', entity);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Saving the entity(s) to the ${this.name} collection.`, entity);\n\n    const request = new LocalRequest({\n      method: HttpMethod.POST,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      data: entity,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    if (entity[idAttribute]) {\n      request.url = url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${entity[idAttribute]}`\n      });\n    }\n\n    const promise = request.execute().then(response => {\n      return this._sync(response.data, options).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Saved the entity(s) to the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to save the entity(s) to the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove entities in a collection. A query can be optionally provided to remove\n   * a subset of entities in a collection or omitted to remove all entities in a\n   * collection. A promise will be returned that will be resolved with a count of the\n   * number of entities removed or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  remove(query, options = {}) {\n    Log.debug(`Removing the entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.DELETE,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove an entity in a collection. A promise will be returned that will be\n   * resolved with a count of the number of entities removed or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  removeById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to be removed.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Removing an entity in the ${this.name} collection with id = ${id}.`);\n\n    const request = new LocalRequest({\n      method: HttpMethod.DELETE,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Pull items for a collection from the network to your local cache. A promise will be\n   * returned that will be resolved with the result of the pull or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to pull a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  pull(query, options = {}) {\n    const promise = this.syncCount(null, options).then(count => {\n      if (count > 0) {\n        throw new KinveyError('Unable to pull data. You must push the pending sync items first.',\n          'Call store.push() to push the pending sync items before you pull new data.');\n      }\n\n      return super.find(query, options);\n    }).then(result => {\n      return result.networkPromise;\n    });\n\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyError } from '../errors';\nimport { NetworkStore } from './networkstore';\nimport { AuthType, HttpMethod } from '../enums';\nimport { NetworkRequest } from '../requests/network';\nimport url from 'url';\nimport isArray from 'lodash/isArray';\nconst usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nconst rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\n\nexport class UserStore extends NetworkStore {\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}   Pathname\n   */\n  get _pathname() {\n    return `/${usersNamespace}/${this.client.appKey}`;\n  }\n\n  save(user, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      if (!user) {\n        throw new KinveyError('No user was provided to be updated.');\n      }\n\n      if (isArray(user)) {\n        throw new KinveyError('Please only update one user at a time.', user);\n      }\n\n      if (!user[idAttribute]) {\n        throw new KinveyError('User must have an _id.');\n      }\n\n      if (options._identity) {\n        const socialIdentity = user[socialIdentityAttribute];\n        if (socialIdentity) {\n          for (const identity in socialIdentity) {\n            if (socialIdentity.hasOwnProperty(identity)) {\n              if (socialIdentity[identity] && options._identity !== identity) {\n                delete socialIdentity[identity];\n              }\n            }\n          }\n        }\n      }\n\n      return super.save(user, options);\n    });\n\n    return promise;\n  }\n\n  exists(username, options) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/check-username-exists`\n      }),\n      properties: options.properties,\n      data: { username: username },\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data.usernameExists;\n    });\n\n    return promise;\n  }\n\n  restore(id, options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.Master,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/id`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { DataStore } from './stores/datastore';\nimport { Query } from './query';\nimport { DataStoreType } from './enums';\nimport reduce from 'lodash/reduce';\nconst syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nlet enabled = process.env.KINVEY_SYNC_DEFAULT_STATE || true;\n\nconst Sync = {\n  isEnabled() {\n    return enabled;\n  },\n\n  enable() {\n    enabled = true;\n  },\n\n  disable() {\n    enabled = false;\n  },\n\n  count(query, options) {\n    const syncStore = DataStore.getInstance(syncCollectionName, DataStoreType.Sync);\n    const promise = syncStore.find(query, options).then(syncData => {\n      return reduce(syncData, function (result, data) {\n        return result + data.size;\n      }, 0);\n    });\n    return promise;\n  },\n\n  push(options) {\n    const syncStore = DataStore.getInstance(syncCollectionName, DataStoreType.Sync);\n    const query = new Query();\n    query.greaterThan('size', 0);\n    const promise = syncStore.find(query, options).then(syncData => {\n      const promises = syncData.map(data => {\n        const store = DataStore.getInstance(data[idAttribute], DataStoreType.Sync);\n        return store.push();\n      });\n      return Promise.all(promises);\n    });\n    return promise;\n  },\n\n  sync(options = {}) {\n    const syncStore = DataStore.getInstance(syncCollectionName, DataStoreType.Sync);\n    const promise = syncStore.find(null, options).then(syncData => {\n      const promises = syncData.map(data => {\n        const store = DataStore.getInstance(data[idAttribute], DataStoreType.Sync);\n        return store.sync();\n      });\n      return Promise.all(promises);\n    });\n    return promise;\n  }\n};\n\nexport { Sync };\n","import Promise from 'babybird';\nimport { Client } from './client';\nimport { Query } from './query';\nimport { Acl } from './acl';\nimport { Metadata } from './metadata';\nimport { KinveyError, NotFoundError, ActiveUserError } from './errors';\nimport { MobileIdentityConnect } from './mic';\nimport { AuthType, SocialIdentity, HttpMethod } from './enums';\nimport { DataStore, DataStoreType } from './stores/datastore';\nimport { NetworkRequest } from './requests/network';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport result from 'lodash/result';\nimport isObject from 'lodash/isObject';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nconst usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nconst rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nconst socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nconst usernameAttribute = process.env.KINVEY_USERNAME_ATTRIBUTE || 'username';\nconst emailAttribute = process.env.KINVEY_EMAIL_ATTRIBUTE || 'email';\nconst supportedIdentities = ['facebook', 'google', 'linkedIn'];\nlet hello;\n\nif (typeof window !== 'undefined') {\n  hello = require('hellojs');\n}\n\n/**\n * The User class is used to represent a single user on the Kinvey platform.\n * Use the user class to manage the active user lifecycle and perform user operations.\n */\nexport class User {\n  /**\n   * Create a new instance of a User.\n   *\n   * @param  {Object}   [data={}]    Data for the user.\n   * @return {User}                  User\n   *\n   * @example\n   * var user = new User();\n   */\n  constructor(data = {}) {\n    /**\n     * The users data.\n     *\n     * @type {Object}\n     */\n    this.data = data;\n\n    /**\n     * @private\n     * The client used by this user.\n     *\n     * @type {Client}\n     */\n    this.client = Client.sharedInstance();\n  }\n\n  /**\n   * The _id for the user.\n   *\n   * @return {?string} _id\n   *\n   * @example\n   * var _id = user._id;\n   */\n  get _id() {\n    return this.data[idAttribute];\n  }\n\n  /**\n   * The _acl for the user.\n   *\n   * @return {Acl} _acl\n   *\n   * @example\n   * var _acl = user._acl;\n   */\n  get _acl() {\n    return new Acl(this.data);\n  }\n\n  /**\n   * The metadata for the user.\n   *\n   * @return {Metadata} metadata\n   *\n   * @example\n   * var metadata = user.metadata;\n   */\n  get metadata() {\n    return new Metadata(this.data);\n  }\n\n  set metadata(metadata) {\n    this.data[kmdAttribute] = result(metadata, 'toJSON', metadata);\n  }\n\n  /**\n   * The _kmd for the user.\n   *\n   * @return {Metadata} _kmd\n   *\n   * @example\n   * var _kmd = user._kmd;\n   */\n  get _kmd() {\n    return this.metadata;\n  }\n\n  set _kmd(kmd) {\n    this.metadata = kmd;\n  }\n\n  get _socialIdentity() {\n    return this.data[socialIdentityAttribute];\n  }\n\n  /**\n   * The auth token for the user.\n   *\n   * @return {?string} Auth token\n   *\n   * @example\n   * var authtoken = user.authtoken;\n   */\n  get authtoken() {\n    return this.metadata.authtoken;\n  }\n\n  /**\n   * Set the auth token for the user.\n   *\n   * @param  {?string} authtoken Auth token\n   *\n   * @example\n   * user.authtoken = 'authtoken';\n   */\n  set authtoken(authtoken) {\n    const metadata = this.metadata;\n    metadata.authtoken = authtoken;\n    this.metadata = metadata;\n  }\n\n  /**\n   * The username for the user.\n   *\n   * @return {?string} Username\n   *\n   * @example\n   * var username = user.username;\n   */\n  get username() {\n    return this.data[usernameAttribute];\n  }\n\n  /**\n   * The email for the user.\n   *\n   * @return {?string} Email\n   *\n   * @example\n   * var email = user.email;\n   */\n  get email() {\n    return this.data[emailAttribute];\n  }\n\n  get _pathname() {\n    return `/${usersNamespace}/${this.client.appKey}`;\n  }\n\n  /**\n   * Gets the active user. You can optionally provide a client\n   * to use to lookup the active user.\n   *\n   * @param  {Client}           [client=Client.sharedInstance()]   Client to use to set the active user.\n   * @return {Promise<User>}                                       The active user on the client. The\n   *                                                               active user could be null if one does\n   *                                                               not exist.\n   *\n   * @example\n   * var _id = user._id;\n   */\n  static getActiveUser(client = Client.sharedInstance()) {\n    const data = client.getActiveUserData();\n    let user = null;\n\n    if (data) {\n      user = new User(data);\n      user.client = client;\n    }\n\n    return user;\n  }\n\n  /**\n   * Sets the active user. You can optionally provide a client to\n   * set the active user on. Only one active user per client is\n   * allowed.\n   *\n   * @param  {?(User|Object)}      [user]                               User to set as the active user.\n   * @param  {Client}              [client=Client.sharedInstance()]     The client to use to set the active user on.\n   * @return {Promise<User>}                                            The active user on the client. The active user\n   *                                                                    could be null if one does not exist.\n   *\n   * @example\n   * var user = new User();\n   * var promise = User.setActiveUser(user);\n   * promise.then(function(activeUser) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static setActiveUser(user, client = Client.sharedInstance()) {\n    const data = result(user, 'toJSON', user);\n    client.setActiveUserData(data);\n    return User.getActiveUser(client);\n  }\n\n  /**\n   * Set this user as the active user.\n   *\n   * @return {Promise<User>}  The active user.\n   *\n   * @example\n   * var promise = user.setAsActiveUser();\n   * promise.then(function(activeUser) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  setAsActiveUser() {\n    return User.setActiveUser(this, this.client);\n  }\n\n  /**\n   * Checks if this user is the active user.\n   *\n   * @return {Promise<Boolean>} True or false if this user is the active user.\n   *\n   * @example\n   * var promise = user.isActiveUser();\n   * promise.then(function(isActiveUser) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  isActive() {\n    const activeUser = User.getActiveUser(this.client);\n\n    if (activeUser && activeUser._id === this._id) {\n      return true;\n    }\n\n    return false;\n  }\n\n  static login(usernameOrData, password, options) {\n    const user = new User();\n    return user.login(usernameOrData, password, options);\n  }\n\n  static loginWithIdentity(identity, tokens, options) {\n    const user = new User();\n    return user.loginWithIdentity(identity, tokens, options);\n  }\n\n  /**\n   * Login using a username or password.\n   *\n   * @param  {string|Object}      usernameOrData    Username or an object with username\n   *                                                and password properties.\n   * @param  {string}             [password]        Users password.\n   * @param  {Object}             [options={}]      Options\n   * @return {Promise<User>}                        The logged in user.\n   *\n   * @example\n   * var promise = user.login('username', 'password');\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  login(usernameOrData, password, options = {}) {\n    if (!isObject(usernameOrData)) {\n      usernameOrData = {\n        username: usernameOrData,\n        password: password\n      };\n    }\n\n    if (!usernameOrData._socialIdentity) {\n      if (usernameOrData.username) {\n        usernameOrData.username = String(usernameOrData.username).trim();\n      }\n\n      if (usernameOrData.password) {\n        usernameOrData.password = String(usernameOrData.password).trim();\n      }\n    }\n\n    const isActiveUser = this.isActive();\n    if (isActiveUser) {\n      return Promise.reject(new ActiveUserError('This user is already the active user.'));\n    }\n\n    const activeUser = User.getActiveUser(this.client);\n    if (activeUser) {\n      return Promise.reject(new ActiveUserError('An active user already exists. ' +\n        'Please logout the active user before you login.'));\n    }\n\n    if ((!usernameOrData.username || usernameOrData.username === ''\n      || !usernameOrData.password || usernameOrData.password === '')\n      && !usernameOrData[socialIdentityAttribute]) {\n      return Promise.reject(new KinveyError('Username and/or password missing. ' +\n        'Please provide both a username and password to login.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/login`\n      }),\n      data: usernameOrData,\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      this.data = response.data;\n      return this.setAsActiveUser();\n    });\n\n    return promise;\n  }\n\n  loginWithIdentity(identity, token, options) {\n    const data = { _socialIdentity: {} };\n    data._socialIdentity[identity] = token;\n    return this.login(data, options);\n  }\n\n  static loginWithMIC(redirectUri, authorizationGrant, options) {\n    const user = new User();\n    return user.loginWithMIC(redirectUri, authorizationGrant, options);\n  }\n\n  /* eslint-disable max-len */\n  /**\n   * Login using Mobile Identity Connect.\n   *\n   * @param  {string}                 redirectUri                                                         The redirect uri used\n   *                                                                                                      for MIC logins.\n   * @param  {AuthorizationGrant}     [authorizationGrant=AuthoizationGrant.AuthorizationCodeLoginPage]   MIC authorization grant to use.\n   * @param  {Object}                 [options={}]                                                        Options\n   * @return {Promise<User>}                                                                              The logged in user.\n   *\n   * @example\n   * var promise = user.loginWithMIC('http://example.com');\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  /* eslint-enable max-len */\n  loginWithMIC(redirectUri, authorizationGrant, options = {}) {\n    const mic = new MobileIdentityConnect(this.client);\n    return mic.login(redirectUri, authorizationGrant, options).then(token => {\n      options.redirectUri = redirectUri;\n      options.client = result(mic.client, 'toJSON', mic.client);\n      return this.connect(MobileIdentityConnect.identity, token, options);\n    });\n  }\n\n  /**\n   * Logout the user. If the user was the active user then the active user will be set to null.\n   *\n   * @param  {Object}         [options={}]    Options\n   * @return {Promise<User>}                  The logged out user.\n   *\n   * @example\n   * var promise = user.logout();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  logout(options = {}) {\n    const isActive = this.isActive();\n\n    if (!isActive) {\n      return Promise.resolve();\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.Session,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${usersNamespace}/${this.client.appKey}/_logout`\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().catch(() => {\n      return null;\n    }).then(() => {\n      const isActive = this.isActive();\n      if (isActive) {\n        return User.setActiveUser(null, this.client);\n      }\n    }).then(() => {\n      return this;\n    });\n\n    return promise;\n  }\n\n  /**\n   * @private\n   * Returns true or false if identity connect is supported.\n   *\n   * @return {Boolean}  True or false if identity connect is supported.\n   *\n   * @example\n   * var isIdentitySupported = user.isIdentitySupported('identity');\n   */\n  static isIdentitySupported(identity) {\n    return hello && supportedIdentities.indexOf(identity) !== -1;\n  }\n\n  /**\n   * Connect using Facebook.\n   *\n   * @param  {Object}         [options={}]  Options\n   * @return {Promise<User>}                The connected user.\n   *\n   * @example\n   * var promise = user.connectWithFacebook();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static connectWithFacebook(options = {}) {\n    return User.connectWithIdentity(SocialIdentity.Facebook, options);\n  }\n\n  /**\n   * Connect using Google.\n   *\n   * @param  {Object}         [options={}]  Options\n   * @return {Promise<User>}                The connected user.\n   *\n   * @example\n   * var promise = user.connectWithGoogle();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static connectWithGoogle(options = {}) {\n    return User.connectWithIdentity(SocialIdentity.Google, options);\n  }\n\n  /**\n   * Connect using LinkedIn.\n   *\n   * @param  {Object}         [options={}]  Options\n   * @return {Promise<User>}                The connected user.\n   *\n   * @example\n   * var promise = user.connectWithLinkedIn();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static connectWithLinkedIn(options = {}) {\n    return User.connectWithIdentity(SocialIdentity.LinkedIn, options);\n  }\n\n  static connectWithIdentity(identity, options) {\n    const user = new User();\n    return user.connectWithIdentity(identity, options);\n  }\n\n  /* eslint-disable max-len */\n  /**\n   * Connect using an identity (Facebook, Google, LinkedIn etc.).\n   *\n   * @param  {SocialIdentity|string}         identity                                Identity used to connect the user.\n   * @param  {Object}                        [options={}]                            Options\n   * @param  {string}                        [options.collectionName='Identities']   Collection name to use to lookup credentials\n   *                                                                                 for the identity.\n   * @return {Promise<User>}                                                         The connected user.\n   *\n   * @example\n   * var promise = user.connectWithIdentity(SocialIdentity.Facebook);\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  /* eslint-enable max-len */\n  connectWithIdentity(identity, options = {}) {\n    options = assign({\n      collectionName: 'identities'\n    }, options);\n\n\n    const promise = Promise.resolve().then(() => {\n      if (!identity) {\n        throw new KinveyError('An identity is required to connect the user.');\n      }\n\n      if (!User.isIdentitySupported(identity)) {\n        throw new KinveyError(`Identity ${identity} is not supported on this platform.`);\n      }\n\n      const query = new Query().equalTo('identity', identity);\n      const request = new NetworkRequest({\n        method: HttpMethod.GET,\n        authType: AuthType.None,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `/${appdataNamespace}/${this.client.appKey}/${options.collectionName}`\n        }),\n        query: query,\n        properties: options.properties,\n        timeout: options.timeout\n      });\n      return request.execute();\n    }).then(response => {\n      if (response.data.length === 1) {\n        const helloSettings = {};\n        helloSettings[identity] = response.data[0].key || response.data[0].appId || response.data[0].clientId;\n        hello.init(helloSettings);\n        return hello(identity).login();\n      }\n\n      throw new KinveyError('Unsupported identity.');\n    }).then(() => {\n      const authResponse = hello(identity).getAuthResponse();\n      return this.connect(identity, authResponse, options);\n    });\n\n    return promise;\n  }\n\n  /**\n   * @private\n   *\n   * Connects with the provided accessToken and identity.\n   *\n   * @param  {SocialIdentity|string}         identity      Identity used to connect the user.\n   * @param  {string}                        accessToken   Access token for the identity.\n   * @param  {number}                        [expiresIn]   Time in seconds for how long the access token is valid.\n   * @param  {Object}                        [options={}]  Options\n   * @return {Promise<User>}                               The connected user.\n   *\n   * @example\n   * var token = {\n   *   access_token: 'access_token',\n   *   refresh_token: 'refresh_token',\n   *   expires_in: 3600\n   * };\n   * var promise = user.connect(SocialIdentity.Facebook, token);\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  connect(identity, token, options = {}) {\n    const data = this.data;\n    const socialIdentity = data[socialIdentityAttribute] || {};\n    socialIdentity[identity] = token;\n    data[socialIdentityAttribute] = socialIdentity;\n    this.data = data;\n\n    const promise = Promise.resolve().then(() => {\n      const isActive = this.isActive();\n\n      if (isActive) {\n        options._identity = identity;\n        return this.update(data, options);\n      }\n\n      return this.login(data, null, options);\n    }).catch(err => {\n      if (err instanceof NotFoundError) {\n        return this.signup(data, options).then(() => {\n          return this.connect(identity, token, options);\n        });\n      }\n\n      throw err;\n    }).then(() => {\n      this.client.setActiveSocialIdentity({\n        identity: identity,\n        token: this._socialIdentity[identity],\n        redirectUri: options.redirectUri,\n        client: options.client\n      });\n      return this;\n    });\n\n    return promise;\n  }\n\n  disconnect(identity, options = {}) {\n    const data = this.data;\n    const socialIdentity = data[socialIdentityAttribute] || {};\n    delete socialIdentity[identity];\n    data[socialIdentityAttribute] = socialIdentity;\n    this.data = data;\n\n    const promise = Promise.resolve().then(() => {\n      if (!this._id) {\n        return this;\n      }\n\n      return this.update(data, options);\n    }).then(() => {\n      const activeSocialIdentity = this.client.getActiveSocialIdentity();\n\n      if (activeSocialIdentity.identity === identity) {\n        this.client.setActiveSocialIdentity(null);\n      }\n\n      return this;\n    });\n\n    return promise;\n  }\n\n  static signup(data, options) {\n    const user = new User();\n    return user.signup(data, options);\n  }\n\n  static signupWithIdentity(identity, tokens, options) {\n    const user = new User();\n    return user.signupWithIdentity(identity, tokens, options);\n  }\n\n  /**\n   * Sign up. If options.state is set to true then the user\n   * will be set as the active user after succesfully signing up the\n   * user.\n   *\n   * @param  {User|Object}    data                    Users data.\n   * @param  {Object}         [options={}]            Options\n   * @param  {Boolean}        [options.state=true]    If set to true, the user will be\n   *                                                  set as the active user after successfully\n   *                                                  being signed up.\n   * @return {Promise<User>}                          The signed up user.\n   *\n   * @example\n   * var promise = user.signup({\n   *   username: 'admin',\n   *   password: 'admin'\n   * });\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  signup(data, options = {}) {\n    options = assign({\n      state: true\n    }, options);\n\n    const promise = Promise.resolve().then(() => {\n      if (options.state === true) {\n        const activeUser = User.getActiveUser(this.client);\n        if (activeUser) {\n          throw new ActiveUserError('An active user already exists. ' +\n            'Please logout the active user before you login.');\n        }\n      }\n    }).then(() => {\n      const request = new NetworkRequest({\n        method: HttpMethod.POST,\n        authType: AuthType.App,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `/${usersNamespace}/${this.client.appKey}`\n        }),\n        data: result(data, 'toJSON', data),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n      return request.execute();\n    }).then(response => {\n      this.data = response.data;\n\n      if (options.state === true) {\n        return this.setAsActiveUser();\n      }\n\n      return this;\n    });\n\n    return promise;\n  }\n\n  signupWithIdentity(identity, tokens, options) {\n    const data = { _socialIdentity: {} };\n    data._socialIdentity[identity] = tokens;\n    return this.signup(data, options);\n  }\n\n  update(data, options) {\n    const userStore = DataStore.getInstance(null, DataStoreType.User);\n    return userStore.save(data, options).then(data => {\n      this.data = data;\n\n      if (this.isActive()) {\n        return this.setAsActiveUser();\n      }\n\n      return this;\n    });\n  }\n\n  me(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Session,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${usersNamespace}/${this.client.appKey}/_me`\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      this.data = response.data;\n\n      if (!this.authtoken) {\n        const activeUser = User.getActiveUser(this.client);\n\n        if (activeUser) {\n          this.authtoken = activeUser.authtoken;\n        }\n      }\n\n      return this.setAsActiveUser();\n    });\n\n    return promise;\n  }\n\n  verifyEmail(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/${this.username}/user-email-verification-initiate`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  forgotUsername(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/user-forgot-username`\n      }),\n      properties: options.properties,\n      data: { email: this.email },\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  resetPassword(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/${this.username}/user-password-reset-initiate`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  // refreshAuthToken(options = {}) {\n  //   const socialIdentity = this.data[socialIdentityAttribute];\n  //   const identity = socialIdentity.activeIdentity;\n  //   const token = socialIdentity[identity];\n  //   let promise;\n\n  //   switch (identity) {\n  //     case MobileIdentityConnect.identity:\n  //       const mic = new MobileIdentityConnect(this.client);\n  //       promise = mic.refresh(token, options);\n  //       break;\n  //     default:\n  //       promise = Promise.reject(new KinveyError(`Unable to refresh the auth token because ` +\n  //         `the ${identity} identity is not supported.`));\n  //   }\n\n  //   return promise.then(token => {\n  //     return this.connect(identity, token, options);\n  //   });\n  // }\n\n  toJSON() {\n    return this.data;\n  }\n}\n","import { use } from './object';\n\n/**\n * @private\n */\nexport class Device {\n  toJSON() {\n    throw new Error('method unsupported');\n  }\n}\n\nDevice.use = use(['toJSON']);\n","import forEach from 'lodash/forEach';\nimport isFunction from 'lodash/isFunction';\n\n/**\n * @private\n */\nexport function nested(obj, dotProperty, value) {\n  if (!dotProperty) {\n    obj = value ? value : obj;\n    return obj;\n  }\n\n  const parts = dotProperty.split('.');\n  let current = parts.shift();\n  while (current && obj) {\n    obj = obj[current];\n    current = parts.shift();\n  }\n\n  return value ? value : obj;\n}\n\n/**\n * @private\n */\nexport function isDefined(obj) {\n  return obj !== undefined && obj !== null;\n}\n\n/**\n * @private\n */\nexport function use(nsInterface) {\n  return function(adapter = {}) {\n    forEach(nsInterface, methodName => {\n      if (isFunction(adapter[methodName])) {\n        this.prototype[methodName] = function() {\n          return adapter[methodName].apply(this, arguments);\n        };\n      }\n    });\n  };\n}\n","import { EventEmitter } from 'events';\nimport { use } from './object';\n\n/**\n * @private\n */\nexport class Popup extends EventEmitter {\n  constructor(url = '/') {\n    super();\n    this.url = url;\n  }\n\n  open() {\n    throw new Error('method unsupported');\n  }\n\n  close() {\n    throw new Error('method unsupported');\n  }\n\n  loadHandler() {\n    throw new Error('method unsupported');\n  }\n\n  clickHandler() {\n    throw new Error('method unsupported');\n  }\n\n  closeHandler() {\n    throw new Error('method unsupported');\n  }\n}\n\nPopup.use = use(['open', 'close', 'loadHandler', 'clickHandler', 'closeHandler']);\n","import uid from 'uid';\n\n/**\n * @private\n */\nexport function byteCount(str) {\n  let count = 0;\n  const stringLength = str.length;\n  str = String(str || '');\n\n  for (let i = 0; i < stringLength; i++) {\n    const partCount = encodeURI(str[i]).split('%').length;\n    count += partCount === 1 ? 1 : partCount - 1;\n  }\n\n  return count;\n}\n\nexport function randomString(size, prefix = '') {\n  return `${prefix}${uid(size)}`;\n}\n","'use strict';\n\nvar stub = require('./stub');\nvar tracking = require('./tracking');\nvar ls = 'localStorage' in global && global.localStorage ? global.localStorage : stub;\n\nfunction accessor (key, value) {\n  if (arguments.length === 1) {\n    return get(key);\n  }\n  return set(key, value);\n}\n\nfunction get (key) {\n  return JSON.parse(ls.getItem(key));\n}\n\nfunction set (key, value) {\n  try {\n    ls.setItem(key, JSON.stringify(value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction remove (key) {\n  return ls.removeItem(key);\n}\n\nfunction clear () {\n  return ls.clear();\n}\n\naccessor.set = set;\naccessor.get = get;\naccessor.remove = remove;\naccessor.clear = clear;\naccessor.on = tracking.on;\naccessor.off = tracking.off;\n\nmodule.exports = accessor;\n","'use strict';\n\nvar ms = {};\n\nfunction getItem (key) {\n  return key in ms ? ms[key] : null;\n}\n\nfunction setItem (key, value) {\n  ms[key] = value;\n  return true;\n}\n\nfunction removeItem (key) {\n  var found = key in ms;\n  if (found) {\n    return delete ms[key];\n  }\n  return false;\n}\n\nfunction clear () {\n  ms = {};\n  return true;\n}\n\nmodule.exports = {\n  getItem: getItem,\n  setItem: setItem,\n  removeItem: removeItem,\n  clear: clear\n};\n","'use strict';\n\nvar listeners = {};\nvar listening = false;\n\nfunction listen () {\n  if (global.addEventListener) {\n    global.addEventListener('storage', change, false);\n  } else if (global.attachEvent) {\n    global.attachEvent('onstorage', change);\n  } else {\n    global.onstorage = change;\n  }\n}\n\nfunction change (e) {\n  if (!e) {\n    e = global.event;\n  }\n  var all = listeners[e.key];\n  if (all) {\n    all.forEach(fire);\n  }\n\n  function fire (listener) {\n    listener(JSON.parse(e.newValue), JSON.parse(e.oldValue), e.url || e.uri);\n  }\n}\n\nfunction on (key, fn) {\n  if (listeners[key]) {\n    listeners[key].push(fn);\n  } else {\n    listeners[key] = [fn];\n  }\n  if (listening === false) {\n    listen();\n  }\n}\n\nfunction off (key, fn) {\n  var ns = listeners[key];\n  if (ns.length > 1) {\n    ns.splice(ns.indexOf(fn), 1);\n  } else {\n    listeners[key] = [];\n  }\n}\n\nmodule.exports = {\n  on: on,\n  off: off\n};\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Creates an hash object.\n *\n * @private\n * @constructor\n * @returns {Object} Returns the new hash object.\n */\nfunction Hash() {}\n\n// Avoid inheriting from `Object.prototype` when possible.\nHash.prototype = nativeCreate ? nativeCreate(null) : objectProto;\n\nmodule.exports = Hash;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapClear = require('./_mapClear'),\n    mapDelete = require('./_mapDelete'),\n    mapGet = require('./_mapGet'),\n    mapHas = require('./_mapHas'),\n    mapSet = require('./_mapSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction MapCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `MapCache`.\nMapCache.prototype.clear = mapClear;\nMapCache.prototype['delete'] = mapDelete;\nMapCache.prototype.get = mapGet;\nMapCache.prototype.has = mapHas;\nMapCache.prototype.set = mapSet;\n\nmodule.exports = MapCache;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Reflect = root.Reflect;\n\nmodule.exports = Reflect;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    cachePush = require('./_cachePush');\n\n/**\n *\n * Creates a set cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.push(values[index]);\n  }\n}\n\n// Add functions to the `SetCache`.\nSetCache.prototype.push = cachePush;\n\nmodule.exports = SetCache;\n","var stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction Stack(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `Stack` cache.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `Map#set` because it doesn't return the map instance in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\nmodule.exports = addMapEntry;\n","/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  set.add(value);\n  return set;\n}\n\nmodule.exports = addSetEntry;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  return !!array.length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check, else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (typeof key == 'number' && value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignValue;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the associative array.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction assocDelete(array, key) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = array.length - 1;\n  if (index == lastIndex) {\n    array.pop();\n  } else {\n    splice.call(array, index, 1);\n  }\n  return true;\n}\n\nmodule.exports = assocDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the associative array value for `key`.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction assocGet(array, key) {\n  var index = assocIndexOf(array, key);\n  return index < 0 ? undefined : array[index][1];\n}\n\nmodule.exports = assocGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if an associative array value for `key` exists.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction assocHas(array, key) {\n  return assocIndexOf(array, key) > -1;\n}\n\nmodule.exports = assocHas;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the first occurrence of `key` is found in `array`\n * of key-value pairs.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the associative array `key` to `value`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction assocSet(array, key, value) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    array.push([key, value]);\n  } else {\n    array[index][1] = value;\n  }\n}\n\nmodule.exports = assocSet;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the array-like object.\n */\nfunction baseCastFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = baseCastFunction;\n","var isArray = require('./isArray'),\n    stringToPath = require('./_stringToPath');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction baseCastPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\nmodule.exports = baseCastPath;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseForOwn = require('./_baseForOwn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isHostObject = require('./_isHostObject'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\ncloneableTags[dateTag] = cloneableTags[float32Tag] =\ncloneableTags[float64Tag] = cloneableTags[int8Tag] =\ncloneableTags[int16Tag] = cloneableTags[int32Tag] =\ncloneableTags[mapTag] = cloneableTags[numberTag] =\ncloneableTags[objectTag] = cloneableTags[regexpTag] =\ncloneableTags[setTag] = cloneableTags[stringTag] =\ncloneableTags[symbolTag] = cloneableTags[uint8Tag] =\ncloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] =\ncloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        result = baseAssign(result, value);\n        return isFull ? copySymbols(value, result) : result;\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  // Recursively populate clone (susceptible to call stack limits).\n  (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return (isFull && !isArr) ? copySymbols(value, result) : result;\n}\n\nmodule.exports = baseClone;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\nmodule.exports = baseCreate;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support for\n * excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","/**\n * The base implementation of methods like `_.find` and `_.findKey`, without\n * support for iteratee shorthands, which iterates over `collection` using\n * `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @param {boolean} [retKey] Specify returning the key of the found element instead of the element itself.\n * @returns {*} Returns the found element or its key, else `undefined`.\n */\nfunction baseFind(collection, predicate, eachFunc, retKey) {\n  var result;\n  eachFunc(collection, function(value, key, collection) {\n    if (predicate(value, key, collection)) {\n      result = retKey ? key : value;\n      return false;\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFind;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var arrayPush = require('./_arrayPush'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && isArrayLikeObject(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var baseCastPath = require('./_baseCastPath'),\n    isKey = require('./_isKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path + ''] : baseCastPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n  // that are composed entirely of index properties, return `false` for\n  // `hasOwnProperty` checks of them.\n  return hasOwnProperty.call(object, key) ||\n    (typeof object == 'object' && key in object && getPrototypeOf(object) === null);\n}\n\nmodule.exports = baseHas;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var indexOfNaN = require('./_indexOfNaN');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return indexOfNaN(array, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOf;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObject = require('./isObject'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isHostObject = require('./_isHostObject'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      stack || (stack = new Stack);\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack,\n          result = customizer ? customizer(objValue, srcValue, key, object, source, stack) : undefined;\n\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  var type = typeof value;\n  if (type == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = Object.keys;\n\n/**\n * The base implementation of `_.keys` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  return nativeKeys(Object(object));\n}\n\nmodule.exports = baseKeys;\n","var Reflect = require('./_Reflect'),\n    iteratorToArray = require('./_iteratorToArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar enumerate = Reflect ? Reflect.enumerate : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.keysIn` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  object = object == null ? object : Object(object);\n\n  var result = [];\n  for (var key in object) {\n    result.push(key);\n  }\n  return result;\n}\n\n// Fallback for IE < 9 with es6-shim.\nif (enumerate && !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf')) {\n  baseKeysIn = function(object) {\n    return iteratorToArray(enumerate(object));\n  };\n}\n\nmodule.exports = baseKeysIn;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value &&\n        (value !== undefined || (key in Object(object)));\n    };\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isArray = require('./isArray'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  var props = (isArray(source) || isTypedArray(source))\n    ? undefined\n    : keysIn(source);\n\n  arrayEach(props || source, function(srcValue, key) {\n    if (props) {\n      key = srcValue;\n      srcValue = source[key];\n    }\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(object[key], srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  });\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    baseClone = require('./_baseClone'),\n    copyArray = require('./_copyArray'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = object[key],\n      srcValue = source[key],\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    newValue = srcValue;\n    if (isArray(srcValue) || isTypedArray(srcValue)) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || (srcIndex && isFunction(objValue))) {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n      else {\n        newValue = objValue;\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  stack.set(srcValue, newValue);\n\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n  }\n  stack['delete'](srcValue);\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n * of key-value pairs for `object` corresponding to the property names of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the new array of key-value pairs.\n */\nfunction baseToPairs(object, props) {\n  return arrayMap(props, function(key) {\n    return [key, object[key]];\n  });\n}\n\nmodule.exports = baseToPairs;\n","/**\n * The base implementation of `_.unary` without support for storing wrapper metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Checks if `value` is in `cache`.\n *\n * @private\n * @param {Object} cache The set cache to search.\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction cacheHas(cache, value) {\n  var map = cache.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    return hash[value] === HASH_UNDEFINED;\n  }\n  return map.has(value);\n}\n\nmodule.exports = cacheHas;\n","var isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the set cache.\n *\n * @private\n * @name push\n * @memberOf SetCache\n * @param {*} value The value to cache.\n */\nfunction cachePush(value) {\n  var map = this.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    hash[value] = HASH_UNDEFINED;\n  }\n  else {\n    map.set(value, HASH_UNDEFINED);\n  }\n}\n\nmodule.exports = cachePush;\n","/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\nmodule.exports = checkGlobal;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var addMapEntry = require('./_addMapEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    mapToArray = require('./_mapToArray');\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map) {\n  return arrayReduce(mapToArray(map), addMapEntry, new map.constructor);\n}\n\nmodule.exports = cloneMap;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var addSetEntry = require('./_addSetEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    setToArray = require('./_setToArray');\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set) {\n  return arrayReduce(setToArray(set), addSetEntry, new set.constructor);\n}\n\nmodule.exports = cloneSet;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObjectWith = require('./_copyObjectWith');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object) {\n  return copyObjectWith(source, props, object);\n}\n\nmodule.exports = copyObject;\n","var assignValue = require('./_assignValue');\n\n/**\n * This function is like `copyObject` except that it accepts a function to\n * customize copied values.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObjectWith(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\nmodule.exports = copyObjectWith;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","var isIterateeCall = require('./_isIterateeCall'),\n    rest = require('./rest');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = typeof customizer == 'function'\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * Creates a base function for methods like `_.forIn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var arraySome = require('./_arraySome');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var index = -1,\n      isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      isUnordered = bitmask & UNORDERED_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(array, other);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isUnordered) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack);\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object) ? other != +other : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      // Recursively compare objects (susceptible to call stack limits).\n      return equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask | UNORDERED_COMPARE_FLAG, stack.set(object, other));\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var baseHas = require('./_baseHas'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : baseHas(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var baseProperty = require('./_baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n","var isStrictComparable = require('./_isStrictComparable'),\n    toPairs = require('./toPairs');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = toPairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var isNative = require('./isNative');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","/** Built-in value references. */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = getOwnPropertySymbols || function() {\n  return [];\n};\n\nmodule.exports = getSymbols;\n","var Map = require('./_Map'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect maps, sets, and weakmaps. */\nvar mapCtorString = Map ? funcToString.call(Map) : '',\n    setCtorString = Set ? funcToString.call(Set) : '',\n    weakMapCtorString = WeakMap ? funcToString.call(WeakMap) : '';\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction getTag(value) {\n  return objectToString.call(value);\n}\n\n// Fallback for IE 11 providing `toStringTag` values for maps, sets, and weakmaps.\nif ((Map && getTag(new Map) != mapTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : null,\n        ctorString = typeof Ctor == 'function' ? funcToString.call(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case mapCtorString: return mapTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var baseCastPath = require('./_baseCastPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isKey = require('./_isKey'),\n    isLength = require('./isLength'),\n    isString = require('./isString'),\n    last = require('./last'),\n    parent = require('./_parent');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  if (object == null) {\n    return false;\n  }\n  var result = hasFunc(object, path);\n  if (!result && !isKey(path)) {\n    path = baseCastPath(path);\n    object = parent(object, path);\n    if (object != null) {\n      path = last(path);\n      result = hasFunc(object, path);\n    }\n  }\n  var length = object ? object.length : undefined;\n  return result || (\n    !!length && isLength(length) && isIndex(path, length) &&\n    (isArray(object) || isString(object) || isArguments(object))\n  );\n}\n\nmodule.exports = hasPath;\n","var hashHas = require('./_hashHas');\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(hash, key) {\n  return hashHas(hash, key) && delete hash[key];\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(hash, key) {\n  if (nativeCreate) {\n    var result = hash[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(hash, key) ? hash[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(hash, key) {\n  return nativeCreate ? hash[key] !== undefined : hasOwnProperty.call(hash, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction hashSet(hash, key, value) {\n  hash[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n}\n\nmodule.exports = hashSet;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isLength = require('./isLength'),\n    isString = require('./isString');\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\nmodule.exports = indexKeys;\n","/**\n * Gets the index at which the first occurrence of `NaN` is found in `array`.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n */\nfunction indexOfNaN(array, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 0 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    var other = array[index];\n    if (other !== other) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = indexOfNaN;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneMap = require('./_cloneMap'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSet = require('./_cloneSet'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseCreate = require('./_baseCreate'),\n    isPrototype = require('./_isPrototype');\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototypeOf(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\nmodule.exports = isHostObject;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var isArray = require('./isArray');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (typeof value == 'number') {\n    return true;\n  }\n  return !isArray(value) &&\n    (reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n      (object != null && value in Object(object)));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return type == 'number' || type == 'boolean' ||\n    (type == 'string' && value != '__proto__') || value == null;\n}\n\nmodule.exports = isKeyable;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\nmodule.exports = iteratorToArray;\n","var Hash = require('./_Hash'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': Map ? new Map : [],\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapClear;\n","var Map = require('./_Map'),\n    assocDelete = require('./_assocDelete'),\n    hashDelete = require('./_hashDelete'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapDelete(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashDelete(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map['delete'](key) : assocDelete(data.map, key);\n}\n\nmodule.exports = mapDelete;\n","var Map = require('./_Map'),\n    assocGet = require('./_assocGet'),\n    hashGet = require('./_hashGet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapGet(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashGet(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.get(key) : assocGet(data.map, key);\n}\n\nmodule.exports = mapGet;\n","var Map = require('./_Map'),\n    assocHas = require('./_assocHas'),\n    hashHas = require('./_hashHas'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapHas(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashHas(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.has(key) : assocHas(data.map, key);\n}\n\nmodule.exports = mapHas;\n","var Map = require('./_Map'),\n    assocSet = require('./_assocSet'),\n    hashSet = require('./_hashSet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache object.\n */\nfunction mapSet(key, value) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    hashSet(typeof key == 'string' ? data.string : data.hash, key, value);\n  } else if (Map) {\n    data.map.set(key, value);\n  } else {\n    assocSet(data.map, key, value);\n  }\n  return this;\n}\n\nmodule.exports = mapSet;\n","/**\n * Converts `map` to an array.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var baseSlice = require('./_baseSlice'),\n    get = require('./get');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length == 1 ? object : get(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var checkGlobal = require('./_checkGlobal');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Converts `set` to an array.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = { 'array': [], 'map': null };\n}\n\nmodule.exports = stackClear;\n","var assocDelete = require('./_assocDelete');\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocDelete(array, key) : data.map['delete'](key);\n}\n\nmodule.exports = stackDelete;\n","var assocGet = require('./_assocGet');\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocGet(array, key) : data.map.get(key);\n}\n\nmodule.exports = stackGet;\n","var assocHas = require('./_assocHas');\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocHas(array, key) : data.map.has(key);\n}\n\nmodule.exports = stackHas;\n","var MapCache = require('./_MapCache'),\n    assocSet = require('./_assocSet');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache object.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__,\n      array = data.array;\n\n  if (array) {\n    if (array.length < (LARGE_ARRAY_SIZE - 1)) {\n      assocSet(array, key, value);\n    } else {\n      data.array = null;\n      data.map = new MapCache(array);\n    }\n  }\n  var map = data.map;\n  if (map) {\n    map.set(key, value);\n  }\n  return this;\n}\n\nmodule.exports = stackSet;\n","var toString = require('./toString');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nfunction stringToPath(string) {\n  var result = [];\n  toString(string).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = stringToPath;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Assigns own enumerable properties of source objects to the destination\n * object. Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function Foo() {\n *   this.c = 3;\n * }\n *\n * function Bar() {\n *   this.e = 5;\n * }\n *\n * Foo.prototype.d = 4;\n * Bar.prototype.f = 6;\n *\n * _.assign({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3, 'e': 5 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var getter = _.constant(object);\n *\n * getter() === object;\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last'),\n    rest = require('./rest');\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. Result values are chosen from the first array.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([3.1, 2.2, 1.3], [4.4, 2.5], Math.floor);\n * // => [3.1, 1.3]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = rest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, true), baseIteratee(iteratee))\n    : [];\n});\n\nmodule.exports = differenceBy;\n","/**\n * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseEach = require('./_baseEach'),\n    baseFind = require('./_baseFind'),\n    baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three arguments:\n * (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nfunction find(collection, predicate) {\n  predicate = baseIteratee(predicate, 3);\n  if (isArray(collection)) {\n    var index = baseFindIndex(collection, predicate);\n    return index > -1 ? collection[index] : undefined;\n  }\n  return baseFind(collection, predicate, baseEach);\n}\n\nmodule.exports = find;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate) {\n  return (array && array.length)\n    ? baseFindIndex(array, baseIteratee(predicate, 3))\n    : -1;\n}\n\nmodule.exports = findIndex;\n","var arrayEach = require('./_arrayEach'),\n    baseCastFunction = require('./_baseCastFunction'),\n    baseEach = require('./_baseEach'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior use `_.forIn` or `_.forOwn`\n * for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(value) {\n *   console.log(value);\n * });\n * // => logs `1` then `2`\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => logs 'a' then 'b' (iteration order is not guaranteed)\n */\nfunction forEach(collection, iteratee) {\n  return (typeof iteratee == 'function' && isArray(collection))\n    ? arrayEach(collection, iteratee)\n    : baseEach(collection, baseCastFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined` the `defaultValue` is used in its place.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': _.create({ 'c': 3 }) }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b.c');\n * // => true\n *\n * _.hasIn(object, ['a', 'b', 'c']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * This method returns the first argument given to it.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var getLength = require('./_getLength'),\n    isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value)) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var constant = require('./constant'),\n    root = require('./_root');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = (freeModule && freeModule.exports === freeExports)\n  ? freeExports\n  : undefined;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = !Buffer ? constant(false) : function(value) {\n  return value instanceof Buffer;\n};\n\nmodule.exports = isBuffer;\n","var isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isFunction = require('./isFunction'),\n    isString = require('./isString');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty collection or object. A value is considered\n * empty if it's an `arguments` object, array, string, or jQuery-like collection\n * with a length of `0` or has no own enumerable properties.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || isString(value) ||\n        isFunction(value.splice) || isArguments(value))) {\n    return !value.length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isFunction = require('./isFunction'),\n    isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns). */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(funcToString.call(value));\n  }\n  return isObjectLike(value) &&\n    (isHostObject(value) ? reIsNative : reIsHostCtor).test(value);\n}\n\nmodule.exports = isNative;\n","var isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && objectToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n","var isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nfunction isRegExp(value) {\n  return isObject(value) && objectToString.call(value) == regexpTag;\n}\n\nmodule.exports = isRegExp;\n","var isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n","var createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` through `iteratee`. The corresponding value\n * of each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  result[key] = value;\n});\n\nmodule.exports = keyBy;\n","var baseHas = require('./_baseHas'),\n    baseKeys = require('./_baseKeys'),\n    indexKeys = require('./_indexKeys'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  var isProto = isPrototype(object);\n  if (!(isProto || isArrayLike(object))) {\n    return baseKeys(object);\n  }\n  var indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  for (var key in object) {\n    if (baseHas(object, key) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(isProto && key == 'constructor')) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keys;\n","var baseKeysIn = require('./_baseKeysIn'),\n    indexKeys = require('./_indexKeys'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  var index = -1,\n      isProto = isPrototype(object),\n      props = baseKeysIn(object),\n      propsLength = props.length,\n      indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if (!(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `curry`, `curryRight`, `drop`, `dropRight`, `every`, `fill`,\n * `invert`, `parseInt`, `random`, `range`, `rangeRight`, `slice`, `some`,\n * `sortBy`, `take`, `takeRight`, `template`, `trim`, `trimEnd`, `trimStart`,\n * and `words`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable properties of source objects into the destination\n * object. Source properties that resolve to `undefined` are skipped if a\n * destination value exists. Array and plain object properties are merged\n * recursively.Other objects and value types are overridden by assignment.\n * Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var users = {\n *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n * };\n *\n * var ages = {\n *   'data': [{ 'age': 36 }, { 'age': 40 }]\n * };\n *\n * _.merge(users, ages);\n * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` through `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","var apply = require('./_apply'),\n    toInteger = require('./toInteger');\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = rest;\n","var baseCastPath = require('./_baseCastPath'),\n    get = require('./get'),\n    isFunction = require('./isFunction'),\n    isKey = require('./_isKey'),\n    parent = require('./_parent');\n\n/**\n * This method is like `_.get` except that if the resolved value is a function\n * it's invoked with the `this` binding of its parent object and its result\n * is returned.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to resolve.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n *\n * _.result(object, 'a[0].b.c1');\n * // => 3\n *\n * _.result(object, 'a[0].b.c2');\n * // => 4\n *\n * _.result(object, 'a[0].b.c3', 'default');\n * // => 'default'\n *\n * _.result(object, 'a[0].b.c3', _.constant('default'));\n * // => 'default'\n */\nfunction result(object, path, defaultValue) {\n  if (!isKey(path, object)) {\n    path = baseCastPath(path);\n    var result = get(object, path);\n    object = parent(object, path);\n  } else {\n    result = object == null ? undefined : object[path];\n  }\n  if (result === undefined) {\n    result = defaultValue;\n  }\n  return isFunction(result) ? result.call(object) : result;\n}\n\nmodule.exports = result;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\nmodule.exports = toInteger;\n","var isFunction = require('./isFunction'),\n    isObject = require('./isObject');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseToPairs = require('./_baseToPairs'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable key-value pairs for `object` which\n * can be consumed by `_.fromPairs`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.toPairs(new Foo);\n * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n */\nfunction toPairs(object) {\n  return baseToPairs(object, keys(object));\n}\n\nmodule.exports = toPairs;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable\n * properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var Symbol = require('./_Symbol'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (value == null) {\n    return '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toString;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = values;\n","/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n(function (root, definition) {\r\n    \"use strict\";\r\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\r\n        module.exports = definition();\r\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\r\n        define(definition);\r\n    } else {\r\n        root.log = definition();\r\n    }\r\n}(this, function () {\r\n    \"use strict\";\r\n    var noop = function() {};\r\n    var undefinedType = \"undefined\";\r\n\r\n    function realMethod(methodName) {\r\n        if (typeof console === undefinedType) {\r\n            return false; // We can't build a real method without a console to log to\r\n        } else if (console[methodName] !== undefined) {\r\n            return bindMethod(console, methodName);\r\n        } else if (console.log !== undefined) {\r\n            return bindMethod(console, 'log');\r\n        } else {\r\n            return noop;\r\n        }\r\n    }\r\n\r\n    function bindMethod(obj, methodName) {\r\n        var method = obj[methodName];\r\n        if (typeof method.bind === 'function') {\r\n            return method.bind(obj);\r\n        } else {\r\n            try {\r\n                return Function.prototype.bind.call(method, obj);\r\n            } catch (e) {\r\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n                return function() {\r\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // these private functions always need `this` to be set properly\r\n\r\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n        return function () {\r\n            if (typeof console !== undefinedType) {\r\n                replaceLoggingMethods.call(this, level, loggerName);\r\n                this[methodName].apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    function replaceLoggingMethods(level, loggerName) {\r\n        /*jshint validthis:true */\r\n        for (var i = 0; i < logMethods.length; i++) {\r\n            var methodName = logMethods[i];\r\n            this[methodName] = (i < level) ?\r\n                noop :\r\n                this.methodFactory(methodName, level, loggerName);\r\n        }\r\n    }\r\n\r\n    function defaultMethodFactory(methodName, level, loggerName) {\r\n        /*jshint validthis:true */\r\n        return realMethod(methodName) ||\r\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n    }\r\n\r\n    var logMethods = [\r\n        \"trace\",\r\n        \"debug\",\r\n        \"info\",\r\n        \"warn\",\r\n        \"error\"\r\n    ];\r\n\r\n    function Logger(name, defaultLevel, factory) {\r\n      var self = this;\r\n      var currentLevel;\r\n      var storageKey = \"loglevel\";\r\n      if (name) {\r\n        storageKey += \":\" + name;\r\n      }\r\n\r\n      function persistLevelIfPossible(levelNum) {\r\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\r\n          // Use localStorage if available\r\n          try {\r\n              window.localStorage[storageKey] = levelName;\r\n              return;\r\n          } catch (ignore) {}\r\n\r\n          // Use session cookie as fallback\r\n          try {\r\n              window.document.cookie =\r\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n          } catch (ignore) {}\r\n      }\r\n\r\n      function getPersistedLevel() {\r\n          var storedLevel;\r\n\r\n          try {\r\n              storedLevel = window.localStorage[storageKey];\r\n          } catch (ignore) {}\r\n\r\n          if (typeof storedLevel === undefinedType) {\r\n              try {\r\n                  var cookie = window.document.cookie;\r\n                  var location = cookie.indexOf(\r\n                      encodeURIComponent(storageKey) + \"=\");\r\n                  if (location) {\r\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n                  }\r\n              } catch (ignore) {}\r\n          }\r\n\r\n          // If the stored level is not valid, treat it as if nothing was stored.\r\n          if (self.levels[storedLevel] === undefined) {\r\n              storedLevel = undefined;\r\n          }\r\n\r\n          return storedLevel;\r\n      }\r\n\r\n      /*\r\n       *\r\n       * Public API\r\n       *\r\n       */\r\n\r\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n          \"ERROR\": 4, \"SILENT\": 5};\r\n\r\n      self.methodFactory = factory || defaultMethodFactory;\r\n\r\n      self.getLevel = function () {\r\n          return currentLevel;\r\n      };\r\n\r\n      self.setLevel = function (level, persist) {\r\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n              level = self.levels[level.toUpperCase()];\r\n          }\r\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n              currentLevel = level;\r\n              if (persist !== false) {  // defaults to true\r\n                  persistLevelIfPossible(level);\r\n              }\r\n              replaceLoggingMethods.call(self, level, name);\r\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n                  return \"No console available for logging\";\r\n              }\r\n          } else {\r\n              throw \"log.setLevel() called with invalid level: \" + level;\r\n          }\r\n      };\r\n\r\n      self.setDefaultLevel = function (level) {\r\n          if (!getPersistedLevel()) {\r\n              self.setLevel(level, false);\r\n          }\r\n      };\r\n\r\n      self.enableAll = function(persist) {\r\n          self.setLevel(self.levels.TRACE, persist);\r\n      };\r\n\r\n      self.disableAll = function(persist) {\r\n          self.setLevel(self.levels.SILENT, persist);\r\n      };\r\n\r\n      // Initialize with the right level\r\n      var initialLevel = getPersistedLevel();\r\n      if (initialLevel == null) {\r\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n      }\r\n      self.setLevel(initialLevel, false);\r\n    }\r\n\r\n    /*\r\n     *\r\n     * Package-level API\r\n     *\r\n     */\r\n\r\n    var defaultLogger = new Logger();\r\n\r\n    var _loggersByName = {};\r\n    defaultLogger.getLogger = function getLogger(name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n        }\r\n\r\n        var logger = _loggersByName[name];\r\n        if (!logger) {\r\n          logger = _loggersByName[name] = new Logger(\r\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n        }\r\n        return logger;\r\n    };\r\n\r\n    // Grab the current global log variable in case of overwrite\r\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n    defaultLogger.noConflict = function() {\r\n        if (typeof window !== undefinedType &&\r\n               window.log === defaultLogger) {\r\n            window.log = _log;\r\n        }\r\n\r\n        return defaultLogger;\r\n    };\r\n\r\n    return defaultLogger;\r\n}));\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = process.env.PROMISE_QUEUE_COVERAGE ?\n    require('./lib-cov') :\n    require('./lib');\n","/* global define, Promise */\n(function (root, factory) {\n    'use strict';\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\n        // CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else {\n        // Browser globals\n        root.Queue = factory();\n    }\n})\n(this, function () {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var LocalPromise = typeof Promise !== 'undefined' ? Promise : function () {\n        return {\n            then: function () {\n                throw new Error('Queue.configure() before use Queue');\n            }\n        };\n    };\n\n    var noop = function () {};\n\n    /**\n     * @param {*} value\n     * @returns {LocalPromise}\n     */\n    var resolveWith = function (value) {\n        if (value && typeof value.then === 'function') {\n            return value;\n        }\n\n        return new LocalPromise(function (resolve) {\n            resolve(value);\n        });\n    };\n\n    /**\n     * It limits concurrently executed promises\n     *\n     * @param {Number} [maxPendingPromises=Infinity] max number of concurrently executed promises\n     * @param {Number} [maxQueuedPromises=Infinity]  max number of queued promises\n     * @constructor\n     *\n     * @example\n     *\n     * var queue = new Queue(1);\n     *\n     * queue.add(function () {\n     *     // resolve of this promise will resume next request\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     *\n     * queue.add(function () {\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * // This request will be paused\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     */\n    function Queue(maxPendingPromises, maxQueuedPromises) {\n        this.pendingPromises = 0;\n        this.maxPendingPromises = typeof maxPendingPromises !== 'undefined' ? maxPendingPromises : Infinity;\n        this.maxQueuedPromises = typeof maxQueuedPromises !== 'undefined' ? maxQueuedPromises : Infinity;\n        this.queue = [];\n    }\n\n    /**\n     * Defines promise promiseFactory\n     * @param {Function} GlobalPromise\n     */\n    Queue.configure = function (GlobalPromise) {\n        LocalPromise = GlobalPromise;\n    };\n\n    /**\n     * @param {Function} promiseGenerator\n     * @return {LocalPromise}\n     */\n    Queue.prototype.add = function (promiseGenerator) {\n        var self = this;\n        return new LocalPromise(function (resolve, reject, notify) {\n            // Do not queue to much promises\n            if (self.queue.length >= self.maxQueuedPromises) {\n                reject(new Error('Queue limit reached'));\n                return;\n            }\n\n            // Add to queue\n            self.queue.push({\n                promiseGenerator: promiseGenerator,\n                resolve: resolve,\n                reject: reject,\n                notify: notify || noop\n            });\n\n            self._dequeue();\n        });\n    };\n\n    /**\n     * Number of simultaneously running promises (which are resolving)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getPendingLength = function () {\n        return this.pendingPromises;\n    };\n\n    /**\n     * Number of queued promises (which are waiting)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getQueueLength = function () {\n        return this.queue.length;\n    };\n\n    /**\n     * @returns {boolean} true if first item removed from queue\n     * @private\n     */\n    Queue.prototype._dequeue = function () {\n        var self = this;\n        if (this.pendingPromises >= this.maxPendingPromises) {\n            return false;\n        }\n\n        // Remove from queue\n        var item = this.queue.shift();\n        if (!item) {\n            return false;\n        }\n\n        try {\n            this.pendingPromises++;\n\n            resolveWith(item.promiseGenerator())\n            // Forward all stuff\n                .then(function (value) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should pass values\n                    item.resolve(value);\n                    self._dequeue();\n                }, function (err) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should not mask errors\n                    item.reject(err);\n                    self._dequeue();\n                }, function (message) {\n                    // It should pass notifications\n                    item.notify(message);\n                });\n        } catch (err) {\n            self.pendingPromises--;\n            item.reject(err);\n            self._dequeue();\n\n        }\n\n        return true;\n    };\n\n    return Queue;\n});\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n","'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000,\n    strictNullHandling: false,\n    plainObjects: false,\n    allowPrototypes: false,\n    allowDots: false\n};\n\ninternals.parseValues = function (str, options) {\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n\n            if (options.strictNullHandling) {\n                obj[Utils.decode(part)] = null;\n            }\n        } else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                obj[key] = [].concat(obj[key]).concat(val);\n            } else {\n                obj[key] = val;\n            }\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseObject = function (chain, val, options) {\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj;\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    } else {\n        obj = options.plainObjects ? Object.create(null) : {};\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        if (\n            !isNaN(index) &&\n            root !== cleanRoot &&\n            String(index) === cleanRoot &&\n            index >= 0 &&\n            (options.parseArrays && index <= options.arrayLimit)\n        ) {\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        } else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseKeys = function (givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^\\.\\[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1])) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1].replace(/\\[|\\]/g, ''))) {\n            if (!options.allowPrototypes) {\n                continue;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : internals.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : internals.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : internals.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n\n    if (\n        str === '' ||\n        str === null ||\n        typeof str === 'undefined'\n    ) {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj, options);\n    }\n\n    return Utils.compact(obj);\n};\n","'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix) {\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix) {\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\ninternals.stringify = function (object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (Utils.isBuffer(obj)) {\n        obj = String(obj);\n    } else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        } else {\n            values = values.concat(internals.stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n    }\n\n    return keys.join(delimiter);\n};\n","'use strict';\n\nvar hexTable = (function () {\n    var array = new Array(256);\n    for (var i = 0; i < 256; ++i) {\n        array[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();\n    }\n\n    return array;\n}());\n\nexports.arrayToObject = function (source, options) {\n    var obj = options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nexports.merge = function (target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            target[source] = true;\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = exports.arrayToObject(target, options);\n    }\n\n\treturn Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (Object.prototype.hasOwnProperty.call(acc, key)) {\n            acc[key] = exports.merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n\t\treturn acc;\n    }, mergeTarget);\n};\n\nexports.decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += (hexTable[0xF0 | (c >> 18)] + hexTable[0x80 | ((c >> 12) & 0x3F)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, references) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n\n    var refs = references || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0; i < obj.length; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (var j = 0; j < keys.length; ++j) {\n        var key = keys[j];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\nexports.isRegExp = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nexports.isBuffer = function (obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","/*\n * Sift 3.x\n *\n * Copryright 2015, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\n(function() {\n\n  'use strict';\n\n  /**\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   */\n\n  function isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n\n  /**\n   */\n\n  function comparable(value) {\n    if (value instanceof Date) {\n      return value.getTime();\n    } else if (value instanceof Array) {\n      return value.map(comparable);\n    } else {\n      return value;\n    }\n  }\n\n  function get(obj, key) {\n    if (obj.get) return obj.get(key);\n    return obj[key];\n  }\n\n  /**\n   */\n\n  function or(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (validator(a, get(b,i))) return true;\n      return false;\n    }\n  }\n\n  /**\n   */\n\n  function and(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (!validator(a, get(b, i))) return false;\n      return true;\n    };\n  }\n\n  function validate(validator, b) {\n    return validator.v(validator.a, b);\n  }\n\n\n  var operator = {\n\n    /**\n     */\n\n    $eq: or(function(a, b) {\n      return a(b);\n    }),\n\n    /**\n     */\n\n    $ne: and(function(a, b) {\n      return !a(b);\n    }),\n\n    /**\n     */\n\n    $or: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return true;\n      return false;\n    },\n\n    /**\n     */\n\n    $gt: or(function(a, b) {\n      return sift.compare(comparable(b), a) > 0;\n    }),\n\n    /**\n     */\n\n    $gte: or(function(a, b) {\n      return sift.compare(comparable(b), a) >= 0;\n    }),\n\n    /**\n     */\n\n    $lt: or(function(a, b) {\n      return sift.compare(comparable(b), a) < 0;\n    }),\n\n    /**\n     */\n\n    $lte: or(function(a, b) {\n      return sift.compare(comparable(b), a) <= 0;\n    }),\n\n    /**\n     */\n\n    $mod: or(function(a, b) {\n      return b % a[0] == a[1];\n    }),\n\n    /**\n     */\n\n    $in: function(a, b) {\n\n      if (b instanceof Array) {\n        for (var i = b.length; i--;) {\n          if (~a.indexOf(comparable(get(b, i)))) return true;\n        }\n      } else {\n        return !!~a.indexOf(comparable(b));\n      }\n\n      return false;\n    },\n\n    /**\n     */\n\n    $nin: function(a, b) {\n      return !operator.$in(a, b);\n    },\n\n    /**\n     */\n\n    $not: function(a, b) {\n      return !validate(a, b);\n    },\n\n    /**\n     */\n\n    $type: function(a, b) {\n      return b != void 0 ? b instanceof a || b.constructor == a : false;\n     },\n\n    /**\n     */\n\n    $all: function(a, b) {\n      if (!b) b = [];\n      for (var i = a.length; i--;) {\n        if (!~comparable(b).indexOf(get(a, i))) return false;\n      }\n      return true;\n    },\n\n    /**\n     */\n\n    $size: function(a, b) {\n      return b ? a === b.length : false;\n    },\n\n    /**\n     */\n\n    $nor: function(a, b) {\n      // todo - this suffice? return !operator.$in(a)\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $and: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (!validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $regex: or(function(a, b) {\n      return typeof b === 'string' && a.test(b);\n    }),\n\n    /**\n     */\n\n    $where: function(a, b) {\n      return a.call(b, b);\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a, b) {\n      if (isArray(b)) return !!~search(b, a);\n      return validate(a, b);\n    },\n\n    /**\n     */\n\n    $exists: function(a, b) {\n      return (b != void 0) === a;\n    }\n  };\n\n  /**\n   */\n\n  var prepare = {\n\n    /**\n     */\n\n    $eq: function(a) {\n\n      if (a instanceof RegExp) {\n        return function(b) {\n          return typeof b === 'string' && a.test(b);\n        };\n      } else if (a instanceof Function) {\n        return a;\n      } else if (isArray(a) && !a.length) {\n        // Special case of a == []\n        return function(b) {\n          return (isArray(b) && !b.length);\n        };\n      } else if (a === null){\n        return function(b){\n          //will match both null and undefined\n          return b == null;\n        }\n      }\n\n      return function(b) {\n        return sift.compare(comparable(b), a) === 0;\n      };\n    },\n\n    /**\n     */\n\n    $ne: function(a) {\n      return prepare.$eq(a);\n    },\n\n    /**\n     */\n\n    $and: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $or: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $nor: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $not: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $regex: function(a, query) {\n      return new RegExp(a, query.$options);\n    },\n\n    /**\n     */\n\n    $where: function(a) {\n      return typeof a === 'string' ? new Function('obj', 'return ' + a) : a;\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $exists: function(a) {\n      return !!a;\n    }\n  };\n\n  /**\n   */\n\n  function search(array, validator) {\n\n    for (var i = 0; i < array.length; i++) {\n      if (validate(validator, get(array, i))) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   */\n\n  function createValidator(a, validate) {\n    return { a: a, v: validate };\n  }\n\n  /**\n   */\n\n  function nestedValidator(a, b) {\n    var values  = [];\n    findValues(b, a.k, 0, values);\n\n    if (values.length === 1) {\n      return validate(a.nv, values[0]);\n    }\n\n    return !!~search(values, a.nv);\n  }\n\n  /**\n   */\n\n  function findValues(current, keypath, index, values) {\n\n    if (index === keypath.length || current == void 0) {\n      values.push(current);\n      return;\n    }\n\n    var k = get(keypath, index);\n\n    // ensure that if current is an array, that the current key\n    // is NOT an array index. This sort of thing needs to work:\n    // sift({'foo.0':42}, [{foo: [42]}]);\n    if (isArray(current) && isNaN(Number(k))) {\n      for (var i = 0, n = current.length; i < n; i++) {\n        findValues(get(current, i), keypath, index, values);\n      }\n    } else {\n      findValues(get(current, k), keypath, index + 1, values);\n    }\n  }\n\n  /**\n   */\n\n  function createNestedValidator(keypath, a) {\n    return { a: { k: keypath, nv: a }, v: nestedValidator };\n  }\n\n  /**\n   * flatten the query\n   */\n\n  function parse(query) {\n    query = comparable(query);\n\n    if (!query || (query.constructor.toString() !== 'Object' &&\n        query.constructor.toString().replace(/\\n/g,'').replace(/ /g, '') !== 'functionObject(){[nativecode]}')) { // cross browser support\n      query = { $eq: query };\n    }\n\n    var validators = [];\n\n    for (var key in query) {\n      var a = query[key];\n\n      if (key === '$options') continue;\n\n      if (operator[key]) {\n        if (prepare[key]) a = prepare[key](a, query);\n        validators.push(createValidator(comparable(a), operator[key]));\n      } else {\n\n        if (key.charCodeAt(0) === 36) {\n          throw new Error('Unknown operation ' + key);\n        }\n\n        validators.push(createNestedValidator(key.split('.'), parse(a)));\n      }\n    }\n\n    return validators.length === 1 ? validators[0] : createValidator(validators, operator.$and);\n  }\n\n  /**\n   */\n\n  function createRootValidator(query, getter) {\n    var validator = parse(query);\n    if (getter) {\n      validator = {\n        a: validator,\n        v: function(a, b) {\n          return validate(a, getter(b));\n        }\n      };\n    }\n    return validator;\n  }\n\n  /**\n   */\n\n  function sift(query, array, getter) {\n\n    if (isFunction(array)) {\n      getter = array;\n      array  = void 0;\n    }\n\n    var validator = createRootValidator(query, getter);\n\n    function filter(b) {\n      return validate(validator, b);\n    }\n\n    if (array) {\n      return array.filter(filter);\n    }\n\n    return filter;\n  }\n\n  /**\n   */\n\n  sift.use = function(plugin) {\n    if (isFunction(plugin)) return plugin(sift);\n    for (var key in plugin) {\n      if (key.charCodeAt(0) === 36) operator[key] = plugin[key];\n    }\n  };\n\n  /**\n   */\n\n  sift.indexOf = function(query, array, getter) {\n    return search(array, createRootValidator(query, getter));\n  };\n\n  /**\n   */\n\n  sift.compare = function(a, b) {\n    if(a===b) return 0;\n    if(typeof a === typeof b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n    }\n  };\n\n  /* istanbul ignore next */\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = sift;\n  }\n\n  if (typeof window !== 'undefined') {\n    window.sift = sift;\n  }\n})();\n","/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n","// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","module.exports={\n  \"name\": \"kinvey-angular-sdk\",\n  \"version\": \"3.0.0-beta.12\",\n  \"description\": \"Kinvey JavaScript SDK for AngularJS applications.\",\n  \"homepage\": \"http://www.kinvey.com\",\n  \"bugs\": {\n    \"url\": \"http://support.kinvey.com\"\n  },\n  \"licenses\": [\n    {\n      \"type\": \"Apache-2.0\",\n      \"url\": \"https://raw.github.com/Kinvey/kinvey-angular-sdk/master/LICENSE\"\n    }\n  ],\n  \"author\": \"Kinvey, Inc.\",\n  \"contributors\": [\n    \"Thomas Conner <thomas@kinvey.com>\"\n  ],\n  \"main\": \"./src/index.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git@github.com:Kinvey/kinvey-angular-sdk\"\n  },\n  \"scripts\": {},\n  \"dependencies\": {\n    \"kinvey-javascript-sdk-core\": \"3.0.0-beta.13\",\n    \"lodash\": \"^4.3.0\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"6.0.0-beta.6\",\n    \"babel-preset-es2015\": \"^6.0.0\",\n    \"babel-preset-stage-2\": \"^6.0.15\",\n    \"babelify\": \"^7.2.0\",\n    \"browserify\": \"^13.0.0\",\n    \"del\": \"^2.0.2\",\n    \"dotenv\": \"^2.0.0\",\n    \"envify\": \"^3.4.0\",\n    \"eslint-config-airbnb\": \"^6.0.0\",\n    \"eslint-plugin-react\": \"^4.2.3\",\n    \"exorcist\": \"^0.4.0\",\n    \"gulp\": \"^3.9.0\",\n    \"gulp-bump\": \"^1.0.0\",\n    \"gulp-eslint\": \"^2.0.0\",\n    \"gulp-git\": \"^1.7.0\",\n    \"gulp-if\": \"^2.0.0\",\n    \"gulp-plumber\": \"^1.0.1\",\n    \"gulp-prompt\": \"^0.1.2\",\n    \"gulp-rename\": \"^1.2.2\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.1\",\n    \"gulp-util\": \"^3.0.6\",\n    \"run-sequence\": \"^1.1.5\",\n    \"semver-regex\": \"^1.0.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"vinyl-transform\": \"^1.0.0\"\n  },\n  \"engines\": {\n    \"node\": \">=4.0\"\n  },\n  \"keywords\": [\n    \"Kinvey\",\n    \"JavaScript\",\n    \"Angular\"\n  ]\n}\n","import packageJSON from '../package.json';\n\n/**\n * @private\n */\nexport class DeviceAdapter {\n  toJSON() {\n    const userAgent = global.navigator.userAgent.toLowerCase();\n    const rChrome = /(chrome)\\/([\\w]+)/;\n    const rFirefox = /(firefox)\\/([\\w.]+)/;\n    const rIE = /(msie) ([\\w.]+)/i;\n    const rOpera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/;\n    const rSafari = /(safari)\\/([\\w.]+)/;\n    const browser = rChrome.exec(userAgent) ||\n                    rFirefox.exec(userAgent) ||\n                    rIE.exec(userAgent) ||\n                    rOpera.exec(userAgent) ||\n                    rSafari.exec(userAgent) ||\n                    [];\n\n    return {\n      environment: 'angular',\n      library: {\n        name: 'angular',\n        version: global.angular.version.full\n      },\n      os: {\n        name: browser[1],\n        version: browser[2]\n      },\n      sdk: {\n        name: packageJSON.name,\n        version: packageJSON.version\n      }\n    };\n  }\n}\n","import { KinveyMiddleware } from 'kinvey-javascript-sdk-core/src/rack/middleware';\nconst $injector = angular.injector(['ng']);\n\nexport class HttpMiddleware extends KinveyMiddleware {\n  constructor() {\n    super('Kinvey Angular Http Middleware');\n    this.$http = $injector.get('$http');\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const promise = this.$http({\n        url: request.url,\n        method: request.method,\n        headers: request.headers,\n        data: request.data\n      }).then(response => {\n        request.response = {\n          statusCode: response.status,\n          headers: response.headers(),\n          data: response.data\n        };\n\n        return request;\n      }).catch(response => {\n        request.response = {\n          statusCode: response.status,\n          headers: response.headers(),\n          data: response.data\n        };\n\n        return request;\n      });\n      return promise;\n    });\n  }\n}\n","import { KinveyProvider } from './provider';\nconst ngKinvey = angular.module('kinvey', []);\nngKinvey.provider('$kinvey', KinveyProvider);\n\nconst Kinvey = {\n  name: 'kinvey'\n};\n\n// Export\nmodule.exports = Kinvey;\n","/**\n * @private\n */\nexport class PopupAdapter {\n  open() {\n    const promise = new Promise((resolve, reject) => {\n      this.popup = global.open(this.url, '_blank', 'toolbar=no,location=no');\n\n      if (this.popup) {\n        this.interval = setInterval(() => {\n          if (this.popup.closed) {\n            this.closeHandler();\n          } else {\n            try {\n              this.loadHandler({\n                url: this.popup.location.href\n              });\n            } catch (e) {\n              // catch any errors due to cross domain issues\n            }\n          }\n        }, 100);\n      } else {\n        return reject(new Error('The popup was blocked.'));\n      }\n\n      return resolve(this);\n    });\n\n    return promise;\n  }\n\n  close() {\n    const promise = new Promise(resolve => {\n      this.popup.close();\n      resolve();\n    });\n    return promise;\n  }\n\n  loadHandler(event) {\n    this.emit('loaded', event.url);\n  }\n\n  clickHandler() {\n    this.close();\n  }\n\n  closeHandler() {\n    clearTimeout(this.interval);\n    this.emit('closed');\n  }\n}\n","import { Kinvey } from 'kinvey-javascript-sdk-core';\nimport { NetworkRack } from 'kinvey-javascript-sdk-core/src/rack/rack';\nimport { SerializeMiddleware } from 'kinvey-javascript-sdk-core/src/rack/middleware/serialize';\nimport { HttpMiddleware } from './http';\nimport { Popup } from 'kinvey-javascript-sdk-core/src/utils/popup';\nimport { PopupAdapter } from './popup';\nimport { Device } from 'kinvey-javascript-sdk-core/src/utils/device';\nimport { DeviceAdapter } from './device';\n\nexport class KinveyProvider {\n  constructor() {\n    // Use Http middleware after the Serialize middleware\n    const networkRack = NetworkRack.sharedInstance();\n    networkRack.useAfter(SerializeMiddleware, new HttpMiddleware());\n\n    // Use Device Adapter\n    Device.use(new DeviceAdapter());\n\n    // Use Popup Adapter\n    Popup.use(new PopupAdapter());\n  }\n\n  init(options = {}) {\n    return Kinvey.init(options);\n  }\n\n  $get() {\n    return Kinvey;\n  }\n}\n"],"sourceRoot":"/source/"}