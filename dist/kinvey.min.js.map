{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/append-query/index.js","kinvey.min.js","node_modules/asap/browser-raw.js","node_modules/babybird/lib/promise-extra.js","node_modules/babybird/lib/promise.js","node_modules/base64-js/lib/b64.js","node_modules/buffer/index.js","node_modules/buffer/node_modules/isarray/index.js","node_modules/events/events.js","node_modules/extend/index.js","node_modules/fast-memory-cache/lib/memory-cache.js","node_modules/hellojs/dist/hello.all.js","node_modules/ieee754/index.js","node_modules/indexeddbshim/dist/indexeddbshim.js","node_modules/inherits/inherits_browser.js","node_modules/is-arguments/index.js","node_modules/kinvey-javascript-sdk-core/src/Log.js","node_modules/kinvey-javascript-sdk-core/src/acl.js","node_modules/kinvey-javascript-sdk-core/src/aggregation.js","node_modules/kinvey-javascript-sdk-core/src/client.js","node_modules/kinvey-javascript-sdk-core/src/command.js","node_modules/kinvey-javascript-sdk-core/src/enums.js","node_modules/kinvey-javascript-sdk-core/src/errors.js","node_modules/kinvey-javascript-sdk-core/src/kinvey.js","node_modules/kinvey-javascript-sdk-core/src/log.js","node_modules/kinvey-javascript-sdk-core/src/metadata.js","node_modules/kinvey-javascript-sdk-core/src/mic.js","node_modules/kinvey-javascript-sdk-core/src/query.js","node_modules/kinvey-javascript-sdk-core/src/rack/asciiTree.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware/cache.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware/parse.js","node_modules/kinvey-javascript-sdk-core/src/rack/middleware/serialize.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/indexeddb.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/localstorage.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/memory.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/adapters/websql.js","node_modules/kinvey-javascript-sdk-core/src/rack/persistence/db.js","node_modules/kinvey-javascript-sdk-core/src/rack/rack.js","node_modules/kinvey-javascript-sdk-core/src/requests/deltafetch.js","node_modules/kinvey-javascript-sdk-core/src/requests/local.js","node_modules/kinvey-javascript-sdk-core/src/requests/network.js","node_modules/kinvey-javascript-sdk-core/src/requests/properties.js","node_modules/kinvey-javascript-sdk-core/src/requests/request.js","node_modules/kinvey-javascript-sdk-core/src/requests/response.js","node_modules/kinvey-javascript-sdk-core/src/stores/cachestore.js","node_modules/kinvey-javascript-sdk-core/src/stores/datastore.js","node_modules/kinvey-javascript-sdk-core/src/stores/filestore.js","node_modules/kinvey-javascript-sdk-core/src/stores/networkstore.js","node_modules/kinvey-javascript-sdk-core/src/stores/syncstore.js","node_modules/kinvey-javascript-sdk-core/src/stores/userstore.js","node_modules/kinvey-javascript-sdk-core/src/sync.js","node_modules/kinvey-javascript-sdk-core/src/user.js","node_modules/kinvey-javascript-sdk-core/src/utils/device.js","node_modules/kinvey-javascript-sdk-core/src/utils/object.js","node_modules/kinvey-javascript-sdk-core/src/utils/popup.js","node_modules/kinvey-javascript-sdk-core/src/utils/string.js","node_modules/local-storage/local-storage.js","node_modules/local-storage/stub.js","node_modules/local-storage/tracking.js","node_modules/lodash/_Hash.js","node_modules/lodash/_Map.js","node_modules/lodash/_MapCache.js","node_modules/lodash/_Reflect.js","node_modules/lodash/_Set.js","node_modules/lodash/_SetCache.js","node_modules/lodash/_Stack.js","node_modules/lodash/_Symbol.js","node_modules/lodash/_Uint8Array.js","node_modules/lodash/_WeakMap.js","node_modules/lodash/_addMapEntry.js","node_modules/lodash/_addSetEntry.js","node_modules/lodash/_apply.js","node_modules/lodash/_arrayAggregator.js","node_modules/lodash/_arrayEach.js","node_modules/lodash/_arrayIncludes.js","node_modules/lodash/_arrayIncludesWith.js","node_modules/lodash/_arrayMap.js","node_modules/lodash/_arrayPush.js","node_modules/lodash/_arrayReduce.js","node_modules/lodash/_arraySome.js","node_modules/lodash/_assignMergeValue.js","node_modules/lodash/_assignValue.js","node_modules/lodash/_assocDelete.js","node_modules/lodash/_assocGet.js","node_modules/lodash/_assocHas.js","node_modules/lodash/_assocIndexOf.js","node_modules/lodash/_assocSet.js","node_modules/lodash/_baseAggregator.js","node_modules/lodash/_baseAssign.js","node_modules/lodash/_baseCastFunction.js","node_modules/lodash/_baseCastPath.js","node_modules/lodash/_baseClone.js","node_modules/lodash/_baseCreate.js","node_modules/lodash/_baseDifference.js","node_modules/lodash/_baseEach.js","node_modules/lodash/_baseFind.js","node_modules/lodash/_baseFindIndex.js","node_modules/lodash/_baseFlatten.js","node_modules/lodash/_baseFor.js","node_modules/lodash/_baseForOwn.js","node_modules/lodash/_baseGet.js","node_modules/lodash/_baseHas.js","node_modules/lodash/_baseHasIn.js","node_modules/lodash/_baseIndexOf.js","node_modules/lodash/_baseIsEqual.js","node_modules/lodash/_baseIsEqualDeep.js","node_modules/lodash/_baseIsMatch.js","node_modules/lodash/_baseIteratee.js","node_modules/lodash/_baseKeys.js","node_modules/lodash/_baseKeysIn.js","node_modules/lodash/_baseMap.js","node_modules/lodash/_baseMatches.js","node_modules/lodash/_baseMatchesProperty.js","node_modules/lodash/_baseMerge.js","node_modules/lodash/_baseMergeDeep.js","node_modules/lodash/_baseProperty.js","node_modules/lodash/_basePropertyDeep.js","node_modules/lodash/_baseReduce.js","node_modules/lodash/_baseSlice.js","node_modules/lodash/_baseTimes.js","node_modules/lodash/_baseToPairs.js","node_modules/lodash/_baseUnary.js","node_modules/lodash/_baseValues.js","node_modules/lodash/_cacheHas.js","node_modules/lodash/_cachePush.js","node_modules/lodash/_checkGlobal.js","node_modules/lodash/_cloneArrayBuffer.js","node_modules/lodash/_cloneBuffer.js","node_modules/lodash/_cloneMap.js","node_modules/lodash/_cloneRegExp.js","node_modules/lodash/_cloneSet.js","node_modules/lodash/_cloneSymbol.js","node_modules/lodash/_cloneTypedArray.js","node_modules/lodash/_copyArray.js","node_modules/lodash/_copyObject.js","node_modules/lodash/_copyObjectWith.js","node_modules/lodash/_copySymbols.js","node_modules/lodash/_createAggregator.js","node_modules/lodash/_createAssigner.js","node_modules/lodash/_createBaseEach.js","node_modules/lodash/_createBaseFor.js","node_modules/lodash/_equalArrays.js","node_modules/lodash/_equalByTag.js","node_modules/lodash/_equalObjects.js","node_modules/lodash/_getLength.js","node_modules/lodash/_getMatchData.js","node_modules/lodash/_getNative.js","node_modules/lodash/_getSymbols.js","node_modules/lodash/_getTag.js","node_modules/lodash/_hasPath.js","node_modules/lodash/_hashDelete.js","node_modules/lodash/_hashGet.js","node_modules/lodash/_hashHas.js","node_modules/lodash/_hashSet.js","node_modules/lodash/_indexKeys.js","node_modules/lodash/_indexOfNaN.js","node_modules/lodash/_initCloneArray.js","node_modules/lodash/_initCloneByTag.js","node_modules/lodash/_initCloneObject.js","node_modules/lodash/_isHostObject.js","node_modules/lodash/_isIndex.js","node_modules/lodash/_isIterateeCall.js","node_modules/lodash/_isKey.js","node_modules/lodash/_isKeyable.js","node_modules/lodash/_isPrototype.js","node_modules/lodash/_isStrictComparable.js","node_modules/lodash/_iteratorToArray.js","node_modules/lodash/_mapClear.js","node_modules/lodash/_mapDelete.js","node_modules/lodash/_mapGet.js","node_modules/lodash/_mapHas.js","node_modules/lodash/_mapSet.js","node_modules/lodash/_mapToArray.js","node_modules/lodash/_nativeCreate.js","node_modules/lodash/_parent.js","node_modules/lodash/_root.js","node_modules/lodash/_setToArray.js","node_modules/lodash/_stackClear.js","node_modules/lodash/_stackDelete.js","node_modules/lodash/_stackGet.js","node_modules/lodash/_stackHas.js","node_modules/lodash/_stackSet.js","node_modules/lodash/_stringToPath.js","node_modules/lodash/assign.js","node_modules/lodash/constant.js","node_modules/lodash/differenceBy.js","node_modules/lodash/eq.js","node_modules/lodash/find.js","node_modules/lodash/findIndex.js","node_modules/lodash/forEach.js","node_modules/lodash/get.js","node_modules/lodash/hasIn.js","node_modules/lodash/identity.js","node_modules/lodash/isArguments.js","node_modules/lodash/isArray.js","node_modules/lodash/isArrayLike.js","node_modules/lodash/isArrayLikeObject.js","node_modules/lodash/isBuffer.js","node_modules/lodash/isEmpty.js","node_modules/lodash/isFunction.js","node_modules/lodash/isLength.js","node_modules/lodash/isNative.js","node_modules/lodash/isNumber.js","node_modules/lodash/isObject.js","node_modules/lodash/isObjectLike.js","node_modules/lodash/isPlainObject.js","node_modules/lodash/isRegExp.js","node_modules/lodash/isString.js","node_modules/lodash/isSymbol.js","node_modules/lodash/isTypedArray.js","node_modules/lodash/keyBy.js","node_modules/lodash/keys.js","node_modules/lodash/keysIn.js","node_modules/lodash/last.js","node_modules/lodash/map.js","node_modules/lodash/merge.js","node_modules/lodash/property.js","node_modules/lodash/reduce.js","node_modules/lodash/rest.js","node_modules/lodash/result.js","node_modules/lodash/toInteger.js","node_modules/lodash/toNumber.js","node_modules/lodash/toPairs.js","node_modules/lodash/toPlainObject.js","node_modules/lodash/toString.js","node_modules/lodash/values.js","node_modules/loglevel/lib/loglevel.js","node_modules/path-browserify/index.js","node_modules/process/browser.js","node_modules/promise-queue/index.js","node_modules/promise-queue/lib/index.js","node_modules/punycode/punycode.js","node_modules/qs/lib/index.js","node_modules/qs/lib/parse.js","node_modules/qs/lib/stringify.js","node_modules/qs/lib/utils.js","node_modules/querystring-es3/decode.js","node_modules/querystring-es3/encode.js","node_modules/querystring-es3/index.js","node_modules/sift/sift.js","node_modules/uid/index.js","node_modules/url-pattern/lib/url-pattern.js","node_modules/url/url.js","node_modules/url/util.js","node_modules/util/support/isBufferBrowser.js","node_modules/util/util.js","package.json","src/device.js","src/http.js","src/index.js","src/popup.js","src/provider.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Kinvey","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"serialize","obj","prefix","str","useArraySyntax","Array","isArray","Object","keys","forEach","prop","key","query","val","encodeURIComponent","push","join","querystring","extend","url","uri","q","parts","parse","parsedQuery","search","format",2,"rawAsap","task","queue","requestFlush","flushing","flush","index","currentIndex","capacity","scan","newLength","makeRequestCallFromMutationObserver","callback","toggle","observer","BrowserMutationObserver","node","document","createTextNode","observe","characterData","data","makeRequestCallFromTimer","handleTimer","clearTimeout","timeoutHandle","clearInterval","intervalHandle","setTimeout","setInterval","MutationObserver","WebKitMutationObserver",3,"tryCatch0r","fn","receiver","errorObj","tryCatch1","arg1","tryCatch2","arg2","tryCatch3","arg3","isArguments","_call","Function","bind","_forEach","prototype","_toString","toString","_floor","Math","floor","_abs","abs","Symbol","symbolIterator","iterator","defineProperties","object","map","name","method","defineProperty","configurable","enumerable","writable","value","TypeIsObject","x","ToObject","optMessage","TypeError","IsCallable","ToNumber","numberIsNaN","Number","isNaN","numberIsFinite","isFinite","ToInteger","number","ToLength","len","MAX_SAFE_INTEGER","ArrayIterator","array","next","retval","done","DEFAULT_ARRAY_ITERATOR","GetIterator","detectDefault","itFn","GetMethod","it","p","func","IteratorComplete","iterResult","IteratorClose","completionIsThrow","returnMethod","innerResult","innerException","IteratorNext0","result","IteratorStep","Promise","PromiseCapability","makeCapability","makeCapabilityFast","promiseReactionResolve","promiseReactionReject","optimizePromiseThen","symbolSpecies","getPromiseSpecies","C","S","_promiseAllResolver","values","capability","remaining","alreadyCalled","count","performPromiseAll","iteratorRecord","resultCapability","nextValue","rejectElement","constructor","reject","nextPromise","resolve","resolveElement","promise","performPromiseAllArray","performPromiseRace","all","iterable","ex","race","is-arguments",4,"arg","tryCatch2r","tryCatch1n","Fn","TypeIsNotObject","SpeciesConstructor","O","defaultConstructor","IsConstructor","IsPromise","undefined","_promise_state","resolver","thenFastPath","FAST_PATH_MAKE_CAP","FAST_PATH_NONE","freeCapabilityList","pop","strictConstructors","hasOwnProperty","dontReuse","thenFastPathResolver","wasFastPath","FAST_PATH_CTOR_BAILED","free","getPromiseAndFree","promiseCheckAndResolve","PROMISE_PENDING","resolvePromise","promiseCheckAndReject","rejectPromise","promiseCapability","handlerResult","noFree","promiseReactionJob","handler","argument","PROMISE_FAKE_CAPABILITY","PromiseReactionJobTask","triggerPromiseReaction","freePromiseReactionJobTasks","asap","fulfillPromise","_promise_fulfillReactions0","_promise_reactionCapability0","_promise_rejectReactions0","idx","_promise_result","PROMISE_FULFILLED","reason","PROMISE_REJECTED","getThen","then","PromiseResolveThenableJobTask","resolution","triggerPromiseResolveThenableJob","freePromiseResolveThenableJobTasks","promiseResolveThenableJob","thenable","alreadyResolved","promisePrototypeThen","fakeRetvalFromThen","onFulfilled","onReject","supportSpecies","dontReuseResolvers","useES2015Class","species","PROMISE_IDENTITY","v","PROMISE_THROWER","PROMISE_RESOLVING","PromiseConstruct","makeClass","eval","Promise$prototype","catch","onRejected","fakeRetval","then0","get","./promise-extra.js","asap/raw",5,"init","lookup","revLookup","charCodeAt","toByteArray","b64","j","tmp","placeHolders","arr","Arr","L","tripletToBase64","num","encodeChunk","uint8","start","end","output","fromByteArray","extraBytes","maxChunkLength","len2","Uint8Array",6,"typedArraySupport","foo","subarray","byteLength","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","parent","fromNumber","fromString","arguments","fromObject","that","allocate","checked","string","encoding","write","isBuffer","fromBuffer","fromArray","ArrayBuffer","buffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","copy","__proto__","type","fromPool","poolSize","rootParent","RangeError","SlowBuffer","subject","buf","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","Infinity","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","offset","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","slice","min","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","String","fromCharCode","apply","ret","out","toHex","bytes","checkOffset","ext","checkInt","max","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","replace","INVALID_BASE64_RE","trim","units","leadSurrogate","byteArray","c","hi","lo","src","dst","INSPECT_MAX_BYTES","_augment","b","_isBuffer","compare","y","isEncoding","concat","list","pos","item","equals","inspect","match","indexOf","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt16BE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","target","targetStart","set","fill","base64-js","isarray",7,8,"EventEmitter","_events","_maxListeners","isFunction","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","emit","er","args","listeners","error","addListener","listener","m","newListener","warned","console","trace","on","once","removeListener","fired","position","splice","removeAllListeners","listenerCount","evlistener","emitter",9,"hasOwn","isPlainObject","nodeType","has_own_constructor","has_is_property_of_method","options","copyIsArray","clone","deep",10,"MemoryCache","_cache","createMap","_timeouts","create","expireTime","clear",11,"process","F","k","fun","thisArg","filter","location","assign","_this","D","hello","use","utils","settings","redirect_uri","href","split","response_type","display","state","oauth_proxy","timeout","popup","resizable","scrollbars","width","height","scope","scope_map","basic","default_service","force","page_uri","services","service","Event","id","login","encodeFunction","filterEmpty","network","qs","diffKey","opts","merge","proxy","provider","callbackId","globalEvent","JSON","store","fulfill","authResponse","redirectUri","responseType","oauth","test","grant","client_id","session","SCOPE_SPLIT","scopeMap","unique","scope_delim","access_token","expires","Date","getTime","diff","unchanged","version","refresh_token","stringify","auth","iframe","timer","closed","response","logout","_opts","message","getAuthResponse","events","params","formatFunction","reg","RegExp","isEmpty","param","decodeURIComponent","json","localStorage","getItem","setItem","removeItem","cache","cookie","_m","days","append","attr","createElement","innerHTML","setAttribute","body","appendChild","getElementsByTagName","style","left","bottom","unshift","path","URL","cloneNode","STATE_PENDING","STATE_FULFILLED","STATE_REJECTED","api","executor","fulfillValue","rejectReason","deliver","curr","execute","execute_handlers","handlers","nextTick","setImmediate","cb","resolved","separator","findEvents","evt","off","emitAfter","guid","random","documentElement","dualScreenTop","screenTop","screen","top","innerHeight","clientHeight","dualScreenLeft","screenLeft","innerWidth","clientWidth","optionsArray","navigator","userAgent","open","focus","responseHandler","authCallback","closeWindow","frameElement","removeChild","close","addEventListener","oauth_token","hash","expires_in","error_message","error_description","oauth_redirect","oldSessions","expired","CURRENT_TIME","eventName","oldSess","refresh","getPath","defaults","base","request","headers","formatResponse","statusCode","success","wrap","paging","actions","delete","xhr","jsonp","form","formatUrl","sign","proxy_response_type","suppress_response_codes","hasBinary","cors","request_cors","onprogress","upload","onuploadprogress","_query","callbackID","post","XMLHttpRequest","domInstance","toUpperCase","Element","tagName","isBinary","FormData","headersToJSON","exec","binary","onload","responseText","_e","status","statusText","getAllResponseHeaders","onerror","File","Blob","HTMLInputElement","files","overrideMimeType","setRequestHeader","send","operaFix","bool","head","script","async","onreadystatechange","readyState","text","newform","doc","reenableAfterSubmit","win","callbackonload","elements","disabled","enctype","input","el","inputs","NodeList","parentNode","innerText","getAttribute","submit","ee","FileList","toBlob","dataURI","atob","dataToJSON","w","nodeListToJSON","file","nodelist","opener","chrome","identity","launchWebAuthFlow","_open","interactive","ref","responseUrl","_popup","storage","local","cordova","hidden","utilPopup","redirectUriOrigin","origin","protocol","hostname","executeScript","formatError","formatFile","req","root","thumb_exists","thumbnail","is_dir","mime_type","downloadLink","OAuth1Settings","token","OAuth2Settings","dropbox","redirect","me","me/files","me/folder","me/folders","default","fileName","del","uid","display_name","first_name","shift","last_name","contents","is_deleted","formatUser","picture","formatFriends","d","pictures","images","sort","cover_photo","photos","can_upload","upload_location","facebook","email","share","birthday","videos","friends","publish_files","publish","offline_access","auth_type","me/friends","me/following","me/followers","me/share","me/like","me/albums","me/album","me/photos","me/photo","friend/albums","friend/photos","getApiUrl","extraParams","skipNetwork","flickr","withUser","user_nsid","userId","user_id","getBuddyIcon","profile","size","nsid","iconserver","iconfarm","createPhotoUrl","farm","server","secret","stat","formatPhotos","photoset","checkResponse","photo","title","createPictures","source","NO_LIMIT","sizes","contacts","contact","realname","username","page","pages","per_page","photoset_id","_content","jsoncallback","meta","errorDetail","suffix","firstName","lastName","formatRequest","foursquare","user","items","avatar_url","Link","github","toInt","formatFeed","formatItem","thumbnailLink","mimeType","formatImage","image","feed","entry","formatEntry","gEntry","formatPerson","displayName","$t","gd$email","address","emails","updated","link","pic","gd$etag","category","_a","group","media$group","media$content","mediaContent","mediaThumbnail","media$thumbnail","description","summary","updated_time","created_time","published","rel","scheme","term","openSearch$itemsPerPage","openSearch$startIndex","total","openSearch$totalResults","nextPageToken","Multipart","addFile","fr","FileReader","addContent","btoa","lineBreak","readAsBinaryString","content","counter","ready","boundary","delim","dataUri","onready","uploadDrive","parents","contactsUrl","google","create_event","access_type","approval_prompt","me/contacts","me/feed","me/file","put","patch","family_name","familyName","given_name","givenName","error_type","formatFriend","profile_picture","full_name","pagination","next_url","instagram","caption","standard_resolution","errorCode","Message","ErrorCode","getErrorCode","details","Authorization","joinme","scheduler","meetings","meetings/info","meetings/start/adhoc","meetings/start/scheduled","meetingId","meetings/schedule","meetings/update","meetings/delete","fullName","formattedName","pictureUrl","emailAddress","_count","_start","_total","empty","formatQuery","oauth2_access_token","like","linkedin","visibility","attribution","comment","submitted-url","submitted-image-url","headline","next_href","soundcloud","profile_image_url_https","profile_image_url","users","errors","next_cursor_str","arrayToDataResponse","twitter","photo_max","error_code","error_msg","vk","fields","formatDefault","formatAlbums","preferred","is_friend","windows","Content-Type","results","nickname","handle","imageUrl","field","yql","yahoo","_process",12,"isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","log","LN2",13,"idbModules","util","cleanInterface","testObject","context","event","StringList","_items","contains","quote","polyfill","compoundKeyPolyfill","cmp","IDBFactory","createObjectStore","IDBDatabase","createIndex","IDBObjectStore","add","indexGet","IDBIndex","indexGetKey","getKey","indexCursor","openCursor","indexKeyCursor","openKeyCursor","storeGet","storeDelete","storeCursor","storeKeyCursor","bound","IDBKeyRange","upperBound","lowerBound","only","requestResult","getOwnPropertyDescriptor","IDBRequest","cursorPrimaryKey","IDBCursor","cursorKey","cursorValue","IDBCursorWithValue","key1","key2","encodeCompoundKey","keyPath","encodeCompoundKeyPath","__insertData","isCompoundKey","setInlineCompoundKey","indexNames","lower","upper","lowerOpen","upperOpen","removeInlineCompoundKey","IDBTransaction","VERSION_CHANGE","compoundKeysPropertyName","propertySeparator","keySeparator","decodeCompoundKeyPath","propertySeparatorRegExp","encodedKeyPath","Key","getValue","encodedKey","decodeCompoundKey","validate","encode","validateKeyLength","decode","createDOMException","Sca","decycle","checkForCompletion","queuedObjects","returnCallback","derezObj","readBlobAsDataURL","blob","reader","onloadend","loadedEvent","dataURL","blobtype","updateEncodedBlob","readAsDataURL","encoded","derez","nu","Boolean","objects","$ref","paths","$type","$enc","retrocycle","$","dataURLToBlob","contentType","raw","BASE64_MARKER","rawLength","uInt8Array","rez","px","parseFloat","finishEncode","padBase32Exponent","padBase32Mantissa","zeros","flipBase32","flipped","pow32","mantissa","exponent","whole","fraction","expansion","roundToPrecision","precision","toPrecision","negate","getType","types","arrayValue","setValue","props","isMultiEntryMatch","encodedEntry","keyType","collations","substring","isKeyInRange","range","lowerMatch","upperMatch","__lower","__upper","findMultiEntryMatches","keyEntry","matches","nested","signValues","date","key32","decimalIndex","significantDigitIndex","inArray","encodedItem","decoded","decodedItem","createNativeEvent","debug","ShimEvent","bubbles","cancelable","eventPhase","timeStamp","valueOf","useNativeEvent","IDBVersionChangeEvent","createEvent","createNativeDOMException","DOMException","createNativeDOMError","DOMError","createError","logError","DEBUG","findError","err","useNativeDOMException","useNativeDOMError","createDOMError","onsuccess","transaction","IDBOpenDBRequest","onblocked","onupgradeneeded","direction","keyColumnName","valueColumnName","__assertActive","primaryKey","__store","__range","__req","__keyColumnName","__valueColumnName","__valueDecoder","__count","__offset","__lastKeyContinued","__multiEntryIndex","multiEntry","__unique","__find","__findMultiEntry","__findBasic","tx","recordsToLoad","quotedKeyColumnName","sql","sqlValues","__prefetchedData","__prefetchedIndex","executeSql","rows","__decode","__multiEntryOffset","rowItem","rowKey","matchingKey","reverse","__onsuccess","__matchedKeys","recordsToPreloadOnContinue","cursorPreloadPackSize","__pushToQueue","advance","update","valueToUpdate","__assertWritable","__addToTransactionQueue","__indexes","indexKey","rowsAffected","indexProperties","objectStore","columnName","optionalParams","__deleted","__clone","__createIndex","columnExists","failure","applyIndex","__updateIndexList","addIndexEntry","__deleteIndex","indexList","deleted","__fetchIndexData","opType","hasKey","recordCount","record","row","storeProperties","autoIncrement","autoInc","indexName","newStore","__createObjectStore","db","__objectStores","objectStoreNames","__versionTransaction","__assertVersionChange","__deleteObjectStore","__validateKey","__deriveKey","getNextAutoIncKey","seq","paramMap","sqlStart","sqlEnd","__createRequest","optionalParameters","deleteIndex","storeNames","mode","__id","uniqueID","__active","__running","__errored","__requests","__storeNames","onabort","oncomplete","__executeRequests","transactionError","abort","transactionFinished","__db","executeNextRequest","op","__tx","READ_ONLY","objectStoreName","READ_WRITE","__closed","onversionchange","storeName","createOptions","deleteObjectStore","createSysDB","sysDbCreateError","sysdb","openDatabase","DEFAULT_DB_SIZE","modules","dbCreateError","calledDbCreateError","openDB","oldVersion","systx","newVersion","__oncomplete","deleteDatabase","dbError","calledDBError","deleteFromDbVersions","tables","deleteTables","encodedKey1","encodedKey2","decodedKey1","decodedKey2","warn","shimIndexedDB","shim","__useShim","indexedDB","__debug","webkitIndexedDB","mozIndexedDB","oIndexedDB","msIndexedDB","poorIndexedDbSupport","webkitIDBDatabase","webkitIDBTransaction","webkitIDBCursor","webkitIDBKeyRange",14,"ctor","superCtor","super_","TempCtor",15,"toStr","isStandardArguments","isLegacyArguments","callee","supportsStandardArguments",16,"_interopRequireDefault","__esModule","Log","_loglevel","_loglevel2","originalFactory","methodFactory","methodName","logLevel","loggerName","rawMethod","setLevel","levels","ERROR","loglevel",17,"_classCallCheck","instance","Constructor","Acl","_createClass","descriptor","protoProps","staticProps","_errors","_isPlainObject","_isPlainObject2","aclAttribute","env","KINVEY_ACL_ATTRIBUTE","entity","KinveyError","acl","groups","gr","gw","creator","./errors","lodash/isPlainObject",18,"Aggregation","_query2","_result","_result2","_assign","_assign2","_forEach2","_isObject","_isObject2","_isString","_isString2","_isFunction","_isFunction2","initial","reduce","_initial","_key","_reduce","objectOrKey","Query","entities","aggregation","entityNames","attributes","segments","segment","condition","by","./query","lodash/assign","lodash/forEach","lodash/isFunction","lodash/isObject","lodash/isString","lodash/result",19,"Client","_localStorage","_localStorage2","_url","_url2","activeUserCollectionName","KINVEY_ACTIVE_USER_COLLECTION_NAME","activeSocialIdentityTokenCollectionName","KINVEY_ACTIVE_SOCIAL_IDENTITY_TOKEN_COLLECTION_NAME","_sharedInstance","KINVEY_API_PROTOCOL","host","KINVEY_API_HOST","appKey","appId","appSecret","masterSecret","hostnameParsed","encryptionKey","remove","socialIdentity","client","local-storage",20,"Command","_client","_enums","rpcNamespace","KINVEY_RPC_NAMESPACE","command","sharedInstance","executeNetworkRequest","HttpMethod","POST","pathname","properties","defaultAuth","./client","./enums",21,"AuthorizationGrant","AuthorizationCodeLoginPage","AuthorizationCodeAPI","freeze","AuthType","All","App","Basic","Default","Master","None","Session","DataStoreType","Sync","Cache","Network","User","GET","PATCH","PUT","DELETE","SocialIdentity","Facebook","Google","LinkedIn","StatusCode","Ok","Created","RedirectTemporarily","RedirectPermanetly","NotFound","ServerError",22,"NoResponseError","NotFoundError","NetworkConnectionError","InvalidCredentialsError","InsufficientCredentialsError","ActiveUserError","_util","_util2","SubType","captureStackTrace","inherits",23,"_babybird","_babybird2","_aggregation","_command","_log","_metadata","_datastore","_sync","_user","_network","appdataNamespace","KINVEY_DATASTORE_NAMESPACE","NetworkRequest","authType","DataStore","Metadata","./aggregation","./command","./log","./metadata","./requests/network","./stores/datastore","./sync","./user","babybird",24,25,"kmdAttribute","KINVEY_KMD_ATTRIBUTE","kmd","ect","emailVerification","lmt","lastModified","authtoken",26,"MobileIdentityConnect","_path","_path2","authPathname","KINVEY_MIC_AUTH_PATHNAME","tokenPathname","KINVEY_MIC_TOKEN_PATHNAME","KINVEY_MIC_PROTOCOL","KINVEY_MIC_HOST","authorizationGrant","clientId","requestCodeWithPopup","requestTempLoginUrl","requestCodeWithUrl","requestToken","temp_login_uri","_this2","Popup","loadHandler","loadedUrl","redirected","closeHandler","loginUrl","password","followRedirect","getHeader","grant_type","automaticallyRefreshAuthToken","KINVEY_MIC_IDENTITY","./utils/popup",27,"_typeof","_object","_sift","_sift2","_isArray","_isArray2","_isNumber","_isNumber2","_isRegExp","_isRegExp2","skip","_fields","_filter","_sort","_limit","_skip","addFilter","$and","nor","or","flag","divisor","remainder","regExp","ignoreCase","flags","multiline","extended","dotMatchesAll","coord","maxDistance","bottomLeftCoord","upperRightCoord","coords","$box","$polygon","_size","_parent","ascending","descending","operator","queries","currentQuery","members","member","_this3","_ret","aField","bField","modifier","./utils/object","lodash/isArray","lodash/isNumber","lodash/isRegExp","sift",28,"compose","level","c2","c0","c3","c1","AsciiTree","generate","tree","nodes","last","subTree",29,"_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","KinveyMiddleware","Middleware","_asciiTree","generateTree","_Middleware","getPrototypeOf","./asciiTree",30,"CacheMiddleware","_get","property","desc","getter","_middleware","_db","_urlPattern","_urlPattern2","_KinveyMiddleware","adapters","DBAdapter","IndexedDB","WebSQL","LocalStorage","Memory","pattern","_ref","collection","DB","findById","find","save","removeById","../../enums","../middleware","../persistence/db","url-pattern",31,"ParseMiddleware",32,"SerializeMiddleware",33,"dbCache","TransactionMode","ReadWrite","ReadOnly","inTransaction","containsCollection","txn","openTransaction","pending","cursor","_this4","singular","_this5","../../../errors","indexeddbshim",34,"_keyBy","_keyBy2","_merge","_merge2","_values","_values2","idAttribute","KINVEY_ID_ATTRIBUTE","existingEntities","existingEntitiesById","entitiesById","existingEntityIds","existingEntity","lodash/keyBy","lodash/merge","lodash/values",35,"_promiseQueue","_promiseQueue2","_fastMemoryCache","_fastMemoryCache2","_find","_find2","caches","configure","entityIds","fast-memory-cache","lodash/find","promise-queue",36,"_map","_map2","masterCollectionName","webSQL","parameters","escapedCollection","isMaster","isMulti","writeTxn","readTransaction","responses","_","resultSet","rowCount","lodash/map",37,"_indexeddb","_localstorage","_memory","_websql","_reduce2","adapter","isSupported","chars","objectId","objectIdPrefix","generateObjectId","promises","../../aggregation","../../errors","../../log","../../query","./adapters/indexeddb","./adapters/localstorage","./adapters/memory","./adapters/websql","lodash/reduce",38,"NetworkRack","CacheRack","KinveyRack","Rack","_parse","_serialize","_findIndex","_findIndex2","sharedCacheRackInstance","sharedNetworkRackInstance","middlewares","canceled","middleware","middlewareClass","existingMiddleware","_Rack","_KinveyRack","_KinveyRack2","./middleware","./middleware/cache","./middleware/parse","./middleware/serialize","lodash/findIndex",39,"DeltaFetchRequest","_request","_local","_response","_query3","lmtAttribute","KINVEY_LMT_ATTRIBUTE","maxIdsPerRequest","KINVEY_MAX_IDS","_KinveyRequest","localRequest","LocalRequest","Response","cacheResponse","cacheDocuments","networkRequest","networkResponse","networkDocuments","deltaSet","cacheDocumentIds","cacheDocument","networkDocument","deltaSetIds","ids","_networkRequest","_promise","initialResponse","isSuccess","addHeaders","KinveyRequest","../enums","../errors","../query","./local","./network","./request","./response",40,"_rack","rack","cancel","../rack/rack",41,"socialIdentityAttribute","KINVEY_SOCIAL_IDENTITY_ATTRIBUTE","micIdentity","usersNamespace","KINVEY_USERS_NAMESPACE","activeSocialIdentity","getActiveSocialIdentity","audience","activeUserData","getActiveUserData","setActiveUserData","setActiveSocialIdentity",42,"RequestProperties","appVersionKey","addProperties","clearProperty","_properties","getProperty","major","minor","appVersion","setProperty",43,"Request","_set","setter","_device","_string","_qs","_qs2","_appendQuery","_appendQuery2","_isEmpty","_isEmpty2","Auth","app","master","none","credentials","KINVEY_DEFAULT_TIMEOUT","executing","Accept","accept","header","setHeader","names","_method","_data","contentTypeHeader","removeHeader","_Request","KINVEY_API_VERSION","device","Device","skipBL","authorizationHeader","addHeader","customProperties","customPropertiesHeader","customPropertiesByteCount","byteCount","customPropertiesMaxBytesAllowed","KINVEY_MAX_HEADER_BYTES","queryString","authInfo","error2","../client","../utils/device","../utils/string","./properties","append-query","lodash/isEmpty",44,45,"CacheStore","_networkstore","_deltafetch","_differenceBy","_differenceBy2","syncCollectionName","KINVEY_SYNC_COLLECTION_NAME","_NetworkStore","ttl","useDeltaFetch","_pathname","networkPromise","syncCount","networkEntities","removedEntities","removeEntityIds","removeQuery","info","_this6","_this7","_this8","_this9","_syncPathname","metadata","saved","isLocalEntity","originalId","_id","removed","savedResults","removedResults","savedResult","removedResult","_this10","_this11","pushResponse","pull","pullResponse","_this12","syncData","NetworkStore","../aggregation","../log","../requests/deltafetch","../requests/local","../requests/network","../requests/response","../utils/object","./networkstore","lodash/differenceBy",46,"_syncstore","_userstore","_filestore","_cachestore","SyncStore","UserStore","FileStore","./cachestore","./filestore","./syncstore","./userstore",47,"filesNamespace","KINVEY_FILES_NAMESPACE","download","tls","ttl_in_seconds","downloadByUrl","_downloadURL","stream","_filename","public","_public","X-Kinvey-Content-Type","uploadUrl","_uploadURL","_requiredHeaders","_expiresAt","clearHeaders","uploadResponse",48,"_Log","../Log",49,"_CacheStore",50,"_identity","usernameExists",51,"enabled","KINVEY_SYNC_DEFAULT_STATE","isEnabled","enable","disable","syncStore","getInstance","greaterThan","sync",52,"_acl","_mic","usernameAttribute","KINVEY_USERNAME_ATTRIBUTE","emailAttribute","KINVEY_EMAIL_ATTRIBUTE","supportedIdentities","setActiveUser","activeUser","getActiveUser","usernameOrData","_socialIdentity","isActiveUser","isActive","setAsActiveUser","mic","connect","collectionName","isIdentitySupported","equalTo","helloSettings","signup","tokens","userStore","loginWithIdentity","loginWithMIC","connectWithIdentity","signupWithIdentity","./acl","./mic","hellojs",53,"./object",54,"dotProperty","current","isDefined","nsInterface",55,"_EventEmitter",56,"stringLength","partCount","encodeURI","randomString","_uid2","_uid",57,"accessor","ls","stub","tracking","./stub","./tracking",58,"ms","found",59,"listen","change","attachEvent","onstorage","fire","newValue","oldValue","listening","ns",60,"Hash","nativeCreate","objectProto","./_nativeCreate",61,"getNative","Map","./_getNative","./_root",62,"MapCache","mapClear","mapDelete","mapGet","mapHas","mapSet","has","./_mapClear","./_mapDelete","./_mapGet","./_mapHas","./_mapSet",63,"Reflect",64,"Set",65,"SetCache","__data__","cachePush","./_MapCache","./_cachePush",66,"Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","./_stackClear","./_stackDelete","./_stackGet","./_stackHas","./_stackSet",67,68,69,"WeakMap",70,"addMapEntry","pair",71,"addSetEntry",72,73,"arrayAggregator","iteratee","accumulator",74,"arrayEach",75,"arrayIncludes","baseIndexOf","./_baseIndexOf",76,"arrayIncludesWith","comparator",77,"arrayMap",78,"arrayPush",79,"arrayReduce","initAccum",80,"arraySome","predicate",81,"assignMergeValue","eq","./eq",82,"assignValue","objValue",83,"assocDelete","assocIndexOf","lastIndex","arrayProto","./_assocIndexOf",84,"assocGet",85,"assocHas",86,87,"assocSet",88,"baseAggregator","baseEach","./_baseEach",89,"baseAssign","copyObject","./_copyObject","./keys",90,"baseCastFunction","./identity",91,"baseCastPath","stringToPath","./_stringToPath","./isArray",92,"baseClone","isDeep","isFull","customizer","stack","isArr","initCloneArray","copyArray","tag","getTag","isFunc","funcTag","genTag","cloneBuffer","objectTag","argsTag","isHostObject","initCloneObject","copySymbols","cloneableTags","initCloneByTag","stacked","baseForOwn","subValue","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","./_Stack","./_arrayEach","./_assignValue","./_baseAssign","./_baseForOwn","./_cloneBuffer","./_copyArray","./_copySymbols","./_getTag","./_initCloneArray","./_initCloneByTag","./_initCloneObject","./_isHostObject","./isBuffer","./isObject",93,"baseCreate","proto","objectCreate",94,"baseDifference","includes","isCommon","valuesLength","baseUnary","LARGE_ARRAY_SIZE","cacheHas","outer","computed","valuesIndex","./_SetCache","./_arrayIncludes","./_arrayIncludesWith","./_arrayMap","./_baseUnary","./_cacheHas",95,"createBaseEach","./_createBaseEach",96,"baseFind","eachFunc","retKey",97,"baseFindIndex","fromRight",98,"baseFlatten","depth","isStrict","isArrayLikeObject","./_arrayPush","./isArguments","./isArrayLikeObject",99,"createBaseFor","baseFor","./_createBaseFor",100,"./_baseFor",101,"baseGet","isKey","./_baseCastPath","./_isKey",102,"baseHas",103,"baseHasIn",104,"fromIndex","indexOfNaN","./_indexOfNaN",105,"baseIsEqual","other","bitmask","isObjectLike","baseIsEqualDeep","./_baseIsEqualDeep","./isObjectLike",106,"equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","isTypedArray","equalArrays","equalByTag","PARTIAL_COMPARE_FLAG","objIsWrapped","othIsWrapped","equalObjects","./_equalArrays","./_equalByTag","./_equalObjects","./isTypedArray",107,"baseIsMatch","matchData","noCustomizer","srcValue","UNORDERED_COMPARE_FLAG","./_baseIsEqual",108,"baseIteratee","baseMatchesProperty","baseMatches","./_baseMatches","./_baseMatchesProperty","./property",109,"baseKeys","nativeKeys",110,"baseKeysIn","iteratorToArray","enumerate","propertyIsEnumerable","./_Reflect","./_iteratorToArray",111,"baseMap","isArrayLike","./isArrayLike",112,"getMatchData","./_baseIsMatch","./_getMatchData",113,"hasIn","./get","./hasIn",114,"baseMerge","srcIndex","keysIn","baseMergeDeep","./_assignMergeValue","./_baseMergeDeep","./keysIn",115,"mergeFunc","toPlainObject","./_baseClone","./isFunction","./isPlainObject","./toPlainObject",116,"baseProperty",117,"basePropertyDeep","./_baseGet",118,"baseReduce",119,"baseSlice",120,"baseTimes",121,"baseToPairs",122,123,"baseValues",124,"isKeyable","HASH_UNDEFINED","./_isKeyable",125,126,"checkGlobal",127,"cloneArrayBuffer","arrayBuffer","./_Uint8Array",128,129,"cloneMap","mapToArray","./_addMapEntry","./_arrayReduce","./_mapToArray",130,"cloneRegExp","regexp","reFlags",131,"cloneSet","setToArray","./_addSetEntry","./_setToArray",132,"cloneSymbol","symbol","symbolValueOf","symbolProto","./_Symbol",133,"cloneTypedArray","typedArray","./_cloneArrayBuffer",134,135,"copyObjectWith","./_copyObjectWith",136,137,"getSymbols","./_getSymbols",138,"createAggregator","initializer","./_arrayAggregator","./_baseAggregator","./_baseIteratee",139,"createAssigner","assigner","rest","sources","guard","isIterateeCall","./_isIterateeCall","./rest",140,141,"keysFunc",142,"isPartial","isUnordered","arrLength","othLength","arrValue","othValue","compared","./_arraySome",143,"convert",144,"objProps","objLength","othProps","skipCtor","objCtor","othCtor","./_baseHas",145,"getLength","./_baseProperty",146,"toPairs","isStrictComparable","./_isStrictComparable","./toPairs",147,"isNative","./isNative",148,"getOwnPropertySymbols",149,"objectToString","funcToString","mapCtorString","setCtorString","weakMapCtorString","Ctor","ctorString","./_Map","./_Set","./_WeakMap",150,"hasPath","hasFunc","isLength","isIndex","isString","./_isIndex","./_parent","./isLength","./isString","./last",151,"hashDelete","hashHas","./_hashHas",152,"hashGet",153,154,"hashSet",155,"indexKeys","./_baseTimes",156,157,158,"./_cloneMap","./_cloneRegExp","./_cloneSet","./_cloneSymbol","./_cloneTypedArray",159,"isPrototype","./_baseCreate","./_isPrototype",160,161,"reIsUint",162,163,"reIsPlainProp","reIsDeepProp",164,165,166,167,168,"./_Hash",169,"./_assocDelete","./_hashDelete",170,"./_assocGet","./_hashGet",171,"./_assocHas",172,"./_assocSet","./_hashSet",173,174,175,"./_baseSlice",176,"objectTypes","function","freeExports","freeModule","freeGlobal","freeSelf","freeWindow","thisGlobal","./_checkGlobal",177,178,179,180,181,182,183,"rePropName","reEscapeChar","./toString",184,"nonEnumShadows","./_createAssigner",185,"constant",186,"differenceBy","./_baseDifference","./_baseFlatten",187,188,"./_baseFind","./_baseFindIndex",189,"findIndex",190,"./_baseCastFunction",191,"defaultValue",192,"./_baseHasIn","./_hasPath",193,194,195,196,"./_getLength",197,198,"moduleExports","./constant",199,200,201,202,"reIsNative","reIsHostCtor","reRegExpChar",203,204,205,206,"objectCtorString",207,"isRegExp",208,209,"isSymbol",210,"typedArrayTags",211,"keyBy","./_createAggregator",212,"isProto","indexes","skipIndexes","./_baseKeys","./_indexKeys",213,"propsLength","./_baseKeysIn",214,215,"./_baseMap",216,"./_baseMerge",217,"./_basePropertyDeep",218,"./_baseReduce",219,"FUNC_ERROR_TEXT","nativeMax","toInteger","otherArgs","./_apply","./toInteger",220,221,"toNumber","INFINITY","MAX_INTEGER","./toNumber",222,"reTrim","reIsBinary","reIsOctal","freeParseInt","reIsBadHex","NAN",223,"./_baseToPairs",224,225,"symbolToString","./isSymbol",226,"./_baseValues",227,"definition","realMethod","undefinedType","bindMethod","noop","enableLoggingWhenConsoleArrives","replaceLoggingMethods","logMethods","defaultMethodFactory","Logger","defaultLevel","factory","persistLevelIfPossible","levelNum","levelName","storageKey","ignore","getPersistedLevel","storedLevel","currentLevel","TRACE","INFO","WARN","SILENT","getLevel","persist","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","noConflict",228,"normalizeArray","allowAboveRoot","up","xs","splitPathRe","splitPath","filename","resolvedPath","resolvedAbsolute","cwd","charAt","normalize","isAbsolute","trailingSlash","relative","from","to","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","dir","basename","extname",229,"cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","run","Item","browser","argv","versions","binding","chdir","umask",230,"PROMISE_QUEUE_COVERAGE","./lib","./lib-cov",231,232,"Queue","maxPendingPromises","maxQueuedPromises","pendingPromises","LocalPromise","resolveWith","GlobalPromise","promiseGenerator","notify","_dequeue","getPendingLength","getQueueLength",233,"mapDomain","regexSeparators","labels","ucs2decode","extra","ucs2encode","stringFromCharCode","basicToDigit","digitToBasic","digit","adapt","delta","numPoints","firstTime","damp","baseMinusTMin","tMax","skew","oldi","baseMinusT","inputLength","initialN","bias","initialBias","lastIndexOf","maxInt","tMin","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","regexPunycode","toASCII","regexNonASCII","punycode","overflow","not-basic","invalid-input","ucs2",234,"Stringify","Parse","./parse","./stringify",235,"Utils","internals","arrayLimit","parameterLimit","strictNullHandling","plainObjects","allowPrototypes","allowDots","parseValues","part","parseObject","chain","cleanRoot","parseArrays","parseKeys","givenKey","child","tempObj","newObj","compact","./utils",236,"arrayPrefixGenerators","brackets","indices","repeat","skipNulls","generateArrayPrefix","toISOString","objKeys","arrayFormat",237,"hexTable","arrayToObject","mergeTarget","acc","references","refs","compacted",238,"maxKeys","kstr","vstr",239,"stringifyPrimitive","objectKeys","ks",240,"./decode","./encode",241,"comparable","validator","and","createValidator","nestedValidator","findValues","nv","keypath","createNestedValidator","$eq","validators","prepare","createRootValidator","$ne","$or","$gt","$gte","$lt","$lte","$mod","$in","$nin","$not","$all","$size","$nor","$regex","$where","$elemMatch","$exists","$options","plugin",242,243,"UrlPattern","P","astNodeContainsSegmentsForProvidedParams","astNodeToNames","astNodeToRegexString","baseAstNodeToRegexString","concatMap","defaultOptions","escapeForRegex","getParam","keysAndValuesToObject","newParser","regexGroupCount","stringConcatMap","regex","Result","Tagged","parser","tagged","sequence","parsers","pick","lazy","cached","baseMany","stringResult","atLeastOneResultRequired","endResult","parserResult","many1","concatMany1Till","firstChoice","U","wildcard","wildcardChar","optional","optionalSegmentStartChar","optionalSegmentEndChar","segmentNameCharset","named","segmentNameStartChar","escapedChar","escapeChar","segmentValueCharset","astNode","nextIndexes","sideEffects","maxIndex","groupCount","withoutWhitespace","isRegex","ast",244,"Url","slashes","port","urlParse","parseQueryString","slashesDenoteHost","urlFormat","urlResolve","urlResolveObject","resolveObject","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","http:","https:","ftp:","gopher:","file:","queryIndex","splitter","uSplit","slashRegex","simplePath","lowerProto","hostEnd","hec","atSign","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","h","ae","esc","escape","qm","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","isNullOrUndefined","authInHost","isNull","hasTrailingSlash","./util",245,246,247,"ctx","seen","stylize","stylizeNoColor","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","styles","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","isDate","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","line","numLinesEst","prev","cur","ar","re","isPrimitive","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","formatRegExp","deprecate","msg","deprecated","throwDeprecation","traceDeprecation","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","null","./support/isBuffer",248,"homepage","bugs","licenses","author","contributors","main","repository","scripts","dependencies","kinvey-javascript-sdk-core","lodash","devDependencies","babel-eslint","babel-preset-es2015","babel-preset-stage-2","babelify","browserify","dotenv","envify","eslint-config-airbnb","eslint-plugin-react","exorcist","gulp","gulp-bump","gulp-eslint","gulp-git","gulp-if","gulp-plumber","gulp-prompt","gulp-rename","gulp-sourcemaps","gulp-uglify","gulp-util","run-sequence","semver-regex","vinyl-buffer","vinyl-source-stream","vinyl-transform","engines","keywords",249,"DeviceAdapter","_package","_package2","rChrome","rFirefox","rIE","rOpera","rSafari","environment","library","angular","full","os","sdk","../package.json",250,"HttpMiddleware","$injector","injector","$http","kinvey-javascript-sdk-core/src/rack/middleware",251,"_provider","ngKinvey","KinveyProvider","./provider",252,"PopupAdapter","interval",253,"_kinveyJavascriptSdkCore","_http","_popup2","_device2","networkRack","useAfter","./device","./http","./popup","kinvey-javascript-sdk-core/src/rack/middleware/serialize","kinvey-javascript-sdk-core/src/rack/rack","kinvey-javascript-sdk-core/src/utils/device","kinvey-javascript-sdk-core/src/utils/popup"],"mappings":"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","file":"kinvey.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var querystring = require('querystring')\n  , extend = require('extend')\n  , url = require('url')\n\nmodule.exports = function appendQuery(uri, q) {\n  var parts = url.parse(uri, true)\n    , parsedQuery = extend(true, {}, parts.query, typeof q === 'string' ? querystring.parse(q) : q)\n\n  parts.search = '?' + serialize(parsedQuery)\n  return url.format(parts)\n}\n\n// serialize an object recursively\nfunction serialize(obj, prefix) {\n  var str = []\n    , useArraySyntax = false\n\n  // if there's a prefix, and this object is an array, use array syntax\n  // i.e., `prefix[]=foo&prefix[]=bar` instead of `prefix[0]=foo&prefix[1]=bar`\n  if (Array.isArray(obj) && prefix) {\n    useArraySyntax = true\n  }\n\n  Object.keys(obj).forEach(function (prop) {\n    var key, query, val = obj[prop]\n\n    key = prefix ?\n      prefix + '[' + (useArraySyntax ? '' : prop) + ']' :\n      prop\n\n    query = typeof val === 'object' ?\n      serialize(val, key) :\n      encodeURIComponent(key) + '=' + encodeURIComponent(val)\n\n    str.push(query)\n  })\n\n  return str.join('&')\n}\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Kinvey = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar querystring = require('querystring')\n  , extend = require('extend')\n  , url = require('url')\n\nmodule.exports = function appendQuery(uri, q) {\n  var parts = url.parse(uri, true)\n    , parsedQuery = extend(true, {}, parts.query, typeof q === 'string' ? querystring.parse(q) : q)\n\n  parts.search = '?' + serialize(parsedQuery)\n  return url.format(parts)\n}\n\n// serialize an object recursively\nfunction serialize(obj, prefix) {\n  var str = []\n    , useArraySyntax = false\n\n  // if there's a prefix, and this object is an array, use array syntax\n  // i.e., `prefix[]=foo&prefix[]=bar` instead of `prefix[0]=foo&prefix[1]=bar`\n  if (Array.isArray(obj) && prefix) {\n    useArraySyntax = true\n  }\n\n  Object.keys(obj).forEach(function (prop) {\n    var key, query, val = obj[prop]\n\n    key = prefix ?\n      prefix + '[' + (useArraySyntax ? '' : prop) + ']' :\n      prop\n\n    query = typeof val === 'object' ?\n      serialize(val, key) :\n      encodeURIComponent(key) + '=' + encodeURIComponent(val)\n\n    str.push(query)\n  })\n\n  return str.join('&')\n}\n\n},{\"extend\":9,\"querystring\":240,\"url\":244}],2:[function(require,module,exports){\n(function (global){\n\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\nvar BrowserMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],3:[function(require,module,exports){\n(function (global){\n/* Add Promise.all and Promise.race implementations. */\n'use strict';\nvar isArguments = require('is-arguments');\n\nvar _call = Function.call.bind(Function.call);\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\nvar _floor = Math.floor;\nvar _abs = Math.abs;\n\nvar Symbol = global.Symbol || {};\nvar symbolIterator = Symbol.iterator || '@@iterator';\n\nvar defineProperties = function(object, map) {\n  _forEach(Object.keys(map), function(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n};\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\n// The -r variant allows specifying the receiver.\nfunction tryCatch0r(fn, receiver) {\n  try {\n    return fn.call(receiver);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch1(fn, arg1) {\n  try {\n    return fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch3(fn, arg1, arg2, arg3) {\n  try {\n    return fn(arg1, arg2, arg3);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n\nvar TypeIsObject = function(x) {\n  /* jshint eqnull:true */\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  return x != null && Object(x) === x;\n};\n\nvar ToObject = function(o, optMessage) {\n  /* jshint eqnull:true */\n  if (o == null) {\n    throw new TypeError(optMessage || 'Cannot call method on ' + o);\n  }\n  return Object(o);\n};\n\nvar IsCallable = (typeof /abc/ === 'function') ? function(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function(x) { return typeof x === 'function'; /* Much faster */};\n\nvar ToNumber = function(value) {\n  /*\n  // Implementations which implement Symbol also throw the proper TypeError\n  // if it is converted to a number.\n  if (_toString(value) === '[object Symbol]') {\n    throw new TypeError('Cannot convert a Symbol value to a number');\n  }\n  */\n  return +value;\n};\n\nvar numberIsNaN = Number.isNaN || function isNaN(value) {\n  return value !== value;\n};\n\nvar numberIsFinite = Number.isFinite || function isFinite(value) {\n  return typeof value === 'number' && global.isFinite(value);\n};\n\nvar ToInteger = function(value) {\n  var number = ToNumber(value);\n  if (numberIsNaN(number)) { return 0; }\n  if (number === 0 || !numberIsFinite(number)) { return number; }\n  return (number > 0 ? 1 : -1) * _floor(_abs(number));\n};\n\nvar ToLength = function(value) {\n  var len = ToInteger(value);\n  if (len <= 0) { return 0; } // Includes converting -0 to +0\n  if (typeof Number.MAX_SAFE_INTEGER !== 'undefined') {\n    if (len > Number.MAX_SAFE_INTEGER) { return Number.MAX_SAFE_INTEGER; }\n  }\n  return len;\n};\n\n// Stripped down value-only ArrayIterator.\nvar ArrayIterator = function(array) {\n  this.i = 0;\n  this.array = array;\n};\ndefineProperties(ArrayIterator.prototype, {\n  next: function() {\n    var i = this.i;\n    var array = this.array;\n    if (!(this instanceof ArrayIterator)) {\n      throw new TypeError('Not an ArrayIterator');\n    }\n    if (typeof array !== 'undefined') {\n      var len = Array.isArray(array) ? array.length : ToLength(array.length);\n      for (; i < len; i++) {\n        var retval = array[i];\n        this.i = i + 1;\n        return { value: retval, done: false };\n      }\n    }\n    this.array = void 0;\n    return { value: void 0, done: true };\n  },\n});\nObject.defineProperty(ArrayIterator.prototype, symbolIterator, {\n  configurable: true,\n  enumerable: false,\n  writable: true,\n  value: function() { return this; },\n});\n\nvar DEFAULT_ARRAY_ITERATOR = {};\n\nvar GetIterator = function(o, detectDefault) {\n  var itFn = GetMethod(o, symbolIterator);\n  if (!IsCallable(itFn)) {\n    // Node 0.10 compatibility.\n    if (Array.isArray(o) || isArguments(o)) {\n      return detectDefault ? DEFAULT_ARRAY_ITERATOR : new ArrayIterator(o);\n    }\n    // Better diagnostics if itFn is null or undefined\n    throw new TypeError('value is not an iterable');\n  }\n  if (detectDefault && itFn === Array.prototype[symbolIterator]) {\n    return DEFAULT_ARRAY_ITERATOR;\n  }\n  var it = _call(itFn, o);\n  if (!TypeIsObject(it)) {\n    throw new TypeError('bad iterator');\n  }\n  return it;\n};\n\nvar GetMethod = function(o, p) {\n  var func = ToObject(o)[p];\n  if (func === void 0 || func === null) {\n    return void 0;\n  }\n  if (!IsCallable(func)) {\n    throw new TypeError('Method not callable: ' + p);\n  }\n  return func;\n};\n\nvar IteratorComplete = function(iterResult) {\n  return !!(iterResult.done);\n};\n\nvar IteratorClose = function(iterator, completionIsThrow) {\n  var returnMethod = GetMethod(iterator, 'return');\n  if (returnMethod === void 0) {\n    return;\n  }\n  var innerResult, innerException;\n  innerResult = tryCatch0r(returnMethod, iterator);\n  if (innerResult === errorObj) {\n    innerException = errorObj.e;\n  }\n  if (completionIsThrow) {\n    return;\n  }\n  if (innerException) {\n    throw innerException;\n  }\n  if (!TypeIsObject(innerResult)) {\n    throw new TypeError(\"Iterator's return method returned a non-object.\");\n  }\n};\n\nvar IteratorNext0 = function(it) {\n  var result = it.next();\n  if (!TypeIsObject(result)) {\n    throw new TypeError('bad iterator');\n  }\n  return result;\n};\n\nvar IteratorStep = function(it) {\n  var result = IteratorNext0(it);\n  var done = IteratorComplete(result);\n  return done ? false : result;\n};\n\nmodule.exports = function(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n) {\n\n  // This is a common step in many Promise methods\n  var getPromiseSpecies = function(C) {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Promise is not object');\n    }\n    if (symbolSpecies !== null) {\n      var S = C[symbolSpecies];\n      if (S !== void 0 && S !== null) {\n        return S;\n      }\n    }\n    return C;\n  };\n\n  var _promiseAllResolver = function(index, values, capability, remaining) {\n    var alreadyCalled = false;\n    return function(x) {\n      if (alreadyCalled) { return; }\n      alreadyCalled = true;\n      values[index] = x;\n      if ((--remaining.count) === 0) {\n        promiseReactionResolve(capability, values);\n      }\n    };\n  };\n\n  var performPromiseAll = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var values = [];\n    var remaining = { count: 1 };\n    var next, nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; ; index++) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseAllArray = function(array, C, resultCapability) {\n    var values = new Array(array.length);\n    var remaining = { count: 1 };\n    var nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; index < array.length; index++) {\n      nextValue = array[index];\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseRace = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var next, nextValue, nextPromise;\n    while (true) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        // NOTE: If iterable has no items, resulting promise will never\n        // resolve; see:\n        // https://github.com/domenic/promises-unwrapping/issues/75\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2515\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      nextPromise = C.resolve(nextValue);\n      optimizePromiseThen(\n        nextPromise, resultCapability.resolve, resultCapability.reject\n      );\n    }\n    return resultCapability.promise;\n  };\n\n  defineProperties(Promise, {\n    all: function all(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapabilityFast(C);\n      var iterator, iteratorRecord, result, ex;\n      iterator = tryCatch2(GetIterator, iterable, true);\n      if (iterator === DEFAULT_ARRAY_ITERATOR) {\n        // Fast path\n        result = tryCatch3(performPromiseAllArray, iterable, C, capability);\n        if (result !== errorObj) {\n          return result;\n        }\n        // Not safe to return capability to pool, since there may be\n        // calls to `resolve` still pending.\n        return promiseReactionReject(capability, errorObj.e, 'no free');\n      }\n      if (iterator === errorObj) {\n        return promiseReactionReject(capability, errorObj.e);\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseAll, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      // Not safe to return capability to pool, since there may be\n      // calls to `resolve` still pending.\n      return promiseReactionReject(capability, ex, 'no free');\n    },\n\n    race: function race(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapability(C);\n      var iterator, iteratorRecord, reject, result, ex;\n      iterator = tryCatch1(GetIterator, iterable);\n      if (iterator === errorObj) {\n        reject = capability.reject;\n        reject(errorObj.e);\n        return capability.promise;\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseRace, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      reject = capability.reject;\n      reject(ex);\n      return capability.promise;\n    },\n  });\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"is-arguments\":15}],4:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar asap = require('asap/raw');\n\n// When this is `false` we disable species support, for a little bit of\n// extra performance.\nvar supportSpecies = false;\n// When this is false we assume promise subclass constructors have no\n// side effects.\nvar strictConstructors = false;\n// When this is true, a new resolver is created for every Promise.\nvar dontReuseResolvers = false;\n// When this is true (and the engine supports it), the Promise will be a\n// true ES2015 class.  However, this currently slows the implementation down\n// by 30% since construction of ES2015 classes is unoptimized.\nvar useES2015Class = false;\n\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\n\nvar Symbol = global.Symbol || {};\nvar symbolSpecies = Symbol.species || (supportSpecies ? '@@species' : null);\n\nfunction defineProperties(object, map) {\n  _forEach(Object.keys(map), function definePropertiesForEach(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n}\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\nfunction tryCatch1(fn, arg) {\n  try {\n    return fn(arg);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -r variant allows specifying the receiver.\nfunction tryCatch2r(fn, receiver, arg1, arg2) {\n  try {\n    return fn.call(receiver, arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -n variant creates a new object.\nfunction tryCatch1n(Fn, arg1) {\n  try {\n    return new Fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n// Promises\n\n// Follow implementation in the ES6 spec as closely as possible, but\n// steal tricks from Bluebird for moar speed.\n// In particular, we go to great lengths to avoid allocating objects\n// and closures wherever possible in hot code.\n\nfunction TypeIsObject(x) {\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  if (false) {\n    return x !== void 0 && x !== null && Object(x) === x;\n  }\n  // It turns out that !TypeIsNotObject is faster...\n  return !TypeIsNotObject(x);\n}\nfunction TypeIsNotObject(val) {\n  // This is more appropriate when TypeIsObject may return false.\n  return val === void 0 || val === null || val === true || val === false ||\n    typeof val === 'string' || typeof val === 'number' ||\n    typeof val === 'symbol'; // jshint ignore:line\n}\n\nvar IsCallable = (typeof /abc/ === 'function') ? function IsCallableSlow(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function IsCallableFast(x) { return typeof x === 'function'; };\n\n// We can't tell callables from constructors in ES5\nvar IsConstructor = IsCallable;\n\nfunction SpeciesConstructor(O, defaultConstructor) {\n  var C = O.constructor;\n  if (C === void 0) {\n    return defaultConstructor;\n  }\n  var S;\n  if (symbolSpecies === null) {\n    S = C;\n  } else {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad constructor');\n    }\n    S = C[symbolSpecies];\n    if (S === void 0 || S === null) {\n      return defaultConstructor;\n    }\n  }\n  if (!IsConstructor(S)) {\n    throw new TypeError('Bad @@species');\n  }\n  return S;\n}\n\nfunction IsPromise(promise) {\n  if (!TypeIsObject(promise)) {\n    return false;\n  }\n  if (promise._promise_state === undefined) {\n    return false; // Uninitialized, or missing our hidden field.\n  }\n  return true;\n}\n\n// \"PromiseCapability\" in the spec is what most promise implementations\n// call a \"deferred\".\n// We're going to wrap it so that it never throws an exception.\nfunction PromiseCapability() {\n  // Declare fields of this object.\n  // (Helps with object shape optimization.)\n  var self = this;\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  this.resolver = function(resolve, reject) {\n    if (self.resolve !== void 0 || self.reject !== void 0) {\n      throw new TypeError('Bad Promise implementation!');\n    }\n    self.resolve = resolve;\n    self.reject = reject;\n  };\n}\nPromiseCapability.prototype.free = function() {\n  if (dontReuseResolvers) { return; }\n  if (this.dontReuse) { return; }\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  freeCapabilityList.push(this);\n};\nPromiseCapability.prototype.getPromiseAndFree = function() {\n  var promise = this.promise;\n  this.free();\n  return promise;\n};\nvar freeCapabilityList = [];\n\nfunction makeCapabilityFast(C) {\n  thenFastPath = FAST_PATH_MAKE_CAP;\n  // `thenFastPath` is always reset to FAST_PATH_NONE by `makeCapability`\n  return makeCapability(C);\n}\n\nfunction makeCapability(C) {\n  if (!IsConstructor(C)) {\n    thenFastPath = FAST_PATH_NONE;\n    throw new TypeError('Bad promise constructor');\n  }\n\n  var capability;\n  if (freeCapabilityList.length) {\n    capability = freeCapabilityList.pop();\n  } else {\n    capability = new PromiseCapability();\n  }\n  if (strictConstructors &&\n      C !== Promise && !C.hasOwnProperty('noSideEffects')) {\n    capability.dontReuse = true;\n  }\n  if (thenFastPath === FAST_PATH_MAKE_CAP) {\n    thenFastPathResolver = capability.resolver;\n    capability.promise = tryCatch1n(C, thenFastPathResolver);\n    var wasFastPath = (thenFastPath === FAST_PATH_CTOR_BAILED);\n    thenFastPathResolver = null;\n    thenFastPath = FAST_PATH_NONE;\n    if (capability.promise === errorObj) {\n      capability.free();\n      throw errorObj.e;\n    }\n    if (wasFastPath) { return capability.getPromiseAndFree(); }\n  } else {\n    capability.promise = new C(capability.resolver);\n  }\n  if (!(IsCallable(capability.resolve) && IsCallable(capability.reject))) {\n    throw new TypeError('Bad promise constructor');\n  }\n  return capability;\n}\n\n// Forward declaration\nvar promisePrototypeThen;\nvar fakeRetvalFromThen = false;\n\n// Constants for Promise implementation\nvar PROMISE_IDENTITY = (function PROMISE_IDENTITY(v) { return v; });\nvar PROMISE_THROWER = (function PROMISE_THROWER(t) { throw t; });\nvar PROMISE_FAKE_CAPABILITY = new PromiseCapability();\nvar PROMISE_PENDING = 0;\nvar PROMISE_RESOLVING = 1; // PROMISE_PENDING combined with alreadyResolved\nvar PROMISE_FULFILLED = 2;\nvar PROMISE_REJECTED = 3;\n\n// States for then-fast-path\nvar FAST_PATH_NONE = 0;\nvar FAST_PATH_MAKE_CAP = 1;\nvar FAST_PATH_CTOR_BAILED = 2;\n\nvar thenFastPath = FAST_PATH_NONE;\nvar thenFastPathResolver = null;\n\nfunction promiseCheckAndResolve(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  resolvePromise(promise, value);\n  return promise;\n}\nfunction promiseCheckAndReject(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  rejectPromise(promise, value);\n  return promise;\n}\nfunction promiseReactionResolve(promiseCapability, handlerResult) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var resolve = promiseCapability.resolve;\n    resolve(handlerResult);\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndResolve(promiseCapability, handlerResult);\n}\nfunction promiseReactionReject(promiseCapability, handlerResult, noFree) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var reject = promiseCapability.reject;\n    reject(handlerResult);\n    if (noFree) { return promiseCapability.promise; }\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndReject(promiseCapability, handlerResult);\n}\nfunction promiseReactionJob(handler, promiseCapability, argument) {\n  var handlerResult;\n  // Encapsulate try/catch here to avoid deoptimization.\n  handlerResult = tryCatch1(handler, argument);\n  if (promiseCapability === PROMISE_FAKE_CAPABILITY) { return; }\n  if (handlerResult === errorObj) {\n    handlerResult = errorObj.e;\n    return promiseReactionReject(promiseCapability, handlerResult);\n  }\n  return promiseReactionResolve(promiseCapability, handlerResult);\n}\n\nfunction PromiseReactionJobTask() {\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n}\nPromiseReactionJobTask.prototype.call = function() {\n  promiseReactionJob(this.handler, this.capability, this.argument);\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n  freePromiseReactionJobTasks.push(this);\n};\nvar freePromiseReactionJobTasks = [];\n\nfunction triggerPromiseReaction(handler, capability, argument) {\n  var task;\n  if (freePromiseReactionJobTasks.length) {\n    task = freePromiseReactionJobTasks.pop();\n  } else {\n    task = new PromiseReactionJobTask();\n  }\n  task.handler = handler;\n  task.capability = capability;\n  task.argument = argument;\n  asap(task);\n}\n\nfunction fulfillPromise(promise, value) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_fulfillReactions0,\n      promise._promise_reactionCapability0,\n      value);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx], promise[idx + 2], value);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = value;\n  promise._promise_state = PROMISE_FULFILLED;\n}\n\nfunction rejectPromise(promise, reason) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_rejectReactions0,\n      promise._promise_reactionCapability0,\n      reason);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx + 1], promise[idx + 2], reason);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = reason;\n  promise._promise_state = PROMISE_REJECTED;\n}\n\nfunction getThen(r) { return r.then; }\n\nfunction PromiseResolveThenableJobTask() {\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n}\nPromiseResolveThenableJobTask.prototype.call = function() {\n  promiseResolveThenableJob(this.promise, this.resolution, this.then);\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n  freePromiseResolveThenableJobTasks.push(this);\n};\nvar freePromiseResolveThenableJobTasks = [];\n\nfunction triggerPromiseResolveThenableJob(promise, resolution, then) {\n  var task;\n  if (freePromiseResolveThenableJobTasks.length) {\n    task = freePromiseResolveThenableJobTasks.pop();\n  } else {\n    task = new PromiseResolveThenableJobTask();\n  }\n  task.promise = promise;\n  task.resolution = resolution;\n  task.then = then;\n  asap(task);\n}\n\nfunction resolvePromise(promise, resolution) {\n  if (resolution === promise) {\n    return rejectPromise(promise, new TypeError('Self resolution'));\n  }\n  if (TypeIsNotObject(resolution)) {\n    return fulfillPromise(promise, resolution);\n  }\n  var then = tryCatch1(getThen, resolution);\n  if (then === errorObj) {\n    return rejectPromise(promise, errorObj.e);\n  }\n  if (!IsCallable(then)) {\n    return fulfillPromise(promise, resolution);\n  }\n  triggerPromiseResolveThenableJob(promise, resolution, then);\n}\n\nfunction promiseResolveThenableJob(promise, thenable, then) {\n  // Inlined copy of createResolvingFunctions(promise)\n  var alreadyResolved = false;\n  var resolve = function promiseResolveThenableJobResolve(resolution) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    resolvePromise(promise, resolution);\n  };\n  var reject = function promiseResolveThenableJobReject(reason) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    return rejectPromise(promise, reason);\n  };\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n  }\n  var value = tryCatch2r(then, thenable, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n}\n\nvar PromiseConstruct = function Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires \"new\"');\n  }\n  if (this._promise_state !== void 0) {\n    throw new TypeError('Bad construction');\n  }\n  // The spec requires no enumerable fields, but for speed we're going\n  // to expose our implementation here.\n  // Since most promises have exactly one handler, the first one is\n  // stored directly on the object.  The rest (if needed) are stored\n  // on the object's element array to avoid unnecessary indirection.\n  this._promise_result = void 0;\n  this._promise_state = PROMISE_PENDING;\n  this._promise_fulfillReactions0 = void 0;\n  this._promise_rejectReactions0 = void 0;\n  this._promise_reactionCapability0 = void 0;\n  if (thenFastPath === FAST_PATH_MAKE_CAP &&\n      resolver === thenFastPathResolver) {\n    // We will create the resolving functions lazily.\n    thenFastPath = FAST_PATH_CTOR_BAILED;\n    return;\n  }\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2482\n  // (This check has been reordered after the fast path.)\n  if (!IsCallable(resolver)) {\n    throw new TypeError('not a valid resolver');\n  }\n  // Inlined copy of createResolvingFunctions(this), using _promise_state\n  // to track the `alreadyResolved` boolean.\n  var promise = this;\n  var resolve = function PromiseResolve(resolution) {\n    promiseCheckAndResolve(promise, resolution);\n  };\n  var reject = function PromiseReject(reason) {\n    promiseCheckAndReject(promise, reason);\n  };\n  var value = tryCatch2(resolver, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n};\nvar Promise = (function makeClass() {\n  if (useES2015Class) {\n    try {\n      /* jshint evil:true */\n      return eval('(function(PromiseConstruct) {' +\n                  '\"use strict\";' +\n                  'return class Promise {' +\n                  '  constructor(executor) {' +\n                  '    PromiseConstruct.call(this, executor);' +\n                  '  }' +\n                  '};})')(PromiseConstruct);\n    } catch (e) { /* I guess ES2015 syntax isn't supported. */ }\n  }\n  return PromiseConstruct;\n})();\nvar Promise$prototype = Promise.prototype;\n\ndefineProperties(Promise, {\n  reject: function reject(reason) {\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionReject(capability, reason);\n  },\n\n  resolve: function resolve(v) {\n    // See https://esdiscuss.org/topic/fixing-promise-resolve for spec\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    if (IsPromise(v)) {\n      var constructor = v.constructor;\n      if (constructor === C) { return v; }\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionResolve(capability, v);\n  },\n});\n\ndefineProperties(Promise$prototype, {\n  catch: function catch_(onRejected) {\n    return this.then(void 0, onRejected);\n  },\n\n  then: function then(onFulfilled, onRejected) {\n    /* jshint bitwise: false */\n    var fakeRetval = fakeRetvalFromThen;\n    fakeRetvalFromThen = false;\n\n    var promise = this;\n    if (!IsPromise(promise)) { throw new TypeError('not a promise'); }\n    var resultCapability, C;\n    if ((!strictConstructors) && fakeRetval) {\n      resultCapability = PROMISE_FAKE_CAPABILITY;\n    } else {\n      C = SpeciesConstructor(promise, Promise);\n      if (fakeRetval &&\n          (C === Promise || C.hasOwnProperty('noSideEffects'))) {\n        resultCapability = PROMISE_FAKE_CAPABILITY;\n      } else {\n        // We might create a fake capability here.\n        resultCapability = makeCapabilityFast(C);\n      }\n    }\n    // PerformPromiseThen(promise, onFulfilled, onRejected, resultCapability)\n    if (!IsCallable(onFulfilled)) {\n      onFulfilled = PROMISE_IDENTITY;\n    }\n    if (!IsCallable(onRejected)) {\n      onRejected = PROMISE_THROWER;\n    }\n\n    var length;\n    switch (promise._promise_state & 3) {\n    case PROMISE_PENDING:\n    case PROMISE_RESOLVING:\n      length = promise._promise_state >>> 2;\n      if (length === 0) {\n        promise._promise_fulfillReactions0 = onFulfilled;\n        promise._promise_rejectReactions0 = onRejected;\n        promise._promise_reactionCapability0 = resultCapability;\n      } else {\n        var i = 3 * (length - 1);\n        promise[i] = onFulfilled;\n        promise[i + 1] = onRejected;\n        promise[i + 2] = resultCapability;\n      }\n      promise._promise_state += (1 << 2);\n      break;\n    case PROMISE_FULFILLED:\n      triggerPromiseReaction(onFulfilled, resultCapability,\n                             promise._promise_result);\n      break;\n    case PROMISE_REJECTED:\n      triggerPromiseReaction(onRejected, resultCapability,\n                             promise._promise_result);\n      break;\n    default:\n      throw new TypeError('unexpected');\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  },\n});\n// Store the identify of the Promise#then function for optimization.\npromisePrototypeThen = Promise$prototype.then;\n// This encapsulates the `then` optimization, for use by promise-extra.js\nfunction optimizePromiseThen(promise, onFulfilled, onReject) {\n  var then = promise.then;\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n    promisePrototypeThen.call(promise, onFulfilled, onReject);\n  } else {\n    then.call(promise, onFulfilled, onReject);\n  }\n}\n\n// Special \"extra\" method which is like `Promise#then` but it does\n// *not* return a `Promise`.  This can be much faster when you don't\n// need the result.\nPromise$prototype.then0 = function then0(f, r) {\n  optimizePromiseThen(this, f, r);\n};\n\nif (symbolSpecies !== null) {\n  // Default species getter.\n  Object.defineProperty(Promise, symbolSpecies, {\n    configurable: true,\n    enumerable: false,\n    get: function speciesGetter() { return this; },\n  });\n}\n\n// Add Promise.all / Promise.race methods\n// (These are split into a separate file since their implementation is\n// reasonably independent of the core and their performance is not critical.)\nrequire('./promise-extra.js')(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n);\n\nmodule.exports = Promise;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./promise-extra.js\":3,\"asap/raw\":2}],5:[function(require,module,exports){\n'use strict'\n\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nfunction init () {\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\ninit()\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n},{}],6:[function(require,module,exports){\n(function (global){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.foo = function () { return 42 }\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    this.length = 0\n    this.parent = undefined\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined') {\n    if (object.buffer instanceof ArrayBuffer) {\n      return fromTypedArray(that, object)\n    }\n    if (object instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, object)\n    }\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(array)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromTypedArray(that, new Uint8Array(array))\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n} else {\n  // pre-set for values that may exist in the future\n  Buffer.prototype.length = undefined\n  Buffer.prototype.parent = undefined\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; i--) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"base64-js\":5,\"ieee754\":12,\"isarray\":7}],7:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n},{}],8:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],9:[function(require,module,exports){\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t\"use strict\";\n\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval) {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t\"use strict\";\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== \"object\" && typeof target !== \"function\" || target == undefined) {\n\t\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n},{}],10:[function(require,module,exports){\n'use strict';\n\n/**\n * Provides in-memory cache.\n *\n * @name MemoryCache\n * @constructor\n */\nfunction MemoryCache() {\n    this._cache = createMap();\n    this._timeouts = createMap();\n}\n\n/**\n * Returns cache value for the specified key.\n *\n * @param {String} key\n * @returns {*} Value or `undefined` if value does not exist.\n */\nMemoryCache.prototype.get = function (key) {\n    return this._cache[key];\n};\n\n/**\n * Assigns value for the specified key.\n *\n * @param {String} key\n * @param {*} value\n * @param {Number} [expireTime=0] The length of time in seconds. After this time has expired, the\n *      value will be automatically deleted. 0 means that time never expire.\n */\nMemoryCache.prototype.set = function (key, value, expireTime) {\n    this.delete(key);\n    this._cache[key] = value;\n    if (expireTime) {\n        this._timeouts[key] = setTimeout(this.delete.bind(this, key), expireTime * 1000);\n    }\n};\n\n/**\n * Deletes value for the specified key.\n *\n * @param {String} key\n */\nMemoryCache.prototype.delete = function (key) {\n    delete this._cache[key];\n    if (key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n        delete this._timeouts[key];\n    }\n};\n\n/**\n * Clears the whole cache storage.\n */\nMemoryCache.prototype.clear = function () {\n    this._cache = createMap();\n    for (var key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n    }\n    this._timeouts = createMap();\n};\n\n/**\n * Creates a new object without a prototype. This object is useful for lookup without having to\n * guard against prototypically inherited properties via hasOwnProperty.\n *\n * @returns {Object}\n */\nfunction createMap() {\n    return Object.create(null);\n}\n\nmodule.exports = MemoryCache;\n\n},{}],11:[function(require,module,exports){\n(function (process){\n/*! hellojs v1.12.0 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */\r\n// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n\n/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (Array.isArray(r) && Array.isArray(a)) {\n\t\t\t\tArray.prototype.push.apply(r, a);\n\t\t\t}\n\t\t\telse if (r instanceof Object && a instanceof Object && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t// Clone it\n\t\t\t\t\ta = a.slice(0);\n\t\t\t\t}\n\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tdisplay: opts.display,\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = state.oauth_proxy + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tparent[cb](str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n\n// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n\n// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n\n(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\t\t\t\tdelete p.qs.display;\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.1\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// The facebook login window is a different size.\n\t\t\t\tp.options.popup.width = 580;\n\t\t\t\tp.options.popup.height = 400;\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/v2.4/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page:'@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tshare: '',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tif (p.qs.display === 'none') {\n\t\t\t\t\t// Google doesn't like display=none\n\t\t\t\t\tp.qs.display = '';\n\t\t\t\t}\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.approval_prompt = 'force';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\to.data = o.feed.entry.map(formatEntry);\n\t\tdelete o.feed;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments',\n\t\t\t\temail: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Instagram throws errors like 'JavaScript API is unsupported' if the display is 'popup'.\n\t\t\t\t// Make the display anything but 'popup'\n\t\t\t\tp.qs.display = '';\n\t\t\t},\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting',\n\t\t\t\temail: '',\n\t\t\t\tfriends: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n\n(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfiles: '',\n\t\t\t\tfriends: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish: 'w_share',\n\t\t\t\tpublish_files: 'w_share',\n\t\t\t\tshare: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel:{\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n\n// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function() {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n\n// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\t// See https://vk.com/dev/permissions\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\tfriends: 'friends',\n\t\t\t\tphotos: 'photos',\n\t\t\t\tvideos: 'video',\n\t\t\t\tshare: 'share',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tshare: 'wl.share',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token'\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n\n// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n\n// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n\n}).call(this,require('_process'))\n\n},{\"_process\":229}],12:[function(require,module,exports){\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n},{}],13:[function(require,module,exports){\nvar idbModules = {  // jshint ignore:line\n    util: {\n        cleanInterface: false\n    }\n};\n\n(function () {\n    'use strict';\n\n    var testObject = {test: true};\n    //Test whether Object.defineProperty really works.\n    if (Object.defineProperty) {\n        try {\n            Object.defineProperty(testObject, 'test', { enumerable: false });\n            if (testObject.test) {\n                idbModules.util.cleanInterface = true;      // jshint ignore:line\n            }\n        } catch (e) {\n        //Object.defineProperty does not work as intended.\n        }\n    }\n})();\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * A utility method to callback onsuccess, onerror, etc as soon as the calling function's context is over\n     * @param {Object} fn\n     * @param {Object} context\n     * @param {Object} argArray\n     */\n    function callback(fn, context, event) {\n        //window.setTimeout(function(){\n        event.target = context;\n        (typeof context[fn] === \"function\") && context[fn].apply(context, [event]);\n        //}, 1);\n    }\n\n    /**\n     * Shim the DOMStringList object.\n     *\n     */\n    var StringList = function() {\n        this.length = 0;\n        this._items = [];\n        //Internal functions on the prototype have been made non-enumerable below.\n        if (idbModules.util.cleanInterface) {\n            Object.defineProperty(this, '_items', {\n                enumerable: false\n            });\n        }\n    };\n    StringList.prototype = {\n        // Interface.\n        contains: function(str) {\n            return -1 !== this._items.indexOf(str);\n        },\n        item: function(key) {\n            return this._items[key];\n        },\n\n        // Helpers. Should only be used internally.\n        indexOf: function(str) {\n            return this._items.indexOf(str);\n        },\n        push: function(item) {\n            this._items.push(item);\n            this.length += 1;\n            for (var i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        },\n        splice: function(/*index, howmany, item1, ..., itemX*/) {\n            this._items.splice.apply(this._items, arguments);\n            this.length = this._items.length;\n            for (var i in this) {\n                if (i === String(parseInt(i, 10))) {\n                    delete this[i];\n                }\n            }\n            for (i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        }\n    };\n    if (idbModules.util.cleanInterface) {\n        for (var i in {\n            'indexOf': false,\n            'push': false,\n            'splice': false\n        }) {\n            Object.defineProperty(StringList.prototype, i, {\n                enumerable: false\n            });\n        }\n    }\n\n    idbModules.util.callback = callback;\n    idbModules.util.StringList = StringList;\n    idbModules.util.quote = function(arg) {\n        return \"\\\"\" + arg + \"\\\"\";\n    };\n\n}(idbModules));\n\n(function (idbModules) {\n    'use strict';\n\n    /**\n     * Polyfills missing features in the browser's native IndexedDB implementation.\n     * This is used for browsers that DON'T support WebSQL but DO support IndexedDB\n     */\n    function polyfill() {\n        if (navigator.userAgent.match(/MSIE/) ||\n            navigator.userAgent.match(/Trident/) ||\n            navigator.userAgent.match(/Edge/)) {\n            // Internet Explorer's native IndexedDB does not support compound keys\n            compoundKeyPolyfill();\n        }\n    }\n\n    /**\n     * Polyfills support for compound keys\n     */\n    function compoundKeyPolyfill() {\n        var cmp = IDBFactory.prototype.cmp;\n        var createObjectStore = IDBDatabase.prototype.createObjectStore;\n        var createIndex = IDBObjectStore.prototype.createIndex;\n        var add = IDBObjectStore.prototype.add;\n        var put = IDBObjectStore.prototype.put;\n        var indexGet = IDBIndex.prototype.get;\n        var indexGetKey = IDBIndex.prototype.getKey;\n        var indexCursor = IDBIndex.prototype.openCursor;\n        var indexKeyCursor = IDBIndex.prototype.openKeyCursor;\n        var storeGet = IDBObjectStore.prototype.get;\n        var storeDelete = IDBObjectStore.prototype.delete;\n        var storeCursor = IDBObjectStore.prototype.openCursor;\n        var storeKeyCursor = IDBObjectStore.prototype.openKeyCursor;\n        var bound = IDBKeyRange.bound;\n        var upperBound = IDBKeyRange.upperBound;\n        var lowerBound = IDBKeyRange.lowerBound;\n        var only = IDBKeyRange.only;\n        var requestResult = Object.getOwnPropertyDescriptor(IDBRequest.prototype, 'result');\n        var cursorPrimaryKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'primaryKey');\n        var cursorKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'key');\n        var cursorValue = Object.getOwnPropertyDescriptor(IDBCursorWithValue.prototype, 'value');\n\n        IDBFactory.prototype.cmp = function(key1, key2) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key1 instanceof Array) {\n                args[0] = encodeCompoundKey(key1);\n            }\n            if (key2 instanceof Array) {\n                args[1] = encodeCompoundKey(key2);\n            }\n            return cmp.apply(this, args);\n        };\n\n        IDBDatabase.prototype.createObjectStore = function(name, opts) {\n            if (opts && opts.keyPath instanceof Array) {\n                opts.keyPath = encodeCompoundKeyPath(opts.keyPath);\n            }\n            return createObjectStore.apply(this, arguments);\n        };\n\n        IDBObjectStore.prototype.createIndex = function(name, keyPath, opts) {\n            var args = Array.prototype.slice.call(arguments);\n            if (keyPath instanceof Array) {\n                args[1] = encodeCompoundKeyPath(keyPath);\n            }\n            return createIndex.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.add = function(value, key) {\n            return this.__insertData(add, arguments);\n        };\n\n        IDBObjectStore.prototype.put = function(value, key) {\n            return this.__insertData(put, arguments);\n        };\n\n        IDBObjectStore.prototype.__insertData = function(method, args) {\n            args = Array.prototype.slice.call(args);\n            var value = args[0];\n            var key = args[1];\n\n            // out-of-line key\n            if (key instanceof Array) {\n                args[1] = encodeCompoundKey(key);\n            }\n\n            if (typeof value === 'object') {\n                // inline key\n                if (isCompoundKey(this.keyPath)) {\n                    setInlineCompoundKey(value, this.keyPath);\n                }\n\n                // inline indexes\n                for (var i = 0; i < this.indexNames.length; i++) {\n                    var index = this.index(this.indexNames[i]);\n                    if (isCompoundKey(index.keyPath)) {\n                        try {\n                            setInlineCompoundKey(value, index.keyPath);\n                        }\n                        catch (e) {\n                            // The value doesn't have a valid key for this index.\n                        }\n                    }\n                }\n            }\n            return method.apply(this, args);\n        };\n\n        IDBIndex.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGet.apply(this, args);\n        };\n\n        IDBIndex.prototype.getKey = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGetKey.apply(this, args);\n        };\n\n        IDBIndex.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexCursor.apply(this, args);\n        };\n\n        IDBIndex.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexKeyCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeGet.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.delete = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeDelete.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeKeyCursor.apply(this, args);\n        };\n\n        IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen) {\n            var args = Array.prototype.slice.call(arguments);\n            if (lower instanceof Array) {\n                args[0] = encodeCompoundKey(lower);\n            }\n            if (upper instanceof Array) {\n                args[1] = encodeCompoundKey(upper);\n            }\n            return bound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.upperBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return upperBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.lowerBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return lowerBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.only = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return only.apply(IDBKeyRange, args);\n        };\n\n        Object.defineProperty(IDBRequest.prototype, 'result', {\n            enumerable: requestResult.enumerable,\n            configurable: requestResult.configurable,\n            get: function() {\n                var result = requestResult.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'primaryKey', {\n            enumerable: cursorPrimaryKey.enumerable,\n            configurable: cursorPrimaryKey.configurable,\n            get: function() {\n                var result = cursorPrimaryKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'key', {\n            enumerable: cursorKey.enumerable,\n            configurable: cursorKey.configurable,\n            get: function() {\n                var result = cursorKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursorWithValue.prototype, 'value', {\n            enumerable: cursorValue.enumerable,\n            configurable: cursorValue.configurable,\n            get: function() {\n                var result = cursorValue.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        try {\n            if (!IDBTransaction.VERSION_CHANGE) {\n                IDBTransaction.VERSION_CHANGE = 'versionchange';\n            }\n        }\n        catch (e) {}\n    }\n\n    var compoundKeysPropertyName = '__$$compoundKey';\n    var propertySeparatorRegExp = /\\$\\$/g;\n    var propertySeparator = '$$$$';         // \"$$\" after RegExp escaping\n    var keySeparator = '$_$';\n\n    function isCompoundKey(keyPath) {\n        return keyPath && (keyPath.indexOf(compoundKeysPropertyName + '.') === 0);\n    }\n\n    function encodeCompoundKeyPath(keyPath) {\n        // Encoded dotted properties\n        // [\"name.first\", \"name.last\"] ==> [\"name$$first\", \"name$$last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(/\\./g, propertySeparator);\n        }\n\n        // Encode the array as a single property\n        // [\"name$$first\", \"name$$last\"] => \"__$$compoundKey.name$$first$_$name$$last\"\n        return compoundKeysPropertyName + '.' + keyPath.join(keySeparator);\n    }\n\n    function decodeCompoundKeyPath(keyPath) {\n        // Remove the \"__$$compoundKey.\" prefix\n        keyPath = keyPath.substr(compoundKeysPropertyName.length + 1);\n\n        // Split the properties into an array\n        // \"name$$first$_$name$$last\" ==> [\"name$$first\", \"name$$last\"]\n        keyPath = keyPath.split(keySeparator);\n\n        // Decode dotted properties\n        // [\"name$$first\", \"name$$last\"] ==> [\"name.first\", \"name.last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(propertySeparatorRegExp, '.');\n        }\n        return keyPath;\n    }\n\n    function setInlineCompoundKey(value, encodedKeyPath) {\n        // Encode the key\n        var keyPath = decodeCompoundKeyPath(encodedKeyPath);\n        var key = idbModules.Key.getValue(value, keyPath);\n        var encodedKey = encodeCompoundKey(key);\n\n        // Store the encoded key inline\n        encodedKeyPath = encodedKeyPath.substr(compoundKeysPropertyName.length + 1);\n        value[compoundKeysPropertyName] = value[compoundKeysPropertyName] || {};\n        value[compoundKeysPropertyName][encodedKeyPath] = encodedKey;\n    }\n\n    function removeInlineCompoundKey(value) {\n        if (typeof value === \"string\" && isCompoundKey(value)) {\n            return decodeCompoundKey(value);\n        }\n        else if (value && typeof value[compoundKeysPropertyName] === \"object\") {\n            delete value[compoundKeysPropertyName];\n        }\n        return value;\n    }\n\n    function encodeCompoundKey(key) {\n        // Validate and encode the key\n        idbModules.Key.validate(key);\n        key = idbModules.Key.encode(key);\n\n        // Prepend the \"__$$compoundKey.\" prefix\n        key = compoundKeysPropertyName + '.' + key;\n\n        validateKeyLength(key);\n        return key;\n    }\n\n    function decodeCompoundKey(key) {\n        validateKeyLength(key);\n\n        // Remove the \"__$$compoundKey.\" prefix\n        key = key.substr(compoundKeysPropertyName.length + 1);\n\n        // Decode the key\n        key = idbModules.Key.decode(key);\n        return key;\n    }\n\n    function validateKeyLength(key) {\n        // BUG: Internet Explorer truncates string keys at 889 characters\n        if (key.length > 889) {\n            throw idbModules.util.createDOMException(\"DataError\", \"The encoded key is \" + key.length + \" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.\");\n        }\n    }\n\n    idbModules.polyfill = polyfill;\n})(idbModules);\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * Implementation of the Structured Cloning Algorithm.  Supports the\n     * following object types:\n     * - Blob\n     * - Boolean\n     * - Date object\n     * - File object (deserialized as Blob object).\n     * - Number object\n     * - RegExp object\n     * - String object\n     * This is accomplished by doing the following:\n     * 1) Using the cycle/decycle functions from:\n     *    https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n     * 2) Serializing/deserializing objects to/from string that don't work with\n     *    JSON.stringify and JSON.parse by using object specific logic (eg use \n     *    the FileReader API to convert a Blob or File object to a data URL.   \n     * 3) JSON.stringify and JSON.parse do the final conversion to/from string.\n     */\n    var Sca = (function(){\n        return {\n            decycle: function(object, callback) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert the following object types to string\n                // so that they can properly be encoded using JSON.stringify:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Make a deep copy of an object or array, assuring that there is at most\n                // one instance of each object or array in the resulting structure. The\n                // duplicate references (which might be forming cycles) are replaced with\n                // an object of the form\n                //      {$ref: PATH}\n                // where the PATH is a JSONPath string that locates the first occurance.\n                // So,\n                //      var a = [];\n                //      a[0] = a;\n                //      return JSON.stringify(JSON.decycle(a));\n                // produces the string '[{\"$ref\":\"$\"}]'.\n\n                // JSONPath is used to locate the unique object. $ indicates the top level of\n                // the object or array. [NUMBER] or [STRING] indicates a child member or\n                // property.\n\n                var objects = [],   // Keep a reference to each unique object or array\n                paths = [],     // Keep the path to each unique object or array\n                queuedObjects = [],\n                returnCallback = callback;\n\n                /**\n                 * Check the queue to see if all objects have been processed.\n                 * if they have, call the callback with the converted object.\n                 */\n                function checkForCompletion() {\n                    if (queuedObjects.length === 0) {\n                        returnCallback(derezObj);\n                    }    \n                }\n\n                /**\n                 * Convert a blob to a data URL.\n                 * @param {Blob} blob to convert.\n                 * @param {String} path of blob in object being encoded.\n                 */\n                function readBlobAsDataURL(blob, path) {\n                    var reader = new FileReader();\n                    reader.onloadend = function(loadedEvent) {\n                        var dataURL = loadedEvent.target.result;\n                        var blobtype = 'Blob';\n                        if (blob instanceof File) {\n                            //blobtype = 'File';\n                        }\n                        updateEncodedBlob(dataURL, path, blobtype);\n                    };\n                    reader.readAsDataURL(blob);\n                }\n                \n                /**\n                 * Async handler to update a blob object to a data URL for encoding.\n                 * @param {String} dataURL\n                 * @param {String} path\n                 * @param {String} blobtype - file if the blob is a file; blob otherwise\n                 */\n                function updateEncodedBlob(dataURL, path, blobtype) {\n                    var encoded = queuedObjects.indexOf(path);\n                    path = path.replace('$','derezObj');\n                    eval(path+'.$enc=\"'+dataURL+'\"');\n                    eval(path+'.$type=\"'+blobtype+'\"');\n                    queuedObjects.splice(encoded, 1);\n                    checkForCompletion();\n                }\n\n                function derez(value, path) {\n\n                    // The derez recurses through the object, producing the deep copy.\n\n                    var i,          // The loop counter\n                    name,       // Property name\n                    nu;         // The new object or array\n\n                    // typeof null === 'object', so go on if this value is really an object but not\n                    // one of the weird builtin objects.\n\n                    if (typeof value === 'object' && value !== null &&\n                        !(value instanceof Boolean) &&\n                        !(value instanceof Date)    &&\n                        !(value instanceof Number)  &&\n                        !(value instanceof RegExp)  &&\n                        !(value instanceof Blob)  &&\n                        !(value instanceof String)) {\n\n                        // If the value is an object or array, look to see if we have already\n                        // encountered it. If so, return a $ref/path object. This is a hard way,\n                        // linear search that will get slower as the number of unique objects grows.\n\n                        for (i = 0; i < objects.length; i += 1) {\n                            if (objects[i] === value) {\n                                return {$ref: paths[i]};\n                            }\n                        }\n\n                        // Otherwise, accumulate the unique value and its path.\n\n                        objects.push(value);\n                        paths.push(path);\n\n                        // If it is an array, replicate the array.\n\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            nu = [];\n                            for (i = 0; i < value.length; i += 1) {\n                                nu[i] = derez(value[i], path + '[' + i + ']');\n                            }\n                        } else {\n                            // If it is an object, replicate the object.\n                            nu = {};\n                            for (name in value) {\n                                if (Object.prototype.hasOwnProperty.call(value, name)) {\n                                    nu[name] = derez(value[name],\n                                     path + '[' + JSON.stringify(name) + ']');\n                                }\n                            }\n                        }\n\n                        return nu;\n                    } else if (value instanceof Blob) {\n                        //Queue blob for conversion\n                        queuedObjects.push(path);\n                        readBlobAsDataURL(value, path);\n                    } else if (value instanceof Boolean) {\n                        value = {\n                            '$type': 'Boolean',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof Date) {\n                        value = {\n                            '$type': 'Date',\n                            '$enc': value.getTime()\n                        };\n                    } else if (value instanceof Number) {\n                        value = {\n                            '$type': 'Number',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof RegExp) {\n                        value = {\n                            '$type': 'RegExp',\n                            '$enc': value.toString()\n                        };\n                    } else if (typeof value === 'number') {\n                        value = {\n                            '$type': 'number',\n                            '$enc': value + ''  // handles NaN, Infinity, Negative Infinity\n                        };\n                    } else if (value === undefined) {\n                        value = {\n                            '$type': 'undefined'\n                        };\n                    }\n                    return value;\n                }\n                var derezObj = derez(object, '$');\n                checkForCompletion();\n            },\n                \n            retrocycle: function retrocycle($) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert strings to the following object types \n                // so that they can properly be decoded:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Restore an object that was reduced by decycle. Members whose values are\n                // objects of the form\n                //      {$ref: PATH}\n                // are replaced with references to the value found by the PATH. This will\n                // restore cycles. The object will be mutated.\n\n                // The eval function is used to locate the values described by a PATH. The\n                // root object is kept in a $ variable. A regular expression is used to\n                // assure that the PATH is extremely well formed. The regexp contains nested\n                // * quantifiers. That has been known to have extremely bad performance\n                // problems on some browsers for very long strings. A PATH is expected to be\n                // reasonably short. A PATH is allowed to belong to a very restricted subset of\n                // Goessner's JSONPath.\n\n                // So,\n                //      var s = '[{\"$ref\":\"$\"}]';\n                //      return JSON.retrocycle(JSON.parse(s));\n                // produces an array containing a single element which is the array itself.\n\n                var px = /^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\n                \n                /**\n                 * Converts the specified data URL to a Blob object\n                 * @param {String} dataURL to convert to a Blob\n                 * @returns {Blob} the converted Blob object\n                 */\n                function dataURLToBlob(dataURL) {\n                    var BASE64_MARKER = ';base64,',\n                        contentType,\n                        parts,\n                        raw;\n                    if (dataURL.indexOf(BASE64_MARKER) === -1) {\n                        parts = dataURL.split(',');\n                        contentType = parts[0].split(':')[1];\n                        raw = parts[1];\n\n                        return new Blob([raw], {type: contentType});\n                    }\n\n                    parts = dataURL.split(BASE64_MARKER);\n                    contentType = parts[0].split(':')[1];\n                    raw = window.atob(parts[1]);\n                    var rawLength = raw.length;\n                    var uInt8Array = new Uint8Array(rawLength);\n\n                    for (var i = 0; i < rawLength; ++i) {\n                        uInt8Array[i] = raw.charCodeAt(i);\n                    }\n                    return new Blob([uInt8Array.buffer], {type: contentType});\n                }\n                \n                function rez(value) {\n                    // The rez function walks recursively through the object looking for $ref\n                    // properties. When it finds one that has a value that is a path, then it\n                    // replaces the $ref object with a reference to the value that is found by\n                    // the path.\n\n                    var i, item, name, path;\n\n                    if (value && typeof value === 'object') {\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            for (i = 0; i < value.length; i += 1) {\n                                item = value[i];\n                                if (item && typeof item === 'object') {\n                                    path = item.$ref;\n                                    if (typeof path === 'string' && px.test(path)) {\n                                        value[i] = eval(path);\n                                    } else {\n                                        value[i] = rez(item);\n                                    }\n                                }\n                            }\n                        } else {\n                            if (value.$type !== undefined) {\n                                switch(value.$type) {\n                                    case 'Blob':\n                                    case 'File':\n                                        value = dataURLToBlob(value.$enc);\n                                        break;\n                                    case 'Boolean':\n                                        value = Boolean(value.$enc === 'true');\n                                        break;\n                                    case 'Date':\n                                        value = new Date(value.$enc);\n                                        break;\n                                    case 'Number':\n                                        value = Number(value.$enc);\n                                        break;\n                                    case 'RegExp':\n                                        value = eval(value.$enc);\n                                        break;\n                                    case 'number':\n                                        value = parseFloat(value.$enc);\n                                        break;\n                                    case 'undefined':\n                                        value = undefined;\n                                        break;\n                                }\n                            } else {\n                                for (name in value) {\n                                    if (typeof value[name] === 'object') {\n                                        item = value[name];\n                                        if (item) {\n                                            path = item.$ref;\n                                            if (typeof path === 'string' && px.test(path)) {\n                                                value[name] = eval(path);\n                                            } else {\n                                                value[name] = rez(item);\n                                            }\n                                        }\n                                    }   \n                                }\n                            }\n                        }\n                    }\n                    return value;\n                }\n                return rez($);\n\n            },\n\n            /**\n             * Encode the specified object as a string.  Because of the asynchronus\n             * conversion of Blob/File to string, the encode function requires\n             * a callback\n             * @param {Object} val the value to convert.\n             * @param {function} callback the function to call once conversion is\n             * complete.  The callback gets called with the converted value.\n             */\n            \"encode\": function(val, callback){\n                function finishEncode(val) {\n                    callback(JSON.stringify(val));\n                }\n                this.decycle(val, finishEncode);                        \n            },\n                    \n            /**\n             * Deserialize the specified string to an object\n             * @param {String} val the serialized string\n             * @returns {Object} the deserialized object\n             */\n            \"decode\": function(val){\n                return this.retrocycle(JSON.parse(val));\n            }\n        };\n    }());\n    idbModules.Sca = Sca;\n}(idbModules));\n\n(function(idbModules) {\n    \"use strict\";\n\n    /**\n     * Encodes the keys based on their types. This is required to maintain collations\n     */\n    var collations = [\"undefined\", \"number\", \"date\", \"string\", \"array\"];\n\n    /**\n     * The sign values for numbers, ordered from least to greatest.\n     *  - \"negativeInfinity\": Sorts below all other values.\n     *  - \"bigNegative\": Negative values less than or equal to negative one.\n     *  - \"smallNegative\": Negative values between negative one and zero, noninclusive.\n     *  - \"smallPositive\": Positive values between zero and one, including zero but not one.\n     *  - \"largePositive\": Positive values greater than or equal to one.\n     *  - \"positiveInfinity\": Sorts above all other values.\n     */\n    var signValues = [\"negativeInfinity\", \"bigNegative\", \"smallNegative\", \"smallPositive\", \"bigPositive\", \"positiveInfinity\"];\n\n    var types = {\n        // Undefined is not a valid key type.  It's only used when there is no key.\n        undefined: {\n            encode: function(key) {\n                return collations.indexOf(\"undefined\") + \"-\";\n            },\n            decode: function(key) {\n                return undefined;\n            }\n        },\n\n        // Dates are encoded as ISO 8601 strings, in UTC time zone.\n        date: {\n            encode: function(key) {\n                return collations.indexOf(\"date\") + \"-\" + key.toJSON();\n            },\n            decode: function(key) {\n                return new Date(key.substring(2));\n            }\n        },\n\n        // Numbers are represented in a lexically sortable base-32 sign-exponent-mantissa\n        // notation.\n        //\n        // sign: takes a value between zero and five, inclusive. Represents infinite cases\n        //     and the signs of both the exponent and the fractional part of the number.\n        // exponent: paded to two base-32 digits, represented by the 32's compliment in the\n        //     \"smallPositive\" and \"bigNegative\" cases to ensure proper lexical sorting.\n        // mantissa: also called the fractional part. Normed 11-digit base-32 representation.\n        //     Represented by the 32's compliment in the \"smallNegative\" and \"bigNegative\"\n        //     cases to ensure proper lexical sorting.\n        number: {\n            // The encode step checks for six numeric cases and generates 14-digit encoded\n            // sign-exponent-mantissa strings.\n            encode: function(key) {\n                var key32 = Math.abs(key).toString(32);\n                // Get the index of the decimal.\n                var decimalIndex = key32.indexOf(\".\");\n                // Remove the decimal.\n                key32 = (decimalIndex !== -1) ? key32.replace(\".\", \"\") : key32;\n                // Get the index of the first significant digit.\n                var significantDigitIndex = key32.search(/[^0]/);\n                // Truncate leading zeros.\n                key32 = key32.slice(significantDigitIndex);\n                var sign, exponent = zeros(2), mantissa = zeros(11);\n\n                // Finite cases:\n                if (isFinite(key)) {\n                    // Negative cases:\n                    if (key < 0) {\n                        // Negative exponent case:\n                        if (key > -1) {\n                            sign = signValues.indexOf(\"smallNegative\");\n                            exponent = padBase32Exponent(significantDigitIndex);\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigNegative\");\n                            exponent = flipBase32(padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            ));\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                    }\n                    // Non-negative cases:\n                    else {\n                        // Negative exponent case:\n                        if (key < 1) {\n                            sign = signValues.indexOf(\"smallPositive\");\n                            exponent = flipBase32(padBase32Exponent(significantDigitIndex));\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigPositive\");\n                            exponent = padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            );\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                    }\n                }\n                // Infinite cases:\n                else {\n                    sign = signValues.indexOf(\n                        key > 0 ? \"positiveInfinity\" : \"negativeInfinity\"\n                    );\n                }\n\n                return collations.indexOf(\"number\") + \"-\" + sign + exponent + mantissa;\n            },\n            // The decode step must interpret the sign, reflip values encoded as the 32's complements,\n            // apply signs to the exponent and mantissa, do the base-32 power operation, and return\n            // the original JavaScript number values.\n            decode: function(key) {\n                var sign = +key.substr(2, 1);\n                var exponent = key.substr(3, 2);\n                var mantissa = key.substr(5, 11);\n\n                switch (signValues[sign]) {\n                    case \"negativeInfinity\":\n                        return -Infinity;\n                    case \"positiveInfinity\":\n                        return Infinity;\n                    case \"bigPositive\":\n                        return pow32(mantissa, exponent);\n                    case \"smallPositive\":\n                        exponent = negate(flipBase32(exponent));\n                        return pow32(mantissa, exponent);\n                    case \"smallNegative\":\n                        exponent = negate(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    case \"bigNegative\":\n                        exponent = flipBase32(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    default:\n                        throw new Error(\"Invalid number.\");\n                }\n            }\n        },\n\n        // Strings are encoded as JSON strings (with quotes and unicode characters escaped).\n        //\n        // IF the strings are in an array, then some extra encoding is done to make sorting work correctly:\n        // Since we can't force all strings to be the same length, we need to ensure that characters line-up properly\n        // for sorting, while also accounting for the extra characters that are added when the array itself is encoded as JSON.\n        // To do this, each character of the string is prepended with a dash (\"-\"), and a space is added to the end of the string.\n        // This effectively doubles the size of every string, but it ensures that when two arrays of strings are compared,\n        // the indexes of each string's characters line up with each other.\n        string: {\n            encode: function(key, inArray) {\n                if (inArray) {\n                    // prepend each character with a dash, and append a space to the end\n                    key = key.replace(/(.)/g, '-$1') + ' ';\n                }\n                return collations.indexOf(\"string\") + \"-\" + key;\n            },\n            decode: function(key, inArray) {\n                key = key.substring(2);\n                if (inArray) {\n                    // remove the space at the end, and the dash before each character\n                    key = key.substr(0, key.length - 1).replace(/-(.)/g, '$1');\n                }\n                return key;\n            }\n        },\n\n        // Arrays are encoded as JSON strings.\n        // An extra, value is added to each array during encoding to make empty arrays sort correctly.\n        array: {\n            encode: function(key) {\n                var encoded = [];\n                for (var i = 0; i < key.length; i++) {\n                    var item = key[i];\n                    var encodedItem = idbModules.Key.encode(item, true);        // encode the array item\n                    encoded[i] = encodedItem;\n                }\n                encoded.push(collations.indexOf(\"undefined\") + \"-\");            // append an extra item, so empty arrays sort correctly\n                return collations.indexOf(\"array\") + \"-\" + JSON.stringify(encoded);\n            },\n            decode: function(key) {\n                var decoded = JSON.parse(key.substring(2));\n                decoded.pop();                                                  // remove the extra item\n                for (var i = 0; i < decoded.length; i++) {\n                    var item = decoded[i];\n                    var decodedItem = idbModules.Key.decode(item, true);        // decode the item\n                    decoded[i] = decodedItem;\n                }\n                return decoded;\n            }\n        }\n    };\n\n    /**\n     * Return a padded base-32 exponent value.\n     * @param {number}\n     * @return {string}\n     */\n    function padBase32Exponent(n) {\n        n = n.toString(32);\n        return (n.length === 1) ? \"0\" + n : n;\n    }\n\n    /**\n     * Return a padded base-32 mantissa.\n     * @param {string}\n     * @return {string}\n     */\n    function padBase32Mantissa(s) {\n        return (s + zeros(11)).slice(0, 11);\n    }\n\n    /**\n     * Flips each digit of a base-32 encoded string.\n     * @param {string} encoded\n     */\n    function flipBase32(encoded) {\n        var flipped = \"\";\n        for (var i = 0; i < encoded.length; i++) {\n            flipped += (31 - parseInt(encoded[i], 32)).toString(32);\n        }\n        return flipped;\n    }\n\n    /**\n     * Base-32 power function.\n     * RESEARCH: This function does not precisely decode floats because it performs\n     * floating point arithmetic to recover values. But can the original values be\n     * recovered exactly?\n     * Someone may have already figured out a good way to store JavaScript floats as\n     * binary strings and convert back. Barring a better method, however, one route\n     * may be to generate decimal strings that `parseFloat` decodes predictably.\n     * @param {string}\n     * @param {string}\n     * @return {number}\n     */\n    function pow32(mantissa, exponent) {\n        var whole, fraction, expansion;\n        exponent = parseInt(exponent, 32);\n        if (exponent < 0) {\n            return roundToPrecision(\n                parseInt(mantissa, 32) * Math.pow(32, exponent - 10)\n            );\n        }\n        else {\n            if (exponent < 11) {\n                whole = mantissa.slice(0, exponent);\n                whole = parseInt(whole, 32);\n                fraction = mantissa.slice(exponent);\n                fraction = parseInt(fraction, 32) * Math.pow(32, exponent - 11);\n                return roundToPrecision(whole + fraction);\n            }\n            else {\n                expansion = mantissa + zeros(exponent - 11);\n                return parseInt(expansion, 32);\n            }\n        }\n    }\n\n    /**\n     *\n     */\n    function roundToPrecision(num, precision) {\n        precision = precision || 16;\n        return parseFloat(num.toPrecision(precision));\n    }\n\n    /**\n     * Returns a string of n zeros.\n     * @param {number}\n     * @return {string}\n     */\n    function zeros(n) {\n        var result = \"\";\n        while (n--) {\n            result = result + \"0\";\n        }\n        return result;\n    }\n\n    /**\n     * Negates numeric strings.\n     * @param {string}\n     * @return {string}\n     */\n    function negate(s) {\n        return \"-\" + s;\n    }\n\n    /**\n     * Returns the string \"number\", \"date\", \"string\", or \"array\".\n     */\n    function getType(key) {\n        if (key instanceof Date) {\n            return \"date\";\n        }\n        if (key instanceof Array) {\n            return \"array\";\n        }\n        return typeof key;\n    }\n\n    /**\n     * Keys must be strings, numbers, Dates, or Arrays\n     */\n    function validate(key) {\n        var type = getType(key);\n        if (type === \"array\") {\n            for (var i = 0; i < key.length; i++) {\n                validate(key[i]);\n            }\n        }\n        else if (!types[type] || (type !== \"string\" && isNaN(key))) {\n            throw idbModules.util.createDOMException(\"DataError\", \"Not a valid key\");\n        }\n    }\n\n    /**\n     * Returns the value of an inline key\n     * @param {object} source\n     * @param {string|array} keyPath\n     */\n    function getValue(source, keyPath) {\n        try {\n            if (keyPath instanceof Array) {\n                var arrayValue = [];\n                for (var i = 0; i < keyPath.length; i++) {\n                    arrayValue.push(eval(\"source.\" + keyPath[i]));\n                }\n                return arrayValue;\n            } else {\n                return eval(\"source.\" + keyPath);\n            }\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n\n    /**\n     * Sets the inline key value\n     * @param {object} source\n     * @param {string} keyPath\n     * @param {*} value\n     */\n    function setValue(source, keyPath, value) {\n        var props = keyPath.split('.');\n        for (var i = 0; i < props.length - 1; i++) {\n            var prop = props[i];\n            source = source[prop] = source[prop] || {};\n        }\n        source[props[props.length - 1]] = value;\n    }\n\n    /**\n     * Determines whether an index entry matches a multi-entry key value.\n     * @param {string} encodedEntry     The entry value (already encoded)\n     * @param {string} encodedKey       The full index key (already encoded)\n     * @returns {boolean}\n     */\n    function isMultiEntryMatch(encodedEntry, encodedKey) {\n        var keyType = collations[encodedKey.substring(0, 1)];\n\n        if (keyType === \"array\") {\n            return encodedKey.indexOf(encodedEntry) > 1;\n        }\n        else {\n            return encodedKey === encodedEntry;\n        }\n    }\n\n    function isKeyInRange(key, range) {\n        var lowerMatch = range.lower === undefined;\n        var upperMatch = range.upper === undefined;\n        var encodedKey = idbModules.Key.encode(key, true);\n\n        if (range.lower !== undefined) {\n            if (range.lowerOpen && encodedKey > range.__lower) {\n                lowerMatch = true;\n            }\n            if (!range.lowerOpen && encodedKey >= range.__lower) {\n                lowerMatch = true;\n            }\n        }\n        if (range.upper !== undefined) {\n            if (range.upperOpen && encodedKey < range.__upper) {\n                upperMatch = true;\n            }\n            if (!range.upperOpen && encodedKey <= range.__upper) {\n                upperMatch = true;\n            }\n        }\n\n        return lowerMatch && upperMatch;\n    }\n\n    function findMultiEntryMatches(keyEntry, range) {\n        var matches = [];\n\n        if (keyEntry instanceof Array) {\n            for (var i = 0; i < keyEntry.length; i++) {\n                var key = keyEntry[i];\n\n                if (key instanceof Array) {\n                    if (range.lower === range.upper) {\n                        continue;\n                    }\n                    if (key.length === 1) {\n                        key = key[0];\n                    } else {\n                        var nested = findMultiEntryMatches(key, range);\n                        if (nested.length > 0) {\n                            matches.push(key);\n                        }\n                        continue;\n                    }\n                }\n\n                if (isKeyInRange(key, range)) {\n                    matches.push(key);\n                }\n            }\n        } else {\n            if (isKeyInRange(keyEntry, range)) {\n                matches.push(keyEntry);\n            }\n        }\n        return matches;\n    }\n\n    idbModules.Key = {\n        encode: function(key, inArray) {\n            if (key === undefined) {\n                return null;\n            }\n            return types[getType(key)].encode(key, inArray);\n        },\n        decode: function(key, inArray) {\n            if (typeof key !== \"string\") {\n                return undefined;\n            }\n            return types[collations[key.substring(0, 1)]].decode(key, inArray);\n        },\n        validate: validate,\n        getValue: getValue,\n        setValue: setValue,\n        isMultiEntryMatch: isMultiEntryMatch,\n        findMultiEntryMatches: findMultiEntryMatches\n    };\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native Event object, for browsers that support it\n     * @returns {Event}\n     */\n    function createNativeEvent(type, debug) {\n        var event = new Event(type);\n        event.debug = debug;\n\n        // Make the \"target\" writable\n        Object.defineProperty(event, 'target', {\n            writable: true\n        });\n\n        return event;\n    }\n\n    /**\n     * A shim Event class, for browsers that don't allow us to create native Event objects.\n     * @constructor\n     */\n    function ShimEvent(type, debug) {\n        this.type = type;\n        this.debug = debug;\n        this.bubbles = false;\n        this.cancelable = false;\n        this.eventPhase = 0;\n        this.timeStamp = new Date().valueOf();\n    }\n\n    var useNativeEvent = false;\n    try {\n        // Test whether we can use the browser's native Event class\n        var test = createNativeEvent('test type', 'test debug');\n        var target = {test: 'test target'};\n        test.target = target;\n\n        if (test instanceof Event && test.type === 'test type' && test.debug === 'test debug' && test.target === target) {\n            // Native events work as expected\n            useNativeEvent = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeEvent) {\n        idbModules.Event = Event;\n        idbModules.IDBVersionChangeEvent = Event;\n        idbModules.util.createEvent = createNativeEvent;\n    }\n    else {\n        idbModules.Event = ShimEvent;\n        idbModules.IDBVersionChangeEvent = ShimEvent;\n        idbModules.util.createEvent = function(type, debug) {\n            return new ShimEvent(type, debug);\n        };\n    }\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native DOMException, for browsers that support it\n     * @returns {DOMException}\n     */\n    function createNativeDOMException(name, message) {\n        var e = new DOMException.prototype.constructor(0, message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Creates a native DOMError, for browsers that support it\n     * @returns {DOMError}\n     */\n    function createNativeDOMError(name, message) {\n        name = name || 'DOMError';\n        var e = new DOMError(name, message);\n        e.name === name || (e.name = name);\n        e.message === message || (e.message = message);\n        return e;\n    }\n\n    /**\n     * Creates a generic Error object\n     * @returns {Error}\n     */\n    function createError(name, message) {\n        var e = new Error(message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Logs detailed error information to the console.\n     * @param {string} name\n     * @param {string} message\n     * @param {string|Error|null} error\n     */\n    idbModules.util.logError = function(name, message, error) {\n        if (idbModules.DEBUG) {\n            if (error && error.message) {\n                error = error.message;\n            }\n\n            var method = typeof(console.error) === 'function' ? 'error' : 'log';\n            console[method](name + ': ' + message + '. ' + (error || ''));\n            console.trace && console.trace();\n        }\n    };\n\n    /**\n     * Finds the error argument.  This is useful because some WebSQL callbacks\n     * pass the error as the first argument, and some pass it as the second argument.\n     * @param {array} args\n     * @returns {Error|DOMException|undefined}\n     */\n    idbModules.util.findError = function(args) {\n        var err;\n        if (args) {\n            if (args.length === 1) {\n                return args[0];\n            }\n            for (var i = 0; i < args.length; i++) {\n                var arg = args[i];\n                if (arg instanceof Error || arg instanceof DOMException) {\n                    return arg;\n                }\n                else if (arg && typeof arg.message === \"string\") {\n                    err = arg;\n                }\n            }\n        }\n        return err;\n    };\n\n    var test, useNativeDOMException = false, useNativeDOMError = false;\n\n    // Test whether we can use the browser's native DOMException class\n    try {\n        test = createNativeDOMException('test name', 'test message');\n        if (test instanceof DOMException && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMException works as expected\n            useNativeDOMException = true;\n        }\n    }\n    catch (e) {}\n\n    // Test whether we can use the browser's native DOMError class\n    try {\n        test = createNativeDOMError('test name', 'test message');\n        if (test instanceof DOMError && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMError works as expected\n            useNativeDOMError = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeDOMException) {\n        idbModules.DOMException = DOMException;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMException(name, message);\n        };\n    }\n    else {\n        idbModules.DOMException = Error;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n\n    if (useNativeDOMError) {\n        idbModules.DOMError = DOMError;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMError(name, message);\n        };\n    }\n    else {\n        idbModules.DOMError = Error;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * The IDBRequest Object that is returns for all async calls\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api\n     */\n    function IDBRequest(){\n        this.onsuccess = this.onerror = this.result = this.error = this.source = this.transaction = null;\n        this.readyState = \"pending\";\n    }\n\n    /**\n     * The IDBOpenDBRequest called when a database is opened\n     */\n    function IDBOpenDBRequest(){\n        this.onblocked = this.onupgradeneeded = null;\n    }\n    IDBOpenDBRequest.prototype = new IDBRequest();\n    IDBOpenDBRequest.prototype.constructor = IDBOpenDBRequest;\n    \n    idbModules.IDBRequest = IDBRequest;\n    idbModules.IDBOpenDBRequest = IDBOpenDBRequest;\n    \n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB KeyRange object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#dfn-key-range\n     * @param {Object} lower\n     * @param {Object} upper\n     * @param {Object} lowerOpen\n     * @param {Object} upperOpen\n     */\n    function IDBKeyRange(lower, upper, lowerOpen, upperOpen){\n        if (lower !== undefined) {\n            idbModules.Key.validate(lower);\n        }\n        if (upper !== undefined) {\n            idbModules.Key.validate(upper);\n        }\n\n        this.lower = lower;\n        this.upper = upper;\n        this.lowerOpen = !!lowerOpen;\n        this.upperOpen = !!upperOpen;\n    }\n\n    IDBKeyRange.only = function(value){\n        return new IDBKeyRange(value, value, false, false);\n    };\n\n    IDBKeyRange.lowerBound = function(value, open){\n        return new IDBKeyRange(value, undefined, open, undefined);\n    };\n    IDBKeyRange.upperBound = function(value, open){\n        return new IDBKeyRange(undefined, value, undefined, open);\n    };\n    IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen){\n        return new IDBKeyRange(lower, upper, lowerOpen, upperOpen);\n    };\n\n    idbModules.IDBKeyRange = IDBKeyRange;\n\n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB Cursor Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBCursor\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @param {IDBObjectStore} store\n     * @param {IDBObjectStore|IDBIndex} source\n     * @param {string} keyColumnName\n     * @param {string} valueColumnName\n     * @param {boolean} count\n     */\n    function IDBCursor(range, direction, store, source, keyColumnName, valueColumnName, count){\n        // Calling openCursor on an index or objectstore with null is allowed but we treat it as undefined internally\n        if (range === null) {\n            range = undefined;\n        }\n        if (range !== undefined && !(range instanceof idbModules.IDBKeyRange)) {\n            range = new idbModules.IDBKeyRange(range, range, false, false);\n        }\n        store.transaction.__assertActive();\n        if (direction !== undefined && [\"next\", \"prev\", \"nextunique\", \"prevunique\"].indexOf(direction) === -1) {\n            throw new TypeError(direction + \"is not a valid cursor direction\");\n        }\n\n        this.source = source;\n        this.direction = direction || \"next\";\n        this.key = undefined;\n        this.primaryKey = undefined;\n        this.__store = store;\n        this.__range = range;\n        this.__req = new idbModules.IDBRequest();\n        this.__keyColumnName = keyColumnName;\n        this.__valueColumnName = valueColumnName;\n        this.__valueDecoder = valueColumnName === \"value\" ? idbModules.Sca : idbModules.Key;\n        this.__count = count;\n        this.__offset = -1; // Setting this to -1 as continue will set it to 0 anyway\n        this.__lastKeyContinued = undefined; // Used when continuing with a key\n        this.__multiEntryIndex = source instanceof idbModules.IDBIndex ? source.multiEntry : false;\n        this.__unique = this.direction.indexOf(\"unique\") !== -1;\n\n        if (range !== undefined) {\n            // Encode the key range and cache the encoded values, so we don't have to re-encode them over and over\n            range.__lower = range.lower !== undefined && idbModules.Key.encode(range.lower, this.__multiEntryIndex);\n            range.__upper = range.upper !== undefined && idbModules.Key.encode(range.upper, this.__multiEntryIndex);\n        }\n\n        this[\"continue\"]();\n    }\n\n    IDBCursor.prototype.__find = function (/* key, tx, success, error, recordsToLoad */) {\n        var args = Array.prototype.slice.call(arguments);\n        if (this.__multiEntryIndex) {\n            this.__findMultiEntry.apply(this, args);\n        } else {\n            this.__findBasic.apply(this, args);\n        }\n    };\n\n    IDBCursor.prototype.__findBasic = function (key, tx, success, error, recordsToLoad) {\n        recordsToLoad = recordsToLoad || 1;\n\n        var me = this;\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined || me.__range.upper !== undefined )) {\n            sql.push(\"AND\");\n            if (me.__range.lower !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.lowerOpen ? \">\" : \">=\"), \"?\");\n                sqlValues.push(me.__range.__lower);\n            }\n            (me.__range.lower !== undefined && me.__range.upper !== undefined) && sql.push(\"AND\");\n            if (me.__range.upper !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.upperOpen ? \"<\" : \"<=\"), \"?\");\n                sqlValues.push(me.__range.__upper);\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY\", quotedKeyColumnName, direction);\n            sql.push(\"LIMIT\", recordsToLoad, \"OFFSET\", me.__offset);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            if (me.__count) {\n                success(undefined, data.rows.length, undefined);\n            }\n            else if (data.rows.length > 1) {\n                me.__prefetchedData = data.rows;\n                me.__prefetchedIndex = 0;\n                idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for cursor\");\n                me.__decode(data.rows.item(0), success);\n            }\n            else if (data.rows.length === 1) {\n                me.__decode(data.rows.item(0), success);\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of cursors\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    IDBCursor.prototype.__findMultiEntry = function (key, tx, success, error) {\n        var me = this;\n\n        if (me.__prefetchedData && me.__prefetchedData.length === me.__prefetchedIndex) {\n            idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n            success(undefined, undefined, undefined);\n            return;\n        }\n\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined && me.__range.upper !== undefined)) {\n            if (me.__range.upper.indexOf(me.__range.lower) === 0) {\n                sql.push(\"AND\", quotedKeyColumnName, \"LIKE ?\");\n                sqlValues.push(\"%\" + me.__range.__lower.slice(0, -1) + \"%\");\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY key\", direction);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            me.__multiEntryOffset = data.rows.length;\n\n            if (data.rows.length > 0) {\n                var rows = [];\n\n                for (var i = 0; i < data.rows.length; i++) {\n                    var rowItem = data.rows.item(i);\n                    var rowKey = idbModules.Key.decode(rowItem[me.__keyColumnName], true);\n                    var matches = idbModules.Key.findMultiEntryMatches(rowKey, me.__range);\n\n                    for (var j = 0; j < matches.length; j++) {\n                        var matchingKey = matches[j];\n                        var clone = {\n                            matchingKey: idbModules.Key.encode(matchingKey, true),\n                            key: rowItem.key\n                        };\n                        clone[me.__keyColumnName] = rowItem[me.__keyColumnName];\n                        clone[me.__valueColumnName] = rowItem[me.__valueColumnName];\n                        rows.push(clone);\n                    }\n                }\n\n                var reverse = me.direction.indexOf(\"prev\") === 0;\n                rows.sort(function (a, b) {\n                    if (a.matchingKey.replace('[','z') < b.matchingKey.replace('[','z')) {\n                        return reverse ? 1 : -1;\n                    }\n                    if (a.matchingKey.replace('[','z') > b.matchingKey.replace('[','z')) {\n                        return reverse ? -1 : 1;\n                    }\n                    if (a.key < b.key) {\n                        return me.direction === \"prev\" ? 1 : -1;\n                    }\n                    if (a.key > b.key) {\n                        return me.direction === \"prev\" ? -1 : 1;\n                    }\n                    return 0;\n                });\n\n                me.__prefetchedData = {\n                    data: rows,\n                    length: rows.length,\n                    item: function (index) {\n                        return this.data[index];\n                    }\n                };\n                me.__prefetchedIndex = 0;\n\n                if (me.__count) {\n                    success(undefined, rows.length, undefined);\n                }\n                else if (rows.length > 1) {\n                    idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else if (rows.length === 1) {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    success(undefined, undefined, undefined);\n                }\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    /**\n     * Creates an \"onsuccess\" callback\n     * @private\n     */\n    IDBCursor.prototype.__onsuccess = function(success) {\n        var me = this;\n        return function(key, value, primaryKey) {\n            if (me.__count) {\n                success(value, me.__req);\n            }\n            else {\n                me.key = key === undefined ? null : key;\n                me.value = value === undefined ? null : value;\n                me.primaryKey = primaryKey === undefined ? null : primaryKey;\n                var result = key === undefined ? null : me;\n                success(result, me.__req);\n            }\n        };\n    };\n\n    IDBCursor.prototype.__decode = function (rowItem, callback) {\n        if (this.__multiEntryIndex && this.__unique) {\n            if (!this.__matchedKeys) {\n                this.__matchedKeys = {};\n            }\n            if (this.__matchedKeys[rowItem.matchingKey]) {\n                callback(undefined, undefined, undefined);\n                return;\n            }\n            this.__matchedKeys[rowItem.matchingKey] = true;\n        }\n        var key = idbModules.Key.decode(this.__multiEntryIndex ? rowItem.matchingKey : rowItem[this.__keyColumnName], this.__multiEntryIndex);\n        var val = this.__valueDecoder.decode(rowItem[this.__valueColumnName]);\n        var primaryKey = idbModules.Key.decode(rowItem.key);\n        callback(key, val, primaryKey);\n    };\n\n    IDBCursor.prototype[\"continue\"] = function (key) {\n        var recordsToPreloadOnContinue = idbModules.cursorPreloadPackSize || 100;\n        var me = this;\n\n        this.__store.transaction.__pushToQueue(me.__req, function cursorContinue(tx, args, success, error) {\n            me.__offset++;\n\n            if (me.__prefetchedData) {\n                // We have pre-loaded data for the cursor\n                me.__prefetchedIndex++;\n                if (me.__prefetchedIndex < me.__prefetchedData.length) {\n                    me.__decode(me.__prefetchedData.item(me.__prefetchedIndex), me.__onsuccess(success));\n                    return;\n                }\n            }\n\n            // No pre-fetched data, do query\n            me.__find(key, tx, me.__onsuccess(success), error, recordsToPreloadOnContinue);\n        });\n    };\n\n    IDBCursor.prototype.advance = function(count){\n        if (count <= 0) {\n            throw idbModules.util.createDOMException(\"Type Error\", \"Count is invalid - 0 or negative\", count);\n        }\n        var me = this;\n        this.__store.transaction.__pushToQueue(me.__req, function cursorAdvance(tx, args, success, error){\n            me.__offset += count;\n            me.__find(undefined, tx, me.__onsuccess(success), error);\n        });\n    };\n\n    IDBCursor.prototype.update = function(valueToUpdate){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return me.__store.transaction.__addToTransactionQueue(function cursorUpdate(tx, args, success, error){\n            idbModules.Sca.encode(valueToUpdate, function(encoded) {\n                me.__find(undefined, tx, function(key, value, primaryKey){\n                    var store = me.__store;\n                    var params = [encoded];\n                    var sql = [\"UPDATE\", idbModules.util.quote(store.name), \"SET value = ?\"];\n                    idbModules.Key.validate(primaryKey);\n\n                    // Also correct the indexes in the table\n                    for (var i = 0; i < store.indexNames.length; i++) {\n                        var index = store.__indexes[store.indexNames[i]];\n                        var indexKey = idbModules.Key.getValue(valueToUpdate, index.keyPath);\n                        sql.push(\",\", idbModules.util.quote(index.name), \"= ?\");\n                        params.push(idbModules.Key.encode(indexKey, index.multiEntry));\n                    }\n\n                    sql.push(\"WHERE key = ?\");\n                    params.push(idbModules.Key.encode(primaryKey));\n\n                    idbModules.DEBUG && console.log(sql.join(\" \"), encoded, key, primaryKey);\n                    tx.executeSql(sql.join(\" \"), params, function(tx, data){\n                        me.__prefetchedData = null;\n                        me.__prefetchedIndex = 0;\n                        if (data.rowsAffected === 1) {\n                            success(key);\n                        }\n                        else {\n                            error(\"No rows with key found\" + key);\n                        }\n                    }, function(tx, data){\n                        error(data);\n                    });\n                }, error);\n            });\n        });\n    };\n\n    IDBCursor.prototype[\"delete\"] = function(){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return this.__store.transaction.__addToTransactionQueue(function cursorDelete(tx, args, success, error){\n            me.__find(undefined, tx, function(key, value, primaryKey){\n                var sql = \"DELETE FROM  \" + idbModules.util.quote(me.__store.name) + \" WHERE key = ?\";\n                idbModules.DEBUG && console.log(sql, key, primaryKey);\n                idbModules.Key.validate(primaryKey);\n                tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data){\n                    me.__prefetchedData = null;\n                    me.__prefetchedIndex = 0;\n                    if (data.rowsAffected === 1) {\n                        // lower the offset or we will miss a row\n                        me.__offset--;\n                        success(undefined);\n                    }\n                    else {\n                        error(\"No rows with key found\" + key);\n                    }\n                }, function(tx, data){\n                    error(data);\n                });\n            }, error);\n        });\n    };\n\n    idbModules.IDBCursor = IDBCursor;\n}(idbModules));\n\n(function(idbModules, undefined) {\n    'use strict';\n\n    /**\n     * IDB Index\n     * http://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex\n     * @param {IDBObjectStore} store\n     * @param {IDBIndexProperties} indexProperties\n     * @constructor\n     */\n    function IDBIndex(store, indexProperties) {\n        this.objectStore = store;\n        this.name = indexProperties.columnName;\n        this.keyPath = indexProperties.keyPath;\n        this.multiEntry = indexProperties.optionalParams && indexProperties.optionalParams.multiEntry;\n        this.unique = indexProperties.optionalParams && indexProperties.optionalParams.unique;\n        this.__deleted = !!indexProperties.__deleted;\n    }\n\n    /**\n     * Clones an IDBIndex instance for a different IDBObjectStore instance.\n     * @param {IDBIndex} index\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBIndex.__clone = function(index, store) {\n        return new IDBIndex(store, {\n            columnName: index.name,\n            keyPath: index.keyPath,\n            optionalParams: {\n                multiEntry: index.multiEntry,\n                unique: index.unique\n            }\n        });\n    };\n\n    /**\n     * Creates a new index on an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @returns {IDBIndex}\n     * @protected\n     */\n    IDBIndex.__createIndex = function(store, index) {\n        var columnExists = !!store.__indexes[index.name] && store.__indexes[index.name].__deleted;\n\n        // Add the index to the IDBObjectStore\n        store.__indexes[index.name] = index;\n        store.indexNames.push(index.name);\n\n        // Create the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not create index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            function applyIndex(tx) {\n                // Update the object store's index list\n                IDBIndex.__updateIndexList(store, tx, function() {\n                    // Add index entries for all existing records\n                    tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(store.name), [], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Adding existing \" + store.name + \" records to the \" + index.name + \" index\");\n                        addIndexEntry(0);\n\n                        function addIndexEntry(i) {\n                            if (i < data.rows.length) {\n                                try {\n                                    var value = idbModules.Sca.decode(data.rows.item(i).value);\n                                    var indexKey = idbModules.Key.getValue(value, index.keyPath);\n                                    indexKey = idbModules.Key.encode(indexKey, index.multiEntry);\n\n                                    tx.executeSql(\"UPDATE \" + idbModules.util.quote(store.name) + \" set \" + idbModules.util.quote(index.name) + \" = ? where key = ?\", [indexKey, data.rows.item(i).key], function(tx, data) {\n                                        addIndexEntry(i + 1);\n                                    }, error);\n                                }\n                                catch (e) {\n                                    // Not a valid value to insert into index, so just continue\n                                    addIndexEntry(i + 1);\n                                }\n                            }\n                            else {\n                                success(store);\n                            }\n                        }\n                    }, error);\n                }, error);\n            }\n\n            if (columnExists) {\n                // For a previously existing index, just update the index entries in the existing column\n                applyIndex(tx);\n            }\n            else {\n                // For a new index, add a new column to the object store, then apply the index\n                var sql = [\"ALTER TABLE\", idbModules.util.quote(store.name), \"ADD\", idbModules.util.quote(index.name), \"BLOB\"].join(\" \");\n                idbModules.DEBUG && console.log(sql);\n                tx.executeSql(sql, [], applyIndex, error);\n            }\n        });\n    };\n\n    /**\n     * Deletes an index from an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @protected\n     */\n    IDBIndex.__deleteIndex = function(store, index) {\n        // Remove the index from the IDBObjectStore\n        store.__indexes[index.name].__deleted = true;\n        store.indexNames.splice(store.indexNames.indexOf(index.name), 1);\n\n        // Remove the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            // Update the object store's index list\n            IDBIndex.__updateIndexList(store, tx, success, error);\n        });\n    };\n\n    /**\n     * Updates index list for the given object store.\n     * @param {IDBObjectStore} store\n     * @param {object} tx\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBIndex.__updateIndexList = function(store, tx, success, failure) {\n        var indexList = {};\n        for (var i = 0; i < store.indexNames.length; i++) {\n            var idx = store.__indexes[store.indexNames[i]];\n            /** @type {IDBIndexProperties} **/\n            indexList[idx.name] = {\n                columnName: idx.name,\n                keyPath: idx.keyPath,\n                optionalParams: {\n                    unique: idx.unique,\n                    multiEntry: idx.multiEntry\n                },\n                deleted: !!idx.deleted\n            };\n        }\n\n        idbModules.DEBUG && console.log(\"Updating the index list for \" + store.name, indexList);\n        tx.executeSql(\"UPDATE __sys__ set indexList = ? where name = ?\", [JSON.stringify(indexList), store.name], function() {\n            success(store);\n        }, failure);\n    };\n\n    /**\n     * Retrieves index data for the given key\n     * @param {*|IDBKeyRange} key\n     * @param {string} opType\n     * @returns {IDBRequest}\n     * @private\n     */\n    IDBIndex.prototype.__fetchIndexData = function(key, opType) {\n        var me = this;\n        var hasKey, encodedKey;\n\n        // key is optional\n        if (arguments.length === 1) {\n            opType = key;\n            hasKey = false;\n        }\n        else {\n            idbModules.Key.validate(key);\n            encodedKey = idbModules.Key.encode(key, me.multiEntry);\n            hasKey = true;\n        }\n\n        return me.objectStore.transaction.__addToTransactionQueue(function fetchIndexData(tx, args, success, error) {\n            var sql = [\"SELECT * FROM\", idbModules.util.quote(me.objectStore.name), \"WHERE\", idbModules.util.quote(me.name), \"NOT NULL\"];\n            var sqlValues = [];\n            if (hasKey) {\n                if (me.multiEntry) {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"LIKE ?\");\n                    sqlValues.push(\"%\" + encodedKey + \"%\");\n                }\n                else {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"= ?\");\n                    sqlValues.push(encodedKey);\n                }\n            }\n            idbModules.DEBUG && console.log(\"Trying to fetch data for Index\", sql.join(\" \"), sqlValues);\n            tx.executeSql(sql.join(\" \"), sqlValues, function(tx, data) {\n                var recordCount = 0, record = null;\n                if (me.multiEntry) {\n                    for (var i = 0; i < data.rows.length; i++) {\n                        var row = data.rows.item(i);\n                        var rowKey = idbModules.Key.decode(row[me.name]);\n                        if (hasKey && idbModules.Key.isMultiEntryMatch(encodedKey, row[me.name])) {\n                            recordCount++;\n                            record = record || row;\n                        }\n                        else if (!hasKey && rowKey !== undefined) {\n                            recordCount = recordCount + (rowKey instanceof Array ? rowKey.length : 1);\n                            record = record || row;\n                        }\n                    }\n                }\n                else {\n                    recordCount = data.rows.length;\n                    record = recordCount && data.rows.item(0);\n                }\n\n                if (opType === \"count\") {\n                    success(recordCount);\n                }\n                else if (recordCount === 0) {\n                    success(undefined);\n                }\n                else if (opType === \"key\") {\n                    success(idbModules.Key.decode(record.key));\n                }\n                else { // when opType is value\n                    success(idbModules.Sca.decode(record.value));\n                }\n            }, error);\n        });\n    };\n\n    /**\n     * Opens a cursor over the given key range.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"value\").__req;\n    };\n\n    /**\n     * Opens a cursor over the given key range.  The cursor only includes key values, not data.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openKeyCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"key\").__req;\n    };\n\n    IDBIndex.prototype.get = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"value\");\n    };\n\n    IDBIndex.prototype.getKey = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"key\");\n    };\n\n    IDBIndex.prototype.count = function(key) {\n        // key is optional\n        if (key === undefined) {\n            return this.__fetchIndexData(\"count\");\n        }\n        else if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this.objectStore, this, this.name, \"value\", true).__req;\n        }\n        else {\n            return this.__fetchIndexData(key, \"count\");\n        }\n    };\n\n    idbModules.IDBIndex = IDBIndex;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * IndexedDB Object Store\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBObjectStore\n     * @param {IDBObjectStoreProperties} storeProperties\n     * @param {IDBTransaction} transaction\n     * @constructor\n     */\n    function IDBObjectStore(storeProperties, transaction) {\n        this.name = storeProperties.name;\n        this.keyPath = JSON.parse(storeProperties.keyPath);\n        this.transaction = transaction;\n\n        // autoInc is numeric (0/1) on WinPhone\n        this.autoIncrement = typeof storeProperties.autoInc === \"string\" ? storeProperties.autoInc === \"true\" : !!storeProperties.autoInc;\n\n        this.__indexes = {};\n        this.indexNames = new idbModules.util.StringList();\n        var indexList = JSON.parse(storeProperties.indexList);\n        for (var indexName in indexList) {\n            if (indexList.hasOwnProperty(indexName)) {\n                var index = new idbModules.IDBIndex(this, indexList[indexName]);\n                this.__indexes[index.name] = index;\n                if (!index.__deleted) {\n                    this.indexNames.push(index.name);\n                }\n            }\n        }\n    }\n\n    /**\n     * Clones an IDBObjectStore instance for a different IDBTransaction instance.\n     * @param {IDBObjectStore} store\n     * @param {IDBTransaction} transaction\n     * @protected\n     */\n    IDBObjectStore.__clone = function(store, transaction) {\n        var newStore = new IDBObjectStore({\n            name: store.name,\n            keyPath: JSON.stringify(store.keyPath),\n            autoInc: JSON.stringify(store.autoIncrement),\n            indexList: \"{}\"\n        }, transaction);\n        newStore.__indexes = store.__indexes;\n        newStore.indexNames = store.indexNames;\n        return newStore;\n    };\n\n    /**\n     * Creates a new object store in the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__createObjectStore = function(db, store) {\n        // Add the object store to the IDBDatabase\n        db.__objectStores[store.name] = store;\n        db.objectStoreNames.push(store.name);\n\n        // Add the object store to WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function createObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                throw idbModules.util.createDOMException(0, \"Could not create object store \\\"\" + store.name + \"\\\"\", err);\n            }\n\n            //key INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL UNIQUE\n            var sql = [\"CREATE TABLE\", idbModules.util.quote(store.name), \"(key BLOB\", store.autoIncrement ? \"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT\" : \"PRIMARY KEY\", \", value BLOB)\"].join(\" \");\n            idbModules.DEBUG && console.log(sql);\n            tx.executeSql(sql, [], function(tx, data) {\n                tx.executeSql(\"INSERT INTO __sys__ VALUES (?,?,?,?)\", [store.name, JSON.stringify(store.keyPath), store.autoIncrement, \"{}\"], function() {\n                    success(store);\n                }, error);\n            }, error);\n        });\n    };\n\n    /**\n     * Deletes an object store from the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__deleteObjectStore = function(db, store) {\n        // Remove the object store from the IDBDatabase\n        db.__objectStores[store.name] = undefined;\n        db.objectStoreNames.splice(db.objectStoreNames.indexOf(store.name), 1);\n\n        // Remove the object store from WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function deleteObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete ObjectStore\", err));\n            }\n\n            tx.executeSql(\"SELECT * FROM __sys__ where name = ?\", [store.name], function(tx, data) {\n                if (data.rows.length > 0) {\n                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(store.name), [], function() {\n                        tx.executeSql(\"DELETE FROM __sys__ WHERE name = ?\", [store.name], function() {\n                            success();\n                        }, error);\n                    }, error);\n                }\n            });\n        });\n    };\n\n    /**\n     * Determines whether the given inline or out-of-line key is valid, according to the object store's schema.\n     * @param {*} value     Used for inline keys\n     * @param {*} key       Used for out-of-line keys\n     * @private\n     */\n    IDBObjectStore.prototype.__validateKey = function(value, key) {\n        if (this.keyPath) {\n            if (typeof key !== \"undefined\") {\n                throw idbModules.util.createDOMException(\"DataError\", \"The object store uses in-line keys and the key parameter was provided\", this);\n            }\n            else if (value && typeof value === \"object\") {\n                key = idbModules.Key.getValue(value, this.keyPath);\n                if (key === undefined) {\n                    if (this.autoIncrement) {\n                        // A key will be generated\n                        return;\n                    }\n                    else {\n                        throw idbModules.util.createDOMException(\"DataError\", \"Could not eval key from keyPath\");\n                    }\n                }\n            }\n            else {\n                throw idbModules.util.createDOMException(\"DataError\", \"KeyPath was specified, but value was not an object\");\n            }\n        }\n        else {\n            if (typeof key === \"undefined\") {\n                if (this.autoIncrement) {\n                    // A key will be generated\n                    return;\n                }\n                else {\n                    throw idbModules.util.createDOMException(\"DataError\", \"The object store uses out-of-line keys and has no key generator and the key parameter was not provided. \", this);\n                }\n            }\n        }\n\n        idbModules.Key.validate(key);\n    };\n\n    /**\n     * From the store properties and object, extracts the value for the key in hte object Store\n     * If the table has auto increment, get the next in sequence\n     * @param {Object} tx\n     * @param {Object} value\n     * @param {Object} key\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBObjectStore.prototype.__deriveKey = function(tx, value, key, success, failure) {\n        var me = this;\n\n        function getNextAutoIncKey(callback) {\n            tx.executeSql(\"SELECT * FROM sqlite_sequence where name like ?\", [me.name], function(tx, data) {\n                if (data.rows.length !== 1) {\n                    callback(1);\n                }\n                else {\n                    callback(data.rows.item(0).seq + 1);\n                }\n            }, function(tx, error) {\n                failure(idbModules.util.createDOMException(\"DataError\", \"Could not get the auto increment value for key\", error));\n            });\n        }\n\n        if (me.keyPath) {\n            var primaryKey = idbModules.Key.getValue(value, me.keyPath);\n            if (primaryKey === undefined && me.autoIncrement) {\n                getNextAutoIncKey(function(primaryKey) {\n                    try {\n                        // Update the value with the new key\n                        idbModules.Key.setValue(value, me.keyPath, primaryKey);\n                        success(primaryKey);\n                    }\n                    catch (e) {\n                        failure(idbModules.util.createDOMException(\"DataError\", \"Could not assign a generated value to the keyPath\", e));\n                    }\n                });\n            }\n            else {\n                success(primaryKey);\n            }\n        }\n        else {\n            if (typeof key === \"undefined\" && me.autoIncrement) {\n                // Looks like this has autoInc, so lets get the next in sequence and return that.\n                getNextAutoIncKey(success);\n            }\n            else {\n                success(key);\n            }\n        }\n    };\n\n    IDBObjectStore.prototype.__insertData = function(tx, encoded, value, primaryKey, success, error) {\n        try {\n            var paramMap = {};\n            if (typeof primaryKey !== \"undefined\") {\n                idbModules.Key.validate(primaryKey);\n                paramMap.key = idbModules.Key.encode(primaryKey);\n            }\n            for (var i = 0; i < this.indexNames.length; i++) {\n                var index = this.__indexes[this.indexNames[i]];\n                paramMap[index.name] = idbModules.Key.encode(idbModules.Key.getValue(value, index.keyPath), index.multiEntry);\n            }\n            var sqlStart = [\"INSERT INTO \", idbModules.util.quote(this.name), \"(\"];\n            var sqlEnd = [\" VALUES (\"];\n            var sqlValues = [];\n            for (var key in paramMap) {\n                sqlStart.push(idbModules.util.quote(key) + \",\");\n                sqlEnd.push(\"?,\");\n                sqlValues.push(paramMap[key]);\n            }\n            // removing the trailing comma\n            sqlStart.push(\"value )\");\n            sqlEnd.push(\"?)\");\n            sqlValues.push(encoded);\n\n            var sql = sqlStart.join(\" \") + sqlEnd.join(\" \");\n\n            idbModules.DEBUG && console.log(\"SQL for adding\", sql, sqlValues);\n            tx.executeSql(sql, sqlValues, function(tx, data) {\n                idbModules.Sca.encode(primaryKey, function(primaryKey) {\n                    primaryKey = idbModules.Sca.decode(primaryKey);\n                    success(primaryKey);\n                });\n            }, function(tx, err) {\n                error(idbModules.util.createDOMError(\"ConstraintError\", err.message, err));\n            });\n        }\n        catch (e) {\n            error(e);\n        }\n    };\n\n    IDBObjectStore.prototype.add = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStoreAdd(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    me.__insertData(tx, encoded, value, primaryKey, success, error);\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.put = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStorePut(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    // First try to delete if the record exists\n                    idbModules.Key.validate(primaryKey);\n                    var sql = \"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\";\n                    tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Did the row with the\", primaryKey, \"exist? \", data.rowsAffected);\n                        me.__insertData(tx, encoded, value, primaryKey, success, error);\n                    }, function(tx, err) {\n                        error(err);\n                    });\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.get = function(key) {\n        // TODO Key should also be a key range\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        return me.transaction.__addToTransactionQueue(function objectStoreGet(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Fetched data\", data);\n                var value;\n                try {\n                    // Opera can't deal with the try-catch here.\n                    if (0 === data.rows.length) {\n                        return success();\n                    }\n\n                    value = idbModules.Sca.decode(data.rows.item(0).value);\n                }\n                catch (e) {\n                    // If no result is returned, or error occurs when parsing JSON\n                    idbModules.DEBUG && console.log(e);\n                }\n                success(value);\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype[\"delete\"] = function(key) {\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        me.transaction.__assertWritable();\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        // TODO key should also support key ranges\n        return me.transaction.__addToTransactionQueue(function objectStoreDelete(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Deleted from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.clear = function() {\n        var me = this;\n        me.transaction.__assertWritable();\n        return me.transaction.__addToTransactionQueue(function objectStoreClear(tx, args, success, error) {\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name), [], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Cleared all records from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.count = function(key) {\n        if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this, this, \"key\", \"value\", true).__req;\n        }\n        else {\n            var me = this;\n            var hasKey = false;\n\n            // key is optional\n            if (key !== undefined) {\n                hasKey = true;\n                idbModules.Key.validate(key);\n            }\n\n            return me.transaction.__addToTransactionQueue(function objectStoreCount(tx, args, success, error) {\n                var sql = \"SELECT * FROM \" + idbModules.util.quote(me.name) + (hasKey ? \" WHERE key = ?\" : \"\");\n                var sqlValues = [];\n                hasKey && sqlValues.push(idbModules.Key.encode(key));\n                tx.executeSql(sql, sqlValues, function(tx, data) {\n                    success(data.rows.length);\n                }, function(tx, err) {\n                    error(err);\n                });\n            });\n        }\n    };\n\n    IDBObjectStore.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this, this, \"key\", \"value\").__req;\n    };\n\n    IDBObjectStore.prototype.index = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n\n        return idbModules.IDBIndex.__clone(index, this);\n    };\n\n    /**\n     * Creates a new index on the object store.\n     * @param {string} indexName\n     * @param {string} keyPath\n     * @param {object} optionalParameters\n     * @returns {IDBIndex}\n     */\n    IDBObjectStore.prototype.createIndex = function(indexName, keyPath, optionalParameters) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        if (arguments.length === 1) {\n            throw new TypeError(\"No key path was specified\");\n        }\n        if (keyPath instanceof Array && optionalParameters && optionalParameters.multiEntry) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"The keyPath argument was an array and the multiEntry option is true.\");\n        }\n        if (this.__indexes[indexName] && !this.__indexes[indexName].__deleted) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Index \\\"\" + indexName + \"\\\" already exists on \" + this.name);\n        }\n\n        this.transaction.__assertVersionChange();\n\n        optionalParameters = optionalParameters || {};\n        /** @name IDBIndexProperties **/\n        var indexProperties = {\n            columnName: indexName,\n            keyPath: keyPath,\n            optionalParams: {\n                unique: !!optionalParameters.unique,\n                multiEntry: !!optionalParameters.multiEntry\n            }\n        };\n        var index = new idbModules.IDBIndex(this, indexProperties);\n        idbModules.IDBIndex.__createIndex(this, index);\n        return index;\n    };\n\n    IDBObjectStore.prototype.deleteIndex = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n        this.transaction.__assertVersionChange();\n\n        idbModules.IDBIndex.__deleteIndex(this, index);\n    };\n\n    idbModules.IDBObjectStore = IDBObjectStore;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var uniqueID = 0;\n\n    /**\n     * The IndexedDB Transaction\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBTransaction\n     * @param {IDBDatabase} db\n     * @param {string[]} storeNames\n     * @param {string} mode\n     * @constructor\n     */\n    function IDBTransaction(db, storeNames, mode) {\n        this.__id = ++uniqueID; // for debugging simultaneous transactions\n        this.__active = true;\n        this.__running = false;\n        this.__errored = false;\n        this.__requests = [];\n        this.__storeNames = storeNames;\n        this.mode = mode;\n        this.db = db;\n        this.error = null;\n        this.onabort = this.onerror = this.oncomplete = null;\n\n        // Kick off the transaction as soon as all synchronous code is done.\n        var me = this;\n        setTimeout(function() { me.__executeRequests(); }, 0);\n    }\n\n    IDBTransaction.prototype.__executeRequests = function() {\n        if (this.__running) {\n            idbModules.DEBUG && console.log(\"Looks like the request set is already running\", this.mode);\n            return;\n        }\n\n        this.__running = true;\n        var me = this;\n\n        me.db.__db.transaction(function executeRequests(tx) {\n                me.__tx = tx;\n                var q = null, i = 0;\n\n                function success(result, req) {\n                    if (req) {\n                        q.req = req;// Need to do this in case of cursors\n                    }\n                    q.req.readyState = \"done\";\n                    q.req.result = result;\n                    delete q.req.error;\n                    var e = idbModules.util.createEvent(\"success\");\n                    idbModules.util.callback(\"onsuccess\", q.req, e);\n                    i++;\n                    executeNextRequest();\n                }\n\n                function error(tx, err) {\n                    err = idbModules.util.findError(arguments);\n                    try {\n                        // Fire an error event for the current IDBRequest\n                        q.req.readyState = \"done\";\n                        q.req.error = err || \"DOMError\";\n                        q.req.result = undefined;\n                        var e = idbModules.util.createEvent(\"error\", err);\n                        idbModules.util.callback(\"onerror\", q.req, e);\n                    }\n                    finally {\n                        // Fire an error event for the transaction\n                        transactionError(err);\n                    }\n                }\n\n                function executeNextRequest() {\n                    if (i >= me.__requests.length) {\n                        // All requests in the transaction are done\n                        me.__requests = [];\n                        if (me.__active) {\n                            me.__active = false;\n                            transactionFinished();\n                        }\n                    }\n                    else {\n                        try {\n                            q = me.__requests[i];\n                            q.op(tx, q.args, success, error);\n                        }\n                        catch (e) {\n                            error(e);\n                        }\n                    }\n                }\n\n                executeNextRequest();\n            },\n\n            function webSqlError(err) {\n                transactionError(err);\n            }\n        );\n\n        function transactionError(err) {\n            idbModules.util.logError(\"Error\", \"An error occurred in a transaction\", err);\n\n            if (me.__errored) {\n                // We've already called \"onerror\", \"onabort\", or thrown, so don't do it again.\n                return;\n            }\n\n            me.__errored = true;\n\n            if (!me.__active) {\n                // The transaction has already completed, so we can't call \"onerror\" or \"onabort\".\n                // So throw the error instead.\n                throw err;\n            }\n\n            try {\n                me.error = err;\n                var evt = idbModules.util.createEvent(\"error\");\n                idbModules.util.callback(\"onerror\", me, evt);\n                idbModules.util.callback(\"onerror\", me.db, evt);\n            }\n            finally {\n                me.abort();\n            }\n        }\n\n        function transactionFinished() {\n            idbModules.DEBUG && console.log(\"Transaction completed\");\n            var evt = idbModules.util.createEvent(\"complete\");\n            try {\n                idbModules.util.callback(\"oncomplete\", me, evt);\n                idbModules.util.callback(\"__oncomplete\", me, evt);\n            }\n            catch (e) {\n                // An error occurred in the \"oncomplete\" handler.\n                // It's too late to call \"onerror\" or \"onabort\". Throw a global error instead.\n                // (this may seem odd/bad, but it's how all native IndexedDB implementations work)\n                me.__errored = true;\n                throw e;\n            }\n        }\n    };\n\n    /**\n     * Creates a new IDBRequest for the transaction.\n     * NOTE: The transaction is not queued util you call {@link IDBTransaction#__pushToQueue}\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__createRequest = function() {\n        var request = new idbModules.IDBRequest();\n        request.source = this.db;\n        request.transaction = this;\n        return request;\n    };\n\n    /**\n     * Adds a callback function to the transaction queue\n     * @param {function} callback\n     * @param {*} args\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__addToTransactionQueue = function(callback, args) {\n        var request = this.__createRequest();\n        this.__pushToQueue(request, callback, args);\n        return request;\n    };\n\n    /**\n     * Adds an IDBRequest to the transaction queue\n     * @param {IDBRequest} request\n     * @param {function} callback\n     * @param {*} args\n     * @protected\n     */\n    IDBTransaction.prototype.__pushToQueue = function(request, callback, args) {\n        this.__assertActive();\n        this.__requests.push({\n            \"op\": callback,\n            \"args\": args,\n            \"req\": request\n        });\n    };\n\n    IDBTransaction.prototype.__assertActive = function() {\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"TransactionInactiveError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertWritable = function() {\n        if (this.mode === IDBTransaction.READ_ONLY) {\n            throw idbModules.util.createDOMException(\"ReadOnlyError\", \"The transaction is read only\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertVersionChange = function() {\n        IDBTransaction.__assertVersionChange(this);\n    };\n\n    IDBTransaction.__assertVersionChange = function(tx) {\n        if (!tx || tx.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"Not a version transaction\");\n        }\n    };\n\n    /**\n     * Returns the specified object store.\n     * @param {string} objectStoreName\n     * @returns {IDBObjectStore}\n     */\n    IDBTransaction.prototype.objectStore = function(objectStoreName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n        if (this.__storeNames.indexOf(objectStoreName) === -1 && this.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" is not participating in this transaction\");\n        }\n        var store = this.db.__objectStores[objectStoreName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" does not exist in \" + this.db.name);\n        }\n\n        return idbModules.IDBObjectStore.__clone(store, this);\n    };\n\n    IDBTransaction.prototype.abort = function() {\n        var me = this;\n        idbModules.DEBUG && console.log(\"The transaction was aborted\", me);\n        me.__active = false;\n        var evt = idbModules.util.createEvent(\"abort\");\n\n        // Fire the \"onabort\" event asynchronously, so errors don't bubble\n        setTimeout(function() {\n            idbModules.util.callback(\"onabort\", me, evt);\n        }, 0);\n    };\n\n    IDBTransaction.READ_ONLY = \"readonly\";\n    IDBTransaction.READ_WRITE = \"readwrite\";\n    IDBTransaction.VERSION_CHANGE = \"versionchange\";\n\n    idbModules.IDBTransaction = IDBTransaction;\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * IDB Database Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#database-interface\n     * @constructor\n     */\n    function IDBDatabase(db, name, version, storeProperties){\n        this.__db = db;\n        this.__closed = false;\n        this.version = version;\n        this.name = name;\n        this.onabort = this.onerror = this.onversionchange = null;\n\n        this.__objectStores = {};\n        this.objectStoreNames = new idbModules.util.StringList();\n        for (var i = 0; i < storeProperties.rows.length; i++) {\n            var store = new idbModules.IDBObjectStore(storeProperties.rows.item(i));\n            this.__objectStores[store.name] = store;\n            this.objectStoreNames.push(store.name);\n        }\n    }\n\n    /**\n     * Creates a new object store.\n     * @param {string} storeName\n     * @param {object} [createOptions]\n     * @returns {IDBObjectStore}\n     */\n    IDBDatabase.prototype.createObjectStore = function(storeName, createOptions){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (this.__objectStores[storeName]) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Object store \\\"\" + storeName + \"\\\" already exists in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        createOptions = createOptions || {};\n        /** @name IDBObjectStoreProperties **/\n        var storeProperties = {\n            name: storeName,\n            keyPath: JSON.stringify(createOptions.keyPath || null),\n            autoInc: JSON.stringify(createOptions.autoIncrement),\n            indexList: \"{}\"\n        };\n        var store = new idbModules.IDBObjectStore(storeProperties, this.__versionTransaction);\n        idbModules.IDBObjectStore.__createObjectStore(this, store);\n        return store;\n    };\n\n    /**\n     * Deletes an object store.\n     * @param {string} storeName\n     */\n    IDBDatabase.prototype.deleteObjectStore = function(storeName){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        var store = this.__objectStores[storeName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Object store \\\"\" + storeName + \"\\\" does not exist in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        idbModules.IDBObjectStore.__deleteObjectStore(this, store);\n    };\n\n    IDBDatabase.prototype.close = function(){\n        this.__closed = true;\n    };\n\n    /**\n     * Starts a new transaction.\n     * @param {string|string[]} storeNames\n     * @param {string} mode\n     * @returns {IDBTransaction}\n     */\n    IDBDatabase.prototype.transaction = function(storeNames, mode){\n        if (this.__closed) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"An attempt was made to start a new transaction on a database connection that is not open\");\n        }\n\n        if (typeof mode === \"number\") {\n            mode = mode === 1 ? IDBTransaction.READ_WRITE : IDBTransaction.READ_ONLY;\n            idbModules.DEBUG && console.log(\"Mode should be a string, but was specified as \", mode);\n        }\n        else {\n            mode = mode || IDBTransaction.READ_ONLY;\n        }\n\n        if (mode !== IDBTransaction.READ_ONLY && mode !== IDBTransaction.READ_WRITE) {\n            throw new TypeError(\"Invalid transaction mode: \" + mode);\n        }\n\n        storeNames = typeof storeNames === \"string\" ? [storeNames] : storeNames;\n        if (storeNames.length === 0) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"No object store names were specified\");\n        }\n        for (var i = 0; i < storeNames.length; i++) {\n            if (!this.objectStoreNames.contains(storeNames[i])) {\n                throw idbModules.util.createDOMException(\"NotFoundError\", \"The \\\"\" + storeNames[i] + \"\\\" object store does not exist\");\n            }\n        }\n\n        var transaction = new idbModules.IDBTransaction(this, storeNames, mode);\n        return transaction;\n    };\n    \n    idbModules.IDBDatabase = IDBDatabase;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var DEFAULT_DB_SIZE = 4 * 1024 * 1024;\n    var sysdb;\n\n    /**\n     * Craetes the sysDB to keep track of version numbers for databases\n     **/\n    function createSysDB(success, failure) {\n        function sysDbCreateError(tx, err) {\n            err = idbModules.util.findError(arguments);\n            idbModules.DEBUG && console.log(\"Error in sysdb transaction - when creating dbVersions\", err);\n            failure(err);\n        }\n\n        if (sysdb) {\n            success();\n        }\n        else {\n            sysdb = window.openDatabase(\"__sysdb__\", 1, \"System Database\", DEFAULT_DB_SIZE);\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);\", [], success, sysDbCreateError);\n            }, sysDbCreateError);\n        }\n    }\n\n    /**\n     * IDBFactory Class\n     * https://w3c.github.io/IndexedDB/#idl-def-IDBFactory\n     * @constructor\n     */\n    function IDBFactory() {\n        this.modules = idbModules;\n    }\n\n    /**\n     * The IndexedDB Method to create a new database and return the DB\n     * @param {string} name\n     * @param {number} version\n     */\n    IDBFactory.prototype.open = function(name, version) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDbCreateError = false;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        else if (arguments.length === 2) {\n            version = parseFloat(version);\n            if (isNaN(version) || !isFinite(version) || version <= 0) {\n                throw new TypeError('Invalid database version: ' + version);\n            }\n        }\n        name = name + ''; // cast to a string\n\n        function dbCreateError(tx, err) {\n            if (calledDbCreateError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            calledDbCreateError = true;\n            var evt = idbModules.util.createEvent(\"error\", arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            idbModules.util.callback(\"onerror\", req, evt);\n        }\n\n        function openDB(oldVersion) {\n            var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n            req.readyState = \"done\";\n            if (typeof version === \"undefined\") {\n                version = oldVersion || 1;\n            }\n            if (version <= 0 || oldVersion > version) {\n                var err = idbModules.util.createDOMError(\"VersionError\", \"An attempt was made to open a database using a lower version than the existing version.\", version);\n                dbCreateError(err);\n                return;\n            }\n\n            db.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)\", [], function() {\n                    tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                        var e = idbModules.util.createEvent(\"success\");\n                        req.source = req.result = new idbModules.IDBDatabase(db, name, version, data);\n                        if (oldVersion < version) {\n                            // DB Upgrade in progress\n                            sysdb.transaction(function(systx) {\n                                systx.executeSql(\"UPDATE dbVersions set version = ? where name = ?\", [version, name], function() {\n                                    var e = idbModules.util.createEvent(\"upgradeneeded\");\n                                    e.oldVersion = oldVersion;\n                                    e.newVersion = version;\n                                    req.transaction = req.result.__versionTransaction = new idbModules.IDBTransaction(req.source, [], idbModules.IDBTransaction.VERSION_CHANGE);\n                                    req.transaction.__addToTransactionQueue(function onupgradeneeded(tx, args, success) {\n                                        idbModules.util.callback(\"onupgradeneeded\", req, e);\n                                        success();\n                                    });\n                                    req.transaction.__oncomplete = function() {\n                                        req.transaction = null;\n                                        var e = idbModules.util.createEvent(\"success\");\n                                        idbModules.util.callback(\"onsuccess\", req, e);\n                                    };\n                                }, dbCreateError);\n                            }, dbCreateError);\n                        } else {\n                            idbModules.util.callback(\"onsuccess\", req, e);\n                        }\n                    }, dbCreateError);\n                }, dbCreateError);\n            }, dbCreateError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        // Database with this name does not exist\n                        tx.executeSql(\"INSERT INTO dbVersions VALUES (?,?)\", [name, version || 1], function() {\n                            openDB(0);\n                        }, dbCreateError);\n                    } else {\n                        openDB(data.rows.item(0).version);\n                    }\n                }, dbCreateError);\n            }, dbCreateError);\n        }, dbCreateError);\n\n        return req;\n    };\n\n    /**\n     * Deletes a database\n     * @param {string} name\n     * @returns {IDBOpenDBRequest}\n     */\n    IDBFactory.prototype.deleteDatabase = function(name) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDBError = false;\n        var version = null;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        name = name + ''; // cast to a string\n\n        function dbError(tx, err) {\n            if (calledDBError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            var e = idbModules.util.createEvent(\"error\");\n            e.debug = arguments;\n            idbModules.util.callback(\"onerror\", req, e);\n            calledDBError = true;\n        }\n\n        function deleteFromDbVersions() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"DELETE FROM dbVersions where name = ? \", [name], function() {\n                    req.result = undefined;\n                    var e = idbModules.util.createEvent(\"success\");\n                    e.newVersion = null;\n                    e.oldVersion = version;\n                    idbModules.util.callback(\"onsuccess\", req, e);\n                }, dbError);\n            }, dbError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        req.result = undefined;\n                        var e = idbModules.util.createEvent(\"success\");\n                        e.newVersion = null;\n                        e.oldVersion = version;\n                        idbModules.util.callback(\"onsuccess\", req, e);\n                        return;\n                    }\n                    version = data.rows.item(0).version;\n                    var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n                    db.transaction(function(tx) {\n                        tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                            var tables = data.rows;\n                            (function deleteTables(i) {\n                                if (i >= tables.length) {\n                                    // If all tables are deleted, delete the housekeeping tables\n                                    tx.executeSql(\"DROP TABLE IF EXISTS __sys__\", [], function() {\n                                        // Finally, delete the record for this DB from sysdb\n                                        deleteFromDbVersions();\n                                    }, dbError);\n                                } else {\n                                    // Delete all tables in this database, maintained in the sys table\n                                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(tables.item(i).name), [], function() {\n                                        deleteTables(i + 1);\n                                    }, function() {\n                                        deleteTables(i + 1);\n                                    });\n                                }\n                            }(0));\n                        }, function(e) {\n                            // __sysdb table does not exist, but that does not mean delete did not happen\n                            deleteFromDbVersions();\n                        });\n                    });\n                }, dbError);\n            }, dbError);\n        }, dbError);\n\n        return req;\n    };\n\n    /**\n     * Compares two keys\n     * @param key1\n     * @param key2\n     * @returns {number}\n     */\n    IDBFactory.prototype.cmp = function(key1, key2) {\n        if (arguments.length < 2) {\n            throw new TypeError(\"You must provide two keys to be compared\");\n        }\n\n        idbModules.Key.validate(key1);\n        idbModules.Key.validate(key2);\n        var encodedKey1 = idbModules.Key.encode(key1);\n        var encodedKey2 = idbModules.Key.encode(key2);\n        var result = encodedKey1 > encodedKey2 ? 1 : encodedKey1 === encodedKey2 ? 0 : -1;\n        \n        if (idbModules.DEBUG) {\n            // verify that the keys encoded correctly\n            var decodedKey1 = idbModules.Key.decode(encodedKey1);\n            var decodedKey2 = idbModules.Key.decode(encodedKey2);\n            if (typeof key1 === \"object\") {\n                key1 = JSON.stringify(key1);\n                decodedKey1 = JSON.stringify(decodedKey1);\n            }\n            if (typeof key2 === \"object\") {\n                key2 = JSON.stringify(key2);\n                decodedKey2 = JSON.stringify(decodedKey2);\n            }\n\n            // encoding/decoding mismatches are usually due to a loss of floating-point precision\n            if (decodedKey1 !== key1) {\n                console.warn(key1 + ' was incorrectly encoded as ' + decodedKey1);\n            }\n            if (decodedKey2 !== key2) {\n                console.warn(key2 + ' was incorrectly encoded as ' + decodedKey2);\n            }\n        }\n        \n        return result;\n    };\n\n\n    idbModules.shimIndexedDB = new IDBFactory();\n    idbModules.IDBFactory = IDBFactory;\n}(idbModules));\n\n(function(window, idbModules){\n    'use strict';\n\n    function shim(name, value) {\n        try {\n            // Try setting the property. This will fail if the property is read-only.\n            window[name] = value;\n        }\n        catch (e) {}\n\n        if (window[name] !== value && Object.defineProperty) {\n            // Setting a read-only property failed, so try re-defining the property\n            try {\n                Object.defineProperty(window, name, {\n                    value: value\n                });\n            }\n            catch (e) {}\n\n            if (window[name] !== value) {\n                window.console && console.warn && console.warn('Unable to shim ' + name);\n            }\n        }\n    }\n\n    shim('shimIndexedDB', idbModules.shimIndexedDB);\n    if (window.shimIndexedDB) {\n        window.shimIndexedDB.__useShim = function(){\n            if (typeof window.openDatabase !== \"undefined\") {\n                // Polyfill ALL of IndexedDB, using WebSQL\n                shim('indexedDB', idbModules.shimIndexedDB);\n                shim('IDBFactory', idbModules.IDBFactory);\n                shim('IDBDatabase', idbModules.IDBDatabase);\n                shim('IDBObjectStore', idbModules.IDBObjectStore);\n                shim('IDBIndex', idbModules.IDBIndex);\n                shim('IDBTransaction', idbModules.IDBTransaction);\n                shim('IDBCursor', idbModules.IDBCursor);\n                shim('IDBKeyRange', idbModules.IDBKeyRange);\n                shim('IDBRequest', idbModules.IDBRequest);\n                shim('IDBOpenDBRequest', idbModules.IDBOpenDBRequest);\n                shim('IDBVersionChangeEvent', idbModules.IDBVersionChangeEvent);\n            }\n            else if (typeof window.indexedDB === \"object\") {\n                // Polyfill the missing IndexedDB features\n                idbModules.polyfill();\n            }\n        };\n\n        window.shimIndexedDB.__debug = function(val){\n            idbModules.DEBUG = val;\n        };\n    }\n    \n    // Workaround to prevent an error in Firefox\n    if(!('indexedDB' in window)) {\n        window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.oIndexedDB || window.msIndexedDB;\n    }\n    \n    // Detect browsers with known IndexedDb issues (e.g. Android pre-4.4)\n    var poorIndexedDbSupport = false;\n    if (navigator.userAgent.match(/Android 2/) || navigator.userAgent.match(/Android 3/) || navigator.userAgent.match(/Android 4\\.[0-3]/)) {\n        /* Chrome is an exception. It supports IndexedDb */\n        if (!navigator.userAgent.match(/Chrome/)) {\n            poorIndexedDbSupport = true;\n        }\n    }\n\n    if ((typeof window.indexedDB === \"undefined\" || !window.indexedDB || poorIndexedDbSupport) && typeof window.openDatabase !== \"undefined\") {\n        window.shimIndexedDB.__useShim();\n    }\n    else {\n        window.IDBDatabase = window.IDBDatabase || window.webkitIDBDatabase;\n        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;\n        window.IDBCursor = window.IDBCursor || window.webkitIDBCursor;\n        window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;\n        if(!window.IDBTransaction){\n            window.IDBTransaction = {};\n        }\n        /* Some browsers (e.g. Chrome 18 on Android) support IndexedDb but do not allow writing of these properties */\n        try {\n            window.IDBTransaction.READ_ONLY = window.IDBTransaction.READ_ONLY || \"readonly\";\n            window.IDBTransaction.READ_WRITE = window.IDBTransaction.READ_WRITE || \"readwrite\";\n        } catch (e) {}\n    }\n    \n}(window, idbModules));\n\n\n},{}],14:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],15:[function(require,module,exports){\n'use strict';\n\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Log = undefined;\n\nvar _loglevel = require('loglevel');\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar originalFactory = _loglevel2.default.methodFactory;\n\n_loglevel2.default.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  var rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod('Kinvey: ' + message);\n  };\n};\n\n_loglevel2.default.setLevel(_loglevel2.default.levels.ERROR);\nexports.Log = _loglevel2.default;\n\n},{\"loglevel\":227}],17:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Acl = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar aclAttribute = process.env.KINVEY_ACL_ATTRIBUTE || '_acl';\n\n/**\n * Wrapper for reading and setting permissions on an entity level.\n *\n * @example\n * var entity = { _acl: {} };\n * var acl = new Kinvey.Acl(entity);\n */\n\nvar Acl = exports.Acl = function () {\n  function Acl() {\n    var entity = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Acl);\n\n    if (!(0, _isPlainObject2.default)(entity)) {\n      throw new _errors.KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.acl = entity[aclAttribute];\n  }\n\n  _createClass(Acl, [{\n    key: 'addReader',\n    value: function addReader(user) {\n      var r = this.acl.r || [];\n\n      if (r.indexOf(user) === -1) {\n        r.push(user);\n      }\n\n      this.acl.r = r;\n      return this;\n    }\n  }, {\n    key: 'addReaderGroup',\n    value: function addReaderGroup(group) {\n      var groups = this.acl.groups || {};\n      var r = groups.r || [];\n\n      if (r.indexOf(group) === -1) {\n        r.push(group);\n      }\n\n      groups.r = r;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'addWriter',\n    value: function addWriter(user) {\n      var w = this.acl.w || [];\n\n      if (w.indexOf(user) === -1) {\n        w.push(user);\n      }\n\n      this.acl.w = w;\n      return this;\n    }\n  }, {\n    key: 'addWriterGroup',\n    value: function addWriterGroup(group) {\n      var groups = this.acl.groups || {};\n      var w = groups.w || [];\n\n      if (w.indexOf(group) === -1) {\n        w.push(group);\n      }\n\n      groups.w = w;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'isGloballyReadable',\n    value: function isGloballyReadable() {\n      return this.acl.gr || false;\n    }\n  }, {\n    key: 'isGloballyWritable',\n    value: function isGloballyWritable() {\n      return this.acl.gw || false;\n    }\n  }, {\n    key: 'removeReader',\n    value: function removeReader(user) {\n      var r = this.acl.r || [];\n      var pos = r.indexOf(user);\n\n      if (pos !== -1) {\n        r.splice(pos, 1);\n      }\n\n      this.acl.r = r;\n      return this;\n    }\n  }, {\n    key: 'removeReaderGroup',\n    value: function removeReaderGroup(group) {\n      var groups = this.acl.groups || {};\n      var r = groups.r || [];\n      var pos = r.indexOf(group);\n\n      if (pos !== -1) {\n        r.splice(pos, 1);\n      }\n\n      groups.r = r;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'removeWriter',\n    value: function removeWriter(user) {\n      var w = this.acl.w || [];\n      var pos = w.indexOf(user);\n\n      if (pos !== -1) {\n        w.splice(pos, 1);\n      }\n\n      this.acl.w = w;\n      return this;\n    }\n  }, {\n    key: 'removeWriterGroup',\n    value: function removeWriterGroup(group) {\n      var groups = this.acl.groups || {};\n      var w = groups.w || [];\n      var pos = w.indexOf(group);\n\n      if (pos !== -1) {\n        w.splice(pos, 1);\n      }\n\n      groups.w = w;\n      this.acl.groups = groups;\n      return this;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.acl;\n    }\n  }, {\n    key: 'creator',\n    get: function get() {\n      return this.acl.creator;\n    }\n  }, {\n    key: 'readers',\n    get: function get() {\n      return this.acl.r || [];\n    }\n  }, {\n    key: 'writers',\n    get: function get() {\n      return this.acl.w || [];\n    }\n  }, {\n    key: 'readerGroups',\n    get: function get() {\n      return this.acl.groups ? this.acl.groups.r : [];\n    }\n  }, {\n    key: 'writerGroups',\n    get: function get() {\n      return this.acl.groups ? this.acl.groups.w : [];\n    }\n  }, {\n    key: 'globallyReadable',\n    set: function set(gr) {\n      this.acl.gr = gr || false;\n    }\n  }, {\n    key: 'globallyWritable',\n    set: function set(gw) {\n      this.acl.gw = gw || false;\n    }\n  }]);\n\n  return Acl;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./errors\":22,\"_process\":229,\"lodash/isPlainObject\":206}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Aggregation = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _query2 = require('./query');\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Aggregation = function () {\n  function Aggregation(options) {\n    _classCallCheck(this, Aggregation);\n\n    options = (0, _assign2.default)({\n      query: null,\n      initial: {},\n      key: {},\n      reduce: function () {}.toString()\n    }, options);\n\n    this.query(options.query);\n    this._initial = options.initial;\n    this._key = options.key;\n    this._reduce = options.reduce;\n  }\n\n  _createClass(Aggregation, [{\n    key: 'by',\n    value: function by(field) {\n      this._key[field] = true;\n      return this;\n    }\n  }, {\n    key: 'initial',\n    value: function initial(objectOrKey, value) {\n      if (typeof value === 'undefined' && !(0, _isObject2.default)(objectOrKey)) {\n        throw new _errors.KinveyError('objectOrKey argument must be an Object.');\n      }\n\n      if ((0, _isObject2.default)(objectOrKey)) {\n        this._initial = objectOrKey;\n      } else {\n        this._initial[objectOrKey] = value;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'query',\n    value: function query(_query) {\n      if (_query && !(_query instanceof _query2.Query)) {\n        _query = new _query2.Query((0, _result2.default)(_query, 'toJSON', _query));\n      }\n\n      this._query = _query;\n      return this;\n    }\n  }, {\n    key: 'process',\n    value: function process() {\n      var entities = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];\n\n      var groups = {};\n      var response = [];\n      var aggregation = this.toJSON();\n      var reduce = aggregation.reduce.replace(/function[\\s\\S]*?\\([\\s\\S]*?\\)/, '');\n      aggregation.reduce = new Function(['doc', 'out'], reduce); // eslint-disable-line no-new-func\n\n      if (this._query) {\n        entities = this._query.process(entities);\n      }\n\n      (0, _forEach2.default)(entities, function (entity) {\n        var group = {};\n        var entityNames = Object.keys(entity);\n\n        (0, _forEach2.default)(entityNames, function (name) {\n          group[name] = entity[name];\n        });\n\n        var key = JSON.stringify(group);\n        if (!groups[key]) {\n          groups[key] = group;\n          var attributes = Object.keys(aggregation.initial);\n\n          (0, _forEach2.default)(attributes, function (attr) {\n            groups[key][attr] = aggregation.initial[attr];\n          });\n        }\n\n        aggregation.reduce(entity, groups[key]);\n      });\n\n      var segments = Object.keys(groups);\n      (0, _forEach2.default)(segments, function (segment) {\n        response.push(groups[segment]);\n      });\n\n      return response;\n    }\n  }, {\n    key: 'reduce',\n    value: function reduce(fn) {\n      if ((0, _isFunction2.default)(fn)) {\n        fn = fn.toString();\n      }\n\n      if (!(0, _isString2.default)(fn)) {\n        throw new _errors.KinveyError('fn argument must be of type function or string.');\n      }\n\n      this._reduce = fn;\n      return this;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        key: this._key,\n        initial: this._initial,\n        reduce: this._reduce,\n        condition: this._query ? this._query.toJSON().filter : {},\n        query: this._query ? this._query.toJSON() : null\n      };\n\n      return json;\n    }\n  }], [{\n    key: 'count',\n    value: function count() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      var aggregation = new Aggregation();\n\n      if (field) {\n        aggregation.by(field);\n      }\n\n      aggregation.initial({ result: 0 });\n      aggregation.reduce(function (doc, out) {\n        out.result += 1;\n      });\n      return aggregation;\n    }\n  }, {\n    key: 'sum',\n    value: function sum() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ result: 0 });\n      aggregation.reduce('function(doc, out) { ' + (' out.result += doc[\"' + field + '\"]; ') + '}');\n      return aggregation;\n    }\n  }, {\n    key: 'min',\n    value: function min() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ result: Infinity });\n      aggregation.reduce('function(doc, out) { ' + (' out.result = Math.min(out.result, doc[\"' + field + '\"]); ') + '}');\n      return aggregation;\n    }\n  }, {\n    key: 'max',\n    value: function max() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ result: -Infinity });\n      aggregation.reduce('function(doc, out) { ' + (' out.result = Math.max(out.result, doc[\"' + field + '\"]); ') + '}');\n      return aggregation;\n    }\n  }, {\n    key: 'average',\n    value: function average() {\n      var field = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n      field = field.replace('\\'', '\\\\\\'');\n\n      var aggregation = new Aggregation();\n      aggregation.initial({ count: 0, result: 0 });\n      aggregation.reduce('function(doc, out) { ' + (' out.result = (out.result * out.count + doc[\"' + field + '\"]) / (out.count + 1);') + ' out.count += 1;' + '}');\n      return aggregation;\n    }\n  }]);\n\n  return Aggregation;\n}();\n\nexports.Aggregation = Aggregation;\n\n},{\"./errors\":22,\"./query\":27,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isFunction\":200,\"lodash/isObject\":204,\"lodash/isString\":208,\"lodash/result\":220}],19:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _localStorage = require('local-storage');\n\nvar _localStorage2 = _interopRequireDefault(_localStorage);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar activeUserCollectionName = process.env.KINVEY_ACTIVE_USER_COLLECTION_NAME || 'kinvey_activeUser';\nvar activeSocialIdentityTokenCollectionName = process.env.KINVEY_ACTIVE_SOCIAL_IDENTITY_TOKEN_COLLECTION_NAME || 'kinvey_activeSocialIdentityToken';\nvar _sharedInstance = void 0;\n\n/**\n * The Client class stores information regarding your application. You can create mutiple clients\n * to send requests to different environments on the Kinvey platform.\n *\n * @example\n * var client = new Kinvey.Client({\n *   appKey: '<appKey>',\n *   appSecret: '<appSecret>'\n * });\n */\n\nvar Client = exports.Client = function () {\n  /**\n   * Creates a new instance of the Client class. An `options.appKey` must be provided along with\n   * either and `options.appSecret` or `options.masterSecret`.\n   *\n   * @param {Object}    options                             Options\n   * @param {string}    [options.protocol='https']          Protocl used for requests\n   * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n   * @param {string}    options.appKey                      App Key\n   * @param {string}    [options.appSecret]                 App Secret\n   * @param {string}    [options.masterSecret]              App Master Secret\n   * @param {string}    [options.encryptionKey]             App Encryption Key\n   *\n   * @throws {KinveyError}  If an `options.appKey` is not provided.\n   * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   */\n\n  function Client() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Client);\n\n    options = (0, _assign2.default)({\n      protocol: process.env.KINVEY_API_PROTOCOL || 'https:',\n      host: process.env.KINVEY_API_HOST || 'baas.kinvey.com'\n    }, options);\n\n    if (!options.appKey && !options.appId) {\n      throw new _errors.KinveyError('No App Key was provided. ' + 'Unable to create a new Client without an App Key.');\n    }\n\n    if (!options.appSecret && !options.masterSecret) {\n      throw new _errors.KinveyError('No App Secret or Master Secret was provided. ' + 'Unable to create a new Client without an App Key.');\n    }\n\n    if (options.hostname && (0, _isString2.default)(options.hostname)) {\n      var hostnameParsed = _url2.default.parse(options.hostname);\n      options.protocol = hostnameParsed.protocol;\n      options.host = hostnameParsed.host;\n    }\n\n    /**\n     * @type {string}\n     */\n    this.protocol = options.protocol;\n\n    /**\n     * @type {string}\n     */\n    this.host = options.host;\n\n    /**\n     * @type {string}\n     */\n    this.appKey = options.appKey || options.appId;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.appSecret = options.appSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.masterSecret = options.masterSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.encryptionKey = options.encryptionKey;\n  }\n\n  _createClass(Client, [{\n    key: 'getActiveUserData',\n    value: function getActiveUserData() {\n      return _localStorage2.default.get('' + this.appKey + activeUserCollectionName);\n    }\n  }, {\n    key: 'setActiveUserData',\n    value: function setActiveUserData(data) {\n      if (data) {\n        try {\n          return _localStorage2.default.set('' + this.appKey + activeUserCollectionName, data);\n        } catch (error) {\n          return false;\n        }\n      }\n\n      return _localStorage2.default.remove('' + this.appKey + activeUserCollectionName);\n    }\n  }, {\n    key: 'getActiveSocialIdentity',\n    value: function getActiveSocialIdentity() {\n      return _localStorage2.default.get('' + this.appKey + activeSocialIdentityTokenCollectionName);\n    }\n  }, {\n    key: 'setActiveSocialIdentity',\n    value: function setActiveSocialIdentity(socialIdentity) {\n      if (socialIdentity) {\n        try {\n          return _localStorage2.default.set('' + this.appKey + activeSocialIdentityTokenCollectionName, socialIdentity);\n        } catch (error) {\n          return false;\n        }\n      }\n\n      return _localStorage2.default.remove('' + this.appKey + activeSocialIdentityTokenCollectionName);\n    }\n\n    /**\n     * Returns an object containing all the information for this Client.\n     *\n     * @return {Object} JSON\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        protocol: this.protocol,\n        host: this.host,\n        appKey: this.appKey,\n        appSecret: this.appSecret,\n        masterSecret: this.masterSecret,\n        encryptionKey: this.encryptionKey\n      };\n\n      return json;\n    }\n\n    /**\n     * Initializes the library by creating a new instance of the\n     * Client class and storing it as a shared instance.\n     *\n     * @param {Object}    options                             Options\n     * @param {string}    [options.protocol='https']          Protocl used for requests\n     * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n     * @param {string}    options.appKey                      App Key\n     * @param {string}    [options.appSecret]                 App Secret\n     * @param {string}    [options.masterSecret]              App Master Secret\n     * @param {string}    [options.encryptionKey]             App Encryption Key\n     *\n     * @throws {KinveyError}  If an `options.appKey` is not provided.\n     * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n     *\n     * @return {Client}  An instance of Client.\n     *\n     * @example\n     * var client = Kinvey.Client.init({\n     *   appKey: '<appKey>',\n     *   appSecret: '<appSecret>'\n     * });\n     */\n\n  }, {\n    key: 'baseUrl',\n    get: function get() {\n      return _url2.default.format({\n        protocol: this.protocol,\n        host: this.host\n      });\n    }\n  }], [{\n    key: 'init',\n    value: function init(options) {\n      var client = new Client(options);\n      _sharedInstance = client;\n      return client;\n    }\n\n    /**\n     * Returns the shared client instance used by the library.\n     *\n     * @throws {KinveyError} If `Kinvey.init()` has not been called.\n     *\n     * @return {Client} The shared instance.\n     */\n\n  }, {\n    key: 'sharedInstance',\n    value: function sharedInstance() {\n      var client = _sharedInstance;\n\n      if (!client) {\n        throw new _errors.KinveyError('You have not initialized the library. ' + 'Please call Kinvey.init() to initialize the library.');\n      }\n\n      return client;\n    }\n  }]);\n\n  return Client;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./errors\":22,\"_process\":229,\"local-storage\":57,\"lodash/assign\":184,\"lodash/isString\":208,\"url\":244}],20:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Command = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _client = require('./client');\n\nvar _enums = require('./enums');\n\nvar _errors = require('./errors');\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\n\n/**\n * Executes a custom command.\n */\n\nvar Command = exports.Command = function () {\n  function Command() {\n    _classCallCheck(this, Command);\n  }\n\n  _createClass(Command, null, [{\n    key: 'execute',\n\n    /**\n     * Execute a custom command. A promise will be returned that will be resolved\n     * with the result of the command or rejected with an error.\n     *\n     * @param   {String}          command                           Command to execute.\n     * @param   {Object}          [args]                            Command arguments\n     * @param   {Object}          [options]                         Options\n     * @param   {Properties}      [options.properties]              Custom properties to send with\n     *                                                              the request.\n     * @param   {Number}          [options.timeout]                 Timeout for the request.\n     * @return  {Promise}                                           Promise\n     *\n     * @example\n     * var promise = Kinvey.Command.execute('myCustomCommand').then(function(data) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function execute(command, args) {\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var client = _client.Client.sharedInstance();\n\n      if (!command) {\n        throw new _errors.KinveyError('A command is required.');\n      }\n\n      if (!(0, _isString2.default)(command)) {\n        throw new _errors.KinveyError('Command must be a string.');\n      }\n\n      return client.executeNetworkRequest({\n        method: _enums.HttpMethod.POST,\n        pathname: '/' + rpcNamespace + '/' + options.client.appKey + '/custom/' + command,\n        properties: options.properties,\n        auth: client.defaultAuth(),\n        data: args,\n        timeout: options.timeout\n      }).then(function (response) {\n        return response.data;\n      });\n    }\n  }]);\n\n  return Command;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./client\":19,\"./enums\":21,\"./errors\":22,\"_process\":229,\"lodash/isString\":208}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Enum for Mobile Identity Connect authorization grants.\n */\nvar AuthorizationGrant = {\n  AuthorizationCodeLoginPage: 'AuthorizationCodeLoginPage',\n  AuthorizationCodeAPI: 'AuthorizationCodeAPI'\n};\nObject.freeze(AuthorizationGrant);\nexports.AuthorizationGrant = AuthorizationGrant;\n\n\nvar AuthType = {\n  All: 'All',\n  App: 'App',\n  Basic: 'Basic',\n  Default: 'Default',\n  Master: 'Master',\n  None: 'None',\n  Session: 'Session'\n};\nObject.freeze(AuthType);\nexports.AuthType = AuthType;\n\n/**\n * Enum for DataStore types.\n */\n\nvar DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexports.DataStoreType = DataStoreType;\n\n/**\n * @private\n * Enum for Http Methods.\n */\n\nvar HttpMethod = {\n  GET: 'GET',\n  POST: 'POST',\n  PATCH: 'PATCH',\n  PUT: 'PUT',\n  DELETE: 'DELETE'\n};\nObject.freeze(HttpMethod);\nexports.HttpMethod = HttpMethod;\n\n/**\n * Enum for Social Identities.\n */\n\nvar SocialIdentity = {\n  Facebook: 'facebook',\n  Google: 'google',\n  LinkedIn: 'linkedin'\n};\nObject.freeze(SocialIdentity);\nexports.SocialIdentity = SocialIdentity;\n\n/**\n * @provate\n * Enum for Status Codes.\n */\n\nvar StatusCode = {\n  Ok: 200,\n  Created: 201,\n  RedirectTemporarily: 301,\n  RedirectPermanetly: 302,\n  NotFound: 404,\n  ServerError: 500\n};\nObject.freeze(StatusCode);\nexports.StatusCode = StatusCode;\n\n},{}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NoResponseError = exports.NotFoundError = exports.NetworkConnectionError = exports.KinveyError = exports.InvalidCredentialsError = exports.InsufficientCredentialsError = exports.ActiveUserError = undefined;\n\nvar _util = require('util');\n\nvar _util2 = _interopRequireDefault(_util);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @private\n */\nError.extend = function extend(name) {\n  var SubType = function SubType(message, debug) {\n    if (!(this instanceof SubType)) {\n      return new SubType(message, debug);\n    }\n\n    this.name = name;\n    this.message = message;\n    this.description = message;\n    this.debug = debug;\n\n    if ((0, _isFunction2.default)(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  };\n\n  _util2.default.inherits(SubType, this);\n\n  SubType.prototype.toString = function toString() {\n    return this.name + ': ' + _util2.default.inspect(this.message);\n  };\n\n  SubType.extend = this.extend;\n  return SubType;\n};\n\nvar ActiveUserError = exports.ActiveUserError = Error.extend('ActiveUserError');\nvar InsufficientCredentialsError = exports.InsufficientCredentialsError = Error.extend('InsufficientCredentialsError');\nvar InvalidCredentialsError = exports.InvalidCredentialsError = Error.extend('InvalidCredentialsError');\nvar KinveyError = exports.KinveyError = Error.extend('KinveyError');\nvar NetworkConnectionError = exports.NetworkConnectionError = Error.extend('NetworkConnectionError');\nvar NotFoundError = exports.NotFoundError = Error.extend('NotFoundError');\nvar NoResponseError = exports.NoResponseError = Error.extend('NoResponseError');\n\n},{\"lodash/isFunction\":200,\"util\":247}],23:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Kinvey = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _aggregation = require('./aggregation');\n\nvar _client = require('./client');\n\nvar _command = require('./command');\n\nvar _log = require('./log');\n\nvar _metadata = require('./metadata');\n\nvar _query = require('./query');\n\nvar _datastore = require('./stores/datastore');\n\nvar _sync = require('./sync');\n\nvar _user = require('./user');\n\nvar _enums = require('./enums');\n\nvar _network = require('./requests/network');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\n\nvar Kinvey = function () {\n  function Kinvey() {\n    _classCallCheck(this, Kinvey);\n  }\n\n  _createClass(Kinvey, null, [{\n    key: 'init',\n\n    /**\n     * Initializes the library with your app's information.\n     *\n     * @param   {Object}        options                         Options\n     * @param   {string}        options.appKey                  My app key\n     * @param   {string}        [options.appSecret]             My app secret\n     * @param   {string}        [options.masterSecret]          My app's master secret\n     * @param   {string}        [options.encryptionKey]         My app's encryption key\n     * @param   {string}        [options.protocol]              The protocol of the client.\n     * @param   {string}        [options.host]                  The host of the client.\n     * @return  {Client}                                        An instance of Client.\n     *\n     * @throws  {KinveyError}  If an `options.appKey` is not provided.\n     * @throws  {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n     *\n     * @example\n     * var client = Kinvey.init({\n     *   appKey: 'appKey',\n     *   appSecret: 'appSecret'\n     * });\n     */\n    value: function init(options) {\n      var client = _client.Client.init(options);\n      return client;\n    }\n\n    /**\n     * Pings the Kinvey service.\n     *\n     * @returns {Promise} The response.\n     */\n\n  }, {\n    key: 'ping',\n    value: function ping() {\n      var client = arguments.length <= 0 || arguments[0] === undefined ? _client.Client.sharedInstance() : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.All,\n        url: _url2.default.format({\n          protocol: client.protocol,\n          host: client.host,\n          pathname: appdataNamespace + '/' + client.appKey\n        })\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }]);\n\n  return Kinvey;\n}();\n\nKinvey.Aggregation = _aggregation.Aggregation;\nKinvey.AuthorizationGrant = _enums.AuthorizationGrant;\nKinvey.Command = _command.Command;\nKinvey.DataStore = _datastore.DataStore;\nKinvey.DataStoreType = _enums.DataStoreType;\nKinvey.Log = _log.Log;\nKinvey.Metadata = _metadata.Metadata;\nKinvey.Promise = _babybird2.default;\nKinvey.Query = _query.Query;\nKinvey.SocialIdentity = _enums.SocialIdentity;\nKinvey.Sync = _sync.Sync;\nKinvey.User = _user.User;\nexports.Kinvey = Kinvey;\n\n}).call(this,require('_process'))\n\n},{\"./aggregation\":18,\"./client\":19,\"./command\":20,\"./enums\":21,\"./log\":24,\"./metadata\":25,\"./query\":27,\"./requests/network\":41,\"./stores/datastore\":46,\"./sync\":51,\"./user\":52,\"_process\":229,\"babybird\":4,\"url\":244}],24:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Log = undefined;\n\nvar _loglevel = require('loglevel');\n\nvar _loglevel2 = _interopRequireDefault(_loglevel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar originalFactory = _loglevel2.default.methodFactory;\n\n_loglevel2.default.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  var rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod('Kinvey: ' + message);\n  };\n};\n\n_loglevel2.default.setLevel(_loglevel2.default.levels.ERROR);\nexports.Log = _loglevel2.default;\n\n},{\"loglevel\":227}],25:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Metadata = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('./errors');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * Wrapper for accessing the `_kmd` properties of an entity.\n */\n\nvar Metadata = exports.Metadata = function () {\n  function Metadata() {\n    var entity = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Metadata);\n\n    if (!(0, _isPlainObject2.default)(entity)) {\n      throw new _errors.KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.kmd = entity[kmdAttribute] || {};\n\n    /**\n     * The entity.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.entity = entity;\n  }\n\n  _createClass(Metadata, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.kmd;\n    }\n  }, {\n    key: 'createdAt',\n    get: function get() {\n      if (this.kmd.ect) {\n        return Date.parse(this.kmd.ect);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'emailVerification',\n    get: function get() {\n      return this.kmd.emailVerification.status;\n    }\n  }, {\n    key: 'lastModified',\n    get: function get() {\n      if (this.kmd.lmt) {\n        return Date.parse(this.kmd.lmt);\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'lmt',\n    get: function get() {\n      return this.lastModified;\n    }\n  }, {\n    key: 'authtoken',\n    get: function get() {\n      return this.kmd.authtoken;\n    },\n    set: function set(authtoken) {\n      this.kmd.authtoken = authtoken;\n    }\n  }]);\n\n  return Metadata;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./errors\":22,\"_process\":229,\"lodash/isPlainObject\":206}],26:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MobileIdentityConnect = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _enums = require('./enums');\n\nvar _errors = require('./errors');\n\nvar _network = require('./requests/network');\n\nvar _client = require('./client');\n\nvar _popup = require('./utils/popup');\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar authPathname = process.env.KINVEY_MIC_AUTH_PATHNAME || '/oauth/auth';\nvar tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\n\n/**\n * @private\n */\n\nvar MobileIdentityConnect = exports.MobileIdentityConnect = function () {\n  function MobileIdentityConnect() {\n    var client = arguments.length <= 0 || arguments[0] === undefined ? _client.Client.sharedInstance() : arguments[0];\n\n    _classCallCheck(this, MobileIdentityConnect);\n\n    this.client = new _client.Client({\n      protocol: process.env.KINVEY_MIC_PROTOCOL || 'https:',\n      host: process.env.KINVEY_MIC_HOST || 'auth.kinvey.com',\n      appKey: client.appKey,\n      appSecret: client.appSecret,\n      masterSecret: client.masterSecret,\n      encryptionKey: client.encryptionKey\n    });\n  }\n\n  _createClass(MobileIdentityConnect, [{\n    key: 'login',\n    value: function login(redirectUri) {\n      var _this = this;\n\n      var authorizationGrant = arguments.length <= 1 || arguments[1] === undefined ? _enums.AuthorizationGrant.AuthorizationCodeLoginPage : arguments[1];\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var clientId = this.client.appKey;\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (authorizationGrant === _enums.AuthorizationGrant.AuthorizationCodeLoginPage) {\n          // Step 1: Request a code\n          return _this.requestCodeWithPopup(clientId, redirectUri, options);\n        } else if (authorizationGrant === _enums.AuthorizationGrant.AuthorizationCodeAPI) {\n          // Step 1a: Request a temp login url\n          return _this.requestTempLoginUrl(clientId, redirectUri, options).then(function (url) {\n            // Step 1b: Request a code\n            return _this.requestCodeWithUrl(url, clientId, redirectUri, options);\n          });\n        }\n\n        throw new _errors.KinveyError('The authorization grant ' + authorizationGrant + ' is unsupported. ' + 'Please use a supported authorization grant.');\n      }).then(function (code) {\n        // Step 3: Request a token\n        return _this.requestToken(code, clientId, redirectUri, options);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'requestTempLoginUrl',\n    value: function requestTempLoginUrl(clientId, redirectUri) {\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var pathname = '/';\n\n      if (options.version) {\n        var version = options.version;\n\n        if (!(0, _isString2.default)(version)) {\n          version = String(version);\n        }\n\n        pathname = _path2.default.join(pathname, version.indexOf('v') === 0 ? version : 'v' + version);\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: _path2.default.join(pathname, authPathname)\n        }),\n        properties: options.properties,\n        data: {\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          response_type: 'code'\n        }\n      });\n      return request.execute().then(function (response) {\n        return response.data.temp_login_uri;\n      });\n    }\n  }, {\n    key: 'requestCodeWithPopup',\n    value: function requestCodeWithPopup(clientId, redirectUri) {\n      var _this2 = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var pathname = '/';\n\n        if (options.version) {\n          var version = options.version;\n\n          if (!(0, _isString2.default)(version)) {\n            version = String(version);\n          }\n\n          pathname = _path2.default.join(pathname, version.indexOf('v') === 0 ? version : 'v' + version);\n        }\n\n        var popup = new _popup.Popup(_url2.default.format({\n          protocol: _this2.client.protocol,\n          host: _this2.client.host,\n          pathname: _path2.default.join(pathname, authPathname),\n          query: {\n            client_id: clientId,\n            redirect_uri: redirectUri,\n            response_type: 'code'\n          }\n        }));\n        return popup.open();\n      }).then(function (popup) {\n        return new _babybird2.default(function (resolve, reject) {\n          var redirected = false;\n\n          function loadHandler(loadedUrl) {\n            if (loadedUrl.indexOf(redirectUri) === 0) {\n              redirected = true;\n              popup.removeAllListeners();\n              popup.close();\n              resolve(_url2.default.parse(loadedUrl, true).query.code);\n            }\n          }\n\n          function closeHandler() {\n            popup.removeAllListeners();\n\n            if (!redirected) {\n              reject(new Error('Login has been cancelled.'));\n            }\n          }\n\n          popup.on('loaded', loadHandler);\n          popup.on('closed', closeHandler);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'requestCodeWithUrl',\n    value: function requestCodeWithUrl(loginUrl, clientId, redirectUri) {\n      var options = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.POST,\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          url: loginUrl,\n          properties: options.properties,\n          data: {\n            client_id: clientId,\n            redirect_uri: redirectUri,\n            response_type: 'code',\n            username: options.username,\n            password: options.password\n          },\n          followRedirect: false\n        });\n        return request.execute();\n      }).then(function (response) {\n        var location = response.getHeader('location');\n\n        if (location) {\n          return _url2.default.parse(location, true).query.code;\n        }\n\n        throw new _errors.KinveyError('Unable to authorize user with username ' + options.username + '.');\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'requestToken',\n    value: function requestToken(code, clientId, redirectUri) {\n      var options = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: tokenPathname\n        }),\n        properties: options.properties,\n        data: {\n          grant_type: 'authorization_code',\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          code: code\n        }\n      });\n      request.automaticallyRefreshAuthToken = false;\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n      return promise;\n    }\n\n    // refresh(token, options) {\n    //   const clientId = this.client.appKey;\n    //   return this.refreshToken(clientId, token, options);\n    // }\n\n    // refreshToken(clientId, token, options = {}) {\n    //   const request = new NetworkRequest({\n    //     method: HttpMethod.POST,\n    //     headers: {\n    //       'Content-Type': 'application/x-www-form-urlencoded'\n    //     },\n    //     authType: AuthType.App,\n    //     url: url.format({\n    //       protocol: this.client.protocol,\n    //       host: this.client.host,\n    //       pathname: tokenPathname\n    //     }),\n    //     properties: options.properties,\n    //     data: {\n    //       grant_type: 'refresh_token',\n    //       client_id: clientId,\n    //       redirect_uri: token.redirect_uri,\n    //       refresh_token: token.refresh_token\n    //     }\n    //   });\n    //   request.automaticallyRefreshAuthToken = false;\n\n    //   const promise = request.execute().then(response => {\n    //     return response.data;\n    //   });\n\n    //   return promise;\n    // }\n\n  }], [{\n    key: 'identity',\n    get: function get() {\n      return process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\n    }\n  }]);\n\n  return MobileIdentityConnect;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./client\":19,\"./enums\":21,\"./errors\":22,\"./requests/network\":41,\"./utils/popup\":55,\"_process\":229,\"babybird\":4,\"lodash/isString\":208,\"path\":228,\"url\":244}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Query = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _object = require('./utils/object');\n\nvar _sift = require('sift');\n\nvar _sift2 = _interopRequireDefault(_sift);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _isRegExp = require('lodash/isRegExp');\n\nvar _isRegExp2 = _interopRequireDefault(_isRegExp);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Query = function () {\n  function Query(options) {\n    _classCallCheck(this, Query);\n\n    options = (0, _assign2.default)({\n      fields: [],\n      filter: {},\n      sort: {},\n      limit: null,\n      skip: 0\n    }, options);\n\n    /**\n     * Fields to select.\n     *\n     * @type {Array}\n     */\n    this._fields = options.fields;\n\n    /**\n     * The MongoDB query.\n     *\n     * @type {Object}\n     */\n    this._filter = options.filter;\n\n    /**\n     * The sorting order.\n     *\n     * @type {Object}\n     */\n    this._sort = options.sort;\n\n    /**\n     * Number of documents to select.\n     *\n     * @type {?Number}\n     */\n    this._limit = options.limit;\n\n    /**\n     * Number of documents to skip from the start.\n     *\n     * @type {Number}\n     */\n    this._skip = options.skip;\n\n    /**\n     * Maintain reference to the parent query in case the query is part of a\n     * join.\n     *\n     * @type {?PrivateQuery}\n     */\n    this.parent = null;\n  }\n\n  /**\n   * Adds an equal to filter to the query. Requires `field` to equal `value`.\n   * Any existing filters on `field` will be discarded.\n   * http://docs.mongodb.org/manual/reference/operators/#comparison\n   *\n   * @param   {String}        field     Field.\n   * @param   {*}             value     Value.\n   * @returns {Query}                   The query.\n   */\n\n\n  _createClass(Query, [{\n    key: 'equalTo',\n    value: function equalTo(field, value) {\n      this._filter[field] = value;\n      return this;\n    }\n\n    /**\n     * Adds a contains filter to the query. Requires `field` to contain at least\n     * one of the members of `list`.\n     * http://docs.mongodb.org/manual/reference/operator/in/\n     *\n     * @param   {String}        field     Field.\n     * @param   {Array}         values    List of values.\n     * @throws  {Error}                   `values` must be of type: `Array`.\n     * @returns {Query}                   The query.\n     */\n\n  }, {\n    key: 'contains',\n    value: function contains(field, values) {\n      if (!(0, _isArray2.default)(values)) {\n        values = [values];\n      }\n\n      return this.addFilter(field, '$in', values);\n    }\n\n    /**\n     * Adds a contains all filter to the query. Requires `field` to contain all\n     * members of `list`.\n     * http://docs.mongodb.org/manual/reference/operator/all/\n     *\n     * @param   {String}  field     Field.\n     * @param   {Array}   values    List of values.\n     * @throws  {Error}             `values` must be of type: `Array`.\n     * @returns {Query}             The query.\n     */\n\n  }, {\n    key: 'containsAll',\n    value: function containsAll(field, values) {\n      if (!(0, _isArray2.default)(values)) {\n        values = [values];\n      }\n\n      return this.addFilter(field, '$all', values);\n    }\n\n    /**\n     * Adds a greater than filter to the query. Requires `field` to be greater\n     * than `value`.\n     * http://docs.mongodb.org/manual/reference/operator/gt/\n     *\n     * @param   {String}          field     Field.\n     * @param   {Number|String}   value     Value.\n     * @throws  {Error}                     `value` must be of type: `number` or `string`.\n     * @returns {Query}                     The query.\n     */\n\n  }, {\n    key: 'greaterThan',\n    value: function greaterThan(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$gt', value);\n    }\n  }, {\n    key: 'greaterThanOrEqualTo',\n    value: function greaterThanOrEqualTo(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$gte', value);\n    }\n  }, {\n    key: 'lessThan',\n    value: function lessThan(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$lt', value);\n    }\n  }, {\n    key: 'lessThanOrEqualTo',\n    value: function lessThanOrEqualTo(field, value) {\n      if (!(0, _isNumber2.default)(value) && !(0, _isString2.default)(value)) {\n        throw new Error('You must supply a number or string.');\n      }\n\n      return this.addFilter(field, '$lte', value);\n    }\n  }, {\n    key: 'notEqualTo',\n    value: function notEqualTo(field, value) {\n      return this.addFilter(field, '$ne', value);\n    }\n  }, {\n    key: 'notContainedIn',\n    value: function notContainedIn(field, values) {\n      if (!(0, _isArray2.default)(values)) {\n        values = [values];\n      }\n\n      return this.addFilter(field, '$nin', values);\n    }\n  }, {\n    key: 'and',\n    value: function and() {\n      return this.join('$and', Array.prototype.slice.call(arguments));\n    }\n  }, {\n    key: 'nor',\n    value: function nor() {\n      if (this.parent && this.parent.filter.$and) {\n        return this.parent.nor.apply(this.parent, arguments);\n      }\n\n      return this.join('$nor', Array.prototype.slice.call(arguments));\n    }\n  }, {\n    key: 'or',\n    value: function or() {\n      if (this.parent) {\n        return this.parent.or.apply(this.parent, arguments);\n      }\n\n      return this.join('$or', Array.prototype.slice.call(arguments));\n    }\n  }, {\n    key: 'exists',\n    value: function exists(field, flag) {\n      flag = typeof flag === 'undefined' ? true : flag || false;\n      return this.addFilter(field, '$exists', flag);\n    }\n  }, {\n    key: 'mod',\n    value: function mod(field, divisor, remainder) {\n      remainder = remainder || 0;\n\n      if ((0, _isString2.default)(divisor)) {\n        divisor = parseFloat(divisor);\n      }\n\n      if ((0, _isString2.default)(remainder)) {\n        remainder = parseFloat(remainder);\n      }\n\n      if (!(0, _isNumber2.default)(divisor)) {\n        throw new Error('Divisor must be a number.');\n      }\n\n      if (!(0, _isNumber2.default)(remainder)) {\n        throw new Error('Remainder must be a number.');\n      }\n\n      return this.addFilter(field, '$mod', [divisor, remainder]);\n    }\n  }, {\n    key: 'matches',\n    value: function matches(field, regExp, options) {\n      options = options || {};\n\n      if (!(0, _isRegExp2.default)(regExp)) {\n        regExp = new RegExp(regExp);\n      }\n\n      if ((regExp.ignoreCase || options.ignoreCase) && options.ignoreCase !== false) {\n        throw new Error('ignoreCase glag is not supported.');\n      }\n\n      if (regExp.source.indexOf('^') !== 0) {\n        throw new Error('regExp must have `^` at the beginning of the expression ' + 'to make it an anchored expression.');\n      }\n\n      var flags = [];\n\n      if ((regExp.multiline || options.multiline) && options.multiline !== false) {\n        flags.push('m');\n      }\n\n      if (options.extended) {\n        flags.push('x');\n      }\n\n      if (options.dotMatchesAll) {\n        flags.push('s');\n      }\n\n      var result = this.addFilter(field, '$regex', regExp.source);\n\n      if (flags.length) {\n        this.addFilter(field, '$options', flags.join(''));\n      }\n\n      return result;\n    }\n  }, {\n    key: 'near',\n    value: function near(field, coord, maxDistance) {\n      if (!(0, _isArray2.default)(coord) || !coord[0] || !coord[1]) {\n        throw new Error('coord argument must be of type: [number, number]');\n      }\n\n      coord[0] = parseFloat(coord[0]);\n      coord[1] = parseFloat(coord[1]);\n\n      var result = this.addFilter(field, '$nearSphere', [coord[0], coord[1]]);\n\n      if (maxDistance) {\n        this.addFilter(field, '$maxDistance', maxDistance);\n      }\n\n      return result;\n    }\n  }, {\n    key: 'withinBox',\n    value: function withinBox(field, bottomLeftCoord, upperRightCoord) {\n      if (!(0, _isArray2.default)(bottomLeftCoord) || !bottomLeftCoord[0] || !bottomLeftCoord[1]) {\n        throw new Error('bottomLeftCoord argument must be of type: [number, number]');\n      }\n\n      if (!(0, _isArray2.default)(upperRightCoord) || !upperRightCoord[0] || !upperRightCoord[1]) {\n        throw new Error('upperRightCoord argument must be of type: [number, number]');\n      }\n\n      bottomLeftCoord[0] = parseFloat(bottomLeftCoord[0]);\n      bottomLeftCoord[1] = parseFloat(bottomLeftCoord[1]);\n      upperRightCoord[0] = parseFloat(upperRightCoord[0]);\n      upperRightCoord[1] = parseFloat(upperRightCoord[1]);\n\n      var coords = [[bottomLeftCoord[0], bottomLeftCoord[1]], [upperRightCoord[0], upperRightCoord[1]]];\n      return this.addFilter(field, '$within', { $box: coords });\n    }\n  }, {\n    key: 'withinPolygon',\n    value: function withinPolygon(field, coords) {\n      if (!(0, _isArray2.default)(coords) || coords.length > 3) {\n        throw new Error('coords argument must be of type: [[number, number]]');\n      }\n\n      coords = coords.map(function (coord) {\n        if (!coord[0] || !coord[1]) {\n          throw new Error('coords argument must be of type: [number, number]');\n        }\n\n        return [parseFloat(coord[0]), parseFloat(coord[1])];\n      });\n\n      return this.addFilter(field, '$within', { $polygon: coords });\n    }\n  }, {\n    key: 'size',\n    value: function size(field, _size) {\n      if ((0, _isString2.default)(_size)) {\n        _size = parseFloat(_size);\n      }\n\n      if (!(0, _isNumber2.default)(_size)) {\n        throw new Error('size argument must be a number');\n      }\n\n      return this.addFilter(field, '$size', _size);\n    }\n  }, {\n    key: 'fields',\n    value: function fields(_fields) {\n      _fields = _fields || [];\n\n      if (!(0, _isArray2.default)(_fields)) {\n        throw new Error('fields argument must an Array.');\n      }\n\n      if (this.parent) {\n        this.parent.fields(_fields);\n      } else {\n        this._fields = _fields;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'limit',\n    value: function limit(_limit) {\n      if ((0, _isString2.default)(_limit)) {\n        _limit = parseFloat(_limit);\n      }\n\n      if (_limit && !(0, _isNumber2.default)(_limit)) {\n        throw new Error('limit argument must be of type: number.');\n      }\n\n      if (this._parent) {\n        this.parent.limit(_limit);\n      } else {\n        this._limit = _limit;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'skip',\n    value: function skip(_skip) {\n      if ((0, _isString2.default)(_skip)) {\n        _skip = parseFloat(_skip);\n      }\n\n      if (!(0, _isNumber2.default)(_skip)) {\n        throw new Error('skip argument must be of type: number.');\n      }\n\n      if (this.parent) {\n        this.parent.skip(_skip);\n      } else {\n        this._skip = _skip;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'ascending',\n    value: function ascending(field) {\n      if (this.parent) {\n        this.parent.ascending(field);\n      } else {\n        this._sort[field] = 1;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'descending',\n    value: function descending(field) {\n      if (this.parent) {\n        this.parent.descending(field);\n      } else {\n        this._sort[field] = -1;\n      }\n\n      return this;\n    }\n  }, {\n    key: 'sort',\n    value: function sort(_sort) {\n      if (_sort && !(0, _isObject2.default)(_sort)) {\n        throw new Error('sort argument must be of type: Object.');\n      }\n\n      if (this.parent) {\n        this.parent.sort(_sort);\n      } else {\n        this._sort = _sort || {};\n      }\n\n      return this;\n    }\n\n    /**\n     * Adds a filter to the query.\n     *\n     * @param   {String}          field       Field.\n     * @param   {String}          condition   Condition.\n     * @param   {*}               value       Value.\n     * @returns {PrivateQuery}                The query.\n     */\n\n  }, {\n    key: 'addFilter',\n    value: function addFilter(field, condition, values) {\n      if (!(0, _isObject2.default)(this._filter[field])) {\n        this._filter[field] = {};\n      }\n\n      this._filter[field][condition] = values;\n      return this;\n    }\n\n    /**\n     * Joins the current query with another query using an operator.\n     *\n     * @param   {String}                    operator    Operator.\n     * @param   {PrivateQuery[]|Object[]}   queries     Queries.\n     * @throws  {Error}                                `query` must be of type: `Kinvey.Query[]` or `Object[]`.\n     * @returns {PrivateQuery}                          The query.\n     */\n\n  }, {\n    key: 'join',\n    value: function join(operator, queries) {\n      var _this2 = this;\n\n      var _this = this;\n      var currentQuery = {};\n\n      // Cast, validate, and parse arguments. If `queries` are supplied, obtain\n      // the `filter` for joining. The eventual return function will be the\n      // current query.\n      queries = queries.map(function (query) {\n        if (!(query instanceof Query)) {\n          if ((0, _isObject2.default)(query)) {\n            query = new Query(query);\n          } else {\n            throw new Error('query argument must be of type: Kinvey.Query[] or Object[].');\n          }\n        }\n\n        return query.toJSON().filter;\n      });\n\n      // If there are no `queries` supplied, create a new (empty) `Query`.\n      // This query is the right-hand side of the join expression, and will be\n      // returned to allow for a fluent interface.\n      if (queries.length === 0) {\n        _this = new Query();\n        queries = [_this.toJSON().filter];\n        _this.parent = this; // Required for operator precedence and `toJSON`.\n      }\n\n      // Join operators operate on the top-level of `filter`. Since the `toJSON`\n      // magic requires `filter` to be passed by reference, we cannot simply re-\n      // assign `filter`. Instead, empty it without losing the reference.\n      var members = Object.keys(this._filter);\n      (0, _forEach2.default)(members, function (member) {\n        currentQuery[member] = _this2._filter[member];\n        delete _this2._filter[member];\n      });\n\n      // `currentQuery` is the left-hand side query. Join with `queries`.\n      this._filter[operator] = [currentQuery].concat(queries);\n\n      // Return the current query if there are `queries`, and the new (empty)\n      // `PrivateQuery` otherwise.\n      return _this;\n    }\n\n    /**\n     * Processes the data by applying fields, sort, limit, and skip.\n     *\n     * @param   {Array}   data    The raw data.\n     * @throws  {Error}               `data` must be of type: `Array`.\n     * @returns {Array}               The processed data.\n     */\n\n  }, {\n    key: '_process',\n    value: function _process(data) {\n      var _this3 = this;\n\n      if (data) {\n        var _ret = function () {\n          // Validate arguments.\n          if (!(0, _isArray2.default)(data)) {\n            throw new Error('data argument must be of type: Array.');\n          }\n\n          // Apply the query\n          var json = _this3.toJSON();\n          data = (0, _sift2.default)(json.filter, data);\n\n          // Remove fields\n          if (json.fields && json.fields.length > 0) {\n            data = data.map(function (item) {\n              var keys = Object.keys(item);\n              (0, _forEach2.default)(keys, function (key) {\n                if (json.fields.indexOf(key) === -1) {\n                  delete item[key];\n                }\n              });\n\n              return item;\n            });\n          }\n\n          // Sorting.\n          data = data.sort(function (a, b) {\n            var fields = Object.keys(json.sort);\n            (0, _forEach2.default)(fields, function (field) {\n              // Find field in objects.\n              var aField = (0, _object.nested)(a, field);\n              var bField = (0, _object.nested)(b, field);\n\n              // Elements which do not contain the field should always be sorted\n              // lower.\n              if (aField && !bField) {\n                return -1;\n              }\n\n              if (bField && !aField) {\n                return 1;\n              }\n\n              // Sort on the current field. The modifier adjusts the sorting order\n              // (ascending (-1), or descending(1)). If the fields are equal,\n              // continue sorting based on the next field (if any).\n              if (aField !== bField) {\n                var modifier = json.sort[field]; // 1 or -1.\n                return (aField < bField ? -1 : 1) * modifier;\n              }\n            });\n\n            return 0;\n          });\n\n          // Limit and skip.\n          if (json.limit) {\n            return {\n              v: data.slice(json.skip, json.skip + json.limit)\n            };\n          }\n\n          return {\n            v: data.slice(json.skip)\n          };\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n\n      return data;\n    }\n\n    /**\n     * Returns JSON representation of the query.\n     *\n     * @returns {Object} JSON object-literal.\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      if (this.parent) {\n        return this.parent.toJSON();\n      }\n\n      // Return set of parameters.\n      var json = {\n        fields: this._fields,\n        filter: this._filter,\n        sort: this._sort,\n        skip: this._skip,\n        limit: this._limit\n      };\n\n      return json;\n    }\n  }]);\n\n  return Query;\n}();\n\nexports.Query = Query;\n\n},{\"./utils/object\":54,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isNumber\":203,\"lodash/isObject\":204,\"lodash/isRegExp\":207,\"lodash/isString\":208,\"sift\":241}],28:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar levels = [];\nvar c0 = String.fromCharCode(9500);\nvar c1 = String.fromCharCode(9472);\nvar c2 = String.fromCharCode(9492);\nvar c3 = String.fromCharCode(9474);\n\nfunction compose(node, end) {\n  if (node.level === 0) {\n    return node.value;\n  }\n\n  var ret = '\\r\\n';\n  var c = end ? c2 : c0;\n\n  for (var i = 1; i < node.level; i++) {\n    ret = '' + ret + (levels[i] ? ' ' : c3);\n    ret = ret + '  ';\n  }\n\n  return '' + ret + c + c1 + ' ' + node.value;\n}\n\n/**\n * @private\n */\nvar AsciiTree = exports.AsciiTree = {\n  generate: function generate() {\n    var _this = this;\n\n    var tree = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var end = arguments[1];\n\n    var result = compose(tree, end);\n\n    if (tree.nodes.length > 0) {\n      (function () {\n        var last = tree.nodes.length - 1;\n        tree.nodes.forEach(function (subTree, index) {\n          levels[subTree.level] = index === last;\n          result = result + _this.generate(subTree, index === last);\n        });\n      })();\n    }\n\n    return result;\n  }\n};\n\n},{}],29:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KinveyMiddleware = exports.Middleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _asciiTree = require('./asciiTree');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @private\n */\n\nvar Middleware = exports.Middleware = function () {\n  function Middleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Middleware' : arguments[0];\n\n    _classCallCheck(this, Middleware);\n\n    this.name = name;\n  }\n\n  _createClass(Middleware, [{\n    key: 'handle',\n    value: function handle() {\n      var request = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return _babybird2.default.resolve(request);\n    }\n  }, {\n    key: 'generateTree',\n    value: function generateTree() {\n      var level = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];\n\n      var root = {\n        value: this.name,\n        level: level,\n        nodes: []\n      };\n      return root;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var root = this.generateTree();\n      return _asciiTree.AsciiTree.generate(root);\n    }\n  }]);\n\n  return Middleware;\n}();\n\n/**\n * @private\n */\n\n\nvar KinveyMiddleware = exports.KinveyMiddleware = function (_Middleware) {\n  _inherits(KinveyMiddleware, _Middleware);\n\n  function KinveyMiddleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Middleware' : arguments[0];\n\n    _classCallCheck(this, KinveyMiddleware);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(KinveyMiddleware).call(this, name));\n  }\n\n  _createClass(KinveyMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      return new _babybird2.default(function (resolve, reject) {\n        if (!request) {\n          return reject(new Error('Request is null. Please provide a valid request.', request));\n        }\n\n        return resolve(request);\n      });\n    }\n  }]);\n\n  return KinveyMiddleware;\n}(Middleware);\n\n},{\"./asciiTree\":28,\"babybird\":4}],30:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CacheMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('../middleware');\n\nvar _db = require('../persistence/db');\n\nvar _enums = require('../../enums');\n\nvar _urlPattern = require('url-pattern');\n\nvar _urlPattern2 = _interopRequireDefault(_urlPattern);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar CacheMiddleware = exports.CacheMiddleware = function (_KinveyMiddleware) {\n  _inherits(CacheMiddleware, _KinveyMiddleware);\n\n  function CacheMiddleware() {\n    var adapters = arguments.length <= 0 || arguments[0] === undefined ? [_db.DBAdapter.IndexedDB, _db.DBAdapter.WebSQL, _db.DBAdapter.LocalStorage, _db.DBAdapter.Memory] : arguments[0];\n\n    _classCallCheck(this, CacheMiddleware);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CacheMiddleware).call(this, 'Kinvey Cache Middleware'));\n\n    _this.adapters = adapters;\n    return _this;\n  }\n\n  _createClass(CacheMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      var _this2 = this;\n\n      return _get(Object.getPrototypeOf(CacheMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        var pathname = _url2.default.parse(request.url).pathname;\n        var pattern = new _urlPattern2.default('(/:namespace)(/)(:appKey)(/)(:collection)(/)(:id)(/)');\n\n        var _ref = pattern.match(pathname) || {};\n\n        var appKey = _ref.appKey;\n        var collection = _ref.collection;\n        var id = _ref.id;\n\n        var method = request.method;\n        var query = request.query;\n        var data = request.data;\n        var db = new _db.DB(appKey, _this2.adapters);\n        var promise = void 0;\n\n        if (method === _enums.HttpMethod.GET) {\n          if (id) {\n            if (id === '_count') {\n              promise = db.count(collection, query);\n            } else if (id === '_group') {\n              promise = db.group(collection, data);\n            } else {\n              promise = db.findById(collection, id);\n            }\n          } else {\n            promise = db.find(collection, query);\n          }\n        } else if (method === _enums.HttpMethod.POST || method === _enums.HttpMethod.PUT) {\n          promise = db.save(collection, data);\n        } else if (method === _enums.HttpMethod.DELETE) {\n          if (id) {\n            promise = db.removeById(collection, id);\n          } else {\n            promise = db.remove(collection, query);\n          }\n        }\n\n        return promise.then(function (result) {\n          var statusCode = _enums.StatusCode.Ok;\n\n          if (method === _enums.HttpMethod.POST) {\n            statusCode = _enums.StatusCode.Created;\n          }\n\n          request.response = {\n            statusCode: statusCode,\n            headers: {},\n            data: result\n          };\n\n          return request;\n        });\n      });\n    }\n  }]);\n\n  return CacheMiddleware;\n}(_middleware.KinveyMiddleware);\n\n},{\"../../enums\":21,\"../middleware\":29,\"../persistence/db\":37,\"url\":244,\"url-pattern\":243}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParseMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('../middleware');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar ParseMiddleware = exports.ParseMiddleware = function (_KinveyMiddleware) {\n  _inherits(ParseMiddleware, _KinveyMiddleware);\n\n  function ParseMiddleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Parse Middleware' : arguments[0];\n\n    _classCallCheck(this, ParseMiddleware);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(ParseMiddleware).call(this, name));\n  }\n\n  _createClass(ParseMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      return _get(Object.getPrototypeOf(ParseMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        var response = request.response;\n\n        if (response && response.data) {\n          var contentType = response.headers['content-type'] || response.headers['Content-Type'];\n\n          if (contentType.indexOf('application/json') === 0) {\n            try {\n              response.data = JSON.parse(response.data);\n            } catch (err) {\n              response.data = response.data;\n            }\n\n            request.response = response;\n          }\n        }\n\n        return request;\n      });\n    }\n  }]);\n\n  return ParseMiddleware;\n}(_middleware.KinveyMiddleware);\n\n},{\"../middleware\":29}],32:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SerializeMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('../middleware');\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar SerializeMiddleware = exports.SerializeMiddleware = function (_KinveyMiddleware) {\n  _inherits(SerializeMiddleware, _KinveyMiddleware);\n\n  function SerializeMiddleware() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Serialize Middleware' : arguments[0];\n\n    _classCallCheck(this, SerializeMiddleware);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(SerializeMiddleware).call(this, name));\n  }\n\n  _createClass(SerializeMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      return _get(Object.getPrototypeOf(SerializeMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        if (request && request.data) {\n          var contentType = request.headers['content-type'] || request.headers['Content-Type'];\n\n          if (contentType.indexOf('application/json') === 0) {\n            request.data = JSON.stringify(request.data);\n          } else if (contentType.indexOf('application/x-www-form-urlencoded') === 0) {\n            (function () {\n              var data = request.data;\n              var str = [];\n              var keys = Object.keys(data);\n\n              (0, _forEach2.default)(keys, function (key) {\n                str.push(global.encodeURIComponent(key) + '=' + global.encodeURIComponent(data[key]));\n              });\n\n              request.data = str.join('&');\n            })();\n          }\n        }\n\n        return request;\n      });\n    }\n  }]);\n\n  return SerializeMiddleware;\n}(_middleware.KinveyMiddleware);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../middleware\":29,\"lodash/forEach\":190}],33:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IndexedDB = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../../../errors');\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar dbCache = {};\n\nvar TransactionMode = {\n  ReadWrite: 'readwrite',\n  ReadOnly: 'readonly'\n};\nObject.freeze(TransactionMode);\n\nif (typeof window !== 'undefined') {\n  require('indexeddbshim');\n  global.shimIndexedDB.__useShim();\n}\n\nvar indexedDB = global.shimIndexedDB || global.indexedDB || global.mozIndexedDB || global.webkitIndexedDB || global.msIndexedDB;\n\n/**\n * @private\n */\n\nvar IndexedDB = exports.IndexedDB = function () {\n  function IndexedDB(name) {\n    _classCallCheck(this, IndexedDB);\n\n    if (!name) {\n      throw new _errors.KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!(0, _isString2.default)(name)) {\n      throw new _errors.KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.inTransaction = false;\n    this.queue = [];\n  }\n\n  _createClass(IndexedDB, [{\n    key: 'openTransaction',\n    value: function openTransaction(collection) {\n      var write = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n      var success = arguments[2];\n\n      var _this = this;\n\n      var error = arguments[3];\n      var force = arguments.length <= 4 || arguments[4] === undefined ? false : arguments[4];\n\n      var db = dbCache[this.name];\n\n      if (db) {\n        var containsCollection = (0, _isFunction2.default)(db.objectStoreNames.contains) ? db.objectStoreNames.contains(collection) : db.objectStoreNames.indexOf(collection) !== -1;\n\n        if (containsCollection) {\n          try {\n            var mode = write ? TransactionMode.ReadWrite : TransactionMode.ReadOnly;\n            var txn = db.transaction([collection], mode);\n\n            if (txn) {\n              var store = txn.objectStore(collection);\n              return success(store);\n            }\n\n            throw new _errors.KinveyError('Unable to open a transaction for the ' + collection + ' ' + ('collection on the ' + this.name + ' indexedDB database.'));\n          } catch (err) {\n            return error(err);\n          }\n        } else if (!write) {\n          return error(new _errors.NotFoundError('The ' + collection + ' collection was not found on ' + ('the ' + this.name + ' indexedDB database.')));\n        }\n      }\n\n      if (!force && this.inTransaction) {\n        return this.queue.push(function () {\n          _this.openTransaction(collection, write, success, error);\n        });\n      }\n\n      // Switch flag\n      this.inTransaction = true;\n      var request = void 0;\n\n      if (db) {\n        var version = db.version + 1;\n        request = indexedDB.open(this.name, version);\n      } else {\n        request = indexedDB.open(this.name);\n      }\n\n      // If the database is opened with an higher version than its current, the\n      // `upgradeneeded` event is fired. Save the handle to the database, and\n      // create the collection.\n      request.onupgradeneeded = function (e) {\n        db = e.target.result;\n\n        if (write) {\n          db.createObjectStore(collection, { keyPath: '_id' });\n        }\n      };\n\n      // The `success` event is fired after `upgradeneeded` terminates.\n      // Save the handle to the database.\n      request.onsuccess = function (e) {\n        db = e.target.result;\n        dbCache[_this.name] = db;\n\n        // If a second instance of the same IndexedDB database performs an\n        // upgrade operation, the `versionchange` event is fired. Then, close the\n        // database to allow the external upgrade to proceed.\n        db.onversionchange = function () {\n          if (db) {\n            db.close();\n            db = null;\n            dbCache[_this.name] = null;\n          }\n        };\n\n        // Try to obtain the collection handle by recursing. Append the handlers\n        // to empty the queue upon success and failure. Set the `force` flag so\n        // all but the current transaction remain queued.\n        var wrap = function wrap(done) {\n          return function (arg) {\n            done(arg);\n\n            // Switch flag\n            _this.inTransaction = false;\n\n            // The database handle has been established, we can now safely empty\n            // the queue. The queue must be emptied before invoking the concurrent\n            // operations to avoid infinite recursion.\n            if (_this.queue.length > 0) {\n              var pending = _this.queue;\n              _this.queue = [];\n              (0, _forEach2.default)(pending, function (fn) {\n                fn.call(_this);\n              });\n            }\n          };\n        };\n\n        _this.openTransaction(collection, write, wrap(success), wrap(error), true);\n      };\n\n      request.onblocked = function () {\n        error(new _errors.KinveyError('The ' + _this.name + ' indexedDB database version can\\'t be upgraded ' + 'because the database is already open.'));\n      };\n\n      request.onerror = function (e) {\n        error(new _errors.KinveyError('Unable to open the ' + _this.name + ' indexedDB database. ' + ('Received the error code ' + e.target.errorCode + '.')));\n      };\n    }\n  }, {\n    key: 'find',\n    value: function find(collection) {\n      var _this2 = this;\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        if (!collection) {\n          return reject(new _errors.KinveyError('A collection was not provided.'));\n        }\n\n        _this2.openTransaction(collection, false, function (store) {\n          var request = store.openCursor();\n          var response = [];\n\n          request.onsuccess = function onSuccess(e) {\n            var cursor = e.target.result;\n\n            if (cursor) {\n              response.push(cursor.value);\n              return cursor.continue();\n            }\n\n            resolve(response);\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while fetching data from the ' + collection + ' ' + ('collection on the ' + _this2.name + ' indexedDB database. Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, function (error) {\n          if (error instanceof _errors.NotFoundError) {\n            return resolve([]);\n          }\n\n          reject(error);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this3 = this;\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        _this3.openTransaction(collection, false, function (store) {\n          var request = store.get(id);\n\n          request.onsuccess = function (e) {\n            var entity = e.target.result;\n\n            if (entity) {\n              return resolve(entity);\n            }\n\n            reject(new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this3.name + ' indexedDB database.')));\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while retrieving an entity with _id = ' + id + ' ' + ('from the ' + collection + ' collection on the ' + _this3.name + ' indexedDB database. ') + ('Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, function (error) {\n          if (error instanceof _errors.NotFoundError) {\n            return reject(new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this3.name + ' indexedDB database.')));\n          }\n\n          reject(error);\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var _this4 = this;\n\n      var singular = false;\n\n      if (!(0, _isArray2.default)(entities)) {\n        entities = [entities];\n        singular = true;\n      }\n\n      if (entities.length === 0) {\n        return _babybird2.default.resolve(entities);\n      }\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        _this4.openTransaction(collection, true, function (store) {\n          var request = store.transaction;\n\n          (0, _forEach2.default)(entities, function (entity) {\n            store.put(entity);\n          });\n\n          request.oncomplete = function onComplete() {\n            resolve(singular ? entities[0] : entities);\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while saving the entities to the ' + collection + ' ' + ('collection on the ' + _this4.name + ' indexedDB database. Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, reject);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this5 = this;\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        _this5.openTransaction(collection, true, function (store) {\n          var request = store.transaction;\n          var doc = store.get(id);\n          store.delete(id);\n\n          request.oncomplete = function () {\n            if (!doc.result) {\n              return reject(new _errors.NotFoundError('An entity with id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this5.name + ' indexedDB database.')));\n            }\n\n            resolve({\n              count: 1,\n              entities: [doc.result]\n            });\n          };\n\n          request.onerror = function (e) {\n            reject(new _errors.KinveyError('An error occurred while deleting an entity with id = ' + id + ' ' + ('in the ' + collection + ' collection on the ' + _this5.name + ' indexedDB database. ') + ('Received the error code ' + e.target.errorCode + '.')));\n          };\n        }, reject);\n      });\n\n      return promise;\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      return indexedDB ? true : false;\n    }\n  }]);\n\n  return IndexedDB;\n}();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../../errors\":22,\"babybird\":4,\"indexeddbshim\":13,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isFunction\":200,\"lodash/isString\":208}],34:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocalStorage = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../../../errors');\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _merge = require('lodash/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _values = require('lodash/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar localStorage = global.localStorage;\n\n/**\n * @private\n */\n\nvar LocalStorage = exports.LocalStorage = function () {\n  function LocalStorage() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'kinvey' : arguments[0];\n\n    _classCallCheck(this, LocalStorage);\n\n    this.name = name;\n  }\n\n  _createClass(LocalStorage, [{\n    key: 'find',\n    value: function find(collection) {\n      var _this = this;\n\n      return _babybird2.default.resolve().then(function () {\n        var data = localStorage.getItem('' + _this.name + collection);\n\n        try {\n          return JSON.parse(data);\n        } catch (err) {\n          return data;\n        }\n      }).then(function (entities) {\n        if (!entities) {\n          return [];\n        }\n\n        return entities;\n      });\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this2 = this;\n\n      return this.find(collection).then(function (entities) {\n        var entity = find(entities, function (entity) {\n          return entity[idAttribute] === id;\n        });\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this2.name + ' memory database.'));\n        }\n\n        return entity;\n      });\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var _this3 = this;\n\n      return this.find(collection).then(function (existingEntities) {\n        var existingEntitiesById = (0, _keyBy2.default)(existingEntities, idAttribute);\n        var entitiesById = (0, _keyBy2.default)(entities, idAttribute);\n        var existingEntityIds = Object.keys(existingEntitiesById);\n\n        (0, _forEach2.default)(existingEntityIds, function (id) {\n          var existingEntity = existingEntitiesById[id];\n          var entity = entitiesById[id];\n\n          if (entity) {\n            entitiesById[id] = (0, _merge2.default)(existingEntity, entity);\n          }\n        });\n\n        localStorage.setItem('' + _this3.name + collection, JSON.stringify((0, _values2.default)(entitiesById)));\n        return entities;\n      });\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this4 = this;\n\n      return this.find(collection).then(function (entities) {\n        var entitiesById = (0, _keyBy2.default)(entities, idAttribute);\n        var entity = entitiesById[id];\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this4.name + ' memory database.'));\n        }\n\n        delete entitiesById[id];\n        localStorage.setItem('' + _this4.name + collection, JSON.stringify((0, _values2.default)(entitiesById)));\n\n        return {\n          count: 1,\n          entities: [entity]\n        };\n      });\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      if (localStorage) {\n        var item = 'testLocalStorageSupport';\n        try {\n          localStorage.setItem(item, item);\n          localStorage.removeItem(item);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return LocalStorage;\n}();\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../../errors\":22,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/keyBy\":211,\"lodash/merge\":216,\"lodash/values\":226}],35:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Memory = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _promiseQueue = require('promise-queue');\n\nvar _promiseQueue2 = _interopRequireDefault(_promiseQueue);\n\nvar _errors = require('../../../errors');\n\nvar _fastMemoryCache = require('fast-memory-cache');\n\nvar _fastMemoryCache2 = _interopRequireDefault(_fastMemoryCache);\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _values = require('lodash/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _find = require('lodash/find');\n\nvar _find2 = _interopRequireDefault(_find);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar caches = [];\n\n_promiseQueue2.default.configure(_babybird2.default);\nvar queue = new _promiseQueue2.default(1, Infinity);\n\n/**\n * @private\n */\n\nvar Memory = exports.Memory = function () {\n  function Memory(name) {\n    _classCallCheck(this, Memory);\n\n    if (!name) {\n      throw new _errors.KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!(0, _isString2.default)(name)) {\n      throw new _errors.KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.cache = caches[name];\n\n    if (!this.cache) {\n      this.cache = new _fastMemoryCache2.default();\n      caches[name] = this.cache;\n    }\n  }\n\n  _createClass(Memory, [{\n    key: 'find',\n    value: function find(collection) {\n      var _this = this;\n\n      return queue.add(function () {\n        return _babybird2.default.resolve().then(function () {\n          var entities = _this.cache.get('' + _this.name + collection);\n\n          if (entities) {\n            try {\n              return JSON.parse(entities);\n            } catch (err) {\n              return entities;\n            }\n          }\n\n          return entities;\n        }).then(function (entities) {\n          if (!entities) {\n            return [];\n          }\n\n          return entities;\n        });\n      });\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this2 = this;\n\n      return this.find(collection).then(function (entities) {\n        var entity = (0, _find2.default)(entities, function (entity) {\n          return entity[idAttribute] === id;\n        });\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this2.name + ' memory database.'));\n        }\n\n        return entity;\n      });\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var _this3 = this;\n\n      var singular = false;\n\n      if (!(0, _isArray2.default)(entities)) {\n        entities = [entities];\n        singular = true;\n      }\n\n      if (entities.length === 0) {\n        return _babybird2.default.resolve(entities);\n      }\n\n      return this.find(collection).then(function (existingEntities) {\n        existingEntities = (0, _keyBy2.default)(existingEntities, idAttribute);\n        entities = (0, _keyBy2.default)(entities, idAttribute);\n        var entityIds = Object.keys(entities);\n\n        (0, _forEach2.default)(entityIds, function (id) {\n          existingEntities[id] = entities[id];\n        });\n\n        _this3.cache.set('' + _this3.name + collection, JSON.stringify((0, _values2.default)(existingEntities)));\n        entities = (0, _values2.default)(entities);\n        return singular ? entities[0] : entities;\n      });\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this4 = this;\n\n      return this.find(collection).then(function (entities) {\n        entities = (0, _keyBy2.default)(entities, idAttribute);\n        var entity = entities[id];\n\n        if (!entity) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this4.name + ' memory database.'));\n        }\n\n        delete entities[id];\n        _this4.cache.set('' + _this4.name + collection, JSON.stringify((0, _values2.default)(entities)));\n\n        return {\n          count: 1,\n          entities: [entity]\n        };\n      });\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      return true;\n    }\n  }]);\n\n  return Memory;\n}();\n\n}).call(this,require('_process'))\n\n},{\"../../../errors\":22,\"_process\":229,\"babybird\":4,\"fast-memory-cache\":10,\"lodash/find\":188,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isString\":208,\"lodash/keyBy\":211,\"lodash/values\":226,\"promise-queue\":230}],36:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WebSQL = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../../../errors');\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar masterCollectionName = 'sqlite_master';\nvar size = 5 * 1000 * 1000; // Database size in bytes\nvar webSQL = null;\nvar dbCache = {};\n\nif (typeof window !== 'undefined') {\n  webSQL = {\n    openDatabase: typeof openDatabase !== 'undefined' ? openDatabase : global.openDatabase\n  };\n}\n\n/**\n * @private\n */\n\nvar WebSQL = exports.WebSQL = function () {\n  function WebSQL() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'kinvey' : arguments[0];\n\n    _classCallCheck(this, WebSQL);\n\n    this.name = name;\n  }\n\n  _createClass(WebSQL, [{\n    key: 'openTransaction',\n    value: function openTransaction(collection, query, parameters) {\n      var _this = this;\n\n      var write = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n      var db = dbCache[this.name];\n      var escapedCollection = '\"' + collection + '\"';\n      var isMaster = collection === masterCollectionName;\n      var isMulti = (0, _isArray2.default)(query);\n\n      query = isMulti ? query : [[query, parameters]];\n\n      if (!db) {\n        db = webSQL.openDatabase(this.name, 1, '', size);\n        dbCache[this.name] = db;\n      }\n\n      var promise = new _babybird2.default(function (resolve, reject) {\n        var writeTxn = write || !(0, _isFunction2.default)(db.readTransaction);\n        db[writeTxn ? 'transaction' : 'readTransaction'](function (tx) {\n          if (write && !isMaster) {\n            tx.executeSql('CREATE TABLE IF NOT EXISTS ' + escapedCollection + ' ' + '(key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)');\n          }\n\n          var pending = query.length;\n          var responses = [];\n\n          (0, _forEach2.default)(query, function (parts) {\n            var sql = parts[0].replace('#{collection}', escapedCollection);\n\n            tx.executeSql(sql, parts[1], function (_, resultSet) {\n              var response = {\n                rowCount: resultSet.rowsAffected,\n                result: []\n              };\n\n              if (resultSet.rows.length) {\n                for (var i = 0, len = resultSet.rows.length; i < len; i++) {\n                  try {\n                    var value = resultSet.rows.item(i).value;\n                    var entity = isMaster ? value : JSON.parse(value);\n                    response.result.push(entity);\n                  } catch (err) {\n                    // Catch the error\n                  }\n                }\n              }\n\n              responses.push(response);\n              pending = pending - 1;\n\n              if (pending === 0) {\n                resolve(isMulti ? responses : responses.shift());\n              }\n            });\n          });\n        }, function (err) {\n          err = (0, _isString2.default)(err) ? err : err.message;\n\n          if (err && err.indexOf('no such table') === -1) {\n            return reject(new _errors.NotFoundError('The ' + collection + ' collection was not found on ' + ('the ' + _this.name + ' webSQL database.')));\n          }\n\n          var query = 'SELECT name AS value from #{collection} WHERE type = ? AND name = ?';\n          var parameters = ['table', collection];\n\n          _this.openTransaction(masterCollectionName, query, parameters).then(function (response) {\n            if (response.result.length === 0) {\n              return reject(new _errors.NotFoundError('The ' + collection + ' collection was not found on ' + ('the ' + _this.name + ' webSQL database.')));\n            }\n\n            reject(new _errors.KinveyError('Unable to open a transaction for the ' + collection + ' ' + ('collection on the ' + _this.name + ' webSQL database.')));\n          }).catch(function (err) {\n            reject(new _errors.KinveyError('Unable to open a transaction for the ' + collection + ' ' + ('collection on the ' + _this.name + ' webSQL database.'), err));\n          });\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'find',\n    value: function find(collection) {\n      var sql = 'SELECT value FROM #{collection}';\n      var promise = this.openTransaction(collection, sql, []).then(function (response) {\n        return response.result;\n      }).catch(function (error) {\n        if (error instanceof _errors.NotFoundError) {\n          return [];\n        }\n\n        throw error;\n      });\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      var _this2 = this;\n\n      var sql = 'SELECT value FROM #{collection} WHERE key = ?';\n      var promise = this.openTransaction(collection, sql, [id]).then(function (response) {\n        var entities = response.result;\n\n        if (entities.length === 0) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this2.name + ' webSQL database.'));\n        }\n\n        return entities[0];\n      });\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save(collection, entities) {\n      var queries = [];\n      entities = (0, _map2.default)(entities, function (entity) {\n        queries.push(['REPLACE INTO #{collection} (key, value) VALUES (?, ?)', [entity[idAttribute], JSON.stringify(entity)]]);\n\n        return entity;\n      });\n\n      var promise = this.openTransaction(collection, queries, null, true).then(function () {\n        return entities;\n      });\n      return promise;\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      var _this3 = this;\n\n      var promise = this.openTransaction(collection, [['SELECT value FROM #{collection} WHERE key = ?', [id]], ['DELETE FROM #{collection} WHERE key = ?', [id]]], null, true).then(function (response) {\n        var entities = response[0].result;\n        var count = response[1].rowCount;\n        count = count ? count : entities.length;\n\n        if (count === 0) {\n          throw new _errors.NotFoundError('An entity with _id = ' + id + ' was not found in the ' + collection + ' ' + ('collection on the ' + _this3.name + ' webSQL database.'));\n        }\n\n        return {\n          count: 1,\n          entities: entities\n        };\n      });\n\n      return promise;\n    }\n  }], [{\n    key: 'isSupported',\n    value: function isSupported() {\n      return webSQL ? true : false;\n    }\n  }]);\n\n  return WebSQL;\n}();\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../../errors\":22,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isFunction\":200,\"lodash/isString\":208,\"lodash/map\":215}],37:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DB = exports.DBAdapter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _query = require('../../query');\n\nvar _aggregation = require('../../aggregation');\n\nvar _indexeddb = require('./adapters/indexeddb');\n\nvar _localstorage = require('./adapters/localstorage');\n\nvar _memory = require('./adapters/memory');\n\nvar _websql = require('./adapters/websql');\n\nvar _errors = require('../../errors');\n\nvar _log = require('../../log');\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * @private\n * Enum for DB Adapters.\n */\nvar DBAdapter = {\n  IndexedDB: 'IndexedDB',\n  LocalStorage: 'LocalStorage',\n  Memory: 'Memory',\n  WebSQL: 'WebSQL'\n};\nObject.freeze(DBAdapter);\nexports.DBAdapter = DBAdapter;\n\n/**\n * @private\n */\n\nvar DB = exports.DB = function () {\n  function DB(name) {\n    var _this = this;\n\n    var adapters = arguments.length <= 1 || arguments[1] === undefined ? [DBAdapter.IndexedDB, DBAdapter.WebSQL, DBAdapter.LocalStorage, DBAdapter.Memory] : arguments[1];\n\n    _classCallCheck(this, DB);\n\n    if (!(0, _isArray2.default)(adapters)) {\n      adapters = [adapters];\n    }\n\n    (0, _forEach2.default)(adapters, function (adapter) {\n      switch (adapter) {\n        case DBAdapter.IndexedDB:\n          if (_indexeddb.IndexedDB.isSupported()) {\n            _this.adapter = new _indexeddb.IndexedDB(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.LocalStorage:\n          if (_localstorage.LocalStorage.isSupported()) {\n            _this.adapter = new _localstorage.LocalStorage(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.Memory:\n          if (_memory.Memory.isSupported()) {\n            _this.adapter = new _memory.Memory(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.WebSQL:\n          if (_websql.WebSQL.isSupported()) {\n            _this.adapter = new _websql.WebSQL(name);\n            return false;\n          }\n\n          break;\n        default:\n          _log.Log.warn('The ' + adapter + ' adapter is is not recognized.');\n      }\n    });\n\n    if (!this.adapter) {\n      if (_memory.Memory.isSupported()) {\n        _log.Log.error('Provided adapters are unsupported on this platform. ' + 'Defaulting to StoreAdapter.Memory adapter.', adapters);\n        this.adapter = new _memory.Memory(name);\n      } else {\n        _log.Log.error('Provided adapters are unsupported on this platform.', adapters);\n      }\n    }\n  }\n\n  _createClass(DB, [{\n    key: 'generateObjectId',\n    value: function generateObjectId() {\n      var length = arguments.length <= 0 || arguments[0] === undefined ? 24 : arguments[0];\n\n      var chars = 'abcdef0123456789';\n      var objectId = '';\n\n      for (var i = 0, j = chars.length; i < length; i++) {\n        var pos = Math.floor(Math.random() * j);\n        objectId += chars.substring(pos, pos + 1);\n      }\n\n      objectId = '' + this.objectIdPrefix + objectId;\n      return objectId;\n    }\n  }, {\n    key: 'find',\n    value: function find(collection, query) {\n      var promise = this.adapter.find(collection).then(function (entities) {\n        if (!entities) {\n          return [];\n        }\n\n        return entities;\n      }).then(function (entities) {\n        if (query && !(query instanceof _query.Query)) {\n          query = new _query.Query((0, _result2.default)(query, 'toJSON', query));\n        }\n\n        if (entities.length > 0 && query) {\n          entities = query._process(entities);\n        }\n\n        return entities;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'count',\n    value: function count(collection, query) {\n      var promise = this.find(collection, query).then(function (entities) {\n        return entities.length;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'group',\n    value: function group(collection, aggregation) {\n      var promise = this.find(collection).then(function (entities) {\n        if (!(aggregation instanceof _aggregation.Aggregation)) {\n          aggregation = new _aggregation.Aggregation((0, _result2.default)(aggregation, 'toJSON', aggregation));\n        }\n\n        if (entities.length > 0 && aggregation) {\n          return aggregation.process(entities);\n        }\n\n        return null;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(collection, id) {\n      if (!(0, _isString2.default)(id)) {\n        return _babybird2.default.reject(new _errors.KinveyError('id must be a string', id));\n      }\n\n      var promise = this.adapter.findById(collection, id);\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save(collection) {\n      var _this2 = this;\n\n      var entities = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n      var singular = false;\n\n      if (!entities) {\n        return _babybird2.default.resolve(null);\n      }\n\n      if (!(0, _isArray2.default)(entities)) {\n        singular = true;\n        entities = [entities];\n      }\n\n      entities = (0, _map2.default)(entities, function (entity) {\n        var id = entity[idAttribute];\n        var kmd = entity[kmdAttribute] || {};\n\n        if (!id) {\n          id = _this2.generateObjectId();\n          kmd.local = true;\n        }\n\n        delete kmd.lmt;\n        entity[idAttribute] = id;\n        entity[kmdAttribute] = kmd;\n        return entity;\n      });\n\n      return this.adapter.save(collection, entities).then(function (entities) {\n        if (singular && entities.length > 0) {\n          return entities[0];\n        }\n\n        return entities;\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(collection, query) {\n      var _this3 = this;\n\n      if (query && !(query instanceof _query.Query)) {\n        query = new _query.Query((0, _result2.default)(query, 'toJSON', query));\n      }\n\n      // Removing should not take the query sort, limit, and skip into account.\n      if (query) {\n        query.sort(null).limit(null).skip(0);\n      }\n\n      var promise = this.find(collection, query).then(function (entities) {\n        var promises = entities.map(function (entity) {\n          return _this3.removeById(collection, entity[idAttribute]);\n        });\n\n        return _babybird2.default.all(promises);\n      }).then(function (responses) {\n        return (0, _reduce2.default)(responses, function (result, response) {\n          result.count += response.count;\n          result.entities = result.entities.concat(response.entities);\n          return result;\n        }, {\n          count: 0,\n          entities: []\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'removeById',\n    value: function removeById(collection, id) {\n      if (!id) {\n        return _babybird2.default.resolve({\n          count: 0,\n          entities: []\n        });\n      }\n\n      if (!(0, _isString2.default)(id)) {\n        return _babybird2.default.reject(new _errors.KinveyError('id must be a string', id));\n      }\n\n      var promise = this.adapter.removeById(collection, id);\n      return promise;\n    }\n  }, {\n    key: 'objectIdPrefix',\n    get: function get() {\n      return '';\n    }\n  }]);\n\n  return DB;\n}();\n\n}).call(this,require('_process'))\n\n},{\"../../aggregation\":18,\"../../errors\":22,\"../../log\":24,\"../../query\":27,\"./adapters/indexeddb\":33,\"./adapters/localstorage\":34,\"./adapters/memory\":35,\"./adapters/websql\":36,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/isString\":208,\"lodash/map\":215,\"lodash/reduce\":218,\"lodash/result\":220}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkRack = exports.CacheRack = exports.KinveyRack = exports.Rack = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _middleware = require('./middleware');\n\nvar _cache = require('./middleware/cache');\n\nvar _parse = require('./middleware/parse');\n\nvar _serialize = require('./middleware/serialize');\n\nvar _findIndex = require('lodash/findIndex');\n\nvar _findIndex2 = _interopRequireDefault(_findIndex);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar sharedCacheRackInstance = void 0;\nvar sharedNetworkRackInstance = void 0;\n\n/**\n * @private\n */\n\nvar Rack = exports.Rack = function (_KinveyMiddleware) {\n  _inherits(Rack, _KinveyMiddleware);\n\n  function Rack() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Rack' : arguments[0];\n\n    _classCallCheck(this, Rack);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Rack).call(this, name));\n\n    _this.middlewares = [];\n    _this.canceled = false;\n    return _this;\n  }\n\n  _createClass(Rack, [{\n    key: 'getMiddleware',\n    value: function getMiddleware() {\n      var index = arguments.length <= 0 || arguments[0] === undefined ? -1 : arguments[0];\n\n      var middlewares = this.middlewares;\n\n      if (index < -1 || index >= middlewares.length) {\n        throw new Error('Index ' + index + ' is out of bounds.');\n      }\n\n      return middlewares[index];\n    }\n  }, {\n    key: 'use',\n    value: function use(middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.KinveyMiddleware) {\n          this.middlewares.push(middleware);\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'useBefore',\n    value: function useBefore(middlewareClass, middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.Middleware) {\n          var middlewares = this.middlewares;\n          var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n            return existingMiddleware instanceof middlewareClass;\n          });\n\n          if (index > -1) {\n            middlewares.splice(index, 0, middleware);\n            this.middlewares = middlewares;\n          }\n\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'useAfter',\n    value: function useAfter(middlewareClass, middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.Middleware) {\n          var middlewares = this.middlewares;\n          var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n            return existingMiddleware instanceof middlewareClass;\n          });\n\n          if (index > -1) {\n            middlewares.splice(index + 1, 0, middleware);\n            this.middlewares = middlewares;\n          }\n\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'swap',\n    value: function swap(middlewareClass, middleware) {\n      if (middleware) {\n        if (middleware instanceof _middleware.Middleware) {\n          var middlewares = this.middlewares;\n          var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n            return existingMiddleware instanceof middlewareClass;\n          });\n\n          if (index > -1) {\n            middlewares.splice(index, 1, middleware);\n            this.middlewares = middlewares;\n          }\n\n          return;\n        }\n\n        throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove(middlewareClass) {\n      var middlewares = this.middlewares;\n      var index = (0, _findIndex2.default)(middlewares, function (existingMiddleware) {\n        return existingMiddleware instanceof middlewareClass;\n      });\n\n      if (index > -1) {\n        middlewares.splice(index, 1);\n        this.middlewares = middlewares;\n        this.remove(middlewareClass);\n      }\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.middlewares = [];\n    }\n  }, {\n    key: 'execute',\n    value: function execute(request) {\n      if (!request) {\n        return _babybird2.default.reject(new Error('Request is null. Please provide a valid request.'));\n      }\n\n      return (0, _reduce2.default)(this.middlewares, function (promise, middleware) {\n        return promise.then(function (request) {\n          return middleware.handle(request);\n        });\n      }, _babybird2.default.resolve(request));\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.canceled = true;\n    }\n  }, {\n    key: 'handle',\n    value: function handle(request) {\n      return this.execute(request);\n    }\n  }, {\n    key: 'generateTree',\n    value: function generateTree() {\n      var level = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];\n\n      var root = _get(Object.getPrototypeOf(Rack.prototype), 'generateTree', this).call(this, level);\n      var middlewares = this.middlewares;\n\n      middlewares.forEach(function (middleware) {\n        root.nodes.push(middleware.generateTree(level + 1));\n      });\n\n      return root;\n    }\n  }]);\n\n  return Rack;\n}(_middleware.KinveyMiddleware);\n\n/**\n * @private\n */\n\n\nvar KinveyRack = exports.KinveyRack = function (_Rack) {\n  _inherits(KinveyRack, _Rack);\n\n  function KinveyRack() {\n    _classCallCheck(this, KinveyRack);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(KinveyRack).apply(this, arguments));\n  }\n\n  _createClass(KinveyRack, [{\n    key: 'execute',\n    value: function execute(request) {\n      var promise = _get(Object.getPrototypeOf(KinveyRack.prototype), 'execute', this).call(this, request).then(function (request) {\n        return request.response;\n      });\n      return promise;\n    }\n  }]);\n\n  return KinveyRack;\n}(Rack);\n\n/**\n * @private\n */\n\n\nvar CacheRack = exports.CacheRack = function (_KinveyRack) {\n  _inherits(CacheRack, _KinveyRack);\n\n  function CacheRack() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Cache Rack' : arguments[0];\n\n    _classCallCheck(this, CacheRack);\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(CacheRack).call(this, name));\n\n    _this3.use(new _cache.CacheMiddleware());\n    return _this3;\n  }\n\n  _createClass(CacheRack, null, [{\n    key: 'sharedInstance',\n    value: function sharedInstance() {\n      var instance = sharedCacheRackInstance;\n\n      if (!instance) {\n        instance = new CacheRack();\n        sharedCacheRackInstance = instance;\n      }\n\n      return instance;\n    }\n  }]);\n\n  return CacheRack;\n}(KinveyRack);\n\n/**\n * @private\n */\n\n\nvar NetworkRack = exports.NetworkRack = function (_KinveyRack2) {\n  _inherits(NetworkRack, _KinveyRack2);\n\n  function NetworkRack() {\n    var name = arguments.length <= 0 || arguments[0] === undefined ? 'Kinvey Network Rack' : arguments[0];\n\n    _classCallCheck(this, NetworkRack);\n\n    var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(NetworkRack).call(this, name));\n\n    _this4.use(new _serialize.SerializeMiddleware());\n    _this4.use(new _parse.ParseMiddleware());\n    return _this4;\n  }\n\n  _createClass(NetworkRack, null, [{\n    key: 'sharedInstance',\n    value: function sharedInstance() {\n      var instance = sharedNetworkRackInstance;\n\n      if (!instance) {\n        instance = new NetworkRack();\n        sharedNetworkRackInstance = instance;\n      }\n\n      return instance;\n    }\n  }]);\n\n  return NetworkRack;\n}(KinveyRack);\n\n},{\"./middleware\":29,\"./middleware/cache\":30,\"./middleware/parse\":31,\"./middleware/serialize\":32,\"babybird\":4,\"lodash/findIndex\":189,\"lodash/reduce\":218}],39:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DeltaFetchRequest = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _request = require('./request');\n\nvar _local = require('./local');\n\nvar _network = require('./network');\n\nvar _response = require('./response');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _query3 = require('../query');\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _values = require('lodash/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nvar lmtAttribute = process.env.KINVEY_LMT_ATTRIBUTE || 'lmt';\nvar maxIdsPerRequest = process.env.KINVEY_MAX_IDS || 200;\n\n/**\n * @private\n */\n\nvar DeltaFetchRequest = exports.DeltaFetchRequest = function (_KinveyRequest) {\n  _inherits(DeltaFetchRequest, _KinveyRequest);\n\n  function DeltaFetchRequest() {\n    _classCallCheck(this, DeltaFetchRequest);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(DeltaFetchRequest).apply(this, arguments));\n  }\n\n  _createClass(DeltaFetchRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      var promise = _get(Object.getPrototypeOf(DeltaFetchRequest.prototype), 'execute', this).call(this).then(function () {\n        if (_this2.method !== _enums.HttpMethod.GET) {\n          throw new Error('Invalid http method. Http GET requests are only supported by DeltaFetchRequests.');\n        }\n\n        var localRequest = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _this2.url,\n          headers: _this2.headers,\n          query: _this2.query,\n          timeout: _this2.timeout,\n          client: _this2.client\n        });\n        return localRequest.execute();\n      }).catch(function (error) {\n        if (error instanceof _errors.NotFoundError) {\n          return new _response.Response({\n            statusCode: _enums.StatusCode.Ok,\n            data: []\n          });\n        }\n\n        throw error;\n      }).then(function (cacheResponse) {\n        if (cacheResponse.data.length > 0) {\n          var _ret = function () {\n            var cacheDocuments = (0, _keyBy2.default)(cacheResponse.data, idAttribute);\n            var query = new _query3.Query((0, _result2.default)(_this2.query, 'toJSON', _this2.query));\n            query.fields([idAttribute, kmdAttribute]);\n            var networkRequest = new _network.NetworkRequest({\n              method: _enums.HttpMethod.GET,\n              url: _this2.url,\n              headers: _this2.headers,\n              auth: _this2.auth,\n              query: query,\n              timeout: _this2.timeout,\n              client: _this2.client\n            });\n\n            return {\n              v: networkRequest.execute().then(function (networkResponse) {\n                var networkDocuments = (0, _keyBy2.default)(networkResponse.data, idAttribute);\n                var deltaSet = networkDocuments;\n                var cacheDocumentIds = Object.keys(cacheDocuments);\n\n                (0, _forEach2.default)(cacheDocumentIds, function (id) {\n                  var cacheDocument = cacheDocuments[id];\n                  var networkDocument = networkDocuments[id];\n\n                  if (networkDocument) {\n                    if (networkDocument[kmdAttribute] && cacheDocument[kmdAttribute] && networkDocument[kmdAttribute][lmtAttribute] === cacheDocument[kmdAttribute][lmtAttribute]) {\n                      delete deltaSet[id];\n                    } else {\n                      delete cacheDocuments[id];\n                    }\n                  } else {\n                    delete cacheDocuments[id];\n                  }\n                });\n\n                var deltaSetIds = Object.keys(deltaSet);\n                var promises = [];\n                var i = 0;\n\n                while (i < deltaSetIds.length) {\n                  var _query = new _query3.Query((0, _result2.default)(_this2.query, 'toJSON', _this2.query));\n                  var ids = deltaSetIds.slice(i, deltaSetIds.length > maxIdsPerRequest + i ? maxIdsPerRequest : deltaSetIds.length);\n                  _query.contains(idAttribute, ids);\n                  var _networkRequest = new _network.NetworkRequest({\n                    method: _enums.HttpMethod.GET,\n                    url: _this2.url,\n                    headers: _this2.headers,\n                    auth: _this2.auth,\n                    query: _query,\n                    timeout: _this2.timeout,\n                    client: _this2.client\n                  });\n\n                  var _promise = _networkRequest.execute();\n                  promises.push(_promise);\n                  i += maxIdsPerRequest;\n                }\n\n                return _babybird2.default.all(promises).then(function (responses) {\n                  var initialResponse = new _response.Response({\n                    statusCode: _enums.StatusCode.Ok,\n                    data: []\n                  });\n                  return (0, _reduce2.default)(responses, function (result, response) {\n                    if (response.isSuccess()) {\n                      result.addHeaders(response.headers);\n                      result.data = result.data.concat(response.data);\n                    }\n\n                    return result;\n                  }, initialResponse);\n                }).then(function (response) {\n                  response.data = response.data.concat((0, _values2.default)(cacheDocuments));\n\n                  if (_this2.query) {\n                    var _query2 = new _query3.Query((0, _result2.default)(_this2.query, 'toJSON', _this2.query));\n                    _query2.skip(0).limit(0);\n                    response.data = _query2._process(response.data);\n                  }\n\n                  return response;\n                });\n              })\n            };\n          }();\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n\n        var networkRequest = new _network.NetworkRequest({\n          method: _enums.HttpMethod.GET,\n          url: _this2.url,\n          headers: _this2.headers,\n          auth: _this2.auth,\n          query: _this2.query,\n          timeout: _this2.timeout,\n          client: _this2.client\n        });\n        return networkRequest.execute();\n      });\n\n      return promise;\n    }\n  }]);\n\n  return DeltaFetchRequest;\n}(_request.KinveyRequest);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../query\":27,\"./local\":40,\"./network\":41,\"./request\":43,\"./response\":44,\"_process\":229,\"babybird\":4,\"lodash/forEach\":190,\"lodash/keyBy\":211,\"lodash/reduce\":218,\"lodash/result\":220,\"lodash/values\":226}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LocalRequest = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _request = require('./request');\n\nvar _rack = require('../rack/rack');\n\nvar _errors = require('../errors');\n\nvar _response = require('./response');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar LocalRequest = exports.LocalRequest = function (_KinveyRequest) {\n  _inherits(LocalRequest, _KinveyRequest);\n\n  function LocalRequest(options) {\n    _classCallCheck(this, LocalRequest);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(LocalRequest).call(this, options));\n\n    _this.rack = _rack.CacheRack.sharedInstance();\n    return _this;\n  }\n\n  _createClass(LocalRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      var promise = _get(Object.getPrototypeOf(LocalRequest.prototype), 'execute', this).call(this).then(function () {\n        return _this2.rack.execute(_this2);\n      }).then(function (response) {\n        if (!response) {\n          throw new _errors.NoResponseError();\n        }\n\n        if (!(response instanceof _response.Response)) {\n          return new _response.Response({\n            statusCode: response.statusCode,\n            headers: response.headers,\n            data: response.data\n          });\n        }\n\n        return response;\n      }).then(function (response) {\n        if (!response.isSuccess()) {\n          throw response.error;\n        }\n\n        return response;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      var _this3 = this;\n\n      var promise = _get(Object.getPrototypeOf(LocalRequest.prototype), 'cancel', this).call(this).then(function () {\n        return _this3.rack.cancel();\n      });\n      return promise;\n    }\n  }]);\n\n  return LocalRequest;\n}(_request.KinveyRequest);\n\n},{\"../errors\":22,\"../rack/rack\":38,\"./request\":43,\"./response\":44}],41:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkRequest = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _request = require('./request');\n\nvar _rack = require('../rack/rack');\n\nvar _errors = require('../errors');\n\nvar _enums = require('../enums');\n\nvar _response = require('./response');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nvar micIdentity = process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\nvar tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\nvar usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\n\n/**\n * @private\n */\n\nvar NetworkRequest = exports.NetworkRequest = function (_KinveyRequest) {\n  _inherits(NetworkRequest, _KinveyRequest);\n\n  function NetworkRequest(options) {\n    _classCallCheck(this, NetworkRequest);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(NetworkRequest).call(this, options));\n\n    _this.rack = _rack.NetworkRack.sharedInstance();\n    _this.automaticallyRefreshAuthToken = true;\n    return _this;\n  }\n\n  _createClass(NetworkRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      var promise = _get(Object.getPrototypeOf(NetworkRequest.prototype), 'execute', this).call(this).then(function () {\n        return _this2.rack.execute(_this2);\n      }).then(function (response) {\n        if (!response) {\n          throw new _errors.NoResponseError();\n        }\n\n        if (!(response instanceof _response.Response)) {\n          return new _response.Response({\n            statusCode: response.statusCode,\n            headers: response.headers,\n            data: response.data\n          });\n        }\n\n        return response;\n      }).then(function (response) {\n        if (!response.isSuccess()) {\n          throw response.error;\n        }\n\n        return response;\n      }).catch(function (error) {\n        if (error instanceof _errors.InvalidCredentialsError && _this2.automaticallyRefreshAuthToken) {\n          var _ret = function () {\n            _this2.automaticallyRefreshAuthToken = false;\n            var activeSocialIdentity = _this2.client.getActiveSocialIdentity();\n\n            // Refresh MIC Auth Token\n            if (activeSocialIdentity && activeSocialIdentity.identity === micIdentity) {\n              // Refresh the token\n              var token = activeSocialIdentity.token;\n              var request = new NetworkRequest({\n                method: _enums.HttpMethod.POST,\n                headers: {\n                  'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                authType: _enums.AuthType.App,\n                url: _url2.default.format({\n                  protocol: activeSocialIdentity.client.protocol,\n                  host: activeSocialIdentity.client.host,\n                  pathname: tokenPathname\n                }),\n                properties: _this2.properties,\n                data: {\n                  grant_type: 'refresh_token',\n                  client_id: token.audience,\n                  redirect_uri: activeSocialIdentity.redirectUri,\n                  refresh_token: token.refresh_token\n                }\n              });\n              request.automaticallyRefreshAuthToken = false;\n\n              return {\n                v: request.execute().then(function (response) {\n                  return response.data;\n                }).then(function (token) {\n                  // Login the user with the new token\n                  var activeUserData = _this2.client.getActiveUserData();\n                  var socialIdentity = activeUserData[socialIdentityAttribute];\n                  socialIdentity[activeSocialIdentity.identity] = token;\n                  activeUserData[socialIdentityAttribute] = socialIdentity;\n\n                  var request = new NetworkRequest({\n                    method: _enums.HttpMethod.POST,\n                    authType: _enums.AuthType.App,\n                    url: _url2.default.format({\n                      protocol: _this2.client.protocol,\n                      host: _this2.client.host,\n                      pathname: '/' + usersNamespace + '/' + _this2.client.appKey + '/login'\n                    }),\n                    properties: _this2.properties,\n                    data: activeUserData,\n                    timeout: _this2.timeout,\n                    client: _this2.client\n                  });\n                  request.automaticallyRefreshAuthToken = false;\n                  return request.execute();\n                }).then(function (response) {\n                  // Store the new data\n                  _this2.client.setActiveUserData(response.data);\n                  _this2.client.setActiveSocialIdentity({\n                    identity: activeSocialIdentity.identity,\n                    redirectUri: activeSocialIdentity.redirectUri,\n                    token: response.data[socialIdentityAttribute][activeSocialIdentity.identity]\n                  });\n\n                  // Execute the original request\n                  return _this2.execute();\n                }).catch(function () {\n                  throw error;\n                })\n              };\n            }\n          }();\n\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n        }\n\n        throw error;\n      }).then(function (response) {\n        _this2.automaticallyRefreshAuthToken = true;\n        return response;\n      }).catch(function (error) {\n        _this2.automaticallyRefreshAuthToken = true;\n        throw error;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      var _this3 = this;\n\n      var promise = _get(Object.getPrototypeOf(NetworkRequest.prototype), 'cancel', this).call(this).then(function () {\n        return _this3.rack.cancel();\n      });\n      return promise;\n    }\n  }]);\n\n  return NetworkRequest;\n}(_request.KinveyRequest);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../rack/rack\":38,\"./request\":43,\"./response\":44,\"_process\":229,\"url\":244}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestProperties = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _errors = require('../errors');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appVersionKey = 'appVersion';\n\n/**\n * Request Properties class\n */\n\nvar RequestProperties = exports.RequestProperties = function () {\n  function RequestProperties() {\n    var properties = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, RequestProperties);\n\n    this.properties = properties;\n  }\n\n  _createClass(RequestProperties, [{\n    key: 'getProperty',\n\n\n    /**\n     * Returns the request property for the key or `undefined` if\n     * it has not been set.\n     *\n     * @param  {String} key Request property key\n     * @return {*} Request property value\n     */\n    value: function getProperty(key) {\n      var properties = this.toJSON();\n\n      if (key && properties.hasOwnProperty(key)) {\n        return properties[key];\n      }\n\n      return undefined;\n    }\n\n    /**\n     * Sets the request property key to the value.\n     *\n     * @param {String} key Request property key\n     * @param {*} value Request property value\n     * @return {RequestProperties} The request properties instance.\n     */\n\n  }, {\n    key: 'setProperty',\n    value: function setProperty(key, value) {\n      var properties = {};\n      properties[key] = value;\n      this.addProperties(properties);\n      return this;\n    }\n  }, {\n    key: 'addProperties',\n    value: function addProperties(properties) {\n      var _this = this;\n\n      if (!(0, _isPlainObject2.default)(properties)) {\n        throw new _errors.KinveyError('properties argument must be an object');\n      }\n\n      Object.keys(properties).forEach(function (key) {\n        var value = properties[key];\n\n        if (value) {\n          _this.properties[key] = value;\n        } else {\n          delete _this.properties[key];\n        }\n      });\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.properties = {};\n    }\n  }, {\n    key: 'clearProperty',\n    value: function clearProperty(key) {\n      var properties = this.properties;\n\n      if (key && properties.hasOwnProperty(key)) {\n        delete properties[key];\n      }\n    }\n\n    /**\n     * Clears the app version property.\n     *\n     * @return {RequestProperties} The request properties instance.\n     */\n\n  }, {\n    key: 'clearAppVersion',\n    value: function clearAppVersion() {\n      return this.clearProperty(appVersionKey);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.properties;\n    }\n  }, {\n    key: 'properties',\n    get: function get() {\n      return this._properties;\n    },\n    set: function set(properties) {\n      this._properties = properties;\n    }\n\n    /**\n     * Return the app version request property.\n     *\n     * @return {String} App version\n     */\n\n  }, {\n    key: 'appVersion',\n    get: function get() {\n      return this.getProperty(appVersionKey);\n    }\n\n    /**\n     * Set the app version request property. The app version can be provided\n     * in major.minor.patch format or something specific to your application.\n     *\n     * @param  {Any} version App version.\n     * @return {RequestProperties} The request properties instance.\n     */\n    ,\n    set: function set(version) {\n      version = Array.prototype.slice.call(arguments, 1);\n      var major = version[0];\n      var minor = version[1];\n      var patch = version[2];\n      var appVersion = '';\n\n      if (major) {\n        appVersion = (major + '').trim();\n      }\n\n      if (minor) {\n        appVersion = ('.' + minor).trim();\n      }\n\n      if (patch) {\n        appVersion = ('.' + patch).trim();\n      }\n\n      this.setProperty(appVersionKey, appVersion);\n      return this;\n    }\n  }]);\n\n  return RequestProperties;\n}();\n\n},{\"../errors\":22,\"lodash/isPlainObject\":206}],43:[function(require,module,exports){\n(function (process,Buffer){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KinveyRequest = exports.Request = undefined;\n\nvar _set = function set(object, property, value, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent !== null) { set(parent, property, value, receiver); } } else if (\"value\" in desc && desc.writable) { desc.value = value; } else { var setter = desc.set; if (setter !== undefined) { setter.call(receiver, value); } } return value; };\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _enums = require('../enums');\n\nvar _device = require('../utils/device');\n\nvar _properties = require('./properties');\n\nvar _rack = require('../rack/rack');\n\nvar _client = require('../client');\n\nvar _string = require('../utils/string');\n\nvar _qs = require('qs');\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nvar _appendQuery = require('append-query');\n\nvar _appendQuery2 = _interopRequireDefault(_appendQuery);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _isEmpty = require('lodash/isEmpty');\n\nvar _isEmpty2 = _interopRequireDefault(_isEmpty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\nvar Auth = {\n  /**\n   * Authenticate through (1) user credentials, (2) Master Secret, or (3) App\n   * Secret.\n   *\n   * @returns {Object}\n   */\n\n  all: function all(client) {\n    try {\n      return Auth.session(client);\n    } catch (error) {\n      return Auth.basic(client);\n    }\n  },\n\n\n  /**\n   * Authenticate through App Secret.\n   *\n   * @returns {Object}\n   */\n  app: function app(client) {\n    if (!client.appKey || !client.appSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.appSecret\n    };\n  },\n\n\n  /**\n   * Authenticate through (1) Master Secret, or (2) App Secret.\n   *\n   * @returns {Object}\n   */\n  basic: function basic(client) {\n    try {\n      return Auth.master(client);\n    } catch (error) {\n      return Auth.app(client);\n    }\n  },\n\n\n  /**\n   * Authenticate through Master Secret.\n   *\n   * @returns {Object}\n   */\n  master: function master(client) {\n    if (!client.appKey || !client.masterSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.masterSecret\n    };\n  },\n\n\n  /**\n   * Do not authenticate.\n   *\n   * @returns {Null}\n   */\n  none: function none() {\n    return null;\n  },\n\n\n  /**\n   * Authenticate through user credentials.\n   *\n   * @returns {Object}\n   */\n  session: function session(client) {\n    var activeUserData = client.getActiveUserData();\n\n    if (!activeUserData) {\n      throw new Error('There is not an active user.');\n    }\n\n    return {\n      scheme: 'Kinvey',\n      credentials: activeUserData[kmdAttribute].authtoken\n    };\n  }\n};\n\n/**\n * @private\n */\n\nvar Request = exports.Request = function () {\n  function Request() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Request);\n\n    options = (0, _assign2.default)({\n      method: _enums.HttpMethod.GET,\n      headers: {},\n      url: '',\n      data: null,\n      timeout: process.env.KINVEY_DEFAULT_TIMEOUT || 10000,\n      followRedirect: true\n    }, options);\n\n    this.method = options.method;\n    this.url = options.url;\n    this.data = options.data || options.body;\n    this.timeout = options.timeout;\n    this.followRedirect = options.followRedirect;\n    this.executing = false;\n\n    var headers = options.headers && (0, _isPlainObject2.default)(options.headers) ? options.headers : {};\n\n    if (!headers.Accept || !headers.accept) {\n      headers.Accept = 'application/json; charset=utf-8';\n    }\n\n    this.addHeaders(headers);\n  }\n\n  _createClass(Request, [{\n    key: 'getHeader',\n    value: function getHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        var keys = Object.keys(headers);\n\n        for (var i = 0, len = keys.length; i < len; i++) {\n          var key = keys[i];\n\n          if (key.toLowerCase() === name.toLowerCase()) {\n            return headers[key];\n          }\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'setHeader',\n    value: function setHeader(name, value) {\n      if (!name || !value) {\n        throw new Error('A name and value must be provided to set a header.');\n      }\n\n      if (!(0, _isString2.default)(name)) {\n        name = String(name);\n      }\n\n      var headers = this.headers || {};\n\n      if (!(0, _isString2.default)(value)) {\n        headers[name] = JSON.stringify(value);\n      } else {\n        headers[name] = value;\n      }\n\n      this.headers = headers;\n    }\n  }, {\n    key: 'addHeader',\n    value: function addHeader() {\n      var header = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.setHeader(header.name, header.value);\n    }\n  }, {\n    key: 'addHeaders',\n    value: function addHeaders(headers) {\n      var _this = this;\n\n      if (!(0, _isPlainObject2.default)(headers)) {\n        throw new Error('Headers argument must be an object.');\n      }\n\n      var names = Object.keys(headers);\n\n      (0, _forEach2.default)(names, function (name) {\n        var value = headers[name];\n        _this.setHeader(name, value);\n      });\n    }\n  }, {\n    key: 'removeHeader',\n    value: function removeHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        delete headers[name];\n        this.headers = headers;\n      }\n    }\n  }, {\n    key: 'clearHeaders',\n    value: function clearHeaders() {\n      this.headers = {};\n    }\n  }, {\n    key: 'isExecuting',\n    value: function isExecuting() {\n      return this.executing ? true : false;\n    }\n  }, {\n    key: 'execute',\n    value: function execute() {\n      var _this2 = this;\n\n      if (this.executing) {\n        return _babybird2.default.reject(new Error('Unable to execute the request. The request is already executing.'));\n      }\n\n      this.executing = _babybird2.default.resolve().then(function (response) {\n        _this2.executing = false;\n        return response;\n      }).catch(function (error) {\n        _this2.executing = false;\n        throw error;\n      });\n\n      return this.executing;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        method: this.method,\n        headers: this.headers,\n        url: this.url,\n        data: this.data,\n        followRedirect: this.followRedirect\n      };\n\n      return json;\n    }\n  }, {\n    key: 'method',\n    get: function get() {\n      return this._method;\n    },\n    set: function set(method) {\n      if (!(0, _isString2.default)(method)) {\n        method = String(method);\n      }\n\n      method = method.toUpperCase();\n\n      switch (method) {\n        case _enums.HttpMethod.GET:\n        case _enums.HttpMethod.POST:\n        case _enums.HttpMethod.PATCH:\n        case _enums.HttpMethod.PUT:\n        case _enums.HttpMethod.DELETE:\n          this._method = method;\n          break;\n        default:\n          throw new Error('Invalid Http Method. Only GET, POST, PATCH, PUT, and DELETE are allowed.');\n      }\n    }\n  }, {\n    key: 'url',\n    get: function get() {\n      return (0, _appendQuery2.default)(this._url, _qs2.default.stringify({\n        _: Math.random().toString(36).substr(2)\n      }));\n    },\n    set: function set(url) {\n      this._url = url;\n    }\n  }, {\n    key: 'body',\n    get: function get() {\n      return this.data;\n    },\n    set: function set(body) {\n      this.data = body;\n    }\n  }, {\n    key: 'data',\n    get: function get() {\n      return this._data;\n    },\n    set: function set(data) {\n      if (data) {\n        var contentTypeHeader = this.getHeader('Content-Type');\n        if (!contentTypeHeader) {\n          this.setHeader('Content-Type', 'application/json; charset=utf-8');\n        }\n      } else {\n        this.removeHeader('Content-Type');\n      }\n\n      this._data = data;\n    }\n  }]);\n\n  return Request;\n}();\n\n/**\n * @private\n */\n\n\nvar KinveyRequest = exports.KinveyRequest = function (_Request) {\n  _inherits(KinveyRequest, _Request);\n\n  function KinveyRequest() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, KinveyRequest);\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(KinveyRequest).call(this, options));\n\n    options = (0, _assign2.default)({\n      authType: _enums.AuthType.None,\n      properties: null,\n      query: null,\n      client: _client.Client.sharedInstance()\n    }, options);\n\n    _this3.rack = new _rack.KinveyRack();\n    _this3.authType = options.authType;\n    _this3.properties = options.properties;\n    _this3.query = (0, _result2.default)(options.query, 'toJSON', options.query);\n    _this3.client = options.client;\n\n    var headers = {};\n    headers['X-Kinvey-Api-Version'] = process.env.KINVEY_API_VERSION || 3;\n\n    var device = new _device.Device();\n    headers['X-Kinvey-Device-Information'] = JSON.stringify(device.toJSON());\n\n    if (options.contentType) {\n      headers['X-Kinvey-Content-Type'] = options.contentType;\n    }\n\n    if (options.skipBL === true) {\n      headers['X-Kinvey-Skip-Business-Logic'] = true;\n    }\n\n    if (options.trace === true) {\n      headers['X-Kinvey-Include-Headers-In-Response'] = 'X-Kinvey-Request-Id';\n      headers['X-Kinvey-ResponseWrapper'] = true;\n    }\n\n    _this3.addHeaders(headers);\n    return _this3;\n  }\n\n  _createClass(KinveyRequest, [{\n    key: 'execute',\n    value: function execute() {\n      var authorizationHeader = this.authorizationHeader;\n\n      if (authorizationHeader) {\n        this.addHeader(authorizationHeader);\n      }\n\n      var promise = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'execute', this).call(this);\n      return promise;\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      var promise = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'cancel', this).call(this);\n      return promise;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'toJSON', this).call(this);\n      json.query = this.query;\n      return json;\n    }\n  }, {\n    key: 'properties',\n    set: function set(properties) {\n      if (properties) {\n        if (!(properties instanceof _properties.RequestProperties)) {\n          properties = new _properties.RequestProperties((0, _result2.default)(properties, 'toJSON', properties));\n        }\n\n        var appVersion = properties.appVersion;\n\n        if (appVersion) {\n          this.setHeader('X-Kinvey-Client-App-Version', appVersion);\n        } else {\n          this.removeHeader('X-Kinvey-Client-App-Version');\n        }\n\n        var customProperties = (0, _result2.default)(properties, 'toJSON', {});\n        delete customProperties.appVersion;\n        var customPropertiesHeader = JSON.stringify(customProperties);\n        var customPropertiesByteCount = (0, _string.byteCount)(customPropertiesHeader);\n        var customPropertiesMaxBytesAllowed = process.env.KINVEY_MAX_HEADER_BYTES || 2000;\n\n        if (customPropertiesByteCount >= customPropertiesMaxBytesAllowed) {\n          throw new Error('The custom properties are ' + customPropertiesByteCount + ' bytes.' + ('It must be less then ' + customPropertiesMaxBytesAllowed + ' bytes.'), 'Please remove some custom properties.');\n        }\n\n        this.setHeader('X-Kinvey-Custom-Request-Properties', customPropertiesHeader);\n      }\n    }\n  }, {\n    key: 'url',\n    get: function get() {\n      var url = _get(Object.getPrototypeOf(KinveyRequest.prototype), 'url', this);\n      var queryString = {};\n\n      if (this.query) {\n        queryString.query = this.query.filter;\n\n        if (!(0, _isEmpty2.default)(this.query.fields)) {\n          queryString.fields = this.query.fields.join(',');\n        }\n\n        if (this.query.limit) {\n          queryString.limit = this.query.limit;\n        }\n\n        if (this.query.skip > 0) {\n          queryString.skip = this.query.skip;\n        }\n\n        if (!(0, _isEmpty2.default)(this.query.sort)) {\n          queryString.sort = this.query.sort;\n        }\n      }\n\n      var keys = Object.keys(queryString);\n      (0, _forEach2.default)(keys, function (key) {\n        queryString[key] = (0, _isString2.default)(queryString[key]) ? queryString[key] : JSON.stringify(queryString[key]);\n      });\n\n      if ((0, _isEmpty2.default)(queryString)) {\n        return url;\n      }\n\n      return (0, _appendQuery2.default)(url, _qs2.default.stringify(queryString));\n    },\n    set: function set(url) {\n      _set(Object.getPrototypeOf(KinveyRequest.prototype), 'url', url, this);\n    }\n  }, {\n    key: 'authorizationHeader',\n    get: function get() {\n      var authInfo = void 0;\n\n      switch (this.authType) {\n        case _enums.AuthType.All:\n          authInfo = Auth.all(this.client);\n          break;\n        case _enums.AuthType.App:\n          authInfo = Auth.app(this.client);\n          break;\n        case _enums.AuthType.Basic:\n          authInfo = Auth.basic(this.client);\n          break;\n        case _enums.AuthType.Master:\n          authInfo = Auth.master(this.client);\n          break;\n        case _enums.AuthType.None:\n          authInfo = Auth.none(this.client);\n          break;\n        case _enums.AuthType.Session:\n          authInfo = Auth.session(this.client);\n          break;\n        default:\n          try {\n            authInfo = Auth.session(this.client);\n          } catch (error) {\n            try {\n              authInfo = Auth.master(this.client);\n            } catch (error2) {\n              throw error;\n            }\n          }\n      }\n\n      if (authInfo) {\n        var credentials = authInfo.credentials;\n\n        if (authInfo.username) {\n          credentials = new Buffer(authInfo.username + ':' + authInfo.password).toString('base64');\n        }\n\n        return {\n          name: 'Authorization',\n          value: authInfo.scheme + ' ' + credentials\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return KinveyRequest;\n}(Request);\n\n}).call(this,require('_process'),require(\"buffer\").Buffer)\n\n},{\"../client\":19,\"../enums\":21,\"../rack/rack\":38,\"../utils/device\":53,\"../utils/string\":56,\"./properties\":42,\"_process\":229,\"append-query\":1,\"babybird\":4,\"buffer\":6,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isEmpty\":199,\"lodash/isPlainObject\":206,\"lodash/isString\":208,\"lodash/result\":220,\"qs\":234}],44:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Response = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @private\n */\n\nvar Response = exports.Response = function () {\n  function Response() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, Response);\n\n    options = (0, _assign2.default)({\n      statusCode: _enums.StatusCode.Ok,\n      headers: {\n        'Content-Type': 'application/json; charset=utf-8'\n      },\n      data: null\n    }, options);\n\n    this.statusCode = options.statusCode;\n    this.addHeaders(options.headers);\n    this.data = options.data;\n  }\n\n  _createClass(Response, [{\n    key: 'getHeader',\n    value: function getHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        var keys = Object.keys(headers);\n\n        for (var i = 0, len = keys.length; i < len; i++) {\n          var key = keys[i];\n\n          if (key.toLowerCase() === name.toLowerCase()) {\n            return headers[key];\n          }\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: 'setHeader',\n    value: function setHeader(name, value) {\n      if (!name || !value) {\n        throw new Error('A name and value must be provided to set a header.');\n      }\n\n      if (!(0, _isString2.default)(name)) {\n        name = String(name);\n      }\n\n      var headers = this.headers || {};\n\n      if (!(0, _isString2.default)(value)) {\n        headers[name] = JSON.stringify(value);\n      } else {\n        headers[name] = value;\n      }\n\n      this.headers = headers;\n    }\n  }, {\n    key: 'addHeader',\n    value: function addHeader() {\n      var header = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.setHeader(header.name, header.value);\n    }\n  }, {\n    key: 'addHeaders',\n    value: function addHeaders(headers) {\n      var _this = this;\n\n      if (!(0, _isPlainObject2.default)(headers)) {\n        throw new Error('Headers argument must be an object.');\n      }\n\n      var names = Object.keys(headers);\n\n      (0, _forEach2.default)(names, function (name) {\n        var value = headers[name];\n        _this.setHeader(name, value);\n      });\n    }\n  }, {\n    key: 'removeHeader',\n    value: function removeHeader(name) {\n      if (name) {\n        if (!(0, _isString2.default)(name)) {\n          name = String(name);\n        }\n\n        var headers = this.headers || {};\n        delete headers[name];\n        this.headers = headers;\n      }\n    }\n  }, {\n    key: 'clearHeaders',\n    value: function clearHeaders() {\n      this.headers = {};\n    }\n  }, {\n    key: 'isSuccess',\n    value: function isSuccess() {\n      return this.statusCode >= 200 && this.statusCode < 300 || this.statusCode === 302;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var json = {\n        statusCode: this.statusCode,\n        headers: this.headers,\n        data: this.data\n      };\n      return json;\n    }\n  }, {\n    key: 'error',\n    get: function get() {\n      if (this.isSuccess()) {\n        return null;\n      }\n\n      var data = this.data || {};\n      var name = data.name || data.error;\n      var message = data.message || data.description;\n      var debug = data.debug;\n\n      if (name === 'EntityNotFound' || name === 'CollectionNotFound' || name === 'AppNotFound' || name === 'UserNotFound' || name === 'BlobNotFound' || name === 'DocumentNotFound') {\n        return new _errors.NotFoundError(message, debug);\n      } else if (name === 'InsufficientCredentials') {\n        return new _errors.InsufficientCredentialsError(message, debug);\n      } else if (name === 'InvalidCredentials') {\n        return new _errors.InvalidCredentialsError(message, debug);\n      }\n\n      return new _errors.KinveyError(message, debug);\n    }\n  }]);\n\n  return Response;\n}();\n\n},{\"../enums\":21,\"../errors\":22,\"lodash/assign\":184,\"lodash/forEach\":190,\"lodash/isPlainObject\":206,\"lodash/isString\":208}],45:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CacheStore = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _networkstore = require('./networkstore');\n\nvar _response = require('../requests/response');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _local = require('../requests/local');\n\nvar _network = require('../requests/network');\n\nvar _deltafetch = require('../requests/deltafetch');\n\nvar _query = require('../query');\n\nvar _aggregation = require('../aggregation');\n\nvar _log = require('../log');\n\nvar _object = require('../utils/object');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _keyBy = require('lodash/keyBy');\n\nvar _keyBy2 = _interopRequireDefault(_keyBy);\n\nvar _differenceBy = require('lodash/differenceBy');\n\nvar _differenceBy2 = _interopRequireDefault(_differenceBy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nvar syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * The CacheStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network using a cache on the device.\n */\n\nvar CacheStore = function (_NetworkStore) {\n  _inherits(CacheStore, _NetworkStore);\n\n  /**\n   * Creates a new instance of the CacheStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n\n  function CacheStore(name) {\n    _classCallCheck(this, CacheStore);\n\n    /**\n     * @type {Number}\n     */\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CacheStore).call(this, name));\n\n    _this.ttl = undefined;\n    return _this;\n  }\n\n  /**\n   * The sync pathname for the store.\n   *\n   * @param   {Client}   [client]     Client\n   * @return  {string}                Sync pathname\n   */\n\n\n  _createClass(CacheStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all entities in a collection. A query can be optionally provided to return\n     * a subset of all entities in a collection or omitted to return all entities in\n     * a collection. The number of entities returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the entities or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n    value: function find(query) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Retrieving the entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        useDeltaFetch: true\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this2.client.protocol,\n            host: _this2.client.host,\n            pathname: _this2._pathname\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this2.client\n        });\n        return request.execute();\n      }).then(function (cacheResponse) {\n        var result = {\n          cache: cacheResponse.data\n        };\n\n        result.networkPromise = _this2.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this2.push().then(function () {\n              return _this2.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          if (options.useDeltaFetch) {\n            var request = new _deltafetch.DeltaFetchRequest({\n              method: _enums.HttpMethod.GET,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this2.client.protocol,\n                host: _this2.client.host,\n                pathname: _this2._pathname\n              }),\n              properties: options.properties,\n              query: query,\n              timeout: options.timeout,\n              client: _this2.client\n            });\n            return request.execute().then(function (response) {\n              return response.data;\n            });\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'find', _this2).call(_this2, query, options);\n        }).then(function (networkEntities) {\n          var removedEntities = (0, _differenceBy2.default)(cacheResponse.data, networkEntities, idAttribute);\n          var removeEntityIds = Object.keys((0, _keyBy2.default)(removedEntities, idAttribute));\n          var removeQuery = new _query.Query();\n          removeQuery.contains(idAttribute, removeEntityIds);\n\n          var request = new _local.LocalRequest({\n            method: _enums.HttpMethod.DELETE,\n            url: _url2.default.format({\n              protocol: _this2.client.protocol,\n              host: _this2.client.host,\n              pathname: _this2._pathname\n            }),\n            properties: options.properties,\n            query: removeQuery,\n            timeout: options.timeout,\n            client: _this2.client\n          });\n          return request.execute().then(function () {\n            return _this2._cache(networkEntities);\n          });\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entities in the ' + _this2.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to retrieve the entities in the ' + _this2.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Groups entities in a collection. An aggregation can be optionally provided to group\n     * a subset of entities in a collection or omitted to group all the entities\n     * in a collection. A promise will be returned that will be resolved with the result\n     * or rejected with an error.\n     *\n     * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'group',\n    value: function group(aggregation) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Grouping the entities in the ' + this.name + ' collection.', aggregation, options);\n\n      options = (0, _assign2.default)({\n        force: false\n      }, options);\n\n      if (!(aggregation instanceof _aggregation.Aggregation)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid aggregation. ' + 'It must be an instance of the Kinvey.Aggregation class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this3.client.protocol,\n            host: _this3.client.host,\n            pathname: _this3._pathname + '/_group'\n          }),\n          properties: options.properties,\n          data: aggregation.toJSON(),\n          timeout: options.timeout,\n          client: _this3.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var result = {\n          cache: response.data\n        };\n\n        result.networkPromise = _this3.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this3.push().then(function () {\n              return _this3.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'group', _this3).call(_this3, aggregation, options);\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Grouped the entities in the ' + _this3.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to group the entities in the ' + _this3.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Counts entities in a collection. A query can be optionally provided to count\n     * a subset of entities in a collection or omitted to count all the entities\n     * in a collection. A promise will be returned that will be resolved with the count\n     * or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'count',\n    value: function count(query) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Counting the number of entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        force: false\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this4.client.protocol,\n            host: _this4.client.host,\n            pathname: _this4._pathname + '/_count'\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this4.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var result = {\n          cache: response.data\n        };\n\n        result.networkPromise = _this4.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this4.push().then(function () {\n              return _this4.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'count', _this4).call(_this4, query, options);\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Counted the number of entities in the ' + _this4.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to count the number of entities in the ' + _this4.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Retrieves a single entity in a collection by id. A promise will be returned that will\n     * be resolved with the entity or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(id) {\n      var _this5 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to retrieve an entity.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Retrieving the entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      options = (0, _assign2.default)({\n        force: false,\n        useDeltaFetch: true\n      }, options);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this5.client.protocol,\n            host: _this5.client.host,\n            pathname: _this5._pathname + '/' + id\n          }),\n          properties: options.properties,\n          timeout: options.timeout,\n          client: _this5.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var result = {\n          cache: response.data\n        };\n\n        result.networkPromise = _this5.syncCount().then(function (count) {\n          if (count > 0) {\n            return _this5.push().then(function () {\n              return _this5.syncCount();\n            });\n          }\n\n          return count;\n        }).then(function (count) {\n          if (count > 0) {\n            throw new _errors.KinveyError('Unable to load data from the network. There are ' + count + ' entities that need ' + 'to be synced before data is loaded from the network.');\n          }\n\n          if (options.useDeltaFetch) {\n            var request = new _deltafetch.DeltaFetchRequest({\n              method: _enums.HttpMethod.GET,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this5.client.protocol,\n                host: _this5.client.host,\n                pathname: _this5._pathname + '/' + id\n              }),\n              properties: options.properties,\n              timeout: options.timeout,\n              client: _this5.client\n            });\n            return request.execute().then(function (response) {\n              return response.data;\n            });\n          }\n\n          return _get(Object.getPrototypeOf(CacheStore.prototype), 'findById', _this5).call(_this5, id, options);\n        }).then(function (data) {\n          return _this5._cache(data);\n        }).catch(function (error) {\n          if (error instanceof _errors.NotFoundError) {\n            var request = new _local.LocalRequest({\n              method: _enums.HttpMethod.DELETE,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this5.client.protocol,\n                host: _this5.client.host,\n                pathname: _this5._pathname + '/' + id\n              }),\n              properties: options.properties,\n              timeout: options.timeout,\n              client: _this5.client\n            });\n            return request.execute().then(function () {\n              throw error;\n            });\n          }\n\n          throw error;\n        });\n\n        return result;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entity in the ' + _this5.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (error) {\n        _log.Log.error('Failed to retrieve the entity in the ' + _this5.name + ' collection with id = ' + id + '.', error);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Save a entity or an array of entities to a collection. A promise will be returned that\n     * will be resolved with the saved entity/entities or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity or entities to save.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data saved\n     *                                                                            in the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'save',\n    value: function save(entity) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!entity) {\n        _log.Log.warn('No entity was provided to be saved.', entity);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Saving the entity(s) to the ' + this.name + ' collection.', entity);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.POST,\n          url: _url2.default.format({\n            protocol: _this6.client.protocol,\n            host: _this6.client.host,\n            pathname: _this6._pathname\n          }),\n          properties: options.properties,\n          data: entity,\n          timeout: options.timeout,\n          client: _this6.client\n        });\n\n        if (entity[idAttribute]) {\n          request.method = _enums.HttpMethod.PUT;\n          request.url = _url2.default.format({\n            protocol: _this6.client.protocol,\n            host: _this6.client.host,\n            pathname: _this6._pathname + '/' + entity[idAttribute]\n          });\n        }\n\n        return request.execute();\n      }).then(function (response) {\n        return _this6._sync(response.data, options).then(function () {\n          var data = (0, _isArray2.default)(response.data) ? response.data : [response.data];\n          var ids = Object.keys((0, _keyBy2.default)(data, idAttribute));\n          var query = new _query.Query().contains(idAttribute, ids);\n          return _this6.push(query, options);\n        }).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Saved the entity(s) to the ' + _this6.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to save the entity(s) to the ' + _this6.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove entities in a collection. A query can be optionally provided to remove\n     * a subset of entities in a collection or omitted to remove all entities in a\n     * collection. A promise will be returned that will be resolved with a count of the\n     * number of entities removed or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(query) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Removing the entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.DELETE,\n          url: _url2.default.format({\n            protocol: _this7.client.protocol,\n            host: _this7.client.host,\n            pathname: _this7._pathname\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this7.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        return _this7._sync(response.data.entities, options).then(function () {\n          var query = new _query.Query().contains(idAttribute, []);\n          return _this7.push(query, options);\n        }).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entities in the ' + _this7.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entities in the ' + _this7.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove an entity in a collection. A promise will be returned that will be\n     * resolved with a count of the number of entities removed or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'removeById',\n    value: function removeById(id) {\n      var _this8 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to be removed.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Removing an entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.DELETE,\n          url: _url2.default.format({\n            protocol: _this8.client.protocol,\n            host: _this8.client.host,\n            pathname: _this8._pathname + '/' + id\n          }),\n          properties: options.properties,\n          authType: _enums.AuthType.Default,\n          timeout: options.timeout,\n          client: _this8.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        return _this8._sync(response.data.entities, options).then(function () {\n          var query = new _query.Query().contains(idAttribute, [id]);\n          return _this8.push(query, options);\n        }).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entity in the ' + _this8.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entity in the ' + _this8.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Push sync items for a collection to the network. A promise will be returned that will be\n     * resolved with the result of the push or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to push a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.DataStore.getInstance('books');\n     * store.push().then(function(result) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'push',\n    value: function push(query) {\n      var _this9 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.GET,\n          url: _url2.default.format({\n            protocol: _this9.client.protocol,\n            host: _this9.client.host,\n            pathname: _this9._syncPathname\n          }),\n          properties: options.properties,\n          query: query,\n          timeout: options.timeout,\n          client: _this9.client\n        });\n        return request.execute();\n      }).then(function (response) {\n        var save = [];\n        var remove = [];\n        var entities = response.data.entities;\n        var ids = Object.keys(entities);\n        var size = response.data.size;\n\n        var promises = (0, _map2.default)(ids, function (id) {\n          var metadata = entities[id];\n          var request = new _local.LocalRequest({\n            method: _enums.HttpMethod.GET,\n            url: _url2.default.format({\n              protocol: _this9.client.protocol,\n              host: _this9.client.host,\n              pathname: _this9._pathname + '/' + id\n            }),\n            properties: metadata.properties,\n            timeout: options.timeout,\n            client: _this9.client\n          });\n          return request.execute().then(function (response) {\n            save.push(response.data);\n            return response.data;\n          }).catch(function (err) {\n            if (err instanceof _errors.NotFoundError) {\n              remove.push(id);\n              return null;\n            }\n\n            throw err;\n          });\n        });\n\n        return _babybird2.default.all(promises).then(function () {\n          var saved = (0, _map2.default)(save, function (entity) {\n            var metadata = entities[entity[idAttribute]];\n            var isLocalEntity = (0, _object.nested)(entity, kmdAttribute + '.local');\n\n            if (isLocalEntity) {\n              var _ret = function () {\n                var originalId = entity[idAttribute];\n                delete entity[idAttribute];\n                delete entity[kmdAttribute];\n\n                var request = new _network.NetworkRequest({\n                  method: _enums.HttpMethod.POST,\n                  authType: _enums.AuthType.Default,\n                  url: _url2.default.format({\n                    protocol: _this9.client.protocol,\n                    host: _this9.client.host,\n                    pathname: _this9._pathname\n                  }),\n                  properties: metadata.properties,\n                  data: entity,\n                  timeout: options.timeout,\n                  client: _this9.client\n                });\n\n                return {\n                  v: request.execute().then(function (response) {\n                    var request = new _local.LocalRequest({\n                      method: _enums.HttpMethod.PUT,\n                      url: _url2.default.format({\n                        protocol: _this9.client.protocol,\n                        host: _this9.client.host,\n                        pathname: _this9._pathname\n                      }),\n                      properties: metadata.properties,\n                      data: response.data,\n                      timeout: options.timeout,\n                      client: _this9.client\n                    });\n                    return request.execute();\n                  }).then(function () {\n                    var request = new _local.LocalRequest({\n                      method: _enums.HttpMethod.DELETE,\n                      url: _url2.default.format({\n                        protocol: _this9.client.protocol,\n                        host: _this9.client.host,\n                        pathname: _this9._pathname + '/' + originalId\n                      }),\n                      properties: metadata.properties,\n                      timeout: options.timeout,\n                      client: _this9.client\n                    });\n\n                    return request.execute().then(function (response) {\n                      var result = response.data;\n                      if (result.count === 1) {\n                        size = size - 1;\n                        delete entities[originalId];\n                        return {\n                          _id: originalId,\n                          entity: entity\n                        };\n                      }\n\n                      return {\n                        _id: originalId,\n                        error: new _errors.KinveyError('Expected count to be 1 but instead it was ' + result.count + ' ' + ('when trying to remove entity with _id ' + originalId + '.'))\n                      };\n                    });\n                  }).catch(function (err) {\n                    return {\n                      _id: originalId,\n                      error: err\n                    };\n                  })\n                };\n              }();\n\n              if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n            }\n\n            var request = new _network.NetworkRequest({\n              method: _enums.HttpMethod.PUT,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this9.client.protocol,\n                host: _this9.client.host,\n                pathname: _this9._pathname + '/' + entity[idAttribute]\n              }),\n              properties: metadata.properties,\n              data: entity,\n              timeout: options.timeout,\n              client: _this9.client\n            });\n\n            return request.execute().then(function (response) {\n              size = size - 1;\n              delete entities[response.data[idAttribute]];\n              return {\n                _id: response.data[idAttribute],\n                entity: response.data\n              };\n            }).catch(function (err) {\n              // If the credentials used to authenticate this request are\n              // not authorized to run the operation then just remove the entity\n              // from the sync table\n              if (err instanceof _errors.InsufficientCredentialsError) {\n                size = size - 1;\n                delete entities[entity[idAttribute]];\n                return {\n                  _id: entity[idAttribute],\n                  error: err\n                };\n              }\n\n              return {\n                _id: entity[idAttribute],\n                error: err\n              };\n            });\n          });\n\n          var removed = (0, _map2.default)(remove, function (id) {\n            var metadata = entities[id];\n            var request = new _network.NetworkRequest({\n              method: _enums.HttpMethod.DELETE,\n              authType: _enums.AuthType.Default,\n              url: _url2.default.format({\n                protocol: _this9.client.protocol,\n                host: _this9.client.host,\n                pathname: _this9._pathname + '/' + id\n              }),\n              properties: metadata.properties,\n              timeout: options.timeout,\n              client: _this9.client\n            });\n\n            return request.execute().then(function (response) {\n              var result = response.data;\n\n              if (result.count === 1) {\n                size = size - 1;\n                delete entities[id];\n                return {\n                  _id: id\n                };\n              }\n\n              return {\n                _id: id,\n                error: new _errors.KinveyError('Expected count to be 1 but instead it was ' + result.count + ' ' + ('when trying to remove entity with _id ' + id + '.'))\n              };\n            }).catch(function (err) {\n              // If the credentials used to authenticate this request are\n              // not authorized to run the operation or the entity was\n              // not found then just remove the entity from the sync table\n              if (err instanceof _errors.NotFoundError || err instanceof _errors.InsufficientCredentialsError) {\n                size = size - 1;\n                delete entities[id];\n                return {\n                  _id: id,\n                  error: err\n                };\n              }\n\n              return {\n                _id: id,\n                error: err\n              };\n            });\n          });\n\n          return _babybird2.default.all([_babybird2.default.all(saved), _babybird2.default.all(removed)]);\n        }).then(function (results) {\n          var savedResults = results[0];\n          var removedResults = results[1];\n          var result = {\n            collection: _this9.name,\n            success: [],\n            error: []\n          };\n\n          (0, _forEach2.default)(savedResults, function (savedResult) {\n            if (savedResult.error) {\n              result.error.push(savedResult);\n            } else {\n              result.success.push(savedResult);\n            }\n          });\n\n          (0, _forEach2.default)(removedResults, function (removedResult) {\n            if (removedResult.error) {\n              result.error.push(removedResult);\n            } else {\n              result.success.push(removedResult);\n            }\n          });\n\n          return result;\n        }).then(function (result) {\n          response.data.size = size;\n          response.data.entities = entities;\n\n          var request = new _local.LocalRequest({\n            method: _enums.HttpMethod.PUT,\n            url: _url2.default.format({\n              protocol: _this9.client.protocol,\n              host: _this9.client.host,\n              pathname: _this9._syncPathname\n            }),\n            properties: options.properties,\n            data: response.data,\n            timeout: options.timeout,\n            client: _this9.client\n          });\n          return request.execute().then(function () {\n            return result;\n          });\n        });\n      }).catch(function (err) {\n        if (err instanceof _errors.NotFoundError) {\n          return {\n            collection: _this9.name,\n            success: [],\n            error: []\n          };\n        }\n\n        throw err;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Pull items for a collection from the network to your local cache. A promise will be\n     * returned that will be resolved with the result of the pull or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to pull a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.Store.getInstance('books');\n     * store.pull().then(function(result) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'pull',\n    value: function pull(query) {\n      var _this10 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = this.syncCount(null, options).then(function (count) {\n        if (count > 0) {\n          throw new _errors.KinveyError('Unable to pull data. You must push the pending sync items first.', 'Call store.push() to push the pending sync items before you pull new data.');\n        }\n\n        return _this10.find(query, options);\n      }).then(function (result) {\n        return result.network;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Sync items for a collection. This will push pending sync items first and then\n     * pull items from the network into your local cache. A promise will be\n     * returned that will be resolved with the result of the pull or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to pull a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.Store.getInstance('books');\n     * store.sync().then(function(result) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'sync',\n    value: function sync(query) {\n      var _this11 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = this.push(null, options).then(function (pushResponse) {\n        return _this11.pull(query, options).then(function (pullResponse) {\n          return {\n            push: pushResponse,\n            pull: pullResponse\n          };\n        });\n      });\n\n      return promise;\n    }\n\n    /**\n     * Count the number of entities waiting to be pushed to the network. A promise will be\n     * returned with the count of entities or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the local cache.\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var store = Kinvey.Store.getInstance('books');\n     * store.syncCount().then(function(count) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'syncCount',\n    value: function syncCount(query) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data.size || 0;\n      }).catch(function (err) {\n        if (err instanceof _errors.NotFoundError) {\n          return 0;\n        }\n\n        throw err;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Add or update entities stored in the cache. A promise will be returned with the entities\n     * or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity(s) to add or update in the cache.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: '_cache',\n    value: function _cache(entities) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.PUT,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entities,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Add entities to be pushed. A promise will be returned with null or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity(s) to add to the sync table.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: '_sync',\n    value: function _sync(entities) {\n      var _this12 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!this.name) {\n        return _babybird2.default.reject(new _errors.KinveyError('Unable to add entities to the sync table for a store with no name.'));\n      }\n\n      if (!entities) {\n        return _babybird2.default.resolve(null);\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().catch(function (error) {\n        if (error instanceof _errors.NotFoundError) {\n          return new _response.Response({\n            statusCode: _enums.StatusCode.Ok,\n            data: {\n              _id: _this12.name,\n              entities: {},\n              size: 0\n            }\n          });\n        }\n\n        throw error;\n      }).then(function (response) {\n        var syncData = response.data || {\n          _id: _this12.name,\n          entities: {},\n          size: 0\n        };\n\n        if (!(0, _isArray2.default)(entities)) {\n          entities = [entities];\n        }\n\n        (0, _forEach2.default)(entities, function (entity) {\n          if (entity[idAttribute]) {\n            if (!syncData.entities.hasOwnProperty(entity[idAttribute])) {\n              syncData.size = syncData.size + 1;\n            }\n\n            syncData.entities[entity[idAttribute]] = {\n              lmt: entity[kmdAttribute] ? entity[kmdAttribute].lmt : null\n            };\n          }\n        });\n\n        var request = new _local.LocalRequest({\n          method: _enums.HttpMethod.PUT,\n          url: _url2.default.format({\n            protocol: _this12.client.protocol,\n            host: _this12.client.host,\n            pathname: _this12._syncPathname\n          }),\n          properties: options.properties,\n          data: syncData,\n          timeout: options.timeout,\n          client: _this12.client\n        });\n        return request.execute();\n      }).then(function () {\n        return null;\n      });\n\n      return promise;\n    }\n  }, {\n    key: '_syncPathname',\n    get: function get() {\n      if (!this.name) {\n        throw new Error('Unable to get a sync pathname for a collection with no name.');\n      }\n\n      return '/' + appdataNamespace + '/' + this.client.appKey + '/' + syncCollectionName + '/' + this.name;\n    }\n  }]);\n\n  return CacheStore;\n}(_networkstore.NetworkStore);\n\nexports.CacheStore = CacheStore;\n\n}).call(this,require('_process'))\n\n},{\"../aggregation\":18,\"../enums\":21,\"../errors\":22,\"../log\":24,\"../query\":27,\"../requests/deltafetch\":39,\"../requests/local\":40,\"../requests/network\":41,\"../requests/response\":44,\"../utils/object\":54,\"./networkstore\":48,\"_process\":229,\"babybird\":4,\"lodash/assign\":184,\"lodash/differenceBy\":186,\"lodash/forEach\":190,\"lodash/isArray\":195,\"lodash/keyBy\":211,\"lodash/map\":215,\"url\":244}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataStore = exports.DataStoreType = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _syncstore = require('./syncstore');\n\nvar _networkstore = require('./networkstore');\n\nvar _userstore = require('./userstore');\n\nvar _filestore = require('./filestore');\n\nvar _cachestore = require('./cachestore');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Enum for DataStore types.\n */\nvar DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexports.DataStoreType = DataStoreType;\n\nvar DataStore = exports.DataStore = function () {\n  function DataStore() {\n    _classCallCheck(this, DataStore);\n  }\n\n  _createClass(DataStore, null, [{\n    key: 'getInstance',\n\n    /**\n     * Returns an instance of the Store class based on the type provided.\n     *\n     * @param  {string}       [name]                      Name of the collection.\n     * @param  {StoreType}    [type=DataStoreType.Cache]  Type of store to return.\n     * @return {Object}                                   Store\n     */\n    value: function getInstance(name) {\n      var type = arguments.length <= 1 || arguments[1] === undefined ? DataStoreType.Cache : arguments[1];\n\n      var store = void 0;\n\n      switch (type) {\n        case DataStoreType.Sync:\n          store = new _syncstore.SyncStore(name);\n          break;\n        case DataStoreType.Network:\n          store = new _networkstore.NetworkStore(name);\n          break;\n        case DataStoreType.User:\n          store = new _userstore.UserStore();\n          break;\n        case DataStoreType.File:\n          store = new _filestore.FileStore();\n          break;\n        case DataStoreType.Cache:\n        default:\n          store = new _cachestore.CacheStore(name);\n      }\n\n      return store;\n    }\n  }]);\n\n  return DataStore;\n}();\n\n},{\"./cachestore\":45,\"./filestore\":47,\"./networkstore\":48,\"./syncstore\":49,\"./userstore\":50}],47:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FileStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _networkstore = require('./networkstore');\n\nvar _network = require('../requests/network');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar filesNamespace = process.env.KINVEY_FILES_NAMESPACE || 'blob';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The FilesStore class is used to find, save, update, remove, count and group files.\n */\n\nvar FileStore = exports.FileStore = function (_NetworkStore) {\n  _inherits(FileStore, _NetworkStore);\n\n  function FileStore() {\n    _classCallCheck(this, FileStore);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(FileStore).apply(this, arguments));\n  }\n\n  _createClass(FileStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all files. A query can be optionally provided to return\n     * a subset of all the files for your application or omitted to return all the files.\n     * The number of files returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the files or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Boolean}               [options.tls]                             Use Transport Layer Security\n     * @param   {Boolean}               [options.download]                        Download the files\n     * @return  {Promise}                                                         Promise\n     *\n     * @example\n     * var filesStore = new Kinvey.FilesStore();\n     * var query = new Kinvey.Query();\n     * query.equalTo('location', 'Boston');\n     * files.find(query, {\n     *   tls: true, // Use transport layer security\n     *   ttl: 60 * 60 * 24, // 1 day in seconds\n     *   download: true // download the files\n     * }).then(function(files) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n    value: function find(query) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        download: false,\n        tls: false\n      }, options);\n\n      options.flags = {\n        tls: options.tls === true ? true : false,\n        ttl_in_seconds: options.ttl\n      };\n\n      var promise = _get(Object.getPrototypeOf(FileStore.prototype), 'find', this).call(this, query, options).then(function (files) {\n        if (options.download === true) {\n          var promises = (0, _map2.default)(files, function (file) {\n            return _this2.downloadByUrl(file._downloadURL, options);\n          });\n          return _babybird2.default.all(promises);\n        }\n\n        return files;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'findById',\n    value: function findById(id, options) {\n      return this.download(id, options);\n    }\n\n    /**\n     * Download a file. A promise will be returned that will be resolved with the file or rejected with\n     * an error.\n     *\n     * @param   {string}        name                                          Name\n     * @param   {Object}        [options]                                     Options\n     * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n     * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n     * @param   {Boolean}       [options.stream]                              Stream the file\n     * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n     * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n     * @return  {Promise}                                                     Promise\n     *\n     * @example\n     * var files = new Kinvey.Files();\n     * files.download('BostonTeaParty.png', {\n     *   tls: true, // Use transport layer security\n     *   ttl: 60 * 60 * 24, // 1 day in seconds\n     *   stream: true // stream the file\n     * }).then(function(file) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'download',\n    value: function download(name) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        stream: false,\n        tls: false\n      }, options);\n\n      options.flags = {\n        tls: options.tls === true ? true : false,\n        ttl_in_seconds: options.ttl\n      };\n\n      var promise = _get(Object.getPrototypeOf(FileStore.prototype), 'findById', this).call(this, name, options).then(function (file) {\n        if (options.stream === true) {\n          return file;\n        }\n\n        return _this3.downloadByUrl(file._downloadURL, options);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'downloadByUrl',\n    value: function downloadByUrl(url) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.GET,\n          url: url,\n          timeout: options.timeout\n        });\n        request.setHeader('Accept', options.mimeType || 'application-octet-stream');\n        request.removeHeader('Content-Type');\n        request.removeHeader('X-Kinvey-Api-Version');\n        return request.execute();\n      }).then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n\n    /**\n     * Stream a file. A promise will be returned that will be resolved with the file or rejected with\n     * an error.\n     *\n     * @param   {string}        name                                          File name\n     * @param   {Object}        [options]                                     Options\n     * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n     * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n     * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n     * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n     * @return  {Promise}                                                     Promise\n     *\n     * @example\n     * var files = new Kinvey.Files();\n     * files.stream('BostonTeaParty.png', {\n     *   tls: true, // Use transport layer security\n     *   ttl: 60 * 60 * 24, // 1 day in seconds\n     * }).then(function(file) {\n     *   ...\n     * }).catch(function(err) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'stream',\n    value: function stream(name) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options.stream = true;\n      return this.download(name, options);\n    }\n  }, {\n    key: 'upload',\n    value: function upload(file) {\n      var metadata = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      metadata._filename = metadata._filename || file._filename || file.name;\n      metadata.size = metadata.size || file.size || file.length;\n      metadata.mimeType = metadata.mimeType || file.mimeType || file.type || 'application/octet-stream';\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        public: false,\n        handler: function handler() {}\n      }, options);\n\n      if (options.public) {\n        metadata._public = true;\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        headers: {\n          'X-Kinvey-Content-Type': metadata.mimeType\n        },\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        data: metadata,\n        client: this.client\n      });\n\n      if (metadata[idAttribute]) {\n        request.method = _enums.HttpMethod.PUT;\n        request.url = _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + metadata._id\n        });\n      }\n\n      var promise = request.execute().then(function (response) {\n        var uploadUrl = response.data._uploadURL;\n        var headers = response.data._requiredHeaders || {};\n        headers['Content-Type'] = metadata.mimeType;\n        headers['Content-Length'] = metadata.size;\n\n        // Delete fields from the response\n        delete response.data._expiresAt;\n        delete response.data._requiredHeaders;\n        delete response.data._uploadURL;\n\n        // Upload the file\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.PUT,\n          url: uploadUrl,\n          data: file\n        });\n        request.clearHeaders();\n        request.addHeaders(headers);\n\n        return request.execute().then(function (uploadResponse) {\n          if (uploadResponse.isSuccess()) {\n            response.data._data = file;\n            return response.data;\n          }\n\n          throw uploadResponse.error;\n        });\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'save',\n    value: function save() {\n      return _babybird2.default.reject(new _errors.KinveyError('Please use `upload()` to save files.'));\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      return _babybird2.default.reject(new _errors.KinveyError('Please use `upload()` to update files.'));\n    }\n  }, {\n    key: '_pathname',\n\n    /**\n     * The pathname for the store.\n     *\n     * @return  {string}                Pathname\n     */\n    get: function get() {\n      return '/' + filesNamespace + '/' + this.client.appKey;\n    }\n  }]);\n\n  return FileStore;\n}(_networkstore.NetworkStore);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../requests/network\":41,\"./networkstore\":48,\"_process\":229,\"babybird\":4,\"lodash/assign\":184,\"lodash/map\":215,\"url\":244}],48:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NetworkStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _aggregation = require('../aggregation');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _client = require('../client');\n\nvar _network = require('../requests/network');\n\nvar _query = require('../query');\n\nvar _Log = require('../Log');\n\nvar _qs = require('qs');\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The NetworkStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network.\n */\n\nvar NetworkStore = exports.NetworkStore = function () {\n  /**\n   * Creates a new instance of the NetworkStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n\n  function NetworkStore(name) {\n    _classCallCheck(this, NetworkStore);\n\n    if (name && !(0, _isString2.default)(name)) {\n      throw new _errors.KinveyError('Name must be a string.');\n    }\n\n    /**\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * @private\n     * @type {Client}\n     */\n    this.client = _client.Client.sharedInstance();\n  }\n\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}                Pathname\n   */\n\n\n  _createClass(NetworkStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all entities in a collection. A query can be optionally provided to return\n     * a subset of all entities in a collection or omitted to return all entities in\n     * a collection. The number of entities returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the entities or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n    value: function find(query) {\n      var _this = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Retrieving the entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n      options.flags = _qs2.default.parse(options.flags);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Retrieved the entities in the ' + _this.name + ' collection.', response);\n      }).catch(function (error) {\n        _Log.Log.error('Failed to retrieve the entities in the ' + _this.name + ' collection.', error);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Groups entities in a collection. An aggregation can be optionally provided to group\n     * a subset of entities in a collection or omitted to group all the entities\n     * in a collection. A promise will be returned that will be resolved with the result\n     * or rejected with an error.\n     *\n     * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'group',\n    value: function group(aggregation) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Grouping the entities in the ' + this.name + ' collection.', aggregation, options);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        useDeltaFetch: true,\n        handler: function handler() {}\n      }, options);\n\n      if (!(aggregation instanceof _aggregation.Aggregation)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid aggregation. ' + 'It must be an instance of the Kinvey.Aggregation class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_group'\n        }),\n        properties: options.properties,\n        data: aggregation.toJSON(),\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Grouped the entities in the ' + _this2.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to group the entities in the ' + _this2.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Counts entities in a collection. A query can be optionally provided to count\n     * a subset of entities in a collection or omitted to count all the entities\n     * in a collection. A promise will be returned that will be resolved with the count\n     * or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'count',\n    value: function count(query) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Counting the number of entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        useDeltaFetch: true,\n        handler: function handler() {}\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_count'\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Counted the number of entities in the ' + _this3.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to count the number of entities in the ' + _this3.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Retrieves a single entity in a collection by id. A promise will be returned that will\n     * be resolved with the entity or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(id) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _Log.Log.warn('No id was provided to retrieve an entity.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _Log.Log.debug('Retrieving the entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Retrieved the entity in the ' + _this4.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to retrieve the entity in the ' + _this4.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Save a entity or an array of entities to a collection. A promise will be returned that\n     * will be resolved with the saved entity/entities or rejected with an error.\n     *\n     * @param   {Object|Array}          doc                                       Document or entities to save.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'save',\n    value: function save(entity) {\n      var _this5 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!entity) {\n        _Log.Log.warn('No entity was provided to be saved.', entity);\n        return _babybird2.default.resolve(null);\n      }\n\n      _Log.Log.debug('Saving the entity(s) to the ' + this.name + ' collection.', entity);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entity,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      if (entity[idAttribute]) {\n        request.method = _enums.HttpMethod.PUT;\n        request.url = _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + entity[idAttribute]\n        });\n      }\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Saved the entity(s) to the ' + _this5.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to save the entity(s) to the ' + _this5.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove entities in a collection. A query can be optionally provided to remove\n     * a subset of entities in a collection or omitted to remove all entities in a\n     * collection. A promise will be returned that will be resolved with a count of the\n     * number of entities removed or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(query) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _Log.Log.debug('Removing the entities in the ' + this.name + ' collection.', query);\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Removed the entities in the ' + _this6.name + ' collection.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to remove the entities in the ' + _this6.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove an entity in a collection. A promise will be returned that will be\n     * resolved with a count of the number of entities removed or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'removeById',\n    value: function removeById(id) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _Log.Log.warn('No id was provided to be removed.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _Log.Log.debug('Removing an entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      options = (0, _assign2.default)({\n        properties: null,\n        timeout: undefined,\n        handler: function handler() {}\n      }, options);\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Default,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _Log.Log.info('Removed the entity in the ' + _this7.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _Log.Log.error('Failed to remove the entity in the ' + _this7.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n  }, {\n    key: '_pathname',\n    get: function get() {\n      var pathname = '/' + appdataNamespace + '/' + this.client.appKey;\n\n      if (this.name) {\n        pathname = pathname + '/' + this.name;\n      }\n\n      return pathname;\n    }\n  }]);\n\n  return NetworkStore;\n}();\n\n}).call(this,require('_process'))\n\n},{\"../Log\":16,\"../aggregation\":18,\"../client\":19,\"../enums\":21,\"../errors\":22,\"../query\":27,\"../requests/network\":41,\"_process\":229,\"babybird\":4,\"lodash/assign\":184,\"lodash/isString\":208,\"qs\":234,\"url\":244}],49:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SyncStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _cachestore = require('./cachestore');\n\nvar _local = require('../requests/local');\n\nvar _aggregation = require('../aggregation');\n\nvar _enums = require('../enums');\n\nvar _errors = require('../errors');\n\nvar _query = require('../query');\n\nvar _log = require('../log');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\nvar SyncStore = exports.SyncStore = function (_CacheStore) {\n  _inherits(SyncStore, _CacheStore);\n\n  function SyncStore() {\n    _classCallCheck(this, SyncStore);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(SyncStore).apply(this, arguments));\n  }\n\n  _createClass(SyncStore, [{\n    key: 'find',\n\n\n    /**\n     * Finds all entities in a collection. A query can be optionally provided to return\n     * a subset of all entities in a collection or omitted to return all entities in\n     * a collection. The number of entities returned will adhere to the limits specified\n     * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n     * promise will be returned that will be resolved with the entities or rejected with\n     * an error.\n     *\n     * @param   {Query}                 [query]                                   Query used to filter result.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n    value: function find(query) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Retrieving the entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entities in the ' + _this2.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to retrieve the entities in the ' + _this2.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Groups entities in a collection. An aggregation can be optionally provided to group\n     * a subset of entities in a collection or omitted to group all the entities\n     * in a collection. A promise will be returned that will be resolved with the result\n     * or rejected with an error.\n     *\n     * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'group',\n    value: function group(aggregation) {\n      var _this3 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Grouping the entities in the ' + this.name + ' collection.', aggregation, options);\n\n      if (!(aggregation instanceof _aggregation.Aggregation)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid aggregation. ' + 'It must be an instance of the Kinvey.Aggregation class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_group'\n        }),\n        properties: options.properties,\n        data: aggregation.toJSON(),\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Grouped the entities in the ' + _this3.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to group the entities in the ' + _this3.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Counts entities in a collection. A query can be optionally provided to count\n     * a subset of entities in a collection or omitted to count all the entities\n     * in a collection. A promise will be returned that will be resolved with the count\n     * or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to count a subset of entities.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'count',\n    value: function count(query) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Counting the number of entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/_count'\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Counted the number of entities in the ' + _this4.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to count the number of entities in the ' + _this4.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Retrieves a single entity in a collection by id. A promise will be returned that will\n     * be resolved with the entity or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n     *                                                                            from the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(id) {\n      var _this5 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to retrieve an entity.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Retrieving the entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.GET,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Retrieved the entity in the ' + _this5.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to retrieve the entity in the ' + _this5.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Save a entity or an array of entities to a collection. A promise will be returned that\n     * will be resolved with the saved entity/entities or rejected with an error.\n     *\n     * @param   {Object|Array}          entities                                  Entity or entities to save.\n     * @param   {Object}                [options]                                 Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @param   {Number}                [options.ttl]                             Time to live for data saved\n     *                                                                            in the cache.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'save',\n    value: function save(entity) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!entity) {\n        _log.Log.warn('No entity was provided to be saved.', entity);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Saving the entity(s) to the ' + this.name + ' collection.', entity);\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.POST,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entity,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      if (entity[idAttribute]) {\n        request.url = _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + entity[idAttribute]\n        });\n      }\n\n      var promise = request.execute().then(function (response) {\n        return _this6._sync(response.data, options).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Saved the entity(s) to the ' + _this6.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to save the entity(s) to the ' + _this6.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove entities in a collection. A query can be optionally provided to remove\n     * a subset of entities in a collection or omitted to remove all entities in a\n     * collection. A promise will be returned that will be resolved with a count of the\n     * number of entities removed or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove(query) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _log.Log.debug('Removing the entities in the ' + this.name + ' collection.', query);\n\n      if (query && !(query instanceof _query.Query)) {\n        return _babybird2.default.reject(new _errors.KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n      }\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.DELETE,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return _this7._sync(response.data.entities, options).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entities in the ' + _this7.name + ' collection.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entities in the ' + _this7.name + ' collection.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Remove an entity in a collection. A promise will be returned that will be\n     * resolved with a count of the number of entities removed or rejected with an error.\n     *\n     * @param   {string}                id                                        Document Id\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'removeById',\n    value: function removeById(id) {\n      var _this8 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!id) {\n        _log.Log.warn('No id was provided to be removed.', id);\n        return _babybird2.default.resolve(null);\n      }\n\n      _log.Log.debug('Removing an entity in the ' + this.name + ' collection with id = ' + id + '.');\n\n      var request = new _local.LocalRequest({\n        method: _enums.HttpMethod.DELETE,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/' + id\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return _this8._sync(response.data.entities, options).then(function () {\n          return response.data;\n        });\n      });\n\n      promise.then(function (response) {\n        _log.Log.info('Removed the entity in the ' + _this8.name + ' collection with id = ' + id + '.', response);\n      }).catch(function (err) {\n        _log.Log.error('Failed to remove the entity in the ' + _this8.name + ' collection with id = ' + id + '.', err);\n      });\n\n      return promise;\n    }\n\n    /**\n     * Pull items for a collection from the network to your local cache. A promise will be\n     * returned that will be resolved with the result of the pull or rejected with an error.\n     *\n     * @param   {Query}                 [query]                                   Query to pull a subset of items.\n     * @param   {Object}                options                                   Options\n     * @param   {Properties}            [options.properties]                      Custom properties to send with\n     *                                                                            the request.\n     * @param   {Number}                [options.timeout]                         Timeout for the request.\n     * @return  {Promise}                                                         Promise\n     */\n\n  }, {\n    key: 'pull',\n    value: function pull(query) {\n      var _this9 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = this.syncCount(null, options).then(function (count) {\n        if (count > 0) {\n          throw new _errors.KinveyError('Unable to pull data. You must push the pending sync items first.', 'Call store.push() to push the pending sync items before you pull new data.');\n        }\n\n        return _get(Object.getPrototypeOf(SyncStore.prototype), 'find', _this9).call(_this9, query, options);\n      }).then(function (result) {\n        return result.networkPromise;\n      });\n\n      return promise;\n    }\n  }]);\n\n  return SyncStore;\n}(_cachestore.CacheStore);\n\n}).call(this,require('_process'))\n\n},{\"../aggregation\":18,\"../enums\":21,\"../errors\":22,\"../log\":24,\"../query\":27,\"../requests/local\":40,\"./cachestore\":45,\"_process\":229,\"babybird\":4,\"url\":244}],50:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserStore = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _errors = require('../errors');\n\nvar _networkstore = require('./networkstore');\n\nvar _enums = require('../enums');\n\nvar _network = require('../requests/network');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nvar rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\n\nvar UserStore = exports.UserStore = function (_NetworkStore) {\n  _inherits(UserStore, _NetworkStore);\n\n  function UserStore() {\n    _classCallCheck(this, UserStore);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(UserStore).apply(this, arguments));\n  }\n\n  _createClass(UserStore, [{\n    key: 'save',\n    value: function save(user) {\n      var _this2 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (!user) {\n          throw new _errors.KinveyError('No user was provided to be updated.');\n        }\n\n        if ((0, _isArray2.default)(user)) {\n          throw new _errors.KinveyError('Please only update one user at a time.', user);\n        }\n\n        if (!user[idAttribute]) {\n          throw new _errors.KinveyError('User must have an _id.');\n        }\n\n        if (options._identity) {\n          var socialIdentity = user[socialIdentityAttribute];\n          if (socialIdentity) {\n            for (var identity in socialIdentity) {\n              if (socialIdentity.hasOwnProperty(identity)) {\n                if (socialIdentity[identity] && options._identity !== identity) {\n                  delete socialIdentity[identity];\n                }\n              }\n            }\n          }\n        }\n\n        return _get(Object.getPrototypeOf(UserStore.prototype), 'save', _this2).call(_this2, user, options);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'exists',\n    value: function exists(username, options) {\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/check-username-exists'\n        }),\n        properties: options.properties,\n        data: { username: username },\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data.usernameExists;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'restore',\n    value: function restore(id) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.Master,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/id'\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }, {\n    key: '_pathname',\n\n    /**\n     * The pathname for the store.\n     *\n     * @return  {string}   Pathname\n     */\n    get: function get() {\n      return '/' + usersNamespace + '/' + this.client.appKey;\n    }\n  }]);\n\n  return UserStore;\n}(_networkstore.NetworkStore);\n\n}).call(this,require('_process'))\n\n},{\"../enums\":21,\"../errors\":22,\"../requests/network\":41,\"./networkstore\":48,\"_process\":229,\"babybird\":4,\"lodash/isArray\":195,\"url\":244}],51:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sync = undefined;\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _datastore = require('./stores/datastore');\n\nvar _query = require('./query');\n\nvar _enums = require('./enums');\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar enabled = process.env.KINVEY_SYNC_DEFAULT_STATE || true;\n\nvar Sync = {\n  isEnabled: function isEnabled() {\n    return enabled;\n  },\n  enable: function enable() {\n    enabled = true;\n  },\n  disable: function disable() {\n    enabled = false;\n  },\n  count: function count(query, options) {\n    var syncStore = _datastore.DataStore.getInstance(syncCollectionName, _enums.DataStoreType.Sync);\n    var promise = syncStore.find(query, options).then(function (syncData) {\n      return (0, _reduce2.default)(syncData, function (result, data) {\n        return result + data.size;\n      }, 0);\n    });\n    return promise;\n  },\n  push: function push(options) {\n    var syncStore = _datastore.DataStore.getInstance(syncCollectionName, _enums.DataStoreType.Sync);\n    var query = new _query.Query();\n    query.greaterThan('size', 0);\n    var promise = syncStore.find(query, options).then(function (syncData) {\n      var promises = syncData.map(function (data) {\n        var store = _datastore.DataStore.getInstance(data[idAttribute], _enums.DataStoreType.Sync);\n        return store.push();\n      });\n      return _babybird2.default.all(promises);\n    });\n    return promise;\n  },\n  sync: function sync() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var syncStore = _datastore.DataStore.getInstance(syncCollectionName, _enums.DataStoreType.Sync);\n    var promise = syncStore.find(null, options).then(function (syncData) {\n      var promises = syncData.map(function (data) {\n        var store = _datastore.DataStore.getInstance(data[idAttribute], _enums.DataStoreType.Sync);\n        return store.sync();\n      });\n      return _babybird2.default.all(promises);\n    });\n    return promise;\n  }\n};\n\nexports.Sync = Sync;\n\n}).call(this,require('_process'))\n\n},{\"./enums\":21,\"./query\":27,\"./stores/datastore\":46,\"_process\":229,\"babybird\":4,\"lodash/reduce\":218}],52:[function(require,module,exports){\n(function (process){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.User = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _babybird = require('babybird');\n\nvar _babybird2 = _interopRequireDefault(_babybird);\n\nvar _client = require('./client');\n\nvar _query = require('./query');\n\nvar _acl = require('./acl');\n\nvar _metadata = require('./metadata');\n\nvar _errors = require('./errors');\n\nvar _mic = require('./mic');\n\nvar _enums = require('./enums');\n\nvar _datastore = require('./stores/datastore');\n\nvar _network = require('./requests/network');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _result = require('lodash/result');\n\nvar _result2 = _interopRequireDefault(_result);\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nvar usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nvar rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nvar idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nvar kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nvar socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nvar usernameAttribute = process.env.KINVEY_USERNAME_ATTRIBUTE || 'username';\nvar emailAttribute = process.env.KINVEY_EMAIL_ATTRIBUTE || 'email';\nvar supportedIdentities = ['facebook', 'google', 'linkedIn'];\nvar hello = void 0;\n\nif (typeof window !== 'undefined') {\n  hello = require('hellojs');\n}\n\n/**\n * The User class is used to represent a single user on the Kinvey platform.\n * Use the user class to manage the active user lifecycle and perform user operations.\n */\n\nvar User = exports.User = function () {\n  /**\n   * Create a new instance of a User.\n   *\n   * @param  {Object}   [data={}]    Data for the user.\n   * @return {User}                  User\n   *\n   * @example\n   * var user = new User();\n   */\n\n  function User() {\n    var data = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, User);\n\n    /**\n     * The users data.\n     *\n     * @type {Object}\n     */\n    this.data = data;\n\n    /**\n     * @private\n     * The client used by this user.\n     *\n     * @type {Client}\n     */\n    this.client = _client.Client.sharedInstance();\n  }\n\n  /**\n   * The _id for the user.\n   *\n   * @return {?string} _id\n   *\n   * @example\n   * var _id = user._id;\n   */\n\n\n  _createClass(User, [{\n    key: 'setAsActiveUser',\n\n\n    /**\n     * Set this user as the active user.\n     *\n     * @return {Promise<User>}  The active user.\n     *\n     * @example\n     * var promise = user.setAsActiveUser();\n     * promise.then(function(activeUser) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function setAsActiveUser() {\n      return User.setActiveUser(this, this.client);\n    }\n\n    /**\n     * Checks if this user is the active user.\n     *\n     * @return {Promise<Boolean>} True or false if this user is the active user.\n     *\n     * @example\n     * var promise = user.isActiveUser();\n     * promise.then(function(isActiveUser) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'isActive',\n    value: function isActive() {\n      var activeUser = User.getActiveUser(this.client);\n\n      if (activeUser && activeUser._id === this._id) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'login',\n\n\n    /**\n     * Login using a username or password.\n     *\n     * @param  {string|Object}      usernameOrData    Username or an object with username\n     *                                                and password properties.\n     * @param  {string}             [password]        Users password.\n     * @param  {Object}             [options={}]      Options\n     * @return {Promise<User>}                        The logged in user.\n     *\n     * @example\n     * var promise = user.login('username', 'password');\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function login(usernameOrData, password) {\n      var _this = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      if (!(0, _isObject2.default)(usernameOrData)) {\n        usernameOrData = {\n          username: usernameOrData,\n          password: password\n        };\n      }\n\n      if (!usernameOrData._socialIdentity) {\n        if (usernameOrData.username) {\n          usernameOrData.username = String(usernameOrData.username).trim();\n        }\n\n        if (usernameOrData.password) {\n          usernameOrData.password = String(usernameOrData.password).trim();\n        }\n      }\n\n      var isActiveUser = this.isActive();\n      if (isActiveUser) {\n        return _babybird2.default.reject(new _errors.ActiveUserError('This user is already the active user.'));\n      }\n\n      var activeUser = User.getActiveUser(this.client);\n      if (activeUser) {\n        return _babybird2.default.reject(new _errors.ActiveUserError('An active user already exists. ' + 'Please logout the active user before you login.'));\n      }\n\n      if ((!usernameOrData.username || usernameOrData.username === '' || !usernameOrData.password || usernameOrData.password === '') && !usernameOrData[socialIdentityAttribute]) {\n        return _babybird2.default.reject(new _errors.KinveyError('Username and/or password missing. ' + 'Please provide both a username and password to login.'));\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname + '/login'\n        }),\n        data: usernameOrData,\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        _this.data = response.data;\n        return _this.setAsActiveUser();\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'loginWithIdentity',\n    value: function loginWithIdentity(identity, token, options) {\n      var data = { _socialIdentity: {} };\n      data._socialIdentity[identity] = token;\n      return this.login(data, options);\n    }\n  }, {\n    key: 'loginWithMIC',\n\n\n    /* eslint-disable max-len */\n    /**\n     * Login using Mobile Identity Connect.\n     *\n     * @param  {string}                 redirectUri                                                         The redirect uri used\n     *                                                                                                      for MIC logins.\n     * @param  {AuthorizationGrant}     [authorizationGrant=AuthoizationGrant.AuthorizationCodeLoginPage]   MIC authorization grant to use.\n     * @param  {Object}                 [options={}]                                                        Options\n     * @return {Promise<User>}                                                                              The logged in user.\n     *\n     * @example\n     * var promise = user.loginWithMIC('http://example.com');\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    /* eslint-enable max-len */\n    value: function loginWithMIC(redirectUri, authorizationGrant) {\n      var _this2 = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var mic = new _mic.MobileIdentityConnect(this.client);\n      return mic.login(redirectUri, authorizationGrant, options).then(function (token) {\n        options.redirectUri = redirectUri;\n        options.client = (0, _result2.default)(mic.client, 'toJSON', mic.client);\n        return _this2.connect(_mic.MobileIdentityConnect.identity, token, options);\n      });\n    }\n\n    /**\n     * Logout the user. If the user was the active user then the active user will be set to null.\n     *\n     * @param  {Object}         [options={}]    Options\n     * @return {Promise<User>}                  The logged out user.\n     *\n     * @example\n     * var promise = user.logout();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'logout',\n    value: function logout() {\n      var _this3 = this;\n\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var isActive = this.isActive();\n\n      if (!isActive) {\n        return _babybird2.default.resolve();\n      }\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.Session,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + usersNamespace + '/' + this.client.appKey + '/_logout'\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().catch(function () {\n        return null;\n      }).then(function () {\n        var isActive = _this3.isActive();\n        if (isActive) {\n          return User.setActiveUser(null, _this3.client);\n        }\n      }).then(function () {\n        return _this3;\n      });\n\n      return promise;\n    }\n\n    /**\n     * @private\n     * Returns true or false if identity connect is supported.\n     *\n     * @return {Boolean}  True or false if identity connect is supported.\n     *\n     * @example\n     * var isIdentitySupported = user.isIdentitySupported('identity');\n     */\n\n  }, {\n    key: 'connectWithIdentity',\n\n\n    /* eslint-disable max-len */\n    /**\n     * Connect using an identity (Facebook, Google, LinkedIn etc.).\n     *\n     * @param  {SocialIdentity|string}         identity                                Identity used to connect the user.\n     * @param  {Object}                        [options={}]                            Options\n     * @param  {string}                        [options.collectionName='Identities']   Collection name to use to lookup credentials\n     *                                                                                 for the identity.\n     * @return {Promise<User>}                                                         The connected user.\n     *\n     * @example\n     * var promise = user.connectWithIdentity(SocialIdentity.Facebook);\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    /* eslint-enable max-len */\n    value: function connectWithIdentity(identity) {\n      var _this4 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        collectionName: 'identities'\n      }, options);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (!identity) {\n          throw new _errors.KinveyError('An identity is required to connect the user.');\n        }\n\n        if (!User.isIdentitySupported(identity)) {\n          throw new _errors.KinveyError('Identity ' + identity + ' is not supported on this platform.');\n        }\n\n        var query = new _query.Query().equalTo('identity', identity);\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.GET,\n          authType: _enums.AuthType.None,\n          url: _url2.default.format({\n            protocol: _this4.client.protocol,\n            host: _this4.client.host,\n            pathname: '/' + appdataNamespace + '/' + _this4.client.appKey + '/' + options.collectionName\n          }),\n          query: query,\n          properties: options.properties,\n          timeout: options.timeout\n        });\n        return request.execute();\n      }).then(function (response) {\n        if (response.data.length === 1) {\n          var helloSettings = {};\n          helloSettings[identity] = response.data[0].key || response.data[0].appId || response.data[0].clientId;\n          hello.init(helloSettings);\n          return hello(identity).login();\n        }\n\n        throw new _errors.KinveyError('Unsupported identity.');\n      }).then(function () {\n        var authResponse = hello(identity).getAuthResponse();\n        return _this4.connect(identity, authResponse, options);\n      });\n\n      return promise;\n    }\n\n    /**\n     * @private\n     *\n     * Connects with the provided accessToken and identity.\n     *\n     * @param  {SocialIdentity|string}         identity      Identity used to connect the user.\n     * @param  {string}                        accessToken   Access token for the identity.\n     * @param  {number}                        [expiresIn]   Time in seconds for how long the access token is valid.\n     * @param  {Object}                        [options={}]  Options\n     * @return {Promise<User>}                               The connected user.\n     *\n     * @example\n     * var token = {\n     *   access_token: 'access_token',\n     *   refresh_token: 'refresh_token',\n     *   expires_in: 3600\n     * };\n     * var promise = user.connect(SocialIdentity.Facebook, token);\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connect',\n    value: function connect(identity, token) {\n      var _this5 = this;\n\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var data = this.data;\n      var socialIdentity = data[socialIdentityAttribute] || {};\n      socialIdentity[identity] = token;\n      data[socialIdentityAttribute] = socialIdentity;\n      this.data = data;\n\n      var promise = _babybird2.default.resolve().then(function () {\n        var isActive = _this5.isActive();\n\n        if (isActive) {\n          options._identity = identity;\n          return _this5.update(data, options);\n        }\n\n        return _this5.login(data, null, options);\n      }).catch(function (err) {\n        if (err instanceof _errors.NotFoundError) {\n          return _this5.signup(data, options).then(function () {\n            return _this5.connect(identity, token, options);\n          });\n        }\n\n        throw err;\n      }).then(function () {\n        _this5.client.setActiveSocialIdentity({\n          identity: identity,\n          token: _this5._socialIdentity[identity],\n          redirectUri: options.redirectUri,\n          client: options.client\n        });\n        return _this5;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'disconnect',\n    value: function disconnect(identity) {\n      var _this6 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var data = this.data;\n      var socialIdentity = data[socialIdentityAttribute] || {};\n      delete socialIdentity[identity];\n      data[socialIdentityAttribute] = socialIdentity;\n      this.data = data;\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (!_this6._id) {\n          return _this6;\n        }\n\n        return _this6.update(data, options);\n      }).then(function () {\n        var activeSocialIdentity = _this6.client.getActiveSocialIdentity();\n\n        if (activeSocialIdentity.identity === identity) {\n          _this6.client.setActiveSocialIdentity(null);\n        }\n\n        return _this6;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'signup',\n\n\n    /**\n     * Sign up. If options.state is set to true then the user\n     * will be set as the active user after succesfully signing up the\n     * user.\n     *\n     * @param  {User|Object}    data                    Users data.\n     * @param  {Object}         [options={}]            Options\n     * @param  {Boolean}        [options.state=true]    If set to true, the user will be\n     *                                                  set as the active user after successfully\n     *                                                  being signed up.\n     * @return {Promise<User>}                          The signed up user.\n     *\n     * @example\n     * var promise = user.signup({\n     *   username: 'admin',\n     *   password: 'admin'\n     * });\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n    value: function signup(data) {\n      var _this7 = this;\n\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      options = (0, _assign2.default)({\n        state: true\n      }, options);\n\n      var promise = _babybird2.default.resolve().then(function () {\n        if (options.state === true) {\n          var activeUser = User.getActiveUser(_this7.client);\n          if (activeUser) {\n            throw new _errors.ActiveUserError('An active user already exists. ' + 'Please logout the active user before you login.');\n          }\n        }\n      }).then(function () {\n        var request = new _network.NetworkRequest({\n          method: _enums.HttpMethod.POST,\n          authType: _enums.AuthType.App,\n          url: _url2.default.format({\n            protocol: _this7.client.protocol,\n            host: _this7.client.host,\n            pathname: '/' + usersNamespace + '/' + _this7.client.appKey\n          }),\n          data: (0, _result2.default)(data, 'toJSON', data),\n          properties: options.properties,\n          timeout: options.timeout\n        });\n        return request.execute();\n      }).then(function (response) {\n        _this7.data = response.data;\n\n        if (options.state === true) {\n          return _this7.setAsActiveUser();\n        }\n\n        return _this7;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'signupWithIdentity',\n    value: function signupWithIdentity(identity, tokens, options) {\n      var data = { _socialIdentity: {} };\n      data._socialIdentity[identity] = tokens;\n      return this.signup(data, options);\n    }\n  }, {\n    key: 'update',\n    value: function update(data, options) {\n      var _this8 = this;\n\n      var userStore = _datastore.DataStore.getInstance(null, _datastore.DataStoreType.User);\n      return userStore.save(data, options).then(function (data) {\n        _this8.data = data;\n\n        if (_this8.isActive()) {\n          return _this8.setAsActiveUser();\n        }\n\n        return _this8;\n      });\n    }\n  }, {\n    key: 'me',\n    value: function me() {\n      var _this9 = this;\n\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.GET,\n        authType: _enums.AuthType.Session,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + usersNamespace + '/' + this.client.appKey + '/_me'\n        }),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n\n      var promise = request.execute().then(function (response) {\n        _this9.data = response.data;\n\n        if (!_this9.authtoken) {\n          var activeUser = User.getActiveUser(_this9.client);\n\n          if (activeUser) {\n            _this9.authtoken = activeUser.authtoken;\n          }\n        }\n\n        return _this9.setAsActiveUser();\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'verifyEmail',\n    value: function verifyEmail() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/' + this.username + '/user-email-verification-initiate'\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'forgotUsername',\n    value: function forgotUsername() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/user-forgot-username'\n        }),\n        properties: options.properties,\n        data: { email: this.email },\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'resetPassword',\n    value: function resetPassword() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      var request = new _network.NetworkRequest({\n        method: _enums.HttpMethod.POST,\n        authType: _enums.AuthType.App,\n        url: _url2.default.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: '/' + rpcNamespace + '/' + this.client.appKey + '/' + this.username + '/user-password-reset-initiate'\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      var promise = request.execute().then(function (response) {\n        return response.data;\n      });\n\n      return promise;\n    }\n\n    // refreshAuthToken(options = {}) {\n    //   const socialIdentity = this.data[socialIdentityAttribute];\n    //   const identity = socialIdentity.activeIdentity;\n    //   const token = socialIdentity[identity];\n    //   let promise;\n\n    //   switch (identity) {\n    //     case MobileIdentityConnect.identity:\n    //       const mic = new MobileIdentityConnect(this.client);\n    //       promise = mic.refresh(token, options);\n    //       break;\n    //     default:\n    //       promise = Promise.reject(new KinveyError(`Unable to refresh the auth token because ` +\n    //         `the ${identity} identity is not supported.`));\n    //   }\n\n    //   return promise.then(token => {\n    //     return this.connect(identity, token, options);\n    //   });\n    // }\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.data;\n    }\n  }, {\n    key: '_id',\n    get: function get() {\n      return this.data[idAttribute];\n    }\n\n    /**\n     * The _acl for the user.\n     *\n     * @return {Acl} _acl\n     *\n     * @example\n     * var _acl = user._acl;\n     */\n\n  }, {\n    key: '_acl',\n    get: function get() {\n      return new _acl.Acl(this.data);\n    }\n\n    /**\n     * The metadata for the user.\n     *\n     * @return {Metadata} metadata\n     *\n     * @example\n     * var metadata = user.metadata;\n     */\n\n  }, {\n    key: 'metadata',\n    get: function get() {\n      return new _metadata.Metadata(this.data);\n    },\n    set: function set(metadata) {\n      this.data[kmdAttribute] = (0, _result2.default)(metadata, 'toJSON', metadata);\n    }\n\n    /**\n     * The _kmd for the user.\n     *\n     * @return {Metadata} _kmd\n     *\n     * @example\n     * var _kmd = user._kmd;\n     */\n\n  }, {\n    key: '_kmd',\n    get: function get() {\n      return this.metadata;\n    },\n    set: function set(kmd) {\n      this.metadata = kmd;\n    }\n  }, {\n    key: '_socialIdentity',\n    get: function get() {\n      return this.data[socialIdentityAttribute];\n    }\n\n    /**\n     * The auth token for the user.\n     *\n     * @return {?string} Auth token\n     *\n     * @example\n     * var authtoken = user.authtoken;\n     */\n\n  }, {\n    key: 'authtoken',\n    get: function get() {\n      return this.metadata.authtoken;\n    }\n\n    /**\n     * Set the auth token for the user.\n     *\n     * @param  {?string} authtoken Auth token\n     *\n     * @example\n     * user.authtoken = 'authtoken';\n     */\n    ,\n    set: function set(authtoken) {\n      var metadata = this.metadata;\n      metadata.authtoken = authtoken;\n      this.metadata = metadata;\n    }\n\n    /**\n     * The username for the user.\n     *\n     * @return {?string} Username\n     *\n     * @example\n     * var username = user.username;\n     */\n\n  }, {\n    key: 'username',\n    get: function get() {\n      return this.data[usernameAttribute];\n    }\n\n    /**\n     * The email for the user.\n     *\n     * @return {?string} Email\n     *\n     * @example\n     * var email = user.email;\n     */\n\n  }, {\n    key: 'email',\n    get: function get() {\n      return this.data[emailAttribute];\n    }\n  }, {\n    key: '_pathname',\n    get: function get() {\n      return '/' + usersNamespace + '/' + this.client.appKey;\n    }\n\n    /**\n     * Gets the active user. You can optionally provide a client\n     * to use to lookup the active user.\n     *\n     * @param  {Client}           [client=Client.sharedInstance()]   Client to use to set the active user.\n     * @return {Promise<User>}                                       The active user on the client. The\n     *                                                               active user could be null if one does\n     *                                                               not exist.\n     *\n     * @example\n     * var _id = user._id;\n     */\n\n  }], [{\n    key: 'getActiveUser',\n    value: function getActiveUser() {\n      var client = arguments.length <= 0 || arguments[0] === undefined ? _client.Client.sharedInstance() : arguments[0];\n\n      var data = client.getActiveUserData();\n      var user = null;\n\n      if (data) {\n        user = new User(data);\n        user.client = client;\n      }\n\n      return user;\n    }\n\n    /**\n     * Sets the active user. You can optionally provide a client to\n     * set the active user on. Only one active user per client is\n     * allowed.\n     *\n     * @param  {?(User|Object)}      [user]                               User to set as the active user.\n     * @param  {Client}              [client=Client.sharedInstance()]     The client to use to set the active user on.\n     * @return {Promise<User>}                                            The active user on the client. The active user\n     *                                                                    could be null if one does not exist.\n     *\n     * @example\n     * var user = new User();\n     * var promise = User.setActiveUser(user);\n     * promise.then(function(activeUser) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'setActiveUser',\n    value: function setActiveUser(user) {\n      var client = arguments.length <= 1 || arguments[1] === undefined ? _client.Client.sharedInstance() : arguments[1];\n\n      var data = (0, _result2.default)(user, 'toJSON', user);\n      client.setActiveUserData(data);\n      return User.getActiveUser(client);\n    }\n  }, {\n    key: 'login',\n    value: function login(usernameOrData, password, options) {\n      var user = new User();\n      return user.login(usernameOrData, password, options);\n    }\n  }, {\n    key: 'loginWithIdentity',\n    value: function loginWithIdentity(identity, tokens, options) {\n      var user = new User();\n      return user.loginWithIdentity(identity, tokens, options);\n    }\n  }, {\n    key: 'loginWithMIC',\n    value: function loginWithMIC(redirectUri, authorizationGrant, options) {\n      var user = new User();\n      return user.loginWithMIC(redirectUri, authorizationGrant, options);\n    }\n  }, {\n    key: 'isIdentitySupported',\n    value: function isIdentitySupported(identity) {\n      return hello && supportedIdentities.indexOf(identity) !== -1;\n    }\n\n    /**\n     * Connect using Facebook.\n     *\n     * @param  {Object}         [options={}]  Options\n     * @return {Promise<User>}                The connected user.\n     *\n     * @example\n     * var promise = user.connectWithFacebook();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connectWithFacebook',\n    value: function connectWithFacebook() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return User.connectWithIdentity(_enums.SocialIdentity.Facebook, options);\n    }\n\n    /**\n     * Connect using Google.\n     *\n     * @param  {Object}         [options={}]  Options\n     * @return {Promise<User>}                The connected user.\n     *\n     * @example\n     * var promise = user.connectWithGoogle();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connectWithGoogle',\n    value: function connectWithGoogle() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return User.connectWithIdentity(_enums.SocialIdentity.Google, options);\n    }\n\n    /**\n     * Connect using LinkedIn.\n     *\n     * @param  {Object}         [options={}]  Options\n     * @return {Promise<User>}                The connected user.\n     *\n     * @example\n     * var promise = user.connectWithLinkedIn();\n     * promise.then(function(user) {\n     *   ...\n     * }).catch(function(error) {\n     *   ...\n     * });\n     */\n\n  }, {\n    key: 'connectWithLinkedIn',\n    value: function connectWithLinkedIn() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return User.connectWithIdentity(_enums.SocialIdentity.LinkedIn, options);\n    }\n  }, {\n    key: 'connectWithIdentity',\n    value: function connectWithIdentity(identity, options) {\n      var user = new User();\n      return user.connectWithIdentity(identity, options);\n    }\n  }, {\n    key: 'signup',\n    value: function signup(data, options) {\n      var user = new User();\n      return user.signup(data, options);\n    }\n  }, {\n    key: 'signupWithIdentity',\n    value: function signupWithIdentity(identity, tokens, options) {\n      var user = new User();\n      return user.signupWithIdentity(identity, tokens, options);\n    }\n  }]);\n\n  return User;\n}();\n\n}).call(this,require('_process'))\n\n},{\"./acl\":17,\"./client\":19,\"./enums\":21,\"./errors\":22,\"./metadata\":25,\"./mic\":26,\"./query\":27,\"./requests/network\":41,\"./stores/datastore\":46,\"_process\":229,\"babybird\":4,\"hellojs\":11,\"lodash/assign\":184,\"lodash/isObject\":204,\"lodash/result\":220,\"url\":244}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Device = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _object = require('./object');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @private\n */\n\nvar Device = exports.Device = function () {\n  function Device() {\n    _classCallCheck(this, Device);\n  }\n\n  _createClass(Device, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      throw new Error('method unsupported');\n    }\n  }]);\n\n  return Device;\n}();\n\nDevice.use = (0, _object.use)(['toJSON']);\n\n},{\"./object\":54}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.nested = nested;\nexports.isDefined = isDefined;\nexports.use = use;\n\nvar _forEach = require('lodash/forEach');\n\nvar _forEach2 = _interopRequireDefault(_forEach);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @private\n */\nfunction nested(obj, dotProperty, value) {\n  if (!dotProperty) {\n    obj = value ? value : obj;\n    return obj;\n  }\n\n  var parts = dotProperty.split('.');\n  var current = parts.shift();\n  while (current && obj) {\n    obj = obj[current];\n    current = parts.shift();\n  }\n\n  return value ? value : obj;\n}\n\n/**\n * @private\n */\nfunction isDefined(obj) {\n  return obj !== undefined && obj !== null;\n}\n\n/**\n * @private\n */\nfunction use(nsInterface) {\n  return function () {\n    var _this = this;\n\n    var adapter = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    (0, _forEach2.default)(nsInterface, function (methodName) {\n      if ((0, _isFunction2.default)(adapter[methodName])) {\n        _this.prototype[methodName] = function () {\n          return adapter[methodName].apply(this, arguments);\n        };\n      }\n    });\n  };\n}\n\n},{\"lodash/forEach\":190,\"lodash/isFunction\":200}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Popup = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = require('events');\n\nvar _object = require('./object');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @private\n */\n\nvar Popup = exports.Popup = function (_EventEmitter) {\n  _inherits(Popup, _EventEmitter);\n\n  function Popup() {\n    var url = arguments.length <= 0 || arguments[0] === undefined ? '/' : arguments[0];\n\n    _classCallCheck(this, Popup);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Popup).call(this));\n\n    _this.url = url;\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: 'open',\n    value: function open() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'loadHandler',\n    value: function loadHandler() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'clickHandler',\n    value: function clickHandler() {\n      throw new Error('method unsupported');\n    }\n  }, {\n    key: 'closeHandler',\n    value: function closeHandler() {\n      throw new Error('method unsupported');\n    }\n  }]);\n\n  return Popup;\n}(_events.EventEmitter);\n\nPopup.use = (0, _object.use)(['open', 'close', 'loadHandler', 'clickHandler', 'closeHandler']);\n\n},{\"./object\":54,\"events\":8}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.byteCount = byteCount;\nexports.randomString = randomString;\n\nvar _uid = require('uid');\n\nvar _uid2 = _interopRequireDefault(_uid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @private\n */\nfunction byteCount(str) {\n  var count = 0;\n  var stringLength = str.length;\n  str = String(str || '');\n\n  for (var i = 0; i < stringLength; i++) {\n    var partCount = encodeURI(str[i]).split('%').length;\n    count += partCount === 1 ? 1 : partCount - 1;\n  }\n\n  return count;\n}\n\nfunction randomString(size) {\n  var prefix = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n  return '' + prefix + (0, _uid2.default)(size);\n}\n\n},{\"uid\":242}],57:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar stub = require('./stub');\nvar tracking = require('./tracking');\nvar ls = 'localStorage' in global && global.localStorage ? global.localStorage : stub;\n\nfunction accessor (key, value) {\n  if (arguments.length === 1) {\n    return get(key);\n  }\n  return set(key, value);\n}\n\nfunction get (key) {\n  return JSON.parse(ls.getItem(key));\n}\n\nfunction set (key, value) {\n  try {\n    ls.setItem(key, JSON.stringify(value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction remove (key) {\n  return ls.removeItem(key);\n}\n\nfunction clear () {\n  return ls.clear();\n}\n\naccessor.set = set;\naccessor.get = get;\naccessor.remove = remove;\naccessor.clear = clear;\naccessor.on = tracking.on;\naccessor.off = tracking.off;\n\nmodule.exports = accessor;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./stub\":58,\"./tracking\":59}],58:[function(require,module,exports){\n'use strict';\n\nvar ms = {};\n\nfunction getItem (key) {\n  return key in ms ? ms[key] : null;\n}\n\nfunction setItem (key, value) {\n  ms[key] = value;\n  return true;\n}\n\nfunction removeItem (key) {\n  var found = key in ms;\n  if (found) {\n    return delete ms[key];\n  }\n  return false;\n}\n\nfunction clear () {\n  ms = {};\n  return true;\n}\n\nmodule.exports = {\n  getItem: getItem,\n  setItem: setItem,\n  removeItem: removeItem,\n  clear: clear\n};\n\n},{}],59:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar listeners = {};\nvar listening = false;\n\nfunction listen () {\n  if (global.addEventListener) {\n    global.addEventListener('storage', change, false);\n  } else if (global.attachEvent) {\n    global.attachEvent('onstorage', change);\n  } else {\n    global.onstorage = change;\n  }\n}\n\nfunction change (e) {\n  if (!e) {\n    e = global.event;\n  }\n  var all = listeners[e.key];\n  if (all) {\n    all.forEach(fire);\n  }\n\n  function fire (listener) {\n    listener(JSON.parse(e.newValue), JSON.parse(e.oldValue), e.url || e.uri);\n  }\n}\n\nfunction on (key, fn) {\n  if (listeners[key]) {\n    listeners[key].push(fn);\n  } else {\n    listeners[key] = [fn];\n  }\n  if (listening === false) {\n    listen();\n  }\n}\n\nfunction off (key, fn) {\n  var ns = listeners[key];\n  if (ns.length > 1) {\n    ns.splice(ns.indexOf(fn), 1);\n  } else {\n    listeners[key] = [];\n  }\n}\n\nmodule.exports = {\n  on: on,\n  off: off\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],60:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Creates an hash object.\n *\n * @private\n * @constructor\n * @returns {Object} Returns the new hash object.\n */\nfunction Hash() {}\n\n// Avoid inheriting from `Object.prototype` when possible.\nHash.prototype = nativeCreate ? nativeCreate(null) : objectProto;\n\nmodule.exports = Hash;\n\n},{\"./_nativeCreate\":174}],61:[function(require,module,exports){\nvar getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n\n},{\"./_getNative\":147,\"./_root\":176}],62:[function(require,module,exports){\nvar mapClear = require('./_mapClear'),\n    mapDelete = require('./_mapDelete'),\n    mapGet = require('./_mapGet'),\n    mapHas = require('./_mapHas'),\n    mapSet = require('./_mapSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction MapCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `MapCache`.\nMapCache.prototype.clear = mapClear;\nMapCache.prototype['delete'] = mapDelete;\nMapCache.prototype.get = mapGet;\nMapCache.prototype.has = mapHas;\nMapCache.prototype.set = mapSet;\n\nmodule.exports = MapCache;\n\n},{\"./_mapClear\":168,\"./_mapDelete\":169,\"./_mapGet\":170,\"./_mapHas\":171,\"./_mapSet\":172}],63:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Reflect = root.Reflect;\n\nmodule.exports = Reflect;\n\n},{\"./_root\":176}],64:[function(require,module,exports){\nvar getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n\n},{\"./_getNative\":147,\"./_root\":176}],65:[function(require,module,exports){\nvar MapCache = require('./_MapCache'),\n    cachePush = require('./_cachePush');\n\n/**\n *\n * Creates a set cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.push(values[index]);\n  }\n}\n\n// Add functions to the `SetCache`.\nSetCache.prototype.push = cachePush;\n\nmodule.exports = SetCache;\n\n},{\"./_MapCache\":62,\"./_cachePush\":125}],66:[function(require,module,exports){\nvar stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction Stack(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `Stack` cache.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n\n},{\"./_stackClear\":178,\"./_stackDelete\":179,\"./_stackGet\":180,\"./_stackHas\":181,\"./_stackSet\":182}],67:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n},{\"./_root\":176}],68:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n\n},{\"./_root\":176}],69:[function(require,module,exports){\nvar getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n\n},{\"./_getNative\":147,\"./_root\":176}],70:[function(require,module,exports){\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `Map#set` because it doesn't return the map instance in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\nmodule.exports = addMapEntry;\n\n},{}],71:[function(require,module,exports){\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  set.add(value);\n  return set;\n}\n\nmodule.exports = addSetEntry;\n\n},{}],72:[function(require,module,exports){\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n\n},{}],73:[function(require,module,exports){\n/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n\n},{}],74:[function(require,module,exports){\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n\n},{}],75:[function(require,module,exports){\nvar baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  return !!array.length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n\n},{\"./_baseIndexOf\":104}],76:[function(require,module,exports){\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n\n},{}],77:[function(require,module,exports){\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n},{}],78:[function(require,module,exports){\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n\n},{}],79:[function(require,module,exports){\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n\n},{}],80:[function(require,module,exports){\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check, else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n\n},{}],81:[function(require,module,exports){\nvar eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (typeof key == 'number' && value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignMergeValue;\n\n},{\"./eq\":187}],82:[function(require,module,exports){\nvar eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignValue;\n\n},{\"./eq\":187}],83:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the associative array.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction assocDelete(array, key) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = array.length - 1;\n  if (index == lastIndex) {\n    array.pop();\n  } else {\n    splice.call(array, index, 1);\n  }\n  return true;\n}\n\nmodule.exports = assocDelete;\n\n},{\"./_assocIndexOf\":86}],84:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the associative array value for `key`.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction assocGet(array, key) {\n  var index = assocIndexOf(array, key);\n  return index < 0 ? undefined : array[index][1];\n}\n\nmodule.exports = assocGet;\n\n},{\"./_assocIndexOf\":86}],85:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if an associative array value for `key` exists.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction assocHas(array, key) {\n  return assocIndexOf(array, key) > -1;\n}\n\nmodule.exports = assocHas;\n\n},{\"./_assocIndexOf\":86}],86:[function(require,module,exports){\nvar eq = require('./eq');\n\n/**\n * Gets the index at which the first occurrence of `key` is found in `array`\n * of key-value pairs.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n\n},{\"./eq\":187}],87:[function(require,module,exports){\nvar assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the associative array `key` to `value`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction assocSet(array, key, value) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    array.push([key, value]);\n  } else {\n    array[index][1] = value;\n  }\n}\n\nmodule.exports = assocSet;\n\n},{\"./_assocIndexOf\":86}],88:[function(require,module,exports){\nvar baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n\n},{\"./_baseEach\":95}],89:[function(require,module,exports){\nvar copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n\n},{\"./_copyObject\":135,\"./keys\":212}],90:[function(require,module,exports){\nvar identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the array-like object.\n */\nfunction baseCastFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = baseCastFunction;\n\n},{\"./identity\":193}],91:[function(require,module,exports){\nvar isArray = require('./isArray'),\n    stringToPath = require('./_stringToPath');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction baseCastPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\nmodule.exports = baseCastPath;\n\n},{\"./_stringToPath\":183,\"./isArray\":195}],92:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseForOwn = require('./_baseForOwn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isHostObject = require('./_isHostObject'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\ncloneableTags[dateTag] = cloneableTags[float32Tag] =\ncloneableTags[float64Tag] = cloneableTags[int8Tag] =\ncloneableTags[int16Tag] = cloneableTags[int32Tag] =\ncloneableTags[mapTag] = cloneableTags[numberTag] =\ncloneableTags[objectTag] = cloneableTags[regexpTag] =\ncloneableTags[setTag] = cloneableTags[stringTag] =\ncloneableTags[symbolTag] = cloneableTags[uint8Tag] =\ncloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] =\ncloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        result = baseAssign(result, value);\n        return isFull ? copySymbols(value, result) : result;\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  // Recursively populate clone (susceptible to call stack limits).\n  (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return (isFull && !isArr) ? copySymbols(value, result) : result;\n}\n\nmodule.exports = baseClone;\n\n},{\"./_Stack\":66,\"./_arrayEach\":74,\"./_assignValue\":82,\"./_baseAssign\":89,\"./_baseForOwn\":100,\"./_cloneBuffer\":128,\"./_copyArray\":134,\"./_copySymbols\":137,\"./_getTag\":149,\"./_initCloneArray\":157,\"./_initCloneByTag\":158,\"./_initCloneObject\":159,\"./_isHostObject\":160,\"./isArray\":195,\"./isBuffer\":198,\"./isObject\":204}],93:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\nmodule.exports = baseCreate;\n\n},{\"./isObject\":204}],94:[function(require,module,exports){\nvar SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support for\n * excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n\n},{\"./_SetCache\":65,\"./_arrayIncludes\":75,\"./_arrayIncludesWith\":76,\"./_arrayMap\":77,\"./_baseUnary\":122,\"./_cacheHas\":124}],95:[function(require,module,exports){\nvar baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n\n},{\"./_baseForOwn\":100,\"./_createBaseEach\":140}],96:[function(require,module,exports){\n/**\n * The base implementation of methods like `_.find` and `_.findKey`, without\n * support for iteratee shorthands, which iterates over `collection` using\n * `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @param {boolean} [retKey] Specify returning the key of the found element instead of the element itself.\n * @returns {*} Returns the found element or its key, else `undefined`.\n */\nfunction baseFind(collection, predicate, eachFunc, retKey) {\n  var result;\n  eachFunc(collection, function(value, key, collection) {\n    if (predicate(value, key, collection)) {\n      result = retKey ? key : value;\n      return false;\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFind;\n\n},{}],97:[function(require,module,exports){\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n\n},{}],98:[function(require,module,exports){\nvar arrayPush = require('./_arrayPush'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && isArrayLikeObject(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n\n},{\"./_arrayPush\":78,\"./isArguments\":194,\"./isArray\":195,\"./isArrayLikeObject\":197}],99:[function(require,module,exports){\nvar createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n\n},{\"./_createBaseFor\":141}],100:[function(require,module,exports){\nvar baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n\n},{\"./_baseFor\":99,\"./keys\":212}],101:[function(require,module,exports){\nvar baseCastPath = require('./_baseCastPath'),\n    isKey = require('./_isKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path + ''] : baseCastPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n\n},{\"./_baseCastPath\":91,\"./_isKey\":163}],102:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n  // that are composed entirely of index properties, return `false` for\n  // `hasOwnProperty` checks of them.\n  return hasOwnProperty.call(object, key) ||\n    (typeof object == 'object' && key in object && getPrototypeOf(object) === null);\n}\n\nmodule.exports = baseHas;\n\n},{}],103:[function(require,module,exports){\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n\n},{}],104:[function(require,module,exports){\nvar indexOfNaN = require('./_indexOfNaN');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return indexOfNaN(array, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOf;\n\n},{\"./_indexOfNaN\":156}],105:[function(require,module,exports){\nvar baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObject = require('./isObject'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqual;\n\n},{\"./_baseIsEqualDeep\":106,\"./isObject\":204,\"./isObjectLike\":205}],106:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isHostObject = require('./_isHostObject'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      stack || (stack = new Stack);\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n\n},{\"./_Stack\":66,\"./_equalArrays\":142,\"./_equalByTag\":143,\"./_equalObjects\":144,\"./_getTag\":149,\"./_isHostObject\":160,\"./isArray\":195,\"./isTypedArray\":210}],107:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack,\n          result = customizer ? customizer(objValue, srcValue, key, object, source, stack) : undefined;\n\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n\n},{\"./_Stack\":66,\"./_baseIsEqual\":105}],108:[function(require,module,exports){\nvar baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  var type = typeof value;\n  if (type == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n\n},{\"./_baseMatches\":112,\"./_baseMatchesProperty\":113,\"./identity\":193,\"./isArray\":195,\"./property\":217}],109:[function(require,module,exports){\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = Object.keys;\n\n/**\n * The base implementation of `_.keys` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  return nativeKeys(Object(object));\n}\n\nmodule.exports = baseKeys;\n\n},{}],110:[function(require,module,exports){\nvar Reflect = require('./_Reflect'),\n    iteratorToArray = require('./_iteratorToArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar enumerate = Reflect ? Reflect.enumerate : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.keysIn` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  object = object == null ? object : Object(object);\n\n  var result = [];\n  for (var key in object) {\n    result.push(key);\n  }\n  return result;\n}\n\n// Fallback for IE < 9 with es6-shim.\nif (enumerate && !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf')) {\n  baseKeysIn = function(object) {\n    return iteratorToArray(enumerate(object));\n  };\n}\n\nmodule.exports = baseKeysIn;\n\n},{\"./_Reflect\":63,\"./_iteratorToArray\":167}],111:[function(require,module,exports){\nvar baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n\n},{\"./_baseEach\":95,\"./isArrayLike\":196}],112:[function(require,module,exports){\nvar baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value &&\n        (value !== undefined || (key in Object(object)));\n    };\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n\n},{\"./_baseIsMatch\":107,\"./_getMatchData\":146}],113:[function(require,module,exports){\nvar baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n\n},{\"./_baseIsEqual\":105,\"./get\":191,\"./hasIn\":192}],114:[function(require,module,exports){\nvar Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isArray = require('./isArray'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  var props = (isArray(source) || isTypedArray(source))\n    ? undefined\n    : keysIn(source);\n\n  arrayEach(props || source, function(srcValue, key) {\n    if (props) {\n      key = srcValue;\n      srcValue = source[key];\n    }\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(object[key], srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  });\n}\n\nmodule.exports = baseMerge;\n\n},{\"./_Stack\":66,\"./_arrayEach\":74,\"./_assignMergeValue\":81,\"./_baseMergeDeep\":115,\"./isArray\":195,\"./isObject\":204,\"./isTypedArray\":210,\"./keysIn\":213}],115:[function(require,module,exports){\nvar assignMergeValue = require('./_assignMergeValue'),\n    baseClone = require('./_baseClone'),\n    copyArray = require('./_copyArray'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = object[key],\n      srcValue = source[key],\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    newValue = srcValue;\n    if (isArray(srcValue) || isTypedArray(srcValue)) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || (srcIndex && isFunction(objValue))) {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n      else {\n        newValue = objValue;\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  stack.set(srcValue, newValue);\n\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n  }\n  stack['delete'](srcValue);\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n\n},{\"./_assignMergeValue\":81,\"./_baseClone\":92,\"./_copyArray\":134,\"./isArguments\":194,\"./isArray\":195,\"./isArrayLikeObject\":197,\"./isFunction\":200,\"./isObject\":204,\"./isPlainObject\":206,\"./isTypedArray\":210,\"./toPlainObject\":224}],116:[function(require,module,exports){\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n\n},{}],117:[function(require,module,exports){\nvar baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n\n},{\"./_baseGet\":101}],118:[function(require,module,exports){\n/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n\n},{}],119:[function(require,module,exports){\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n\n},{}],120:[function(require,module,exports){\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n\n},{}],121:[function(require,module,exports){\nvar arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n * of key-value pairs for `object` corresponding to the property names of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the new array of key-value pairs.\n */\nfunction baseToPairs(object, props) {\n  return arrayMap(props, function(key) {\n    return [key, object[key]];\n  });\n}\n\nmodule.exports = baseToPairs;\n\n},{\"./_arrayMap\":77}],122:[function(require,module,exports){\n/**\n * The base implementation of `_.unary` without support for storing wrapper metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n\n},{}],123:[function(require,module,exports){\nvar arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n\n},{\"./_arrayMap\":77}],124:[function(require,module,exports){\nvar isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Checks if `value` is in `cache`.\n *\n * @private\n * @param {Object} cache The set cache to search.\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction cacheHas(cache, value) {\n  var map = cache.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    return hash[value] === HASH_UNDEFINED;\n  }\n  return map.has(value);\n}\n\nmodule.exports = cacheHas;\n\n},{\"./_isKeyable\":164}],125:[function(require,module,exports){\nvar isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the set cache.\n *\n * @private\n * @name push\n * @memberOf SetCache\n * @param {*} value The value to cache.\n */\nfunction cachePush(value) {\n  var map = this.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    hash[value] = HASH_UNDEFINED;\n  }\n  else {\n    map.set(value, HASH_UNDEFINED);\n  }\n}\n\nmodule.exports = cachePush;\n\n},{\"./_isKeyable\":164}],126:[function(require,module,exports){\n/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\nmodule.exports = checkGlobal;\n\n},{}],127:[function(require,module,exports){\nvar Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n\n},{\"./_Uint8Array\":68}],128:[function(require,module,exports){\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n\n},{}],129:[function(require,module,exports){\nvar addMapEntry = require('./_addMapEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    mapToArray = require('./_mapToArray');\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map) {\n  return arrayReduce(mapToArray(map), addMapEntry, new map.constructor);\n}\n\nmodule.exports = cloneMap;\n\n},{\"./_addMapEntry\":70,\"./_arrayReduce\":79,\"./_mapToArray\":173}],130:[function(require,module,exports){\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n\n},{}],131:[function(require,module,exports){\nvar addSetEntry = require('./_addSetEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    setToArray = require('./_setToArray');\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set) {\n  return arrayReduce(setToArray(set), addSetEntry, new set.constructor);\n}\n\nmodule.exports = cloneSet;\n\n},{\"./_addSetEntry\":71,\"./_arrayReduce\":79,\"./_setToArray\":177}],132:[function(require,module,exports){\nvar Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n\n},{\"./_Symbol\":67}],133:[function(require,module,exports){\nvar cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n\n},{\"./_cloneArrayBuffer\":127}],134:[function(require,module,exports){\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n\n},{}],135:[function(require,module,exports){\nvar copyObjectWith = require('./_copyObjectWith');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object) {\n  return copyObjectWith(source, props, object);\n}\n\nmodule.exports = copyObject;\n\n},{\"./_copyObjectWith\":136}],136:[function(require,module,exports){\nvar assignValue = require('./_assignValue');\n\n/**\n * This function is like `copyObject` except that it accepts a function to\n * customize copied values.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObjectWith(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\nmodule.exports = copyObjectWith;\n\n},{\"./_assignValue\":82}],137:[function(require,module,exports){\nvar copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n\n},{\"./_copyObject\":135,\"./_getSymbols\":148}],138:[function(require,module,exports){\nvar arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n\n},{\"./_arrayAggregator\":73,\"./_baseAggregator\":88,\"./_baseIteratee\":108,\"./isArray\":195}],139:[function(require,module,exports){\nvar isIterateeCall = require('./_isIterateeCall'),\n    rest = require('./rest');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = typeof customizer == 'function'\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n\n},{\"./_isIterateeCall\":162,\"./rest\":219}],140:[function(require,module,exports){\nvar isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n\n},{\"./isArrayLike\":196}],141:[function(require,module,exports){\n/**\n * Creates a base function for methods like `_.forIn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n\n},{}],142:[function(require,module,exports){\nvar arraySome = require('./_arraySome');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var index = -1,\n      isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      isUnordered = bitmask & UNORDERED_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(array, other);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isUnordered) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack);\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  return result;\n}\n\nmodule.exports = equalArrays;\n\n},{\"./_arraySome\":80}],143:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object) ? other != +other : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      // Recursively compare objects (susceptible to call stack limits).\n      return equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask | UNORDERED_COMPARE_FLAG, stack.set(object, other));\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n\n},{\"./_Symbol\":67,\"./_Uint8Array\":68,\"./_equalArrays\":142,\"./_mapToArray\":173,\"./_setToArray\":177}],144:[function(require,module,exports){\nvar baseHas = require('./_baseHas'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : baseHas(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  return result;\n}\n\nmodule.exports = equalObjects;\n\n},{\"./_baseHas\":102,\"./keys\":212}],145:[function(require,module,exports){\nvar baseProperty = require('./_baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n\n},{\"./_baseProperty\":116}],146:[function(require,module,exports){\nvar isStrictComparable = require('./_isStrictComparable'),\n    toPairs = require('./toPairs');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = toPairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n\n},{\"./_isStrictComparable\":166,\"./toPairs\":223}],147:[function(require,module,exports){\nvar isNative = require('./isNative');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n\n},{\"./isNative\":202}],148:[function(require,module,exports){\n/** Built-in value references. */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = getOwnPropertySymbols || function() {\n  return [];\n};\n\nmodule.exports = getSymbols;\n\n},{}],149:[function(require,module,exports){\nvar Map = require('./_Map'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect maps, sets, and weakmaps. */\nvar mapCtorString = Map ? funcToString.call(Map) : '',\n    setCtorString = Set ? funcToString.call(Set) : '',\n    weakMapCtorString = WeakMap ? funcToString.call(WeakMap) : '';\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction getTag(value) {\n  return objectToString.call(value);\n}\n\n// Fallback for IE 11 providing `toStringTag` values for maps, sets, and weakmaps.\nif ((Map && getTag(new Map) != mapTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : null,\n        ctorString = typeof Ctor == 'function' ? funcToString.call(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case mapCtorString: return mapTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n\n},{\"./_Map\":61,\"./_Set\":64,\"./_WeakMap\":69}],150:[function(require,module,exports){\nvar baseCastPath = require('./_baseCastPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isKey = require('./_isKey'),\n    isLength = require('./isLength'),\n    isString = require('./isString'),\n    last = require('./last'),\n    parent = require('./_parent');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  if (object == null) {\n    return false;\n  }\n  var result = hasFunc(object, path);\n  if (!result && !isKey(path)) {\n    path = baseCastPath(path);\n    object = parent(object, path);\n    if (object != null) {\n      path = last(path);\n      result = hasFunc(object, path);\n    }\n  }\n  var length = object ? object.length : undefined;\n  return result || (\n    !!length && isLength(length) && isIndex(path, length) &&\n    (isArray(object) || isString(object) || isArguments(object))\n  );\n}\n\nmodule.exports = hasPath;\n\n},{\"./_baseCastPath\":91,\"./_isIndex\":161,\"./_isKey\":163,\"./_parent\":175,\"./isArguments\":194,\"./isArray\":195,\"./isLength\":201,\"./isString\":208,\"./last\":214}],151:[function(require,module,exports){\nvar hashHas = require('./_hashHas');\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(hash, key) {\n  return hashHas(hash, key) && delete hash[key];\n}\n\nmodule.exports = hashDelete;\n\n},{\"./_hashHas\":153}],152:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(hash, key) {\n  if (nativeCreate) {\n    var result = hash[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(hash, key) ? hash[key] : undefined;\n}\n\nmodule.exports = hashGet;\n\n},{\"./_nativeCreate\":174}],153:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(hash, key) {\n  return nativeCreate ? hash[key] !== undefined : hasOwnProperty.call(hash, key);\n}\n\nmodule.exports = hashHas;\n\n},{\"./_nativeCreate\":174}],154:[function(require,module,exports){\nvar nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction hashSet(hash, key, value) {\n  hash[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n}\n\nmodule.exports = hashSet;\n\n},{\"./_nativeCreate\":174}],155:[function(require,module,exports){\nvar baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isLength = require('./isLength'),\n    isString = require('./isString');\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\nmodule.exports = indexKeys;\n\n},{\"./_baseTimes\":120,\"./isArguments\":194,\"./isArray\":195,\"./isLength\":201,\"./isString\":208}],156:[function(require,module,exports){\n/**\n * Gets the index at which the first occurrence of `NaN` is found in `array`.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n */\nfunction indexOfNaN(array, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 0 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    var other = array[index];\n    if (other !== other) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = indexOfNaN;\n\n},{}],157:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n\n},{}],158:[function(require,module,exports){\nvar cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneMap = require('./_cloneMap'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSet = require('./_cloneSet'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n\n},{\"./_cloneArrayBuffer\":127,\"./_cloneMap\":129,\"./_cloneRegExp\":130,\"./_cloneSet\":131,\"./_cloneSymbol\":132,\"./_cloneTypedArray\":133}],159:[function(require,module,exports){\nvar baseCreate = require('./_baseCreate'),\n    isPrototype = require('./_isPrototype');\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototypeOf(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n\n},{\"./_baseCreate\":93,\"./_isPrototype\":165}],160:[function(require,module,exports){\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\nmodule.exports = isHostObject;\n\n},{}],161:[function(require,module,exports){\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n\n},{}],162:[function(require,module,exports){\nvar eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n\n},{\"./_isIndex\":161,\"./eq\":187,\"./isArrayLike\":196,\"./isObject\":204}],163:[function(require,module,exports){\nvar isArray = require('./isArray');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (typeof value == 'number') {\n    return true;\n  }\n  return !isArray(value) &&\n    (reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n      (object != null && value in Object(object)));\n}\n\nmodule.exports = isKey;\n\n},{\"./isArray\":195}],164:[function(require,module,exports){\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return type == 'number' || type == 'boolean' ||\n    (type == 'string' && value != '__proto__') || value == null;\n}\n\nmodule.exports = isKeyable;\n\n},{}],165:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n\n},{}],166:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n\n},{\"./isObject\":204}],167:[function(require,module,exports){\n/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\nmodule.exports = iteratorToArray;\n\n},{}],168:[function(require,module,exports){\nvar Hash = require('./_Hash'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': Map ? new Map : [],\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapClear;\n\n},{\"./_Hash\":60,\"./_Map\":61}],169:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocDelete = require('./_assocDelete'),\n    hashDelete = require('./_hashDelete'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapDelete(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashDelete(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map['delete'](key) : assocDelete(data.map, key);\n}\n\nmodule.exports = mapDelete;\n\n},{\"./_Map\":61,\"./_assocDelete\":83,\"./_hashDelete\":151,\"./_isKeyable\":164}],170:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocGet = require('./_assocGet'),\n    hashGet = require('./_hashGet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapGet(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashGet(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.get(key) : assocGet(data.map, key);\n}\n\nmodule.exports = mapGet;\n\n},{\"./_Map\":61,\"./_assocGet\":84,\"./_hashGet\":152,\"./_isKeyable\":164}],171:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocHas = require('./_assocHas'),\n    hashHas = require('./_hashHas'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapHas(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashHas(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.has(key) : assocHas(data.map, key);\n}\n\nmodule.exports = mapHas;\n\n},{\"./_Map\":61,\"./_assocHas\":85,\"./_hashHas\":153,\"./_isKeyable\":164}],172:[function(require,module,exports){\nvar Map = require('./_Map'),\n    assocSet = require('./_assocSet'),\n    hashSet = require('./_hashSet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache object.\n */\nfunction mapSet(key, value) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    hashSet(typeof key == 'string' ? data.string : data.hash, key, value);\n  } else if (Map) {\n    data.map.set(key, value);\n  } else {\n    assocSet(data.map, key, value);\n  }\n  return this;\n}\n\nmodule.exports = mapSet;\n\n},{\"./_Map\":61,\"./_assocSet\":87,\"./_hashSet\":154,\"./_isKeyable\":164}],173:[function(require,module,exports){\n/**\n * Converts `map` to an array.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n\n},{}],174:[function(require,module,exports){\nvar getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n\n},{\"./_getNative\":147}],175:[function(require,module,exports){\nvar baseSlice = require('./_baseSlice'),\n    get = require('./get');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length == 1 ? object : get(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n\n},{\"./_baseSlice\":119,\"./get\":191}],176:[function(require,module,exports){\n(function (global){\nvar checkGlobal = require('./_checkGlobal');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\nmodule.exports = root;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./_checkGlobal\":126}],177:[function(require,module,exports){\n/**\n * Converts `set` to an array.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n\n},{}],178:[function(require,module,exports){\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = { 'array': [], 'map': null };\n}\n\nmodule.exports = stackClear;\n\n},{}],179:[function(require,module,exports){\nvar assocDelete = require('./_assocDelete');\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocDelete(array, key) : data.map['delete'](key);\n}\n\nmodule.exports = stackDelete;\n\n},{\"./_assocDelete\":83}],180:[function(require,module,exports){\nvar assocGet = require('./_assocGet');\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocGet(array, key) : data.map.get(key);\n}\n\nmodule.exports = stackGet;\n\n},{\"./_assocGet\":84}],181:[function(require,module,exports){\nvar assocHas = require('./_assocHas');\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocHas(array, key) : data.map.has(key);\n}\n\nmodule.exports = stackHas;\n\n},{\"./_assocHas\":85}],182:[function(require,module,exports){\nvar MapCache = require('./_MapCache'),\n    assocSet = require('./_assocSet');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache object.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__,\n      array = data.array;\n\n  if (array) {\n    if (array.length < (LARGE_ARRAY_SIZE - 1)) {\n      assocSet(array, key, value);\n    } else {\n      data.array = null;\n      data.map = new MapCache(array);\n    }\n  }\n  var map = data.map;\n  if (map) {\n    map.set(key, value);\n  }\n  return this;\n}\n\nmodule.exports = stackSet;\n\n},{\"./_MapCache\":62,\"./_assocSet\":87}],183:[function(require,module,exports){\nvar toString = require('./toString');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nfunction stringToPath(string) {\n  var result = [];\n  toString(string).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = stringToPath;\n\n},{\"./toString\":225}],184:[function(require,module,exports){\nvar assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Assigns own enumerable properties of source objects to the destination\n * object. Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function Foo() {\n *   this.c = 3;\n * }\n *\n * function Bar() {\n *   this.e = 5;\n * }\n *\n * Foo.prototype.d = 4;\n * Bar.prototype.f = 6;\n *\n * _.assign({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3, 'e': 5 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n\n},{\"./_assignValue\":82,\"./_copyObject\":135,\"./_createAssigner\":139,\"./_isPrototype\":165,\"./isArrayLike\":196,\"./keys\":212}],185:[function(require,module,exports){\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var getter = _.constant(object);\n *\n * getter() === object;\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n\n},{}],186:[function(require,module,exports){\nvar baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last'),\n    rest = require('./rest');\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. Result values are chosen from the first array.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([3.1, 2.2, 1.3], [4.4, 2.5], Math.floor);\n * // => [3.1, 1.3]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = rest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, true), baseIteratee(iteratee))\n    : [];\n});\n\nmodule.exports = differenceBy;\n\n},{\"./_baseDifference\":94,\"./_baseFlatten\":98,\"./_baseIteratee\":108,\"./isArrayLikeObject\":197,\"./last\":214,\"./rest\":219}],187:[function(require,module,exports){\n/**\n * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n\n},{}],188:[function(require,module,exports){\nvar baseEach = require('./_baseEach'),\n    baseFind = require('./_baseFind'),\n    baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three arguments:\n * (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nfunction find(collection, predicate) {\n  predicate = baseIteratee(predicate, 3);\n  if (isArray(collection)) {\n    var index = baseFindIndex(collection, predicate);\n    return index > -1 ? collection[index] : undefined;\n  }\n  return baseFind(collection, predicate, baseEach);\n}\n\nmodule.exports = find;\n\n},{\"./_baseEach\":95,\"./_baseFind\":96,\"./_baseFindIndex\":97,\"./_baseIteratee\":108,\"./isArray\":195}],189:[function(require,module,exports){\nvar baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate) {\n  return (array && array.length)\n    ? baseFindIndex(array, baseIteratee(predicate, 3))\n    : -1;\n}\n\nmodule.exports = findIndex;\n\n},{\"./_baseFindIndex\":97,\"./_baseIteratee\":108}],190:[function(require,module,exports){\nvar arrayEach = require('./_arrayEach'),\n    baseCastFunction = require('./_baseCastFunction'),\n    baseEach = require('./_baseEach'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior use `_.forIn` or `_.forOwn`\n * for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(value) {\n *   console.log(value);\n * });\n * // => logs `1` then `2`\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => logs 'a' then 'b' (iteration order is not guaranteed)\n */\nfunction forEach(collection, iteratee) {\n  return (typeof iteratee == 'function' && isArray(collection))\n    ? arrayEach(collection, iteratee)\n    : baseEach(collection, baseCastFunction(iteratee));\n}\n\nmodule.exports = forEach;\n\n},{\"./_arrayEach\":74,\"./_baseCastFunction\":90,\"./_baseEach\":95,\"./isArray\":195}],191:[function(require,module,exports){\nvar baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined` the `defaultValue` is used in its place.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n\n},{\"./_baseGet\":101}],192:[function(require,module,exports){\nvar baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': _.create({ 'c': 3 }) }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b.c');\n * // => true\n *\n * _.hasIn(object, ['a', 'b', 'c']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n\n},{\"./_baseHasIn\":103,\"./_hasPath\":150}],193:[function(require,module,exports){\n/**\n * This method returns the first argument given to it.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n\n},{}],194:[function(require,module,exports){\nvar isArrayLikeObject = require('./isArrayLikeObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\nmodule.exports = isArguments;\n\n},{\"./isArrayLikeObject\":197}],195:[function(require,module,exports){\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n},{}],196:[function(require,module,exports){\nvar getLength = require('./_getLength'),\n    isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value)) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n\n},{\"./_getLength\":145,\"./isFunction\":200,\"./isLength\":201}],197:[function(require,module,exports){\nvar isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n\n},{\"./isArrayLike\":196,\"./isObjectLike\":205}],198:[function(require,module,exports){\nvar constant = require('./constant'),\n    root = require('./_root');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = (freeModule && freeModule.exports === freeExports)\n  ? freeExports\n  : undefined;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = !Buffer ? constant(false) : function(value) {\n  return value instanceof Buffer;\n};\n\nmodule.exports = isBuffer;\n\n},{\"./_root\":176,\"./constant\":185}],199:[function(require,module,exports){\nvar isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isFunction = require('./isFunction'),\n    isString = require('./isString');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty collection or object. A value is considered\n * empty if it's an `arguments` object, array, string, or jQuery-like collection\n * with a length of `0` or has no own enumerable properties.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || isString(value) ||\n        isFunction(value.splice) || isArguments(value))) {\n    return !value.length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n\n},{\"./isArguments\":194,\"./isArray\":195,\"./isArrayLike\":196,\"./isFunction\":200,\"./isString\":208}],200:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\nmodule.exports = isFunction;\n\n},{\"./isObject\":204}],201:[function(require,module,exports){\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n},{}],202:[function(require,module,exports){\nvar isFunction = require('./isFunction'),\n    isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns). */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(funcToString.call(value));\n  }\n  return isObjectLike(value) &&\n    (isHostObject(value) ? reIsNative : reIsHostCtor).test(value);\n}\n\nmodule.exports = isNative;\n\n},{\"./_isHostObject\":160,\"./isFunction\":200,\"./isObjectLike\":205}],203:[function(require,module,exports){\nvar isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && objectToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n\n},{\"./isObjectLike\":205}],204:[function(require,module,exports){\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n},{}],205:[function(require,module,exports){\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],206:[function(require,module,exports){\nvar isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n\n},{\"./_isHostObject\":160,\"./isObjectLike\":205}],207:[function(require,module,exports){\nvar isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nfunction isRegExp(value) {\n  return isObject(value) && objectToString.call(value) == regexpTag;\n}\n\nmodule.exports = isRegExp;\n\n},{\"./isObject\":204}],208:[function(require,module,exports){\nvar isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n\n},{\"./isArray\":195,\"./isObjectLike\":205}],209:[function(require,module,exports){\nvar isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n\n},{\"./isObjectLike\":205}],210:[function(require,module,exports){\nvar isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n\n},{\"./isLength\":201,\"./isObjectLike\":205}],211:[function(require,module,exports){\nvar createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` through `iteratee`. The corresponding value\n * of each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  result[key] = value;\n});\n\nmodule.exports = keyBy;\n\n},{\"./_createAggregator\":138}],212:[function(require,module,exports){\nvar baseHas = require('./_baseHas'),\n    baseKeys = require('./_baseKeys'),\n    indexKeys = require('./_indexKeys'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  var isProto = isPrototype(object);\n  if (!(isProto || isArrayLike(object))) {\n    return baseKeys(object);\n  }\n  var indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  for (var key in object) {\n    if (baseHas(object, key) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(isProto && key == 'constructor')) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keys;\n\n},{\"./_baseHas\":102,\"./_baseKeys\":109,\"./_indexKeys\":155,\"./_isIndex\":161,\"./_isPrototype\":165,\"./isArrayLike\":196}],213:[function(require,module,exports){\nvar baseKeysIn = require('./_baseKeysIn'),\n    indexKeys = require('./_indexKeys'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  var index = -1,\n      isProto = isPrototype(object),\n      props = baseKeysIn(object),\n      propsLength = props.length,\n      indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if (!(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n\n},{\"./_baseKeysIn\":110,\"./_indexKeys\":155,\"./_isIndex\":161,\"./_isPrototype\":165}],214:[function(require,module,exports){\n/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n\n},{}],215:[function(require,module,exports){\nvar arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `curry`, `curryRight`, `drop`, `dropRight`, `every`, `fill`,\n * `invert`, `parseInt`, `random`, `range`, `rangeRight`, `slice`, `some`,\n * `sortBy`, `take`, `takeRight`, `template`, `trim`, `trimEnd`, `trimStart`,\n * and `words`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n\n},{\"./_arrayMap\":77,\"./_baseIteratee\":108,\"./_baseMap\":111,\"./isArray\":195}],216:[function(require,module,exports){\nvar baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable properties of source objects into the destination\n * object. Source properties that resolve to `undefined` are skipped if a\n * destination value exists. Array and plain object properties are merged\n * recursively.Other objects and value types are overridden by assignment.\n * Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var users = {\n *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n * };\n *\n * var ages = {\n *   'data': [{ 'age': 36 }, { 'age': 40 }]\n * };\n *\n * _.merge(users, ages);\n * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n\n},{\"./_baseMerge\":114,\"./_createAssigner\":139}],217:[function(require,module,exports){\nvar baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n\n},{\"./_baseProperty\":116,\"./_basePropertyDeep\":117,\"./_isKey\":163}],218:[function(require,module,exports){\nvar arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` through `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n\n},{\"./_arrayReduce\":79,\"./_baseEach\":95,\"./_baseIteratee\":108,\"./_baseReduce\":118,\"./isArray\":195}],219:[function(require,module,exports){\nvar apply = require('./_apply'),\n    toInteger = require('./toInteger');\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = rest;\n\n},{\"./_apply\":72,\"./toInteger\":221}],220:[function(require,module,exports){\nvar baseCastPath = require('./_baseCastPath'),\n    get = require('./get'),\n    isFunction = require('./isFunction'),\n    isKey = require('./_isKey'),\n    parent = require('./_parent');\n\n/**\n * This method is like `_.get` except that if the resolved value is a function\n * it's invoked with the `this` binding of its parent object and its result\n * is returned.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to resolve.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n *\n * _.result(object, 'a[0].b.c1');\n * // => 3\n *\n * _.result(object, 'a[0].b.c2');\n * // => 4\n *\n * _.result(object, 'a[0].b.c3', 'default');\n * // => 'default'\n *\n * _.result(object, 'a[0].b.c3', _.constant('default'));\n * // => 'default'\n */\nfunction result(object, path, defaultValue) {\n  if (!isKey(path, object)) {\n    path = baseCastPath(path);\n    var result = get(object, path);\n    object = parent(object, path);\n  } else {\n    result = object == null ? undefined : object[path];\n  }\n  if (result === undefined) {\n    result = defaultValue;\n  }\n  return isFunction(result) ? result.call(object) : result;\n}\n\nmodule.exports = result;\n\n},{\"./_baseCastPath\":91,\"./_isKey\":163,\"./_parent\":175,\"./get\":191,\"./isFunction\":200}],221:[function(require,module,exports){\nvar toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\nmodule.exports = toInteger;\n\n},{\"./toNumber\":222}],222:[function(require,module,exports){\nvar isFunction = require('./isFunction'),\n    isObject = require('./isObject');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n\n},{\"./isFunction\":200,\"./isObject\":204}],223:[function(require,module,exports){\nvar baseToPairs = require('./_baseToPairs'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable key-value pairs for `object` which\n * can be consumed by `_.fromPairs`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.toPairs(new Foo);\n * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n */\nfunction toPairs(object) {\n  return baseToPairs(object, keys(object));\n}\n\nmodule.exports = toPairs;\n\n},{\"./_baseToPairs\":121,\"./keys\":212}],224:[function(require,module,exports){\nvar copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable\n * properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n\n},{\"./_copyObject\":135,\"./keysIn\":213}],225:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (value == null) {\n    return '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toString;\n\n},{\"./_Symbol\":67,\"./isSymbol\":209}],226:[function(require,module,exports){\nvar baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = values;\n\n},{\"./_baseValues\":123,\"./keys\":212}],227:[function(require,module,exports){\n/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n(function (root, definition) {\r\n    \"use strict\";\r\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\r\n        module.exports = definition();\r\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\r\n        define(definition);\r\n    } else {\r\n        root.log = definition();\r\n    }\r\n}(this, function () {\r\n    \"use strict\";\r\n    var noop = function() {};\r\n    var undefinedType = \"undefined\";\r\n\r\n    function realMethod(methodName) {\r\n        if (typeof console === undefinedType) {\r\n            return false; // We can't build a real method without a console to log to\r\n        } else if (console[methodName] !== undefined) {\r\n            return bindMethod(console, methodName);\r\n        } else if (console.log !== undefined) {\r\n            return bindMethod(console, 'log');\r\n        } else {\r\n            return noop;\r\n        }\r\n    }\r\n\r\n    function bindMethod(obj, methodName) {\r\n        var method = obj[methodName];\r\n        if (typeof method.bind === 'function') {\r\n            return method.bind(obj);\r\n        } else {\r\n            try {\r\n                return Function.prototype.bind.call(method, obj);\r\n            } catch (e) {\r\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n                return function() {\r\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // these private functions always need `this` to be set properly\r\n\r\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n        return function () {\r\n            if (typeof console !== undefinedType) {\r\n                replaceLoggingMethods.call(this, level, loggerName);\r\n                this[methodName].apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    function replaceLoggingMethods(level, loggerName) {\r\n        /*jshint validthis:true */\r\n        for (var i = 0; i < logMethods.length; i++) {\r\n            var methodName = logMethods[i];\r\n            this[methodName] = (i < level) ?\r\n                noop :\r\n                this.methodFactory(methodName, level, loggerName);\r\n        }\r\n    }\r\n\r\n    function defaultMethodFactory(methodName, level, loggerName) {\r\n        /*jshint validthis:true */\r\n        return realMethod(methodName) ||\r\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n    }\r\n\r\n    var logMethods = [\r\n        \"trace\",\r\n        \"debug\",\r\n        \"info\",\r\n        \"warn\",\r\n        \"error\"\r\n    ];\r\n\r\n    function Logger(name, defaultLevel, factory) {\r\n      var self = this;\r\n      var currentLevel;\r\n      var storageKey = \"loglevel\";\r\n      if (name) {\r\n        storageKey += \":\" + name;\r\n      }\r\n\r\n      function persistLevelIfPossible(levelNum) {\r\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\r\n          // Use localStorage if available\r\n          try {\r\n              window.localStorage[storageKey] = levelName;\r\n              return;\r\n          } catch (ignore) {}\r\n\r\n          // Use session cookie as fallback\r\n          try {\r\n              window.document.cookie =\r\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n          } catch (ignore) {}\r\n      }\r\n\r\n      function getPersistedLevel() {\r\n          var storedLevel;\r\n\r\n          try {\r\n              storedLevel = window.localStorage[storageKey];\r\n          } catch (ignore) {}\r\n\r\n          if (typeof storedLevel === undefinedType) {\r\n              try {\r\n                  var cookie = window.document.cookie;\r\n                  var location = cookie.indexOf(\r\n                      encodeURIComponent(storageKey) + \"=\");\r\n                  if (location) {\r\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n                  }\r\n              } catch (ignore) {}\r\n          }\r\n\r\n          // If the stored level is not valid, treat it as if nothing was stored.\r\n          if (self.levels[storedLevel] === undefined) {\r\n              storedLevel = undefined;\r\n          }\r\n\r\n          return storedLevel;\r\n      }\r\n\r\n      /*\r\n       *\r\n       * Public API\r\n       *\r\n       */\r\n\r\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n          \"ERROR\": 4, \"SILENT\": 5};\r\n\r\n      self.methodFactory = factory || defaultMethodFactory;\r\n\r\n      self.getLevel = function () {\r\n          return currentLevel;\r\n      };\r\n\r\n      self.setLevel = function (level, persist) {\r\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n              level = self.levels[level.toUpperCase()];\r\n          }\r\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n              currentLevel = level;\r\n              if (persist !== false) {  // defaults to true\r\n                  persistLevelIfPossible(level);\r\n              }\r\n              replaceLoggingMethods.call(self, level, name);\r\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n                  return \"No console available for logging\";\r\n              }\r\n          } else {\r\n              throw \"log.setLevel() called with invalid level: \" + level;\r\n          }\r\n      };\r\n\r\n      self.setDefaultLevel = function (level) {\r\n          if (!getPersistedLevel()) {\r\n              self.setLevel(level, false);\r\n          }\r\n      };\r\n\r\n      self.enableAll = function(persist) {\r\n          self.setLevel(self.levels.TRACE, persist);\r\n      };\r\n\r\n      self.disableAll = function(persist) {\r\n          self.setLevel(self.levels.SILENT, persist);\r\n      };\r\n\r\n      // Initialize with the right level\r\n      var initialLevel = getPersistedLevel();\r\n      if (initialLevel == null) {\r\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n      }\r\n      self.setLevel(initialLevel, false);\r\n    }\r\n\r\n    /*\r\n     *\r\n     * Package-level API\r\n     *\r\n     */\r\n\r\n    var defaultLogger = new Logger();\r\n\r\n    var _loggersByName = {};\r\n    defaultLogger.getLogger = function getLogger(name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n        }\r\n\r\n        var logger = _loggersByName[name];\r\n        if (!logger) {\r\n          logger = _loggersByName[name] = new Logger(\r\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n        }\r\n        return logger;\r\n    };\r\n\r\n    // Grab the current global log variable in case of overwrite\r\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n    defaultLogger.noConflict = function() {\r\n        if (typeof window !== undefinedType &&\r\n               window.log === defaultLogger) {\r\n            window.log = _log;\r\n        }\r\n\r\n        return defaultLogger;\r\n    };\r\n\r\n    return defaultLogger;\r\n}));\r\n\n},{}],228:[function(require,module,exports){\n(function (process){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n}).call(this,require('_process'))\n\n},{\"_process\":229}],229:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],230:[function(require,module,exports){\n(function (process){\nmodule.exports = process.env.PROMISE_QUEUE_COVERAGE ?\n    require('./lib-cov') :\n    require('./lib');\n\n}).call(this,require('_process'))\n\n},{\"./lib\":232,\"./lib-cov\":231,\"_process\":229}],231:[function(require,module,exports){\n\n},{}],232:[function(require,module,exports){\n/* global define, Promise */\n(function (root, factory) {\n    'use strict';\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\n        // CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else {\n        // Browser globals\n        root.Queue = factory();\n    }\n})\n(this, function () {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var LocalPromise = typeof Promise !== 'undefined' ? Promise : function () {\n        return {\n            then: function () {\n                throw new Error('Queue.configure() before use Queue');\n            }\n        };\n    };\n\n    var noop = function () {};\n\n    /**\n     * @param {*} value\n     * @returns {LocalPromise}\n     */\n    var resolveWith = function (value) {\n        if (value && typeof value.then === 'function') {\n            return value;\n        }\n\n        return new LocalPromise(function (resolve) {\n            resolve(value);\n        });\n    };\n\n    /**\n     * It limits concurrently executed promises\n     *\n     * @param {Number} [maxPendingPromises=Infinity] max number of concurrently executed promises\n     * @param {Number} [maxQueuedPromises=Infinity]  max number of queued promises\n     * @constructor\n     *\n     * @example\n     *\n     * var queue = new Queue(1);\n     *\n     * queue.add(function () {\n     *     // resolve of this promise will resume next request\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     *\n     * queue.add(function () {\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * // This request will be paused\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     */\n    function Queue(maxPendingPromises, maxQueuedPromises) {\n        this.pendingPromises = 0;\n        this.maxPendingPromises = typeof maxPendingPromises !== 'undefined' ? maxPendingPromises : Infinity;\n        this.maxQueuedPromises = typeof maxQueuedPromises !== 'undefined' ? maxQueuedPromises : Infinity;\n        this.queue = [];\n    }\n\n    /**\n     * Defines promise promiseFactory\n     * @param {Function} GlobalPromise\n     */\n    Queue.configure = function (GlobalPromise) {\n        LocalPromise = GlobalPromise;\n    };\n\n    /**\n     * @param {Function} promiseGenerator\n     * @return {LocalPromise}\n     */\n    Queue.prototype.add = function (promiseGenerator) {\n        var self = this;\n        return new LocalPromise(function (resolve, reject, notify) {\n            // Do not queue to much promises\n            if (self.queue.length >= self.maxQueuedPromises) {\n                reject(new Error('Queue limit reached'));\n                return;\n            }\n\n            // Add to queue\n            self.queue.push({\n                promiseGenerator: promiseGenerator,\n                resolve: resolve,\n                reject: reject,\n                notify: notify || noop\n            });\n\n            self._dequeue();\n        });\n    };\n\n    /**\n     * Number of simultaneously running promises (which are resolving)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getPendingLength = function () {\n        return this.pendingPromises;\n    };\n\n    /**\n     * Number of queued promises (which are waiting)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getQueueLength = function () {\n        return this.queue.length;\n    };\n\n    /**\n     * @returns {boolean} true if first item removed from queue\n     * @private\n     */\n    Queue.prototype._dequeue = function () {\n        var self = this;\n        if (this.pendingPromises >= this.maxPendingPromises) {\n            return false;\n        }\n\n        // Remove from queue\n        var item = this.queue.shift();\n        if (!item) {\n            return false;\n        }\n\n        try {\n            this.pendingPromises++;\n\n            resolveWith(item.promiseGenerator())\n            // Forward all stuff\n                .then(function (value) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should pass values\n                    item.resolve(value);\n                    self._dequeue();\n                }, function (err) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should not mask errors\n                    item.reject(err);\n                    self._dequeue();\n                }, function (message) {\n                    // It should pass notifications\n                    item.notify(message);\n                });\n        } catch (err) {\n            self.pendingPromises--;\n            item.reject(err);\n            self._dequeue();\n\n        }\n\n        return true;\n    };\n\n    return Queue;\n});\n\n},{}],233:[function(require,module,exports){\n(function (global){\n/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],234:[function(require,module,exports){\n'use strict';\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n\n},{\"./parse\":235,\"./stringify\":236}],235:[function(require,module,exports){\n'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000,\n    strictNullHandling: false,\n    plainObjects: false,\n    allowPrototypes: false,\n    allowDots: false\n};\n\ninternals.parseValues = function (str, options) {\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n\n            if (options.strictNullHandling) {\n                obj[Utils.decode(part)] = null;\n            }\n        } else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                obj[key] = [].concat(obj[key]).concat(val);\n            } else {\n                obj[key] = val;\n            }\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseObject = function (chain, val, options) {\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj;\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    } else {\n        obj = options.plainObjects ? Object.create(null) : {};\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        if (\n            !isNaN(index) &&\n            root !== cleanRoot &&\n            String(index) === cleanRoot &&\n            index >= 0 &&\n            (options.parseArrays && index <= options.arrayLimit)\n        ) {\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        } else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseKeys = function (givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^\\.\\[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1])) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1].replace(/\\[|\\]/g, ''))) {\n            if (!options.allowPrototypes) {\n                continue;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : internals.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : internals.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : internals.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n\n    if (\n        str === '' ||\n        str === null ||\n        typeof str === 'undefined'\n    ) {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj, options);\n    }\n\n    return Utils.compact(obj);\n};\n\n},{\"./utils\":237}],236:[function(require,module,exports){\n'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix) {\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix) {\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\ninternals.stringify = function (object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (Utils.isBuffer(obj)) {\n        obj = String(obj);\n    } else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        } else {\n            values = values.concat(internals.stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n    }\n\n    return keys.join(delimiter);\n};\n\n},{\"./utils\":237}],237:[function(require,module,exports){\n'use strict';\n\nvar hexTable = (function () {\n    var array = new Array(256);\n    for (var i = 0; i < 256; ++i) {\n        array[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();\n    }\n\n    return array;\n}());\n\nexports.arrayToObject = function (source, options) {\n    var obj = options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nexports.merge = function (target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            target[source] = true;\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = exports.arrayToObject(target, options);\n    }\n\n\treturn Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (Object.prototype.hasOwnProperty.call(acc, key)) {\n            acc[key] = exports.merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n\t\treturn acc;\n    }, mergeTarget);\n};\n\nexports.decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += (hexTable[0xF0 | (c >> 18)] + hexTable[0x80 | ((c >> 12) & 0x3F)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, references) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n\n    var refs = references || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0; i < obj.length; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (var j = 0; j < keys.length; ++j) {\n        var key = keys[j];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\nexports.isRegExp = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nexports.isBuffer = function (obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\n},{}],238:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n},{}],239:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n},{}],240:[function(require,module,exports){\n'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n},{\"./decode\":238,\"./encode\":239}],241:[function(require,module,exports){\n/*\n * Sift 3.x\n *\n * Copryright 2015, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\n(function() {\n\n  'use strict';\n\n  /**\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   */\n\n  function isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n\n  /**\n   */\n\n  function comparable(value) {\n    if (value instanceof Date) {\n      return value.getTime();\n    } else if (value instanceof Array) {\n      return value.map(comparable);\n    } else {\n      return value;\n    }\n  }\n\n  function get(obj, key) {\n    if (obj.get) return obj.get(key);\n    return obj[key];\n  }\n\n  /**\n   */\n\n  function or(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (validator(a, get(b,i))) return true;\n      return false;\n    }\n  }\n\n  /**\n   */\n\n  function and(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (!validator(a, get(b, i))) return false;\n      return true;\n    };\n  }\n\n  function validate(validator, b) {\n    return validator.v(validator.a, b);\n  }\n\n\n  var operator = {\n\n    /**\n     */\n\n    $eq: or(function(a, b) {\n      return a(b);\n    }),\n\n    /**\n     */\n\n    $ne: and(function(a, b) {\n      return !a(b);\n    }),\n\n    /**\n     */\n\n    $or: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return true;\n      return false;\n    },\n\n    /**\n     */\n\n    $gt: or(function(a, b) {\n      return sift.compare(comparable(b), a) > 0;\n    }),\n\n    /**\n     */\n\n    $gte: or(function(a, b) {\n      return sift.compare(comparable(b), a) >= 0;\n    }),\n\n    /**\n     */\n\n    $lt: or(function(a, b) {\n      return sift.compare(comparable(b), a) < 0;\n    }),\n\n    /**\n     */\n\n    $lte: or(function(a, b) {\n      return sift.compare(comparable(b), a) <= 0;\n    }),\n\n    /**\n     */\n\n    $mod: or(function(a, b) {\n      return b % a[0] == a[1];\n    }),\n\n    /**\n     */\n\n    $in: function(a, b) {\n\n      if (b instanceof Array) {\n        for (var i = b.length; i--;) {\n          if (~a.indexOf(comparable(get(b, i)))) return true;\n        }\n      } else {\n        return !!~a.indexOf(comparable(b));\n      }\n\n      return false;\n    },\n\n    /**\n     */\n\n    $nin: function(a, b) {\n      return !operator.$in(a, b);\n    },\n\n    /**\n     */\n\n    $not: function(a, b) {\n      return !validate(a, b);\n    },\n\n    /**\n     */\n\n    $type: function(a, b) {\n      return b != void 0 ? b instanceof a || b.constructor == a : false;\n     },\n\n    /**\n     */\n\n    $all: function(a, b) {\n      if (!b) b = [];\n      for (var i = a.length; i--;) {\n        if (!~comparable(b).indexOf(get(a, i))) return false;\n      }\n      return true;\n    },\n\n    /**\n     */\n\n    $size: function(a, b) {\n      return b ? a === b.length : false;\n    },\n\n    /**\n     */\n\n    $nor: function(a, b) {\n      // todo - this suffice? return !operator.$in(a)\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $and: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (!validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $regex: or(function(a, b) {\n      return typeof b === 'string' && a.test(b);\n    }),\n\n    /**\n     */\n\n    $where: function(a, b) {\n      return a.call(b, b);\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a, b) {\n      if (isArray(b)) return !!~search(b, a);\n      return validate(a, b);\n    },\n\n    /**\n     */\n\n    $exists: function(a, b) {\n      return (b != void 0) === a;\n    }\n  };\n\n  /**\n   */\n\n  var prepare = {\n\n    /**\n     */\n\n    $eq: function(a) {\n\n      if (a instanceof RegExp) {\n        return function(b) {\n          return typeof b === 'string' && a.test(b);\n        };\n      } else if (a instanceof Function) {\n        return a;\n      } else if (isArray(a) && !a.length) {\n        // Special case of a == []\n        return function(b) {\n          return (isArray(b) && !b.length);\n        };\n      } else if (a === null){\n        return function(b){\n          //will match both null and undefined\n          return b == null;\n        }\n      }\n\n      return function(b) {\n        return sift.compare(comparable(b), a) === 0;\n      };\n    },\n\n    /**\n     */\n\n    $ne: function(a) {\n      return prepare.$eq(a);\n    },\n\n    /**\n     */\n\n    $and: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $or: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $nor: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $not: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $regex: function(a, query) {\n      return new RegExp(a, query.$options);\n    },\n\n    /**\n     */\n\n    $where: function(a) {\n      return typeof a === 'string' ? new Function('obj', 'return ' + a) : a;\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $exists: function(a) {\n      return !!a;\n    }\n  };\n\n  /**\n   */\n\n  function search(array, validator) {\n\n    for (var i = 0; i < array.length; i++) {\n      if (validate(validator, get(array, i))) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   */\n\n  function createValidator(a, validate) {\n    return { a: a, v: validate };\n  }\n\n  /**\n   */\n\n  function nestedValidator(a, b) {\n    var values  = [];\n    findValues(b, a.k, 0, values);\n\n    if (values.length === 1) {\n      return validate(a.nv, values[0]);\n    }\n\n    return !!~search(values, a.nv);\n  }\n\n  /**\n   */\n\n  function findValues(current, keypath, index, values) {\n\n    if (index === keypath.length || current == void 0) {\n      values.push(current);\n      return;\n    }\n\n    var k = get(keypath, index);\n\n    // ensure that if current is an array, that the current key\n    // is NOT an array index. This sort of thing needs to work:\n    // sift({'foo.0':42}, [{foo: [42]}]);\n    if (isArray(current) && isNaN(Number(k))) {\n      for (var i = 0, n = current.length; i < n; i++) {\n        findValues(get(current, i), keypath, index, values);\n      }\n    } else {\n      findValues(get(current, k), keypath, index + 1, values);\n    }\n  }\n\n  /**\n   */\n\n  function createNestedValidator(keypath, a) {\n    return { a: { k: keypath, nv: a }, v: nestedValidator };\n  }\n\n  /**\n   * flatten the query\n   */\n\n  function parse(query) {\n    query = comparable(query);\n\n    if (!query || (query.constructor.toString() !== 'Object' &&\n        query.constructor.toString().replace(/\\n/g,'').replace(/ /g, '') !== 'functionObject(){[nativecode]}')) { // cross browser support\n      query = { $eq: query };\n    }\n\n    var validators = [];\n\n    for (var key in query) {\n      var a = query[key];\n\n      if (key === '$options') continue;\n\n      if (operator[key]) {\n        if (prepare[key]) a = prepare[key](a, query);\n        validators.push(createValidator(comparable(a), operator[key]));\n      } else {\n\n        if (key.charCodeAt(0) === 36) {\n          throw new Error('Unknown operation ' + key);\n        }\n\n        validators.push(createNestedValidator(key.split('.'), parse(a)));\n      }\n    }\n\n    return validators.length === 1 ? validators[0] : createValidator(validators, operator.$and);\n  }\n\n  /**\n   */\n\n  function createRootValidator(query, getter) {\n    var validator = parse(query);\n    if (getter) {\n      validator = {\n        a: validator,\n        v: function(a, b) {\n          return validate(a, getter(b));\n        }\n      };\n    }\n    return validator;\n  }\n\n  /**\n   */\n\n  function sift(query, array, getter) {\n\n    if (isFunction(array)) {\n      getter = array;\n      array  = void 0;\n    }\n\n    var validator = createRootValidator(query, getter);\n\n    function filter(b) {\n      return validate(validator, b);\n    }\n\n    if (array) {\n      return array.filter(filter);\n    }\n\n    return filter;\n  }\n\n  /**\n   */\n\n  sift.use = function(plugin) {\n    if (isFunction(plugin)) return plugin(sift);\n    for (var key in plugin) {\n      if (key.charCodeAt(0) === 36) operator[key] = plugin[key];\n    }\n  };\n\n  /**\n   */\n\n  sift.indexOf = function(query, array, getter) {\n    return search(array, createRootValidator(query, getter));\n  };\n\n  /**\n   */\n\n  sift.compare = function(a, b) {\n    if(a===b) return 0;\n    if(typeof a === typeof b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n    }\n  };\n\n  /* istanbul ignore next */\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = sift;\n  }\n\n  if (typeof window !== 'undefined') {\n    window.sift = sift;\n  }\n})();\n\n},{}],242:[function(require,module,exports){\n/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n\n},{}],243:[function(require,module,exports){\n// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n\n},{}],244:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n},{\"./util\":245,\"punycode\":233,\"querystring\":240}],245:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n},{}],246:[function(require,module,exports){\nmodule.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n},{}],247:[function(require,module,exports){\n(function (process,global){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./support/isBuffer\":246,\"_process\":229,\"inherits\":14}],248:[function(require,module,exports){\nmodule.exports={\n  \"name\": \"kinvey-angular-sdk\",\n  \"version\": \"3.0.0-beta.12\",\n  \"description\": \"Kinvey JavaScript SDK for AngularJS applications.\",\n  \"homepage\": \"http://www.kinvey.com\",\n  \"bugs\": {\n    \"url\": \"http://support.kinvey.com\"\n  },\n  \"licenses\": [\n    {\n      \"type\": \"Apache-2.0\",\n      \"url\": \"https://raw.github.com/Kinvey/kinvey-angular-sdk/master/LICENSE\"\n    }\n  ],\n  \"author\": \"Kinvey, Inc.\",\n  \"contributors\": [\n    \"Thomas Conner <thomas@kinvey.com>\"\n  ],\n  \"main\": \"./dist/kinvey.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git@github.com:Kinvey/kinvey-angular-sdk\"\n  },\n  \"scripts\": {},\n  \"dependencies\": {\n    \"kinvey-javascript-sdk-core\": \"3.0.0-beta.13\",\n    \"lodash\": \"^4.3.0\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"6.0.0-beta.6\",\n    \"babel-preset-es2015\": \"^6.0.0\",\n    \"babel-preset-stage-2\": \"^6.0.15\",\n    \"babelify\": \"^7.2.0\",\n    \"browserify\": \"^13.0.0\",\n    \"del\": \"^2.0.2\",\n    \"dotenv\": \"^2.0.0\",\n    \"envify\": \"^3.4.0\",\n    \"eslint-config-airbnb\": \"^6.0.0\",\n    \"eslint-plugin-react\": \"^4.2.3\",\n    \"exorcist\": \"^0.4.0\",\n    \"gulp\": \"^3.9.0\",\n    \"gulp-bump\": \"^1.0.0\",\n    \"gulp-eslint\": \"^2.0.0\",\n    \"gulp-git\": \"^1.7.0\",\n    \"gulp-if\": \"^2.0.0\",\n    \"gulp-plumber\": \"^1.0.1\",\n    \"gulp-prompt\": \"^0.1.2\",\n    \"gulp-rename\": \"^1.2.2\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.1\",\n    \"gulp-util\": \"^3.0.6\",\n    \"run-sequence\": \"^1.1.5\",\n    \"semver-regex\": \"^1.0.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"vinyl-transform\": \"^1.0.0\"\n  },\n  \"engines\": {\n    \"node\": \">=4.0\"\n  },\n  \"keywords\": [\n    \"Kinvey\",\n    \"JavaScript\",\n    \"Angular\"\n  ]\n}\n\n},{}],249:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DeviceAdapter = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _package = require('../package.json');\n\nvar _package2 = _interopRequireDefault(_package);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DeviceAdapter = exports.DeviceAdapter = function () {\n  function DeviceAdapter() {\n    _classCallCheck(this, DeviceAdapter);\n  }\n\n  _createClass(DeviceAdapter, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      var userAgent = global.navigator.userAgent.toLowerCase();\n      var rChrome = /(chrome)\\/([\\w]+)/;\n      var rFirefox = /(firefox)\\/([\\w.]+)/;\n      var rIE = /(msie) ([\\w.]+)/i;\n      var rOpera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/;\n      var rSafari = /(safari)\\/([\\w.]+)/;\n      var browser = rChrome.exec(userAgent) || rFirefox.exec(userAgent) || rIE.exec(userAgent) || rOpera.exec(userAgent) || rSafari.exec(userAgent) || [];\n\n      return {\n        environment: 'angular',\n        library: {\n          name: 'angular',\n          version: global.angular.version.full\n        },\n        os: {\n          name: browser[1],\n          version: browser[2]\n        },\n        sdk: {\n          name: _package2.default.name,\n          version: _package2.default.version\n        }\n      };\n    }\n  }]);\n\n  return DeviceAdapter;\n}();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../package.json\":248}],250:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HttpMiddleware = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _middleware = require('kinvey-javascript-sdk-core/src/rack/middleware');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar $injector = angular.injector(['ng']);\n\nvar HttpMiddleware = exports.HttpMiddleware = function (_KinveyMiddleware) {\n  _inherits(HttpMiddleware, _KinveyMiddleware);\n\n  function HttpMiddleware() {\n    _classCallCheck(this, HttpMiddleware);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(HttpMiddleware).call(this, 'Kinvey Angular Http Middleware'));\n\n    _this.$http = $injector.get('$http');\n    return _this;\n  }\n\n  _createClass(HttpMiddleware, [{\n    key: 'handle',\n    value: function handle(request) {\n      var _this2 = this;\n\n      return _get(Object.getPrototypeOf(HttpMiddleware.prototype), 'handle', this).call(this, request).then(function () {\n        var promise = _this2.$http({\n          url: request.url,\n          method: request.method,\n          headers: request.headers,\n          data: request.data\n        }).then(function (response) {\n          request.response = {\n            statusCode: response.status,\n            headers: response.headers(),\n            data: response.data\n          };\n\n          return request;\n        }).catch(function (response) {\n          request.response = {\n            statusCode: response.status,\n            headers: response.headers(),\n            data: response.data\n          };\n\n          return request;\n        });\n        return promise;\n      });\n    }\n  }]);\n\n  return HttpMiddleware;\n}(_middleware.KinveyMiddleware);\n\n},{\"kinvey-javascript-sdk-core/src/rack/middleware\":29}],251:[function(require,module,exports){\n'use strict';\n\nvar _provider = require('./provider');\n\nvar ngKinvey = angular.module('kinvey', []);\nngKinvey.provider('$kinvey', _provider.KinveyProvider);\n\nvar Kinvey = {\n  name: 'kinvey'\n};\n\nmodule.exports = Kinvey;\n\n},{\"./provider\":253}],252:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PopupAdapter = exports.PopupAdapter = function () {\n  function PopupAdapter() {\n    _classCallCheck(this, PopupAdapter);\n  }\n\n  _createClass(PopupAdapter, [{\n    key: 'open',\n    value: function open() {\n      var _this = this;\n\n      var promise = new Promise(function (resolve, reject) {\n        _this.popup = global.open(_this.url, '_blank', 'toolbar=no,location=no');\n\n        if (_this.popup) {\n          _this.interval = setInterval(function () {\n            if (_this.popup.closed) {\n              _this.closeHandler();\n            } else {\n              try {\n                _this.loadHandler({\n                  url: _this.popup.location.href\n                });\n              } catch (e) {}\n            }\n          }, 100);\n        } else {\n          return reject(new Error('The popup was blocked.'));\n        }\n\n        return resolve(_this);\n      });\n\n      return promise;\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      var _this2 = this;\n\n      var promise = new Promise(function (resolve) {\n        _this2.popup.close();\n        resolve();\n      });\n      return promise;\n    }\n  }, {\n    key: 'loadHandler',\n    value: function loadHandler(event) {\n      this.emit('loaded', event.url);\n    }\n  }, {\n    key: 'clickHandler',\n    value: function clickHandler() {\n      this.close();\n    }\n  }, {\n    key: 'closeHandler',\n    value: function closeHandler() {\n      clearTimeout(this.interval);\n      this.emit('closed');\n    }\n  }]);\n\n  return PopupAdapter;\n}();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],253:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KinveyProvider = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _kinveyJavascriptSdkCore = require('kinvey-javascript-sdk-core');\n\nvar _rack = require('kinvey-javascript-sdk-core/src/rack/rack');\n\nvar _serialize = require('kinvey-javascript-sdk-core/src/rack/middleware/serialize');\n\nvar _http = require('./http');\n\nvar _popup = require('kinvey-javascript-sdk-core/src/utils/popup');\n\nvar _popup2 = require('./popup');\n\nvar _device = require('kinvey-javascript-sdk-core/src/utils/device');\n\nvar _device2 = require('./device');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar KinveyProvider = exports.KinveyProvider = function () {\n  function KinveyProvider() {\n    _classCallCheck(this, KinveyProvider);\n\n    var networkRack = _rack.NetworkRack.sharedInstance();\n    networkRack.useAfter(_serialize.SerializeMiddleware, new _http.HttpMiddleware());\n\n    _device.Device.use(new _device2.DeviceAdapter());\n\n    _popup.Popup.use(new _popup2.PopupAdapter());\n  }\n\n  _createClass(KinveyProvider, [{\n    key: 'init',\n    value: function init() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return _kinveyJavascriptSdkCore.Kinvey.init(options);\n    }\n  }, {\n    key: '$get',\n    value: function $get() {\n      return _kinveyJavascriptSdkCore.Kinvey;\n    }\n  }]);\n\n  return KinveyProvider;\n}();\n\n},{\"./device\":249,\"./http\":250,\"./popup\":252,\"kinvey-javascript-sdk-core\":23,\"kinvey-javascript-sdk-core/src/rack/middleware/serialize\":32,\"kinvey-javascript-sdk-core/src/rack/rack\":38,\"kinvey-javascript-sdk-core/src/utils/device\":53,\"kinvey-javascript-sdk-core/src/utils/popup\":55}]},{},[251])(251)\n});\n\n","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\nvar BrowserMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","/* Add Promise.all and Promise.race implementations. */\n'use strict';\nvar isArguments = require('is-arguments');\n\nvar _call = Function.call.bind(Function.call);\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\nvar _floor = Math.floor;\nvar _abs = Math.abs;\n\nvar Symbol = global.Symbol || {};\nvar symbolIterator = Symbol.iterator || '@@iterator';\n\nvar defineProperties = function(object, map) {\n  _forEach(Object.keys(map), function(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n};\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\n// The -r variant allows specifying the receiver.\nfunction tryCatch0r(fn, receiver) {\n  try {\n    return fn.call(receiver);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch1(fn, arg1) {\n  try {\n    return fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch3(fn, arg1, arg2, arg3) {\n  try {\n    return fn(arg1, arg2, arg3);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n\nvar TypeIsObject = function(x) {\n  /* jshint eqnull:true */\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  return x != null && Object(x) === x;\n};\n\nvar ToObject = function(o, optMessage) {\n  /* jshint eqnull:true */\n  if (o == null) {\n    throw new TypeError(optMessage || 'Cannot call method on ' + o);\n  }\n  return Object(o);\n};\n\nvar IsCallable = (typeof /abc/ === 'function') ? function(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function(x) { return typeof x === 'function'; /* Much faster */};\n\nvar ToNumber = function(value) {\n  /*\n  // Implementations which implement Symbol also throw the proper TypeError\n  // if it is converted to a number.\n  if (_toString(value) === '[object Symbol]') {\n    throw new TypeError('Cannot convert a Symbol value to a number');\n  }\n  */\n  return +value;\n};\n\nvar numberIsNaN = Number.isNaN || function isNaN(value) {\n  return value !== value;\n};\n\nvar numberIsFinite = Number.isFinite || function isFinite(value) {\n  return typeof value === 'number' && global.isFinite(value);\n};\n\nvar ToInteger = function(value) {\n  var number = ToNumber(value);\n  if (numberIsNaN(number)) { return 0; }\n  if (number === 0 || !numberIsFinite(number)) { return number; }\n  return (number > 0 ? 1 : -1) * _floor(_abs(number));\n};\n\nvar ToLength = function(value) {\n  var len = ToInteger(value);\n  if (len <= 0) { return 0; } // Includes converting -0 to +0\n  if (typeof Number.MAX_SAFE_INTEGER !== 'undefined') {\n    if (len > Number.MAX_SAFE_INTEGER) { return Number.MAX_SAFE_INTEGER; }\n  }\n  return len;\n};\n\n// Stripped down value-only ArrayIterator.\nvar ArrayIterator = function(array) {\n  this.i = 0;\n  this.array = array;\n};\ndefineProperties(ArrayIterator.prototype, {\n  next: function() {\n    var i = this.i;\n    var array = this.array;\n    if (!(this instanceof ArrayIterator)) {\n      throw new TypeError('Not an ArrayIterator');\n    }\n    if (typeof array !== 'undefined') {\n      var len = Array.isArray(array) ? array.length : ToLength(array.length);\n      for (; i < len; i++) {\n        var retval = array[i];\n        this.i = i + 1;\n        return { value: retval, done: false };\n      }\n    }\n    this.array = void 0;\n    return { value: void 0, done: true };\n  },\n});\nObject.defineProperty(ArrayIterator.prototype, symbolIterator, {\n  configurable: true,\n  enumerable: false,\n  writable: true,\n  value: function() { return this; },\n});\n\nvar DEFAULT_ARRAY_ITERATOR = {};\n\nvar GetIterator = function(o, detectDefault) {\n  var itFn = GetMethod(o, symbolIterator);\n  if (!IsCallable(itFn)) {\n    // Node 0.10 compatibility.\n    if (Array.isArray(o) || isArguments(o)) {\n      return detectDefault ? DEFAULT_ARRAY_ITERATOR : new ArrayIterator(o);\n    }\n    // Better diagnostics if itFn is null or undefined\n    throw new TypeError('value is not an iterable');\n  }\n  if (detectDefault && itFn === Array.prototype[symbolIterator]) {\n    return DEFAULT_ARRAY_ITERATOR;\n  }\n  var it = _call(itFn, o);\n  if (!TypeIsObject(it)) {\n    throw new TypeError('bad iterator');\n  }\n  return it;\n};\n\nvar GetMethod = function(o, p) {\n  var func = ToObject(o)[p];\n  if (func === void 0 || func === null) {\n    return void 0;\n  }\n  if (!IsCallable(func)) {\n    throw new TypeError('Method not callable: ' + p);\n  }\n  return func;\n};\n\nvar IteratorComplete = function(iterResult) {\n  return !!(iterResult.done);\n};\n\nvar IteratorClose = function(iterator, completionIsThrow) {\n  var returnMethod = GetMethod(iterator, 'return');\n  if (returnMethod === void 0) {\n    return;\n  }\n  var innerResult, innerException;\n  innerResult = tryCatch0r(returnMethod, iterator);\n  if (innerResult === errorObj) {\n    innerException = errorObj.e;\n  }\n  if (completionIsThrow) {\n    return;\n  }\n  if (innerException) {\n    throw innerException;\n  }\n  if (!TypeIsObject(innerResult)) {\n    throw new TypeError(\"Iterator's return method returned a non-object.\");\n  }\n};\n\nvar IteratorNext0 = function(it) {\n  var result = it.next();\n  if (!TypeIsObject(result)) {\n    throw new TypeError('bad iterator');\n  }\n  return result;\n};\n\nvar IteratorStep = function(it) {\n  var result = IteratorNext0(it);\n  var done = IteratorComplete(result);\n  return done ? false : result;\n};\n\nmodule.exports = function(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n) {\n\n  // This is a common step in many Promise methods\n  var getPromiseSpecies = function(C) {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Promise is not object');\n    }\n    if (symbolSpecies !== null) {\n      var S = C[symbolSpecies];\n      if (S !== void 0 && S !== null) {\n        return S;\n      }\n    }\n    return C;\n  };\n\n  var _promiseAllResolver = function(index, values, capability, remaining) {\n    var alreadyCalled = false;\n    return function(x) {\n      if (alreadyCalled) { return; }\n      alreadyCalled = true;\n      values[index] = x;\n      if ((--remaining.count) === 0) {\n        promiseReactionResolve(capability, values);\n      }\n    };\n  };\n\n  var performPromiseAll = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var values = [];\n    var remaining = { count: 1 };\n    var next, nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; ; index++) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseAllArray = function(array, C, resultCapability) {\n    var values = new Array(array.length);\n    var remaining = { count: 1 };\n    var nextValue, rejectElement;\n    if (resultCapability.constructor === PromiseCapability) {\n      // This capability won't be returned to pool.\n      rejectElement = resultCapability.reject;\n    } else {\n      rejectElement = function(e) {\n        // Not safe to return capability to pool, since resolves are still\n        // pending.\n        promiseReactionReject(resultCapability, e, 'no free');\n      };\n    }\n    for (var index = 0; index < array.length; index++) {\n      nextValue = array[index];\n      values[index] = void 0;\n      var nextPromise = C.resolve(nextValue);\n      var resolveElement = _promiseAllResolver(\n        index, values, resultCapability, remaining\n      );\n      remaining.count++;\n      optimizePromiseThen(\n        nextPromise, resolveElement, rejectElement\n      );\n    }\n    if ((--remaining.count) === 0) {\n      promiseReactionResolve(resultCapability, values);\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  };\n\n  var performPromiseRace = function(iteratorRecord, C, resultCapability) {\n    var it = iteratorRecord.iterator;\n    var next, nextValue, nextPromise;\n    while (true) {\n      next = tryCatch1(IteratorStep, it);\n      if (next === errorObj) {\n        iteratorRecord.done = true;\n        throw errorObj.e;\n      } else if (next === false) {\n        // NOTE: If iterable has no items, resulting promise will never\n        // resolve; see:\n        // https://github.com/domenic/promises-unwrapping/issues/75\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2515\n        iteratorRecord.done = true;\n        break;\n      }\n      nextValue = next.value;\n      nextPromise = C.resolve(nextValue);\n      optimizePromiseThen(\n        nextPromise, resultCapability.resolve, resultCapability.reject\n      );\n    }\n    return resultCapability.promise;\n  };\n\n  defineProperties(Promise, {\n    all: function all(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapabilityFast(C);\n      var iterator, iteratorRecord, result, ex;\n      iterator = tryCatch2(GetIterator, iterable, true);\n      if (iterator === DEFAULT_ARRAY_ITERATOR) {\n        // Fast path\n        result = tryCatch3(performPromiseAllArray, iterable, C, capability);\n        if (result !== errorObj) {\n          return result;\n        }\n        // Not safe to return capability to pool, since there may be\n        // calls to `resolve` still pending.\n        return promiseReactionReject(capability, errorObj.e, 'no free');\n      }\n      if (iterator === errorObj) {\n        return promiseReactionReject(capability, errorObj.e);\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseAll, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      // Not safe to return capability to pool, since there may be\n      // calls to `resolve` still pending.\n      return promiseReactionReject(capability, ex, 'no free');\n    },\n\n    race: function race(iterable) {\n      var C = getPromiseSpecies(this);\n      var capability = makeCapability(C);\n      var iterator, iteratorRecord, reject, result, ex;\n      iterator = tryCatch1(GetIterator, iterable);\n      if (iterator === errorObj) {\n        reject = capability.reject;\n        reject(errorObj.e);\n        return capability.promise;\n      }\n      iteratorRecord = { iterator: iterator, done: false };\n      result = tryCatch3(performPromiseRace, iteratorRecord, C, capability);\n      if (result !== errorObj) {\n        return result;\n      }\n      ex = errorObj.e;\n      if (!iteratorRecord.done) {\n        result = tryCatch2(IteratorClose, iterator, true);\n        if (result === errorObj) {\n          ex = errorObj.e;\n        }\n      }\n      reject = capability.reject;\n      reject(ex);\n      return capability.promise;\n    },\n  });\n};\n","'use strict';\n\nvar asap = require('asap/raw');\n\n// When this is `false` we disable species support, for a little bit of\n// extra performance.\nvar supportSpecies = false;\n// When this is false we assume promise subclass constructors have no\n// side effects.\nvar strictConstructors = false;\n// When this is true, a new resolver is created for every Promise.\nvar dontReuseResolvers = false;\n// When this is true (and the engine supports it), the Promise will be a\n// true ES2015 class.  However, this currently slows the implementation down\n// by 30% since construction of ES2015 classes is unoptimized.\nvar useES2015Class = false;\n\nvar _forEach = Function.call.bind(Array.prototype.forEach);\nvar _toString = Function.call.bind(Object.prototype.toString);\n\nvar Symbol = global.Symbol || {};\nvar symbolSpecies = Symbol.species || (supportSpecies ? '@@species' : null);\n\nfunction defineProperties(object, map) {\n  _forEach(Object.keys(map), function definePropertiesForEach(name) {\n    var method = map[name];\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method,\n    });\n  });\n}\n\nvar errorObj = {e: {}};\n// Try/catch is not supported in optimizing compiler, so it is isolated.\nfunction tryCatch1(fn, arg) {\n  try {\n    return fn(arg);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\nfunction tryCatch2(fn, arg1, arg2) {\n  try {\n    return fn(arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -r variant allows specifying the receiver.\nfunction tryCatch2r(fn, receiver, arg1, arg2) {\n  try {\n    return fn.call(receiver, arg1, arg2);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n// The -n variant creates a new object.\nfunction tryCatch1n(Fn, arg1) {\n  try {\n    return new Fn(arg1);\n  } catch (e) {\n    errorObj.e = e;\n    return errorObj;\n  }\n}\n\n// Promises\n\n// Follow implementation in the ES6 spec as closely as possible, but\n// steal tricks from Bluebird for moar speed.\n// In particular, we go to great lengths to avoid allocating objects\n// and closures wherever possible in hot code.\n\nfunction TypeIsObject(x) {\n  // This is expensive when it returns false; use this function\n  // when you expect it to return true in the common case.\n  if (false) {\n    return x !== void 0 && x !== null && Object(x) === x;\n  }\n  // It turns out that !TypeIsNotObject is faster...\n  return !TypeIsNotObject(x);\n}\nfunction TypeIsNotObject(val) {\n  // This is more appropriate when TypeIsObject may return false.\n  return val === void 0 || val === null || val === true || val === false ||\n    typeof val === 'string' || typeof val === 'number' ||\n    typeof val === 'symbol'; // jshint ignore:line\n}\n\nvar IsCallable = (typeof /abc/ === 'function') ? function IsCallableSlow(x) {\n  // Some versions of IE say that typeof /abc/ === 'function'\n  return typeof x === 'function' && _toString(x) === '[object Function]';\n} : function IsCallableFast(x) { return typeof x === 'function'; };\n\n// We can't tell callables from constructors in ES5\nvar IsConstructor = IsCallable;\n\nfunction SpeciesConstructor(O, defaultConstructor) {\n  var C = O.constructor;\n  if (C === void 0) {\n    return defaultConstructor;\n  }\n  var S;\n  if (symbolSpecies === null) {\n    S = C;\n  } else {\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad constructor');\n    }\n    S = C[symbolSpecies];\n    if (S === void 0 || S === null) {\n      return defaultConstructor;\n    }\n  }\n  if (!IsConstructor(S)) {\n    throw new TypeError('Bad @@species');\n  }\n  return S;\n}\n\nfunction IsPromise(promise) {\n  if (!TypeIsObject(promise)) {\n    return false;\n  }\n  if (promise._promise_state === undefined) {\n    return false; // Uninitialized, or missing our hidden field.\n  }\n  return true;\n}\n\n// \"PromiseCapability\" in the spec is what most promise implementations\n// call a \"deferred\".\n// We're going to wrap it so that it never throws an exception.\nfunction PromiseCapability() {\n  // Declare fields of this object.\n  // (Helps with object shape optimization.)\n  var self = this;\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  this.resolver = function(resolve, reject) {\n    if (self.resolve !== void 0 || self.reject !== void 0) {\n      throw new TypeError('Bad Promise implementation!');\n    }\n    self.resolve = resolve;\n    self.reject = reject;\n  };\n}\nPromiseCapability.prototype.free = function() {\n  if (dontReuseResolvers) { return; }\n  if (this.dontReuse) { return; }\n  this.promise = void 0;\n  this.resolve = void 0;\n  this.reject = void 0;\n  freeCapabilityList.push(this);\n};\nPromiseCapability.prototype.getPromiseAndFree = function() {\n  var promise = this.promise;\n  this.free();\n  return promise;\n};\nvar freeCapabilityList = [];\n\nfunction makeCapabilityFast(C) {\n  thenFastPath = FAST_PATH_MAKE_CAP;\n  // `thenFastPath` is always reset to FAST_PATH_NONE by `makeCapability`\n  return makeCapability(C);\n}\n\nfunction makeCapability(C) {\n  if (!IsConstructor(C)) {\n    thenFastPath = FAST_PATH_NONE;\n    throw new TypeError('Bad promise constructor');\n  }\n\n  var capability;\n  if (freeCapabilityList.length) {\n    capability = freeCapabilityList.pop();\n  } else {\n    capability = new PromiseCapability();\n  }\n  if (strictConstructors &&\n      C !== Promise && !C.hasOwnProperty('noSideEffects')) {\n    capability.dontReuse = true;\n  }\n  if (thenFastPath === FAST_PATH_MAKE_CAP) {\n    thenFastPathResolver = capability.resolver;\n    capability.promise = tryCatch1n(C, thenFastPathResolver);\n    var wasFastPath = (thenFastPath === FAST_PATH_CTOR_BAILED);\n    thenFastPathResolver = null;\n    thenFastPath = FAST_PATH_NONE;\n    if (capability.promise === errorObj) {\n      capability.free();\n      throw errorObj.e;\n    }\n    if (wasFastPath) { return capability.getPromiseAndFree(); }\n  } else {\n    capability.promise = new C(capability.resolver);\n  }\n  if (!(IsCallable(capability.resolve) && IsCallable(capability.reject))) {\n    throw new TypeError('Bad promise constructor');\n  }\n  return capability;\n}\n\n// Forward declaration\nvar promisePrototypeThen;\nvar fakeRetvalFromThen = false;\n\n// Constants for Promise implementation\nvar PROMISE_IDENTITY = (function PROMISE_IDENTITY(v) { return v; });\nvar PROMISE_THROWER = (function PROMISE_THROWER(t) { throw t; });\nvar PROMISE_FAKE_CAPABILITY = new PromiseCapability();\nvar PROMISE_PENDING = 0;\nvar PROMISE_RESOLVING = 1; // PROMISE_PENDING combined with alreadyResolved\nvar PROMISE_FULFILLED = 2;\nvar PROMISE_REJECTED = 3;\n\n// States for then-fast-path\nvar FAST_PATH_NONE = 0;\nvar FAST_PATH_MAKE_CAP = 1;\nvar FAST_PATH_CTOR_BAILED = 2;\n\nvar thenFastPath = FAST_PATH_NONE;\nvar thenFastPathResolver = null;\n\nfunction promiseCheckAndResolve(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  resolvePromise(promise, value);\n  return promise;\n}\nfunction promiseCheckAndReject(promise, value) {\n  /* jshint bitwise: false */\n  if ((promise._promise_state & 3) !== PROMISE_PENDING) { return; }\n  promise._promise_state++; // Sets state to PROMISE_RESOLVING\n  rejectPromise(promise, value);\n  return promise;\n}\nfunction promiseReactionResolve(promiseCapability, handlerResult) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var resolve = promiseCapability.resolve;\n    resolve(handlerResult);\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndResolve(promiseCapability, handlerResult);\n}\nfunction promiseReactionReject(promiseCapability, handlerResult, noFree) {\n  if (promiseCapability.constructor === PromiseCapability) {\n    var reject = promiseCapability.reject;\n    reject(handlerResult);\n    if (noFree) { return promiseCapability.promise; }\n    return promiseCapability.getPromiseAndFree();\n  }\n  // Optimized case; this is a \"standard\" promise.\n  return promiseCheckAndReject(promiseCapability, handlerResult);\n}\nfunction promiseReactionJob(handler, promiseCapability, argument) {\n  var handlerResult;\n  // Encapsulate try/catch here to avoid deoptimization.\n  handlerResult = tryCatch1(handler, argument);\n  if (promiseCapability === PROMISE_FAKE_CAPABILITY) { return; }\n  if (handlerResult === errorObj) {\n    handlerResult = errorObj.e;\n    return promiseReactionReject(promiseCapability, handlerResult);\n  }\n  return promiseReactionResolve(promiseCapability, handlerResult);\n}\n\nfunction PromiseReactionJobTask() {\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n}\nPromiseReactionJobTask.prototype.call = function() {\n  promiseReactionJob(this.handler, this.capability, this.argument);\n  this.handler = null;\n  this.capability = null;\n  this.argument = null;\n  freePromiseReactionJobTasks.push(this);\n};\nvar freePromiseReactionJobTasks = [];\n\nfunction triggerPromiseReaction(handler, capability, argument) {\n  var task;\n  if (freePromiseReactionJobTasks.length) {\n    task = freePromiseReactionJobTasks.pop();\n  } else {\n    task = new PromiseReactionJobTask();\n  }\n  task.handler = handler;\n  task.capability = capability;\n  task.argument = argument;\n  asap(task);\n}\n\nfunction fulfillPromise(promise, value) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_fulfillReactions0,\n      promise._promise_reactionCapability0,\n      value);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx], promise[idx + 2], value);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = value;\n  promise._promise_state = PROMISE_FULFILLED;\n}\n\nfunction rejectPromise(promise, reason) {\n  /* jshint bitwise: false */\n  var length = promise._promise_state >>> 2;\n  if (length > 0) {\n    triggerPromiseReaction(\n      promise._promise_rejectReactions0,\n      promise._promise_reactionCapability0,\n      reason);\n    promise._promise_fulfillReactions0 = void 0;\n    promise._promise_rejectReactions0 = void 0;\n    promise._promise_reactionCapability0 = void 0;\n    if (length > 1) {\n      for (var i = 1, idx = 0; i < length; i++) {\n        triggerPromiseReaction(promise[idx + 1], promise[idx + 2], reason);\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n        promise[idx++] = void 0;\n      }\n    }\n  }\n  promise._promise_result = reason;\n  promise._promise_state = PROMISE_REJECTED;\n}\n\nfunction getThen(r) { return r.then; }\n\nfunction PromiseResolveThenableJobTask() {\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n}\nPromiseResolveThenableJobTask.prototype.call = function() {\n  promiseResolveThenableJob(this.promise, this.resolution, this.then);\n  this.promise = null;\n  this.resolution = null;\n  this.then = null;\n  freePromiseResolveThenableJobTasks.push(this);\n};\nvar freePromiseResolveThenableJobTasks = [];\n\nfunction triggerPromiseResolveThenableJob(promise, resolution, then) {\n  var task;\n  if (freePromiseResolveThenableJobTasks.length) {\n    task = freePromiseResolveThenableJobTasks.pop();\n  } else {\n    task = new PromiseResolveThenableJobTask();\n  }\n  task.promise = promise;\n  task.resolution = resolution;\n  task.then = then;\n  asap(task);\n}\n\nfunction resolvePromise(promise, resolution) {\n  if (resolution === promise) {\n    return rejectPromise(promise, new TypeError('Self resolution'));\n  }\n  if (TypeIsNotObject(resolution)) {\n    return fulfillPromise(promise, resolution);\n  }\n  var then = tryCatch1(getThen, resolution);\n  if (then === errorObj) {\n    return rejectPromise(promise, errorObj.e);\n  }\n  if (!IsCallable(then)) {\n    return fulfillPromise(promise, resolution);\n  }\n  triggerPromiseResolveThenableJob(promise, resolution, then);\n}\n\nfunction promiseResolveThenableJob(promise, thenable, then) {\n  // Inlined copy of createResolvingFunctions(promise)\n  var alreadyResolved = false;\n  var resolve = function promiseResolveThenableJobResolve(resolution) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    resolvePromise(promise, resolution);\n  };\n  var reject = function promiseResolveThenableJobReject(reason) {\n    if (alreadyResolved) { return; }\n    alreadyResolved = true;\n    return rejectPromise(promise, reason);\n  };\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n  }\n  var value = tryCatch2r(then, thenable, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n}\n\nvar PromiseConstruct = function Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires \"new\"');\n  }\n  if (this._promise_state !== void 0) {\n    throw new TypeError('Bad construction');\n  }\n  // The spec requires no enumerable fields, but for speed we're going\n  // to expose our implementation here.\n  // Since most promises have exactly one handler, the first one is\n  // stored directly on the object.  The rest (if needed) are stored\n  // on the object's element array to avoid unnecessary indirection.\n  this._promise_result = void 0;\n  this._promise_state = PROMISE_PENDING;\n  this._promise_fulfillReactions0 = void 0;\n  this._promise_rejectReactions0 = void 0;\n  this._promise_reactionCapability0 = void 0;\n  if (thenFastPath === FAST_PATH_MAKE_CAP &&\n      resolver === thenFastPathResolver) {\n    // We will create the resolving functions lazily.\n    thenFastPath = FAST_PATH_CTOR_BAILED;\n    return;\n  }\n  // see https://bugs.ecmascript.org/show_bug.cgi?id=2482\n  // (This check has been reordered after the fast path.)\n  if (!IsCallable(resolver)) {\n    throw new TypeError('not a valid resolver');\n  }\n  // Inlined copy of createResolvingFunctions(this), using _promise_state\n  // to track the `alreadyResolved` boolean.\n  var promise = this;\n  var resolve = function PromiseResolve(resolution) {\n    promiseCheckAndResolve(promise, resolution);\n  };\n  var reject = function PromiseReject(reason) {\n    promiseCheckAndReject(promise, reason);\n  };\n  var value = tryCatch2(resolver, resolve, reject);\n  if (value === errorObj) {\n    reject(errorObj.e);\n  }\n};\nvar Promise = (function makeClass() {\n  if (useES2015Class) {\n    try {\n      /* jshint evil:true */\n      return eval('(function(PromiseConstruct) {' +\n                  '\"use strict\";' +\n                  'return class Promise {' +\n                  '  constructor(executor) {' +\n                  '    PromiseConstruct.call(this, executor);' +\n                  '  }' +\n                  '};})')(PromiseConstruct);\n    } catch (e) { /* I guess ES2015 syntax isn't supported. */ }\n  }\n  return PromiseConstruct;\n})();\nvar Promise$prototype = Promise.prototype;\n\ndefineProperties(Promise, {\n  reject: function reject(reason) {\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionReject(capability, reason);\n  },\n\n  resolve: function resolve(v) {\n    // See https://esdiscuss.org/topic/fixing-promise-resolve for spec\n    var C = this;\n    if (!TypeIsObject(C)) {\n      throw new TypeError('Bad promise constructor');\n    }\n    if (IsPromise(v)) {\n      var constructor = v.constructor;\n      if (constructor === C) { return v; }\n    }\n    var capability = makeCapabilityFast(C);\n    return promiseReactionResolve(capability, v);\n  },\n});\n\ndefineProperties(Promise$prototype, {\n  catch: function catch_(onRejected) {\n    return this.then(void 0, onRejected);\n  },\n\n  then: function then(onFulfilled, onRejected) {\n    /* jshint bitwise: false */\n    var fakeRetval = fakeRetvalFromThen;\n    fakeRetvalFromThen = false;\n\n    var promise = this;\n    if (!IsPromise(promise)) { throw new TypeError('not a promise'); }\n    var resultCapability, C;\n    if ((!strictConstructors) && fakeRetval) {\n      resultCapability = PROMISE_FAKE_CAPABILITY;\n    } else {\n      C = SpeciesConstructor(promise, Promise);\n      if (fakeRetval &&\n          (C === Promise || C.hasOwnProperty('noSideEffects'))) {\n        resultCapability = PROMISE_FAKE_CAPABILITY;\n      } else {\n        // We might create a fake capability here.\n        resultCapability = makeCapabilityFast(C);\n      }\n    }\n    // PerformPromiseThen(promise, onFulfilled, onRejected, resultCapability)\n    if (!IsCallable(onFulfilled)) {\n      onFulfilled = PROMISE_IDENTITY;\n    }\n    if (!IsCallable(onRejected)) {\n      onRejected = PROMISE_THROWER;\n    }\n\n    var length;\n    switch (promise._promise_state & 3) {\n    case PROMISE_PENDING:\n    case PROMISE_RESOLVING:\n      length = promise._promise_state >>> 2;\n      if (length === 0) {\n        promise._promise_fulfillReactions0 = onFulfilled;\n        promise._promise_rejectReactions0 = onRejected;\n        promise._promise_reactionCapability0 = resultCapability;\n      } else {\n        var i = 3 * (length - 1);\n        promise[i] = onFulfilled;\n        promise[i + 1] = onRejected;\n        promise[i + 2] = resultCapability;\n      }\n      promise._promise_state += (1 << 2);\n      break;\n    case PROMISE_FULFILLED:\n      triggerPromiseReaction(onFulfilled, resultCapability,\n                             promise._promise_result);\n      break;\n    case PROMISE_REJECTED:\n      triggerPromiseReaction(onRejected, resultCapability,\n                             promise._promise_result);\n      break;\n    default:\n      throw new TypeError('unexpected');\n    }\n    if (resultCapability.constructor === PromiseCapability) {\n      return resultCapability.promise;\n    }\n    return resultCapability;\n  },\n});\n// Store the identify of the Promise#then function for optimization.\npromisePrototypeThen = Promise$prototype.then;\n// This encapsulates the `then` optimization, for use by promise-extra.js\nfunction optimizePromiseThen(promise, onFulfilled, onReject) {\n  var then = promise.then;\n  if (then === promisePrototypeThen) {\n    fakeRetvalFromThen = true; // Reset to false at the top of Promise#then\n    promisePrototypeThen.call(promise, onFulfilled, onReject);\n  } else {\n    then.call(promise, onFulfilled, onReject);\n  }\n}\n\n// Special \"extra\" method which is like `Promise#then` but it does\n// *not* return a `Promise`.  This can be much faster when you don't\n// need the result.\nPromise$prototype.then0 = function then0(f, r) {\n  optimizePromiseThen(this, f, r);\n};\n\nif (symbolSpecies !== null) {\n  // Default species getter.\n  Object.defineProperty(Promise, symbolSpecies, {\n    configurable: true,\n    enumerable: false,\n    get: function speciesGetter() { return this; },\n  });\n}\n\n// Add Promise.all / Promise.race methods\n// (These are split into a separate file since their implementation is\n// reasonably independent of the core and their performance is not critical.)\nrequire('./promise-extra.js')(\n  Promise, PromiseCapability, makeCapability, makeCapabilityFast,\n  promiseReactionResolve, promiseReactionReject,\n  optimizePromiseThen, symbolSpecies\n);\n\nmodule.exports = Promise;\n","'use strict'\n\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nfunction init () {\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\ninit()\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.foo = function () { return 42 }\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    this.length = 0\n    this.parent = undefined\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined') {\n    if (object.buffer instanceof ArrayBuffer) {\n      return fromTypedArray(that, object)\n    }\n    if (object instanceof ArrayBuffer) {\n      return fromArrayBuffer(that, object)\n    }\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(array)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromTypedArray(that, new Uint8Array(array))\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n} else {\n  // pre-set for values that may exist in the future\n  Buffer.prototype.length = undefined\n  Buffer.prototype.parent = undefined\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = '' + string\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'binary':\n      // Deprecated\n      case 'raw':\n      case 'raws':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; i--) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var hasOwn = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\nvar undefined;\n\nvar isPlainObject = function isPlainObject(obj) {\n\t\"use strict\";\n\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval) {\n\t\treturn false;\n\t}\n\n\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\n\tvar has_is_property_of_method = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {}\n\n\treturn key === undefined || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\t\"use strict\";\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === \"boolean\") {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if (typeof target !== \"object\" && typeof target !== \"function\" || target == undefined) {\n\t\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ((options = arguments[i]) != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && Array.isArray(src) ? src : [];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if (copy !== undefined) {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n","'use strict';\n\n/**\n * Provides in-memory cache.\n *\n * @name MemoryCache\n * @constructor\n */\nfunction MemoryCache() {\n    this._cache = createMap();\n    this._timeouts = createMap();\n}\n\n/**\n * Returns cache value for the specified key.\n *\n * @param {String} key\n * @returns {*} Value or `undefined` if value does not exist.\n */\nMemoryCache.prototype.get = function (key) {\n    return this._cache[key];\n};\n\n/**\n * Assigns value for the specified key.\n *\n * @param {String} key\n * @param {*} value\n * @param {Number} [expireTime=0] The length of time in seconds. After this time has expired, the\n *      value will be automatically deleted. 0 means that time never expire.\n */\nMemoryCache.prototype.set = function (key, value, expireTime) {\n    this.delete(key);\n    this._cache[key] = value;\n    if (expireTime) {\n        this._timeouts[key] = setTimeout(this.delete.bind(this, key), expireTime * 1000);\n    }\n};\n\n/**\n * Deletes value for the specified key.\n *\n * @param {String} key\n */\nMemoryCache.prototype.delete = function (key) {\n    delete this._cache[key];\n    if (key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n        delete this._timeouts[key];\n    }\n};\n\n/**\n * Clears the whole cache storage.\n */\nMemoryCache.prototype.clear = function () {\n    this._cache = createMap();\n    for (var key in this._timeouts) {\n        clearTimeout(this._timeouts[key]);\n    }\n    this._timeouts = createMap();\n};\n\n/**\n * Creates a new object without a prototype. This object is useful for lookup without having to\n * guard against prototypically inherited properties via hasOwnProperty.\n *\n * @returns {Object}\n */\nfunction createMap() {\n    return Object.create(null);\n}\n\nmodule.exports = MemoryCache;\n","/*! hellojs v1.12.0 | (c) 2012-2016 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */\r\n// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n\n/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (Array.isArray(r) && Array.isArray(a)) {\n\t\t\t\tArray.prototype.push.apply(r, a);\n\t\t\t}\n\t\t\telse if (r instanceof Object && a instanceof Object && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t// Clone it\n\t\t\t\t\ta = a.slice(0);\n\t\t\t\t}\n\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tdisplay: opts.display,\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = state.oauth_proxy + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tparent[cb](str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n\n// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n\n// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n\n(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\t\t\t\tdelete p.qs.display;\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow/v2.1\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// The facebook login window is a different size.\n\t\t\t\tp.options.popup.width = 580;\n\t\t\t\tp.options.popup.height = 400;\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/v2.4/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page:'@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tshare: '',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tif (p.qs.display === 'none') {\n\t\t\t\t\t// Google doesn't like display=none\n\t\t\t\t\tp.qs.display = '';\n\t\t\t\t}\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.approval_prompt = 'force';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\to.data = o.feed.entry.map(formatEntry);\n\t\tdelete o.feed;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments',\n\t\t\t\temail: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Instagram throws errors like 'JavaScript API is unsupported' if the display is 'popup'.\n\t\t\t\t// Make the display anything but 'popup'\n\t\t\t\tp.qs.display = '';\n\t\t\t},\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting',\n\t\t\t\temail: '',\n\t\t\t\tfriends: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n\n(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfiles: '',\n\t\t\t\tfriends: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish: 'w_share',\n\t\t\t\tpublish_files: 'w_share',\n\t\t\t\tshare: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel:{\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n\n// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function() {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n\n// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\t// See https://vk.com/dev/permissions\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\tfriends: 'friends',\n\t\t\t\tphotos: 'photos',\n\t\t\t\tvideos: 'video',\n\t\t\t\tshare: 'share',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tshare: 'wl.share',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token'\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n\n// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n\n// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var idbModules = {  // jshint ignore:line\n    util: {\n        cleanInterface: false\n    }\n};\n\n(function () {\n    'use strict';\n\n    var testObject = {test: true};\n    //Test whether Object.defineProperty really works.\n    if (Object.defineProperty) {\n        try {\n            Object.defineProperty(testObject, 'test', { enumerable: false });\n            if (testObject.test) {\n                idbModules.util.cleanInterface = true;      // jshint ignore:line\n            }\n        } catch (e) {\n        //Object.defineProperty does not work as intended.\n        }\n    }\n})();\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * A utility method to callback onsuccess, onerror, etc as soon as the calling function's context is over\n     * @param {Object} fn\n     * @param {Object} context\n     * @param {Object} argArray\n     */\n    function callback(fn, context, event) {\n        //window.setTimeout(function(){\n        event.target = context;\n        (typeof context[fn] === \"function\") && context[fn].apply(context, [event]);\n        //}, 1);\n    }\n\n    /**\n     * Shim the DOMStringList object.\n     *\n     */\n    var StringList = function() {\n        this.length = 0;\n        this._items = [];\n        //Internal functions on the prototype have been made non-enumerable below.\n        if (idbModules.util.cleanInterface) {\n            Object.defineProperty(this, '_items', {\n                enumerable: false\n            });\n        }\n    };\n    StringList.prototype = {\n        // Interface.\n        contains: function(str) {\n            return -1 !== this._items.indexOf(str);\n        },\n        item: function(key) {\n            return this._items[key];\n        },\n\n        // Helpers. Should only be used internally.\n        indexOf: function(str) {\n            return this._items.indexOf(str);\n        },\n        push: function(item) {\n            this._items.push(item);\n            this.length += 1;\n            for (var i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        },\n        splice: function(/*index, howmany, item1, ..., itemX*/) {\n            this._items.splice.apply(this._items, arguments);\n            this.length = this._items.length;\n            for (var i in this) {\n                if (i === String(parseInt(i, 10))) {\n                    delete this[i];\n                }\n            }\n            for (i = 0; i < this._items.length; i++) {\n                this[i] = this._items[i];\n            }\n        }\n    };\n    if (idbModules.util.cleanInterface) {\n        for (var i in {\n            'indexOf': false,\n            'push': false,\n            'splice': false\n        }) {\n            Object.defineProperty(StringList.prototype, i, {\n                enumerable: false\n            });\n        }\n    }\n\n    idbModules.util.callback = callback;\n    idbModules.util.StringList = StringList;\n    idbModules.util.quote = function(arg) {\n        return \"\\\"\" + arg + \"\\\"\";\n    };\n\n}(idbModules));\n\n(function (idbModules) {\n    'use strict';\n\n    /**\n     * Polyfills missing features in the browser's native IndexedDB implementation.\n     * This is used for browsers that DON'T support WebSQL but DO support IndexedDB\n     */\n    function polyfill() {\n        if (navigator.userAgent.match(/MSIE/) ||\n            navigator.userAgent.match(/Trident/) ||\n            navigator.userAgent.match(/Edge/)) {\n            // Internet Explorer's native IndexedDB does not support compound keys\n            compoundKeyPolyfill();\n        }\n    }\n\n    /**\n     * Polyfills support for compound keys\n     */\n    function compoundKeyPolyfill() {\n        var cmp = IDBFactory.prototype.cmp;\n        var createObjectStore = IDBDatabase.prototype.createObjectStore;\n        var createIndex = IDBObjectStore.prototype.createIndex;\n        var add = IDBObjectStore.prototype.add;\n        var put = IDBObjectStore.prototype.put;\n        var indexGet = IDBIndex.prototype.get;\n        var indexGetKey = IDBIndex.prototype.getKey;\n        var indexCursor = IDBIndex.prototype.openCursor;\n        var indexKeyCursor = IDBIndex.prototype.openKeyCursor;\n        var storeGet = IDBObjectStore.prototype.get;\n        var storeDelete = IDBObjectStore.prototype.delete;\n        var storeCursor = IDBObjectStore.prototype.openCursor;\n        var storeKeyCursor = IDBObjectStore.prototype.openKeyCursor;\n        var bound = IDBKeyRange.bound;\n        var upperBound = IDBKeyRange.upperBound;\n        var lowerBound = IDBKeyRange.lowerBound;\n        var only = IDBKeyRange.only;\n        var requestResult = Object.getOwnPropertyDescriptor(IDBRequest.prototype, 'result');\n        var cursorPrimaryKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'primaryKey');\n        var cursorKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'key');\n        var cursorValue = Object.getOwnPropertyDescriptor(IDBCursorWithValue.prototype, 'value');\n\n        IDBFactory.prototype.cmp = function(key1, key2) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key1 instanceof Array) {\n                args[0] = encodeCompoundKey(key1);\n            }\n            if (key2 instanceof Array) {\n                args[1] = encodeCompoundKey(key2);\n            }\n            return cmp.apply(this, args);\n        };\n\n        IDBDatabase.prototype.createObjectStore = function(name, opts) {\n            if (opts && opts.keyPath instanceof Array) {\n                opts.keyPath = encodeCompoundKeyPath(opts.keyPath);\n            }\n            return createObjectStore.apply(this, arguments);\n        };\n\n        IDBObjectStore.prototype.createIndex = function(name, keyPath, opts) {\n            var args = Array.prototype.slice.call(arguments);\n            if (keyPath instanceof Array) {\n                args[1] = encodeCompoundKeyPath(keyPath);\n            }\n            return createIndex.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.add = function(value, key) {\n            return this.__insertData(add, arguments);\n        };\n\n        IDBObjectStore.prototype.put = function(value, key) {\n            return this.__insertData(put, arguments);\n        };\n\n        IDBObjectStore.prototype.__insertData = function(method, args) {\n            args = Array.prototype.slice.call(args);\n            var value = args[0];\n            var key = args[1];\n\n            // out-of-line key\n            if (key instanceof Array) {\n                args[1] = encodeCompoundKey(key);\n            }\n\n            if (typeof value === 'object') {\n                // inline key\n                if (isCompoundKey(this.keyPath)) {\n                    setInlineCompoundKey(value, this.keyPath);\n                }\n\n                // inline indexes\n                for (var i = 0; i < this.indexNames.length; i++) {\n                    var index = this.index(this.indexNames[i]);\n                    if (isCompoundKey(index.keyPath)) {\n                        try {\n                            setInlineCompoundKey(value, index.keyPath);\n                        }\n                        catch (e) {\n                            // The value doesn't have a valid key for this index.\n                        }\n                    }\n                }\n            }\n            return method.apply(this, args);\n        };\n\n        IDBIndex.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGet.apply(this, args);\n        };\n\n        IDBIndex.prototype.getKey = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexGetKey.apply(this, args);\n        };\n\n        IDBIndex.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexCursor.apply(this, args);\n        };\n\n        IDBIndex.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return indexKeyCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.get = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeGet.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.delete = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeDelete.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeCursor.apply(this, args);\n        };\n\n        IDBObjectStore.prototype.openKeyCursor = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return storeKeyCursor.apply(this, args);\n        };\n\n        IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen) {\n            var args = Array.prototype.slice.call(arguments);\n            if (lower instanceof Array) {\n                args[0] = encodeCompoundKey(lower);\n            }\n            if (upper instanceof Array) {\n                args[1] = encodeCompoundKey(upper);\n            }\n            return bound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.upperBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return upperBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.lowerBound = function(key, open) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return lowerBound.apply(IDBKeyRange, args);\n        };\n\n        IDBKeyRange.only = function(key) {\n            var args = Array.prototype.slice.call(arguments);\n            if (key instanceof Array) {\n                args[0] = encodeCompoundKey(key);\n            }\n            return only.apply(IDBKeyRange, args);\n        };\n\n        Object.defineProperty(IDBRequest.prototype, 'result', {\n            enumerable: requestResult.enumerable,\n            configurable: requestResult.configurable,\n            get: function() {\n                var result = requestResult.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'primaryKey', {\n            enumerable: cursorPrimaryKey.enumerable,\n            configurable: cursorPrimaryKey.configurable,\n            get: function() {\n                var result = cursorPrimaryKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursor.prototype, 'key', {\n            enumerable: cursorKey.enumerable,\n            configurable: cursorKey.configurable,\n            get: function() {\n                var result = cursorKey.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        Object.defineProperty(IDBCursorWithValue.prototype, 'value', {\n            enumerable: cursorValue.enumerable,\n            configurable: cursorValue.configurable,\n            get: function() {\n                var result = cursorValue.get.call(this);\n                return removeInlineCompoundKey(result);\n            }\n        });\n\n        try {\n            if (!IDBTransaction.VERSION_CHANGE) {\n                IDBTransaction.VERSION_CHANGE = 'versionchange';\n            }\n        }\n        catch (e) {}\n    }\n\n    var compoundKeysPropertyName = '__$$compoundKey';\n    var propertySeparatorRegExp = /\\$\\$/g;\n    var propertySeparator = '$$$$';         // \"$$\" after RegExp escaping\n    var keySeparator = '$_$';\n\n    function isCompoundKey(keyPath) {\n        return keyPath && (keyPath.indexOf(compoundKeysPropertyName + '.') === 0);\n    }\n\n    function encodeCompoundKeyPath(keyPath) {\n        // Encoded dotted properties\n        // [\"name.first\", \"name.last\"] ==> [\"name$$first\", \"name$$last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(/\\./g, propertySeparator);\n        }\n\n        // Encode the array as a single property\n        // [\"name$$first\", \"name$$last\"] => \"__$$compoundKey.name$$first$_$name$$last\"\n        return compoundKeysPropertyName + '.' + keyPath.join(keySeparator);\n    }\n\n    function decodeCompoundKeyPath(keyPath) {\n        // Remove the \"__$$compoundKey.\" prefix\n        keyPath = keyPath.substr(compoundKeysPropertyName.length + 1);\n\n        // Split the properties into an array\n        // \"name$$first$_$name$$last\" ==> [\"name$$first\", \"name$$last\"]\n        keyPath = keyPath.split(keySeparator);\n\n        // Decode dotted properties\n        // [\"name$$first\", \"name$$last\"] ==> [\"name.first\", \"name.last\"]\n        for (var i = 0; i < keyPath.length; i++) {\n            keyPath[i] = keyPath[i].replace(propertySeparatorRegExp, '.');\n        }\n        return keyPath;\n    }\n\n    function setInlineCompoundKey(value, encodedKeyPath) {\n        // Encode the key\n        var keyPath = decodeCompoundKeyPath(encodedKeyPath);\n        var key = idbModules.Key.getValue(value, keyPath);\n        var encodedKey = encodeCompoundKey(key);\n\n        // Store the encoded key inline\n        encodedKeyPath = encodedKeyPath.substr(compoundKeysPropertyName.length + 1);\n        value[compoundKeysPropertyName] = value[compoundKeysPropertyName] || {};\n        value[compoundKeysPropertyName][encodedKeyPath] = encodedKey;\n    }\n\n    function removeInlineCompoundKey(value) {\n        if (typeof value === \"string\" && isCompoundKey(value)) {\n            return decodeCompoundKey(value);\n        }\n        else if (value && typeof value[compoundKeysPropertyName] === \"object\") {\n            delete value[compoundKeysPropertyName];\n        }\n        return value;\n    }\n\n    function encodeCompoundKey(key) {\n        // Validate and encode the key\n        idbModules.Key.validate(key);\n        key = idbModules.Key.encode(key);\n\n        // Prepend the \"__$$compoundKey.\" prefix\n        key = compoundKeysPropertyName + '.' + key;\n\n        validateKeyLength(key);\n        return key;\n    }\n\n    function decodeCompoundKey(key) {\n        validateKeyLength(key);\n\n        // Remove the \"__$$compoundKey.\" prefix\n        key = key.substr(compoundKeysPropertyName.length + 1);\n\n        // Decode the key\n        key = idbModules.Key.decode(key);\n        return key;\n    }\n\n    function validateKeyLength(key) {\n        // BUG: Internet Explorer truncates string keys at 889 characters\n        if (key.length > 889) {\n            throw idbModules.util.createDOMException(\"DataError\", \"The encoded key is \" + key.length + \" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.\");\n        }\n    }\n\n    idbModules.polyfill = polyfill;\n})(idbModules);\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * Implementation of the Structured Cloning Algorithm.  Supports the\n     * following object types:\n     * - Blob\n     * - Boolean\n     * - Date object\n     * - File object (deserialized as Blob object).\n     * - Number object\n     * - RegExp object\n     * - String object\n     * This is accomplished by doing the following:\n     * 1) Using the cycle/decycle functions from:\n     *    https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n     * 2) Serializing/deserializing objects to/from string that don't work with\n     *    JSON.stringify and JSON.parse by using object specific logic (eg use \n     *    the FileReader API to convert a Blob or File object to a data URL.   \n     * 3) JSON.stringify and JSON.parse do the final conversion to/from string.\n     */\n    var Sca = (function(){\n        return {\n            decycle: function(object, callback) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert the following object types to string\n                // so that they can properly be encoded using JSON.stringify:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Make a deep copy of an object or array, assuring that there is at most\n                // one instance of each object or array in the resulting structure. The\n                // duplicate references (which might be forming cycles) are replaced with\n                // an object of the form\n                //      {$ref: PATH}\n                // where the PATH is a JSONPath string that locates the first occurance.\n                // So,\n                //      var a = [];\n                //      a[0] = a;\n                //      return JSON.stringify(JSON.decycle(a));\n                // produces the string '[{\"$ref\":\"$\"}]'.\n\n                // JSONPath is used to locate the unique object. $ indicates the top level of\n                // the object or array. [NUMBER] or [STRING] indicates a child member or\n                // property.\n\n                var objects = [],   // Keep a reference to each unique object or array\n                paths = [],     // Keep the path to each unique object or array\n                queuedObjects = [],\n                returnCallback = callback;\n\n                /**\n                 * Check the queue to see if all objects have been processed.\n                 * if they have, call the callback with the converted object.\n                 */\n                function checkForCompletion() {\n                    if (queuedObjects.length === 0) {\n                        returnCallback(derezObj);\n                    }    \n                }\n\n                /**\n                 * Convert a blob to a data URL.\n                 * @param {Blob} blob to convert.\n                 * @param {String} path of blob in object being encoded.\n                 */\n                function readBlobAsDataURL(blob, path) {\n                    var reader = new FileReader();\n                    reader.onloadend = function(loadedEvent) {\n                        var dataURL = loadedEvent.target.result;\n                        var blobtype = 'Blob';\n                        if (blob instanceof File) {\n                            //blobtype = 'File';\n                        }\n                        updateEncodedBlob(dataURL, path, blobtype);\n                    };\n                    reader.readAsDataURL(blob);\n                }\n                \n                /**\n                 * Async handler to update a blob object to a data URL for encoding.\n                 * @param {String} dataURL\n                 * @param {String} path\n                 * @param {String} blobtype - file if the blob is a file; blob otherwise\n                 */\n                function updateEncodedBlob(dataURL, path, blobtype) {\n                    var encoded = queuedObjects.indexOf(path);\n                    path = path.replace('$','derezObj');\n                    eval(path+'.$enc=\"'+dataURL+'\"');\n                    eval(path+'.$type=\"'+blobtype+'\"');\n                    queuedObjects.splice(encoded, 1);\n                    checkForCompletion();\n                }\n\n                function derez(value, path) {\n\n                    // The derez recurses through the object, producing the deep copy.\n\n                    var i,          // The loop counter\n                    name,       // Property name\n                    nu;         // The new object or array\n\n                    // typeof null === 'object', so go on if this value is really an object but not\n                    // one of the weird builtin objects.\n\n                    if (typeof value === 'object' && value !== null &&\n                        !(value instanceof Boolean) &&\n                        !(value instanceof Date)    &&\n                        !(value instanceof Number)  &&\n                        !(value instanceof RegExp)  &&\n                        !(value instanceof Blob)  &&\n                        !(value instanceof String)) {\n\n                        // If the value is an object or array, look to see if we have already\n                        // encountered it. If so, return a $ref/path object. This is a hard way,\n                        // linear search that will get slower as the number of unique objects grows.\n\n                        for (i = 0; i < objects.length; i += 1) {\n                            if (objects[i] === value) {\n                                return {$ref: paths[i]};\n                            }\n                        }\n\n                        // Otherwise, accumulate the unique value and its path.\n\n                        objects.push(value);\n                        paths.push(path);\n\n                        // If it is an array, replicate the array.\n\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            nu = [];\n                            for (i = 0; i < value.length; i += 1) {\n                                nu[i] = derez(value[i], path + '[' + i + ']');\n                            }\n                        } else {\n                            // If it is an object, replicate the object.\n                            nu = {};\n                            for (name in value) {\n                                if (Object.prototype.hasOwnProperty.call(value, name)) {\n                                    nu[name] = derez(value[name],\n                                     path + '[' + JSON.stringify(name) + ']');\n                                }\n                            }\n                        }\n\n                        return nu;\n                    } else if (value instanceof Blob) {\n                        //Queue blob for conversion\n                        queuedObjects.push(path);\n                        readBlobAsDataURL(value, path);\n                    } else if (value instanceof Boolean) {\n                        value = {\n                            '$type': 'Boolean',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof Date) {\n                        value = {\n                            '$type': 'Date',\n                            '$enc': value.getTime()\n                        };\n                    } else if (value instanceof Number) {\n                        value = {\n                            '$type': 'Number',\n                            '$enc': value.toString()\n                        };\n                    } else if (value instanceof RegExp) {\n                        value = {\n                            '$type': 'RegExp',\n                            '$enc': value.toString()\n                        };\n                    } else if (typeof value === 'number') {\n                        value = {\n                            '$type': 'number',\n                            '$enc': value + ''  // handles NaN, Infinity, Negative Infinity\n                        };\n                    } else if (value === undefined) {\n                        value = {\n                            '$type': 'undefined'\n                        };\n                    }\n                    return value;\n                }\n                var derezObj = derez(object, '$');\n                checkForCompletion();\n            },\n                \n            retrocycle: function retrocycle($) {\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n                // Contains additional logic to convert strings to the following object types \n                // so that they can properly be decoded:\n                //  *Boolean\n                //  *Date\n                //  *File\n                //  *Blob\n                //  *Number\n                //  *Regex\n                // Restore an object that was reduced by decycle. Members whose values are\n                // objects of the form\n                //      {$ref: PATH}\n                // are replaced with references to the value found by the PATH. This will\n                // restore cycles. The object will be mutated.\n\n                // The eval function is used to locate the values described by a PATH. The\n                // root object is kept in a $ variable. A regular expression is used to\n                // assure that the PATH is extremely well formed. The regexp contains nested\n                // * quantifiers. That has been known to have extremely bad performance\n                // problems on some browsers for very long strings. A PATH is expected to be\n                // reasonably short. A PATH is allowed to belong to a very restricted subset of\n                // Goessner's JSONPath.\n\n                // So,\n                //      var s = '[{\"$ref\":\"$\"}]';\n                //      return JSON.retrocycle(JSON.parse(s));\n                // produces an array containing a single element which is the array itself.\n\n                var px = /^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\n                \n                /**\n                 * Converts the specified data URL to a Blob object\n                 * @param {String} dataURL to convert to a Blob\n                 * @returns {Blob} the converted Blob object\n                 */\n                function dataURLToBlob(dataURL) {\n                    var BASE64_MARKER = ';base64,',\n                        contentType,\n                        parts,\n                        raw;\n                    if (dataURL.indexOf(BASE64_MARKER) === -1) {\n                        parts = dataURL.split(',');\n                        contentType = parts[0].split(':')[1];\n                        raw = parts[1];\n\n                        return new Blob([raw], {type: contentType});\n                    }\n\n                    parts = dataURL.split(BASE64_MARKER);\n                    contentType = parts[0].split(':')[1];\n                    raw = window.atob(parts[1]);\n                    var rawLength = raw.length;\n                    var uInt8Array = new Uint8Array(rawLength);\n\n                    for (var i = 0; i < rawLength; ++i) {\n                        uInt8Array[i] = raw.charCodeAt(i);\n                    }\n                    return new Blob([uInt8Array.buffer], {type: contentType});\n                }\n                \n                function rez(value) {\n                    // The rez function walks recursively through the object looking for $ref\n                    // properties. When it finds one that has a value that is a path, then it\n                    // replaces the $ref object with a reference to the value that is found by\n                    // the path.\n\n                    var i, item, name, path;\n\n                    if (value && typeof value === 'object') {\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\n                            for (i = 0; i < value.length; i += 1) {\n                                item = value[i];\n                                if (item && typeof item === 'object') {\n                                    path = item.$ref;\n                                    if (typeof path === 'string' && px.test(path)) {\n                                        value[i] = eval(path);\n                                    } else {\n                                        value[i] = rez(item);\n                                    }\n                                }\n                            }\n                        } else {\n                            if (value.$type !== undefined) {\n                                switch(value.$type) {\n                                    case 'Blob':\n                                    case 'File':\n                                        value = dataURLToBlob(value.$enc);\n                                        break;\n                                    case 'Boolean':\n                                        value = Boolean(value.$enc === 'true');\n                                        break;\n                                    case 'Date':\n                                        value = new Date(value.$enc);\n                                        break;\n                                    case 'Number':\n                                        value = Number(value.$enc);\n                                        break;\n                                    case 'RegExp':\n                                        value = eval(value.$enc);\n                                        break;\n                                    case 'number':\n                                        value = parseFloat(value.$enc);\n                                        break;\n                                    case 'undefined':\n                                        value = undefined;\n                                        break;\n                                }\n                            } else {\n                                for (name in value) {\n                                    if (typeof value[name] === 'object') {\n                                        item = value[name];\n                                        if (item) {\n                                            path = item.$ref;\n                                            if (typeof path === 'string' && px.test(path)) {\n                                                value[name] = eval(path);\n                                            } else {\n                                                value[name] = rez(item);\n                                            }\n                                        }\n                                    }   \n                                }\n                            }\n                        }\n                    }\n                    return value;\n                }\n                return rez($);\n\n            },\n\n            /**\n             * Encode the specified object as a string.  Because of the asynchronus\n             * conversion of Blob/File to string, the encode function requires\n             * a callback\n             * @param {Object} val the value to convert.\n             * @param {function} callback the function to call once conversion is\n             * complete.  The callback gets called with the converted value.\n             */\n            \"encode\": function(val, callback){\n                function finishEncode(val) {\n                    callback(JSON.stringify(val));\n                }\n                this.decycle(val, finishEncode);                        \n            },\n                    \n            /**\n             * Deserialize the specified string to an object\n             * @param {String} val the serialized string\n             * @returns {Object} the deserialized object\n             */\n            \"decode\": function(val){\n                return this.retrocycle(JSON.parse(val));\n            }\n        };\n    }());\n    idbModules.Sca = Sca;\n}(idbModules));\n\n(function(idbModules) {\n    \"use strict\";\n\n    /**\n     * Encodes the keys based on their types. This is required to maintain collations\n     */\n    var collations = [\"undefined\", \"number\", \"date\", \"string\", \"array\"];\n\n    /**\n     * The sign values for numbers, ordered from least to greatest.\n     *  - \"negativeInfinity\": Sorts below all other values.\n     *  - \"bigNegative\": Negative values less than or equal to negative one.\n     *  - \"smallNegative\": Negative values between negative one and zero, noninclusive.\n     *  - \"smallPositive\": Positive values between zero and one, including zero but not one.\n     *  - \"largePositive\": Positive values greater than or equal to one.\n     *  - \"positiveInfinity\": Sorts above all other values.\n     */\n    var signValues = [\"negativeInfinity\", \"bigNegative\", \"smallNegative\", \"smallPositive\", \"bigPositive\", \"positiveInfinity\"];\n\n    var types = {\n        // Undefined is not a valid key type.  It's only used when there is no key.\n        undefined: {\n            encode: function(key) {\n                return collations.indexOf(\"undefined\") + \"-\";\n            },\n            decode: function(key) {\n                return undefined;\n            }\n        },\n\n        // Dates are encoded as ISO 8601 strings, in UTC time zone.\n        date: {\n            encode: function(key) {\n                return collations.indexOf(\"date\") + \"-\" + key.toJSON();\n            },\n            decode: function(key) {\n                return new Date(key.substring(2));\n            }\n        },\n\n        // Numbers are represented in a lexically sortable base-32 sign-exponent-mantissa\n        // notation.\n        //\n        // sign: takes a value between zero and five, inclusive. Represents infinite cases\n        //     and the signs of both the exponent and the fractional part of the number.\n        // exponent: paded to two base-32 digits, represented by the 32's compliment in the\n        //     \"smallPositive\" and \"bigNegative\" cases to ensure proper lexical sorting.\n        // mantissa: also called the fractional part. Normed 11-digit base-32 representation.\n        //     Represented by the 32's compliment in the \"smallNegative\" and \"bigNegative\"\n        //     cases to ensure proper lexical sorting.\n        number: {\n            // The encode step checks for six numeric cases and generates 14-digit encoded\n            // sign-exponent-mantissa strings.\n            encode: function(key) {\n                var key32 = Math.abs(key).toString(32);\n                // Get the index of the decimal.\n                var decimalIndex = key32.indexOf(\".\");\n                // Remove the decimal.\n                key32 = (decimalIndex !== -1) ? key32.replace(\".\", \"\") : key32;\n                // Get the index of the first significant digit.\n                var significantDigitIndex = key32.search(/[^0]/);\n                // Truncate leading zeros.\n                key32 = key32.slice(significantDigitIndex);\n                var sign, exponent = zeros(2), mantissa = zeros(11);\n\n                // Finite cases:\n                if (isFinite(key)) {\n                    // Negative cases:\n                    if (key < 0) {\n                        // Negative exponent case:\n                        if (key > -1) {\n                            sign = signValues.indexOf(\"smallNegative\");\n                            exponent = padBase32Exponent(significantDigitIndex);\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigNegative\");\n                            exponent = flipBase32(padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            ));\n                            mantissa = flipBase32(padBase32Mantissa(key32));\n                        }\n                    }\n                    // Non-negative cases:\n                    else {\n                        // Negative exponent case:\n                        if (key < 1) {\n                            sign = signValues.indexOf(\"smallPositive\");\n                            exponent = flipBase32(padBase32Exponent(significantDigitIndex));\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                        // Non-negative exponent case:\n                        else {\n                            sign = signValues.indexOf(\"bigPositive\");\n                            exponent = padBase32Exponent(\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\n                            );\n                            mantissa = padBase32Mantissa(key32);\n                        }\n                    }\n                }\n                // Infinite cases:\n                else {\n                    sign = signValues.indexOf(\n                        key > 0 ? \"positiveInfinity\" : \"negativeInfinity\"\n                    );\n                }\n\n                return collations.indexOf(\"number\") + \"-\" + sign + exponent + mantissa;\n            },\n            // The decode step must interpret the sign, reflip values encoded as the 32's complements,\n            // apply signs to the exponent and mantissa, do the base-32 power operation, and return\n            // the original JavaScript number values.\n            decode: function(key) {\n                var sign = +key.substr(2, 1);\n                var exponent = key.substr(3, 2);\n                var mantissa = key.substr(5, 11);\n\n                switch (signValues[sign]) {\n                    case \"negativeInfinity\":\n                        return -Infinity;\n                    case \"positiveInfinity\":\n                        return Infinity;\n                    case \"bigPositive\":\n                        return pow32(mantissa, exponent);\n                    case \"smallPositive\":\n                        exponent = negate(flipBase32(exponent));\n                        return pow32(mantissa, exponent);\n                    case \"smallNegative\":\n                        exponent = negate(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    case \"bigNegative\":\n                        exponent = flipBase32(exponent);\n                        mantissa = flipBase32(mantissa);\n                        return -pow32(mantissa, exponent);\n                    default:\n                        throw new Error(\"Invalid number.\");\n                }\n            }\n        },\n\n        // Strings are encoded as JSON strings (with quotes and unicode characters escaped).\n        //\n        // IF the strings are in an array, then some extra encoding is done to make sorting work correctly:\n        // Since we can't force all strings to be the same length, we need to ensure that characters line-up properly\n        // for sorting, while also accounting for the extra characters that are added when the array itself is encoded as JSON.\n        // To do this, each character of the string is prepended with a dash (\"-\"), and a space is added to the end of the string.\n        // This effectively doubles the size of every string, but it ensures that when two arrays of strings are compared,\n        // the indexes of each string's characters line up with each other.\n        string: {\n            encode: function(key, inArray) {\n                if (inArray) {\n                    // prepend each character with a dash, and append a space to the end\n                    key = key.replace(/(.)/g, '-$1') + ' ';\n                }\n                return collations.indexOf(\"string\") + \"-\" + key;\n            },\n            decode: function(key, inArray) {\n                key = key.substring(2);\n                if (inArray) {\n                    // remove the space at the end, and the dash before each character\n                    key = key.substr(0, key.length - 1).replace(/-(.)/g, '$1');\n                }\n                return key;\n            }\n        },\n\n        // Arrays are encoded as JSON strings.\n        // An extra, value is added to each array during encoding to make empty arrays sort correctly.\n        array: {\n            encode: function(key) {\n                var encoded = [];\n                for (var i = 0; i < key.length; i++) {\n                    var item = key[i];\n                    var encodedItem = idbModules.Key.encode(item, true);        // encode the array item\n                    encoded[i] = encodedItem;\n                }\n                encoded.push(collations.indexOf(\"undefined\") + \"-\");            // append an extra item, so empty arrays sort correctly\n                return collations.indexOf(\"array\") + \"-\" + JSON.stringify(encoded);\n            },\n            decode: function(key) {\n                var decoded = JSON.parse(key.substring(2));\n                decoded.pop();                                                  // remove the extra item\n                for (var i = 0; i < decoded.length; i++) {\n                    var item = decoded[i];\n                    var decodedItem = idbModules.Key.decode(item, true);        // decode the item\n                    decoded[i] = decodedItem;\n                }\n                return decoded;\n            }\n        }\n    };\n\n    /**\n     * Return a padded base-32 exponent value.\n     * @param {number}\n     * @return {string}\n     */\n    function padBase32Exponent(n) {\n        n = n.toString(32);\n        return (n.length === 1) ? \"0\" + n : n;\n    }\n\n    /**\n     * Return a padded base-32 mantissa.\n     * @param {string}\n     * @return {string}\n     */\n    function padBase32Mantissa(s) {\n        return (s + zeros(11)).slice(0, 11);\n    }\n\n    /**\n     * Flips each digit of a base-32 encoded string.\n     * @param {string} encoded\n     */\n    function flipBase32(encoded) {\n        var flipped = \"\";\n        for (var i = 0; i < encoded.length; i++) {\n            flipped += (31 - parseInt(encoded[i], 32)).toString(32);\n        }\n        return flipped;\n    }\n\n    /**\n     * Base-32 power function.\n     * RESEARCH: This function does not precisely decode floats because it performs\n     * floating point arithmetic to recover values. But can the original values be\n     * recovered exactly?\n     * Someone may have already figured out a good way to store JavaScript floats as\n     * binary strings and convert back. Barring a better method, however, one route\n     * may be to generate decimal strings that `parseFloat` decodes predictably.\n     * @param {string}\n     * @param {string}\n     * @return {number}\n     */\n    function pow32(mantissa, exponent) {\n        var whole, fraction, expansion;\n        exponent = parseInt(exponent, 32);\n        if (exponent < 0) {\n            return roundToPrecision(\n                parseInt(mantissa, 32) * Math.pow(32, exponent - 10)\n            );\n        }\n        else {\n            if (exponent < 11) {\n                whole = mantissa.slice(0, exponent);\n                whole = parseInt(whole, 32);\n                fraction = mantissa.slice(exponent);\n                fraction = parseInt(fraction, 32) * Math.pow(32, exponent - 11);\n                return roundToPrecision(whole + fraction);\n            }\n            else {\n                expansion = mantissa + zeros(exponent - 11);\n                return parseInt(expansion, 32);\n            }\n        }\n    }\n\n    /**\n     *\n     */\n    function roundToPrecision(num, precision) {\n        precision = precision || 16;\n        return parseFloat(num.toPrecision(precision));\n    }\n\n    /**\n     * Returns a string of n zeros.\n     * @param {number}\n     * @return {string}\n     */\n    function zeros(n) {\n        var result = \"\";\n        while (n--) {\n            result = result + \"0\";\n        }\n        return result;\n    }\n\n    /**\n     * Negates numeric strings.\n     * @param {string}\n     * @return {string}\n     */\n    function negate(s) {\n        return \"-\" + s;\n    }\n\n    /**\n     * Returns the string \"number\", \"date\", \"string\", or \"array\".\n     */\n    function getType(key) {\n        if (key instanceof Date) {\n            return \"date\";\n        }\n        if (key instanceof Array) {\n            return \"array\";\n        }\n        return typeof key;\n    }\n\n    /**\n     * Keys must be strings, numbers, Dates, or Arrays\n     */\n    function validate(key) {\n        var type = getType(key);\n        if (type === \"array\") {\n            for (var i = 0; i < key.length; i++) {\n                validate(key[i]);\n            }\n        }\n        else if (!types[type] || (type !== \"string\" && isNaN(key))) {\n            throw idbModules.util.createDOMException(\"DataError\", \"Not a valid key\");\n        }\n    }\n\n    /**\n     * Returns the value of an inline key\n     * @param {object} source\n     * @param {string|array} keyPath\n     */\n    function getValue(source, keyPath) {\n        try {\n            if (keyPath instanceof Array) {\n                var arrayValue = [];\n                for (var i = 0; i < keyPath.length; i++) {\n                    arrayValue.push(eval(\"source.\" + keyPath[i]));\n                }\n                return arrayValue;\n            } else {\n                return eval(\"source.\" + keyPath);\n            }\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n\n    /**\n     * Sets the inline key value\n     * @param {object} source\n     * @param {string} keyPath\n     * @param {*} value\n     */\n    function setValue(source, keyPath, value) {\n        var props = keyPath.split('.');\n        for (var i = 0; i < props.length - 1; i++) {\n            var prop = props[i];\n            source = source[prop] = source[prop] || {};\n        }\n        source[props[props.length - 1]] = value;\n    }\n\n    /**\n     * Determines whether an index entry matches a multi-entry key value.\n     * @param {string} encodedEntry     The entry value (already encoded)\n     * @param {string} encodedKey       The full index key (already encoded)\n     * @returns {boolean}\n     */\n    function isMultiEntryMatch(encodedEntry, encodedKey) {\n        var keyType = collations[encodedKey.substring(0, 1)];\n\n        if (keyType === \"array\") {\n            return encodedKey.indexOf(encodedEntry) > 1;\n        }\n        else {\n            return encodedKey === encodedEntry;\n        }\n    }\n\n    function isKeyInRange(key, range) {\n        var lowerMatch = range.lower === undefined;\n        var upperMatch = range.upper === undefined;\n        var encodedKey = idbModules.Key.encode(key, true);\n\n        if (range.lower !== undefined) {\n            if (range.lowerOpen && encodedKey > range.__lower) {\n                lowerMatch = true;\n            }\n            if (!range.lowerOpen && encodedKey >= range.__lower) {\n                lowerMatch = true;\n            }\n        }\n        if (range.upper !== undefined) {\n            if (range.upperOpen && encodedKey < range.__upper) {\n                upperMatch = true;\n            }\n            if (!range.upperOpen && encodedKey <= range.__upper) {\n                upperMatch = true;\n            }\n        }\n\n        return lowerMatch && upperMatch;\n    }\n\n    function findMultiEntryMatches(keyEntry, range) {\n        var matches = [];\n\n        if (keyEntry instanceof Array) {\n            for (var i = 0; i < keyEntry.length; i++) {\n                var key = keyEntry[i];\n\n                if (key instanceof Array) {\n                    if (range.lower === range.upper) {\n                        continue;\n                    }\n                    if (key.length === 1) {\n                        key = key[0];\n                    } else {\n                        var nested = findMultiEntryMatches(key, range);\n                        if (nested.length > 0) {\n                            matches.push(key);\n                        }\n                        continue;\n                    }\n                }\n\n                if (isKeyInRange(key, range)) {\n                    matches.push(key);\n                }\n            }\n        } else {\n            if (isKeyInRange(keyEntry, range)) {\n                matches.push(keyEntry);\n            }\n        }\n        return matches;\n    }\n\n    idbModules.Key = {\n        encode: function(key, inArray) {\n            if (key === undefined) {\n                return null;\n            }\n            return types[getType(key)].encode(key, inArray);\n        },\n        decode: function(key, inArray) {\n            if (typeof key !== \"string\") {\n                return undefined;\n            }\n            return types[collations[key.substring(0, 1)]].decode(key, inArray);\n        },\n        validate: validate,\n        getValue: getValue,\n        setValue: setValue,\n        isMultiEntryMatch: isMultiEntryMatch,\n        findMultiEntryMatches: findMultiEntryMatches\n    };\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native Event object, for browsers that support it\n     * @returns {Event}\n     */\n    function createNativeEvent(type, debug) {\n        var event = new Event(type);\n        event.debug = debug;\n\n        // Make the \"target\" writable\n        Object.defineProperty(event, 'target', {\n            writable: true\n        });\n\n        return event;\n    }\n\n    /**\n     * A shim Event class, for browsers that don't allow us to create native Event objects.\n     * @constructor\n     */\n    function ShimEvent(type, debug) {\n        this.type = type;\n        this.debug = debug;\n        this.bubbles = false;\n        this.cancelable = false;\n        this.eventPhase = 0;\n        this.timeStamp = new Date().valueOf();\n    }\n\n    var useNativeEvent = false;\n    try {\n        // Test whether we can use the browser's native Event class\n        var test = createNativeEvent('test type', 'test debug');\n        var target = {test: 'test target'};\n        test.target = target;\n\n        if (test instanceof Event && test.type === 'test type' && test.debug === 'test debug' && test.target === target) {\n            // Native events work as expected\n            useNativeEvent = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeEvent) {\n        idbModules.Event = Event;\n        idbModules.IDBVersionChangeEvent = Event;\n        idbModules.util.createEvent = createNativeEvent;\n    }\n    else {\n        idbModules.Event = ShimEvent;\n        idbModules.IDBVersionChangeEvent = ShimEvent;\n        idbModules.util.createEvent = function(type, debug) {\n            return new ShimEvent(type, debug);\n        };\n    }\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * Creates a native DOMException, for browsers that support it\n     * @returns {DOMException}\n     */\n    function createNativeDOMException(name, message) {\n        var e = new DOMException.prototype.constructor(0, message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Creates a native DOMError, for browsers that support it\n     * @returns {DOMError}\n     */\n    function createNativeDOMError(name, message) {\n        name = name || 'DOMError';\n        var e = new DOMError(name, message);\n        e.name === name || (e.name = name);\n        e.message === message || (e.message = message);\n        return e;\n    }\n\n    /**\n     * Creates a generic Error object\n     * @returns {Error}\n     */\n    function createError(name, message) {\n        var e = new Error(message);\n        e.name = name || 'DOMException';\n        e.message = message;\n        return e;\n    }\n\n    /**\n     * Logs detailed error information to the console.\n     * @param {string} name\n     * @param {string} message\n     * @param {string|Error|null} error\n     */\n    idbModules.util.logError = function(name, message, error) {\n        if (idbModules.DEBUG) {\n            if (error && error.message) {\n                error = error.message;\n            }\n\n            var method = typeof(console.error) === 'function' ? 'error' : 'log';\n            console[method](name + ': ' + message + '. ' + (error || ''));\n            console.trace && console.trace();\n        }\n    };\n\n    /**\n     * Finds the error argument.  This is useful because some WebSQL callbacks\n     * pass the error as the first argument, and some pass it as the second argument.\n     * @param {array} args\n     * @returns {Error|DOMException|undefined}\n     */\n    idbModules.util.findError = function(args) {\n        var err;\n        if (args) {\n            if (args.length === 1) {\n                return args[0];\n            }\n            for (var i = 0; i < args.length; i++) {\n                var arg = args[i];\n                if (arg instanceof Error || arg instanceof DOMException) {\n                    return arg;\n                }\n                else if (arg && typeof arg.message === \"string\") {\n                    err = arg;\n                }\n            }\n        }\n        return err;\n    };\n\n    var test, useNativeDOMException = false, useNativeDOMError = false;\n\n    // Test whether we can use the browser's native DOMException class\n    try {\n        test = createNativeDOMException('test name', 'test message');\n        if (test instanceof DOMException && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMException works as expected\n            useNativeDOMException = true;\n        }\n    }\n    catch (e) {}\n\n    // Test whether we can use the browser's native DOMError class\n    try {\n        test = createNativeDOMError('test name', 'test message');\n        if (test instanceof DOMError && test.name === 'test name' && test.message === 'test message') {\n            // Native DOMError works as expected\n            useNativeDOMError = true;\n        }\n    }\n    catch (e) {}\n\n    if (useNativeDOMException) {\n        idbModules.DOMException = DOMException;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMException(name, message);\n        };\n    }\n    else {\n        idbModules.DOMException = Error;\n        idbModules.util.createDOMException = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n\n    if (useNativeDOMError) {\n        idbModules.DOMError = DOMError;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createNativeDOMError(name, message);\n        };\n    }\n    else {\n        idbModules.DOMError = Error;\n        idbModules.util.createDOMError = function(name, message, error) {\n            idbModules.util.logError(name, message, error);\n            return createError(name, message);\n        };\n    }\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * The IDBRequest Object that is returns for all async calls\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api\n     */\n    function IDBRequest(){\n        this.onsuccess = this.onerror = this.result = this.error = this.source = this.transaction = null;\n        this.readyState = \"pending\";\n    }\n\n    /**\n     * The IDBOpenDBRequest called when a database is opened\n     */\n    function IDBOpenDBRequest(){\n        this.onblocked = this.onupgradeneeded = null;\n    }\n    IDBOpenDBRequest.prototype = new IDBRequest();\n    IDBOpenDBRequest.prototype.constructor = IDBOpenDBRequest;\n    \n    idbModules.IDBRequest = IDBRequest;\n    idbModules.IDBOpenDBRequest = IDBOpenDBRequest;\n    \n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB KeyRange object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#dfn-key-range\n     * @param {Object} lower\n     * @param {Object} upper\n     * @param {Object} lowerOpen\n     * @param {Object} upperOpen\n     */\n    function IDBKeyRange(lower, upper, lowerOpen, upperOpen){\n        if (lower !== undefined) {\n            idbModules.Key.validate(lower);\n        }\n        if (upper !== undefined) {\n            idbModules.Key.validate(upper);\n        }\n\n        this.lower = lower;\n        this.upper = upper;\n        this.lowerOpen = !!lowerOpen;\n        this.upperOpen = !!upperOpen;\n    }\n\n    IDBKeyRange.only = function(value){\n        return new IDBKeyRange(value, value, false, false);\n    };\n\n    IDBKeyRange.lowerBound = function(value, open){\n        return new IDBKeyRange(value, undefined, open, undefined);\n    };\n    IDBKeyRange.upperBound = function(value, open){\n        return new IDBKeyRange(undefined, value, undefined, open);\n    };\n    IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen){\n        return new IDBKeyRange(lower, upper, lowerOpen, upperOpen);\n    };\n\n    idbModules.IDBKeyRange = IDBKeyRange;\n\n}(idbModules));\n\n(function(idbModules, undefined){\n    'use strict';\n\n    /**\n     * The IndexedDB Cursor Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBCursor\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @param {IDBObjectStore} store\n     * @param {IDBObjectStore|IDBIndex} source\n     * @param {string} keyColumnName\n     * @param {string} valueColumnName\n     * @param {boolean} count\n     */\n    function IDBCursor(range, direction, store, source, keyColumnName, valueColumnName, count){\n        // Calling openCursor on an index or objectstore with null is allowed but we treat it as undefined internally\n        if (range === null) {\n            range = undefined;\n        }\n        if (range !== undefined && !(range instanceof idbModules.IDBKeyRange)) {\n            range = new idbModules.IDBKeyRange(range, range, false, false);\n        }\n        store.transaction.__assertActive();\n        if (direction !== undefined && [\"next\", \"prev\", \"nextunique\", \"prevunique\"].indexOf(direction) === -1) {\n            throw new TypeError(direction + \"is not a valid cursor direction\");\n        }\n\n        this.source = source;\n        this.direction = direction || \"next\";\n        this.key = undefined;\n        this.primaryKey = undefined;\n        this.__store = store;\n        this.__range = range;\n        this.__req = new idbModules.IDBRequest();\n        this.__keyColumnName = keyColumnName;\n        this.__valueColumnName = valueColumnName;\n        this.__valueDecoder = valueColumnName === \"value\" ? idbModules.Sca : idbModules.Key;\n        this.__count = count;\n        this.__offset = -1; // Setting this to -1 as continue will set it to 0 anyway\n        this.__lastKeyContinued = undefined; // Used when continuing with a key\n        this.__multiEntryIndex = source instanceof idbModules.IDBIndex ? source.multiEntry : false;\n        this.__unique = this.direction.indexOf(\"unique\") !== -1;\n\n        if (range !== undefined) {\n            // Encode the key range and cache the encoded values, so we don't have to re-encode them over and over\n            range.__lower = range.lower !== undefined && idbModules.Key.encode(range.lower, this.__multiEntryIndex);\n            range.__upper = range.upper !== undefined && idbModules.Key.encode(range.upper, this.__multiEntryIndex);\n        }\n\n        this[\"continue\"]();\n    }\n\n    IDBCursor.prototype.__find = function (/* key, tx, success, error, recordsToLoad */) {\n        var args = Array.prototype.slice.call(arguments);\n        if (this.__multiEntryIndex) {\n            this.__findMultiEntry.apply(this, args);\n        } else {\n            this.__findBasic.apply(this, args);\n        }\n    };\n\n    IDBCursor.prototype.__findBasic = function (key, tx, success, error, recordsToLoad) {\n        recordsToLoad = recordsToLoad || 1;\n\n        var me = this;\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined || me.__range.upper !== undefined )) {\n            sql.push(\"AND\");\n            if (me.__range.lower !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.lowerOpen ? \">\" : \">=\"), \"?\");\n                sqlValues.push(me.__range.__lower);\n            }\n            (me.__range.lower !== undefined && me.__range.upper !== undefined) && sql.push(\"AND\");\n            if (me.__range.upper !== undefined) {\n                sql.push(quotedKeyColumnName, (me.__range.upperOpen ? \"<\" : \"<=\"), \"?\");\n                sqlValues.push(me.__range.__upper);\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY\", quotedKeyColumnName, direction);\n            sql.push(\"LIMIT\", recordsToLoad, \"OFFSET\", me.__offset);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            if (me.__count) {\n                success(undefined, data.rows.length, undefined);\n            }\n            else if (data.rows.length > 1) {\n                me.__prefetchedData = data.rows;\n                me.__prefetchedIndex = 0;\n                idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for cursor\");\n                me.__decode(data.rows.item(0), success);\n            }\n            else if (data.rows.length === 1) {\n                me.__decode(data.rows.item(0), success);\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of cursors\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    IDBCursor.prototype.__findMultiEntry = function (key, tx, success, error) {\n        var me = this;\n\n        if (me.__prefetchedData && me.__prefetchedData.length === me.__prefetchedIndex) {\n            idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n            success(undefined, undefined, undefined);\n            return;\n        }\n\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\n        var sqlValues = [];\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\n        if (me.__range && (me.__range.lower !== undefined && me.__range.upper !== undefined)) {\n            if (me.__range.upper.indexOf(me.__range.lower) === 0) {\n                sql.push(\"AND\", quotedKeyColumnName, \"LIKE ?\");\n                sqlValues.push(\"%\" + me.__range.__lower.slice(0, -1) + \"%\");\n            }\n        }\n        if (typeof key !== \"undefined\") {\n            me.__lastKeyContinued = key;\n            me.__offset = 0;\n        }\n        if (me.__lastKeyContinued !== undefined) {\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\n            idbModules.Key.validate(me.__lastKeyContinued);\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\n        }\n\n        // Determine the ORDER BY direction based on the cursor.\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\n\n        if (!me.__count) {\n            sql.push(\"ORDER BY key\", direction);\n        }\n        sql = sql.join(\" \");\n        idbModules.DEBUG && console.log(sql, sqlValues);\n\n        me.__prefetchedData = null;\n        me.__prefetchedIndex = 0;\n        tx.executeSql(sql, sqlValues, function (tx, data) {\n            me.__multiEntryOffset = data.rows.length;\n\n            if (data.rows.length > 0) {\n                var rows = [];\n\n                for (var i = 0; i < data.rows.length; i++) {\n                    var rowItem = data.rows.item(i);\n                    var rowKey = idbModules.Key.decode(rowItem[me.__keyColumnName], true);\n                    var matches = idbModules.Key.findMultiEntryMatches(rowKey, me.__range);\n\n                    for (var j = 0; j < matches.length; j++) {\n                        var matchingKey = matches[j];\n                        var clone = {\n                            matchingKey: idbModules.Key.encode(matchingKey, true),\n                            key: rowItem.key\n                        };\n                        clone[me.__keyColumnName] = rowItem[me.__keyColumnName];\n                        clone[me.__valueColumnName] = rowItem[me.__valueColumnName];\n                        rows.push(clone);\n                    }\n                }\n\n                var reverse = me.direction.indexOf(\"prev\") === 0;\n                rows.sort(function (a, b) {\n                    if (a.matchingKey.replace('[','z') < b.matchingKey.replace('[','z')) {\n                        return reverse ? 1 : -1;\n                    }\n                    if (a.matchingKey.replace('[','z') > b.matchingKey.replace('[','z')) {\n                        return reverse ? -1 : 1;\n                    }\n                    if (a.key < b.key) {\n                        return me.direction === \"prev\" ? 1 : -1;\n                    }\n                    if (a.key > b.key) {\n                        return me.direction === \"prev\" ? -1 : 1;\n                    }\n                    return 0;\n                });\n\n                me.__prefetchedData = {\n                    data: rows,\n                    length: rows.length,\n                    item: function (index) {\n                        return this.data[index];\n                    }\n                };\n                me.__prefetchedIndex = 0;\n\n                if (me.__count) {\n                    success(undefined, rows.length, undefined);\n                }\n                else if (rows.length > 1) {\n                    idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else if (rows.length === 1) {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    me.__decode(rows[0], success);\n                } else {\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                    success(undefined, undefined, undefined);\n                }\n            }\n            else {\n                idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\n                success(undefined, undefined, undefined);\n            }\n        }, function (tx, err) {\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\n            error(err);\n        });\n    };\n\n    /**\n     * Creates an \"onsuccess\" callback\n     * @private\n     */\n    IDBCursor.prototype.__onsuccess = function(success) {\n        var me = this;\n        return function(key, value, primaryKey) {\n            if (me.__count) {\n                success(value, me.__req);\n            }\n            else {\n                me.key = key === undefined ? null : key;\n                me.value = value === undefined ? null : value;\n                me.primaryKey = primaryKey === undefined ? null : primaryKey;\n                var result = key === undefined ? null : me;\n                success(result, me.__req);\n            }\n        };\n    };\n\n    IDBCursor.prototype.__decode = function (rowItem, callback) {\n        if (this.__multiEntryIndex && this.__unique) {\n            if (!this.__matchedKeys) {\n                this.__matchedKeys = {};\n            }\n            if (this.__matchedKeys[rowItem.matchingKey]) {\n                callback(undefined, undefined, undefined);\n                return;\n            }\n            this.__matchedKeys[rowItem.matchingKey] = true;\n        }\n        var key = idbModules.Key.decode(this.__multiEntryIndex ? rowItem.matchingKey : rowItem[this.__keyColumnName], this.__multiEntryIndex);\n        var val = this.__valueDecoder.decode(rowItem[this.__valueColumnName]);\n        var primaryKey = idbModules.Key.decode(rowItem.key);\n        callback(key, val, primaryKey);\n    };\n\n    IDBCursor.prototype[\"continue\"] = function (key) {\n        var recordsToPreloadOnContinue = idbModules.cursorPreloadPackSize || 100;\n        var me = this;\n\n        this.__store.transaction.__pushToQueue(me.__req, function cursorContinue(tx, args, success, error) {\n            me.__offset++;\n\n            if (me.__prefetchedData) {\n                // We have pre-loaded data for the cursor\n                me.__prefetchedIndex++;\n                if (me.__prefetchedIndex < me.__prefetchedData.length) {\n                    me.__decode(me.__prefetchedData.item(me.__prefetchedIndex), me.__onsuccess(success));\n                    return;\n                }\n            }\n\n            // No pre-fetched data, do query\n            me.__find(key, tx, me.__onsuccess(success), error, recordsToPreloadOnContinue);\n        });\n    };\n\n    IDBCursor.prototype.advance = function(count){\n        if (count <= 0) {\n            throw idbModules.util.createDOMException(\"Type Error\", \"Count is invalid - 0 or negative\", count);\n        }\n        var me = this;\n        this.__store.transaction.__pushToQueue(me.__req, function cursorAdvance(tx, args, success, error){\n            me.__offset += count;\n            me.__find(undefined, tx, me.__onsuccess(success), error);\n        });\n    };\n\n    IDBCursor.prototype.update = function(valueToUpdate){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return me.__store.transaction.__addToTransactionQueue(function cursorUpdate(tx, args, success, error){\n            idbModules.Sca.encode(valueToUpdate, function(encoded) {\n                me.__find(undefined, tx, function(key, value, primaryKey){\n                    var store = me.__store;\n                    var params = [encoded];\n                    var sql = [\"UPDATE\", idbModules.util.quote(store.name), \"SET value = ?\"];\n                    idbModules.Key.validate(primaryKey);\n\n                    // Also correct the indexes in the table\n                    for (var i = 0; i < store.indexNames.length; i++) {\n                        var index = store.__indexes[store.indexNames[i]];\n                        var indexKey = idbModules.Key.getValue(valueToUpdate, index.keyPath);\n                        sql.push(\",\", idbModules.util.quote(index.name), \"= ?\");\n                        params.push(idbModules.Key.encode(indexKey, index.multiEntry));\n                    }\n\n                    sql.push(\"WHERE key = ?\");\n                    params.push(idbModules.Key.encode(primaryKey));\n\n                    idbModules.DEBUG && console.log(sql.join(\" \"), encoded, key, primaryKey);\n                    tx.executeSql(sql.join(\" \"), params, function(tx, data){\n                        me.__prefetchedData = null;\n                        me.__prefetchedIndex = 0;\n                        if (data.rowsAffected === 1) {\n                            success(key);\n                        }\n                        else {\n                            error(\"No rows with key found\" + key);\n                        }\n                    }, function(tx, data){\n                        error(data);\n                    });\n                }, error);\n            });\n        });\n    };\n\n    IDBCursor.prototype[\"delete\"] = function(){\n        var me = this;\n        me.__store.transaction.__assertWritable();\n        return this.__store.transaction.__addToTransactionQueue(function cursorDelete(tx, args, success, error){\n            me.__find(undefined, tx, function(key, value, primaryKey){\n                var sql = \"DELETE FROM  \" + idbModules.util.quote(me.__store.name) + \" WHERE key = ?\";\n                idbModules.DEBUG && console.log(sql, key, primaryKey);\n                idbModules.Key.validate(primaryKey);\n                tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data){\n                    me.__prefetchedData = null;\n                    me.__prefetchedIndex = 0;\n                    if (data.rowsAffected === 1) {\n                        // lower the offset or we will miss a row\n                        me.__offset--;\n                        success(undefined);\n                    }\n                    else {\n                        error(\"No rows with key found\" + key);\n                    }\n                }, function(tx, data){\n                    error(data);\n                });\n            }, error);\n        });\n    };\n\n    idbModules.IDBCursor = IDBCursor;\n}(idbModules));\n\n(function(idbModules, undefined) {\n    'use strict';\n\n    /**\n     * IDB Index\n     * http://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex\n     * @param {IDBObjectStore} store\n     * @param {IDBIndexProperties} indexProperties\n     * @constructor\n     */\n    function IDBIndex(store, indexProperties) {\n        this.objectStore = store;\n        this.name = indexProperties.columnName;\n        this.keyPath = indexProperties.keyPath;\n        this.multiEntry = indexProperties.optionalParams && indexProperties.optionalParams.multiEntry;\n        this.unique = indexProperties.optionalParams && indexProperties.optionalParams.unique;\n        this.__deleted = !!indexProperties.__deleted;\n    }\n\n    /**\n     * Clones an IDBIndex instance for a different IDBObjectStore instance.\n     * @param {IDBIndex} index\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBIndex.__clone = function(index, store) {\n        return new IDBIndex(store, {\n            columnName: index.name,\n            keyPath: index.keyPath,\n            optionalParams: {\n                multiEntry: index.multiEntry,\n                unique: index.unique\n            }\n        });\n    };\n\n    /**\n     * Creates a new index on an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @returns {IDBIndex}\n     * @protected\n     */\n    IDBIndex.__createIndex = function(store, index) {\n        var columnExists = !!store.__indexes[index.name] && store.__indexes[index.name].__deleted;\n\n        // Add the index to the IDBObjectStore\n        store.__indexes[index.name] = index;\n        store.indexNames.push(index.name);\n\n        // Create the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not create index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            function applyIndex(tx) {\n                // Update the object store's index list\n                IDBIndex.__updateIndexList(store, tx, function() {\n                    // Add index entries for all existing records\n                    tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(store.name), [], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Adding existing \" + store.name + \" records to the \" + index.name + \" index\");\n                        addIndexEntry(0);\n\n                        function addIndexEntry(i) {\n                            if (i < data.rows.length) {\n                                try {\n                                    var value = idbModules.Sca.decode(data.rows.item(i).value);\n                                    var indexKey = idbModules.Key.getValue(value, index.keyPath);\n                                    indexKey = idbModules.Key.encode(indexKey, index.multiEntry);\n\n                                    tx.executeSql(\"UPDATE \" + idbModules.util.quote(store.name) + \" set \" + idbModules.util.quote(index.name) + \" = ? where key = ?\", [indexKey, data.rows.item(i).key], function(tx, data) {\n                                        addIndexEntry(i + 1);\n                                    }, error);\n                                }\n                                catch (e) {\n                                    // Not a valid value to insert into index, so just continue\n                                    addIndexEntry(i + 1);\n                                }\n                            }\n                            else {\n                                success(store);\n                            }\n                        }\n                    }, error);\n                }, error);\n            }\n\n            if (columnExists) {\n                // For a previously existing index, just update the index entries in the existing column\n                applyIndex(tx);\n            }\n            else {\n                // For a new index, add a new column to the object store, then apply the index\n                var sql = [\"ALTER TABLE\", idbModules.util.quote(store.name), \"ADD\", idbModules.util.quote(index.name), \"BLOB\"].join(\" \");\n                idbModules.DEBUG && console.log(sql);\n                tx.executeSql(sql, [], applyIndex, error);\n            }\n        });\n    };\n\n    /**\n     * Deletes an index from an object store.\n     * @param {IDBObjectStore} store\n     * @param {IDBIndex} index\n     * @protected\n     */\n    IDBIndex.__deleteIndex = function(store, index) {\n        // Remove the index from the IDBObjectStore\n        store.__indexes[index.name].__deleted = true;\n        store.indexNames.splice(store.indexNames.indexOf(index.name), 1);\n\n        // Remove the index in WebSQL\n        var transaction = store.transaction;\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete index \\\"\" + index.name + \"\\\"\", err));\n            }\n\n            // Update the object store's index list\n            IDBIndex.__updateIndexList(store, tx, success, error);\n        });\n    };\n\n    /**\n     * Updates index list for the given object store.\n     * @param {IDBObjectStore} store\n     * @param {object} tx\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBIndex.__updateIndexList = function(store, tx, success, failure) {\n        var indexList = {};\n        for (var i = 0; i < store.indexNames.length; i++) {\n            var idx = store.__indexes[store.indexNames[i]];\n            /** @type {IDBIndexProperties} **/\n            indexList[idx.name] = {\n                columnName: idx.name,\n                keyPath: idx.keyPath,\n                optionalParams: {\n                    unique: idx.unique,\n                    multiEntry: idx.multiEntry\n                },\n                deleted: !!idx.deleted\n            };\n        }\n\n        idbModules.DEBUG && console.log(\"Updating the index list for \" + store.name, indexList);\n        tx.executeSql(\"UPDATE __sys__ set indexList = ? where name = ?\", [JSON.stringify(indexList), store.name], function() {\n            success(store);\n        }, failure);\n    };\n\n    /**\n     * Retrieves index data for the given key\n     * @param {*|IDBKeyRange} key\n     * @param {string} opType\n     * @returns {IDBRequest}\n     * @private\n     */\n    IDBIndex.prototype.__fetchIndexData = function(key, opType) {\n        var me = this;\n        var hasKey, encodedKey;\n\n        // key is optional\n        if (arguments.length === 1) {\n            opType = key;\n            hasKey = false;\n        }\n        else {\n            idbModules.Key.validate(key);\n            encodedKey = idbModules.Key.encode(key, me.multiEntry);\n            hasKey = true;\n        }\n\n        return me.objectStore.transaction.__addToTransactionQueue(function fetchIndexData(tx, args, success, error) {\n            var sql = [\"SELECT * FROM\", idbModules.util.quote(me.objectStore.name), \"WHERE\", idbModules.util.quote(me.name), \"NOT NULL\"];\n            var sqlValues = [];\n            if (hasKey) {\n                if (me.multiEntry) {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"LIKE ?\");\n                    sqlValues.push(\"%\" + encodedKey + \"%\");\n                }\n                else {\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"= ?\");\n                    sqlValues.push(encodedKey);\n                }\n            }\n            idbModules.DEBUG && console.log(\"Trying to fetch data for Index\", sql.join(\" \"), sqlValues);\n            tx.executeSql(sql.join(\" \"), sqlValues, function(tx, data) {\n                var recordCount = 0, record = null;\n                if (me.multiEntry) {\n                    for (var i = 0; i < data.rows.length; i++) {\n                        var row = data.rows.item(i);\n                        var rowKey = idbModules.Key.decode(row[me.name]);\n                        if (hasKey && idbModules.Key.isMultiEntryMatch(encodedKey, row[me.name])) {\n                            recordCount++;\n                            record = record || row;\n                        }\n                        else if (!hasKey && rowKey !== undefined) {\n                            recordCount = recordCount + (rowKey instanceof Array ? rowKey.length : 1);\n                            record = record || row;\n                        }\n                    }\n                }\n                else {\n                    recordCount = data.rows.length;\n                    record = recordCount && data.rows.item(0);\n                }\n\n                if (opType === \"count\") {\n                    success(recordCount);\n                }\n                else if (recordCount === 0) {\n                    success(undefined);\n                }\n                else if (opType === \"key\") {\n                    success(idbModules.Key.decode(record.key));\n                }\n                else { // when opType is value\n                    success(idbModules.Sca.decode(record.value));\n                }\n            }, error);\n        });\n    };\n\n    /**\n     * Opens a cursor over the given key range.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"value\").__req;\n    };\n\n    /**\n     * Opens a cursor over the given key range.  The cursor only includes key values, not data.\n     * @param {IDBKeyRange} range\n     * @param {string} direction\n     * @returns {IDBRequest}\n     */\n    IDBIndex.prototype.openKeyCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"key\").__req;\n    };\n\n    IDBIndex.prototype.get = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"value\");\n    };\n\n    IDBIndex.prototype.getKey = function(key) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        return this.__fetchIndexData(key, \"key\");\n    };\n\n    IDBIndex.prototype.count = function(key) {\n        // key is optional\n        if (key === undefined) {\n            return this.__fetchIndexData(\"count\");\n        }\n        else if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this.objectStore, this, this.name, \"value\", true).__req;\n        }\n        else {\n            return this.__fetchIndexData(key, \"count\");\n        }\n    };\n\n    idbModules.IDBIndex = IDBIndex;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    /**\n     * IndexedDB Object Store\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBObjectStore\n     * @param {IDBObjectStoreProperties} storeProperties\n     * @param {IDBTransaction} transaction\n     * @constructor\n     */\n    function IDBObjectStore(storeProperties, transaction) {\n        this.name = storeProperties.name;\n        this.keyPath = JSON.parse(storeProperties.keyPath);\n        this.transaction = transaction;\n\n        // autoInc is numeric (0/1) on WinPhone\n        this.autoIncrement = typeof storeProperties.autoInc === \"string\" ? storeProperties.autoInc === \"true\" : !!storeProperties.autoInc;\n\n        this.__indexes = {};\n        this.indexNames = new idbModules.util.StringList();\n        var indexList = JSON.parse(storeProperties.indexList);\n        for (var indexName in indexList) {\n            if (indexList.hasOwnProperty(indexName)) {\n                var index = new idbModules.IDBIndex(this, indexList[indexName]);\n                this.__indexes[index.name] = index;\n                if (!index.__deleted) {\n                    this.indexNames.push(index.name);\n                }\n            }\n        }\n    }\n\n    /**\n     * Clones an IDBObjectStore instance for a different IDBTransaction instance.\n     * @param {IDBObjectStore} store\n     * @param {IDBTransaction} transaction\n     * @protected\n     */\n    IDBObjectStore.__clone = function(store, transaction) {\n        var newStore = new IDBObjectStore({\n            name: store.name,\n            keyPath: JSON.stringify(store.keyPath),\n            autoInc: JSON.stringify(store.autoIncrement),\n            indexList: \"{}\"\n        }, transaction);\n        newStore.__indexes = store.__indexes;\n        newStore.indexNames = store.indexNames;\n        return newStore;\n    };\n\n    /**\n     * Creates a new object store in the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__createObjectStore = function(db, store) {\n        // Add the object store to the IDBDatabase\n        db.__objectStores[store.name] = store;\n        db.objectStoreNames.push(store.name);\n\n        // Add the object store to WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function createObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                throw idbModules.util.createDOMException(0, \"Could not create object store \\\"\" + store.name + \"\\\"\", err);\n            }\n\n            //key INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL UNIQUE\n            var sql = [\"CREATE TABLE\", idbModules.util.quote(store.name), \"(key BLOB\", store.autoIncrement ? \"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT\" : \"PRIMARY KEY\", \", value BLOB)\"].join(\" \");\n            idbModules.DEBUG && console.log(sql);\n            tx.executeSql(sql, [], function(tx, data) {\n                tx.executeSql(\"INSERT INTO __sys__ VALUES (?,?,?,?)\", [store.name, JSON.stringify(store.keyPath), store.autoIncrement, \"{}\"], function() {\n                    success(store);\n                }, error);\n            }, error);\n        });\n    };\n\n    /**\n     * Deletes an object store from the database.\n     * @param {IDBDatabase} db\n     * @param {IDBObjectStore} store\n     * @protected\n     */\n    IDBObjectStore.__deleteObjectStore = function(db, store) {\n        // Remove the object store from the IDBDatabase\n        db.__objectStores[store.name] = undefined;\n        db.objectStoreNames.splice(db.objectStoreNames.indexOf(store.name), 1);\n\n        // Remove the object store from WebSQL\n        var transaction = db.__versionTransaction;\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\n        transaction.__addToTransactionQueue(function deleteObjectStore(tx, args, success, failure) {\n            function error(tx, err) {\n                failure(idbModules.util.createDOMException(0, \"Could not delete ObjectStore\", err));\n            }\n\n            tx.executeSql(\"SELECT * FROM __sys__ where name = ?\", [store.name], function(tx, data) {\n                if (data.rows.length > 0) {\n                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(store.name), [], function() {\n                        tx.executeSql(\"DELETE FROM __sys__ WHERE name = ?\", [store.name], function() {\n                            success();\n                        }, error);\n                    }, error);\n                }\n            });\n        });\n    };\n\n    /**\n     * Determines whether the given inline or out-of-line key is valid, according to the object store's schema.\n     * @param {*} value     Used for inline keys\n     * @param {*} key       Used for out-of-line keys\n     * @private\n     */\n    IDBObjectStore.prototype.__validateKey = function(value, key) {\n        if (this.keyPath) {\n            if (typeof key !== \"undefined\") {\n                throw idbModules.util.createDOMException(\"DataError\", \"The object store uses in-line keys and the key parameter was provided\", this);\n            }\n            else if (value && typeof value === \"object\") {\n                key = idbModules.Key.getValue(value, this.keyPath);\n                if (key === undefined) {\n                    if (this.autoIncrement) {\n                        // A key will be generated\n                        return;\n                    }\n                    else {\n                        throw idbModules.util.createDOMException(\"DataError\", \"Could not eval key from keyPath\");\n                    }\n                }\n            }\n            else {\n                throw idbModules.util.createDOMException(\"DataError\", \"KeyPath was specified, but value was not an object\");\n            }\n        }\n        else {\n            if (typeof key === \"undefined\") {\n                if (this.autoIncrement) {\n                    // A key will be generated\n                    return;\n                }\n                else {\n                    throw idbModules.util.createDOMException(\"DataError\", \"The object store uses out-of-line keys and has no key generator and the key parameter was not provided. \", this);\n                }\n            }\n        }\n\n        idbModules.Key.validate(key);\n    };\n\n    /**\n     * From the store properties and object, extracts the value for the key in hte object Store\n     * If the table has auto increment, get the next in sequence\n     * @param {Object} tx\n     * @param {Object} value\n     * @param {Object} key\n     * @param {function} success\n     * @param {function} failure\n     */\n    IDBObjectStore.prototype.__deriveKey = function(tx, value, key, success, failure) {\n        var me = this;\n\n        function getNextAutoIncKey(callback) {\n            tx.executeSql(\"SELECT * FROM sqlite_sequence where name like ?\", [me.name], function(tx, data) {\n                if (data.rows.length !== 1) {\n                    callback(1);\n                }\n                else {\n                    callback(data.rows.item(0).seq + 1);\n                }\n            }, function(tx, error) {\n                failure(idbModules.util.createDOMException(\"DataError\", \"Could not get the auto increment value for key\", error));\n            });\n        }\n\n        if (me.keyPath) {\n            var primaryKey = idbModules.Key.getValue(value, me.keyPath);\n            if (primaryKey === undefined && me.autoIncrement) {\n                getNextAutoIncKey(function(primaryKey) {\n                    try {\n                        // Update the value with the new key\n                        idbModules.Key.setValue(value, me.keyPath, primaryKey);\n                        success(primaryKey);\n                    }\n                    catch (e) {\n                        failure(idbModules.util.createDOMException(\"DataError\", \"Could not assign a generated value to the keyPath\", e));\n                    }\n                });\n            }\n            else {\n                success(primaryKey);\n            }\n        }\n        else {\n            if (typeof key === \"undefined\" && me.autoIncrement) {\n                // Looks like this has autoInc, so lets get the next in sequence and return that.\n                getNextAutoIncKey(success);\n            }\n            else {\n                success(key);\n            }\n        }\n    };\n\n    IDBObjectStore.prototype.__insertData = function(tx, encoded, value, primaryKey, success, error) {\n        try {\n            var paramMap = {};\n            if (typeof primaryKey !== \"undefined\") {\n                idbModules.Key.validate(primaryKey);\n                paramMap.key = idbModules.Key.encode(primaryKey);\n            }\n            for (var i = 0; i < this.indexNames.length; i++) {\n                var index = this.__indexes[this.indexNames[i]];\n                paramMap[index.name] = idbModules.Key.encode(idbModules.Key.getValue(value, index.keyPath), index.multiEntry);\n            }\n            var sqlStart = [\"INSERT INTO \", idbModules.util.quote(this.name), \"(\"];\n            var sqlEnd = [\" VALUES (\"];\n            var sqlValues = [];\n            for (var key in paramMap) {\n                sqlStart.push(idbModules.util.quote(key) + \",\");\n                sqlEnd.push(\"?,\");\n                sqlValues.push(paramMap[key]);\n            }\n            // removing the trailing comma\n            sqlStart.push(\"value )\");\n            sqlEnd.push(\"?)\");\n            sqlValues.push(encoded);\n\n            var sql = sqlStart.join(\" \") + sqlEnd.join(\" \");\n\n            idbModules.DEBUG && console.log(\"SQL for adding\", sql, sqlValues);\n            tx.executeSql(sql, sqlValues, function(tx, data) {\n                idbModules.Sca.encode(primaryKey, function(primaryKey) {\n                    primaryKey = idbModules.Sca.decode(primaryKey);\n                    success(primaryKey);\n                });\n            }, function(tx, err) {\n                error(idbModules.util.createDOMError(\"ConstraintError\", err.message, err));\n            });\n        }\n        catch (e) {\n            error(e);\n        }\n    };\n\n    IDBObjectStore.prototype.add = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStoreAdd(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    me.__insertData(tx, encoded, value, primaryKey, success, error);\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.put = function(value, key) {\n        var me = this;\n        if (arguments.length === 0) {\n            throw new TypeError(\"No value was specified\");\n        }\n        this.__validateKey(value, key);\n        me.transaction.__assertWritable();\n\n        var request = me.transaction.__createRequest();\n        me.transaction.__pushToQueue(request, function objectStorePut(tx, args, success, error) {\n            me.__deriveKey(tx, value, key, function(primaryKey) {\n                idbModules.Sca.encode(value, function(encoded) {\n                    // First try to delete if the record exists\n                    idbModules.Key.validate(primaryKey);\n                    var sql = \"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\";\n                    tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data) {\n                        idbModules.DEBUG && console.log(\"Did the row with the\", primaryKey, \"exist? \", data.rowsAffected);\n                        me.__insertData(tx, encoded, value, primaryKey, success, error);\n                    }, function(tx, err) {\n                        error(err);\n                    });\n                });\n            }, error);\n        });\n        return request;\n    };\n\n    IDBObjectStore.prototype.get = function(key) {\n        // TODO Key should also be a key range\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        return me.transaction.__addToTransactionQueue(function objectStoreGet(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Fetched data\", data);\n                var value;\n                try {\n                    // Opera can't deal with the try-catch here.\n                    if (0 === data.rows.length) {\n                        return success();\n                    }\n\n                    value = idbModules.Sca.decode(data.rows.item(0).value);\n                }\n                catch (e) {\n                    // If no result is returned, or error occurs when parsing JSON\n                    idbModules.DEBUG && console.log(e);\n                }\n                success(value);\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype[\"delete\"] = function(key) {\n        var me = this;\n\n        if (arguments.length === 0) {\n            throw new TypeError(\"No key was specified\");\n        }\n\n        me.transaction.__assertWritable();\n        idbModules.Key.validate(key);\n        var primaryKey = idbModules.Key.encode(key);\n        // TODO key should also support key ranges\n        return me.transaction.__addToTransactionQueue(function objectStoreDelete(tx, args, success, error) {\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Deleted from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.clear = function() {\n        var me = this;\n        me.transaction.__assertWritable();\n        return me.transaction.__addToTransactionQueue(function objectStoreClear(tx, args, success, error) {\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name), [], function(tx, data) {\n                idbModules.DEBUG && console.log(\"Cleared all records from database\", data.rowsAffected);\n                success();\n            }, function(tx, err) {\n                error(err);\n            });\n        });\n    };\n\n    IDBObjectStore.prototype.count = function(key) {\n        if (key instanceof idbModules.IDBKeyRange) {\n            return new idbModules.IDBCursor(key, \"next\", this, this, \"key\", \"value\", true).__req;\n        }\n        else {\n            var me = this;\n            var hasKey = false;\n\n            // key is optional\n            if (key !== undefined) {\n                hasKey = true;\n                idbModules.Key.validate(key);\n            }\n\n            return me.transaction.__addToTransactionQueue(function objectStoreCount(tx, args, success, error) {\n                var sql = \"SELECT * FROM \" + idbModules.util.quote(me.name) + (hasKey ? \" WHERE key = ?\" : \"\");\n                var sqlValues = [];\n                hasKey && sqlValues.push(idbModules.Key.encode(key));\n                tx.executeSql(sql, sqlValues, function(tx, data) {\n                    success(data.rows.length);\n                }, function(tx, err) {\n                    error(err);\n                });\n            });\n        }\n    };\n\n    IDBObjectStore.prototype.openCursor = function(range, direction) {\n        return new idbModules.IDBCursor(range, direction, this, this, \"key\", \"value\").__req;\n    };\n\n    IDBObjectStore.prototype.index = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n\n        return idbModules.IDBIndex.__clone(index, this);\n    };\n\n    /**\n     * Creates a new index on the object store.\n     * @param {string} indexName\n     * @param {string} keyPath\n     * @param {object} optionalParameters\n     * @returns {IDBIndex}\n     */\n    IDBObjectStore.prototype.createIndex = function(indexName, keyPath, optionalParameters) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        if (arguments.length === 1) {\n            throw new TypeError(\"No key path was specified\");\n        }\n        if (keyPath instanceof Array && optionalParameters && optionalParameters.multiEntry) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"The keyPath argument was an array and the multiEntry option is true.\");\n        }\n        if (this.__indexes[indexName] && !this.__indexes[indexName].__deleted) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Index \\\"\" + indexName + \"\\\" already exists on \" + this.name);\n        }\n\n        this.transaction.__assertVersionChange();\n\n        optionalParameters = optionalParameters || {};\n        /** @name IDBIndexProperties **/\n        var indexProperties = {\n            columnName: indexName,\n            keyPath: keyPath,\n            optionalParams: {\n                unique: !!optionalParameters.unique,\n                multiEntry: !!optionalParameters.multiEntry\n            }\n        };\n        var index = new idbModules.IDBIndex(this, indexProperties);\n        idbModules.IDBIndex.__createIndex(this, index);\n        return index;\n    };\n\n    IDBObjectStore.prototype.deleteIndex = function(indexName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No index name was specified\");\n        }\n        var index = this.__indexes[indexName];\n        if (!index) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\n        }\n        this.transaction.__assertVersionChange();\n\n        idbModules.IDBIndex.__deleteIndex(this, index);\n    };\n\n    idbModules.IDBObjectStore = IDBObjectStore;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var uniqueID = 0;\n\n    /**\n     * The IndexedDB Transaction\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBTransaction\n     * @param {IDBDatabase} db\n     * @param {string[]} storeNames\n     * @param {string} mode\n     * @constructor\n     */\n    function IDBTransaction(db, storeNames, mode) {\n        this.__id = ++uniqueID; // for debugging simultaneous transactions\n        this.__active = true;\n        this.__running = false;\n        this.__errored = false;\n        this.__requests = [];\n        this.__storeNames = storeNames;\n        this.mode = mode;\n        this.db = db;\n        this.error = null;\n        this.onabort = this.onerror = this.oncomplete = null;\n\n        // Kick off the transaction as soon as all synchronous code is done.\n        var me = this;\n        setTimeout(function() { me.__executeRequests(); }, 0);\n    }\n\n    IDBTransaction.prototype.__executeRequests = function() {\n        if (this.__running) {\n            idbModules.DEBUG && console.log(\"Looks like the request set is already running\", this.mode);\n            return;\n        }\n\n        this.__running = true;\n        var me = this;\n\n        me.db.__db.transaction(function executeRequests(tx) {\n                me.__tx = tx;\n                var q = null, i = 0;\n\n                function success(result, req) {\n                    if (req) {\n                        q.req = req;// Need to do this in case of cursors\n                    }\n                    q.req.readyState = \"done\";\n                    q.req.result = result;\n                    delete q.req.error;\n                    var e = idbModules.util.createEvent(\"success\");\n                    idbModules.util.callback(\"onsuccess\", q.req, e);\n                    i++;\n                    executeNextRequest();\n                }\n\n                function error(tx, err) {\n                    err = idbModules.util.findError(arguments);\n                    try {\n                        // Fire an error event for the current IDBRequest\n                        q.req.readyState = \"done\";\n                        q.req.error = err || \"DOMError\";\n                        q.req.result = undefined;\n                        var e = idbModules.util.createEvent(\"error\", err);\n                        idbModules.util.callback(\"onerror\", q.req, e);\n                    }\n                    finally {\n                        // Fire an error event for the transaction\n                        transactionError(err);\n                    }\n                }\n\n                function executeNextRequest() {\n                    if (i >= me.__requests.length) {\n                        // All requests in the transaction are done\n                        me.__requests = [];\n                        if (me.__active) {\n                            me.__active = false;\n                            transactionFinished();\n                        }\n                    }\n                    else {\n                        try {\n                            q = me.__requests[i];\n                            q.op(tx, q.args, success, error);\n                        }\n                        catch (e) {\n                            error(e);\n                        }\n                    }\n                }\n\n                executeNextRequest();\n            },\n\n            function webSqlError(err) {\n                transactionError(err);\n            }\n        );\n\n        function transactionError(err) {\n            idbModules.util.logError(\"Error\", \"An error occurred in a transaction\", err);\n\n            if (me.__errored) {\n                // We've already called \"onerror\", \"onabort\", or thrown, so don't do it again.\n                return;\n            }\n\n            me.__errored = true;\n\n            if (!me.__active) {\n                // The transaction has already completed, so we can't call \"onerror\" or \"onabort\".\n                // So throw the error instead.\n                throw err;\n            }\n\n            try {\n                me.error = err;\n                var evt = idbModules.util.createEvent(\"error\");\n                idbModules.util.callback(\"onerror\", me, evt);\n                idbModules.util.callback(\"onerror\", me.db, evt);\n            }\n            finally {\n                me.abort();\n            }\n        }\n\n        function transactionFinished() {\n            idbModules.DEBUG && console.log(\"Transaction completed\");\n            var evt = idbModules.util.createEvent(\"complete\");\n            try {\n                idbModules.util.callback(\"oncomplete\", me, evt);\n                idbModules.util.callback(\"__oncomplete\", me, evt);\n            }\n            catch (e) {\n                // An error occurred in the \"oncomplete\" handler.\n                // It's too late to call \"onerror\" or \"onabort\". Throw a global error instead.\n                // (this may seem odd/bad, but it's how all native IndexedDB implementations work)\n                me.__errored = true;\n                throw e;\n            }\n        }\n    };\n\n    /**\n     * Creates a new IDBRequest for the transaction.\n     * NOTE: The transaction is not queued util you call {@link IDBTransaction#__pushToQueue}\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__createRequest = function() {\n        var request = new idbModules.IDBRequest();\n        request.source = this.db;\n        request.transaction = this;\n        return request;\n    };\n\n    /**\n     * Adds a callback function to the transaction queue\n     * @param {function} callback\n     * @param {*} args\n     * @returns {IDBRequest}\n     * @protected\n     */\n    IDBTransaction.prototype.__addToTransactionQueue = function(callback, args) {\n        var request = this.__createRequest();\n        this.__pushToQueue(request, callback, args);\n        return request;\n    };\n\n    /**\n     * Adds an IDBRequest to the transaction queue\n     * @param {IDBRequest} request\n     * @param {function} callback\n     * @param {*} args\n     * @protected\n     */\n    IDBTransaction.prototype.__pushToQueue = function(request, callback, args) {\n        this.__assertActive();\n        this.__requests.push({\n            \"op\": callback,\n            \"args\": args,\n            \"req\": request\n        });\n    };\n\n    IDBTransaction.prototype.__assertActive = function() {\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"TransactionInactiveError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertWritable = function() {\n        if (this.mode === IDBTransaction.READ_ONLY) {\n            throw idbModules.util.createDOMException(\"ReadOnlyError\", \"The transaction is read only\");\n        }\n    };\n\n    IDBTransaction.prototype.__assertVersionChange = function() {\n        IDBTransaction.__assertVersionChange(this);\n    };\n\n    IDBTransaction.__assertVersionChange = function(tx) {\n        if (!tx || tx.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"Not a version transaction\");\n        }\n    };\n\n    /**\n     * Returns the specified object store.\n     * @param {string} objectStoreName\n     * @returns {IDBObjectStore}\n     */\n    IDBTransaction.prototype.objectStore = function(objectStoreName) {\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (!this.__active) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\n        }\n        if (this.__storeNames.indexOf(objectStoreName) === -1 && this.mode !== IDBTransaction.VERSION_CHANGE) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" is not participating in this transaction\");\n        }\n        var store = this.db.__objectStores[objectStoreName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" does not exist in \" + this.db.name);\n        }\n\n        return idbModules.IDBObjectStore.__clone(store, this);\n    };\n\n    IDBTransaction.prototype.abort = function() {\n        var me = this;\n        idbModules.DEBUG && console.log(\"The transaction was aborted\", me);\n        me.__active = false;\n        var evt = idbModules.util.createEvent(\"abort\");\n\n        // Fire the \"onabort\" event asynchronously, so errors don't bubble\n        setTimeout(function() {\n            idbModules.util.callback(\"onabort\", me, evt);\n        }, 0);\n    };\n\n    IDBTransaction.READ_ONLY = \"readonly\";\n    IDBTransaction.READ_WRITE = \"readwrite\";\n    IDBTransaction.VERSION_CHANGE = \"versionchange\";\n\n    idbModules.IDBTransaction = IDBTransaction;\n}(idbModules));\n\n(function(idbModules){\n    'use strict';\n\n    /**\n     * IDB Database Object\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#database-interface\n     * @constructor\n     */\n    function IDBDatabase(db, name, version, storeProperties){\n        this.__db = db;\n        this.__closed = false;\n        this.version = version;\n        this.name = name;\n        this.onabort = this.onerror = this.onversionchange = null;\n\n        this.__objectStores = {};\n        this.objectStoreNames = new idbModules.util.StringList();\n        for (var i = 0; i < storeProperties.rows.length; i++) {\n            var store = new idbModules.IDBObjectStore(storeProperties.rows.item(i));\n            this.__objectStores[store.name] = store;\n            this.objectStoreNames.push(store.name);\n        }\n    }\n\n    /**\n     * Creates a new object store.\n     * @param {string} storeName\n     * @param {object} [createOptions]\n     * @returns {IDBObjectStore}\n     */\n    IDBDatabase.prototype.createObjectStore = function(storeName, createOptions){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        if (this.__objectStores[storeName]) {\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Object store \\\"\" + storeName + \"\\\" already exists in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        createOptions = createOptions || {};\n        /** @name IDBObjectStoreProperties **/\n        var storeProperties = {\n            name: storeName,\n            keyPath: JSON.stringify(createOptions.keyPath || null),\n            autoInc: JSON.stringify(createOptions.autoIncrement),\n            indexList: \"{}\"\n        };\n        var store = new idbModules.IDBObjectStore(storeProperties, this.__versionTransaction);\n        idbModules.IDBObjectStore.__createObjectStore(this, store);\n        return store;\n    };\n\n    /**\n     * Deletes an object store.\n     * @param {string} storeName\n     */\n    IDBDatabase.prototype.deleteObjectStore = function(storeName){\n        if (arguments.length === 0) {\n            throw new TypeError(\"No object store name was specified\");\n        }\n        var store = this.__objectStores[storeName];\n        if (!store) {\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Object store \\\"\" + storeName + \"\\\" does not exist in \" + this.name);\n        }\n        this.__versionTransaction.__assertVersionChange();\n\n        idbModules.IDBObjectStore.__deleteObjectStore(this, store);\n    };\n\n    IDBDatabase.prototype.close = function(){\n        this.__closed = true;\n    };\n\n    /**\n     * Starts a new transaction.\n     * @param {string|string[]} storeNames\n     * @param {string} mode\n     * @returns {IDBTransaction}\n     */\n    IDBDatabase.prototype.transaction = function(storeNames, mode){\n        if (this.__closed) {\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"An attempt was made to start a new transaction on a database connection that is not open\");\n        }\n\n        if (typeof mode === \"number\") {\n            mode = mode === 1 ? IDBTransaction.READ_WRITE : IDBTransaction.READ_ONLY;\n            idbModules.DEBUG && console.log(\"Mode should be a string, but was specified as \", mode);\n        }\n        else {\n            mode = mode || IDBTransaction.READ_ONLY;\n        }\n\n        if (mode !== IDBTransaction.READ_ONLY && mode !== IDBTransaction.READ_WRITE) {\n            throw new TypeError(\"Invalid transaction mode: \" + mode);\n        }\n\n        storeNames = typeof storeNames === \"string\" ? [storeNames] : storeNames;\n        if (storeNames.length === 0) {\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"No object store names were specified\");\n        }\n        for (var i = 0; i < storeNames.length; i++) {\n            if (!this.objectStoreNames.contains(storeNames[i])) {\n                throw idbModules.util.createDOMException(\"NotFoundError\", \"The \\\"\" + storeNames[i] + \"\\\" object store does not exist\");\n            }\n        }\n\n        var transaction = new idbModules.IDBTransaction(this, storeNames, mode);\n        return transaction;\n    };\n    \n    idbModules.IDBDatabase = IDBDatabase;\n}(idbModules));\n\n(function(idbModules) {\n    'use strict';\n\n    var DEFAULT_DB_SIZE = 4 * 1024 * 1024;\n    var sysdb;\n\n    /**\n     * Craetes the sysDB to keep track of version numbers for databases\n     **/\n    function createSysDB(success, failure) {\n        function sysDbCreateError(tx, err) {\n            err = idbModules.util.findError(arguments);\n            idbModules.DEBUG && console.log(\"Error in sysdb transaction - when creating dbVersions\", err);\n            failure(err);\n        }\n\n        if (sysdb) {\n            success();\n        }\n        else {\n            sysdb = window.openDatabase(\"__sysdb__\", 1, \"System Database\", DEFAULT_DB_SIZE);\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);\", [], success, sysDbCreateError);\n            }, sysDbCreateError);\n        }\n    }\n\n    /**\n     * IDBFactory Class\n     * https://w3c.github.io/IndexedDB/#idl-def-IDBFactory\n     * @constructor\n     */\n    function IDBFactory() {\n        this.modules = idbModules;\n    }\n\n    /**\n     * The IndexedDB Method to create a new database and return the DB\n     * @param {string} name\n     * @param {number} version\n     */\n    IDBFactory.prototype.open = function(name, version) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDbCreateError = false;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        else if (arguments.length === 2) {\n            version = parseFloat(version);\n            if (isNaN(version) || !isFinite(version) || version <= 0) {\n                throw new TypeError('Invalid database version: ' + version);\n            }\n        }\n        name = name + ''; // cast to a string\n\n        function dbCreateError(tx, err) {\n            if (calledDbCreateError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            calledDbCreateError = true;\n            var evt = idbModules.util.createEvent(\"error\", arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            idbModules.util.callback(\"onerror\", req, evt);\n        }\n\n        function openDB(oldVersion) {\n            var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n            req.readyState = \"done\";\n            if (typeof version === \"undefined\") {\n                version = oldVersion || 1;\n            }\n            if (version <= 0 || oldVersion > version) {\n                var err = idbModules.util.createDOMError(\"VersionError\", \"An attempt was made to open a database using a lower version than the existing version.\", version);\n                dbCreateError(err);\n                return;\n            }\n\n            db.transaction(function(tx) {\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)\", [], function() {\n                    tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                        var e = idbModules.util.createEvent(\"success\");\n                        req.source = req.result = new idbModules.IDBDatabase(db, name, version, data);\n                        if (oldVersion < version) {\n                            // DB Upgrade in progress\n                            sysdb.transaction(function(systx) {\n                                systx.executeSql(\"UPDATE dbVersions set version = ? where name = ?\", [version, name], function() {\n                                    var e = idbModules.util.createEvent(\"upgradeneeded\");\n                                    e.oldVersion = oldVersion;\n                                    e.newVersion = version;\n                                    req.transaction = req.result.__versionTransaction = new idbModules.IDBTransaction(req.source, [], idbModules.IDBTransaction.VERSION_CHANGE);\n                                    req.transaction.__addToTransactionQueue(function onupgradeneeded(tx, args, success) {\n                                        idbModules.util.callback(\"onupgradeneeded\", req, e);\n                                        success();\n                                    });\n                                    req.transaction.__oncomplete = function() {\n                                        req.transaction = null;\n                                        var e = idbModules.util.createEvent(\"success\");\n                                        idbModules.util.callback(\"onsuccess\", req, e);\n                                    };\n                                }, dbCreateError);\n                            }, dbCreateError);\n                        } else {\n                            idbModules.util.callback(\"onsuccess\", req, e);\n                        }\n                    }, dbCreateError);\n                }, dbCreateError);\n            }, dbCreateError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(tx) {\n                tx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        // Database with this name does not exist\n                        tx.executeSql(\"INSERT INTO dbVersions VALUES (?,?)\", [name, version || 1], function() {\n                            openDB(0);\n                        }, dbCreateError);\n                    } else {\n                        openDB(data.rows.item(0).version);\n                    }\n                }, dbCreateError);\n            }, dbCreateError);\n        }, dbCreateError);\n\n        return req;\n    };\n\n    /**\n     * Deletes a database\n     * @param {string} name\n     * @returns {IDBOpenDBRequest}\n     */\n    IDBFactory.prototype.deleteDatabase = function(name) {\n        var req = new idbModules.IDBOpenDBRequest();\n        var calledDBError = false;\n        var version = null;\n\n        if (arguments.length === 0) {\n            throw new TypeError('Database name is required');\n        }\n        name = name + ''; // cast to a string\n\n        function dbError(tx, err) {\n            if (calledDBError) {\n                return;\n            }\n            err = idbModules.util.findError(arguments);\n            req.readyState = \"done\";\n            req.error = err || \"DOMError\";\n            var e = idbModules.util.createEvent(\"error\");\n            e.debug = arguments;\n            idbModules.util.callback(\"onerror\", req, e);\n            calledDBError = true;\n        }\n\n        function deleteFromDbVersions() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"DELETE FROM dbVersions where name = ? \", [name], function() {\n                    req.result = undefined;\n                    var e = idbModules.util.createEvent(\"success\");\n                    e.newVersion = null;\n                    e.oldVersion = version;\n                    idbModules.util.callback(\"onsuccess\", req, e);\n                }, dbError);\n            }, dbError);\n        }\n\n        createSysDB(function() {\n            sysdb.transaction(function(systx) {\n                systx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\n                    if (data.rows.length === 0) {\n                        req.result = undefined;\n                        var e = idbModules.util.createEvent(\"success\");\n                        e.newVersion = null;\n                        e.oldVersion = version;\n                        idbModules.util.callback(\"onsuccess\", req, e);\n                        return;\n                    }\n                    version = data.rows.item(0).version;\n                    var db = window.openDatabase(name, 1, name, DEFAULT_DB_SIZE);\n                    db.transaction(function(tx) {\n                        tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\n                            var tables = data.rows;\n                            (function deleteTables(i) {\n                                if (i >= tables.length) {\n                                    // If all tables are deleted, delete the housekeeping tables\n                                    tx.executeSql(\"DROP TABLE IF EXISTS __sys__\", [], function() {\n                                        // Finally, delete the record for this DB from sysdb\n                                        deleteFromDbVersions();\n                                    }, dbError);\n                                } else {\n                                    // Delete all tables in this database, maintained in the sys table\n                                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(tables.item(i).name), [], function() {\n                                        deleteTables(i + 1);\n                                    }, function() {\n                                        deleteTables(i + 1);\n                                    });\n                                }\n                            }(0));\n                        }, function(e) {\n                            // __sysdb table does not exist, but that does not mean delete did not happen\n                            deleteFromDbVersions();\n                        });\n                    });\n                }, dbError);\n            }, dbError);\n        }, dbError);\n\n        return req;\n    };\n\n    /**\n     * Compares two keys\n     * @param key1\n     * @param key2\n     * @returns {number}\n     */\n    IDBFactory.prototype.cmp = function(key1, key2) {\n        if (arguments.length < 2) {\n            throw new TypeError(\"You must provide two keys to be compared\");\n        }\n\n        idbModules.Key.validate(key1);\n        idbModules.Key.validate(key2);\n        var encodedKey1 = idbModules.Key.encode(key1);\n        var encodedKey2 = idbModules.Key.encode(key2);\n        var result = encodedKey1 > encodedKey2 ? 1 : encodedKey1 === encodedKey2 ? 0 : -1;\n        \n        if (idbModules.DEBUG) {\n            // verify that the keys encoded correctly\n            var decodedKey1 = idbModules.Key.decode(encodedKey1);\n            var decodedKey2 = idbModules.Key.decode(encodedKey2);\n            if (typeof key1 === \"object\") {\n                key1 = JSON.stringify(key1);\n                decodedKey1 = JSON.stringify(decodedKey1);\n            }\n            if (typeof key2 === \"object\") {\n                key2 = JSON.stringify(key2);\n                decodedKey2 = JSON.stringify(decodedKey2);\n            }\n\n            // encoding/decoding mismatches are usually due to a loss of floating-point precision\n            if (decodedKey1 !== key1) {\n                console.warn(key1 + ' was incorrectly encoded as ' + decodedKey1);\n            }\n            if (decodedKey2 !== key2) {\n                console.warn(key2 + ' was incorrectly encoded as ' + decodedKey2);\n            }\n        }\n        \n        return result;\n    };\n\n\n    idbModules.shimIndexedDB = new IDBFactory();\n    idbModules.IDBFactory = IDBFactory;\n}(idbModules));\n\n(function(window, idbModules){\n    'use strict';\n\n    function shim(name, value) {\n        try {\n            // Try setting the property. This will fail if the property is read-only.\n            window[name] = value;\n        }\n        catch (e) {}\n\n        if (window[name] !== value && Object.defineProperty) {\n            // Setting a read-only property failed, so try re-defining the property\n            try {\n                Object.defineProperty(window, name, {\n                    value: value\n                });\n            }\n            catch (e) {}\n\n            if (window[name] !== value) {\n                window.console && console.warn && console.warn('Unable to shim ' + name);\n            }\n        }\n    }\n\n    shim('shimIndexedDB', idbModules.shimIndexedDB);\n    if (window.shimIndexedDB) {\n        window.shimIndexedDB.__useShim = function(){\n            if (typeof window.openDatabase !== \"undefined\") {\n                // Polyfill ALL of IndexedDB, using WebSQL\n                shim('indexedDB', idbModules.shimIndexedDB);\n                shim('IDBFactory', idbModules.IDBFactory);\n                shim('IDBDatabase', idbModules.IDBDatabase);\n                shim('IDBObjectStore', idbModules.IDBObjectStore);\n                shim('IDBIndex', idbModules.IDBIndex);\n                shim('IDBTransaction', idbModules.IDBTransaction);\n                shim('IDBCursor', idbModules.IDBCursor);\n                shim('IDBKeyRange', idbModules.IDBKeyRange);\n                shim('IDBRequest', idbModules.IDBRequest);\n                shim('IDBOpenDBRequest', idbModules.IDBOpenDBRequest);\n                shim('IDBVersionChangeEvent', idbModules.IDBVersionChangeEvent);\n            }\n            else if (typeof window.indexedDB === \"object\") {\n                // Polyfill the missing IndexedDB features\n                idbModules.polyfill();\n            }\n        };\n\n        window.shimIndexedDB.__debug = function(val){\n            idbModules.DEBUG = val;\n        };\n    }\n    \n    // Workaround to prevent an error in Firefox\n    if(!('indexedDB' in window)) {\n        window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.oIndexedDB || window.msIndexedDB;\n    }\n    \n    // Detect browsers with known IndexedDb issues (e.g. Android pre-4.4)\n    var poorIndexedDbSupport = false;\n    if (navigator.userAgent.match(/Android 2/) || navigator.userAgent.match(/Android 3/) || navigator.userAgent.match(/Android 4\\.[0-3]/)) {\n        /* Chrome is an exception. It supports IndexedDb */\n        if (!navigator.userAgent.match(/Chrome/)) {\n            poorIndexedDbSupport = true;\n        }\n    }\n\n    if ((typeof window.indexedDB === \"undefined\" || !window.indexedDB || poorIndexedDbSupport) && typeof window.openDatabase !== \"undefined\") {\n        window.shimIndexedDB.__useShim();\n    }\n    else {\n        window.IDBDatabase = window.IDBDatabase || window.webkitIDBDatabase;\n        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;\n        window.IDBCursor = window.IDBCursor || window.webkitIDBCursor;\n        window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;\n        if(!window.IDBTransaction){\n            window.IDBTransaction = {};\n        }\n        /* Some browsers (e.g. Chrome 18 on Android) support IndexedDb but do not allow writing of these properties */\n        try {\n            window.IDBTransaction.READ_ONLY = window.IDBTransaction.READ_ONLY || \"readonly\";\n            window.IDBTransaction.READ_WRITE = window.IDBTransaction.READ_WRITE || \"readwrite\";\n        } catch (e) {}\n    }\n    \n}(window, idbModules));\n\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nvar isStandardArguments = function isArguments(value) {\n\treturn toStr.call(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\ttoStr.call(value) !== '[object Array]' &&\n\t\ttoStr.call(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","import Log from 'loglevel';\nconst originalFactory = Log.methodFactory;\n\nLog.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  const rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod(`Kinvey: ${message}`);\n  };\n};\n\nLog.setLevel(Log.levels.ERROR);\nexport { Log };\n","import { KinveyError } from './errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst aclAttribute = process.env.KINVEY_ACL_ATTRIBUTE || '_acl';\n\n/**\n * Wrapper for reading and setting permissions on an entity level.\n *\n * @example\n * var entity = { _acl: {} };\n * var acl = new Kinvey.Acl(entity);\n */\nexport class Acl {\n  constructor(entity = {}) {\n    if (!isPlainObject(entity)) {\n      throw new KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.acl = entity[aclAttribute];\n  }\n\n  get creator() {\n    return this.acl.creator;\n  }\n\n  get readers() {\n    return this.acl.r || [];\n  }\n\n  get writers() {\n    return this.acl.w || [];\n  }\n\n  get readerGroups() {\n    return this.acl.groups ? this.acl.groups.r : [];\n  }\n\n  get writerGroups() {\n    return this.acl.groups ? this.acl.groups.w : [];\n  }\n\n  set globallyReadable(gr) {\n    this.acl.gr = gr || false;\n  }\n\n  set globallyWritable(gw) {\n    this.acl.gw = gw || false;\n  }\n\n  addReader(user) {\n    const r = this.acl.r || [];\n\n    if (r.indexOf(user) === -1) {\n      r.push(user);\n    }\n\n    this.acl.r = r;\n    return this;\n  }\n\n  addReaderGroup(group) {\n    const groups = this.acl.groups || {};\n    const r = groups.r || [];\n\n    if (r.indexOf(group) === -1) {\n      r.push(group);\n    }\n\n    groups.r = r;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  addWriter(user) {\n    const w = this.acl.w || [];\n\n    if (w.indexOf(user) === -1) {\n      w.push(user);\n    }\n\n    this.acl.w = w;\n    return this;\n  }\n\n  addWriterGroup(group) {\n    const groups = this.acl.groups || {};\n    const w = groups.w || [];\n\n    if (w.indexOf(group) === -1) {\n      w.push(group);\n    }\n\n    groups.w = w;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  isGloballyReadable() {\n    return this.acl.gr || false;\n  }\n\n  isGloballyWritable() {\n    return this.acl.gw || false;\n  }\n\n  removeReader(user) {\n    const r = this.acl.r || [];\n    const pos = r.indexOf(user);\n\n    if (pos !== -1) {\n      r.splice(pos, 1);\n    }\n\n    this.acl.r = r;\n    return this;\n  }\n\n  removeReaderGroup(group) {\n    const groups = this.acl.groups || {};\n    const r = groups.r || [];\n    const pos = r.indexOf(group);\n\n    if (pos !== -1) {\n      r.splice(pos, 1);\n    }\n\n    groups.r = r;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  removeWriter(user) {\n    const w = this.acl.w || [];\n    const pos = w.indexOf(user);\n\n    if (pos !== -1) {\n      w.splice(pos, 1);\n    }\n\n    this.acl.w = w;\n    return this;\n  }\n\n  removeWriterGroup(group) {\n    const groups = this.acl.groups || {};\n    const w = groups.w || [];\n    const pos = w.indexOf(group);\n\n    if (pos !== -1) {\n      w.splice(pos, 1);\n    }\n\n    groups.w = w;\n    this.acl.groups = groups;\n    return this;\n  }\n\n  toJSON() {\n    return this.acl;\n  }\n}\n","import { KinveyError } from './errors';\nimport { Query } from './query';\nimport result from 'lodash/result';\nimport assign from 'lodash/assign';\nimport forEach from 'lodash/forEach';\nimport isObject from 'lodash/isObject';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\n\nexport class Aggregation {\n  constructor(options) {\n    options = assign({\n      query: null,\n      initial: {},\n      key: {},\n      reduce: function () {}.toString()\n    }, options);\n\n    this.query(options.query);\n    this._initial = options.initial;\n    this._key = options.key;\n    this._reduce = options.reduce;\n  }\n\n  by(field) {\n    this._key[field] = true;\n    return this;\n  }\n\n  initial(objectOrKey, value) {\n    if (typeof value === 'undefined' && !isObject(objectOrKey)) {\n      throw new KinveyError('objectOrKey argument must be an Object.');\n    }\n\n    if (isObject(objectOrKey)) {\n      this._initial = objectOrKey;\n    } else {\n      this._initial[objectOrKey] = value;\n    }\n\n    return this;\n  }\n\n  query(query) {\n    if (query && !(query instanceof Query)) {\n      query = new Query(result(query, 'toJSON', query));\n    }\n\n    this._query = query;\n    return this;\n  }\n\n  process(entities = []) {\n    const groups = {};\n    const response = [];\n    const aggregation = this.toJSON();\n    const reduce = aggregation.reduce.replace(/function[\\s\\S]*?\\([\\s\\S]*?\\)/, '');\n    aggregation.reduce = new Function(['doc', 'out'], reduce); // eslint-disable-line no-new-func\n\n    if (this._query) {\n      entities = this._query.process(entities);\n    }\n\n    forEach(entities, entity => {\n      const group = {};\n      const entityNames = Object.keys(entity);\n\n      forEach(entityNames, name => {\n        group[name] = entity[name];\n      });\n\n      const key = JSON.stringify(group);\n      if (!groups[key]) {\n        groups[key] = group;\n        const attributes = Object.keys(aggregation.initial);\n\n        forEach(attributes, attr => {\n          groups[key][attr] = aggregation.initial[attr];\n        });\n      }\n\n      aggregation.reduce(entity, groups[key]);\n    });\n\n    const segments = Object.keys(groups);\n    forEach(segments, segment => {\n      response.push(groups[segment]);\n    });\n\n    return response;\n  }\n\n  reduce(fn) {\n    if (isFunction(fn)) {\n      fn = fn.toString();\n    }\n\n    if (!isString(fn)) {\n      throw new KinveyError('fn argument must be of type function or string.');\n    }\n\n    this._reduce = fn;\n    return this;\n  }\n\n  toJSON() {\n    const json = {\n      key: this._key,\n      initial: this._initial,\n      reduce: this._reduce,\n      condition: this._query ? this._query.toJSON().filter : {},\n      query: this._query ? this._query.toJSON() : null\n    };\n\n    return json;\n  }\n\n  static count(field = '') {\n    const aggregation = new Aggregation();\n\n    if (field) {\n      aggregation.by(field);\n    }\n\n    aggregation.initial({ result: 0 });\n    aggregation.reduce(function (doc, out) {\n      out.result += 1;\n    });\n    return aggregation;\n  }\n\n  static sum(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ result: 0 });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result += doc[\"${field}\"]; ` +\n      `}`\n    );\n    return aggregation;\n  }\n\n  static min(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ result: Infinity });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result = Math.min(out.result, doc[\"${field}\"]); ` +\n      `}`\n    );\n    return aggregation;\n  }\n\n  static max(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ result: -Infinity });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result = Math.max(out.result, doc[\"${field}\"]); ` +\n      `}`\n    );\n    return aggregation;\n  }\n\n  static average(field = '') {\n    field = field.replace('\\'', '\\\\\\'');\n\n    const aggregation = new Aggregation();\n    aggregation.initial({ count: 0, result: 0 });\n    aggregation.reduce(`function(doc, out) { ` +\n      ` out.result = (out.result * out.count + doc[\"${field}\"]) / (out.count + 1);` +\n      ` out.count += 1;` +\n      `}`\n    );\n    return aggregation;\n  }\n}\n","import { KinveyError } from './errors';\nimport localStorage from 'local-storage';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport isString from 'lodash/isString';\nconst activeUserCollectionName = process.env.KINVEY_ACTIVE_USER_COLLECTION_NAME || 'kinvey_activeUser';\nconst activeSocialIdentityTokenCollectionName = process.env.KINVEY_ACTIVE_SOCIAL_IDENTITY_TOKEN_COLLECTION_NAME\n                                                || 'kinvey_activeSocialIdentityToken';\nlet sharedInstance;\n\n/**\n * The Client class stores information regarding your application. You can create mutiple clients\n * to send requests to different environments on the Kinvey platform.\n *\n * @example\n * var client = new Kinvey.Client({\n *   appKey: '<appKey>',\n *   appSecret: '<appSecret>'\n * });\n */\nexport class Client {\n  /**\n   * Creates a new instance of the Client class. An `options.appKey` must be provided along with\n   * either and `options.appSecret` or `options.masterSecret`.\n   *\n   * @param {Object}    options                             Options\n   * @param {string}    [options.protocol='https']          Protocl used for requests\n   * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n   * @param {string}    options.appKey                      App Key\n   * @param {string}    [options.appSecret]                 App Secret\n   * @param {string}    [options.masterSecret]              App Master Secret\n   * @param {string}    [options.encryptionKey]             App Encryption Key\n   *\n   * @throws {KinveyError}  If an `options.appKey` is not provided.\n   * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   */\n  constructor(options = {}) {\n    options = assign({\n      protocol: process.env.KINVEY_API_PROTOCOL || 'https:',\n      host: process.env.KINVEY_API_HOST || 'baas.kinvey.com'\n    }, options);\n\n    if (!options.appKey && !options.appId) {\n      throw new KinveyError('No App Key was provided. ' +\n        'Unable to create a new Client without an App Key.');\n    }\n\n    if (!options.appSecret && !options.masterSecret) {\n      throw new KinveyError('No App Secret or Master Secret was provided. ' +\n        'Unable to create a new Client without an App Key.');\n    }\n\n    if (options.hostname && isString(options.hostname)) {\n      const hostnameParsed = url.parse(options.hostname);\n      options.protocol = hostnameParsed.protocol;\n      options.host = hostnameParsed.host;\n    }\n\n    /**\n     * @type {string}\n     */\n    this.protocol = options.protocol;\n\n    /**\n     * @type {string}\n     */\n    this.host = options.host;\n\n    /**\n     * @type {string}\n     */\n    this.appKey = options.appKey || options.appId;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.appSecret = options.appSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.masterSecret = options.masterSecret;\n\n    /**\n     * @type {string|undefined}\n     */\n    this.encryptionKey = options.encryptionKey;\n  }\n\n  get baseUrl() {\n    return url.format({\n      protocol: this.protocol,\n      host: this.host\n    });\n  }\n\n  getActiveUserData() {\n    return localStorage.get(`${this.appKey}${activeUserCollectionName}`);\n  }\n\n  setActiveUserData(data) {\n    if (data) {\n      try {\n        return localStorage.set(`${this.appKey}${activeUserCollectionName}`, data);\n      } catch (error) {\n        return false;\n      }\n    }\n\n    return localStorage.remove(`${this.appKey}${activeUserCollectionName}`);\n  }\n\n  getActiveSocialIdentity() {\n    return localStorage.get(`${this.appKey}${activeSocialIdentityTokenCollectionName}`);\n  }\n\n  setActiveSocialIdentity(socialIdentity) {\n    if (socialIdentity) {\n      try {\n        return localStorage.set(`${this.appKey}${activeSocialIdentityTokenCollectionName}`, socialIdentity);\n      } catch (error) {\n        return false;\n      }\n    }\n\n    return localStorage.remove(`${this.appKey}${activeSocialIdentityTokenCollectionName}`);\n  }\n\n  /**\n   * Returns an object containing all the information for this Client.\n   *\n   * @return {Object} JSON\n   */\n  toJSON() {\n    const json = {\n      protocol: this.protocol,\n      host: this.host,\n      appKey: this.appKey,\n      appSecret: this.appSecret,\n      masterSecret: this.masterSecret,\n      encryptionKey: this.encryptionKey\n    };\n\n    return json;\n  }\n\n  /**\n   * Initializes the library by creating a new instance of the\n   * Client class and storing it as a shared instance.\n   *\n   * @param {Object}    options                             Options\n   * @param {string}    [options.protocol='https']          Protocl used for requests\n   * @param {string}    [options.host='baas.kinvey.com']    Host used for requests\n   * @param {string}    options.appKey                      App Key\n   * @param {string}    [options.appSecret]                 App Secret\n   * @param {string}    [options.masterSecret]              App Master Secret\n   * @param {string}    [options.encryptionKey]             App Encryption Key\n   *\n   * @throws {KinveyError}  If an `options.appKey` is not provided.\n   * @throws {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   *\n   * @return {Client}  An instance of Client.\n   *\n   * @example\n   * var client = Kinvey.Client.init({\n   *   appKey: '<appKey>',\n   *   appSecret: '<appSecret>'\n   * });\n   */\n  static init(options) {\n    const client = new Client(options);\n    sharedInstance = client;\n    return client;\n  }\n\n  /**\n   * Returns the shared client instance used by the library.\n   *\n   * @throws {KinveyError} If `Kinvey.init()` has not been called.\n   *\n   * @return {Client} The shared instance.\n   */\n  static sharedInstance() {\n    const client = sharedInstance;\n\n    if (!client) {\n      throw new KinveyError('You have not initialized the library. ' +\n        'Please call Kinvey.init() to initialize the library.');\n    }\n\n    return client;\n  }\n}\n","import { Client } from './client';\nimport { HttpMethod } from './enums';\nimport { KinveyError } from './errors';\nimport isString from 'lodash/isString';\nconst rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\n\n/**\n * Executes a custom command.\n */\nexport class Command {\n  /**\n   * Execute a custom command. A promise will be returned that will be resolved\n   * with the result of the command or rejected with an error.\n   *\n   * @param   {String}          command                           Command to execute.\n   * @param   {Object}          [args]                            Command arguments\n   * @param   {Object}          [options]                         Options\n   * @param   {Properties}      [options.properties]              Custom properties to send with\n   *                                                              the request.\n   * @param   {Number}          [options.timeout]                 Timeout for the request.\n   * @return  {Promise}                                           Promise\n   *\n   * @example\n   * var promise = Kinvey.Command.execute('myCustomCommand').then(function(data) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static execute(command, args, options = {}) {\n    const client = Client.sharedInstance();\n\n    if (!command) {\n      throw new KinveyError('A command is required.');\n    }\n\n    if (!isString(command)) {\n      throw new KinveyError('Command must be a string.');\n    }\n\n    return client.executeNetworkRequest({\n      method: HttpMethod.POST,\n      pathname: `/${rpcNamespace}/${options.client.appKey}/custom/${command}`,\n      properties: options.properties,\n      auth: client.defaultAuth(),\n      data: args,\n      timeout: options.timeout\n    }).then(response => {\n      return response.data;\n    });\n  }\n}\n","/**\n * Enum for Mobile Identity Connect authorization grants.\n */\nconst AuthorizationGrant = {\n  AuthorizationCodeLoginPage: 'AuthorizationCodeLoginPage',\n  AuthorizationCodeAPI: 'AuthorizationCodeAPI'\n};\nObject.freeze(AuthorizationGrant);\nexport { AuthorizationGrant };\n\nconst AuthType = {\n  All: 'All',\n  App: 'App',\n  Basic: 'Basic',\n  Default: 'Default',\n  Master: 'Master',\n  None: 'None',\n  Session: 'Session'\n};\nObject.freeze(AuthType);\nexport { AuthType };\n\n/**\n * Enum for DataStore types.\n */\nconst DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexport { DataStoreType };\n\n/**\n * @private\n * Enum for Http Methods.\n */\nconst HttpMethod = {\n  GET: 'GET',\n  POST: 'POST',\n  PATCH: 'PATCH',\n  PUT: 'PUT',\n  DELETE: 'DELETE'\n};\nObject.freeze(HttpMethod);\nexport { HttpMethod };\n\n/**\n * Enum for Social Identities.\n */\nconst SocialIdentity = {\n  Facebook: 'facebook',\n  Google: 'google',\n  LinkedIn: 'linkedin'\n};\nObject.freeze(SocialIdentity);\nexport { SocialIdentity };\n\n/**\n * @provate\n * Enum for Status Codes.\n */\nconst StatusCode = {\n  Ok: 200,\n  Created: 201,\n  RedirectTemporarily: 301,\n  RedirectPermanetly: 302,\n  NotFound: 404,\n  ServerError: 500\n};\nObject.freeze(StatusCode);\nexport { StatusCode };\n","import util from 'util';\nimport isFunction from 'lodash/isFunction';\n\n/**\n * @private\n */\nError.extend = function extend(name) {\n  const SubType = function SubType(message, debug) {\n    if (!(this instanceof SubType)) {\n      return new SubType(message, debug);\n    }\n\n    this.name = name;\n    this.message = message;\n    this.description = message;\n    this.debug = debug;\n\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  };\n\n  util.inherits(SubType, this);\n\n  SubType.prototype.toString = function toString() {\n    return `${this.name}: ${util.inspect(this.message)}`;\n  };\n\n  SubType.extend = this.extend;\n  return SubType;\n};\n\nexport const ActiveUserError = Error.extend('ActiveUserError');\nexport const InsufficientCredentialsError = Error.extend('InsufficientCredentialsError');\nexport const InvalidCredentialsError = Error.extend('InvalidCredentialsError');\nexport const KinveyError = Error.extend('KinveyError');\nexport const NetworkConnectionError = Error.extend('NetworkConnectionError');\nexport const NotFoundError = Error.extend('NotFoundError');\nexport const NoResponseError = Error.extend('NoResponseError');\n","import Promise from 'babybird';\nimport { Aggregation } from './aggregation';\nimport { Client } from './client';\nimport { Command } from './command';\nimport { Log } from './log';\nimport { Metadata } from './metadata';\nimport { Query } from './query';\nimport { DataStore } from './stores/datastore';\nimport { Sync } from './sync';\nimport { User } from './user';\nimport { AuthType, AuthorizationGrant, SocialIdentity, HttpMethod, DataStoreType } from './enums';\nimport { NetworkRequest } from './requests/network';\nimport url from 'url';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\n\nclass Kinvey {\n  /**\n   * Initializes the library with your app's information.\n   *\n   * @param   {Object}        options                         Options\n   * @param   {string}        options.appKey                  My app key\n   * @param   {string}        [options.appSecret]             My app secret\n   * @param   {string}        [options.masterSecret]          My app's master secret\n   * @param   {string}        [options.encryptionKey]         My app's encryption key\n   * @param   {string}        [options.protocol]              The protocol of the client.\n   * @param   {string}        [options.host]                  The host of the client.\n   * @return  {Client}                                        An instance of Client.\n   *\n   * @throws  {KinveyError}  If an `options.appKey` is not provided.\n   * @throws  {KinveyError}  If neither an `options.appSecret` or `options.masterSecret` is provided.\n   *\n   * @example\n   * var client = Kinvey.init({\n   *   appKey: 'appKey',\n   *   appSecret: 'appSecret'\n   * });\n   */\n  static init(options) {\n    const client = Client.init(options);\n    return client;\n  }\n\n  /**\n   * Pings the Kinvey service.\n   *\n   * @returns {Promise} The response.\n   */\n  static ping(client = Client.sharedInstance()) {\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.All,\n      url: url.format({\n        protocol: client.protocol,\n        host: client.host,\n        pathname: `${appdataNamespace}/${client.appKey}`\n      })\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n}\n\nKinvey.Aggregation = Aggregation;\nKinvey.AuthorizationGrant = AuthorizationGrant;\nKinvey.Command = Command;\nKinvey.DataStore = DataStore;\nKinvey.DataStoreType = DataStoreType;\nKinvey.Log = Log;\nKinvey.Metadata = Metadata;\nKinvey.Promise = Promise;\nKinvey.Query = Query;\nKinvey.SocialIdentity = SocialIdentity;\nKinvey.Sync = Sync;\nKinvey.User = User;\nexport { Kinvey };\n","import Log from 'loglevel';\nconst originalFactory = Log.methodFactory;\n\nLog.methodFactory = function methodFactory(methodName, logLevel, loggerName) {\n  const rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n  return function log(message) {\n    rawMethod(`Kinvey: ${message}`);\n  };\n};\n\nLog.setLevel(Log.levels.ERROR);\nexport { Log };\n","import { KinveyError } from './errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * Wrapper for accessing the `_kmd` properties of an entity.\n */\nexport class Metadata {\n  constructor(entity = {}) {\n    if (!isPlainObject(entity)) {\n      throw new KinveyError('entity argument must be an object');\n    }\n\n    /**\n     * The kmd properties.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.kmd = entity[kmdAttribute] || {};\n\n    /**\n     * The entity.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.entity = entity;\n  }\n\n  get createdAt() {\n    if (this.kmd.ect) {\n      return Date.parse(this.kmd.ect);\n    }\n\n    return undefined;\n  }\n\n  get emailVerification() {\n    return this.kmd.emailVerification.status;\n  }\n\n  get lastModified() {\n    if (this.kmd.lmt) {\n      return Date.parse(this.kmd.lmt);\n    }\n\n    return undefined;\n  }\n\n  get lmt() {\n    return this.lastModified;\n  }\n\n  get authtoken() {\n    return this.kmd.authtoken;\n  }\n\n  set authtoken(authtoken) {\n    this.kmd.authtoken = authtoken;\n  }\n\n  toJSON() {\n    return this.kmd;\n  }\n}\n","import Promise from 'babybird';\nimport { AuthType, HttpMethod, AuthorizationGrant } from './enums';\nimport { KinveyError } from './errors';\nimport { NetworkRequest } from './requests/network';\nimport { Client } from './client';\nimport { Popup } from './utils/popup';\nimport path from 'path';\nimport url from 'url';\nimport isString from 'lodash/isString';\nconst authPathname = process.env.KINVEY_MIC_AUTH_PATHNAME || '/oauth/auth';\nconst tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\n\n/**\n * @private\n */\nexport class MobileIdentityConnect {\n  constructor(client = Client.sharedInstance()) {\n    this.client = new Client({\n      protocol: process.env.KINVEY_MIC_PROTOCOL || 'https:',\n      host: process.env.KINVEY_MIC_HOST || 'auth.kinvey.com',\n      appKey: client.appKey,\n      appSecret: client.appSecret,\n      masterSecret: client.masterSecret,\n      encryptionKey: client.encryptionKey\n    });\n  }\n\n  static get identity() {\n    return process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\n  }\n\n  login(redirectUri, authorizationGrant = AuthorizationGrant.AuthorizationCodeLoginPage, options = {}) {\n    const clientId = this.client.appKey;\n\n    const promise = Promise.resolve().then(() => {\n      if (authorizationGrant === AuthorizationGrant.AuthorizationCodeLoginPage) {\n        // Step 1: Request a code\n        return this.requestCodeWithPopup(clientId, redirectUri, options);\n      } else if (authorizationGrant === AuthorizationGrant.AuthorizationCodeAPI) {\n        // Step 1a: Request a temp login url\n        return this.requestTempLoginUrl(clientId, redirectUri, options).then(url => {\n          // Step 1b: Request a code\n          return this.requestCodeWithUrl(url, clientId, redirectUri, options);\n        });\n      }\n\n      throw new KinveyError(`The authorization grant ${authorizationGrant} is unsupported. ` +\n        `Please use a supported authorization grant.`);\n    }).then(code => {\n      // Step 3: Request a token\n      return this.requestToken(code, clientId, redirectUri, options);\n    });\n\n    return promise;\n  }\n\n  requestTempLoginUrl(clientId, redirectUri, options = {}) {\n    let pathname = '/';\n\n    if (options.version) {\n      let version = options.version;\n\n      if (!isString(version)) {\n        version = String(version);\n      }\n\n      pathname = path.join(pathname, version.indexOf('v') === 0 ? version : `v${version}`);\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: path.join(pathname, authPathname)\n      }),\n      properties: options.properties,\n      data: {\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        response_type: 'code'\n      }\n    });\n    return request.execute().then(response => {\n      return response.data.temp_login_uri;\n    });\n  }\n\n  requestCodeWithPopup(clientId, redirectUri, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      let pathname = '/';\n\n      if (options.version) {\n        let version = options.version;\n\n        if (!isString(version)) {\n          version = String(version);\n        }\n\n        pathname = path.join(pathname, version.indexOf('v') === 0 ? version : `v${version}`);\n      }\n\n      const popup = new Popup(url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: path.join(pathname, authPathname),\n        query: {\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          response_type: 'code'\n        }\n      }));\n      return popup.open();\n    }).then((popup) => {\n      return new Promise((resolve, reject) => {\n        let redirected = false;\n\n        function loadHandler(loadedUrl) {\n          if (loadedUrl.indexOf(redirectUri) === 0) {\n            redirected = true;\n            popup.removeAllListeners();\n            popup.close();\n            resolve(url.parse(loadedUrl, true).query.code);\n          }\n        }\n\n        function closeHandler() {\n          popup.removeAllListeners();\n\n          if (!redirected) {\n            reject(new Error('Login has been cancelled.'));\n          }\n        }\n\n        popup.on('loaded', loadHandler);\n        popup.on('closed', closeHandler);\n      });\n    });\n\n    return promise;\n  }\n\n  requestCodeWithUrl(loginUrl, clientId, redirectUri, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      const request = new NetworkRequest({\n        method: HttpMethod.POST,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        url: loginUrl,\n        properties: options.properties,\n        data: {\n          client_id: clientId,\n          redirect_uri: redirectUri,\n          response_type: 'code',\n          username: options.username,\n          password: options.password\n        },\n        followRedirect: false\n      });\n      return request.execute();\n    }).then(response => {\n      const location = response.getHeader('location');\n\n      if (location) {\n        return url.parse(location, true).query.code;\n      }\n\n      throw new KinveyError(`Unable to authorize user with username ${options.username}.`);\n    });\n\n    return promise;\n  }\n\n  requestToken(code, clientId, redirectUri, options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: tokenPathname\n      }),\n      properties: options.properties,\n      data: {\n        grant_type: 'authorization_code',\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        code: code\n      }\n    });\n    request.automaticallyRefreshAuthToken = false;\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n    return promise;\n  }\n\n  // refresh(token, options) {\n  //   const clientId = this.client.appKey;\n  //   return this.refreshToken(clientId, token, options);\n  // }\n\n  // refreshToken(clientId, token, options = {}) {\n  //   const request = new NetworkRequest({\n  //     method: HttpMethod.POST,\n  //     headers: {\n  //       'Content-Type': 'application/x-www-form-urlencoded'\n  //     },\n  //     authType: AuthType.App,\n  //     url: url.format({\n  //       protocol: this.client.protocol,\n  //       host: this.client.host,\n  //       pathname: tokenPathname\n  //     }),\n  //     properties: options.properties,\n  //     data: {\n  //       grant_type: 'refresh_token',\n  //       client_id: clientId,\n  //       redirect_uri: token.redirect_uri,\n  //       refresh_token: token.refresh_token\n  //     }\n  //   });\n  //   request.automaticallyRefreshAuthToken = false;\n\n  //   const promise = request.execute().then(response => {\n  //     return response.data;\n  //   });\n\n  //   return promise;\n  // }\n}\n","import { nested } from './utils/object';\nimport sift from 'sift';\nimport assign from 'lodash/assign';\nimport isArray from 'lodash/isArray';\nimport isNumber from 'lodash/isNumber';\nimport isString from 'lodash/isString';\nimport isObject from 'lodash/isObject';\nimport isRegExp from 'lodash/isRegExp';\nimport forEach from 'lodash/forEach';\n\nexport class Query {\n  constructor(options) {\n    options = assign({\n      fields: [],\n      filter: {},\n      sort: {},\n      limit: null,\n      skip: 0\n    }, options);\n\n    /**\n     * Fields to select.\n     *\n     * @type {Array}\n     */\n    this._fields = options.fields;\n\n    /**\n     * The MongoDB query.\n     *\n     * @type {Object}\n     */\n    this._filter = options.filter;\n\n    /**\n     * The sorting order.\n     *\n     * @type {Object}\n     */\n    this._sort = options.sort;\n\n    /**\n     * Number of documents to select.\n     *\n     * @type {?Number}\n     */\n    this._limit = options.limit;\n\n    /**\n     * Number of documents to skip from the start.\n     *\n     * @type {Number}\n     */\n    this._skip = options.skip;\n\n    /**\n     * Maintain reference to the parent query in case the query is part of a\n     * join.\n     *\n     * @type {?PrivateQuery}\n     */\n    this.parent = null;\n  }\n\n  /**\n   * Adds an equal to filter to the query. Requires `field` to equal `value`.\n   * Any existing filters on `field` will be discarded.\n   * http://docs.mongodb.org/manual/reference/operators/#comparison\n   *\n   * @param   {String}        field     Field.\n   * @param   {*}             value     Value.\n   * @returns {Query}                   The query.\n   */\n  equalTo(field, value) {\n    this._filter[field] = value;\n    return this;\n  }\n\n  /**\n   * Adds a contains filter to the query. Requires `field` to contain at least\n   * one of the members of `list`.\n   * http://docs.mongodb.org/manual/reference/operator/in/\n   *\n   * @param   {String}        field     Field.\n   * @param   {Array}         values    List of values.\n   * @throws  {Error}                   `values` must be of type: `Array`.\n   * @returns {Query}                   The query.\n   */\n  contains(field, values) {\n    if (!isArray(values)) {\n      values = [values];\n    }\n\n    return this.addFilter(field, '$in', values);\n  }\n\n  /**\n   * Adds a contains all filter to the query. Requires `field` to contain all\n   * members of `list`.\n   * http://docs.mongodb.org/manual/reference/operator/all/\n   *\n   * @param   {String}  field     Field.\n   * @param   {Array}   values    List of values.\n   * @throws  {Error}             `values` must be of type: `Array`.\n   * @returns {Query}             The query.\n   */\n  containsAll(field, values) {\n    if (!isArray(values)) {\n      values = [values];\n    }\n\n    return this.addFilter(field, '$all', values);\n  }\n\n  /**\n   * Adds a greater than filter to the query. Requires `field` to be greater\n   * than `value`.\n   * http://docs.mongodb.org/manual/reference/operator/gt/\n   *\n   * @param   {String}          field     Field.\n   * @param   {Number|String}   value     Value.\n   * @throws  {Error}                     `value` must be of type: `number` or `string`.\n   * @returns {Query}                     The query.\n   */\n  greaterThan(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$gt', value);\n  }\n\n  greaterThanOrEqualTo(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$gte', value);\n  }\n\n  lessThan(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$lt', value);\n  }\n\n  lessThanOrEqualTo(field, value) {\n    if (!isNumber(value) && !isString(value)) {\n      throw new Error('You must supply a number or string.');\n    }\n\n    return this.addFilter(field, '$lte', value);\n  }\n\n  notEqualTo(field, value) {\n    return this.addFilter(field, '$ne', value);\n  }\n\n  notContainedIn(field, values) {\n    if (!isArray(values)) {\n      values = [values];\n    }\n\n    return this.addFilter(field, '$nin', values);\n  }\n\n  and() {\n    return this.join('$and', Array.prototype.slice.call(arguments));\n  }\n\n  nor() {\n    if (this.parent && this.parent.filter.$and) {\n      return this.parent.nor.apply(this.parent, arguments);\n    }\n\n    return this.join('$nor', Array.prototype.slice.call(arguments));\n  }\n\n  or() {\n    if (this.parent) {\n      return this.parent.or.apply(this.parent, arguments);\n    }\n\n    return this.join('$or', Array.prototype.slice.call(arguments));\n  }\n\n  exists(field, flag) {\n    flag = typeof flag === 'undefined' ? true : flag || false;\n    return this.addFilter(field, '$exists', flag);\n  }\n\n  mod(field, divisor, remainder) {\n    remainder = remainder || 0;\n\n    if (isString(divisor)) {\n      divisor = parseFloat(divisor);\n    }\n\n    if (isString(remainder)) {\n      remainder = parseFloat(remainder);\n    }\n\n    if (!isNumber(divisor)) {\n      throw new Error('Divisor must be a number.');\n    }\n\n    if (!isNumber(remainder)) {\n      throw new Error('Remainder must be a number.');\n    }\n\n    return this.addFilter(field, '$mod', [divisor, remainder]);\n  }\n\n  matches(field, regExp, options) {\n    options = options || {};\n\n    if (!isRegExp(regExp)) {\n      regExp = new RegExp(regExp);\n    }\n\n    if ((regExp.ignoreCase || options.ignoreCase) && options.ignoreCase !== false) {\n      throw new Error('ignoreCase glag is not supported.');\n    }\n\n    if (regExp.source.indexOf('^') !== 0) {\n      throw new Error('regExp must have `^` at the beginning of the expression ' +\n        'to make it an anchored expression.');\n    }\n\n    const flags = [];\n\n    if ((regExp.multiline || options.multiline) && options.multiline !== false) {\n      flags.push('m');\n    }\n\n    if (options.extended) {\n      flags.push('x');\n    }\n\n    if (options.dotMatchesAll) {\n      flags.push('s');\n    }\n\n    const result = this.addFilter(field, '$regex', regExp.source);\n\n    if (flags.length) {\n      this.addFilter(field, '$options', flags.join(''));\n    }\n\n    return result;\n  }\n\n  near(field, coord, maxDistance) {\n    if (!isArray(coord) || !coord[0] || !coord[1]) {\n      throw new Error('coord argument must be of type: [number, number]');\n    }\n\n    coord[0] = parseFloat(coord[0]);\n    coord[1] = parseFloat(coord[1]);\n\n    const result = this.addFilter(field, '$nearSphere', [coord[0], coord[1]]);\n\n    if (maxDistance) {\n      this.addFilter(field, '$maxDistance', maxDistance);\n    }\n\n    return result;\n  }\n\n  withinBox(field, bottomLeftCoord, upperRightCoord) {\n    if (!isArray(bottomLeftCoord) || !bottomLeftCoord[0] || !bottomLeftCoord[1]) {\n      throw new Error('bottomLeftCoord argument must be of type: [number, number]');\n    }\n\n    if (!isArray(upperRightCoord) || !upperRightCoord[0] || !upperRightCoord[1]) {\n      throw new Error('upperRightCoord argument must be of type: [number, number]');\n    }\n\n    bottomLeftCoord[0] = parseFloat(bottomLeftCoord[0]);\n    bottomLeftCoord[1] = parseFloat(bottomLeftCoord[1]);\n    upperRightCoord[0] = parseFloat(upperRightCoord[0]);\n    upperRightCoord[1] = parseFloat(upperRightCoord[1]);\n\n    const coords = [\n      [bottomLeftCoord[0], bottomLeftCoord[1]],\n      [upperRightCoord[0], upperRightCoord[1]]\n    ];\n    return this.addFilter(field, '$within', { $box: coords });\n  }\n\n  withinPolygon(field, coords) {\n    if (!isArray(coords) || coords.length > 3) {\n      throw new Error('coords argument must be of type: [[number, number]]');\n    }\n\n    coords = coords.map(function (coord) {\n      if (!coord[0] || !coord[1]) {\n        throw new Error('coords argument must be of type: [number, number]');\n      }\n\n      return [parseFloat(coord[0]), parseFloat(coord[1])];\n    });\n\n    return this.addFilter(field, '$within', { $polygon: coords });\n  }\n\n  size(field, size) {\n    if (isString(size)) {\n      size = parseFloat(size);\n    }\n\n    if (!isNumber(size)) {\n      throw new Error('size argument must be a number');\n    }\n\n    return this.addFilter(field, '$size', size);\n  }\n\n  fields(fields) {\n    fields = fields || [];\n\n    if (!isArray(fields)) {\n      throw new Error('fields argument must an Array.');\n    }\n\n    if (this.parent) {\n      this.parent.fields(fields);\n    } else {\n      this._fields = fields;\n    }\n\n    return this;\n  }\n\n  limit(limit) {\n    if (isString(limit)) {\n      limit = parseFloat(limit);\n    }\n\n    if (limit && !isNumber(limit)) {\n      throw new Error('limit argument must be of type: number.');\n    }\n\n    if (this._parent) {\n      this.parent.limit(limit);\n    } else {\n      this._limit = limit;\n    }\n\n    return this;\n  }\n\n  skip(skip) {\n    if (isString(skip)) {\n      skip = parseFloat(skip);\n    }\n\n    if (!isNumber(skip)) {\n      throw new Error('skip argument must be of type: number.');\n    }\n\n    if (this.parent) {\n      this.parent.skip(skip);\n    } else {\n      this._skip = skip;\n    }\n\n    return this;\n  }\n\n  ascending(field) {\n    if (this.parent) {\n      this.parent.ascending(field);\n    } else {\n      this._sort[field] = 1;\n    }\n\n    return this;\n  }\n\n  descending(field) {\n    if (this.parent) {\n      this.parent.descending(field);\n    } else {\n      this._sort[field] = -1;\n    }\n\n    return this;\n  }\n\n  sort(sort) {\n    if (sort && !isObject(sort)) {\n      throw new Error('sort argument must be of type: Object.');\n    }\n\n    if (this.parent) {\n      this.parent.sort(sort);\n    } else {\n      this._sort = sort || {};\n    }\n\n    return this;\n  }\n\n  /**\n   * Adds a filter to the query.\n   *\n   * @param   {String}          field       Field.\n   * @param   {String}          condition   Condition.\n   * @param   {*}               value       Value.\n   * @returns {PrivateQuery}                The query.\n   */\n  addFilter(field, condition, values) {\n    if (!isObject(this._filter[field])) {\n      this._filter[field] = {};\n    }\n\n    this._filter[field][condition] = values;\n    return this;\n  }\n\n  /**\n   * Joins the current query with another query using an operator.\n   *\n   * @param   {String}                    operator    Operator.\n   * @param   {PrivateQuery[]|Object[]}   queries     Queries.\n   * @throws  {Error}                                `query` must be of type: `Kinvey.Query[]` or `Object[]`.\n   * @returns {PrivateQuery}                          The query.\n   */\n  join(operator, queries) {\n    let _this = this;\n    const currentQuery = {};\n\n    // Cast, validate, and parse arguments. If `queries` are supplied, obtain\n    // the `filter` for joining. The eventual return function will be the\n    // current query.\n    queries = queries.map(function (query) {\n      if (!(query instanceof Query)) {\n        if (isObject(query)) {\n          query = new Query(query);\n        } else {\n          throw new Error('query argument must be of type: Kinvey.Query[] or Object[].');\n        }\n      }\n\n      return query.toJSON().filter;\n    });\n\n    // If there are no `queries` supplied, create a new (empty) `Query`.\n    // This query is the right-hand side of the join expression, and will be\n    // returned to allow for a fluent interface.\n    if (queries.length === 0) {\n      _this = new Query();\n      queries = [_this.toJSON().filter];\n      _this.parent = this; // Required for operator precedence and `toJSON`.\n    }\n\n    // Join operators operate on the top-level of `filter`. Since the `toJSON`\n    // magic requires `filter` to be passed by reference, we cannot simply re-\n    // assign `filter`. Instead, empty it without losing the reference.\n    const members = Object.keys(this._filter);\n    forEach(members, member => {\n      currentQuery[member] = this._filter[member];\n      delete this._filter[member];\n    });\n\n    // `currentQuery` is the left-hand side query. Join with `queries`.\n    this._filter[operator] = [currentQuery].concat(queries);\n\n    // Return the current query if there are `queries`, and the new (empty)\n    // `PrivateQuery` otherwise.\n    return _this;\n  }\n\n  /**\n   * Processes the data by applying fields, sort, limit, and skip.\n   *\n   * @param   {Array}   data    The raw data.\n   * @throws  {Error}               `data` must be of type: `Array`.\n   * @returns {Array}               The processed data.\n   */\n  _process(data) {\n    if (data) {\n      // Validate arguments.\n      if (!isArray(data)) {\n        throw new Error('data argument must be of type: Array.');\n      }\n\n      // Apply the query\n      const json = this.toJSON();\n      data = sift(json.filter, data);\n\n      // Remove fields\n      if (json.fields && json.fields.length > 0) {\n        data = data.map((item) => {\n          const keys = Object.keys(item);\n          forEach(keys, key => {\n            if (json.fields.indexOf(key) === -1) {\n              delete item[key];\n            }\n          });\n\n          return item;\n        });\n      }\n\n      // Sorting.\n      data = data.sort((a, b) => {\n        const fields = Object.keys(json.sort);\n        forEach(fields, field => {\n          // Find field in objects.\n          const aField = nested(a, field);\n          const bField = nested(b, field);\n\n          // Elements which do not contain the field should always be sorted\n          // lower.\n          if (aField && !bField) {\n            return -1;\n          }\n\n          if (bField && !aField) {\n            return 1;\n          }\n\n          // Sort on the current field. The modifier adjusts the sorting order\n          // (ascending (-1), or descending(1)). If the fields are equal,\n          // continue sorting based on the next field (if any).\n          if (aField !== bField) {\n            const modifier = json.sort[field]; // 1 or -1.\n            return (aField < bField ? -1 : 1) * modifier;\n          }\n        });\n\n        return 0;\n      });\n\n      // Limit and skip.\n      if (json.limit) {\n        return data.slice(json.skip, json.skip + json.limit);\n      }\n\n      return data.slice(json.skip);\n    }\n\n    return data;\n  }\n\n  /**\n   * Returns JSON representation of the query.\n   *\n   * @returns {Object} JSON object-literal.\n   */\n  toJSON() {\n    if (this.parent) {\n      return this.parent.toJSON();\n    }\n\n    // Return set of parameters.\n    const json = {\n      fields: this._fields,\n      filter: this._filter,\n      sort: this._sort,\n      skip: this._skip,\n      limit: this._limit\n    };\n\n    return json;\n  }\n}\n","const levels = [];\nconst c0 = String.fromCharCode(9500);\nconst c1 = String.fromCharCode(9472);\nconst c2 = String.fromCharCode(9492);\nconst c3 = String.fromCharCode(9474);\n\nfunction compose(node, end) {\n  if (node.level === 0) {\n    return node.value;\n  }\n\n  let ret = '\\r\\n';\n  const c = end ? c2 : c0;\n\n  for (let i = 1; i < node.level; i++) {\n    ret = `${ret}${levels[i] ? ' ' : c3}`;\n    ret = `${ret}  `;\n  }\n\n  return `${ret}${c}${c1} ${node.value}`;\n}\n\n/**\n * @private\n */\nexport const AsciiTree = {\n  generate(tree = {}, end) {\n    let result = compose(tree, end);\n\n    if (tree.nodes.length > 0) {\n      const last = tree.nodes.length - 1;\n      tree.nodes.forEach((subTree, index) => {\n        levels[subTree.level] = index === last;\n        result = result + this.generate(subTree, index === last);\n      });\n    }\n\n    return result;\n  }\n};\n","import Promise from 'babybird';\nimport { AsciiTree } from './asciiTree';\n\n/**\n * @private\n */\nexport class Middleware {\n  constructor(name = 'Middleware') {\n    this.name = name;\n  }\n\n  handle(request = {}) {\n    return Promise.resolve(request);\n  }\n\n  generateTree(level = 0) {\n    const root = {\n      value: this.name,\n      level: level,\n      nodes: []\n    };\n    return root;\n  }\n\n  toString() {\n    const root = this.generateTree();\n    return AsciiTree.generate(root);\n  }\n}\n\n/**\n * @private\n */\nexport class KinveyMiddleware extends Middleware {\n  constructor(name = 'Kinvey Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return new Promise((resolve, reject) => {\n      if (!request) {\n        return reject(new Error('Request is null. Please provide a valid request.', request));\n      }\n\n      return resolve(request);\n    });\n  }\n}\n","import { KinveyMiddleware } from '../middleware';\nimport { DB, DBAdapter } from '../persistence/db';\nimport { HttpMethod, StatusCode } from '../../enums';\nimport UrlPattern from 'url-pattern';\nimport url from 'url';\n\n/**\n * @private\n */\nexport class CacheMiddleware extends KinveyMiddleware {\n  constructor(adapters = [DBAdapter.IndexedDB, DBAdapter.WebSQL, DBAdapter.LocalStorage, DBAdapter.Memory]) {\n    super('Kinvey Cache Middleware');\n    this.adapters = adapters;\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const pathname = url.parse(request.url).pathname;\n      const pattern = new UrlPattern('(/:namespace)(/)(:appKey)(/)(:collection)(/)(:id)(/)');\n      const { appKey, collection, id } = pattern.match(pathname) || {};\n      const method = request.method;\n      const query = request.query;\n      const data = request.data;\n      const db = new DB(appKey, this.adapters);\n      let promise;\n\n      if (method === HttpMethod.GET) {\n        if (id) {\n          if (id === '_count') {\n            promise = db.count(collection, query);\n          } else if (id === '_group') {\n            promise = db.group(collection, data);\n          } else {\n            promise = db.findById(collection, id);\n          }\n        } else {\n          promise = db.find(collection, query);\n        }\n      } else if (method === HttpMethod.POST || method === HttpMethod.PUT) {\n        promise = db.save(collection, data);\n      } else if (method === HttpMethod.DELETE) {\n        if (id) {\n          promise = db.removeById(collection, id);\n        } else {\n          promise = db.remove(collection, query);\n        }\n      }\n\n      return promise.then(result => {\n        let statusCode = StatusCode.Ok;\n\n        if (method === HttpMethod.POST) {\n          statusCode = StatusCode.Created;\n        }\n\n        request.response = {\n          statusCode: statusCode,\n          headers: {},\n          data: result\n        };\n\n        return request;\n      });\n    });\n  }\n}\n","import { KinveyMiddleware } from '../middleware';\n\n/**\n * @private\n */\nexport class ParseMiddleware extends KinveyMiddleware {\n  constructor(name = 'Kinvey Parse Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const response = request.response;\n\n      if (response && response.data) {\n        const contentType = response.headers['content-type'] || response.headers['Content-Type'];\n\n        if (contentType.indexOf('application/json') === 0) {\n          try {\n            response.data = JSON.parse(response.data);\n          } catch (err) {\n            response.data = response.data;\n          }\n\n          request.response = response;\n        }\n      }\n\n      return request;\n    });\n  }\n}\n","import { KinveyMiddleware } from '../middleware';\nimport forEach from 'lodash/forEach';\n\n/**\n * @private\n */\nexport class SerializeMiddleware extends KinveyMiddleware {\n  constructor(name = 'Kinvey Serialize Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      if (request && request.data) {\n        const contentType = request.headers['content-type'] || request.headers['Content-Type'];\n\n        if (contentType.indexOf('application/json') === 0) {\n          request.data = JSON.stringify(request.data);\n        } else if (contentType.indexOf('application/x-www-form-urlencoded') === 0) {\n          const data = request.data;\n          const str = [];\n          const keys = Object.keys(data);\n\n          forEach(keys, key => {\n            str.push(`${global.encodeURIComponent(key)}=${global.encodeURIComponent(data[key])}`);\n          });\n\n          request.data = str.join('&');\n        }\n      }\n\n      return request;\n    });\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyError, NotFoundError } from '../../../errors';\nimport forEach from 'lodash/forEach';\nimport isArray from 'lodash/isArray';\nimport isString from 'lodash/isString';\nimport isFunction from 'lodash/isFunction';\nconst dbCache = {};\n\nconst TransactionMode = {\n  ReadWrite: 'readwrite',\n  ReadOnly: 'readonly',\n};\nObject.freeze(TransactionMode);\n\nif (typeof window !== 'undefined') {\n  require('indexeddbshim');\n  global.shimIndexedDB.__useShim();\n}\n\nconst indexedDB = global.shimIndexedDB ||\n                  global.indexedDB ||\n                  global.mozIndexedDB ||\n                  global.webkitIndexedDB ||\n                  global.msIndexedDB;\n\n/**\n * @private\n */\nexport class IndexedDB {\n  constructor(name) {\n    if (!name) {\n      throw new KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!isString(name)) {\n      throw new KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.inTransaction = false;\n    this.queue = [];\n  }\n\n  openTransaction(collection, write = false, success, error, force = false) {\n    let db = dbCache[this.name];\n\n    if (db) {\n      const containsCollection = isFunction(db.objectStoreNames.contains) ?\n        db.objectStoreNames.contains(collection) : db.objectStoreNames.indexOf(collection) !== -1;\n\n      if (containsCollection) {\n        try {\n          const mode = write ? TransactionMode.ReadWrite : TransactionMode.ReadOnly;\n          const txn = db.transaction([collection], mode);\n\n          if (txn) {\n            const store = txn.objectStore(collection);\n            return success(store);\n          }\n\n          throw new KinveyError(`Unable to open a transaction for the ${collection} ` +\n            `collection on the ${this.name} indexedDB database.`);\n        } catch (err) {\n          return error(err);\n        }\n      } else if (!write) {\n        return error(new NotFoundError(`The ${collection} collection was not found on ` +\n          `the ${this.name} indexedDB database.`));\n      }\n    }\n\n    if (!force && this.inTransaction) {\n      return this.queue.push(() => {\n        this.openTransaction(collection, write, success, error);\n      });\n    }\n\n    // Switch flag\n    this.inTransaction = true;\n    let request;\n\n    if (db) {\n      const version = db.version + 1;\n      request = indexedDB.open(this.name, version);\n    } else {\n      request = indexedDB.open(this.name);\n    }\n\n    // If the database is opened with an higher version than its current, the\n    // `upgradeneeded` event is fired. Save the handle to the database, and\n    // create the collection.\n    request.onupgradeneeded = e => {\n      db = e.target.result;\n\n      if (write) {\n        db.createObjectStore(collection, { keyPath: '_id' });\n      }\n    };\n\n    // The `success` event is fired after `upgradeneeded` terminates.\n    // Save the handle to the database.\n    request.onsuccess = e => {\n      db = e.target.result;\n      dbCache[this.name] = db;\n\n      // If a second instance of the same IndexedDB database performs an\n      // upgrade operation, the `versionchange` event is fired. Then, close the\n      // database to allow the external upgrade to proceed.\n      db.onversionchange = () => {\n        if (db) {\n          db.close();\n          db = null;\n          dbCache[this.name] = null;\n        }\n      };\n\n      // Try to obtain the collection handle by recursing. Append the handlers\n      // to empty the queue upon success and failure. Set the `force` flag so\n      // all but the current transaction remain queued.\n      const wrap = done => {\n        return arg => {\n          done(arg);\n\n          // Switch flag\n          this.inTransaction = false;\n\n          // The database handle has been established, we can now safely empty\n          // the queue. The queue must be emptied before invoking the concurrent\n          // operations to avoid infinite recursion.\n          if (this.queue.length > 0) {\n            const pending = this.queue;\n            this.queue = [];\n            forEach(pending, fn => {\n              fn.call(this);\n            });\n          }\n        };\n      };\n\n      this.openTransaction(collection, write, wrap(success), wrap(error), true);\n    };\n\n    request.onblocked = () => {\n      error(new KinveyError(`The ${this.name} indexedDB database version can't be upgraded ` +\n        `because the database is already open.`));\n    };\n\n    request.onerror = e => {\n      error(new KinveyError(`Unable to open the ${this.name} indexedDB database. ` +\n        `Received the error code ${e.target.errorCode}.`));\n    };\n  }\n\n  find(collection) {\n    const promise = new Promise((resolve, reject) => {\n      if (!collection) {\n        return reject(new KinveyError('A collection was not provided.'));\n      }\n\n      this.openTransaction(collection, false, store => {\n        const request = store.openCursor();\n        const response = [];\n\n        request.onsuccess = function onSuccess(e) {\n          const cursor = e.target.result;\n\n          if (cursor) {\n            response.push(cursor.value);\n            return cursor.continue();\n          }\n\n          resolve(response);\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while fetching data from the ${collection} ` +\n            `collection on the ${this.name} indexedDB database. Received the error code ${e.target.errorCode}.`));\n        };\n      }, error => {\n        if (error instanceof NotFoundError) {\n          return resolve([]);\n        }\n\n        reject(error);\n      });\n    });\n\n    return promise;\n  }\n\n  findById(collection, id) {\n    const promise = new Promise((resolve, reject) => {\n      this.openTransaction(collection, false, store => {\n        const request = store.get(id);\n\n        request.onsuccess = (e) => {\n          const entity = e.target.result;\n\n          if (entity) {\n            return resolve(entity);\n          }\n\n          reject(new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n            `collection on the ${this.name} indexedDB database.`));\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while retrieving an entity with _id = ${id} ` +\n            `from the ${collection} collection on the ${this.name} indexedDB database. ` +\n            `Received the error code ${e.target.errorCode}.`));\n        };\n      }, error => {\n        if (error instanceof NotFoundError) {\n          return reject(new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n            `collection on the ${this.name} indexedDB database.`));\n        }\n\n        reject(error);\n      });\n    });\n\n    return promise;\n  }\n\n  save(collection, entities) {\n    let singular = false;\n\n    if (!isArray(entities)) {\n      entities = [entities];\n      singular = true;\n    }\n\n    if (entities.length === 0) {\n      return Promise.resolve(entities);\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      this.openTransaction(collection, true, store => {\n        const request = store.transaction;\n\n        forEach(entities, entity => {\n          store.put(entity);\n        });\n\n        request.oncomplete = function onComplete() {\n          resolve(singular ? entities[0] : entities);\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while saving the entities to the ${collection} ` +\n            `collection on the ${this.name} indexedDB database. Received the error code ${e.target.errorCode}.`));\n        };\n      }, reject);\n    });\n\n    return promise;\n  }\n\n  removeById(collection, id) {\n    const promise = new Promise((resolve, reject) => {\n      this.openTransaction(collection, true, store => {\n        const request = store.transaction;\n        const doc = store.get(id);\n        store.delete(id);\n\n        request.oncomplete = () => {\n          if (!doc.result) {\n            return reject(new NotFoundError(`An entity with id = ${id} was not found in the ${collection} `\n              + `collection on the ${this.name} indexedDB database.`));\n          }\n\n          resolve({\n            count: 1,\n            entities: [doc.result]\n          });\n        };\n\n        request.onerror = (e) => {\n          reject(new KinveyError(`An error occurred while deleting an entity with id = ${id} ` +\n            `in the ${collection} collection on the ${this.name} indexedDB database. ` +\n            `Received the error code ${e.target.errorCode}.`));\n        };\n      }, reject);\n    });\n\n    return promise;\n  }\n\n  static isSupported() {\n    return indexedDB ? true : false;\n  }\n}\n","import Promise from 'babybird';\nimport { NotFoundError } from '../../../errors';\nimport keyBy from 'lodash/keyBy';\nimport merge from 'lodash/merge';\nimport values from 'lodash/values';\nimport forEach from 'lodash/forEach';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst localStorage = global.localStorage;\n\n/**\n * @private\n */\nexport class LocalStorage {\n  constructor(name = 'kinvey') {\n    this.name = name;\n  }\n\n  find(collection) {\n    return Promise.resolve().then(() => {\n      const data = localStorage.getItem(`${this.name}${collection}`);\n\n      try {\n        return JSON.parse(data);\n      } catch (err) {\n        return data;\n      }\n    }).then(entities => {\n      if (!entities) {\n        return [];\n      }\n\n      return entities;\n    });\n  }\n\n  findById(collection, id) {\n    return this.find(collection).then(entities => {\n      const entity = find(entities, entity => {\n        return entity[idAttribute] === id;\n      });\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      return entity;\n    });\n  }\n\n  save(collection, entities) {\n    return this.find(collection).then(existingEntities => {\n      const existingEntitiesById = keyBy(existingEntities, idAttribute);\n      const entitiesById = keyBy(entities, idAttribute);\n      const existingEntityIds = Object.keys(existingEntitiesById);\n\n      forEach(existingEntityIds, id => {\n        const existingEntity = existingEntitiesById[id];\n        const entity = entitiesById[id];\n\n        if (entity) {\n          entitiesById[id] = merge(existingEntity, entity);\n        }\n      });\n\n      localStorage.setItem(`${this.name}${collection}`, JSON.stringify(values(entitiesById)));\n      return entities;\n    });\n  }\n\n  removeById(collection, id) {\n    return this.find(collection).then(entities => {\n      const entitiesById = keyBy(entities, idAttribute);\n      const entity = entitiesById[id];\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      delete entitiesById[id];\n      localStorage.setItem(`${this.name}${collection}`, JSON.stringify(values(entitiesById)));\n\n      return {\n        count: 1,\n        entities: [entity]\n      };\n    });\n  }\n\n  static isSupported() {\n    if (localStorage) {\n      const item = 'testLocalStorageSupport';\n      try {\n        localStorage.setItem(item, item);\n        localStorage.removeItem(item);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n\n    return false;\n  }\n}\n","import Promise from 'babybird';\nimport Queue from 'promise-queue';\nimport { KinveyError, NotFoundError } from '../../../errors';\nimport MemoryCache from 'fast-memory-cache';\nimport keyBy from 'lodash/keyBy';\nimport forEach from 'lodash/forEach';\nimport values from 'lodash/values';\nimport find from 'lodash/find';\nimport isString from 'lodash/isString';\nimport isArray from 'lodash/isArray';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst caches = [];\n\nQueue.configure(Promise);\nconst queue = new Queue(1, Infinity);\n\n/**\n * @private\n */\nexport class Memory {\n  constructor(name) {\n    if (!name) {\n      throw new KinveyError('A name for the collection is required to use the memory persistence adapter.', name);\n    }\n\n    if (!isString(name)) {\n      throw new KinveyError('The name of the collection must be a string to use the memory persistence adapter', name);\n    }\n\n    this.name = name;\n    this.cache = caches[name];\n\n    if (!this.cache) {\n      this.cache = new MemoryCache();\n      caches[name] = this.cache;\n    }\n  }\n\n  find(collection) {\n    return queue.add(() => {\n      return Promise.resolve().then(() => {\n        const entities = this.cache.get(`${this.name}${collection}`);\n\n        if (entities) {\n          try {\n            return JSON.parse(entities);\n          } catch (err) {\n            return entities;\n          }\n        }\n\n        return entities;\n      }).then(entities => {\n        if (!entities) {\n          return [];\n        }\n\n        return entities;\n      });\n    });\n  }\n\n  findById(collection, id) {\n    return this.find(collection).then(entities => {\n      const entity = find(entities, entity => {\n        return entity[idAttribute] === id;\n      });\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      return entity;\n    });\n  }\n\n  save(collection, entities) {\n    let singular = false;\n\n    if (!isArray(entities)) {\n      entities = [entities];\n      singular = true;\n    }\n\n    if (entities.length === 0) {\n      return Promise.resolve(entities);\n    }\n\n    return this.find(collection).then(existingEntities => {\n      existingEntities = keyBy(existingEntities, idAttribute);\n      entities = keyBy(entities, idAttribute);\n      const entityIds = Object.keys(entities);\n\n      forEach(entityIds, id => {\n        existingEntities[id] = entities[id];\n      });\n\n      this.cache.set(`${this.name}${collection}`, JSON.stringify(values(existingEntities)));\n      entities = values(entities);\n      return singular ? entities[0] : entities;\n    });\n  }\n\n  removeById(collection, id) {\n    return this.find(collection).then(entities => {\n      entities = keyBy(entities, idAttribute);\n      const entity = entities[id];\n\n      if (!entity) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} memory database.`);\n      }\n\n      delete entities[id];\n      this.cache.set(`${this.name}${collection}`, JSON.stringify(values(entities)));\n\n      return {\n        count: 1,\n        entities: [entity]\n      };\n    });\n  }\n\n  static isSupported() {\n    return true;\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyError, NotFoundError } from '../../../errors';\nimport map from 'lodash/map';\nimport forEach from 'lodash/forEach';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst masterCollectionName = 'sqlite_master';\nconst size = 5 * 1000 * 1000; // Database size in bytes\nlet webSQL = null;\nconst dbCache = {};\n\nif (typeof window !== 'undefined') {\n  webSQL = {\n    openDatabase: typeof openDatabase !== 'undefined' ? openDatabase : global.openDatabase\n  };\n}\n\n/**\n * @private\n */\nexport class WebSQL {\n  constructor(name = 'kinvey') {\n    this.name = name;\n  }\n\n  openTransaction(collection, query, parameters, write = false) {\n    let db = dbCache[this.name];\n    const escapedCollection = `\"${collection}\"`;\n    const isMaster = collection === masterCollectionName;\n    const isMulti = isArray(query);\n\n    query = isMulti ? query : [[query, parameters]];\n\n    if (!db) {\n      db = webSQL.openDatabase(this.name, 1, '', size);\n      dbCache[this.name] = db;\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      const writeTxn = write || !isFunction(db.readTransaction);\n      db[writeTxn ? 'transaction' : 'readTransaction'](tx => {\n        if (write && !isMaster) {\n          tx.executeSql(`CREATE TABLE IF NOT EXISTS ${escapedCollection} ` +\n            `(key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)`);\n        }\n\n        let pending = query.length;\n        const responses = [];\n\n        forEach(query, parts => {\n          const sql = parts[0].replace('#{collection}', escapedCollection);\n\n          tx.executeSql(sql, parts[1], (_, resultSet) => {\n            const response = {\n              rowCount: resultSet.rowsAffected,\n              result: []\n            };\n\n            if (resultSet.rows.length) {\n              for (let i = 0, len = resultSet.rows.length; i < len; i++) {\n                try {\n                  const value = resultSet.rows.item(i).value;\n                  const entity = isMaster ? value : JSON.parse(value);\n                  response.result.push(entity);\n                } catch (err) {\n                  // Catch the error\n                }\n              }\n            }\n\n            responses.push(response);\n            pending = pending - 1;\n\n            if (pending === 0) {\n              resolve(isMulti ? responses : responses.shift());\n            }\n          });\n        });\n      }, err => {\n        err = isString(err) ? err : err.message;\n\n        if (err && err.indexOf('no such table') === -1) {\n          return reject(new NotFoundError(`The ${collection} collection was not found on ` +\n            `the ${this.name} webSQL database.`));\n        }\n\n        const query = `SELECT name AS value from #{collection} WHERE type = ? AND name = ?`;\n        const parameters = ['table', collection];\n\n        this.openTransaction(masterCollectionName, query, parameters).then(response => {\n          if (response.result.length === 0) {\n            return reject(new NotFoundError(`The ${collection} collection was not found on ` +\n              `the ${this.name} webSQL database.`));\n          }\n\n          reject(new KinveyError(`Unable to open a transaction for the ${collection} ` +\n            `collection on the ${this.name} webSQL database.`));\n        }).catch(err => {\n          reject(new KinveyError(`Unable to open a transaction for the ${collection} ` +\n            `collection on the ${this.name} webSQL database.`, err));\n        });\n      });\n    });\n\n    return promise;\n  }\n\n  find(collection) {\n    const sql = 'SELECT value FROM #{collection}';\n    const promise = this.openTransaction(collection, sql, []).then(response => {\n      return response.result;\n    }).catch(error => {\n      if (error instanceof NotFoundError) {\n        return [];\n      }\n\n      throw error;\n    });\n    return promise;\n  }\n\n  findById(collection, id) {\n    const sql = 'SELECT value FROM #{collection} WHERE key = ?';\n    const promise = this.openTransaction(collection, sql, [id]).then(response => {\n      const entities = response.result;\n\n      if (entities.length === 0) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} webSQL database.`);\n      }\n\n      return entities[0];\n    });\n    return promise;\n  }\n\n  save(collection, entities) {\n    const queries = [];\n    entities = map(entities, entity => {\n      queries.push([\n        'REPLACE INTO #{collection} (key, value) VALUES (?, ?)',\n        [entity[idAttribute], JSON.stringify(entity)]\n      ]);\n\n      return entity;\n    });\n\n    const promise = this.openTransaction(collection, queries, null, true).then(() => {\n      return entities;\n    });\n    return promise;\n  }\n\n  removeById(collection, id) {\n    const promise = this.openTransaction(collection, [\n      ['SELECT value FROM #{collection} WHERE key = ?', [id]],\n      ['DELETE FROM #{collection} WHERE key = ?', [id]],\n    ], null, true).then(response => {\n      const entities = response[0].result;\n      let count = response[1].rowCount;\n      count = count ? count : entities.length;\n\n      if (count === 0) {\n        throw new NotFoundError(`An entity with _id = ${id} was not found in the ${collection} ` +\n          `collection on the ${this.name} webSQL database.`);\n      }\n\n      return {\n        count: 1,\n        entities: entities\n      };\n    });\n\n    return promise;\n  }\n\n  static isSupported() {\n    return webSQL ? true : false;\n  }\n}\n","import Promise from 'babybird';\nimport { Query } from '../../query';\nimport { Aggregation } from '../../aggregation';\nimport { IndexedDB } from './adapters/indexeddb';\nimport { LocalStorage } from './adapters/localstorage';\nimport { Memory } from './adapters/memory';\nimport { WebSQL } from './adapters/websql';\nimport { KinveyError } from '../../errors';\nimport { Log } from '../../log';\nimport map from 'lodash/map';\nimport result from 'lodash/result';\nimport reduce from 'lodash/reduce';\nimport forEach from 'lodash/forEach';\nimport isString from 'lodash/isString';\nimport isArray from 'lodash/isArray';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * @private\n * Enum for DB Adapters.\n */\nconst DBAdapter = {\n  IndexedDB: 'IndexedDB',\n  LocalStorage: 'LocalStorage',\n  Memory: 'Memory',\n  WebSQL: 'WebSQL'\n};\nObject.freeze(DBAdapter);\nexport { DBAdapter };\n\n/**\n * @private\n */\nexport class DB {\n  constructor(name, adapters = [DBAdapter.IndexedDB, DBAdapter.WebSQL, DBAdapter.LocalStorage, DBAdapter.Memory]) {\n    if (!isArray(adapters)) {\n      adapters = [adapters];\n    }\n\n    forEach(adapters, adapter => {\n      switch (adapter) {\n        case DBAdapter.IndexedDB:\n          if (IndexedDB.isSupported()) {\n            this.adapter = new IndexedDB(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.LocalStorage:\n          if (LocalStorage.isSupported()) {\n            this.adapter = new LocalStorage(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.Memory:\n          if (Memory.isSupported()) {\n            this.adapter = new Memory(name);\n            return false;\n          }\n\n          break;\n        case DBAdapter.WebSQL:\n          if (WebSQL.isSupported()) {\n            this.adapter = new WebSQL(name);\n            return false;\n          }\n\n          break;\n        default:\n          Log.warn(`The ${adapter} adapter is is not recognized.`);\n      }\n    });\n\n    if (!this.adapter) {\n      if (Memory.isSupported()) {\n        Log.error('Provided adapters are unsupported on this platform. ' +\n          'Defaulting to StoreAdapter.Memory adapter.', adapters);\n        this.adapter = new Memory(name);\n      } else {\n        Log.error('Provided adapters are unsupported on this platform.', adapters);\n      }\n    }\n  }\n\n  get objectIdPrefix() {\n    return '';\n  }\n\n  generateObjectId(length = 24) {\n    const chars = 'abcdef0123456789';\n    let objectId = '';\n\n    for (let i = 0, j = chars.length; i < length; i++) {\n      const pos = Math.floor(Math.random() * j);\n      objectId += chars.substring(pos, pos + 1);\n    }\n\n    objectId = `${this.objectIdPrefix}${objectId}`;\n    return objectId;\n  }\n\n  find(collection, query) {\n    const promise = this.adapter.find(collection).then(entities => {\n      if (!entities) {\n        return [];\n      }\n\n      return entities;\n    }).then(entities => {\n      if (query && !(query instanceof Query)) {\n        query = new Query(result(query, 'toJSON', query));\n      }\n\n      if (entities.length > 0 && query) {\n        entities = query._process(entities);\n      }\n\n      return entities;\n    });\n\n    return promise;\n  }\n\n  count(collection, query) {\n    const promise = this.find(collection, query).then(entities => {\n      return entities.length;\n    });\n\n    return promise;\n  }\n\n  group(collection, aggregation) {\n    const promise = this.find(collection).then(entities => {\n      if (!(aggregation instanceof Aggregation)) {\n        aggregation = new Aggregation(result(aggregation, 'toJSON', aggregation));\n      }\n\n      if (entities.length > 0 && aggregation) {\n        return aggregation.process(entities);\n      }\n\n      return null;\n    });\n\n    return promise;\n  }\n\n  findById(collection, id) {\n    if (!isString(id)) {\n      return Promise.reject(new KinveyError('id must be a string', id));\n    }\n\n    const promise = this.adapter.findById(collection, id);\n    return promise;\n  }\n\n  save(collection, entities = []) {\n    let singular = false;\n\n    if (!entities) {\n      return Promise.resolve(null);\n    }\n\n    if (!isArray(entities)) {\n      singular = true;\n      entities = [entities];\n    }\n\n    entities = map(entities, entity => {\n      let id = entity[idAttribute];\n      const kmd = entity[kmdAttribute] || {};\n\n      if (!id) {\n        id = this.generateObjectId();\n        kmd.local = true;\n      }\n\n      delete kmd.lmt;\n      entity[idAttribute] = id;\n      entity[kmdAttribute] = kmd;\n      return entity;\n    });\n\n    return this.adapter.save(collection, entities).then(entities => {\n      if (singular && entities.length > 0) {\n        return entities[0];\n      }\n\n      return entities;\n    });\n  }\n\n  remove(collection, query) {\n    if (query && !(query instanceof Query)) {\n      query = new Query(result(query, 'toJSON', query));\n    }\n\n    // Removing should not take the query sort, limit, and skip into account.\n    if (query) {\n      query.sort(null).limit(null).skip(0);\n    }\n\n    const promise = this.find(collection, query).then(entities => {\n      const promises = entities.map(entity => {\n        return this.removeById(collection, entity[idAttribute]);\n      });\n\n      return Promise.all(promises);\n    }).then(responses => {\n      return reduce(responses, (result, response) => {\n        result.count += response.count;\n        result.entities = result.entities.concat(response.entities);\n        return result;\n      }, {\n        count: 0,\n        entities: []\n      });\n    });\n\n    return promise;\n  }\n\n  removeById(collection, id) {\n    if (!id) {\n      return Promise.resolve({\n        count: 0,\n        entities: []\n      });\n    }\n\n    if (!isString(id)) {\n      return Promise.reject(new KinveyError('id must be a string', id));\n    }\n\n    const promise = this.adapter.removeById(collection, id);\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { Middleware, KinveyMiddleware } from './middleware';\nimport { CacheMiddleware } from './middleware/cache';\nimport { ParseMiddleware } from './middleware/parse';\nimport { SerializeMiddleware } from './middleware/serialize';\nimport findIndex from 'lodash/findIndex';\nimport reduce from 'lodash/reduce';\nlet sharedCacheRackInstance;\nlet sharedNetworkRackInstance;\n\n/**\n * @private\n */\nexport class Rack extends KinveyMiddleware {\n  constructor(name = 'Rack') {\n    super(name);\n    this.middlewares = [];\n    this.canceled = false;\n  }\n\n  getMiddleware(index = -1) {\n    const middlewares = this.middlewares;\n\n    if (index < -1 || index >= middlewares.length) {\n      throw new Error(`Index ${index} is out of bounds.`);\n    }\n\n    return middlewares[index];\n  }\n\n  use(middleware) {\n    if (middleware) {\n      if (middleware instanceof KinveyMiddleware) {\n        this.middlewares.push(middleware);\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  useBefore(middlewareClass, middleware) {\n    if (middleware) {\n      if (middleware instanceof Middleware) {\n        const middlewares = this.middlewares;\n        const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n        if (index > -1) {\n          middlewares.splice(index, 0, middleware);\n          this.middlewares = middlewares;\n        }\n\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  useAfter(middlewareClass, middleware) {\n    if (middleware) {\n      if (middleware instanceof Middleware) {\n        const middlewares = this.middlewares;\n        const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n        if (index > -1) {\n          middlewares.splice(index + 1, 0, middleware);\n          this.middlewares = middlewares;\n        }\n\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  swap(middlewareClass, middleware) {\n    if (middleware) {\n      if (middleware instanceof Middleware) {\n        const middlewares = this.middlewares;\n        const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n        if (index > -1) {\n          middlewares.splice(index, 1, middleware);\n          this.middlewares = middlewares;\n        }\n\n        return;\n      }\n\n      throw new Error('Unable to use the middleware. It must be an instance of Middleware.');\n    }\n  }\n\n  remove(middlewareClass) {\n    const middlewares = this.middlewares;\n    const index = findIndex(middlewares, existingMiddleware => existingMiddleware instanceof middlewareClass);\n\n    if (index > -1) {\n      middlewares.splice(index, 1);\n      this.middlewares = middlewares;\n      this.remove(middlewareClass);\n    }\n  }\n\n  reset() {\n    this.middlewares = [];\n  }\n\n  execute(request) {\n    if (!request) {\n      return Promise.reject(new Error('Request is null. Please provide a valid request.'));\n    }\n\n    return reduce(this.middlewares, (promise, middleware) => {\n      return promise.then(request => {\n        return middleware.handle(request);\n      });\n    }, Promise.resolve(request));\n  }\n\n  cancel() {\n    this.canceled = true;\n  }\n\n  handle(request) {\n    return this.execute(request);\n  }\n\n  generateTree(level = 0) {\n    const root = super.generateTree(level);\n    const middlewares = this.middlewares;\n\n    middlewares.forEach((middleware) => {\n      root.nodes.push(middleware.generateTree(level + 1));\n    });\n\n    return root;\n  }\n}\n\n/**\n * @private\n */\nexport class KinveyRack extends Rack {\n  execute(request) {\n    const promise = super.execute(request).then(request => {\n      return request.response;\n    });\n    return promise;\n  }\n}\n\n/**\n * @private\n */\nexport class CacheRack extends KinveyRack {\n  constructor(name = 'Kinvey Cache Rack') {\n    super(name);\n    this.use(new CacheMiddleware());\n  }\n\n  static sharedInstance() {\n    let instance = sharedCacheRackInstance;\n\n    if (!instance) {\n      instance = new CacheRack();\n      sharedCacheRackInstance = instance;\n    }\n\n    return instance;\n  }\n}\n\n/**\n * @private\n */\nexport class NetworkRack extends KinveyRack {\n  constructor(name = 'Kinvey Network Rack') {\n    super(name);\n    this.use(new SerializeMiddleware());\n    this.use(new ParseMiddleware());\n  }\n\n  static sharedInstance() {\n    let instance = sharedNetworkRackInstance;\n\n    if (!instance) {\n      instance = new NetworkRack();\n      sharedNetworkRackInstance = instance;\n    }\n\n    return instance;\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyRequest } from './request';\nimport { LocalRequest } from './local';\nimport { NetworkRequest } from './network';\nimport { Response } from './response';\nimport { HttpMethod, StatusCode } from '../enums';\nimport { NotFoundError } from '../errors';\nimport { Query } from '../query';\nimport keyBy from 'lodash/keyBy';\nimport reduce from 'lodash/reduce';\nimport result from 'lodash/result';\nimport values from 'lodash/values';\nimport forEach from 'lodash/forEach';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nconst lmtAttribute = process.env.KINVEY_LMT_ATTRIBUTE || 'lmt';\nconst maxIdsPerRequest = process.env.KINVEY_MAX_IDS || 200;\n\n/**\n * @private\n */\nexport class DeltaFetchRequest extends KinveyRequest {\n  execute() {\n    const promise = super.execute().then(() => {\n      if (this.method !== HttpMethod.GET) {\n        throw new Error('Invalid http method. Http GET requests are only supported by DeltaFetchRequests.');\n      }\n\n      const localRequest = new LocalRequest({\n        method: HttpMethod.GET,\n        url: this.url,\n        headers: this.headers,\n        query: this.query,\n        timeout: this.timeout,\n        client: this.client\n      });\n      return localRequest.execute();\n    }).catch(error => {\n      if (error instanceof NotFoundError) {\n        return new Response({\n          statusCode: StatusCode.Ok,\n          data: []\n        });\n      }\n\n      throw error;\n    }).then(cacheResponse => {\n      if (cacheResponse.data.length > 0) {\n        const cacheDocuments = keyBy(cacheResponse.data, idAttribute);\n        const query = new Query(result(this.query, 'toJSON', this.query));\n        query.fields([idAttribute, kmdAttribute]);\n        const networkRequest = new NetworkRequest({\n          method: HttpMethod.GET,\n          url: this.url,\n          headers: this.headers,\n          auth: this.auth,\n          query: query,\n          timeout: this.timeout,\n          client: this.client\n        });\n\n        return networkRequest.execute().then(networkResponse => {\n          const networkDocuments = keyBy(networkResponse.data, idAttribute);\n          const deltaSet = networkDocuments;\n          const cacheDocumentIds = Object.keys(cacheDocuments);\n\n          forEach(cacheDocumentIds, id => {\n            const cacheDocument = cacheDocuments[id];\n            const networkDocument = networkDocuments[id];\n\n            if (networkDocument) {\n              if (networkDocument[kmdAttribute] && cacheDocument[kmdAttribute]\n                  && networkDocument[kmdAttribute][lmtAttribute] === cacheDocument[kmdAttribute][lmtAttribute]) {\n                delete deltaSet[id];\n              } else {\n                delete cacheDocuments[id];\n              }\n            } else {\n              delete cacheDocuments[id];\n            }\n          });\n\n          const deltaSetIds = Object.keys(deltaSet);\n          const promises = [];\n          let i = 0;\n\n          while (i < deltaSetIds.length) {\n            const query = new Query(result(this.query, 'toJSON', this.query));\n            const ids = deltaSetIds.slice(i, deltaSetIds.length > maxIdsPerRequest + i ?\n                                             maxIdsPerRequest : deltaSetIds.length);\n            query.contains(idAttribute, ids);\n            const networkRequest = new NetworkRequest({\n              method: HttpMethod.GET,\n              url: this.url,\n              headers: this.headers,\n              auth: this.auth,\n              query: query,\n              timeout: this.timeout,\n              client: this.client\n            });\n\n            const promise = networkRequest.execute();\n            promises.push(promise);\n            i += maxIdsPerRequest;\n          }\n\n          return Promise.all(promises).then(responses => {\n            const initialResponse = new Response({\n              statusCode: StatusCode.Ok,\n              data: []\n            });\n            return reduce(responses, (result, response) => {\n              if (response.isSuccess()) {\n                result.addHeaders(response.headers);\n                result.data = result.data.concat(response.data);\n              }\n\n              return result;\n            }, initialResponse);\n          }).then(response => {\n            response.data = response.data.concat(values(cacheDocuments));\n\n            if (this.query) {\n              const query = new Query(result(this.query, 'toJSON', this.query));\n              query.skip(0).limit(0);\n              response.data = query._process(response.data);\n            }\n\n            return response;\n          });\n        });\n      }\n\n      const networkRequest = new NetworkRequest({\n        method: HttpMethod.GET,\n        url: this.url,\n        headers: this.headers,\n        auth: this.auth,\n        query: this.query,\n        timeout: this.timeout,\n        client: this.client\n      });\n      return networkRequest.execute();\n    });\n\n    return promise;\n  }\n}\n","import { KinveyRequest } from './request';\nimport { CacheRack } from '../rack/rack';\nimport { NoResponseError } from '../errors';\nimport { Response } from './response';\n\n/**\n * @private\n */\nexport class LocalRequest extends KinveyRequest {\n  constructor(options) {\n    super(options);\n    this.rack = CacheRack.sharedInstance();\n  }\n\n  execute() {\n    const promise = super.execute().then(() => {\n      return this.rack.execute(this);\n    }).then(response => {\n      if (!response) {\n        throw new NoResponseError();\n      }\n\n      if (!(response instanceof Response)) {\n        return new Response({\n          statusCode: response.statusCode,\n          headers: response.headers,\n          data: response.data\n        });\n      }\n\n      return response;\n    }).then(response => {\n      if (!response.isSuccess()) {\n        throw response.error;\n      }\n\n      return response;\n    });\n\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel().then(() => {\n      return this.rack.cancel();\n    });\n    return promise;\n  }\n}\n","import { KinveyRequest } from './request';\nimport { NetworkRack } from '../rack/rack';\nimport { NoResponseError, InvalidCredentialsError } from '../errors';\nimport { HttpMethod, AuthType } from '../enums';\nimport { Response } from './response';\nimport url from 'url';\nconst socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nconst micIdentity = process.env.KINVEY_MIC_IDENTITY || 'kinveyAuth';\nconst tokenPathname = process.env.KINVEY_MIC_TOKEN_PATHNAME || '/oauth/token';\nconst usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\n\n/**\n * @private\n */\nexport class NetworkRequest extends KinveyRequest {\n  constructor(options) {\n    super(options);\n    this.rack = NetworkRack.sharedInstance();\n    this.automaticallyRefreshAuthToken = true;\n  }\n\n  execute() {\n    const promise = super.execute().then(() => {\n      return this.rack.execute(this);\n    }).then(response => {\n      if (!response) {\n        throw new NoResponseError();\n      }\n\n      if (!(response instanceof Response)) {\n        return new Response({\n          statusCode: response.statusCode,\n          headers: response.headers,\n          data: response.data\n        });\n      }\n\n      return response;\n    }).then(response => {\n      if (!response.isSuccess()) {\n        throw response.error;\n      }\n\n      return response;\n    }).catch(error => {\n      if (error instanceof InvalidCredentialsError && this.automaticallyRefreshAuthToken) {\n        this.automaticallyRefreshAuthToken = false;\n        const activeSocialIdentity = this.client.getActiveSocialIdentity();\n\n        // Refresh MIC Auth Token\n        if (activeSocialIdentity && activeSocialIdentity.identity === micIdentity) {\n          // Refresh the token\n          const token = activeSocialIdentity.token;\n          const request = new NetworkRequest({\n            method: HttpMethod.POST,\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            authType: AuthType.App,\n            url: url.format({\n              protocol: activeSocialIdentity.client.protocol,\n              host: activeSocialIdentity.client.host,\n              pathname: tokenPathname\n            }),\n            properties: this.properties,\n            data: {\n              grant_type: 'refresh_token',\n              client_id: token.audience,\n              redirect_uri: activeSocialIdentity.redirectUri,\n              refresh_token: token.refresh_token\n            }\n          });\n          request.automaticallyRefreshAuthToken = false;\n\n          return request.execute().then(response => {\n            return response.data;\n          }).then(token => {\n            // Login the user with the new token\n            const activeUserData = this.client.getActiveUserData();\n            const socialIdentity = activeUserData[socialIdentityAttribute];\n            socialIdentity[activeSocialIdentity.identity] = token;\n            activeUserData[socialIdentityAttribute] = socialIdentity;\n\n            const request = new NetworkRequest({\n              method: HttpMethod.POST,\n              authType: AuthType.App,\n              url: url.format({\n                protocol: this.client.protocol,\n                host: this.client.host,\n                pathname: `/${usersNamespace}/${this.client.appKey}/login`\n              }),\n              properties: this.properties,\n              data: activeUserData,\n              timeout: this.timeout,\n              client: this.client\n            });\n            request.automaticallyRefreshAuthToken = false;\n            return request.execute();\n          }).then(response => {\n            // Store the new data\n            this.client.setActiveUserData(response.data);\n            this.client.setActiveSocialIdentity({\n              identity: activeSocialIdentity.identity,\n              redirectUri: activeSocialIdentity.redirectUri,\n              token: response.data[socialIdentityAttribute][activeSocialIdentity.identity]\n            });\n\n            // Execute the original request\n            return this.execute();\n          }).catch(() => {\n            throw error;\n          });\n        }\n      }\n\n      throw error;\n    }).then(response => {\n      this.automaticallyRefreshAuthToken = true;\n      return response;\n    }).catch(error => {\n      this.automaticallyRefreshAuthToken = true;\n      throw error;\n    });\n\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel().then(() => {\n      return this.rack.cancel();\n    });\n    return promise;\n  }\n}\n","import { KinveyError } from '../errors';\nimport isPlainObject from 'lodash/isPlainObject';\nconst appVersionKey = 'appVersion';\n\n/**\n * Request Properties class\n */\nexport class RequestProperties {\n  constructor(properties = {}) {\n    this.properties = properties;\n  }\n\n  get properties() {\n    return this._properties;\n  }\n\n  set properties(properties) {\n    this._properties = properties;\n  }\n\n  /**\n   * Return the app version request property.\n   *\n   * @return {String} App version\n   */\n  get appVersion() {\n    return this.getProperty(appVersionKey);\n  }\n\n  /**\n   * Set the app version request property. The app version can be provided\n   * in major.minor.patch format or something specific to your application.\n   *\n   * @param  {Any} version App version.\n   * @return {RequestProperties} The request properties instance.\n   */\n  set appVersion(version) {\n    version = Array.prototype.slice.call(arguments, 1);\n    const major = version[0];\n    const minor = version[1];\n    const patch = version[2];\n    let appVersion = '';\n\n    if (major) {\n      appVersion = (major + '').trim();\n    }\n\n    if (minor) {\n      appVersion = ('.' + minor).trim();\n    }\n\n    if (patch) {\n      appVersion = ('.' + patch).trim();\n    }\n\n    this.setProperty(appVersionKey, appVersion);\n    return this;\n  }\n\n  /**\n   * Returns the request property for the key or `undefined` if\n   * it has not been set.\n   *\n   * @param  {String} key Request property key\n   * @return {*} Request property value\n   */\n  getProperty(key) {\n    const properties = this.toJSON();\n\n    if (key && properties.hasOwnProperty(key)) {\n      return properties[key];\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Sets the request property key to the value.\n   *\n   * @param {String} key Request property key\n   * @param {*} value Request property value\n   * @return {RequestProperties} The request properties instance.\n   */\n  setProperty(key, value) {\n    const properties = {};\n    properties[key] = value;\n    this.addProperties(properties);\n    return this;\n  }\n\n  addProperties(properties) {\n    if (!isPlainObject(properties)) {\n      throw new KinveyError('properties argument must be an object');\n    }\n\n    Object.keys(properties).forEach((key) => {\n      const value = properties[key];\n\n      if (value) {\n        this.properties[key] = value;\n      } else {\n        delete this.properties[key];\n      }\n    });\n  }\n\n  clear() {\n    this.properties = {};\n  }\n\n  clearProperty(key) {\n    const properties = this.properties;\n\n    if (key && properties.hasOwnProperty(key)) {\n      delete properties[key];\n    }\n  }\n\n  /**\n   * Clears the app version property.\n   *\n   * @return {RequestProperties} The request properties instance.\n   */\n  clearAppVersion() {\n    return this.clearProperty(appVersionKey);\n  }\n\n  toJSON() {\n    return this.properties;\n  }\n}\n","import Promise from 'babybird';\nimport { HttpMethod, AuthType } from '../enums';\nimport { Device } from '../utils/device';\nimport { RequestProperties } from './properties';\nimport { KinveyRack } from '../rack/rack';\nimport { Client } from '../client';\nimport { byteCount } from '../utils/string';\nimport qs from 'qs';\nimport appendQuery from 'append-query';\nimport assign from 'lodash/assign';\nimport result from 'lodash/result';\nimport forEach from 'lodash/forEach';\nimport isString from 'lodash/isString';\nimport isPlainObject from 'lodash/isPlainObject';\nimport isEmpty from 'lodash/isEmpty';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\nconst Auth = {\n  /**\n   * Authenticate through (1) user credentials, (2) Master Secret, or (3) App\n   * Secret.\n   *\n   * @returns {Object}\n   */\n  all(client) {\n    try {\n      return Auth.session(client);\n    } catch (error) {\n      return Auth.basic(client);\n    }\n  },\n\n  /**\n   * Authenticate through App Secret.\n   *\n   * @returns {Object}\n   */\n  app(client) {\n    if (!client.appKey || !client.appSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.appSecret\n    };\n  },\n\n  /**\n   * Authenticate through (1) Master Secret, or (2) App Secret.\n   *\n   * @returns {Object}\n   */\n  basic(client) {\n    try {\n      return Auth.master(client);\n    } catch (error) {\n      return Auth.app(client);\n    }\n  },\n\n  /**\n   * Authenticate through Master Secret.\n   *\n   * @returns {Object}\n   */\n  master(client) {\n    if (!client.appKey || !client.masterSecret) {\n      throw new Error('Missing client credentials');\n    }\n\n    return {\n      scheme: 'Basic',\n      username: client.appKey,\n      password: client.masterSecret\n    };\n  },\n\n  /**\n   * Do not authenticate.\n   *\n   * @returns {Null}\n   */\n  none() {\n    return null;\n  },\n\n  /**\n   * Authenticate through user credentials.\n   *\n   * @returns {Object}\n   */\n  session(client) {\n    const activeUserData = client.getActiveUserData();\n\n    if (!activeUserData) {\n      throw new Error('There is not an active user.');\n    }\n\n    return {\n      scheme: 'Kinvey',\n      credentials: activeUserData[kmdAttribute].authtoken\n    };\n  }\n};\n\n/**\n * @private\n */\nexport class Request {\n  constructor(options = {}) {\n    options = assign({\n      method: HttpMethod.GET,\n      headers: {},\n      url: '',\n      data: null,\n      timeout: process.env.KINVEY_DEFAULT_TIMEOUT || 10000,\n      followRedirect: true\n    }, options);\n\n    this.method = options.method;\n    this.url = options.url;\n    this.data = options.data || options.body;\n    this.timeout = options.timeout;\n    this.followRedirect = options.followRedirect;\n    this.executing = false;\n\n    const headers = options.headers && isPlainObject(options.headers) ? options.headers : {};\n\n    if (!headers.Accept || !headers.accept) {\n      headers.Accept = 'application/json; charset=utf-8';\n    }\n\n    this.addHeaders(headers);\n  }\n\n  get method() {\n    return this._method;\n  }\n\n  set method(method) {\n    if (!isString(method)) {\n      method = String(method);\n    }\n\n    method = method.toUpperCase();\n\n    switch (method) {\n      case HttpMethod.GET:\n      case HttpMethod.POST:\n      case HttpMethod.PATCH:\n      case HttpMethod.PUT:\n      case HttpMethod.DELETE:\n        this._method = method;\n        break;\n      default:\n        throw new Error('Invalid Http Method. Only GET, POST, PATCH, PUT, and DELETE are allowed.');\n    }\n  }\n\n  get url() {\n    return appendQuery(this._url, qs.stringify({\n      _: Math.random().toString(36).substr(2)\n    }));\n  }\n\n  set url(url) {\n    this._url = url;\n  }\n\n  get body() {\n    return this.data;\n  }\n\n  set body(body) {\n    this.data = body;\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  set data(data) {\n    if (data) {\n      const contentTypeHeader = this.getHeader('Content-Type');\n      if (!contentTypeHeader) {\n        this.setHeader('Content-Type', 'application/json; charset=utf-8');\n      }\n    } else {\n      this.removeHeader('Content-Type');\n    }\n\n    this._data = data;\n  }\n\n  getHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      const keys = Object.keys(headers);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const key = keys[i];\n\n        if (key.toLowerCase() === name.toLowerCase()) {\n          return headers[key];\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  setHeader(name, value) {\n    if (!name || !value) {\n      throw new Error('A name and value must be provided to set a header.');\n    }\n\n    if (!isString(name)) {\n      name = String(name);\n    }\n\n    const headers = this.headers || {};\n\n    if (!isString(value)) {\n      headers[name] = JSON.stringify(value);\n    } else {\n      headers[name] = value;\n    }\n\n    this.headers = headers;\n  }\n\n  addHeader(header = {}) {\n    return this.setHeader(header.name, header.value);\n  }\n\n  addHeaders(headers) {\n    if (!isPlainObject(headers)) {\n      throw new Error('Headers argument must be an object.');\n    }\n\n    const names = Object.keys(headers);\n\n    forEach(names, name => {\n      const value = headers[name];\n      this.setHeader(name, value);\n    });\n  }\n\n  removeHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      delete headers[name];\n      this.headers = headers;\n    }\n  }\n\n  clearHeaders() {\n    this.headers = {};\n  }\n\n  isExecuting() {\n    return this.executing ? true : false;\n  }\n\n  execute() {\n    if (this.executing) {\n      return Promise.reject(new Error('Unable to execute the request. The request is already executing.'));\n    }\n\n    this.executing = Promise.resolve().then(response => {\n      this.executing = false;\n      return response;\n    }).catch(error => {\n      this.executing = false;\n      throw error;\n    });\n\n    return this.executing;\n  }\n\n  toJSON() {\n    const json = {\n      method: this.method,\n      headers: this.headers,\n      url: this.url,\n      data: this.data,\n      followRedirect: this.followRedirect\n    };\n\n    return json;\n  }\n}\n\n/**\n * @private\n */\nexport class KinveyRequest extends Request {\n  constructor(options = {}) {\n    super(options);\n\n    options = assign({\n      authType: AuthType.None,\n      properties: null,\n      query: null,\n      client: Client.sharedInstance()\n    }, options);\n\n    this.rack = new KinveyRack();\n    this.authType = options.authType;\n    this.properties = options.properties;\n    this.query = result(options.query, 'toJSON', options.query);\n    this.client = options.client;\n\n    const headers = {};\n    headers['X-Kinvey-Api-Version'] = process.env.KINVEY_API_VERSION || 3;\n\n    const device = new Device();\n    headers['X-Kinvey-Device-Information'] = JSON.stringify(device.toJSON());\n\n    if (options.contentType) {\n      headers['X-Kinvey-Content-Type'] = options.contentType;\n    }\n\n    if (options.skipBL === true) {\n      headers['X-Kinvey-Skip-Business-Logic'] = true;\n    }\n\n    if (options.trace === true) {\n      headers['X-Kinvey-Include-Headers-In-Response'] = 'X-Kinvey-Request-Id';\n      headers['X-Kinvey-ResponseWrapper'] = true;\n    }\n\n    this.addHeaders(headers);\n  }\n\n  set properties(properties) {\n    if (properties) {\n      if (!(properties instanceof RequestProperties)) {\n        properties = new RequestProperties(result(properties, 'toJSON', properties));\n      }\n\n      const appVersion = properties.appVersion;\n\n      if (appVersion) {\n        this.setHeader('X-Kinvey-Client-App-Version', appVersion);\n      } else {\n        this.removeHeader('X-Kinvey-Client-App-Version');\n      }\n\n      const customProperties = result(properties, 'toJSON', {});\n      delete customProperties.appVersion;\n      const customPropertiesHeader = JSON.stringify(customProperties);\n      const customPropertiesByteCount = byteCount(customPropertiesHeader);\n      const customPropertiesMaxBytesAllowed = process.env.KINVEY_MAX_HEADER_BYTES || 2000;\n\n      if (customPropertiesByteCount >= customPropertiesMaxBytesAllowed) {\n        throw new Error(\n          `The custom properties are ${customPropertiesByteCount} bytes.` +\n          `It must be less then ${customPropertiesMaxBytesAllowed} bytes.`,\n          'Please remove some custom properties.');\n      }\n\n      this.setHeader('X-Kinvey-Custom-Request-Properties', customPropertiesHeader);\n    }\n  }\n\n  get url() {\n    const url = super.url;\n    const queryString = {};\n\n    if (this.query) {\n      queryString.query = this.query.filter;\n\n      if (!isEmpty(this.query.fields)) {\n        queryString.fields = this.query.fields.join(',');\n      }\n\n      if (this.query.limit) {\n        queryString.limit = this.query.limit;\n      }\n\n      if (this.query.skip > 0) {\n        queryString.skip = this.query.skip;\n      }\n\n      if (!isEmpty(this.query.sort)) {\n        queryString.sort = this.query.sort;\n      }\n    }\n\n    const keys = Object.keys(queryString);\n    forEach(keys, key => {\n      queryString[key] = isString(queryString[key]) ? queryString[key] : JSON.stringify(queryString[key]);\n    });\n\n    if (isEmpty(queryString)) {\n      return url;\n    }\n\n    return appendQuery(url, qs.stringify(queryString));\n  }\n\n  set url(url) {\n    super.url = url;\n  }\n\n  get authorizationHeader() {\n    let authInfo;\n\n    switch (this.authType) {\n      case AuthType.All:\n        authInfo = Auth.all(this.client);\n        break;\n      case AuthType.App:\n        authInfo = Auth.app(this.client);\n        break;\n      case AuthType.Basic:\n        authInfo = Auth.basic(this.client);\n        break;\n      case AuthType.Master:\n        authInfo = Auth.master(this.client);\n        break;\n      case AuthType.None:\n        authInfo = Auth.none(this.client);\n        break;\n      case AuthType.Session:\n        authInfo = Auth.session(this.client);\n        break;\n      default:\n        try {\n          authInfo = Auth.session(this.client);\n        } catch (error) {\n          try {\n            authInfo = Auth.master(this.client);\n          } catch (error2) {\n            throw error;\n          }\n        }\n    }\n\n    if (authInfo) {\n      let credentials = authInfo.credentials;\n\n      if (authInfo.username) {\n        credentials = new Buffer(`${authInfo.username}:${authInfo.password}`).toString('base64');\n      }\n\n      return {\n        name: 'Authorization',\n        value: `${authInfo.scheme} ${credentials}`\n      };\n    }\n\n    return null;\n  }\n\n  execute() {\n    const authorizationHeader = this.authorizationHeader;\n\n    if (authorizationHeader) {\n      this.addHeader(authorizationHeader);\n    }\n\n    const promise = super.execute();\n    return promise;\n  }\n\n  cancel() {\n    const promise = super.cancel();\n    return promise;\n  }\n\n  toJSON() {\n    const json = super.toJSON();\n    json.query = this.query;\n    return json;\n  }\n}\n","import { StatusCode } from '../enums';\nimport { InsufficientCredentialsError, InvalidCredentialsError, KinveyError, NotFoundError } from '../errors';\nimport assign from 'lodash/assign';\nimport forEach from 'lodash/forEach';\nimport isString from 'lodash/isString';\nimport isPlainObject from 'lodash/isPlainObject';\n\n/**\n * @private\n */\nexport class Response {\n  constructor(options = {}) {\n    options = assign({\n      statusCode: StatusCode.Ok,\n      headers: {\n        'Content-Type': 'application/json; charset=utf-8'\n      },\n      data: null\n    }, options);\n\n    this.statusCode = options.statusCode;\n    this.addHeaders(options.headers);\n    this.data = options.data;\n  }\n\n  get error() {\n    if (this.isSuccess()) {\n      return null;\n    }\n\n    const data = this.data || {};\n    const name = data.name || data.error;\n    const message = data.message || data.description;\n    const debug = data.debug;\n\n    if (name === 'EntityNotFound'\n        || name === 'CollectionNotFound'\n        || name === 'AppNotFound'\n        || name === 'UserNotFound'\n        || name === 'BlobNotFound'\n        || name === 'DocumentNotFound') {\n      return new NotFoundError(message, debug);\n    } else if (name === 'InsufficientCredentials') {\n      return new InsufficientCredentialsError(message, debug);\n    } else if (name === 'InvalidCredentials') {\n      return new InvalidCredentialsError(message, debug);\n    }\n\n    return new KinveyError(message, debug);\n  }\n\n  getHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      const keys = Object.keys(headers);\n\n      for (let i = 0, len = keys.length; i < len; i++) {\n        const key = keys[i];\n\n        if (key.toLowerCase() === name.toLowerCase()) {\n          return headers[key];\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  setHeader(name, value) {\n    if (!name || !value) {\n      throw new Error('A name and value must be provided to set a header.');\n    }\n\n    if (!isString(name)) {\n      name = String(name);\n    }\n\n    const headers = this.headers || {};\n\n    if (!isString(value)) {\n      headers[name] = JSON.stringify(value);\n    } else {\n      headers[name] = value;\n    }\n\n    this.headers = headers;\n  }\n\n  addHeader(header = {}) {\n    return this.setHeader(header.name, header.value);\n  }\n\n  addHeaders(headers) {\n    if (!isPlainObject(headers)) {\n      throw new Error('Headers argument must be an object.');\n    }\n\n    const names = Object.keys(headers);\n\n    forEach(names, name => {\n      const value = headers[name];\n      this.setHeader(name, value);\n    });\n  }\n\n  removeHeader(name) {\n    if (name) {\n      if (!isString(name)) {\n        name = String(name);\n      }\n\n      const headers = this.headers || {};\n      delete headers[name];\n      this.headers = headers;\n    }\n  }\n\n  clearHeaders() {\n    this.headers = {};\n  }\n\n  isSuccess() {\n    return (this.statusCode >= 200 && this.statusCode < 300) || this.statusCode === 302;\n  }\n\n  toJSON() {\n    const json = {\n      statusCode: this.statusCode,\n      headers: this.headers,\n      data: this.data\n    };\n    return json;\n  }\n}\n","import Promise from 'babybird';\nimport { NetworkStore } from './networkstore';\nimport { Response } from '../requests/response';\nimport { AuthType, HttpMethod, StatusCode } from '../enums';\nimport { InsufficientCredentialsError, KinveyError, NotFoundError } from '../errors';\nimport { LocalRequest } from '../requests/local';\nimport { NetworkRequest } from '../requests/network';\nimport { DeltaFetchRequest } from '../requests/deltafetch';\nimport { Query } from '../query';\nimport { Aggregation } from '../aggregation';\nimport { Log } from '../log';\nimport { nested } from '../utils/object';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport forEach from 'lodash/forEach';\nimport map from 'lodash/map';\nimport isArray from 'lodash/isArray';\nimport keyBy from 'lodash/keyBy';\nimport differenceBy from 'lodash/differenceBy';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nconst syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\n\n/**\n * The CacheStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network using a cache on the device.\n */\nclass CacheStore extends NetworkStore {\n  /**\n   * Creates a new instance of the CacheStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n  constructor(name) {\n    super(name);\n\n    /**\n     * @type {Number}\n     */\n    this.ttl = undefined;\n  }\n\n  /**\n   * The sync pathname for the store.\n   *\n   * @param   {Client}   [client]     Client\n   * @return  {string}                Sync pathname\n   */\n  get _syncPathname() {\n    if (!this.name) {\n      throw new Error('Unable to get a sync pathname for a collection with no name.');\n    }\n\n    return `/${appdataNamespace}/${this.client.appKey}/${syncCollectionName}/${this.name}`;\n  }\n\n  /**\n   * Finds all entities in a collection. A query can be optionally provided to return\n   * a subset of all entities in a collection or omitted to return all entities in\n   * a collection. The number of entities returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the entities or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  find(query, options = {}) {\n    Log.debug(`Retrieving the entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      useDeltaFetch: true\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(cacheResponse => {\n      const result = {\n        cache: cacheResponse.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        if (options.useDeltaFetch) {\n          const request = new DeltaFetchRequest({\n            method: HttpMethod.GET,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: this._pathname\n            }),\n            properties: options.properties,\n            query: query,\n            timeout: options.timeout,\n            client: this.client\n          });\n          return request.execute().then(response => {\n            return response.data;\n          });\n        }\n\n        return super.find(query, options);\n      }).then(networkEntities => {\n        const removedEntities = differenceBy(cacheResponse.data, networkEntities, idAttribute);\n        const removeEntityIds = Object.keys(keyBy(removedEntities, idAttribute));\n        const removeQuery = new Query();\n        removeQuery.contains(idAttribute, removeEntityIds);\n\n        const request = new LocalRequest({\n          method: HttpMethod.DELETE,\n          url: url.format({\n            protocol: this.client.protocol,\n            host: this.client.host,\n            pathname: this._pathname\n          }),\n          properties: options.properties,\n          query: removeQuery,\n          timeout: options.timeout,\n          client: this.client\n        });\n        return request.execute().then(() => {\n          return this._cache(networkEntities);\n        });\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Groups entities in a collection. An aggregation can be optionally provided to group\n   * a subset of entities in a collection or omitted to group all the entities\n   * in a collection. A promise will be returned that will be resolved with the result\n   * or rejected with an error.\n   *\n   * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  group(aggregation, options = {}) {\n    Log.debug(`Grouping the entities in the ${this.name} collection.`, aggregation, options);\n\n    options = assign({\n      force: false\n    }, options);\n\n    if (!(aggregation instanceof Aggregation)) {\n      return Promise.reject(new KinveyError('Invalid aggregation. ' +\n        'It must be an instance of the Kinvey.Aggregation class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/_group`\n        }),\n        properties: options.properties,\n        data: aggregation.toJSON(),\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const result = {\n        cache: response.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        return super.group(aggregation, options);\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Grouped the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to group the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Counts entities in a collection. A query can be optionally provided to count\n   * a subset of entities in a collection or omitted to count all the entities\n   * in a collection. A promise will be returned that will be resolved with the count\n   * or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  count(query, options = {}) {\n    Log.debug(`Counting the number of entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      force: false\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/_count`\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const result = {\n        cache: response.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        return super.count(query, options);\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Counted the number of entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to count the number of entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Retrieves a single entity in a collection by id. A promise will be returned that will\n   * be resolved with the entity or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  findById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to retrieve an entity.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Retrieving the entity in the ${this.name} collection with id = ${id}.`);\n\n    options = assign({\n      force: false,\n      useDeltaFetch: true\n    }, options);\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/${id}`\n        }),\n        properties: options.properties,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const result = {\n        cache: response.data\n      };\n\n      result.networkPromise = this.syncCount().then(count => {\n        if (count > 0) {\n          return this.push().then(() => {\n            return this.syncCount();\n          });\n        }\n\n        return count;\n      }).then(count => {\n        if (count > 0) {\n          throw new KinveyError(`Unable to load data from the network. There are ${count} entities that need ` +\n           `to be synced before data is loaded from the network.`);\n        }\n\n        if (options.useDeltaFetch) {\n          const request = new DeltaFetchRequest({\n            method: HttpMethod.GET,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${id}`\n            }),\n            properties: options.properties,\n            timeout: options.timeout,\n            client: this.client\n          });\n          return request.execute().then(response => {\n            return response.data;\n          });\n        }\n\n        return super.findById(id, options);\n      }).then(data => {\n        return this._cache(data);\n      }).catch(error => {\n        if (error instanceof NotFoundError) {\n          const request = new LocalRequest({\n            method: HttpMethod.DELETE,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${id}`\n            }),\n            properties: options.properties,\n            timeout: options.timeout,\n            client: this.client\n          });\n          return request.execute().then(() => {\n            throw error;\n          });\n        }\n\n        throw error;\n      });\n\n      return result;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(error => {\n      Log.error(`Failed to retrieve the entity in the ${this.name} collection with id = ${id}.`, error);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save a entity or an array of entities to a collection. A promise will be returned that\n   * will be resolved with the saved entity/entities or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity or entities to save.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data saved\n   *                                                                            in the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  save(entity, options = {}) {\n    if (!entity) {\n      Log.warn('No entity was provided to be saved.', entity);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Saving the entity(s) to the ${this.name} collection.`, entity);\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.POST,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        data: entity,\n        timeout: options.timeout,\n        client: this.client\n      });\n\n      if (entity[idAttribute]) {\n        request.method = HttpMethod.PUT;\n        request.url = url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/${entity[idAttribute]}`\n        });\n      }\n\n      return request.execute();\n    }).then(response => {\n      return this._sync(response.data, options).then(() => {\n        const data = isArray(response.data) ? response.data : [response.data];\n        const ids = Object.keys(keyBy(data, idAttribute));\n        const query = new Query().contains(idAttribute, ids);\n        return this.push(query, options);\n      }).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Saved the entity(s) to the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to save the entity(s) to the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove entities in a collection. A query can be optionally provided to remove\n   * a subset of entities in a collection or omitted to remove all entities in a\n   * collection. A promise will be returned that will be resolved with a count of the\n   * number of entities removed or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  remove(query, options = {}) {\n    Log.debug(`Removing the entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.DELETE,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._pathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        const query = new Query().contains(idAttribute, []);\n        return this.push(query, options);\n      }).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove an entity in a collection. A promise will be returned that will be\n   * resolved with a count of the number of entities removed or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  removeById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to be removed.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Removing an entity in the ${this.name} collection with id = ${id}.`);\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.DELETE,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `${this._pathname}/${id}`\n        }),\n        properties: options.properties,\n        authType: AuthType.Default,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        const query = new Query().contains(idAttribute, [id]);\n        return this.push(query, options);\n      }).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Push sync items for a collection to the network. A promise will be returned that will be\n   * resolved with the result of the push or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to push a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.DataStore.getInstance('books');\n   * store.push().then(function(result) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  push(query, options = {}) {\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const promise = Promise.resolve().then(() => {\n      const request = new LocalRequest({\n        method: HttpMethod.GET,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        query: query,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(response => {\n      const save = [];\n      const remove = [];\n      const entities = response.data.entities;\n      const ids = Object.keys(entities);\n      let size = response.data.size;\n\n      const promises = map(ids, id => {\n        const metadata = entities[id];\n        const request = new LocalRequest({\n          method: HttpMethod.GET,\n          url: url.format({\n            protocol: this.client.protocol,\n            host: this.client.host,\n            pathname: `${this._pathname}/${id}`\n          }),\n          properties: metadata.properties,\n          timeout: options.timeout,\n          client: this.client\n        });\n        return request.execute().then(response => {\n          save.push(response.data);\n          return response.data;\n        }).catch(err => {\n          if (err instanceof NotFoundError) {\n            remove.push(id);\n            return null;\n          }\n\n          throw err;\n        });\n      });\n\n      return Promise.all(promises).then(() => {\n        const saved = map(save, entity => {\n          const metadata = entities[entity[idAttribute]];\n          const isLocalEntity = nested(entity, `${kmdAttribute}.local`);\n\n          if (isLocalEntity) {\n            const originalId = entity[idAttribute];\n            delete entity[idAttribute];\n            delete entity[kmdAttribute];\n\n            const request = new NetworkRequest({\n              method: HttpMethod.POST,\n              authType: AuthType.Default,\n              url: url.format({\n                protocol: this.client.protocol,\n                host: this.client.host,\n                pathname: this._pathname\n              }),\n              properties: metadata.properties,\n              data: entity,\n              timeout: options.timeout,\n              client: this.client\n            });\n\n            return request.execute().then(response => {\n              const request = new LocalRequest({\n                method: HttpMethod.PUT,\n                url: url.format({\n                  protocol: this.client.protocol,\n                  host: this.client.host,\n                  pathname: this._pathname\n                }),\n                properties: metadata.properties,\n                data: response.data,\n                timeout: options.timeout,\n                client: this.client\n              });\n              return request.execute();\n            }).then(() => {\n              const request = new LocalRequest({\n                method: HttpMethod.DELETE,\n                url: url.format({\n                  protocol: this.client.protocol,\n                  host: this.client.host,\n                  pathname: `${this._pathname}/${originalId}`\n                }),\n                properties: metadata.properties,\n                timeout: options.timeout,\n                client: this.client\n              });\n\n              return request.execute().then(response => {\n                const result = response.data;\n                if (result.count === 1) {\n                  size = size - 1;\n                  delete entities[originalId];\n                  return {\n                    _id: originalId,\n                    entity: entity\n                  };\n                }\n\n                return {\n                  _id: originalId,\n                  error: new KinveyError(`Expected count to be 1 but instead it was ${result.count} ` +\n                    `when trying to remove entity with _id ${originalId}.`)\n                };\n              });\n            }).catch(err => {\n              return {\n                _id: originalId,\n                error: err\n              };\n            });\n          }\n\n          const request = new NetworkRequest({\n            method: HttpMethod.PUT,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${entity[idAttribute]}`\n            }),\n            properties: metadata.properties,\n            data: entity,\n            timeout: options.timeout,\n            client: this.client\n          });\n\n          return request.execute().then(response => {\n            size = size - 1;\n            delete entities[response.data[idAttribute]];\n            return {\n              _id: response.data[idAttribute],\n              entity: response.data\n            };\n          }).catch(err => {\n            // If the credentials used to authenticate this request are\n            // not authorized to run the operation then just remove the entity\n            // from the sync table\n            if (err instanceof InsufficientCredentialsError) {\n              size = size - 1;\n              delete entities[entity[idAttribute]];\n              return {\n                _id: entity[idAttribute],\n                error: err\n              };\n            }\n\n            return {\n              _id: entity[idAttribute],\n              error: err\n            };\n          });\n        });\n\n        const removed = map(remove, id => {\n          const metadata = entities[id];\n          const request = new NetworkRequest({\n            method: HttpMethod.DELETE,\n            authType: AuthType.Default,\n            url: url.format({\n              protocol: this.client.protocol,\n              host: this.client.host,\n              pathname: `${this._pathname}/${id}`\n            }),\n            properties: metadata.properties,\n            timeout: options.timeout,\n            client: this.client\n          });\n\n          return request.execute().then(response => {\n            const result = response.data;\n\n            if (result.count === 1) {\n              size = size - 1;\n              delete entities[id];\n              return {\n                _id: id\n              };\n            }\n\n            return {\n              _id: id,\n              error: new KinveyError(`Expected count to be 1 but instead it was ${result.count} ` +\n                `when trying to remove entity with _id ${id}.`)\n            };\n          }).catch(err => {\n            // If the credentials used to authenticate this request are\n            // not authorized to run the operation or the entity was\n            // not found then just remove the entity from the sync table\n            if (err instanceof NotFoundError || err instanceof InsufficientCredentialsError) {\n              size = size - 1;\n              delete entities[id];\n              return {\n                _id: id,\n                error: err\n              };\n            }\n\n            return {\n              _id: id,\n              error: err\n            };\n          });\n        });\n\n        return Promise.all([Promise.all(saved), Promise.all(removed)]);\n      }).then(results => {\n        const savedResults = results[0];\n        const removedResults = results[1];\n        const result = {\n          collection: this.name,\n          success: [],\n          error: []\n        };\n\n        forEach(savedResults, savedResult => {\n          if (savedResult.error) {\n            result.error.push(savedResult);\n          } else {\n            result.success.push(savedResult);\n          }\n        });\n\n        forEach(removedResults, removedResult => {\n          if (removedResult.error) {\n            result.error.push(removedResult);\n          } else {\n            result.success.push(removedResult);\n          }\n        });\n\n        return result;\n      }).then(result => {\n        response.data.size = size;\n        response.data.entities = entities;\n\n        const request = new LocalRequest({\n          method: HttpMethod.PUT,\n          url: url.format({\n            protocol: this.client.protocol,\n            host: this.client.host,\n            pathname: this._syncPathname\n          }),\n          properties: options.properties,\n          data: response.data,\n          timeout: options.timeout,\n          client: this.client\n        });\n        return request.execute().then(() => {\n          return result;\n        });\n      });\n    }).catch(err => {\n      if (err instanceof NotFoundError) {\n        return {\n          collection: this.name,\n          success: [],\n          error: []\n        };\n      }\n\n      throw err;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Pull items for a collection from the network to your local cache. A promise will be\n   * returned that will be resolved with the result of the pull or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to pull a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.Store.getInstance('books');\n   * store.pull().then(function(result) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  pull(query, options = {}) {\n    const promise = this.syncCount(null, options).then(count => {\n      if (count > 0) {\n        throw new KinveyError('Unable to pull data. You must push the pending sync items first.',\n          'Call store.push() to push the pending sync items before you pull new data.');\n      }\n\n      return this.find(query, options);\n    }).then(result => {\n      return result.network;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Sync items for a collection. This will push pending sync items first and then\n   * pull items from the network into your local cache. A promise will be\n   * returned that will be resolved with the result of the pull or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to pull a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.Store.getInstance('books');\n   * store.sync().then(function(result) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  sync(query, options = {}) {\n    const promise = this.push(null, options).then(pushResponse => {\n      return this.pull(query, options).then(pullResponse => {\n        return {\n          push: pushResponse,\n          pull: pullResponse\n        };\n      });\n    });\n\n    return promise;\n  }\n\n  /**\n   * Count the number of entities waiting to be pushed to the network. A promise will be\n   * returned with the count of entities or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the local cache.\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var store = Kinvey.Store.getInstance('books');\n   * store.syncCount().then(function(count) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  syncCount(query, options = {}) {\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._syncPathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data.size || 0;\n    }).catch(err => {\n      if (err instanceof NotFoundError) {\n        return 0;\n      }\n\n      throw err;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Add or update entities stored in the cache. A promise will be returned with the entities\n   * or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity(s) to add or update in the cache.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  _cache(entities, options = {}) {\n    const request = new LocalRequest({\n      method: HttpMethod.PUT,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      data: entities,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Add entities to be pushed. A promise will be returned with null or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity(s) to add to the sync table.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  _sync(entities, options = {}) {\n    if (!this.name) {\n      return Promise.reject(new KinveyError('Unable to add entities to the sync table for a store with no name.'));\n    }\n\n    if (!entities) {\n      return Promise.resolve(null);\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._syncPathname\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().catch(error => {\n      if (error instanceof NotFoundError) {\n        return new Response({\n          statusCode: StatusCode.Ok,\n          data: {\n            _id: this.name,\n            entities: {},\n            size: 0\n          }\n        });\n      }\n\n      throw error;\n    }).then(response => {\n      const syncData = response.data || {\n        _id: this.name,\n        entities: {},\n        size: 0\n      };\n\n      if (!isArray(entities)) {\n        entities = [entities];\n      }\n\n      forEach(entities, entity => {\n        if (entity[idAttribute]) {\n          if (!syncData.entities.hasOwnProperty(entity[idAttribute])) {\n            syncData.size = syncData.size + 1;\n          }\n\n          syncData.entities[entity[idAttribute]] = {\n            lmt: entity[kmdAttribute] ? entity[kmdAttribute].lmt : null\n          };\n        }\n      });\n\n      const request = new LocalRequest({\n        method: HttpMethod.PUT,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: this._syncPathname\n        }),\n        properties: options.properties,\n        data: syncData,\n        timeout: options.timeout,\n        client: this.client\n      });\n      return request.execute();\n    }).then(() => {\n      return null;\n    });\n\n    return promise;\n  }\n}\n\nexport { CacheStore };\n","import { SyncStore } from './syncstore';\nimport { NetworkStore } from './networkstore';\nimport { UserStore } from './userstore';\nimport { FileStore } from './filestore';\nimport { CacheStore } from './cachestore';\n\n/**\n * Enum for DataStore types.\n */\nconst DataStoreType = {\n  Sync: 'Sync',\n  Cache: 'Cache',\n  Network: 'Network',\n  User: 'User',\n  File: 'File'\n};\nObject.freeze(DataStoreType);\nexport { DataStoreType };\n\n\nexport class DataStore {\n  /**\n   * Returns an instance of the Store class based on the type provided.\n   *\n   * @param  {string}       [name]                      Name of the collection.\n   * @param  {StoreType}    [type=DataStoreType.Cache]  Type of store to return.\n   * @return {Object}                                   Store\n   */\n  static getInstance(name, type = DataStoreType.Cache) {\n    let store;\n\n    switch (type) {\n      case DataStoreType.Sync:\n        store = new SyncStore(name);\n        break;\n      case DataStoreType.Network:\n        store = new NetworkStore(name);\n        break;\n      case DataStoreType.User:\n        store = new UserStore();\n        break;\n      case DataStoreType.File:\n        store = new FileStore();\n        break;\n      case DataStoreType.Cache:\n      default:\n        store = new CacheStore(name);\n    }\n\n    return store;\n  }\n}\n","import Promise from 'babybird';\nimport { NetworkStore } from './networkstore';\nimport { NetworkRequest } from '../requests/network';\nimport { AuthType, HttpMethod } from '../enums';\nimport { KinveyError } from '../errors';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport map from 'lodash/map';\nconst filesNamespace = process.env.KINVEY_FILES_NAMESPACE || 'blob';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The FilesStore class is used to find, save, update, remove, count and group files.\n */\nexport class FileStore extends NetworkStore {\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}                Pathname\n   */\n  get _pathname() {\n    return `/${filesNamespace}/${this.client.appKey}`;\n  }\n\n  /**\n   * Finds all files. A query can be optionally provided to return\n   * a subset of all the files for your application or omitted to return all the files.\n   * The number of files returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the files or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Boolean}               [options.tls]                             Use Transport Layer Security\n   * @param   {Boolean}               [options.download]                        Download the files\n   * @return  {Promise}                                                         Promise\n   *\n   * @example\n   * var filesStore = new Kinvey.FilesStore();\n   * var query = new Kinvey.Query();\n   * query.equalTo('location', 'Boston');\n   * files.find(query, {\n   *   tls: true, // Use transport layer security\n   *   ttl: 60 * 60 * 24, // 1 day in seconds\n   *   download: true // download the files\n   * }).then(function(files) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  find(query, options = {}) {\n    options = assign({\n      download: false,\n      tls: false\n    }, options);\n\n    options.flags = {\n      tls: options.tls === true ? true : false,\n      ttl_in_seconds: options.ttl\n    };\n\n    const promise = super.find(query, options).then(files => {\n      if (options.download === true) {\n        const promises = map(files, file => {\n          return this.downloadByUrl(file._downloadURL, options);\n        });\n        return Promise.all(promises);\n      }\n\n      return files;\n    });\n\n    return promise;\n  }\n\n  findById(id, options) {\n    return this.download(id, options);\n  }\n\n  /**\n   * Download a file. A promise will be returned that will be resolved with the file or rejected with\n   * an error.\n   *\n   * @param   {string}        name                                          Name\n   * @param   {Object}        [options]                                     Options\n   * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n   * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n   * @param   {Boolean}       [options.stream]                              Stream the file\n   * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n   * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n   * @return  {Promise}                                                     Promise\n   *\n   * @example\n   * var files = new Kinvey.Files();\n   * files.download('BostonTeaParty.png', {\n   *   tls: true, // Use transport layer security\n   *   ttl: 60 * 60 * 24, // 1 day in seconds\n   *   stream: true // stream the file\n   * }).then(function(file) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  download(name, options = {}) {\n    options = assign({\n      stream: false,\n      tls: false\n    }, options);\n\n    options.flags = {\n      tls: options.tls === true ? true : false,\n      ttl_in_seconds: options.ttl\n    };\n\n    const promise = super.findById(name, options).then(file => {\n      if (options.stream === true) {\n        return file;\n      }\n\n      return this.downloadByUrl(file._downloadURL, options);\n    });\n\n    return promise;\n  }\n\n  downloadByUrl(url, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      const request = new NetworkRequest({\n        method: HttpMethod.GET,\n        url: url,\n        timeout: options.timeout\n      });\n      request.setHeader('Accept', options.mimeType || 'application-octet-stream');\n      request.removeHeader('Content-Type');\n      request.removeHeader('X-Kinvey-Api-Version');\n      return request.execute();\n    }).then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  /**\n   * Stream a file. A promise will be returned that will be resolved with the file or rejected with\n   * an error.\n   *\n   * @param   {string}        name                                          File name\n   * @param   {Object}        [options]                                     Options\n   * @param   {Boolean}       [options.tls]                                 Use Transport Layer Security\n   * @param   {Number}        [options.ttl]                                 Time To Live (in seconds)\n   * @param   {DataPolicy}    [options.dataPolicy=DataPolicy.NetworkFirst]    Data policy\n   * @param   {AuthType}      [options.authType=AuthType.Default]           Auth type\n   * @return  {Promise}                                                     Promise\n   *\n   * @example\n   * var files = new Kinvey.Files();\n   * files.stream('BostonTeaParty.png', {\n   *   tls: true, // Use transport layer security\n   *   ttl: 60 * 60 * 24, // 1 day in seconds\n   * }).then(function(file) {\n   *   ...\n   * }).catch(function(err) {\n   *   ...\n   * });\n   */\n  stream(name, options = {}) {\n    options.stream = true;\n    return this.download(name, options);\n  }\n\n  upload(file, metadata = {}, options = {}) {\n    metadata._filename = metadata._filename || file._filename || file.name;\n    metadata.size = metadata.size || file.size || file.length;\n    metadata.mimeType = metadata.mimeType || file.mimeType || file.type || 'application/octet-stream';\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      public: false,\n      handler() {}\n    }, options);\n\n    if (options.public) {\n      metadata._public = true;\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      headers: {\n        'X-Kinvey-Content-Type': metadata.mimeType\n      },\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      data: metadata,\n      client: this.client\n    });\n\n    if (metadata[idAttribute]) {\n      request.method = HttpMethod.PUT;\n      request.url = url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${metadata._id}`\n      });\n    }\n\n    const promise = request.execute().then(response => {\n      const uploadUrl = response.data._uploadURL;\n      const headers = response.data._requiredHeaders || {};\n      headers['Content-Type'] = metadata.mimeType;\n      headers['Content-Length'] = metadata.size;\n\n      // Delete fields from the response\n      delete response.data._expiresAt;\n      delete response.data._requiredHeaders;\n      delete response.data._uploadURL;\n\n      // Upload the file\n      const request = new NetworkRequest({\n        method: HttpMethod.PUT,\n        url: uploadUrl,\n        data: file\n      });\n      request.clearHeaders();\n      request.addHeaders(headers);\n\n      return request.execute().then(uploadResponse => {\n        if (uploadResponse.isSuccess()) {\n          response.data._data = file;\n          return response.data;\n        }\n\n        throw uploadResponse.error;\n      });\n    });\n\n    return promise;\n  }\n\n  save() {\n    return Promise.reject(new KinveyError('Please use `upload()` to save files.'));\n  }\n\n  update() {\n    return Promise.reject(new KinveyError('Please use `upload()` to update files.'));\n  }\n}\n","import Promise from 'babybird';\nimport { Aggregation } from '../aggregation';\nimport { AuthType, HttpMethod } from '../enums';\nimport { KinveyError } from '../errors';\nimport { Client } from '../client';\nimport { NetworkRequest } from '../requests/network';\nimport { Query } from '../query';\nimport { Log } from '../Log';\nimport qs from 'qs';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport isString from 'lodash/isString';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\n/**\n * The NetworkStore class is used to find, save, update, remove, count and group enitities\n * in a collection on the network.\n */\nexport class NetworkStore {\n  /**\n   * Creates a new instance of the NetworkStore class.\n   *\n   * @param   {string}  name   Name of the collection\n   *\n   * @throws  {KinveyError}   If the name provided is not a string.\n   */\n  constructor(name) {\n    if (name && !isString(name)) {\n      throw new KinveyError('Name must be a string.');\n    }\n\n    /**\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * @private\n     * @type {Client}\n     */\n    this.client = Client.sharedInstance();\n  }\n\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}                Pathname\n   */\n  get _pathname() {\n    let pathname = `/${appdataNamespace}/${this.client.appKey}`;\n\n    if (this.name) {\n      pathname = `${pathname}/${this.name}`;\n    }\n\n    return pathname;\n  }\n\n  /**\n   * Finds all entities in a collection. A query can be optionally provided to return\n   * a subset of all entities in a collection or omitted to return all entities in\n   * a collection. The number of entities returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the entities or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  find(query, options = {}) {\n    Log.debug(`Retrieving the entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n    options.flags = qs.parse(options.flags);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entities in the ${this.name} collection.`, response);\n    }).catch(error => {\n      Log.error(`Failed to retrieve the entities in the ${this.name} collection.`, error);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Groups entities in a collection. An aggregation can be optionally provided to group\n   * a subset of entities in a collection or omitted to group all the entities\n   * in a collection. A promise will be returned that will be resolved with the result\n   * or rejected with an error.\n   *\n   * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  group(aggregation, options = {}) {\n    Log.debug(`Grouping the entities in the ${this.name} collection.`, aggregation, options);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      useDeltaFetch: true,\n      handler() {}\n    }, options);\n\n    if (!(aggregation instanceof Aggregation)) {\n      return Promise.reject(new KinveyError('Invalid aggregation. ' +\n        'It must be an instance of the Kinvey.Aggregation class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_group`\n      }),\n      properties: options.properties,\n      data: aggregation.toJSON(),\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Grouped the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to group the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Counts entities in a collection. A query can be optionally provided to count\n   * a subset of entities in a collection or omitted to count all the entities\n   * in a collection. A promise will be returned that will be resolved with the count\n   * or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  count(query, options = {}) {\n    Log.debug(`Counting the number of entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      useDeltaFetch: true,\n      handler() {}\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_count`\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Counted the number of entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to count the number of entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Retrieves a single entity in a collection by id. A promise will be returned that will\n   * be resolved with the entity or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  findById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to retrieve an entity.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Retrieving the entity in the ${this.name} collection with id = ${id}.`);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`,\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save a entity or an array of entities to a collection. A promise will be returned that\n   * will be resolved with the saved entity/entities or rejected with an error.\n   *\n   * @param   {Object|Array}          doc                                       Document or entities to save.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  save(entity, options = {}) {\n    if (!entity) {\n      Log.warn('No entity was provided to be saved.', entity);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Saving the entity(s) to the ${this.name} collection.`, entity);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      data: entity,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    if (entity[idAttribute]) {\n      request.method = HttpMethod.PUT;\n      request.url = url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${entity[idAttribute]}`\n      });\n    }\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Saved the entity(s) to the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to save the entity(s) to the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove entities in a collection. A query can be optionally provided to remove\n   * a subset of entities in a collection or omitted to remove all entities in a\n   * collection. A promise will be returned that will be resolved with a count of the\n   * number of entities removed or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  remove(query, options = {}) {\n    Log.debug(`Removing the entities in the ${this.name} collection.`, query);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname,\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove an entity in a collection. A promise will be returned that will be\n   * resolved with a count of the number of entities removed or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  removeById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to be removed.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Removing an entity in the ${this.name} collection with id = ${id}.`);\n\n    options = assign({\n      properties: null,\n      timeout: undefined,\n      handler() {}\n    }, options);\n\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Default,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`,\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { CacheStore } from './cachestore';\nimport { LocalRequest } from '../requests/local';\nimport { Aggregation } from '../aggregation';\nimport { HttpMethod } from '../enums';\nimport { KinveyError } from '../errors';\nimport { Query } from '../query';\nimport { Log } from '../log';\nimport url from 'url';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\n\nexport class SyncStore extends CacheStore {\n\n  /**\n   * Finds all entities in a collection. A query can be optionally provided to return\n   * a subset of all entities in a collection or omitted to return all entities in\n   * a collection. The number of entities returned will adhere to the limits specified\n   * at http://devcenter.kinvey.com/rest/guides/datastore#queryrestrictions. A\n   * promise will be returned that will be resolved with the entities or rejected with\n   * an error.\n   *\n   * @param   {Query}                 [query]                                   Query used to filter result.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  find(query, options = {}) {\n    Log.debug(`Retrieving the entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Groups entities in a collection. An aggregation can be optionally provided to group\n   * a subset of entities in a collection or omitted to group all the entities\n   * in a collection. A promise will be returned that will be resolved with the result\n   * or rejected with an error.\n   *\n   * @param   {Aggregation}           aggregation                               Aggregation used to group entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  group(aggregation, options = {}) {\n    Log.debug(`Grouping the entities in the ${this.name} collection.`, aggregation, options);\n\n    if (!(aggregation instanceof Aggregation)) {\n      return Promise.reject(new KinveyError('Invalid aggregation. ' +\n        'It must be an instance of the Kinvey.Aggregation class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_group`\n      }),\n      properties: options.properties,\n      data: aggregation.toJSON(),\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Grouped the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to group the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Counts entities in a collection. A query can be optionally provided to count\n   * a subset of entities in a collection or omitted to count all the entities\n   * in a collection. A promise will be returned that will be resolved with the count\n   * or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to count a subset of entities.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  count(query, options = {}) {\n    Log.debug(`Counting the number of entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/_count`\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Counted the number of entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to count the number of entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Retrieves a single entity in a collection by id. A promise will be returned that will\n   * be resolved with the entity or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data retrieved\n   *                                                                            from the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  findById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to retrieve an entity.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Retrieving the entity in the ${this.name} collection with id = ${id}.`);\n\n    const request = new LocalRequest({\n      method: HttpMethod.GET,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    promise.then(response => {\n      Log.info(`Retrieved the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to retrieve the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Save a entity or an array of entities to a collection. A promise will be returned that\n   * will be resolved with the saved entity/entities or rejected with an error.\n   *\n   * @param   {Object|Array}          entities                                  Entity or entities to save.\n   * @param   {Object}                [options]                                 Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @param   {Number}                [options.ttl]                             Time to live for data saved\n   *                                                                            in the cache.\n   * @return  {Promise}                                                         Promise\n   */\n  save(entity, options = {}) {\n    if (!entity) {\n      Log.warn('No entity was provided to be saved.', entity);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Saving the entity(s) to the ${this.name} collection.`, entity);\n\n    const request = new LocalRequest({\n      method: HttpMethod.POST,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      data: entity,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    if (entity[idAttribute]) {\n      request.url = url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${entity[idAttribute]}`\n      });\n    }\n\n    const promise = request.execute().then(response => {\n      return this._sync(response.data, options).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Saved the entity(s) to the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to save the entity(s) to the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove entities in a collection. A query can be optionally provided to remove\n   * a subset of entities in a collection or omitted to remove all entities in a\n   * collection. A promise will be returned that will be resolved with a count of the\n   * number of entities removed or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  remove(query, options = {}) {\n    Log.debug(`Removing the entities in the ${this.name} collection.`, query);\n\n    if (query && !(query instanceof Query)) {\n      return Promise.reject(new KinveyError('Invalid query. It must be an instance of the Kinvey.Query class.'));\n    }\n\n    const request = new LocalRequest({\n      method: HttpMethod.DELETE,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: this._pathname\n      }),\n      properties: options.properties,\n      query: query,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entities in the ${this.name} collection.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entities in the ${this.name} collection.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Remove an entity in a collection. A promise will be returned that will be\n   * resolved with a count of the number of entities removed or rejected with an error.\n   *\n   * @param   {string}                id                                        Document Id\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  removeById(id, options = {}) {\n    if (!id) {\n      Log.warn('No id was provided to be removed.', id);\n      return Promise.resolve(null);\n    }\n\n    Log.debug(`Removing an entity in the ${this.name} collection with id = ${id}.`);\n\n    const request = new LocalRequest({\n      method: HttpMethod.DELETE,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/${id}`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return this._sync(response.data.entities, options).then(() => {\n        return response.data;\n      });\n    });\n\n    promise.then(response => {\n      Log.info(`Removed the entity in the ${this.name} collection with id = ${id}.`, response);\n    }).catch(err => {\n      Log.error(`Failed to remove the entity in the ${this.name} collection with id = ${id}.`, err);\n    });\n\n    return promise;\n  }\n\n  /**\n   * Pull items for a collection from the network to your local cache. A promise will be\n   * returned that will be resolved with the result of the pull or rejected with an error.\n   *\n   * @param   {Query}                 [query]                                   Query to pull a subset of items.\n   * @param   {Object}                options                                   Options\n   * @param   {Properties}            [options.properties]                      Custom properties to send with\n   *                                                                            the request.\n   * @param   {Number}                [options.timeout]                         Timeout for the request.\n   * @return  {Promise}                                                         Promise\n   */\n  pull(query, options = {}) {\n    const promise = this.syncCount(null, options).then(count => {\n      if (count > 0) {\n        throw new KinveyError('Unable to pull data. You must push the pending sync items first.',\n          'Call store.push() to push the pending sync items before you pull new data.');\n      }\n\n      return super.find(query, options);\n    }).then(result => {\n      return result.networkPromise;\n    });\n\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { KinveyError } from '../errors';\nimport { NetworkStore } from './networkstore';\nimport { AuthType, HttpMethod } from '../enums';\nimport { NetworkRequest } from '../requests/network';\nimport url from 'url';\nimport isArray from 'lodash/isArray';\nconst usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nconst rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\n\nexport class UserStore extends NetworkStore {\n  /**\n   * The pathname for the store.\n   *\n   * @return  {string}   Pathname\n   */\n  get _pathname() {\n    return `/${usersNamespace}/${this.client.appKey}`;\n  }\n\n  save(user, options = {}) {\n    const promise = Promise.resolve().then(() => {\n      if (!user) {\n        throw new KinveyError('No user was provided to be updated.');\n      }\n\n      if (isArray(user)) {\n        throw new KinveyError('Please only update one user at a time.', user);\n      }\n\n      if (!user[idAttribute]) {\n        throw new KinveyError('User must have an _id.');\n      }\n\n      if (options._identity) {\n        const socialIdentity = user[socialIdentityAttribute];\n        if (socialIdentity) {\n          for (const identity in socialIdentity) {\n            if (socialIdentity.hasOwnProperty(identity)) {\n              if (socialIdentity[identity] && options._identity !== identity) {\n                delete socialIdentity[identity];\n              }\n            }\n          }\n        }\n      }\n\n      return super.save(user, options);\n    });\n\n    return promise;\n  }\n\n  exists(username, options) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/check-username-exists`\n      }),\n      properties: options.properties,\n      data: { username: username },\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data.usernameExists;\n    });\n\n    return promise;\n  }\n\n  restore(id, options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.Master,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/id`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n}\n","import Promise from 'babybird';\nimport { DataStore } from './stores/datastore';\nimport { Query } from './query';\nimport { DataStoreType } from './enums';\nimport reduce from 'lodash/reduce';\nconst syncCollectionName = process.env.KINVEY_SYNC_COLLECTION_NAME || 'sync';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nlet enabled = process.env.KINVEY_SYNC_DEFAULT_STATE || true;\n\nconst Sync = {\n  isEnabled() {\n    return enabled;\n  },\n\n  enable() {\n    enabled = true;\n  },\n\n  disable() {\n    enabled = false;\n  },\n\n  count(query, options) {\n    const syncStore = DataStore.getInstance(syncCollectionName, DataStoreType.Sync);\n    const promise = syncStore.find(query, options).then(syncData => {\n      return reduce(syncData, function (result, data) {\n        return result + data.size;\n      }, 0);\n    });\n    return promise;\n  },\n\n  push(options) {\n    const syncStore = DataStore.getInstance(syncCollectionName, DataStoreType.Sync);\n    const query = new Query();\n    query.greaterThan('size', 0);\n    const promise = syncStore.find(query, options).then(syncData => {\n      const promises = syncData.map(data => {\n        const store = DataStore.getInstance(data[idAttribute], DataStoreType.Sync);\n        return store.push();\n      });\n      return Promise.all(promises);\n    });\n    return promise;\n  },\n\n  sync(options = {}) {\n    const syncStore = DataStore.getInstance(syncCollectionName, DataStoreType.Sync);\n    const promise = syncStore.find(null, options).then(syncData => {\n      const promises = syncData.map(data => {\n        const store = DataStore.getInstance(data[idAttribute], DataStoreType.Sync);\n        return store.sync();\n      });\n      return Promise.all(promises);\n    });\n    return promise;\n  }\n};\n\nexport { Sync };\n","import Promise from 'babybird';\nimport { Client } from './client';\nimport { Query } from './query';\nimport { Acl } from './acl';\nimport { Metadata } from './metadata';\nimport { KinveyError, NotFoundError, ActiveUserError } from './errors';\nimport { MobileIdentityConnect } from './mic';\nimport { AuthType, SocialIdentity, HttpMethod } from './enums';\nimport { DataStore, DataStoreType } from './stores/datastore';\nimport { NetworkRequest } from './requests/network';\nimport url from 'url';\nimport assign from 'lodash/assign';\nimport result from 'lodash/result';\nimport isObject from 'lodash/isObject';\nconst appdataNamespace = process.env.KINVEY_DATASTORE_NAMESPACE || 'appdata';\nconst usersNamespace = process.env.KINVEY_USERS_NAMESPACE || 'user';\nconst rpcNamespace = process.env.KINVEY_RPC_NAMESPACE || 'rpc';\nconst idAttribute = process.env.KINVEY_ID_ATTRIBUTE || '_id';\nconst kmdAttribute = process.env.KINVEY_KMD_ATTRIBUTE || '_kmd';\nconst socialIdentityAttribute = process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE || '_socialIdentity';\nconst usernameAttribute = process.env.KINVEY_USERNAME_ATTRIBUTE || 'username';\nconst emailAttribute = process.env.KINVEY_EMAIL_ATTRIBUTE || 'email';\nconst supportedIdentities = ['facebook', 'google', 'linkedIn'];\nlet hello;\n\nif (typeof window !== 'undefined') {\n  hello = require('hellojs');\n}\n\n/**\n * The User class is used to represent a single user on the Kinvey platform.\n * Use the user class to manage the active user lifecycle and perform user operations.\n */\nexport class User {\n  /**\n   * Create a new instance of a User.\n   *\n   * @param  {Object}   [data={}]    Data for the user.\n   * @return {User}                  User\n   *\n   * @example\n   * var user = new User();\n   */\n  constructor(data = {}) {\n    /**\n     * The users data.\n     *\n     * @type {Object}\n     */\n    this.data = data;\n\n    /**\n     * @private\n     * The client used by this user.\n     *\n     * @type {Client}\n     */\n    this.client = Client.sharedInstance();\n  }\n\n  /**\n   * The _id for the user.\n   *\n   * @return {?string} _id\n   *\n   * @example\n   * var _id = user._id;\n   */\n  get _id() {\n    return this.data[idAttribute];\n  }\n\n  /**\n   * The _acl for the user.\n   *\n   * @return {Acl} _acl\n   *\n   * @example\n   * var _acl = user._acl;\n   */\n  get _acl() {\n    return new Acl(this.data);\n  }\n\n  /**\n   * The metadata for the user.\n   *\n   * @return {Metadata} metadata\n   *\n   * @example\n   * var metadata = user.metadata;\n   */\n  get metadata() {\n    return new Metadata(this.data);\n  }\n\n  set metadata(metadata) {\n    this.data[kmdAttribute] = result(metadata, 'toJSON', metadata);\n  }\n\n  /**\n   * The _kmd for the user.\n   *\n   * @return {Metadata} _kmd\n   *\n   * @example\n   * var _kmd = user._kmd;\n   */\n  get _kmd() {\n    return this.metadata;\n  }\n\n  set _kmd(kmd) {\n    this.metadata = kmd;\n  }\n\n  get _socialIdentity() {\n    return this.data[socialIdentityAttribute];\n  }\n\n  /**\n   * The auth token for the user.\n   *\n   * @return {?string} Auth token\n   *\n   * @example\n   * var authtoken = user.authtoken;\n   */\n  get authtoken() {\n    return this.metadata.authtoken;\n  }\n\n  /**\n   * Set the auth token for the user.\n   *\n   * @param  {?string} authtoken Auth token\n   *\n   * @example\n   * user.authtoken = 'authtoken';\n   */\n  set authtoken(authtoken) {\n    const metadata = this.metadata;\n    metadata.authtoken = authtoken;\n    this.metadata = metadata;\n  }\n\n  /**\n   * The username for the user.\n   *\n   * @return {?string} Username\n   *\n   * @example\n   * var username = user.username;\n   */\n  get username() {\n    return this.data[usernameAttribute];\n  }\n\n  /**\n   * The email for the user.\n   *\n   * @return {?string} Email\n   *\n   * @example\n   * var email = user.email;\n   */\n  get email() {\n    return this.data[emailAttribute];\n  }\n\n  get _pathname() {\n    return `/${usersNamespace}/${this.client.appKey}`;\n  }\n\n  /**\n   * Gets the active user. You can optionally provide a client\n   * to use to lookup the active user.\n   *\n   * @param  {Client}           [client=Client.sharedInstance()]   Client to use to set the active user.\n   * @return {Promise<User>}                                       The active user on the client. The\n   *                                                               active user could be null if one does\n   *                                                               not exist.\n   *\n   * @example\n   * var _id = user._id;\n   */\n  static getActiveUser(client = Client.sharedInstance()) {\n    const data = client.getActiveUserData();\n    let user = null;\n\n    if (data) {\n      user = new User(data);\n      user.client = client;\n    }\n\n    return user;\n  }\n\n  /**\n   * Sets the active user. You can optionally provide a client to\n   * set the active user on. Only one active user per client is\n   * allowed.\n   *\n   * @param  {?(User|Object)}      [user]                               User to set as the active user.\n   * @param  {Client}              [client=Client.sharedInstance()]     The client to use to set the active user on.\n   * @return {Promise<User>}                                            The active user on the client. The active user\n   *                                                                    could be null if one does not exist.\n   *\n   * @example\n   * var user = new User();\n   * var promise = User.setActiveUser(user);\n   * promise.then(function(activeUser) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static setActiveUser(user, client = Client.sharedInstance()) {\n    const data = result(user, 'toJSON', user);\n    client.setActiveUserData(data);\n    return User.getActiveUser(client);\n  }\n\n  /**\n   * Set this user as the active user.\n   *\n   * @return {Promise<User>}  The active user.\n   *\n   * @example\n   * var promise = user.setAsActiveUser();\n   * promise.then(function(activeUser) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  setAsActiveUser() {\n    return User.setActiveUser(this, this.client);\n  }\n\n  /**\n   * Checks if this user is the active user.\n   *\n   * @return {Promise<Boolean>} True or false if this user is the active user.\n   *\n   * @example\n   * var promise = user.isActiveUser();\n   * promise.then(function(isActiveUser) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  isActive() {\n    const activeUser = User.getActiveUser(this.client);\n\n    if (activeUser && activeUser._id === this._id) {\n      return true;\n    }\n\n    return false;\n  }\n\n  static login(usernameOrData, password, options) {\n    const user = new User();\n    return user.login(usernameOrData, password, options);\n  }\n\n  static loginWithIdentity(identity, tokens, options) {\n    const user = new User();\n    return user.loginWithIdentity(identity, tokens, options);\n  }\n\n  /**\n   * Login using a username or password.\n   *\n   * @param  {string|Object}      usernameOrData    Username or an object with username\n   *                                                and password properties.\n   * @param  {string}             [password]        Users password.\n   * @param  {Object}             [options={}]      Options\n   * @return {Promise<User>}                        The logged in user.\n   *\n   * @example\n   * var promise = user.login('username', 'password');\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  login(usernameOrData, password, options = {}) {\n    if (!isObject(usernameOrData)) {\n      usernameOrData = {\n        username: usernameOrData,\n        password: password\n      };\n    }\n\n    if (!usernameOrData._socialIdentity) {\n      if (usernameOrData.username) {\n        usernameOrData.username = String(usernameOrData.username).trim();\n      }\n\n      if (usernameOrData.password) {\n        usernameOrData.password = String(usernameOrData.password).trim();\n      }\n    }\n\n    const isActiveUser = this.isActive();\n    if (isActiveUser) {\n      return Promise.reject(new ActiveUserError('This user is already the active user.'));\n    }\n\n    const activeUser = User.getActiveUser(this.client);\n    if (activeUser) {\n      return Promise.reject(new ActiveUserError('An active user already exists. ' +\n        'Please logout the active user before you login.'));\n    }\n\n    if ((!usernameOrData.username || usernameOrData.username === ''\n      || !usernameOrData.password || usernameOrData.password === '')\n      && !usernameOrData[socialIdentityAttribute]) {\n      return Promise.reject(new KinveyError('Username and/or password missing. ' +\n        'Please provide both a username and password to login.'));\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `${this._pathname}/login`\n      }),\n      data: usernameOrData,\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      this.data = response.data;\n      return this.setAsActiveUser();\n    });\n\n    return promise;\n  }\n\n  loginWithIdentity(identity, token, options) {\n    const data = { _socialIdentity: {} };\n    data._socialIdentity[identity] = token;\n    return this.login(data, options);\n  }\n\n  static loginWithMIC(redirectUri, authorizationGrant, options) {\n    const user = new User();\n    return user.loginWithMIC(redirectUri, authorizationGrant, options);\n  }\n\n  /* eslint-disable max-len */\n  /**\n   * Login using Mobile Identity Connect.\n   *\n   * @param  {string}                 redirectUri                                                         The redirect uri used\n   *                                                                                                      for MIC logins.\n   * @param  {AuthorizationGrant}     [authorizationGrant=AuthoizationGrant.AuthorizationCodeLoginPage]   MIC authorization grant to use.\n   * @param  {Object}                 [options={}]                                                        Options\n   * @return {Promise<User>}                                                                              The logged in user.\n   *\n   * @example\n   * var promise = user.loginWithMIC('http://example.com');\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  /* eslint-enable max-len */\n  loginWithMIC(redirectUri, authorizationGrant, options = {}) {\n    const mic = new MobileIdentityConnect(this.client);\n    return mic.login(redirectUri, authorizationGrant, options).then(token => {\n      options.redirectUri = redirectUri;\n      options.client = result(mic.client, 'toJSON', mic.client);\n      return this.connect(MobileIdentityConnect.identity, token, options);\n    });\n  }\n\n  /**\n   * Logout the user. If the user was the active user then the active user will be set to null.\n   *\n   * @param  {Object}         [options={}]    Options\n   * @return {Promise<User>}                  The logged out user.\n   *\n   * @example\n   * var promise = user.logout();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  logout(options = {}) {\n    const isActive = this.isActive();\n\n    if (!isActive) {\n      return Promise.resolve();\n    }\n\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.Session,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${usersNamespace}/${this.client.appKey}/_logout`\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().catch(() => {\n      return null;\n    }).then(() => {\n      const isActive = this.isActive();\n      if (isActive) {\n        return User.setActiveUser(null, this.client);\n      }\n    }).then(() => {\n      return this;\n    });\n\n    return promise;\n  }\n\n  /**\n   * @private\n   * Returns true or false if identity connect is supported.\n   *\n   * @return {Boolean}  True or false if identity connect is supported.\n   *\n   * @example\n   * var isIdentitySupported = user.isIdentitySupported('identity');\n   */\n  static isIdentitySupported(identity) {\n    return hello && supportedIdentities.indexOf(identity) !== -1;\n  }\n\n  /**\n   * Connect using Facebook.\n   *\n   * @param  {Object}         [options={}]  Options\n   * @return {Promise<User>}                The connected user.\n   *\n   * @example\n   * var promise = user.connectWithFacebook();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static connectWithFacebook(options = {}) {\n    return User.connectWithIdentity(SocialIdentity.Facebook, options);\n  }\n\n  /**\n   * Connect using Google.\n   *\n   * @param  {Object}         [options={}]  Options\n   * @return {Promise<User>}                The connected user.\n   *\n   * @example\n   * var promise = user.connectWithGoogle();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static connectWithGoogle(options = {}) {\n    return User.connectWithIdentity(SocialIdentity.Google, options);\n  }\n\n  /**\n   * Connect using LinkedIn.\n   *\n   * @param  {Object}         [options={}]  Options\n   * @return {Promise<User>}                The connected user.\n   *\n   * @example\n   * var promise = user.connectWithLinkedIn();\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  static connectWithLinkedIn(options = {}) {\n    return User.connectWithIdentity(SocialIdentity.LinkedIn, options);\n  }\n\n  static connectWithIdentity(identity, options) {\n    const user = new User();\n    return user.connectWithIdentity(identity, options);\n  }\n\n  /* eslint-disable max-len */\n  /**\n   * Connect using an identity (Facebook, Google, LinkedIn etc.).\n   *\n   * @param  {SocialIdentity|string}         identity                                Identity used to connect the user.\n   * @param  {Object}                        [options={}]                            Options\n   * @param  {string}                        [options.collectionName='Identities']   Collection name to use to lookup credentials\n   *                                                                                 for the identity.\n   * @return {Promise<User>}                                                         The connected user.\n   *\n   * @example\n   * var promise = user.connectWithIdentity(SocialIdentity.Facebook);\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  /* eslint-enable max-len */\n  connectWithIdentity(identity, options = {}) {\n    options = assign({\n      collectionName: 'identities'\n    }, options);\n\n\n    const promise = Promise.resolve().then(() => {\n      if (!identity) {\n        throw new KinveyError('An identity is required to connect the user.');\n      }\n\n      if (!User.isIdentitySupported(identity)) {\n        throw new KinveyError(`Identity ${identity} is not supported on this platform.`);\n      }\n\n      const query = new Query().equalTo('identity', identity);\n      const request = new NetworkRequest({\n        method: HttpMethod.GET,\n        authType: AuthType.None,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `/${appdataNamespace}/${this.client.appKey}/${options.collectionName}`\n        }),\n        query: query,\n        properties: options.properties,\n        timeout: options.timeout\n      });\n      return request.execute();\n    }).then(response => {\n      if (response.data.length === 1) {\n        const helloSettings = {};\n        helloSettings[identity] = response.data[0].key || response.data[0].appId || response.data[0].clientId;\n        hello.init(helloSettings);\n        return hello(identity).login();\n      }\n\n      throw new KinveyError('Unsupported identity.');\n    }).then(() => {\n      const authResponse = hello(identity).getAuthResponse();\n      return this.connect(identity, authResponse, options);\n    });\n\n    return promise;\n  }\n\n  /**\n   * @private\n   *\n   * Connects with the provided accessToken and identity.\n   *\n   * @param  {SocialIdentity|string}         identity      Identity used to connect the user.\n   * @param  {string}                        accessToken   Access token for the identity.\n   * @param  {number}                        [expiresIn]   Time in seconds for how long the access token is valid.\n   * @param  {Object}                        [options={}]  Options\n   * @return {Promise<User>}                               The connected user.\n   *\n   * @example\n   * var token = {\n   *   access_token: 'access_token',\n   *   refresh_token: 'refresh_token',\n   *   expires_in: 3600\n   * };\n   * var promise = user.connect(SocialIdentity.Facebook, token);\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  connect(identity, token, options = {}) {\n    const data = this.data;\n    const socialIdentity = data[socialIdentityAttribute] || {};\n    socialIdentity[identity] = token;\n    data[socialIdentityAttribute] = socialIdentity;\n    this.data = data;\n\n    const promise = Promise.resolve().then(() => {\n      const isActive = this.isActive();\n\n      if (isActive) {\n        options._identity = identity;\n        return this.update(data, options);\n      }\n\n      return this.login(data, null, options);\n    }).catch(err => {\n      if (err instanceof NotFoundError) {\n        return this.signup(data, options).then(() => {\n          return this.connect(identity, token, options);\n        });\n      }\n\n      throw err;\n    }).then(() => {\n      this.client.setActiveSocialIdentity({\n        identity: identity,\n        token: this._socialIdentity[identity],\n        redirectUri: options.redirectUri,\n        client: options.client\n      });\n      return this;\n    });\n\n    return promise;\n  }\n\n  disconnect(identity, options = {}) {\n    const data = this.data;\n    const socialIdentity = data[socialIdentityAttribute] || {};\n    delete socialIdentity[identity];\n    data[socialIdentityAttribute] = socialIdentity;\n    this.data = data;\n\n    const promise = Promise.resolve().then(() => {\n      if (!this._id) {\n        return this;\n      }\n\n      return this.update(data, options);\n    }).then(() => {\n      const activeSocialIdentity = this.client.getActiveSocialIdentity();\n\n      if (activeSocialIdentity.identity === identity) {\n        this.client.setActiveSocialIdentity(null);\n      }\n\n      return this;\n    });\n\n    return promise;\n  }\n\n  static signup(data, options) {\n    const user = new User();\n    return user.signup(data, options);\n  }\n\n  static signupWithIdentity(identity, tokens, options) {\n    const user = new User();\n    return user.signupWithIdentity(identity, tokens, options);\n  }\n\n  /**\n   * Sign up. If options.state is set to true then the user\n   * will be set as the active user after succesfully signing up the\n   * user.\n   *\n   * @param  {User|Object}    data                    Users data.\n   * @param  {Object}         [options={}]            Options\n   * @param  {Boolean}        [options.state=true]    If set to true, the user will be\n   *                                                  set as the active user after successfully\n   *                                                  being signed up.\n   * @return {Promise<User>}                          The signed up user.\n   *\n   * @example\n   * var promise = user.signup({\n   *   username: 'admin',\n   *   password: 'admin'\n   * });\n   * promise.then(function(user) {\n   *   ...\n   * }).catch(function(error) {\n   *   ...\n   * });\n   */\n  signup(data, options = {}) {\n    options = assign({\n      state: true\n    }, options);\n\n    const promise = Promise.resolve().then(() => {\n      if (options.state === true) {\n        const activeUser = User.getActiveUser(this.client);\n        if (activeUser) {\n          throw new ActiveUserError('An active user already exists. ' +\n            'Please logout the active user before you login.');\n        }\n      }\n    }).then(() => {\n      const request = new NetworkRequest({\n        method: HttpMethod.POST,\n        authType: AuthType.App,\n        url: url.format({\n          protocol: this.client.protocol,\n          host: this.client.host,\n          pathname: `/${usersNamespace}/${this.client.appKey}`\n        }),\n        data: result(data, 'toJSON', data),\n        properties: options.properties,\n        timeout: options.timeout\n      });\n      return request.execute();\n    }).then(response => {\n      this.data = response.data;\n\n      if (options.state === true) {\n        return this.setAsActiveUser();\n      }\n\n      return this;\n    });\n\n    return promise;\n  }\n\n  signupWithIdentity(identity, tokens, options) {\n    const data = { _socialIdentity: {} };\n    data._socialIdentity[identity] = tokens;\n    return this.signup(data, options);\n  }\n\n  update(data, options) {\n    const userStore = DataStore.getInstance(null, DataStoreType.User);\n    return userStore.save(data, options).then(data => {\n      this.data = data;\n\n      if (this.isActive()) {\n        return this.setAsActiveUser();\n      }\n\n      return this;\n    });\n  }\n\n  me(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.GET,\n      authType: AuthType.Session,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${usersNamespace}/${this.client.appKey}/_me`\n      }),\n      properties: options.properties,\n      timeout: options.timeout\n    });\n\n    const promise = request.execute().then(response => {\n      this.data = response.data;\n\n      if (!this.authtoken) {\n        const activeUser = User.getActiveUser(this.client);\n\n        if (activeUser) {\n          this.authtoken = activeUser.authtoken;\n        }\n      }\n\n      return this.setAsActiveUser();\n    });\n\n    return promise;\n  }\n\n  verifyEmail(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/${this.username}/user-email-verification-initiate`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  forgotUsername(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/user-forgot-username`\n      }),\n      properties: options.properties,\n      data: { email: this.email },\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  resetPassword(options = {}) {\n    const request = new NetworkRequest({\n      method: HttpMethod.POST,\n      authType: AuthType.App,\n      url: url.format({\n        protocol: this.client.protocol,\n        host: this.client.host,\n        pathname: `/${rpcNamespace}/${this.client.appKey}/${this.username}/user-password-reset-initiate`\n      }),\n      properties: options.properties,\n      timeout: options.timeout,\n      client: this.client\n    });\n\n    const promise = request.execute().then(response => {\n      return response.data;\n    });\n\n    return promise;\n  }\n\n  // refreshAuthToken(options = {}) {\n  //   const socialIdentity = this.data[socialIdentityAttribute];\n  //   const identity = socialIdentity.activeIdentity;\n  //   const token = socialIdentity[identity];\n  //   let promise;\n\n  //   switch (identity) {\n  //     case MobileIdentityConnect.identity:\n  //       const mic = new MobileIdentityConnect(this.client);\n  //       promise = mic.refresh(token, options);\n  //       break;\n  //     default:\n  //       promise = Promise.reject(new KinveyError(`Unable to refresh the auth token because ` +\n  //         `the ${identity} identity is not supported.`));\n  //   }\n\n  //   return promise.then(token => {\n  //     return this.connect(identity, token, options);\n  //   });\n  // }\n\n  toJSON() {\n    return this.data;\n  }\n}\n","import { use } from './object';\n\n/**\n * @private\n */\nexport class Device {\n  toJSON() {\n    throw new Error('method unsupported');\n  }\n}\n\nDevice.use = use(['toJSON']);\n","import forEach from 'lodash/forEach';\nimport isFunction from 'lodash/isFunction';\n\n/**\n * @private\n */\nexport function nested(obj, dotProperty, value) {\n  if (!dotProperty) {\n    obj = value ? value : obj;\n    return obj;\n  }\n\n  const parts = dotProperty.split('.');\n  let current = parts.shift();\n  while (current && obj) {\n    obj = obj[current];\n    current = parts.shift();\n  }\n\n  return value ? value : obj;\n}\n\n/**\n * @private\n */\nexport function isDefined(obj) {\n  return obj !== undefined && obj !== null;\n}\n\n/**\n * @private\n */\nexport function use(nsInterface) {\n  return function(adapter = {}) {\n    forEach(nsInterface, methodName => {\n      if (isFunction(adapter[methodName])) {\n        this.prototype[methodName] = function() {\n          return adapter[methodName].apply(this, arguments);\n        };\n      }\n    });\n  };\n}\n","import { EventEmitter } from 'events';\nimport { use } from './object';\n\n/**\n * @private\n */\nexport class Popup extends EventEmitter {\n  constructor(url = '/') {\n    super();\n    this.url = url;\n  }\n\n  open() {\n    throw new Error('method unsupported');\n  }\n\n  close() {\n    throw new Error('method unsupported');\n  }\n\n  loadHandler() {\n    throw new Error('method unsupported');\n  }\n\n  clickHandler() {\n    throw new Error('method unsupported');\n  }\n\n  closeHandler() {\n    throw new Error('method unsupported');\n  }\n}\n\nPopup.use = use(['open', 'close', 'loadHandler', 'clickHandler', 'closeHandler']);\n","import uid from 'uid';\n\n/**\n * @private\n */\nexport function byteCount(str) {\n  let count = 0;\n  const stringLength = str.length;\n  str = String(str || '');\n\n  for (let i = 0; i < stringLength; i++) {\n    const partCount = encodeURI(str[i]).split('%').length;\n    count += partCount === 1 ? 1 : partCount - 1;\n  }\n\n  return count;\n}\n\nexport function randomString(size, prefix = '') {\n  return `${prefix}${uid(size)}`;\n}\n","'use strict';\n\nvar stub = require('./stub');\nvar tracking = require('./tracking');\nvar ls = 'localStorage' in global && global.localStorage ? global.localStorage : stub;\n\nfunction accessor (key, value) {\n  if (arguments.length === 1) {\n    return get(key);\n  }\n  return set(key, value);\n}\n\nfunction get (key) {\n  return JSON.parse(ls.getItem(key));\n}\n\nfunction set (key, value) {\n  try {\n    ls.setItem(key, JSON.stringify(value));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction remove (key) {\n  return ls.removeItem(key);\n}\n\nfunction clear () {\n  return ls.clear();\n}\n\naccessor.set = set;\naccessor.get = get;\naccessor.remove = remove;\naccessor.clear = clear;\naccessor.on = tracking.on;\naccessor.off = tracking.off;\n\nmodule.exports = accessor;\n","'use strict';\n\nvar ms = {};\n\nfunction getItem (key) {\n  return key in ms ? ms[key] : null;\n}\n\nfunction setItem (key, value) {\n  ms[key] = value;\n  return true;\n}\n\nfunction removeItem (key) {\n  var found = key in ms;\n  if (found) {\n    return delete ms[key];\n  }\n  return false;\n}\n\nfunction clear () {\n  ms = {};\n  return true;\n}\n\nmodule.exports = {\n  getItem: getItem,\n  setItem: setItem,\n  removeItem: removeItem,\n  clear: clear\n};\n","'use strict';\n\nvar listeners = {};\nvar listening = false;\n\nfunction listen () {\n  if (global.addEventListener) {\n    global.addEventListener('storage', change, false);\n  } else if (global.attachEvent) {\n    global.attachEvent('onstorage', change);\n  } else {\n    global.onstorage = change;\n  }\n}\n\nfunction change (e) {\n  if (!e) {\n    e = global.event;\n  }\n  var all = listeners[e.key];\n  if (all) {\n    all.forEach(fire);\n  }\n\n  function fire (listener) {\n    listener(JSON.parse(e.newValue), JSON.parse(e.oldValue), e.url || e.uri);\n  }\n}\n\nfunction on (key, fn) {\n  if (listeners[key]) {\n    listeners[key].push(fn);\n  } else {\n    listeners[key] = [fn];\n  }\n  if (listening === false) {\n    listen();\n  }\n}\n\nfunction off (key, fn) {\n  var ns = listeners[key];\n  if (ns.length > 1) {\n    ns.splice(ns.indexOf(fn), 1);\n  } else {\n    listeners[key] = [];\n  }\n}\n\nmodule.exports = {\n  on: on,\n  off: off\n};\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Creates an hash object.\n *\n * @private\n * @constructor\n * @returns {Object} Returns the new hash object.\n */\nfunction Hash() {}\n\n// Avoid inheriting from `Object.prototype` when possible.\nHash.prototype = nativeCreate ? nativeCreate(null) : objectProto;\n\nmodule.exports = Hash;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapClear = require('./_mapClear'),\n    mapDelete = require('./_mapDelete'),\n    mapGet = require('./_mapGet'),\n    mapHas = require('./_mapHas'),\n    mapSet = require('./_mapSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction MapCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `MapCache`.\nMapCache.prototype.clear = mapClear;\nMapCache.prototype['delete'] = mapDelete;\nMapCache.prototype.get = mapGet;\nMapCache.prototype.has = mapHas;\nMapCache.prototype.set = mapSet;\n\nmodule.exports = MapCache;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Reflect = root.Reflect;\n\nmodule.exports = Reflect;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    cachePush = require('./_cachePush');\n\n/**\n *\n * Creates a set cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.push(values[index]);\n  }\n}\n\n// Add functions to the `SetCache`.\nSetCache.prototype.push = cachePush;\n\nmodule.exports = SetCache;\n","var stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction Stack(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = values[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add functions to the `Stack` cache.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `Map#set` because it doesn't return the map instance in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\nmodule.exports = addMapEntry;\n","/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  set.add(value);\n  return set;\n}\n\nmodule.exports = addSetEntry;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  return !!array.length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check, else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (typeof key == 'number' && value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\nmodule.exports = assignValue;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the associative array.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction assocDelete(array, key) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = array.length - 1;\n  if (index == lastIndex) {\n    array.pop();\n  } else {\n    splice.call(array, index, 1);\n  }\n  return true;\n}\n\nmodule.exports = assocDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the associative array value for `key`.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction assocGet(array, key) {\n  var index = assocIndexOf(array, key);\n  return index < 0 ? undefined : array[index][1];\n}\n\nmodule.exports = assocGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if an associative array value for `key` exists.\n *\n * @private\n * @param {Array} array The array to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction assocHas(array, key) {\n  return assocIndexOf(array, key) > -1;\n}\n\nmodule.exports = assocHas;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the first occurrence of `key` is found in `array`\n * of key-value pairs.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the associative array `key` to `value`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction assocSet(array, key, value) {\n  var index = assocIndexOf(array, key);\n  if (index < 0) {\n    array.push([key, value]);\n  } else {\n    array[index][1] = value;\n  }\n}\n\nmodule.exports = assocSet;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the array-like object.\n */\nfunction baseCastFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = baseCastFunction;\n","var isArray = require('./isArray'),\n    stringToPath = require('./_stringToPath');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction baseCastPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\nmodule.exports = baseCastPath;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseForOwn = require('./_baseForOwn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isHostObject = require('./_isHostObject'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[boolTag] =\ncloneableTags[dateTag] = cloneableTags[float32Tag] =\ncloneableTags[float64Tag] = cloneableTags[int8Tag] =\ncloneableTags[int16Tag] = cloneableTags[int32Tag] =\ncloneableTags[mapTag] = cloneableTags[numberTag] =\ncloneableTags[objectTag] = cloneableTags[regexpTag] =\ncloneableTags[setTag] = cloneableTags[stringTag] =\ncloneableTags[symbolTag] = cloneableTags[uint8Tag] =\ncloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] =\ncloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        result = baseAssign(result, value);\n        return isFull ? copySymbols(value, result) : result;\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  // Recursively populate clone (susceptible to call stack limits).\n  (isArr ? arrayEach : baseForOwn)(value, function(subValue, key) {\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return (isFull && !isArr) ? copySymbols(value, result) : result;\n}\n\nmodule.exports = baseClone;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\nmodule.exports = baseCreate;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support for\n * excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","/**\n * The base implementation of methods like `_.find` and `_.findKey`, without\n * support for iteratee shorthands, which iterates over `collection` using\n * `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @param {boolean} [retKey] Specify returning the key of the found element instead of the element itself.\n * @returns {*} Returns the found element or its key, else `undefined`.\n */\nfunction baseFind(collection, predicate, eachFunc, retKey) {\n  var result;\n  eachFunc(collection, function(value, key, collection) {\n    if (predicate(value, key, collection)) {\n      result = retKey ? key : value;\n      return false;\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFind;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {Function} predicate The function invoked per iteration.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromRight) {\n  var length = array.length,\n      index = fromRight ? length : -1;\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var arrayPush = require('./_arrayPush'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && isArrayLikeObject(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForIn` and `baseForOwn` which iterates\n * over `object` properties returned by `keysFunc` invoking `iteratee` for\n * each property. Iteratee functions may exit iteration early by explicitly\n * returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var baseCastPath = require('./_baseCastPath'),\n    isKey = require('./_isKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path + ''] : baseCastPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[path[index++]];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n  // that are composed entirely of index properties, return `false` for\n  // `hasOwnProperty` checks of them.\n  return hasOwnProperty.call(object, key) ||\n    (typeof object == 'object' && key in object && getPrototypeOf(object) === null);\n}\n\nmodule.exports = baseHas;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var indexOfNaN = require('./_indexOfNaN');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return indexOfNaN(array, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOf;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObject = require('./isObject'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isHostObject = require('./_isHostObject'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      stack || (stack = new Stack);\n      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack,\n          result = customizer ? customizer(objValue, srcValue, key, object, source, stack) : undefined;\n\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  var type = typeof value;\n  if (type == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (type == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = Object.keys;\n\n/**\n * The base implementation of `_.keys` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  return nativeKeys(Object(object));\n}\n\nmodule.exports = baseKeys;\n","var Reflect = require('./_Reflect'),\n    iteratorToArray = require('./_iteratorToArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar enumerate = Reflect ? Reflect.enumerate : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.keysIn` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  object = object == null ? object : Object(object);\n\n  var result = [];\n  for (var key in object) {\n    result.push(key);\n  }\n  return result;\n}\n\n// Fallback for IE < 9 with es6-shim.\nif (enumerate && !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf')) {\n  baseKeysIn = function(object) {\n    return iteratorToArray(enumerate(object));\n  };\n}\n\nmodule.exports = baseKeysIn;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    var key = matchData[0][0],\n        value = matchData[0][1];\n\n    return function(object) {\n      if (object == null) {\n        return false;\n      }\n      return object[key] === value &&\n        (value !== undefined || (key in Object(object)));\n    };\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isArray = require('./isArray'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  var props = (isArray(source) || isTypedArray(source))\n    ? undefined\n    : keysIn(source);\n\n  arrayEach(props || source, function(srcValue, key) {\n    if (props) {\n      key = srcValue;\n      srcValue = source[key];\n    }\n    if (isObject(srcValue)) {\n      stack || (stack = new Stack);\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(object[key], srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  });\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    baseClone = require('./_baseClone'),\n    copyArray = require('./_copyArray'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = object[key],\n      srcValue = source[key],\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    newValue = srcValue;\n    if (isArray(srcValue) || isTypedArray(srcValue)) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || (srcIndex && isFunction(objValue))) {\n        isCommon = false;\n        newValue = baseClone(srcValue, !customizer);\n      }\n      else {\n        newValue = objValue;\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  stack.set(srcValue, newValue);\n\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n  }\n  stack['delete'](srcValue);\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n * of key-value pairs for `object` corresponding to the property names of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the new array of key-value pairs.\n */\nfunction baseToPairs(object, props) {\n  return arrayMap(props, function(key) {\n    return [key, object[key]];\n  });\n}\n\nmodule.exports = baseToPairs;\n","/**\n * The base implementation of `_.unary` without support for storing wrapper metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Checks if `value` is in `cache`.\n *\n * @private\n * @param {Object} cache The set cache to search.\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction cacheHas(cache, value) {\n  var map = cache.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    return hash[value] === HASH_UNDEFINED;\n  }\n  return map.has(value);\n}\n\nmodule.exports = cacheHas;\n","var isKeyable = require('./_isKeyable');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the set cache.\n *\n * @private\n * @name push\n * @memberOf SetCache\n * @param {*} value The value to cache.\n */\nfunction cachePush(value) {\n  var map = this.__data__;\n  if (isKeyable(value)) {\n    var data = map.__data__,\n        hash = typeof value == 'string' ? data.string : data.hash;\n\n    hash[value] = HASH_UNDEFINED;\n  }\n  else {\n    map.set(value, HASH_UNDEFINED);\n  }\n}\n\nmodule.exports = cachePush;\n","/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\nmodule.exports = checkGlobal;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var addMapEntry = require('./_addMapEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    mapToArray = require('./_mapToArray');\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map) {\n  return arrayReduce(mapToArray(map), addMapEntry, new map.constructor);\n}\n\nmodule.exports = cloneMap;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var addSetEntry = require('./_addSetEntry'),\n    arrayReduce = require('./_arrayReduce'),\n    setToArray = require('./_setToArray');\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set) {\n  return arrayReduce(setToArray(set), addSetEntry, new set.constructor);\n}\n\nmodule.exports = cloneSet;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObjectWith = require('./_copyObjectWith');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object) {\n  return copyObjectWith(source, props, object);\n}\n\nmodule.exports = copyObject;\n","var assignValue = require('./_assignValue');\n\n/**\n * This function is like `copyObject` except that it accepts a function to\n * customize copied values.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObjectWith(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\nmodule.exports = copyObjectWith;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","var isIterateeCall = require('./_isIterateeCall'),\n    rest = require('./rest');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = typeof customizer == 'function'\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * Creates a base function for methods like `_.forIn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var arraySome = require('./_arraySome');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var index = -1,\n      isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      isUnordered = bitmask & UNORDERED_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(array, other);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (isUnordered) {\n      if (!arraySome(other, function(othValue) {\n            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack);\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n      // Coerce dates and booleans to numbers, dates to milliseconds and booleans\n      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.\n      return +object == +other;\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case numberTag:\n      // Treat `NaN` vs. `NaN` as equal.\n      return (object != +object) ? other != +other : object == +other;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings primitives and string\n      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      // Recursively compare objects (susceptible to call stack limits).\n      return equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask | UNORDERED_COMPARE_FLAG, stack.set(object, other));\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var baseHas = require('./_baseHas'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for comparison styles. */\nvar PARTIAL_COMPARE_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual` for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : baseHas(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var baseProperty = require('./_baseProperty');\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nmodule.exports = getLength;\n","var isStrictComparable = require('./_isStrictComparable'),\n    toPairs = require('./toPairs');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = toPairs(object),\n      length = result.length;\n\n  while (length--) {\n    result[length][2] = isStrictComparable(result[length][1]);\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var isNative = require('./isNative');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = object[key];\n  return isNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","/** Built-in value references. */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = getOwnPropertySymbols || function() {\n  return [];\n};\n\nmodule.exports = getSymbols;\n","var Map = require('./_Map'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect maps, sets, and weakmaps. */\nvar mapCtorString = Map ? funcToString.call(Map) : '',\n    setCtorString = Set ? funcToString.call(Set) : '',\n    weakMapCtorString = WeakMap ? funcToString.call(WeakMap) : '';\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction getTag(value) {\n  return objectToString.call(value);\n}\n\n// Fallback for IE 11 providing `toStringTag` values for maps, sets, and weakmaps.\nif ((Map && getTag(new Map) != mapTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : null,\n        ctorString = typeof Ctor == 'function' ? funcToString.call(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case mapCtorString: return mapTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var baseCastPath = require('./_baseCastPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isKey = require('./_isKey'),\n    isLength = require('./isLength'),\n    isString = require('./isString'),\n    last = require('./last'),\n    parent = require('./_parent');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  if (object == null) {\n    return false;\n  }\n  var result = hasFunc(object, path);\n  if (!result && !isKey(path)) {\n    path = baseCastPath(path);\n    object = parent(object, path);\n    if (object != null) {\n      path = last(path);\n      result = hasFunc(object, path);\n    }\n  }\n  var length = object ? object.length : undefined;\n  return result || (\n    !!length && isLength(length) && isIndex(path, length) &&\n    (isArray(object) || isString(object) || isArguments(object))\n  );\n}\n\nmodule.exports = hasPath;\n","var hashHas = require('./_hashHas');\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(hash, key) {\n  return hashHas(hash, key) && delete hash[key];\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(hash, key) {\n  if (nativeCreate) {\n    var result = hash[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(hash, key) ? hash[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @param {Object} hash The hash to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(hash, key) {\n  return nativeCreate ? hash[key] !== undefined : hasOwnProperty.call(hash, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n */\nfunction hashSet(hash, key, value) {\n  hash[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n}\n\nmodule.exports = hashSet;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isLength = require('./isLength'),\n    isString = require('./isString');\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\nmodule.exports = indexKeys;\n","/**\n * Gets the index at which the first occurrence of `NaN` is found in `array`.\n *\n * @private\n * @param {Array} array The array to search.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n */\nfunction indexOfNaN(array, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 0 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    var other = array[index];\n    if (other !== other) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = indexOfNaN;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneMap = require('./_cloneMap'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSet = require('./_cloneSet'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseCreate = require('./_baseCreate'),\n    isPrototype = require('./_isPrototype');\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototypeOf(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\nmodule.exports = isHostObject;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var isArray = require('./isArray');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (typeof value == 'number') {\n    return true;\n  }\n  return !isArray(value) &&\n    (reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n      (object != null && value in Object(object)));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return type == 'number' || type == 'boolean' ||\n    (type == 'string' && value != '__proto__') || value == null;\n}\n\nmodule.exports = isKeyable;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\nmodule.exports = iteratorToArray;\n","var Hash = require('./_Hash'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': Map ? new Map : [],\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapClear;\n","var Map = require('./_Map'),\n    assocDelete = require('./_assocDelete'),\n    hashDelete = require('./_hashDelete'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapDelete(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashDelete(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map['delete'](key) : assocDelete(data.map, key);\n}\n\nmodule.exports = mapDelete;\n","var Map = require('./_Map'),\n    assocGet = require('./_assocGet'),\n    hashGet = require('./_hashGet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapGet(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashGet(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.get(key) : assocGet(data.map, key);\n}\n\nmodule.exports = mapGet;\n","var Map = require('./_Map'),\n    assocHas = require('./_assocHas'),\n    hashHas = require('./_hashHas'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapHas(key) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    return hashHas(typeof key == 'string' ? data.string : data.hash, key);\n  }\n  return Map ? data.map.has(key) : assocHas(data.map, key);\n}\n\nmodule.exports = mapHas;\n","var Map = require('./_Map'),\n    assocSet = require('./_assocSet'),\n    hashSet = require('./_hashSet'),\n    isKeyable = require('./_isKeyable');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache object.\n */\nfunction mapSet(key, value) {\n  var data = this.__data__;\n  if (isKeyable(key)) {\n    hashSet(typeof key == 'string' ? data.string : data.hash, key, value);\n  } else if (Map) {\n    data.map.set(key, value);\n  } else {\n    assocSet(data.map, key, value);\n  }\n  return this;\n}\n\nmodule.exports = mapSet;\n","/**\n * Converts `map` to an array.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var baseSlice = require('./_baseSlice'),\n    get = require('./get');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length == 1 ? object : get(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var checkGlobal = require('./_checkGlobal');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Converts `set` to an array.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = { 'array': [], 'map': null };\n}\n\nmodule.exports = stackClear;\n","var assocDelete = require('./_assocDelete');\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocDelete(array, key) : data.map['delete'](key);\n}\n\nmodule.exports = stackDelete;\n","var assocGet = require('./_assocGet');\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocGet(array, key) : data.map.get(key);\n}\n\nmodule.exports = stackGet;\n","var assocHas = require('./_assocHas');\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  var data = this.__data__,\n      array = data.array;\n\n  return array ? assocHas(array, key) : data.map.has(key);\n}\n\nmodule.exports = stackHas;\n","var MapCache = require('./_MapCache'),\n    assocSet = require('./_assocSet');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache object.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__,\n      array = data.array;\n\n  if (array) {\n    if (array.length < (LARGE_ARRAY_SIZE - 1)) {\n      assocSet(array, key, value);\n    } else {\n      data.array = null;\n      data.map = new MapCache(array);\n    }\n  }\n  var map = data.map;\n  if (map) {\n    map.set(key, value);\n  }\n  return this;\n}\n\nmodule.exports = stackSet;\n","var toString = require('./toString');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nfunction stringToPath(string) {\n  var result = [];\n  toString(string).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nmodule.exports = stringToPath;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Assigns own enumerable properties of source objects to the destination\n * object. Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function Foo() {\n *   this.c = 3;\n * }\n *\n * function Bar() {\n *   this.e = 5;\n * }\n *\n * Foo.prototype.d = 4;\n * Bar.prototype.f = 6;\n *\n * _.assign({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3, 'e': 5 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var getter = _.constant(object);\n *\n * getter() === object;\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last'),\n    rest = require('./rest');\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. Result values are chosen from the first array.\n * The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([3.1, 2.2, 1.3], [4.4, 2.5], Math.floor);\n * // => [3.1, 1.3]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = rest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, true), baseIteratee(iteratee))\n    : [];\n});\n\nmodule.exports = differenceBy;\n","/**\n * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseEach = require('./_baseEach'),\n    baseFind = require('./_baseFind'),\n    baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three arguments:\n * (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nfunction find(collection, predicate) {\n  predicate = baseIteratee(predicate, 3);\n  if (isArray(collection)) {\n    var index = baseFindIndex(collection, predicate);\n    return index > -1 ? collection[index] : undefined;\n  }\n  return baseFind(collection, predicate, baseEach);\n}\n\nmodule.exports = find;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to search.\n * @param {Function|Object|string} [predicate=_.identity] The function invoked per iteration.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate) {\n  return (array && array.length)\n    ? baseFindIndex(array, baseIteratee(predicate, 3))\n    : -1;\n}\n\nmodule.exports = findIndex;\n","var arrayEach = require('./_arrayEach'),\n    baseCastFunction = require('./_baseCastFunction'),\n    baseEach = require('./_baseEach'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` invoking `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\" property\n * are iterated like arrays. To avoid this behavior use `_.forIn` or `_.forOwn`\n * for object iteration.\n *\n * @static\n * @memberOf _\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @example\n *\n * _([1, 2]).forEach(function(value) {\n *   console.log(value);\n * });\n * // => logs `1` then `2`\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => logs 'a' then 'b' (iteration order is not guaranteed)\n */\nfunction forEach(collection, iteratee) {\n  return (typeof iteratee == 'function' && isArray(collection))\n    ? arrayEach(collection, iteratee)\n    : baseEach(collection, baseCastFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined` the `defaultValue` is used in its place.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': _.create({ 'c': 3 }) }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b.c');\n * // => true\n *\n * _.hasIn(object, ['a', 'b', 'c']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * This method returns the first argument given to it.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'user': 'fred' };\n *\n * _.identity(object) === object;\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var getLength = require('./_getLength'),\n    isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value)) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var constant = require('./constant'),\n    root = require('./_root');\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = (freeModule && freeModule.exports === freeExports)\n  ? freeExports\n  : undefined;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = !Buffer ? constant(false) : function(value) {\n  return value instanceof Buffer;\n};\n\nmodule.exports = isBuffer;\n","var isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isFunction = require('./isFunction'),\n    isString = require('./isString');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty collection or object. A value is considered\n * empty if it's an `arguments` object, array, string, or jQuery-like collection\n * with a length of `0` or has no own enumerable properties.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || isString(value) ||\n        isFunction(value.splice) || isArguments(value))) {\n    return !value.length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isFunction = require('./isFunction'),\n    isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used to match `RegExp` [syntax characters](http://ecma-international.org/ecma-262/6.0/#sec-patterns). */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari > 5). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * Checks if `value` is a native function.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function, else `false`.\n * @example\n *\n * _.isNative(Array.prototype.push);\n * // => true\n *\n * _.isNative(_);\n * // => false\n */\nfunction isNative(value) {\n  if (value == null) {\n    return false;\n  }\n  if (isFunction(value)) {\n    return reIsNative.test(funcToString.call(value));\n  }\n  return isObjectLike(value) &&\n    (isHostObject(value) ? reIsNative : reIsHostCtor).test(value);\n}\n\nmodule.exports = isNative;\n","var isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && objectToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var isHostObject = require('./_isHostObject'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = Function.prototype.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf;\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n","var isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar regexpTag = '[object RegExp]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `RegExp` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isRegExp(/abc/);\n * // => true\n *\n * _.isRegExp('/abc/');\n * // => false\n */\nfunction isRegExp(value) {\n  return isObject(value) && objectToString.call(value) == regexpTag;\n}\n\nmodule.exports = isRegExp;\n","var isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dateTag] = typedArrayTags[errorTag] =\ntypedArrayTags[funcTag] = typedArrayTags[mapTag] =\ntypedArrayTags[numberTag] = typedArrayTags[objectTag] =\ntypedArrayTags[regexpTag] = typedArrayTags[setTag] =\ntypedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nfunction isTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\nmodule.exports = isTypedArray;\n","var createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` through `iteratee`. The corresponding value\n * of each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  result[key] = value;\n});\n\nmodule.exports = keyBy;\n","var baseHas = require('./_baseHas'),\n    baseKeys = require('./_baseKeys'),\n    indexKeys = require('./_indexKeys'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  var isProto = isPrototype(object);\n  if (!(isProto || isArrayLike(object))) {\n    return baseKeys(object);\n  }\n  var indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  for (var key in object) {\n    if (baseHas(object, key) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(isProto && key == 'constructor')) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keys;\n","var baseKeysIn = require('./_baseKeysIn'),\n    indexKeys = require('./_indexKeys'),\n    isIndex = require('./_isIndex'),\n    isPrototype = require('./_isPrototype');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  var index = -1,\n      isProto = isPrototype(object),\n      props = baseKeysIn(object),\n      propsLength = props.length,\n      indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if (!(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array ? array.length : 0;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` through\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `curry`, `curryRight`, `drop`, `dropRight`, `every`, `fill`,\n * `invert`, `parseInt`, `random`, `range`, `rangeRight`, `slice`, `some`,\n * `sortBy`, `take`, `takeRight`, `template`, `trim`, `trimEnd`, `trimStart`,\n * and `words`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function|Object|string} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable properties of source objects into the destination\n * object. Source properties that resolve to `undefined` are skipped if a\n * destination value exists. Array and plain object properties are merged\n * recursively.Other objects and value types are overridden by assignment.\n * Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var users = {\n *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]\n * };\n *\n * var ages = {\n *   'data': [{ 'age': 36 }, { 'age': 40 }]\n * };\n *\n * _.merge(users, ages);\n * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': { 'c': 2 } } },\n *   { 'a': { 'b': { 'c': 1 } } }\n * ];\n *\n * _.map(objects, _.property('a.b.c'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b', 'c'])), 'a.b.c');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(path) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` through `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","var apply = require('./_apply'),\n    toInteger = require('./toInteger');\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = rest;\n","var baseCastPath = require('./_baseCastPath'),\n    get = require('./get'),\n    isFunction = require('./isFunction'),\n    isKey = require('./_isKey'),\n    parent = require('./_parent');\n\n/**\n * This method is like `_.get` except that if the resolved value is a function\n * it's invoked with the `this` binding of its parent object and its result\n * is returned.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to resolve.\n * @param {*} [defaultValue] The value returned if the resolved value is `undefined`.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n *\n * _.result(object, 'a[0].b.c1');\n * // => 3\n *\n * _.result(object, 'a[0].b.c2');\n * // => 4\n *\n * _.result(object, 'a[0].b.c3', 'default');\n * // => 'default'\n *\n * _.result(object, 'a[0].b.c3', _.constant('default'));\n * // => 'default'\n */\nfunction result(object, path, defaultValue) {\n  if (!isKey(path, object)) {\n    path = baseCastPath(path);\n    var result = get(object, path);\n    object = parent(object, path);\n  } else {\n    result = object == null ? undefined : object[path];\n  }\n  if (result === undefined) {\n    result = defaultValue;\n  }\n  return isFunction(result) ? result.call(object) : result;\n}\n\nmodule.exports = result;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\nmodule.exports = toInteger;\n","var isFunction = require('./isFunction'),\n    isObject = require('./isObject');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseToPairs = require('./_baseToPairs'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable key-value pairs for `object` which\n * can be consumed by `_.fromPairs`.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the new array of key-value pairs.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.toPairs(new Foo);\n * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n */\nfunction toPairs(object) {\n  return baseToPairs(object, keys(object));\n}\n\nmodule.exports = toPairs;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable\n * properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var Symbol = require('./_Symbol'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (value == null) {\n    return '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toString;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = values;\n","/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n(function (root, definition) {\r\n    \"use strict\";\r\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\r\n        module.exports = definition();\r\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\r\n        define(definition);\r\n    } else {\r\n        root.log = definition();\r\n    }\r\n}(this, function () {\r\n    \"use strict\";\r\n    var noop = function() {};\r\n    var undefinedType = \"undefined\";\r\n\r\n    function realMethod(methodName) {\r\n        if (typeof console === undefinedType) {\r\n            return false; // We can't build a real method without a console to log to\r\n        } else if (console[methodName] !== undefined) {\r\n            return bindMethod(console, methodName);\r\n        } else if (console.log !== undefined) {\r\n            return bindMethod(console, 'log');\r\n        } else {\r\n            return noop;\r\n        }\r\n    }\r\n\r\n    function bindMethod(obj, methodName) {\r\n        var method = obj[methodName];\r\n        if (typeof method.bind === 'function') {\r\n            return method.bind(obj);\r\n        } else {\r\n            try {\r\n                return Function.prototype.bind.call(method, obj);\r\n            } catch (e) {\r\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\n                return function() {\r\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    // these private functions always need `this` to be set properly\r\n\r\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\r\n        return function () {\r\n            if (typeof console !== undefinedType) {\r\n                replaceLoggingMethods.call(this, level, loggerName);\r\n                this[methodName].apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n    function replaceLoggingMethods(level, loggerName) {\r\n        /*jshint validthis:true */\r\n        for (var i = 0; i < logMethods.length; i++) {\r\n            var methodName = logMethods[i];\r\n            this[methodName] = (i < level) ?\r\n                noop :\r\n                this.methodFactory(methodName, level, loggerName);\r\n        }\r\n    }\r\n\r\n    function defaultMethodFactory(methodName, level, loggerName) {\r\n        /*jshint validthis:true */\r\n        return realMethod(methodName) ||\r\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\r\n    }\r\n\r\n    var logMethods = [\r\n        \"trace\",\r\n        \"debug\",\r\n        \"info\",\r\n        \"warn\",\r\n        \"error\"\r\n    ];\r\n\r\n    function Logger(name, defaultLevel, factory) {\r\n      var self = this;\r\n      var currentLevel;\r\n      var storageKey = \"loglevel\";\r\n      if (name) {\r\n        storageKey += \":\" + name;\r\n      }\r\n\r\n      function persistLevelIfPossible(levelNum) {\r\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\r\n\r\n          // Use localStorage if available\r\n          try {\r\n              window.localStorage[storageKey] = levelName;\r\n              return;\r\n          } catch (ignore) {}\r\n\r\n          // Use session cookie as fallback\r\n          try {\r\n              window.document.cookie =\r\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\r\n          } catch (ignore) {}\r\n      }\r\n\r\n      function getPersistedLevel() {\r\n          var storedLevel;\r\n\r\n          try {\r\n              storedLevel = window.localStorage[storageKey];\r\n          } catch (ignore) {}\r\n\r\n          if (typeof storedLevel === undefinedType) {\r\n              try {\r\n                  var cookie = window.document.cookie;\r\n                  var location = cookie.indexOf(\r\n                      encodeURIComponent(storageKey) + \"=\");\r\n                  if (location) {\r\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\r\n                  }\r\n              } catch (ignore) {}\r\n          }\r\n\r\n          // If the stored level is not valid, treat it as if nothing was stored.\r\n          if (self.levels[storedLevel] === undefined) {\r\n              storedLevel = undefined;\r\n          }\r\n\r\n          return storedLevel;\r\n      }\r\n\r\n      /*\r\n       *\r\n       * Public API\r\n       *\r\n       */\r\n\r\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\r\n          \"ERROR\": 4, \"SILENT\": 5};\r\n\r\n      self.methodFactory = factory || defaultMethodFactory;\r\n\r\n      self.getLevel = function () {\r\n          return currentLevel;\r\n      };\r\n\r\n      self.setLevel = function (level, persist) {\r\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\r\n              level = self.levels[level.toUpperCase()];\r\n          }\r\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\r\n              currentLevel = level;\r\n              if (persist !== false) {  // defaults to true\r\n                  persistLevelIfPossible(level);\r\n              }\r\n              replaceLoggingMethods.call(self, level, name);\r\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\r\n                  return \"No console available for logging\";\r\n              }\r\n          } else {\r\n              throw \"log.setLevel() called with invalid level: \" + level;\r\n          }\r\n      };\r\n\r\n      self.setDefaultLevel = function (level) {\r\n          if (!getPersistedLevel()) {\r\n              self.setLevel(level, false);\r\n          }\r\n      };\r\n\r\n      self.enableAll = function(persist) {\r\n          self.setLevel(self.levels.TRACE, persist);\r\n      };\r\n\r\n      self.disableAll = function(persist) {\r\n          self.setLevel(self.levels.SILENT, persist);\r\n      };\r\n\r\n      // Initialize with the right level\r\n      var initialLevel = getPersistedLevel();\r\n      if (initialLevel == null) {\r\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\r\n      }\r\n      self.setLevel(initialLevel, false);\r\n    }\r\n\r\n    /*\r\n     *\r\n     * Package-level API\r\n     *\r\n     */\r\n\r\n    var defaultLogger = new Logger();\r\n\r\n    var _loggersByName = {};\r\n    defaultLogger.getLogger = function getLogger(name) {\r\n        if (typeof name !== \"string\" || name === \"\") {\r\n          throw new TypeError(\"You must supply a name when creating a logger.\");\r\n        }\r\n\r\n        var logger = _loggersByName[name];\r\n        if (!logger) {\r\n          logger = _loggersByName[name] = new Logger(\r\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\r\n        }\r\n        return logger;\r\n    };\r\n\r\n    // Grab the current global log variable in case of overwrite\r\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\r\n    defaultLogger.noConflict = function() {\r\n        if (typeof window !== undefinedType &&\r\n               window.log === defaultLogger) {\r\n            window.log = _log;\r\n        }\r\n\r\n        return defaultLogger;\r\n    };\r\n\r\n    return defaultLogger;\r\n}));\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = process.env.PROMISE_QUEUE_COVERAGE ?\n    require('./lib-cov') :\n    require('./lib');\n","/* global define, Promise */\n(function (root, factory) {\n    'use strict';\n    if (typeof module === 'object' && module.exports && typeof require === 'function') {\n        // CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && typeof define.amd === 'object') {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else {\n        // Browser globals\n        root.Queue = factory();\n    }\n})\n(this, function () {\n    'use strict';\n\n    /**\n     * @return {Object}\n     */\n    var LocalPromise = typeof Promise !== 'undefined' ? Promise : function () {\n        return {\n            then: function () {\n                throw new Error('Queue.configure() before use Queue');\n            }\n        };\n    };\n\n    var noop = function () {};\n\n    /**\n     * @param {*} value\n     * @returns {LocalPromise}\n     */\n    var resolveWith = function (value) {\n        if (value && typeof value.then === 'function') {\n            return value;\n        }\n\n        return new LocalPromise(function (resolve) {\n            resolve(value);\n        });\n    };\n\n    /**\n     * It limits concurrently executed promises\n     *\n     * @param {Number} [maxPendingPromises=Infinity] max number of concurrently executed promises\n     * @param {Number} [maxQueuedPromises=Infinity]  max number of queued promises\n     * @constructor\n     *\n     * @example\n     *\n     * var queue = new Queue(1);\n     *\n     * queue.add(function () {\n     *     // resolve of this promise will resume next request\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     *\n     * queue.add(function () {\n     *     return downloadTarballFromGithub(url, file);\n     * })\n     * // This request will be paused\n     * .then(function (file) {\n     *     doStuffWith(file);\n     * });\n     */\n    function Queue(maxPendingPromises, maxQueuedPromises) {\n        this.pendingPromises = 0;\n        this.maxPendingPromises = typeof maxPendingPromises !== 'undefined' ? maxPendingPromises : Infinity;\n        this.maxQueuedPromises = typeof maxQueuedPromises !== 'undefined' ? maxQueuedPromises : Infinity;\n        this.queue = [];\n    }\n\n    /**\n     * Defines promise promiseFactory\n     * @param {Function} GlobalPromise\n     */\n    Queue.configure = function (GlobalPromise) {\n        LocalPromise = GlobalPromise;\n    };\n\n    /**\n     * @param {Function} promiseGenerator\n     * @return {LocalPromise}\n     */\n    Queue.prototype.add = function (promiseGenerator) {\n        var self = this;\n        return new LocalPromise(function (resolve, reject, notify) {\n            // Do not queue to much promises\n            if (self.queue.length >= self.maxQueuedPromises) {\n                reject(new Error('Queue limit reached'));\n                return;\n            }\n\n            // Add to queue\n            self.queue.push({\n                promiseGenerator: promiseGenerator,\n                resolve: resolve,\n                reject: reject,\n                notify: notify || noop\n            });\n\n            self._dequeue();\n        });\n    };\n\n    /**\n     * Number of simultaneously running promises (which are resolving)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getPendingLength = function () {\n        return this.pendingPromises;\n    };\n\n    /**\n     * Number of queued promises (which are waiting)\n     *\n     * @return {number}\n     */\n    Queue.prototype.getQueueLength = function () {\n        return this.queue.length;\n    };\n\n    /**\n     * @returns {boolean} true if first item removed from queue\n     * @private\n     */\n    Queue.prototype._dequeue = function () {\n        var self = this;\n        if (this.pendingPromises >= this.maxPendingPromises) {\n            return false;\n        }\n\n        // Remove from queue\n        var item = this.queue.shift();\n        if (!item) {\n            return false;\n        }\n\n        try {\n            this.pendingPromises++;\n\n            resolveWith(item.promiseGenerator())\n            // Forward all stuff\n                .then(function (value) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should pass values\n                    item.resolve(value);\n                    self._dequeue();\n                }, function (err) {\n                    // It is not pending now\n                    self.pendingPromises--;\n                    // It should not mask errors\n                    item.reject(err);\n                    self._dequeue();\n                }, function (message) {\n                    // It should pass notifications\n                    item.notify(message);\n                });\n        } catch (err) {\n            self.pendingPromises--;\n            item.reject(err);\n            self._dequeue();\n\n        }\n\n        return true;\n    };\n\n    return Queue;\n});\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n","'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000,\n    strictNullHandling: false,\n    plainObjects: false,\n    allowPrototypes: false,\n    allowDots: false\n};\n\ninternals.parseValues = function (str, options) {\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n\n            if (options.strictNullHandling) {\n                obj[Utils.decode(part)] = null;\n            }\n        } else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                obj[key] = [].concat(obj[key]).concat(val);\n            } else {\n                obj[key] = val;\n            }\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseObject = function (chain, val, options) {\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj;\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    } else {\n        obj = options.plainObjects ? Object.create(null) : {};\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        if (\n            !isNaN(index) &&\n            root !== cleanRoot &&\n            String(index) === cleanRoot &&\n            index >= 0 &&\n            (options.parseArrays && index <= options.arrayLimit)\n        ) {\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        } else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\ninternals.parseKeys = function (givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^\\.\\[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1])) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1].replace(/\\[|\\]/g, ''))) {\n            if (!options.allowPrototypes) {\n                continue;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : internals.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : internals.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : internals.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n\n    if (\n        str === '' ||\n        str === null ||\n        typeof str === 'undefined'\n    ) {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj, options);\n    }\n\n    return Utils.compact(obj);\n};\n","'use strict';\n\nvar Utils = require('./utils');\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix) {\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix) {\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\ninternals.stringify = function (object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (Utils.isBuffer(obj)) {\n        obj = String(obj);\n    } else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        } else {\n            values = values.concat(internals.stringify(obj[key], prefix + (allowDots ? '.' + key : '[' + key + ']'), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort, allowDots));\n    }\n\n    return keys.join(delimiter);\n};\n","'use strict';\n\nvar hexTable = (function () {\n    var array = new Array(256);\n    for (var i = 0; i < 256; ++i) {\n        array[i] = '%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase();\n    }\n\n    return array;\n}());\n\nexports.arrayToObject = function (source, options) {\n    var obj = options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nexports.merge = function (target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            target[source] = true;\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = exports.arrayToObject(target, options);\n    }\n\n\treturn Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (Object.prototype.hasOwnProperty.call(acc, key)) {\n            acc[key] = exports.merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n\t\treturn acc;\n    }, mergeTarget);\n};\n\nexports.decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += (hexTable[0xF0 | (c >> 18)] + hexTable[0x80 | ((c >> 12) & 0x3F)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, references) {\n    if (typeof obj !== 'object' || obj === null) {\n        return obj;\n    }\n\n    var refs = references || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0; i < obj.length; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (var j = 0; j < keys.length; ++j) {\n        var key = keys[j];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\nexports.isRegExp = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nexports.isBuffer = function (obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","/*\n * Sift 3.x\n *\n * Copryright 2015, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\n(function() {\n\n  'use strict';\n\n  /**\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  /**\n   */\n\n  function isArray(value) {\n    return Object.prototype.toString.call(value) === '[object Array]';\n  }\n\n  /**\n   */\n\n  function comparable(value) {\n    if (value instanceof Date) {\n      return value.getTime();\n    } else if (value instanceof Array) {\n      return value.map(comparable);\n    } else {\n      return value;\n    }\n  }\n\n  function get(obj, key) {\n    if (obj.get) return obj.get(key);\n    return obj[key];\n  }\n\n  /**\n   */\n\n  function or(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (validator(a, get(b,i))) return true;\n      return false;\n    }\n  }\n\n  /**\n   */\n\n  function and(validator) {\n    return function(a, b) {\n      if (!isArray(b) || !b.length) return validator(a, b);\n      for (var i = 0, n = b.length; i < n; i++) if (!validator(a, get(b, i))) return false;\n      return true;\n    };\n  }\n\n  function validate(validator, b) {\n    return validator.v(validator.a, b);\n  }\n\n\n  var operator = {\n\n    /**\n     */\n\n    $eq: or(function(a, b) {\n      return a(b);\n    }),\n\n    /**\n     */\n\n    $ne: and(function(a, b) {\n      return !a(b);\n    }),\n\n    /**\n     */\n\n    $or: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return true;\n      return false;\n    },\n\n    /**\n     */\n\n    $gt: or(function(a, b) {\n      return sift.compare(comparable(b), a) > 0;\n    }),\n\n    /**\n     */\n\n    $gte: or(function(a, b) {\n      return sift.compare(comparable(b), a) >= 0;\n    }),\n\n    /**\n     */\n\n    $lt: or(function(a, b) {\n      return sift.compare(comparable(b), a) < 0;\n    }),\n\n    /**\n     */\n\n    $lte: or(function(a, b) {\n      return sift.compare(comparable(b), a) <= 0;\n    }),\n\n    /**\n     */\n\n    $mod: or(function(a, b) {\n      return b % a[0] == a[1];\n    }),\n\n    /**\n     */\n\n    $in: function(a, b) {\n\n      if (b instanceof Array) {\n        for (var i = b.length; i--;) {\n          if (~a.indexOf(comparable(get(b, i)))) return true;\n        }\n      } else {\n        return !!~a.indexOf(comparable(b));\n      }\n\n      return false;\n    },\n\n    /**\n     */\n\n    $nin: function(a, b) {\n      return !operator.$in(a, b);\n    },\n\n    /**\n     */\n\n    $not: function(a, b) {\n      return !validate(a, b);\n    },\n\n    /**\n     */\n\n    $type: function(a, b) {\n      return b != void 0 ? b instanceof a || b.constructor == a : false;\n     },\n\n    /**\n     */\n\n    $all: function(a, b) {\n      if (!b) b = [];\n      for (var i = a.length; i--;) {\n        if (!~comparable(b).indexOf(get(a, i))) return false;\n      }\n      return true;\n    },\n\n    /**\n     */\n\n    $size: function(a, b) {\n      return b ? a === b.length : false;\n    },\n\n    /**\n     */\n\n    $nor: function(a, b) {\n      // todo - this suffice? return !operator.$in(a)\n      for (var i = 0, n = a.length; i < n; i++) if (validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $and: function(a, b) {\n      for (var i = 0, n = a.length; i < n; i++) if (!validate(get(a, i), b)) return false;\n      return true;\n    },\n\n    /**\n     */\n\n    $regex: or(function(a, b) {\n      return typeof b === 'string' && a.test(b);\n    }),\n\n    /**\n     */\n\n    $where: function(a, b) {\n      return a.call(b, b);\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a, b) {\n      if (isArray(b)) return !!~search(b, a);\n      return validate(a, b);\n    },\n\n    /**\n     */\n\n    $exists: function(a, b) {\n      return (b != void 0) === a;\n    }\n  };\n\n  /**\n   */\n\n  var prepare = {\n\n    /**\n     */\n\n    $eq: function(a) {\n\n      if (a instanceof RegExp) {\n        return function(b) {\n          return typeof b === 'string' && a.test(b);\n        };\n      } else if (a instanceof Function) {\n        return a;\n      } else if (isArray(a) && !a.length) {\n        // Special case of a == []\n        return function(b) {\n          return (isArray(b) && !b.length);\n        };\n      } else if (a === null){\n        return function(b){\n          //will match both null and undefined\n          return b == null;\n        }\n      }\n\n      return function(b) {\n        return sift.compare(comparable(b), a) === 0;\n      };\n    },\n\n    /**\n     */\n\n    $ne: function(a) {\n      return prepare.$eq(a);\n    },\n\n    /**\n     */\n\n    $and: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $or: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $nor: function(a) {\n      return a.map(parse);\n    },\n\n    /**\n     */\n\n    $not: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $regex: function(a, query) {\n      return new RegExp(a, query.$options);\n    },\n\n    /**\n     */\n\n    $where: function(a) {\n      return typeof a === 'string' ? new Function('obj', 'return ' + a) : a;\n    },\n\n    /**\n     */\n\n    $elemMatch: function(a) {\n      return parse(a);\n    },\n\n    /**\n     */\n\n    $exists: function(a) {\n      return !!a;\n    }\n  };\n\n  /**\n   */\n\n  function search(array, validator) {\n\n    for (var i = 0; i < array.length; i++) {\n      if (validate(validator, get(array, i))) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   */\n\n  function createValidator(a, validate) {\n    return { a: a, v: validate };\n  }\n\n  /**\n   */\n\n  function nestedValidator(a, b) {\n    var values  = [];\n    findValues(b, a.k, 0, values);\n\n    if (values.length === 1) {\n      return validate(a.nv, values[0]);\n    }\n\n    return !!~search(values, a.nv);\n  }\n\n  /**\n   */\n\n  function findValues(current, keypath, index, values) {\n\n    if (index === keypath.length || current == void 0) {\n      values.push(current);\n      return;\n    }\n\n    var k = get(keypath, index);\n\n    // ensure that if current is an array, that the current key\n    // is NOT an array index. This sort of thing needs to work:\n    // sift({'foo.0':42}, [{foo: [42]}]);\n    if (isArray(current) && isNaN(Number(k))) {\n      for (var i = 0, n = current.length; i < n; i++) {\n        findValues(get(current, i), keypath, index, values);\n      }\n    } else {\n      findValues(get(current, k), keypath, index + 1, values);\n    }\n  }\n\n  /**\n   */\n\n  function createNestedValidator(keypath, a) {\n    return { a: { k: keypath, nv: a }, v: nestedValidator };\n  }\n\n  /**\n   * flatten the query\n   */\n\n  function parse(query) {\n    query = comparable(query);\n\n    if (!query || (query.constructor.toString() !== 'Object' &&\n        query.constructor.toString().replace(/\\n/g,'').replace(/ /g, '') !== 'functionObject(){[nativecode]}')) { // cross browser support\n      query = { $eq: query };\n    }\n\n    var validators = [];\n\n    for (var key in query) {\n      var a = query[key];\n\n      if (key === '$options') continue;\n\n      if (operator[key]) {\n        if (prepare[key]) a = prepare[key](a, query);\n        validators.push(createValidator(comparable(a), operator[key]));\n      } else {\n\n        if (key.charCodeAt(0) === 36) {\n          throw new Error('Unknown operation ' + key);\n        }\n\n        validators.push(createNestedValidator(key.split('.'), parse(a)));\n      }\n    }\n\n    return validators.length === 1 ? validators[0] : createValidator(validators, operator.$and);\n  }\n\n  /**\n   */\n\n  function createRootValidator(query, getter) {\n    var validator = parse(query);\n    if (getter) {\n      validator = {\n        a: validator,\n        v: function(a, b) {\n          return validate(a, getter(b));\n        }\n      };\n    }\n    return validator;\n  }\n\n  /**\n   */\n\n  function sift(query, array, getter) {\n\n    if (isFunction(array)) {\n      getter = array;\n      array  = void 0;\n    }\n\n    var validator = createRootValidator(query, getter);\n\n    function filter(b) {\n      return validate(validator, b);\n    }\n\n    if (array) {\n      return array.filter(filter);\n    }\n\n    return filter;\n  }\n\n  /**\n   */\n\n  sift.use = function(plugin) {\n    if (isFunction(plugin)) return plugin(sift);\n    for (var key in plugin) {\n      if (key.charCodeAt(0) === 36) operator[key] = plugin[key];\n    }\n  };\n\n  /**\n   */\n\n  sift.indexOf = function(query, array, getter) {\n    return search(array, createRootValidator(query, getter));\n  };\n\n  /**\n   */\n\n  sift.compare = function(a, b) {\n    if(a===b) return 0;\n    if(typeof a === typeof b) {\n      if (a > b) return 1;\n      if (a < b) return -1;\n    }\n  };\n\n  /* istanbul ignore next */\n  if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = sift;\n  }\n\n  if (typeof window !== 'undefined') {\n    window.sift = sift;\n  }\n})();\n","/**\n * Export `uid`\n */\n\nmodule.exports = uid;\n\n/**\n * Create a `uid`\n *\n * @param {String} len\n * @return {String} uid\n */\n\nfunction uid(len) {\n  len = len || 7;\n  return Math.random().toString(35).substr(2, len);\n}\n","// Generated by CoffeeScript 1.10.0\nvar slice = [].slice;\n\n(function(root, factory) {\n  if (('function' === typeof define) && (define.amd != null)) {\n    return define([], factory);\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    return module.exports = factory();\n  } else {\n    return root.UrlPattern = factory();\n  }\n})(this, function() {\n  var P, UrlPattern, astNodeContainsSegmentsForProvidedParams, astNodeToNames, astNodeToRegexString, baseAstNodeToRegexString, concatMap, defaultOptions, escapeForRegex, getParam, keysAndValuesToObject, newParser, regexGroupCount, stringConcatMap, stringify;\n  escapeForRegex = function(string) {\n    return string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  };\n  concatMap = function(array, f) {\n    var i, length, results;\n    results = [];\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      results = results.concat(f(array[i]));\n    }\n    return results;\n  };\n  stringConcatMap = function(array, f) {\n    var i, length, result;\n    result = '';\n    i = -1;\n    length = array.length;\n    while (++i < length) {\n      result += f(array[i]);\n    }\n    return result;\n  };\n  regexGroupCount = function(regex) {\n    return (new RegExp(regex.toString() + '|')).exec('').length - 1;\n  };\n  keysAndValuesToObject = function(keys, values) {\n    var i, key, length, object, value;\n    object = {};\n    i = -1;\n    length = keys.length;\n    while (++i < length) {\n      key = keys[i];\n      value = values[i];\n      if (value == null) {\n        continue;\n      }\n      if (object[key] != null) {\n        if (!Array.isArray(object[key])) {\n          object[key] = [object[key]];\n        }\n        object[key].push(value);\n      } else {\n        object[key] = value;\n      }\n    }\n    return object;\n  };\n  P = {};\n  P.Result = function(value, rest) {\n    this.value = value;\n    this.rest = rest;\n  };\n  P.Tagged = function(tag, value) {\n    this.tag = tag;\n    this.value = value;\n  };\n  P.tag = function(tag, parser) {\n    return function(input) {\n      var result, tagged;\n      result = parser(input);\n      if (result == null) {\n        return;\n      }\n      tagged = new P.Tagged(tag, result.value);\n      return new P.Result(tagged, result.rest);\n    };\n  };\n  P.regex = function(regex) {\n    return function(input) {\n      var matches, result;\n      matches = regex.exec(input);\n      if (matches == null) {\n        return;\n      }\n      result = matches[0];\n      return new P.Result(result, input.slice(result.length));\n    };\n  };\n  P.sequence = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, rest, result, values;\n      i = -1;\n      length = parsers.length;\n      values = [];\n      rest = input;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(rest);\n        if (result == null) {\n          return;\n        }\n        values.push(result.value);\n        rest = result.rest;\n      }\n      return new P.Result(values, rest);\n    };\n  };\n  P.pick = function() {\n    var indexes, parsers;\n    indexes = arguments[0], parsers = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    return function(input) {\n      var array, result;\n      result = P.sequence.apply(P, parsers)(input);\n      if (result == null) {\n        return;\n      }\n      array = result.value;\n      result.value = array[indexes];\n      return result;\n    };\n  };\n  P.string = function(string) {\n    var length;\n    length = string.length;\n    return function(input) {\n      if (input.slice(0, length) === string) {\n        return new P.Result(string, input.slice(length));\n      }\n    };\n  };\n  P.lazy = function(fn) {\n    var cached;\n    cached = null;\n    return function(input) {\n      if (cached == null) {\n        cached = fn();\n      }\n      return cached(input);\n    };\n  };\n  P.baseMany = function(parser, end, stringResult, atLeastOneResultRequired, input) {\n    var endResult, parserResult, rest, results;\n    rest = input;\n    results = stringResult ? '' : [];\n    while (true) {\n      if (end != null) {\n        endResult = end(rest);\n        if (endResult != null) {\n          break;\n        }\n      }\n      parserResult = parser(rest);\n      if (parserResult == null) {\n        break;\n      }\n      if (stringResult) {\n        results += parserResult.value;\n      } else {\n        results.push(parserResult.value);\n      }\n      rest = parserResult.rest;\n    }\n    if (atLeastOneResultRequired && results.length === 0) {\n      return;\n    }\n    return new P.Result(results, rest);\n  };\n  P.many1 = function(parser) {\n    return function(input) {\n      return P.baseMany(parser, null, false, true, input);\n    };\n  };\n  P.concatMany1Till = function(parser, end) {\n    return function(input) {\n      return P.baseMany(parser, end, true, true, input);\n    };\n  };\n  P.firstChoice = function() {\n    var parsers;\n    parsers = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n    return function(input) {\n      var i, length, parser, result;\n      i = -1;\n      length = parsers.length;\n      while (++i < length) {\n        parser = parsers[i];\n        result = parser(input);\n        if (result != null) {\n          return result;\n        }\n      }\n    };\n  };\n  newParser = function(options) {\n    var U;\n    U = {};\n    U.wildcard = P.tag('wildcard', P.string(options.wildcardChar));\n    U.optional = P.tag('optional', P.pick(1, P.string(options.optionalSegmentStartChar), P.lazy(function() {\n      return U.pattern;\n    }), P.string(options.optionalSegmentEndChar)));\n    U.name = P.regex(new RegExp(\"^[\" + options.segmentNameCharset + \"]+\"));\n    U.named = P.tag('named', P.pick(1, P.string(options.segmentNameStartChar), P.lazy(function() {\n      return U.name;\n    })));\n    U.escapedChar = P.pick(1, P.string(options.escapeChar), P.regex(/^./));\n    U[\"static\"] = P.tag('static', P.concatMany1Till(P.firstChoice(P.lazy(function() {\n      return U.escapedChar;\n    }), P.regex(/^./)), P.firstChoice(P.string(options.segmentNameStartChar), P.string(options.optionalSegmentStartChar), P.string(options.optionalSegmentEndChar), U.wildcard)));\n    U.token = P.lazy(function() {\n      return P.firstChoice(U.wildcard, U.optional, U.named, U[\"static\"]);\n    });\n    U.pattern = P.many1(P.lazy(function() {\n      return U.token;\n    }));\n    return U;\n  };\n  defaultOptions = {\n    escapeChar: '\\\\',\n    segmentNameStartChar: ':',\n    segmentValueCharset: 'a-zA-Z0-9-_~ %',\n    segmentNameCharset: 'a-zA-Z0-9',\n    optionalSegmentStartChar: '(',\n    optionalSegmentEndChar: ')',\n    wildcardChar: '*'\n  };\n  baseAstNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return baseAstNodeToRegexString(node, segmentValueCharset);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return '(.*?)';\n      case 'named':\n        return \"([\" + segmentValueCharset + \"]+)\";\n      case 'static':\n        return escapeForRegex(astNode.value);\n      case 'optional':\n        return '(?:' + baseAstNodeToRegexString(astNode.value, segmentValueCharset) + ')?';\n    }\n  };\n  astNodeToRegexString = function(astNode, segmentValueCharset) {\n    if (segmentValueCharset == null) {\n      segmentValueCharset = defaultOptions.segmentValueCharset;\n    }\n    return '^' + baseAstNodeToRegexString(astNode, segmentValueCharset) + '$';\n  };\n  astNodeToNames = function(astNode) {\n    if (Array.isArray(astNode)) {\n      return concatMap(astNode, astNodeToNames);\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return ['_'];\n      case 'named':\n        return [astNode.value];\n      case 'static':\n        return [];\n      case 'optional':\n        return astNodeToNames(astNode.value);\n    }\n  };\n  getParam = function(params, key, nextIndexes, sideEffects) {\n    var index, maxIndex, result, value;\n    if (sideEffects == null) {\n      sideEffects = false;\n    }\n    value = params[key];\n    if (value == null) {\n      if (sideEffects) {\n        throw new Error(\"no values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    index = nextIndexes[key] || 0;\n    maxIndex = Array.isArray(value) ? value.length - 1 : 0;\n    if (index > maxIndex) {\n      if (sideEffects) {\n        throw new Error(\"too few values provided for key `\" + key + \"`\");\n      } else {\n        return;\n      }\n    }\n    result = Array.isArray(value) ? value[index] : value;\n    if (sideEffects) {\n      nextIndexes[key] = index + 1;\n    }\n    return result;\n  };\n  astNodeContainsSegmentsForProvidedParams = function(astNode, params, nextIndexes) {\n    var i, length;\n    if (Array.isArray(astNode)) {\n      i = -1;\n      length = astNode.length;\n      while (++i < length) {\n        if (astNodeContainsSegmentsForProvidedParams(astNode[i], params, nextIndexes)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, false) != null;\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, false) != null;\n      case 'static':\n        return false;\n      case 'optional':\n        return astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes);\n    }\n  };\n  stringify = function(astNode, params, nextIndexes) {\n    if (Array.isArray(astNode)) {\n      return stringConcatMap(astNode, function(node) {\n        return stringify(node, params, nextIndexes);\n      });\n    }\n    switch (astNode.tag) {\n      case 'wildcard':\n        return getParam(params, '_', nextIndexes, true);\n      case 'named':\n        return getParam(params, astNode.value, nextIndexes, true);\n      case 'static':\n        return astNode.value;\n      case 'optional':\n        if (astNodeContainsSegmentsForProvidedParams(astNode.value, params, nextIndexes)) {\n          return stringify(astNode.value, params, nextIndexes);\n        } else {\n          return '';\n        }\n    }\n  };\n  UrlPattern = function(arg1, arg2) {\n    var groupCount, options, parsed, parser, withoutWhitespace;\n    if (arg1 instanceof UrlPattern) {\n      this.isRegex = arg1.isRegex;\n      this.regex = arg1.regex;\n      this.ast = arg1.ast;\n      this.names = arg1.names;\n      return;\n    }\n    this.isRegex = arg1 instanceof RegExp;\n    if (!(('string' === typeof arg1) || this.isRegex)) {\n      throw new TypeError('argument must be a regex or a string');\n    }\n    if (this.isRegex) {\n      this.regex = arg1;\n      if (arg2 != null) {\n        if (!Array.isArray(arg2)) {\n          throw new Error('if first argument is a regex the second argument may be an array of group names but you provided something else');\n        }\n        groupCount = regexGroupCount(this.regex);\n        if (arg2.length !== groupCount) {\n          throw new Error(\"regex contains \" + groupCount + \" groups but array of group names contains \" + arg2.length);\n        }\n        this.names = arg2;\n      }\n      return;\n    }\n    if (arg1 === '') {\n      throw new Error('argument must not be the empty string');\n    }\n    withoutWhitespace = arg1.replace(/\\s+/g, '');\n    if (withoutWhitespace !== arg1) {\n      throw new Error('argument must not contain whitespace');\n    }\n    options = {\n      escapeChar: (arg2 != null ? arg2.escapeChar : void 0) || defaultOptions.escapeChar,\n      segmentNameStartChar: (arg2 != null ? arg2.segmentNameStartChar : void 0) || defaultOptions.segmentNameStartChar,\n      segmentNameCharset: (arg2 != null ? arg2.segmentNameCharset : void 0) || defaultOptions.segmentNameCharset,\n      segmentValueCharset: (arg2 != null ? arg2.segmentValueCharset : void 0) || defaultOptions.segmentValueCharset,\n      optionalSegmentStartChar: (arg2 != null ? arg2.optionalSegmentStartChar : void 0) || defaultOptions.optionalSegmentStartChar,\n      optionalSegmentEndChar: (arg2 != null ? arg2.optionalSegmentEndChar : void 0) || defaultOptions.optionalSegmentEndChar,\n      wildcardChar: (arg2 != null ? arg2.wildcardChar : void 0) || defaultOptions.wildcardChar\n    };\n    parser = newParser(options);\n    parsed = parser.pattern(arg1);\n    if (parsed == null) {\n      throw new Error(\"couldn't parse pattern\");\n    }\n    if (parsed.rest !== '') {\n      throw new Error(\"could only partially parse pattern\");\n    }\n    this.ast = parsed.value;\n    this.regex = new RegExp(astNodeToRegexString(this.ast, options.segmentValueCharset));\n    this.names = astNodeToNames(this.ast);\n  };\n  UrlPattern.prototype.match = function(url) {\n    var groups, match;\n    match = this.regex.exec(url);\n    if (match == null) {\n      return null;\n    }\n    groups = match.slice(1);\n    if (this.names) {\n      return keysAndValuesToObject(this.names, groups);\n    } else {\n      return groups;\n    }\n  };\n  UrlPattern.prototype.stringify = function(params) {\n    if (params == null) {\n      params = {};\n    }\n    if (this.isRegex) {\n      throw new Error(\"can't stringify patterns generated from a regex\");\n    }\n    if (params !== Object(params)) {\n      throw new Error(\"argument must be an object or undefined\");\n    }\n    return stringify(this.ast, params, {});\n  };\n  UrlPattern.escapeForRegex = escapeForRegex;\n  UrlPattern.concatMap = concatMap;\n  UrlPattern.stringConcatMap = stringConcatMap;\n  UrlPattern.regexGroupCount = regexGroupCount;\n  UrlPattern.keysAndValuesToObject = keysAndValuesToObject;\n  UrlPattern.P = P;\n  UrlPattern.newParser = newParser;\n  UrlPattern.defaultOptions = defaultOptions;\n  UrlPattern.astNodeToRegexString = astNodeToRegexString;\n  UrlPattern.astNodeToNames = astNodeToNames;\n  UrlPattern.getParam = getParam;\n  UrlPattern.astNodeContainsSegmentsForProvidedParams = astNodeContainsSegmentsForProvidedParams;\n  UrlPattern.stringify = stringify;\n  return UrlPattern;\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","module.exports={\n  \"name\": \"kinvey-angular-sdk\",\n  \"version\": \"3.0.0-beta.12\",\n  \"description\": \"Kinvey JavaScript SDK for AngularJS applications.\",\n  \"homepage\": \"http://www.kinvey.com\",\n  \"bugs\": {\n    \"url\": \"http://support.kinvey.com\"\n  },\n  \"licenses\": [\n    {\n      \"type\": \"Apache-2.0\",\n      \"url\": \"https://raw.github.com/Kinvey/kinvey-angular-sdk/master/LICENSE\"\n    }\n  ],\n  \"author\": \"Kinvey, Inc.\",\n  \"contributors\": [\n    \"Thomas Conner <thomas@kinvey.com>\"\n  ],\n  \"main\": \"./dist/kinvey.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git@github.com:Kinvey/kinvey-angular-sdk\"\n  },\n  \"scripts\": {},\n  \"dependencies\": {\n    \"kinvey-javascript-sdk-core\": \"3.0.0-beta.13\",\n    \"lodash\": \"^4.3.0\"\n  },\n  \"devDependencies\": {\n    \"babel-eslint\": \"6.0.0-beta.6\",\n    \"babel-preset-es2015\": \"^6.0.0\",\n    \"babel-preset-stage-2\": \"^6.0.15\",\n    \"babelify\": \"^7.2.0\",\n    \"browserify\": \"^13.0.0\",\n    \"del\": \"^2.0.2\",\n    \"dotenv\": \"^2.0.0\",\n    \"envify\": \"^3.4.0\",\n    \"eslint-config-airbnb\": \"^6.0.0\",\n    \"eslint-plugin-react\": \"^4.2.3\",\n    \"exorcist\": \"^0.4.0\",\n    \"gulp\": \"^3.9.0\",\n    \"gulp-bump\": \"^1.0.0\",\n    \"gulp-eslint\": \"^2.0.0\",\n    \"gulp-git\": \"^1.7.0\",\n    \"gulp-if\": \"^2.0.0\",\n    \"gulp-plumber\": \"^1.0.1\",\n    \"gulp-prompt\": \"^0.1.2\",\n    \"gulp-rename\": \"^1.2.2\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^1.5.1\",\n    \"gulp-util\": \"^3.0.6\",\n    \"run-sequence\": \"^1.1.5\",\n    \"semver-regex\": \"^1.0.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"vinyl-transform\": \"^1.0.0\"\n  },\n  \"engines\": {\n    \"node\": \">=4.0\"\n  },\n  \"keywords\": [\n    \"Kinvey\",\n    \"JavaScript\",\n    \"Angular\"\n  ]\n}\n","import packageJSON from '../package.json';\n\n/**\n * @private\n */\nexport class DeviceAdapter {\n  toJSON() {\n    const userAgent = global.navigator.userAgent.toLowerCase();\n    const rChrome = /(chrome)\\/([\\w]+)/;\n    const rFirefox = /(firefox)\\/([\\w.]+)/;\n    const rIE = /(msie) ([\\w.]+)/i;\n    const rOpera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/;\n    const rSafari = /(safari)\\/([\\w.]+)/;\n    const browser = rChrome.exec(userAgent) ||\n                    rFirefox.exec(userAgent) ||\n                    rIE.exec(userAgent) ||\n                    rOpera.exec(userAgent) ||\n                    rSafari.exec(userAgent) ||\n                    [];\n\n    return {\n      environment: 'angular',\n      library: {\n        name: 'angular',\n        version: global.angular.version.full\n      },\n      os: {\n        name: browser[1],\n        version: browser[2]\n      },\n      sdk: {\n        name: packageJSON.name,\n        version: packageJSON.version\n      }\n    };\n  }\n}\n","import { KinveyMiddleware } from 'kinvey-javascript-sdk-core/src/rack/middleware';\nconst $injector = angular.injector(['ng']);\n\nexport class HttpMiddleware extends KinveyMiddleware {\n  constructor() {\n    super('Kinvey Angular Http Middleware');\n    this.$http = $injector.get('$http');\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const promise = this.$http({\n        url: request.url,\n        method: request.method,\n        headers: request.headers,\n        data: request.data\n      }).then(response => {\n        request.response = {\n          statusCode: response.status,\n          headers: response.headers(),\n          data: response.data\n        };\n\n        return request;\n      }).catch(response => {\n        request.response = {\n          statusCode: response.status,\n          headers: response.headers(),\n          data: response.data\n        };\n\n        return request;\n      });\n      return promise;\n    });\n  }\n}\n","import { KinveyProvider } from './provider';\nconst ngKinvey = angular.module('kinvey', []);\nngKinvey.provider('$kinvey', KinveyProvider);\n\nconst Kinvey = {\n  name: 'kinvey'\n};\n\n// Export\nmodule.exports = Kinvey;\n","/**\n * @private\n */\nexport class PopupAdapter {\n  open() {\n    const promise = new Promise((resolve, reject) => {\n      this.popup = global.open(this.url, '_blank', 'toolbar=no,location=no');\n\n      if (this.popup) {\n        this.interval = setInterval(() => {\n          if (this.popup.closed) {\n            this.closeHandler();\n          } else {\n            try {\n              this.loadHandler({\n                url: this.popup.location.href\n              });\n            } catch (e) {\n              // catch any errors due to cross domain issues\n            }\n          }\n        }, 100);\n      } else {\n        return reject(new Error('The popup was blocked.'));\n      }\n\n      return resolve(this);\n    });\n\n    return promise;\n  }\n\n  close() {\n    const promise = new Promise(resolve => {\n      this.popup.close();\n      resolve();\n    });\n    return promise;\n  }\n\n  loadHandler(event) {\n    this.emit('loaded', event.url);\n  }\n\n  clickHandler() {\n    this.close();\n  }\n\n  closeHandler() {\n    clearTimeout(this.interval);\n    this.emit('closed');\n  }\n}\n","import { Kinvey } from 'kinvey-javascript-sdk-core';\nimport { NetworkRack } from 'kinvey-javascript-sdk-core/src/rack/rack';\nimport { SerializeMiddleware } from 'kinvey-javascript-sdk-core/src/rack/middleware/serialize';\nimport { HttpMiddleware } from './http';\nimport { Popup } from 'kinvey-javascript-sdk-core/src/utils/popup';\nimport { PopupAdapter } from './popup';\nimport { Device } from 'kinvey-javascript-sdk-core/src/utils/device';\nimport { DeviceAdapter } from './device';\n\nexport class KinveyProvider {\n  constructor() {\n    // Use Http middleware after the Serialize middleware\n    const networkRack = NetworkRack.sharedInstance();\n    networkRack.useAfter(SerializeMiddleware, new HttpMiddleware());\n\n    // Use Device Adapter\n    Device.use(new DeviceAdapter());\n\n    // Use Popup Adapter\n    Popup.use(new PopupAdapter());\n  }\n\n  init(options = {}) {\n    return Kinvey.init(options);\n  }\n\n  $get() {\n    return Kinvey;\n  }\n}\n"],"sourceRoot":"/source/"}