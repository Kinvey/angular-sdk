/**
 * kinvey-angular-sdk v3.1.0
 * Kinvey JavaScript SDK for AngularJS applications.
 * http://www.kinvey.com
 *
 * Copyright (c) 2016, Kinvey.
 * All rights reserved.
 *
 * Released under the Apache-2.0 license.
 */
!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("angular")):"function"==typeof define&&define.amd?define(["angular"],factory):"object"==typeof exports?exports.Kinvey=factory(require("angular")):root.Kinvey=factory(root.angular)}(this,function(__WEBPACK_EXTERNAL_MODULE_456__){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _ngKinvey=__webpack_require__(2),_ngKinvey2=_interopRequireDefault(_ngKinvey);module.exports=_ngKinvey2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_kinvey=__webpack_require__(3),_kinvey2=_interopRequireDefault(_kinvey),_angular=__webpack_require__(456),_angular2=_interopRequireDefault(_angular),KinveyProvider=function(){function KinveyProvider(){_classCallCheck(this,KinveyProvider)}return _createClass(KinveyProvider,[{key:"init",value:function(options){return _kinvey2.default.init(options)}},{key:"$get",value:function(){return _kinvey2.default}}]),KinveyProvider}(),ngKinvey=_angular2.default.module("kinvey",[]);ngKinvey.provider("$kinvey",KinveyProvider),exports.default=ngKinvey},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _kinveyPhonegapSdk=__webpack_require__(4),_kinveyPhonegapSdk2=_interopRequireDefault(_kinveyPhonegapSdk);exports.default=_kinveyPhonegapSdk2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _kinvey=__webpack_require__(5),_kinvey2=_interopRequireDefault(_kinvey);exports.default=_kinvey2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_kinveyJavascriptSdkCore=__webpack_require__(6),_push=__webpack_require__(454),_push2=_interopRequireDefault(_push),Kinvey=function(_CoreKinvey){function Kinvey(){return _classCallCheck(this,Kinvey),_possibleConstructorReturn(this,(Kinvey.__proto__||Object.getPrototypeOf(Kinvey)).apply(this,arguments))}return _inherits(Kinvey,_CoreKinvey),_createClass(Kinvey,null,[{key:"init",value:function(options){var client=_get(Kinvey.__proto__||Object.getPrototypeOf(Kinvey),"init",this).call(this,options);return this.Push=new _push2.default,client}}]),Kinvey}(_kinveyJavascriptSdkCore.Kinvey);exports.default=Kinvey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _datastore=__webpack_require__(7);Object.keys(_datastore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _datastore[key]}})});var _entity=__webpack_require__(429);Object.keys(_entity).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _entity[key]}})});var _request=__webpack_require__(11);Object.keys(_request).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _request[key]}})});var _social=__webpack_require__(410);Object.keys(_social).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _social[key]}})});var _utils=__webpack_require__(162);Object.keys(_utils).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _utils[key]}})});var _aggregation=__webpack_require__(451);Object.keys(_aggregation).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _aggregation[key]}})});var _client=__webpack_require__(161);Object.keys(_client).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _client[key]}})});var _endpoint=__webpack_require__(452);Object.keys(_endpoint).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _endpoint[key]}})});var _errors=__webpack_require__(14);Object.keys(_errors).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _errors[key]}})});var _kinvey=__webpack_require__(453);Object.keys(_kinvey).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _kinvey[key]}})});var _query=__webpack_require__(421);Object.keys(_query).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _query[key]}})}),exports.default=_kinvey.Kinvey},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _cachestore=__webpack_require__(8);Object.keys(_cachestore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _cachestore[key]}})});var _datastore=__webpack_require__(447);Object.keys(_datastore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _datastore[key]}})});var _filestore=__webpack_require__(449);Object.keys(_filestore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _filestore[key]}})});var _networkstore=__webpack_require__(10);Object.keys(_networkstore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _networkstore[key]}})});var _sync=__webpack_require__(428);Object.keys(_sync).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _sync[key]}})});var _syncstore=__webpack_require__(448);Object.keys(_syncstore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _syncstore[key]}})});var _userstore=__webpack_require__(450);Object.keys(_userstore).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _userstore[key]}})})},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CacheStore=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_networkstore=__webpack_require__(10),_request=__webpack_require__(11),_errors=__webpack_require__(14),_query5=__webpack_require__(421),_sync=__webpack_require__(428),_entity=__webpack_require__(429),_utils=__webpack_require__(162),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_differenceBy=__webpack_require__(434),_differenceBy2=_interopRequireDefault(_differenceBy),_keyBy=__webpack_require__(242),_keyBy2=_interopRequireDefault(_keyBy),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_filter=__webpack_require__(440),_filter2=_interopRequireDefault(_filter),_map=__webpack_require__(350),_map2=_interopRequireDefault(_map),_xorWith=__webpack_require__(443),_xorWith2=_interopRequireDefault(_xorWith),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id";exports.CacheStore=function(_NetworkStore){function CacheStore(collection){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,CacheStore);var _this=_possibleConstructorReturn(this,(CacheStore.__proto__||Object.getPrototypeOf(CacheStore)).call(this,collection,options));return _this.ttl=options.ttl||void 0,_this.syncManager=new _sync.SyncManager(_this.collection,options),_this}return _inherits(CacheStore,_NetworkStore),_createClass(CacheStore,[{key:"find",value:function(query){var _this2=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(observer){var cacheEntities,request,response,syncCount,networkEntities,removedEntities,removedIds,removeQuery,saveRequest;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,cacheEntities=[],_context.prev=2,!query||query instanceof _query5.Query){_context.next=5;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 5:return request=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout}),_context.next=8,request.execute();case 8:response=_context.sent,cacheEntities=response.data,observer.next(cacheEntities),_context.next=15;break;case 13:_context.prev=13,_context.t0=_context.catch(2);case 15:if(_this2.syncAutomatically!==!0){_context.next=39;break}return _context.next=18,_this2.pendingSyncCount(null,options);case 18:if(syncCount=_context.sent,!(syncCount>0)){_context.next=25;break}return _context.next=22,_this2.push(null,options);case 22:return _context.next=24,_this2.pendingSyncCount(null,options);case 24:syncCount=_context.sent;case 25:if(!(syncCount>0)){_context.next=27;break}throw new _errors.KinveyError("Unable to load data from the network."+(" There are "+syncCount+" entities that need")+" to be synced before data is loaded from the network.");case 27:return _context.next=29,_get(CacheStore.prototype.__proto__||Object.getPrototypeOf(CacheStore.prototype),"find",_this2).call(_this2,query,options).toPromise();case 29:return networkEntities=_context.sent,removedEntities=(0,_differenceBy2.default)(cacheEntities,networkEntities,idAttribute),removedIds=Object.keys((0,_keyBy2.default)(removedEntities,idAttribute)),removeQuery=(new _query5.Query).contains(idAttribute,removedIds),_context.next=35,_this2.clear(removeQuery,options);case 35:return saveRequest=new _request.CacheRequest({method:_request.RequestMethod.PUT,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname,query:options.query}),properties:options.properties,body:networkEntities,timeout:options.timeout}),_context.next=38,saveRequest.execute();case 38:observer.next(networkEntities);case 39:_context.next=44;break;case 41:return _context.prev=41,_context.t1=_context.catch(0),_context.abrupt("return",observer.error(_context.t1));case 44:return _context.abrupt("return",observer.complete());case 45:case"end":return _context.stop()}},_callee,_this2,[[0,41],[2,13]])}));return function(_x3){return _ref.apply(this,arguments)}}());return stream}},{key:"findById",value:function(id){var _this3=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(observer){var request,response,cacheEntity,syncCount,networkEntity,saveRequest;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,id){_context2.next=5;break}observer.next(void 0),_context2.next=35;break;case 5:return _context2.prev=5,request=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this3.client.protocol,host:_this3.client.host,pathname:_this3.pathname+"/"+id,query:options.query}),properties:options.properties,timeout:options.timeout}),_context2.next=9,request.execute();case 9:response=_context2.sent,cacheEntity=response.data,observer.next(cacheEntity),_context2.next=16;break;case 14:_context2.prev=14,_context2.t0=_context2.catch(5);case 16:if(_this3.syncAutomatically!==!0){_context2.next=35;break}return _context2.next=19,_this3.pendingSyncCount(null,options);case 19:if(syncCount=_context2.sent,!(syncCount>0)){_context2.next=26;break}return _context2.next=23,_this3.push(null,options);case 23:return _context2.next=25,_this3.pendingSyncCount(null,options);case 25:syncCount=_context2.sent;case 26:if(!(syncCount>0)){_context2.next=28;break}throw new _errors.KinveyError("Unable to load data from the network."+(" There are "+syncCount+" entities that need")+" to be synced before data is loaded from the network.");case 28:return _context2.next=30,_get(CacheStore.prototype.__proto__||Object.getPrototypeOf(CacheStore.prototype),"findById",_this3).call(_this3,id,options).toPromise();case 30:return networkEntity=_context2.sent,saveRequest=new _request.CacheRequest({method:_request.RequestMethod.PUT,url:_url2.default.format({protocol:_this3.client.protocol,host:_this3.client.host,pathname:_this3.pathname,query:options.query}),properties:options.properties,body:networkEntity,timeout:options.timeout}),_context2.next=34,saveRequest.execute();case 34:observer.next(networkEntity);case 35:_context2.next=40;break;case 37:return _context2.prev=37,_context2.t1=_context2.catch(0),_context2.abrupt("return",observer.error(_context2.t1));case 40:return _context2.abrupt("return",observer.complete());case 41:case"end":return _context2.stop()}},_callee2,_this3,[[0,37],[5,14]])}));return function(_x5){return _ref2.apply(this,arguments)}}());return stream}},{key:"count",value:function(query){var _this4=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(observer){var request,response,data,syncCount,networkCount;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,!query||query instanceof _query5.Query){_context3.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return _context3.prev=3,request=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this4.client.protocol,host:_this4.client.host,pathname:_this4.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout}),_context3.next=7,request.execute();case 7:response=_context3.sent,data=response.data,observer.next(data?data.length:0),_context3.next=14;break;case 12:_context3.prev=12,_context3.t0=_context3.catch(3);case 14:if(_this4.syncAutomatically!==!0){_context3.next=30;break}return _context3.next=17,_this4.pendingSyncCount(null,options);case 17:if(syncCount=_context3.sent,!(syncCount>0)){_context3.next=24;break}return _context3.next=21,_this4.push(null,options);case 21:return _context3.next=23,_this4.pendingSyncCount(null,options);case 23:syncCount=_context3.sent;case 24:if(!(syncCount>0)){_context3.next=26;break}throw new _errors.KinveyError("Unable to load data from the network."+(" There are "+syncCount+" entities that need")+" to be synced before data is loaded from the network.");case 26:return _context3.next=28,_get(CacheStore.prototype.__proto__||Object.getPrototypeOf(CacheStore.prototype),"count",_this4).call(_this4,query,options).toPromise();case 28:networkCount=_context3.sent,observer.next(networkCount);case 30:_context3.next=35;break;case 32:return _context3.prev=32,_context3.t1=_context3.catch(0),_context3.abrupt("return",observer.error(_context3.t1));case 35:return _context3.abrupt("return",observer.complete());case 36:case"end":return _context3.stop()}},_callee3,_this4,[[0,32],[3,12]])}));return function(_x7){return _ref3.apply(this,arguments)}}());return stream}},{key:"create",value:function(data){var _this5=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(observer){var singular,request,response,ids,query,results,entities;return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(_context4.prev=0,data){_context4.next=5;break}observer.next(null),_context4.next=25;break;case 5:return singular=!1,(0,_isArray2.default)(data)||(singular=!0,data=[data]),request=new _request.CacheRequest({method:_request.RequestMethod.POST,url:_url2.default.format({protocol:_this5.client.protocol,host:_this5.client.host,pathname:_this5.pathname,query:options.query}),properties:options.properties,body:data,timeout:options.timeout}),_context4.next=10,request.execute();case 10:return response=_context4.sent,data=response.data,_context4.next=14,_this5.syncManager.addCreateOperation(data,options);case 14:if(_this5.syncAutomatically!==!0){_context4.next=24;break}return ids=Object.keys((0,_keyBy2.default)(data,idAttribute)),query=(new _query5.Query).contains("entityId",ids),_context4.next=19,_this5.push(query,options);case 19:results=_context4.sent,entities=(0,_map2.default)(results,function(result){return result.entity}),observer.next(singular?entities[0]:entities),_context4.next=25;break;case 24:observer.next(singular?data[0]:data);case 25:_context4.next=30;break;case 27:return _context4.prev=27,_context4.t0=_context4.catch(0),_context4.abrupt("return",observer.error(_context4.t0));case 30:return _context4.abrupt("return",observer.complete());case 31:case"end":return _context4.stop()}},_callee4,_this5,[[0,27]])}));return function(_x9){return _ref4.apply(this,arguments)}}());return stream.toPromise()}},{key:"update",value:function(data){var _this6=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(observer){var singular,request,response,ids,query,results,entities;return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(_context5.prev=0,data){_context5.next=5;break}observer.next(null),_context5.next=25;break;case 5:return singular=!1,(0,_isArray2.default)(data)||(singular=!0,data=[data]),request=new _request.CacheRequest({method:_request.RequestMethod.PUT,url:_url2.default.format({protocol:_this6.client.protocol,host:_this6.client.host,pathname:_this6.pathname,query:options.query}),properties:options.properties,body:data,timeout:options.timeout}),_context5.next=10,request.execute();case 10:return response=_context5.sent,data=response.data,_context5.next=14,_this6.syncManager.addUpdateOperation(data,options);case 14:if(_this6.syncAutomatically!==!0){_context5.next=24;break}return ids=Object.keys((0,_keyBy2.default)(data,idAttribute)),query=(new _query5.Query).contains("entityId",ids),_context5.next=19,_this6.push(query,options);case 19:results=_context5.sent,entities=(0,_map2.default)(results,function(result){return result.entity}),observer.next(singular?entities[0]:entities),_context5.next=25;break;case 24:observer.next(singular?data[0]:data);case 25:_context5.next=30;break;case 27:return _context5.prev=27,_context5.t0=_context5.catch(0),_context5.abrupt("return",observer.error(_context5.t0));case 30:return _context5.abrupt("return",observer.complete());case 31:case"end":return _context5.stop()}},_callee5,_this6,[[0,27]])}));return function(_x11){return _ref5.apply(this,arguments)}}());return stream.toPromise()}},{key:"remove",value:function(query){var _this7=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref6=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee6(observer){var fetchRequest,fetchResponse,entities,removeRequest,removeResponse,localEntities,_query,syncEntities,ids,_query2;return _regeneratorRuntime2.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(_context6.prev=0,!query||query instanceof _query5.Query){_context6.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return fetchRequest=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this7.client.protocol,host:_this7.client.host,pathname:_this7.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout}),_context6.next=6,fetchRequest.execute();case 6:return fetchResponse=_context6.sent,entities=fetchResponse.data,removeRequest=new _request.CacheRequest({method:_request.RequestMethod.DELETE,url:_url2.default.format({protocol:_this7.client.protocol,host:_this7.client.host,pathname:_this7.pathname,query:options.query}),properties:options.properties,body:entities,timeout:options.timeout}),_context6.next=11,removeRequest.execute();case 11:if(removeResponse=_context6.sent,entities=removeResponse.data,!(entities&&entities.length>0)){_context6.next=21;break}return localEntities=(0,_filter2.default)(entities,function(entity){var metadata=new _entity.Metadata(entity);return metadata.isLocal()}),_query=(new _query5.Query).contains("entityId",Object.keys((0,_keyBy2.default)(localEntities,idAttribute))),_context6.next=18,_this7.clearSync(_query,options);case 18:return syncEntities=(0,_xorWith2.default)(entities,localEntities,function(entity,localEntity){return entity[idAttribute]===localEntity[idAttribute]}),_context6.next=21,_this7.syncManager.addDeleteOperation(syncEntities,options);case 21:if(_this7.syncAutomatically!==!0){_context6.next=26;break}return ids=Object.keys((0,_keyBy2.default)(entities,idAttribute)),_query2=(new _query5.Query).contains("entityId",ids),_context6.next=26,_this7.push(_query2,options);case 26:observer.next(entities),_context6.next=32;break;case 29:return _context6.prev=29,_context6.t0=_context6.catch(0),_context6.abrupt("return",observer.error(_context6.t0));case 32:return _context6.abrupt("return",observer.complete());case 33:case"end":return _context6.stop()}},_callee6,_this7,[[0,29]])}));return function(_x13){return _ref6.apply(this,arguments)}}());return stream.toPromise()}},{key:"removeById",value:function(id){var _this8=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref7=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee7(observer){var request,response,entity,metadata,query,_query3;return _regeneratorRuntime2.default.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.prev=0,request=new _request.CacheRequest({method:_request.RequestMethod.DELETE,url:_url2.default.format({protocol:_this8.client.protocol,host:_this8.client.host,pathname:_this8.pathname+"/"+id,query:options.query}),properties:options.properties,authType:_request.AuthType.Default,timeout:options.timeout}),_context7.next=4,request.execute();case 4:if(response=_context7.sent,entity=response.data,!entity){_context7.next=17;break}if(metadata=new _entity.Metadata(entity),!metadata.isLocal()){_context7.next=15;break}return query=new _query5.Query,query.equalTo("entityId",entity[idAttribute]),_context7.next=13,_this8.clearSync(query,options);case 13:_context7.next=17;break;case 15:return _context7.next=17,_this8.syncManager.addDeleteOperation(entity,options);case 17:if(_this8.syncAutomatically!==!0){_context7.next=21;break}return _query3=(new _query5.Query).equalTo("entityId",entity[idAttribute]),_context7.next=21,_this8.push(_query3,options);case 21:observer.next(entity),_context7.next=27;break;case 24:return _context7.prev=24,_context7.t0=_context7.catch(0),_context7.abrupt("return",observer.error(_context7.t0));case 27:return _context7.abrupt("return",observer.complete());case 28:case"end":return _context7.stop()}},_callee7,_this8,[[0,24]])}));return function(_x15){return _ref7.apply(this,arguments)}}());return stream.toPromise()}},{key:"clear",value:function(query){var _this9=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref8=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee8(observer){var fetchRequest,fetchResponse,entities,removeRequest,removeResponse,_query4;return _regeneratorRuntime2.default.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(_context8.prev=0,!query||query instanceof _query5.Query){_context8.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return fetchRequest=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this9.client.protocol,host:_this9.client.host,pathname:_this9.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout}),_context8.next=6,fetchRequest.execute();case 6:return fetchResponse=_context8.sent,entities=fetchResponse.data,removeRequest=new _request.CacheRequest({method:_request.RequestMethod.DELETE,url:_url2.default.format({protocol:_this9.client.protocol,host:_this9.client.host,pathname:_this9.pathname,query:options.query}),properties:options.properties,body:entities,timeout:options.timeout}),_context8.next=11,removeRequest.execute();case 11:if(removeResponse=_context8.sent,entities=removeResponse.data,!(entities&&entities.length>0)){_context8.next=17;break}return _query4=(new _query5.Query).contains("entityId",Object.keys((0,_keyBy2.default)(entities,idAttribute))),_context8.next=17,_this9.clearSync(_query4,options);case 17:observer.next(entities),_context8.next=23;break;case 20:return _context8.prev=20,_context8.t0=_context8.catch(0),_context8.abrupt("return",observer.error(_context8.t0));case 23:return _context8.abrupt("return",observer.complete());case 24:case"end":return _context8.stop()}},_callee8,_this9,[[0,20]])}));return function(_x17){return _ref8.apply(this,arguments)}}());return stream.toPromise()}},{key:"pendingSyncCount",value:function(query,options){return this.syncManager.count(query,options)}},{key:"syncCount",value:function(query,options){return this.pendingSyncCount(query,options)}},{key:"pendingSyncEntities",value:function(query,options){return this.syncManager.find(query,options)}},{key:"push",value:function(query,options){return this.syncManager.push(query,options)}},{key:"pull",value:function(){function pull(_x18,_x19){return _ref9.apply(this,arguments)}var _ref9=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee9(query){var entities,saveRequest,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];
return _regeneratorRuntime2.default.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,this.syncManager.pull(query,options);case 2:return entities=_context9.sent,_context9.next=5,this.clear(query,options);case 5:return saveRequest=new _request.CacheRequest({method:_request.RequestMethod.PUT,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname,query:options.query}),properties:options.properties,body:entities,timeout:options.timeout}),_context9.next=8,saveRequest.execute();case 8:return _context9.abrupt("return",entities);case 9:case"end":return _context9.stop()}},_callee9,this)}));return pull}()},{key:"sync",value:function(query,options){return this.syncManager.sync(query,options)}},{key:"clearSync",value:function(query,options){return this.syncManager.clear(query,options)}},{key:"purge",value:function(query,options){return this.clearSync(query,options)}},{key:"syncAutomatically",get:function(){return!0}}]),CacheStore}(_networkstore.NetworkStore)}).call(exports,__webpack_require__(9))},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkStore=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_request=__webpack_require__(11),_errors=__webpack_require__(14),_query=__webpack_require__(421),_client=__webpack_require__(161),_utils=__webpack_require__(162),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_map=__webpack_require__(350),_map2=_interopRequireDefault(_map),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",appdataNamespace=process&&process.env&&process.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata";exports.NetworkStore=function(){function NetworkStore(collection){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(_classCallCheck(this,NetworkStore),collection&&!(0,_isString2.default)(collection))throw new _errors.KinveyError("Collection must be a string.");this.collection=collection,this.client=options.client||_client.Client.sharedInstance(),this.useDeltaFetch=options.useDeltaFetch===!0}return _createClass(NetworkStore,[{key:"find",value:function(query){var _this=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],useDeltaFetch=options.useDeltaFetch||this.useDeltaFetch,stream=_utils.KinveyObservable.create(function(){var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(observer){var config,request,response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!query||query instanceof _query.Query){_context.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return config={method:_request.RequestMethod.GET,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this.client.protocol,host:_this.client.host,pathname:_this.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout,client:_this.client},request=new _request.KinveyRequest(config),useDeltaFetch===!0&&(request=new _request.DeltaFetchRequest(config)),_context.next=8,request.execute();case 8:response=_context.sent,observer.next(response.data),_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context.catch(0),_context.abrupt("return",observer.error(_context.t0));case 15:return _context.abrupt("return",observer.complete());case 16:case"end":return _context.stop()}},_callee,_this,[[0,12]])}));return function(_x3){return _ref.apply(this,arguments)}}());return stream}},{key:"findById",value:function(id){var _this2=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],useDeltaFetch=options.useDeltaFetch||this.useDeltaFetch,stream=_utils.KinveyObservable.create(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(observer){var config,request,response,data;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,id){_context2.next=5;break}observer.next(void 0),_context2.next=13;break;case 5:return config={method:_request.RequestMethod.GET,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname+"/"+id,query:options.query}),properties:options.properties,timeout:options.timeout,client:_this2.client},request=new _request.KinveyRequest(config),useDeltaFetch===!0&&(request=new _request.DeltaFetchRequest(config)),_context2.next=10,request.execute();case 10:response=_context2.sent,data=response.data,observer.next(data);case 13:_context2.next=18;break;case 15:return _context2.prev=15,_context2.t0=_context2.catch(0),_context2.abrupt("return",observer.error(_context2.t0));case 18:return _context2.abrupt("return",observer.complete());case 19:case"end":return _context2.stop()}},_callee2,_this2,[[0,15]])}));return function(_x5){return _ref2.apply(this,arguments)}}());return stream}},{key:"count",value:function(query){var _this3=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(observer){var request,response,data;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,!query||query instanceof _query.Query){_context3.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return request=new _request.KinveyRequest({method:_request.RequestMethod.GET,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this3.client.protocol,host:_this3.client.host,pathname:_this3.pathname+"/_count",query:options.query}),properties:options.properties,query:query,timeout:options.timeout,client:_this3.client}),_context3.next=6,request.execute();case 6:response=_context3.sent,data=response.data,observer.next(data?data.count:0),_context3.next=14;break;case 11:return _context3.prev=11,_context3.t0=_context3.catch(0),_context3.abrupt("return",observer.error(_context3.t0));case 14:return _context3.abrupt("return",observer.complete());case 15:case"end":return _context3.stop()}},_callee3,_this3,[[0,11]])}));return function(_x7){return _ref3.apply(this,arguments)}}());return stream}},{key:"create",value:function(data){var _this4=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(observer){var singular,responses;return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(_context4.prev=0,data){_context4.next=5;break}observer.next(null),_context4.next=12;break;case 5:return singular=!1,(0,_isArray2.default)(data)||(singular=!0,data=[data]),_context4.next=9,_promise2.default.all((0,_map2.default)(data,function(entity){var request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this4.client.protocol,host:_this4.client.host,pathname:_this4.pathname,query:options.query}),properties:options.properties,data:entity,timeout:options.timeout,client:_this4.client});return request.execute()}));case 9:responses=_context4.sent,data=(0,_map2.default)(responses,function(response){return response.data}),observer.next(singular?data[0]:data);case 12:_context4.next=17;break;case 14:return _context4.prev=14,_context4.t0=_context4.catch(0),_context4.abrupt("return",observer.error(_context4.t0));case 17:return _context4.abrupt("return",observer.complete());case 18:case"end":return _context4.stop()}},_callee4,_this4,[[0,14]])}));return function(_x9){return _ref4.apply(this,arguments)}}());return stream.toPromise()}},{key:"update",value:function(data){var _this5=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(observer){var singular,responses;return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(_context5.prev=0,data){_context5.next=5;break}observer.next(null),_context5.next=12;break;case 5:return singular=!1,(0,_isArray2.default)(data)||(singular=!0,data=[data]),_context5.next=9,_promise2.default.all((0,_map2.default)(data,function(entity){var request=new _request.KinveyRequest({method:_request.RequestMethod.PUT,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this5.client.protocol,host:_this5.client.host,pathname:_this5.pathname+"/"+entity[idAttribute],query:options.query}),properties:options.properties,data:entity,timeout:options.timeout,client:_this5.client});return request.execute()}));case 9:responses=_context5.sent,data=(0,_map2.default)(responses,function(response){return response.data}),observer.next(singular?data[0]:data);case 12:_context5.next=17;break;case 14:return _context5.prev=14,_context5.t0=_context5.catch(0),_context5.abrupt("return",observer.error(_context5.t0));case 17:return _context5.abrupt("return",observer.complete());case 18:case"end":return _context5.stop()}},_callee5,_this5,[[0,14]])}));return function(_x11){return _ref5.apply(this,arguments)}}());return stream.toPromise()}},{key:"save",value:function(data,options){return data[idAttribute]?this.update(data,options):this.create(data,options)}},{key:"remove",value:function(query){var _this6=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref6=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee6(observer){var request,response;return _regeneratorRuntime2.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(_context6.prev=0,!query||query instanceof _query.Query){_context6.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return request=new _request.KinveyRequest({method:_request.RequestMethod.DELETE,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this6.client.protocol,host:_this6.client.host,pathname:_this6.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout,client:_this6.client}),_context6.next=6,request.execute();case 6:response=_context6.sent,observer.next(response.data),_context6.next=13;break;case 10:return _context6.prev=10,_context6.t0=_context6.catch(0),_context6.abrupt("return",observer.error(_context6.t0));case 13:return _context6.abrupt("return",observer.complete());case 14:case"end":return _context6.stop()}},_callee6,_this6,[[0,10]])}));return function(_x13){return _ref6.apply(this,arguments)}}());return stream.toPromise()}},{key:"removeById",value:function(id){var _this7=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref7=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee7(observer){var request,response;return _regeneratorRuntime2.default.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_context7.prev=0,id){_context7.next=5;break}observer.next(void 0),_context7.next=10;break;case 5:return request=new _request.KinveyRequest({method:_request.RequestMethod.DELETE,authType:_request.AuthType.Default,url:_url2.default.format({protocol:_this7.client.protocol,host:_this7.client.host,pathname:_this7.pathname+"/"+id,query:options.query}),properties:options.properties,timeout:options.timeout}),_context7.next=8,request.execute();case 8:response=_context7.sent,observer.next(response.data);case 10:_context7.next=15;break;case 12:return _context7.prev=12,_context7.t0=_context7.catch(0),_context7.abrupt("return",observer.error(_context7.t0));case 15:return _context7.abrupt("return",observer.complete());case 16:case"end":return _context7.stop()}},_callee7,_this7,[[0,12]])}));return function(_x15){return _ref7.apply(this,arguments)}}());return stream.toPromise()}},{key:"subscribe",value:function(onNext,onError,onComplete){return this.liveStream.subscribe(onNext,onError,onComplete)}},{key:"pathname",get:function(){var pathname="/"+appdataNamespace+"/"+this.client.appKey;return this.collection&&(pathname=pathname+"/"+this.collection),pathname}},{key:"liveStream",get:function(){var _this8=this;if("undefined"==typeof EventSource)throw new _errors.KinveyError("Your environment does not support server-sent events.");return this._liveStream||!function(){var source=new EventSource(_url2.default.format({protocol:_this8.client.liveServiceProtocol,host:_this8.client.liveServiceHost,pathname:_this8.pathname}));_this8._liveStream=_utils.KinveyObservable.create(function(){var _ref8=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee8(observer){return _regeneratorRuntime2.default.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return source.onopen=function(event){_utils.Log.info("Subscription to Kinvey Live Service is now open at "+source.url+"."),_utils.Log.info(event)},source.onmessage=function(message){try{observer.next(JSON.parse(message.data))}catch(error){observer.error(error)}},source.onerror=function(error){observer.error(error)},_context8.abrupt("return",function(){observer.complete()});case 4:case"end":return _context8.stop()}},_callee8,_this8)}));return function(_x16){return _ref8.apply(this,arguments)}}()).finally(function(){source.close(),delete _this8._liveStream})}(),this._liveStream}}]),NetworkStore}()}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatusCode=exports.Response=exports.RequestMethod=exports.Properties=exports.NetworkRequest=exports.KinveyResponse=exports.KinveyRequest=exports.Headers=exports.DeltaFetchRequest=exports.CacheRequest=exports.AuthType=void 0;var _cacherequest=__webpack_require__(12),_cacherequest2=_interopRequireDefault(_cacherequest),_deltafetchrequest=__webpack_require__(407),_deltafetchrequest2=_interopRequireDefault(_deltafetchrequest),_headers=__webpack_require__(17),_headers2=_interopRequireDefault(_headers),_kinveyrequest=__webpack_require__(408),_kinveyrequest2=_interopRequireDefault(_kinveyrequest),_kinveyresponse=__webpack_require__(160),_kinveyresponse2=_interopRequireDefault(_kinveyresponse),_networkrequest=__webpack_require__(409),_networkrequest2=_interopRequireDefault(_networkrequest),_request=__webpack_require__(13),_request2=_interopRequireDefault(_request),_response=__webpack_require__(16),_response2=_interopRequireDefault(_response);exports.AuthType=_kinveyrequest.AuthType,exports.CacheRequest=_cacherequest2.default,exports.DeltaFetchRequest=_deltafetchrequest2.default,exports.Headers=_headers2.default,exports.KinveyRequest=_kinveyrequest2.default,exports.KinveyResponse=_kinveyresponse2.default,exports.NetworkRequest=_networkrequest2.default,exports.Properties=_kinveyrequest.Properties,exports.RequestMethod=_request.RequestMethod,exports.Response=_response2.default,exports.StatusCode=_response.StatusCode,exports.default=_request2.default},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_set=function set(object,property,value,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);null!==parent&&set(parent,property,value,receiver)}else if("value"in desc&&desc.writable)desc.value=value;else{var setter=desc.set;void 0!==setter&&setter.call(receiver,value)}return value},_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_request=__webpack_require__(13),_request2=_interopRequireDefault(_request),_kinveyresponse=__webpack_require__(160),_kinveyresponse2=_interopRequireDefault(_kinveyresponse),_errors=__webpack_require__(14),_client=__webpack_require__(161),_kinveyJavascriptRack=__webpack_require__(233),_urlPattern=__webpack_require__(405),_urlPattern2=_interopRequireDefault(_urlPattern),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),CacheRequest=function(_Request){function CacheRequest(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,CacheRequest);var _this=_possibleConstructorReturn(this,(CacheRequest.__proto__||Object.getPrototypeOf(CacheRequest)).call(this,options));return options=(0,_assign2.default)({query:null,client:_client.Client.sharedInstance()},options),_this.query=options.query,_this.client=options.client,_this.rack=new _kinveyJavascriptRack.CacheRack,_this}return _inherits(CacheRequest,_Request),_createClass(CacheRequest,[{key:"execute",value:function(){function execute(){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_get(CacheRequest.prototype.__proto__||Object.getPrototypeOf(CacheRequest.prototype),"execute",this).call(this);case 2:if(response=_context.sent,response instanceof _kinveyresponse2.default||(response=new _kinveyresponse2.default({statusCode:response.statusCode,headers:response.headers,data:response.data})),response.isSuccess()){_context.next=6;break}throw response.error;case 6:return this.query&&(response.data=this.query.process(response.data)),_context.abrupt("return",response);case 8:case"end":return _context.stop()}},_callee,this)}));return execute}()},{key:"cancel",value:function(){function cancel(){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(){return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_get(CacheRequest.prototype.__proto__||Object.getPrototypeOf(CacheRequest.prototype),"cancel",this).call(this);case 2:return _context2.abrupt("return",this.rack.cancel());case 3:case"end":return _context2.stop()}},_callee2,this)}));return cancel}()},{key:"toPlainObject",value:function(){var obj=_get(CacheRequest.prototype.__proto__||Object.getPrototypeOf(CacheRequest.prototype),"toPlainObject",this).call(this);return obj.appKey=this.appKey,obj.collection=this.collection,obj.entityId=this.entityId,obj.encryptionKey=this.client?this.client.encryptionKey:void 0,obj}},{key:"url",get:function(){return _get(CacheRequest.prototype.__proto__||Object.getPrototypeOf(CacheRequest.prototype),"url",this)},set:function(urlString){_set(CacheRequest.prototype.__proto__||Object.getPrototypeOf(CacheRequest.prototype),"url",urlString,this);var pathname=global.escape(_url2.default.parse(urlString).pathname),pattern=new _urlPattern2.default("(/:namespace)(/)(:appKey)(/)(:collection)(/)(:entityId)(/)"),_ref3=pattern.match(pathname)||{},appKey=_ref3.appKey,collection=_ref3.collection,entityId=_ref3.entityId;this.appKey=appKey,this.collection=collection,this.entityId=entityId}},{key:"client",get:function(){return this._client},set:function(client){if(client&&!(client instanceof _client.Client))throw new _errors.KinveyError("client must be an instance of the Client class.");this._client=client}}]),CacheRequest}(_request2.default);exports.default=CacheRequest}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestMethod=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(14),_response=__webpack_require__(16),_response2=_interopRequireDefault(_response),_headers=__webpack_require__(17),_headers2=_interopRequireDefault(_headers),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_qs=__webpack_require__(148),_qs2=_interopRequireDefault(_qs),_appendQuery=__webpack_require__(152),_appendQuery2=_interopRequireDefault(_appendQuery),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isNumber=__webpack_require__(159),_isNumber2=_interopRequireDefault(_isNumber),defaultTimeout=process&&process.env&&process.env.KINVEY_DEFAULT_TIMEOUT||"30"||30,RequestMethod={GET:"GET",POST:"POST",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"};Object.freeze(RequestMethod),exports.RequestMethod=RequestMethod;var Request=function(){function Request(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Request),options=(0,_assign2.default)({method:RequestMethod.GET,headers:new _headers2.default,url:"",body:null,timeout:defaultTimeout,followRedirect:!0,cache:!1},options),this.method=options.method,this.headers=options.headers,this.url=options.url,this.body=options.body||options.data,this.timeout=options.timeout,this.followRedirect=options.followRedirect,this.cache=options.cache,this.executing=!1}return _createClass(Request,[{key:"isExecuting",value:function(){return!!this.executing}},{key:"execute",value:function(){function execute(){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.rack){_context.next=2;break}throw new _errors.KinveyError("Unable to execute the request. Please provide a rack to execute the request.");case 2:return _context.next=4,this.rack.execute(this.toPlainObject());case 4:if(response=_context.sent){_context.next=7;break}throw new _errors.NoResponseError;case 7:return response instanceof _response2.default||(response=new _response2.default({statusCode:response.statusCode,headers:response.headers,data:response.data})),_context.abrupt("return",response);case 9:case"end":return _context.stop()}},_callee,this)}));return execute}()},{key:"toPlainObject",value:function(){return{method:this.method,headers:this.headers.toPlainObject(),url:this.url,body:this.body,timeout:this.timeout,followRedirect:this.followRedirect}}},{key:"method",get:function(){return this._method},set:function(method){switch((0,_isString2.default)(method)||(method=String(method)),method=method.toUpperCase()){case RequestMethod.GET:case RequestMethod.POST:case RequestMethod.PATCH:case RequestMethod.PUT:case RequestMethod.DELETE:this._method=method;break;default:throw new Error("Invalid request method. Only GET, POST, PATCH, PUT, and DELETE are allowed.")}}},{key:"headers",get:function(){return this._headers},set:function(headers){headers instanceof _headers2.default||(headers=new _headers2.default(headers)),this._headers=headers}},{key:"url",get:function(){return this.cache===!0?(0,_appendQuery2.default)(this._url,_qs2.default.stringify({_:Math.random().toString(36).substr(2)})):this._url},set:function(urlString){this._url=urlString}},{key:"data",get:function(){return this.body},set:function(data){this.body=data}},{key:"timeout",get:function(){return this._timeout},set:function(timeout){this._timeout=(0,_isNumber2.default)(timeout)?timeout:defaultTimeout}},{key:"followRedirect",get:function(){return this._followRedirect},set:function(followRedirect){this._followRedirect=!!followRedirect}},{key:"cache",get:function(){return this._cache},set:function(cache){this._cache=!!cache}}]),Request}();exports.default=Request}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncError=exports.ServerError=exports.QueryError=exports.ParameterValueOutOfRangeError=exports.NoResponseError=exports.NotFoundError=exports.NoActiveUserError=exports.NoNetworkConnectionError=exports.MissingRequestParameterError=exports.MissingRequestHeaderError=exports.MissingQueryError=exports.JSONParseError=exports.InvalidQuerySyntaxError=exports.InvalidIdentifierError=exports.InvalidCredentialsError=exports.InsufficientCredentialsError=exports.IncompleteRequestBodyError=exports.FeatureUnavailableError=exports.ActiveUserError=exports.KinveyError=void 0;var _es6Error=__webpack_require__(15),_es6Error2=_interopRequireDefault(_es6Error),KinveyError=exports.KinveyError=function(_ExtendableError){function KinveyError(){var message=arguments.length<=0||void 0===arguments[0]?"An error has occurred.":arguments[0],debug=arguments.length<=1||void 0===arguments[1]?"":arguments[1],code=arguments.length<=2||void 0===arguments[2]?-1:arguments[2];_classCallCheck(this,KinveyError);var _this=_possibleConstructorReturn(this,(KinveyError.__proto__||Object.getPrototypeOf(KinveyError)).call(this,message));return _this.debug=debug,_this.code=code,_this}return _inherits(KinveyError,_ExtendableError),KinveyError}(_es6Error2.default);exports.ActiveUserError=function(_KinveyError){function ActiveUserError(){var message=arguments.length<=0||void 0===arguments[0]?"An active user already exists.":arguments[0],debug=arguments[1];return _classCallCheck(this,ActiveUserError),_possibleConstructorReturn(this,(ActiveUserError.__proto__||Object.getPrototypeOf(ActiveUserError)).call(this,message,debug))}return _inherits(ActiveUserError,_KinveyError),ActiveUserError}(KinveyError),exports.FeatureUnavailableError=function(_KinveyError2){function FeatureUnavailableError(){var message=arguments.length<=0||void 0===arguments[0]?"Requested functionality is unavailable in this API version.":arguments[0],debug=arguments[1];return _classCallCheck(this,FeatureUnavailableError),_possibleConstructorReturn(this,(FeatureUnavailableError.__proto__||Object.getPrototypeOf(FeatureUnavailableError)).call(this,message,debug))}return _inherits(FeatureUnavailableError,_KinveyError2),FeatureUnavailableError}(KinveyError),exports.IncompleteRequestBodyError=function(_KinveyError3){function IncompleteRequestBodyError(){var message=arguments.length<=0||void 0===arguments[0]?" The request body is either missing or incomplete.":arguments[0],debug=arguments[1];return _classCallCheck(this,IncompleteRequestBodyError),_possibleConstructorReturn(this,(IncompleteRequestBodyError.__proto__||Object.getPrototypeOf(IncompleteRequestBodyError)).call(this,message,debug))}return _inherits(IncompleteRequestBodyError,_KinveyError3),IncompleteRequestBodyError}(KinveyError),exports.InsufficientCredentialsError=function(_KinveyError4){function InsufficientCredentialsError(){var message=arguments.length<=0||void 0===arguments[0]?"The credentials used to authenticate this request are not authorized to run this operation. Please retry your request with appropriate credentials.":arguments[0],debug=arguments[1];return _classCallCheck(this,InsufficientCredentialsError),_possibleConstructorReturn(this,(InsufficientCredentialsError.__proto__||Object.getPrototypeOf(InsufficientCredentialsError)).call(this,message,debug))}return _inherits(InsufficientCredentialsError,_KinveyError4),InsufficientCredentialsError}(KinveyError),exports.InvalidCredentialsError=function(_KinveyError5){function InvalidCredentialsError(){var message=arguments.length<=0||void 0===arguments[0]?" Invalid credentials. Please retry your request with correct credentials.":arguments[0],debug=arguments[1];return _classCallCheck(this,InvalidCredentialsError),_possibleConstructorReturn(this,(InvalidCredentialsError.__proto__||Object.getPrototypeOf(InvalidCredentialsError)).call(this,message,debug))}return _inherits(InvalidCredentialsError,_KinveyError5),InvalidCredentialsError}(KinveyError),exports.InvalidIdentifierError=function(_KinveyError6){function InvalidIdentifierError(){var message=arguments.length<=0||void 0===arguments[0]?"One of more identifier names in the request has an invalid format.":arguments[0],debug=arguments[1];return _classCallCheck(this,InvalidIdentifierError),_possibleConstructorReturn(this,(InvalidIdentifierError.__proto__||Object.getPrototypeOf(InvalidIdentifierError)).call(this,message,debug))}return _inherits(InvalidIdentifierError,_KinveyError6),InvalidIdentifierError}(KinveyError),exports.InvalidQuerySyntaxError=function(_KinveyError7){function InvalidQuerySyntaxError(){var message=arguments.length<=0||void 0===arguments[0]?"The query string in the request has an invalid syntax.":arguments[0],debug=arguments[1];return _classCallCheck(this,InvalidQuerySyntaxError),_possibleConstructorReturn(this,(InvalidQuerySyntaxError.__proto__||Object.getPrototypeOf(InvalidQuerySyntaxError)).call(this,message,debug))}return _inherits(InvalidQuerySyntaxError,_KinveyError7),InvalidQuerySyntaxError}(KinveyError),exports.JSONParseError=function(_KinveyError8){function JSONParseError(){var message=arguments.length<=0||void 0===arguments[0]?"Unable to parse the JSON in the request.":arguments[0],debug=arguments[1];return _classCallCheck(this,JSONParseError),_possibleConstructorReturn(this,(JSONParseError.__proto__||Object.getPrototypeOf(JSONParseError)).call(this,message,debug))}return _inherits(JSONParseError,_KinveyError8),JSONParseError}(KinveyError),exports.MissingQueryError=function(_KinveyError9){function MissingQueryError(){var message=arguments.length<=0||void 0===arguments[0]?"The request is missing a query string.":arguments[0],debug=arguments[1];return _classCallCheck(this,MissingQueryError),_possibleConstructorReturn(this,(MissingQueryError.__proto__||Object.getPrototypeOf(MissingQueryError)).call(this,message,debug))}return _inherits(MissingQueryError,_KinveyError9),MissingQueryError}(KinveyError),exports.MissingRequestHeaderError=function(_KinveyError10){function MissingRequestHeaderError(){var message=arguments.length<=0||void 0===arguments[0]?"The request is missing a required header.":arguments[0],debug=arguments[1];return _classCallCheck(this,MissingRequestHeaderError),_possibleConstructorReturn(this,(MissingRequestHeaderError.__proto__||Object.getPrototypeOf(MissingRequestHeaderError)).call(this,message,debug))}return _inherits(MissingRequestHeaderError,_KinveyError10),MissingRequestHeaderError}(KinveyError),exports.MissingRequestParameterError=function(_KinveyError11){function MissingRequestParameterError(){var message=arguments.length<=0||void 0===arguments[0]?"A required parameter is missing from the request.":arguments[0],debug=arguments[1];return _classCallCheck(this,MissingRequestParameterError),_possibleConstructorReturn(this,(MissingRequestParameterError.__proto__||Object.getPrototypeOf(MissingRequestParameterError)).call(this,message,debug))}return _inherits(MissingRequestParameterError,_KinveyError11),MissingRequestParameterError}(KinveyError),exports.NoNetworkConnectionError=function(_KinveyError12){function NoNetworkConnectionError(){var message=arguments.length<=0||void 0===arguments[0]?"You do not have a network connect.":arguments[0],debug=arguments[1];return _classCallCheck(this,NoNetworkConnectionError),_possibleConstructorReturn(this,(NoNetworkConnectionError.__proto__||Object.getPrototypeOf(NoNetworkConnectionError)).call(this,message,debug))}return _inherits(NoNetworkConnectionError,_KinveyError12),NoNetworkConnectionError}(KinveyError),exports.NoActiveUserError=function(_KinveyError13){function NoActiveUserError(){var message=arguments.length<=0||void 0===arguments[0]?"There is not an active user.":arguments[0],debug=arguments[1];return _classCallCheck(this,NoActiveUserError),_possibleConstructorReturn(this,(NoActiveUserError.__proto__||Object.getPrototypeOf(NoActiveUserError)).call(this,message,debug))}return _inherits(NoActiveUserError,_KinveyError13),NoActiveUserError}(KinveyError),exports.NotFoundError=function(_KinveyError14){function NotFoundError(){var message=arguments.length<=0||void 0===arguments[0]?"The item was not found.":arguments[0],debug=arguments[1];return _classCallCheck(this,NotFoundError),_possibleConstructorReturn(this,(NotFoundError.__proto__||Object.getPrototypeOf(NotFoundError)).call(this,message,debug))}return _inherits(NotFoundError,_KinveyError14),NotFoundError}(KinveyError),exports.NoResponseError=function(_KinveyError15){function NoResponseError(){var message=arguments.length<=0||void 0===arguments[0]?"No response was provided.":arguments[0],debug=arguments[1];return _classCallCheck(this,NoResponseError),_possibleConstructorReturn(this,(NoResponseError.__proto__||Object.getPrototypeOf(NoResponseError)).call(this,message,debug))}return _inherits(NoResponseError,_KinveyError15),NoResponseError}(KinveyError),exports.ParameterValueOutOfRangeError=function(_KinveyError16){function ParameterValueOutOfRangeError(){var message=arguments.length<=0||void 0===arguments[0]?"The value specified for one of the request parameters is out of range.":arguments[0],debug=arguments[1];return _classCallCheck(this,ParameterValueOutOfRangeError),_possibleConstructorReturn(this,(ParameterValueOutOfRangeError.__proto__||Object.getPrototypeOf(ParameterValueOutOfRangeError)).call(this,message,debug))}return _inherits(ParameterValueOutOfRangeError,_KinveyError16),ParameterValueOutOfRangeError}(KinveyError),exports.QueryError=function(_KinveyError17){function QueryError(){var message=arguments.length<=0||void 0===arguments[0]?"An error occurred on the query.":arguments[0],debug=arguments[1];return _classCallCheck(this,QueryError),_possibleConstructorReturn(this,(QueryError.__proto__||Object.getPrototypeOf(QueryError)).call(this,message,debug))}return _inherits(QueryError,_KinveyError17),QueryError}(KinveyError),exports.ServerError=function(_KinveyError18){function ServerError(){var message=arguments.length<=0||void 0===arguments[0]?"An error occurred on the server":arguments[0],debug=arguments[1];return _classCallCheck(this,ServerError),_possibleConstructorReturn(this,(ServerError.__proto__||Object.getPrototypeOf(ServerError)).call(this,message,debug))}return _inherits(ServerError,_KinveyError18),ServerError}(KinveyError),exports.SyncError=function(_KinveyError19){function SyncError(){var message=arguments.length<=0||void 0===arguments[0]?"An error occurred during sync":arguments[0],debug=arguments[1];return _classCallCheck(this,SyncError),_possibleConstructorReturn(this,(SyncError.__proto__||Object.getPrototypeOf(SyncError)).call(this,message,debug))}return _inherits(SyncError,_KinveyError19),SyncError}(KinveyError)},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _extendableBuiltin(cls){function ExtendableBuiltin(){cls.apply(this,arguments)}return ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,cls):ExtendableBuiltin.__proto__=cls,ExtendableBuiltin}Object.defineProperty(exports,"__esModule",{value:!0});var ExtendableError=function(_extendableBuiltin2){function ExtendableError(){var message=arguments.length<=0||void 0===arguments[0]?"":arguments[0];_classCallCheck(this,ExtendableError);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ExtendableError).call(this,message));return Object.defineProperty(_this,"message",{configurable:!0,enumerable:!1,value:message,writable:!0}),Object.defineProperty(_this,"name",{configurable:!0,enumerable:!1,value:_this.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(_this,_this.constructor),_possibleConstructorReturn(_this)):(Object.defineProperty(_this,"stack",{configurable:!0,enumerable:!1,value:new Error(message).stack,writable:!0}),_this)}return _inherits(ExtendableError,_extendableBuiltin2),ExtendableError}(_extendableBuiltin(Error));exports.default=ExtendableError,module.exports=exports.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatusCode=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_headers=__webpack_require__(17),_headers2=_interopRequireDefault(_headers),_errors=__webpack_require__(14),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),StatusCode={Ok:200,Created:201,Empty:204,RedirectTemporarily:301,RedirectPermanently:302,NotModified:304,ResumeIncomplete:308,NotFound:404,ServerError:500};Object.freeze(StatusCode),exports.StatusCode=StatusCode;var Response=function(){function Response(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Response),options=(0,_assign2.default)({statusCode:StatusCode.Empty,headers:new _headers2.default,data:null},options),this.statusCode=options.statusCode,this.headers=options.headers,this.data=options.data}return _createClass(Response,[{key:"isSuccess",value:function(){return this.statusCode>=200&&this.statusCode<300||this.statusCode===StatusCode.RedirectPermanently||this.statusCode===StatusCode.NotModified}},{key:"headers",get:function(){return this._headers},set:function(headers){headers instanceof _headers2.default||(headers=new _headers2.default(headers)),this._headers=headers}},{key:"error",get:function(){if(this.isSuccess())return null;var data=this.data||{},message=data.message||data.description,debug=data.debug,code=this.statusCode;return new _errors.KinveyError(message,debug,code)}}]),Response}();exports.default=Response},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isPlainObject=__webpack_require__(130),_isPlainObject2=_interopRequireDefault(_isPlainObject),Headers=function(){function Headers(){var headers=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Headers),this.headers={},this.addAll(headers)}return _createClass(Headers,[{key:"get",value:function(name){if(name){(0,_isString2.default)(name)||(name=String(name));var headers=this.headers;return headers[name.toLowerCase()]}}},{key:"set",value:function(name,value){if(void 0===name||null===name||void 0===value||null===value)throw new Error("A name and value must be provided to set a header.");(0,_isString2.default)(name)||(name=String(name));var headers=this.headers;return name=name.toLowerCase(),(0,_isString2.default)(value)?headers[name]=value:headers[name]=JSON.stringify(value),this.headers=headers,this}},{key:"has",value:function(name){return!!this.get(name)}},{key:"add",value:function(){var header=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.set(header.name,header.value)}},{key:"addAll",value:function(){var _this=this,headers=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(headers instanceof Headers&&(headers=headers.toPlainObject()),!(0,_isPlainObject2.default)(headers))throw new Error("Headers argument must be an object.");var names=Object.keys(headers);return(0,_forEach2.default)(names,function(name){var value=headers[name];_this.set(name,value)}),this}},{key:"remove",value:function(name){if(name){(0,_isString2.default)(name)||(name=String(name));var headers=this.headers;delete headers[name.toLowerCase()],this.headers=headers}return this}},{key:"clear",value:function(){return this.headers={},this}},{key:"toPlainObject",value:function(){return this.headers}},{key:"toString",value:function(){return JSON.stringify(this.toPlainObject())}}]),Headers}();exports.default=Headers},function(module,exports,__webpack_require__){function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,baseIteratee(iteratee,3))}var arrayEach=__webpack_require__(19),baseEach=__webpack_require__(20),baseIteratee=__webpack_require__(41),isArray=__webpack_require__(34);module.exports=forEach},function(module,exports){function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&iteratee(array[index],index,array)!==!1;);return array}module.exports=arrayEach},function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(21),createBaseEach=__webpack_require__(40),baseEach=createBaseEach(baseForOwn);module.exports=baseEach},function(module,exports,__webpack_require__){function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}var baseFor=__webpack_require__(22),keys=__webpack_require__(24);module.exports=baseForOwn},function(module,exports,__webpack_require__){var createBaseFor=__webpack_require__(23),baseFor=createBaseFor();module.exports=baseFor},function(module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}module.exports=createBaseFor},function(module,exports,__webpack_require__){function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var arrayLikeKeys=__webpack_require__(25),baseKeys=__webpack_require__(36),isArrayLike=__webpack_require__(29);module.exports=keys},function(module,exports,__webpack_require__){function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}var baseTimes=__webpack_require__(26),isArguments=__webpack_require__(27),isArray=__webpack_require__(34),isIndex=__webpack_require__(35),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=arrayLikeKeys},function(module,exports){function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}module.exports=baseTimes},function(module,exports,__webpack_require__){function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}var isArrayLikeObject=__webpack_require__(28),argsTag="[object Arguments]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable;module.exports=isArguments},function(module,exports,__webpack_require__){function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isArrayLike=__webpack_require__(29),isObjectLike=__webpack_require__(33);module.exports=isArrayLikeObject},function(module,exports,__webpack_require__){function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var isFunction=__webpack_require__(30),isLength=__webpack_require__(32);module.exports=isArrayLike},function(module,exports,__webpack_require__){function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}var isObject=__webpack_require__(31),funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=isFunction},function(module,exports){function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}module.exports=isObject},function(module,exports){function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}var MAX_SAFE_INTEGER=9007199254740991;module.exports=isLength},function(module,exports){function isObjectLike(value){return null!=value&&"object"==typeof value}module.exports=isObjectLike},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports){function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=isIndex},function(module,exports,__webpack_require__){function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}var isPrototype=__webpack_require__(37),nativeKeys=__webpack_require__(38),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=baseKeys},function(module,exports){function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}var objectProto=Object.prototype;module.exports=isPrototype},function(module,exports,__webpack_require__){var overArg=__webpack_require__(39),nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},function(module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},function(module,exports,__webpack_require__){function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}var isArrayLike=__webpack_require__(29);module.exports=createBaseEach},function(module,exports,__webpack_require__){function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}var baseMatches=__webpack_require__(42),baseMatchesProperty=__webpack_require__(110),identity=__webpack_require__(125),isArray=__webpack_require__(34),property=__webpack_require__(126);module.exports=baseIteratee},function(module,exports,__webpack_require__){function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}var baseIsMatch=__webpack_require__(43),getMatchData=__webpack_require__(107),matchesStrictComparable=__webpack_require__(109);module.exports=baseMatches},function(module,exports,__webpack_require__){function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result))return!1}}return!0}var Stack=__webpack_require__(44),baseIsEqual=__webpack_require__(82),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;module.exports=baseIsMatch},function(module,exports,__webpack_require__){function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}var ListCache=__webpack_require__(45),stackClear=__webpack_require__(53),stackDelete=__webpack_require__(54),stackGet=__webpack_require__(55),stackHas=__webpack_require__(56),stackSet=__webpack_require__(57);Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports,__webpack_require__){function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}var listCacheClear=__webpack_require__(46),listCacheDelete=__webpack_require__(47),listCacheGet=__webpack_require__(50),listCacheHas=__webpack_require__(51),listCacheSet=__webpack_require__(52);ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports){function listCacheClear(){this.__data__=[],this.size=0}module.exports=listCacheClear},function(module,exports,__webpack_require__){function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),--this.size,!0}var assocIndexOf=__webpack_require__(48),arrayProto=Array.prototype,splice=arrayProto.splice;module.exports=listCacheDelete},function(module,exports,__webpack_require__){function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}var eq=__webpack_require__(49);module.exports=assocIndexOf},function(module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},function(module,exports,__webpack_require__){function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}var assocIndexOf=__webpack_require__(48);module.exports=listCacheGet},function(module,exports,__webpack_require__){function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}var assocIndexOf=__webpack_require__(48);module.exports=listCacheHas},function(module,exports,__webpack_require__){function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}var assocIndexOf=__webpack_require__(48);module.exports=listCacheSet},function(module,exports,__webpack_require__){function stackClear(){this.__data__=new ListCache,this.size=0}var ListCache=__webpack_require__(45);module.exports=stackClear},function(module,exports){function stackDelete(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}module.exports=stackDelete},function(module,exports){function stackGet(key){return this.__data__.get(key)}module.exports=stackGet},function(module,exports){function stackHas(key){return this.__data__.has(key)}module.exports=stackHas},function(module,exports,__webpack_require__){function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}var ListCache=__webpack_require__(45),Map=__webpack_require__(58),MapCache=__webpack_require__(67),LARGE_ARRAY_SIZE=200;module.exports=stackSet},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),root=__webpack_require__(63),Map=getNative(root,"Map");module.exports=Map},function(module,exports,__webpack_require__){function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}var baseIsNative=__webpack_require__(60),getValue=__webpack_require__(66);module.exports=getNative},function(module,exports,__webpack_require__){function baseIsNative(value){if(!isObject(value)||isMasked(value))return!1;var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}var isFunction=__webpack_require__(30),isMasked=__webpack_require__(61),isObject=__webpack_require__(31),toSource=__webpack_require__(65),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=baseIsNative},function(module,exports,__webpack_require__){function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var coreJsData=__webpack_require__(62),maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();module.exports=isMasked},function(module,exports,__webpack_require__){var root=__webpack_require__(63),coreJsData=root["__core-js_shared__"];module.exports=coreJsData},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(64),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){(function(global){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(exports,function(){return this}())},function(module,exports){function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var funcProto=Function.prototype,funcToString=funcProto.toString;module.exports=toSource},function(module,exports){function getValue(object,key){
return null==object?void 0:object[key]}module.exports=getValue},function(module,exports,__webpack_require__){function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}var mapCacheClear=__webpack_require__(68),mapCacheDelete=__webpack_require__(76),mapCacheGet=__webpack_require__(79),mapCacheHas=__webpack_require__(80),mapCacheSet=__webpack_require__(81);MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports,__webpack_require__){function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}var Hash=__webpack_require__(69),ListCache=__webpack_require__(45),Map=__webpack_require__(58);module.exports=mapCacheClear},function(module,exports,__webpack_require__){function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}var hashClear=__webpack_require__(70),hashDelete=__webpack_require__(72),hashGet=__webpack_require__(73),hashHas=__webpack_require__(74),hashSet=__webpack_require__(75);Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}var nativeCreate=__webpack_require__(71);module.exports=hashClear},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),nativeCreate=getNative(Object,"create");module.exports=nativeCreate},function(module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}module.exports=hashDelete},function(module,exports,__webpack_require__){function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}var nativeCreate=__webpack_require__(71),HASH_UNDEFINED="__lodash_hash_undefined__",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=hashGet},function(module,exports,__webpack_require__){function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}var nativeCreate=__webpack_require__(71),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=hashHas},function(module,exports,__webpack_require__){function hashSet(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}var nativeCreate=__webpack_require__(71),HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=hashSet},function(module,exports,__webpack_require__){function mapCacheDelete(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}var getMapData=__webpack_require__(77);module.exports=mapCacheDelete},function(module,exports,__webpack_require__){function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}var isKeyable=__webpack_require__(78);module.exports=getMapData},function(module,exports){function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}module.exports=isKeyable},function(module,exports,__webpack_require__){function mapCacheGet(key){return getMapData(this,key).get(key)}var getMapData=__webpack_require__(77);module.exports=mapCacheGet},function(module,exports,__webpack_require__){function mapCacheHas(key){return getMapData(this,key).has(key)}var getMapData=__webpack_require__(77);module.exports=mapCacheHas},function(module,exports,__webpack_require__){function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}var getMapData=__webpack_require__(77);module.exports=mapCacheSet},function(module,exports,__webpack_require__){function baseIsEqual(value,other,customizer,bitmask,stack){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack))}var baseIsEqualDeep=__webpack_require__(83),isObject=__webpack_require__(31),isObjectLike=__webpack_require__(33);module.exports=baseIsEqual},function(module,exports,__webpack_require__){function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=getTag(object),objTag=objTag==argsTag?objectTag:objTag),othIsArr||(othTag=getTag(other),othTag=othTag==argsTag?objectTag:othTag);var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,equalFunc,customizer,bitmask,stack))}var Stack=__webpack_require__(44),equalArrays=__webpack_require__(84),equalByTag=__webpack_require__(90),equalObjects=__webpack_require__(95),getTag=__webpack_require__(96),isArray=__webpack_require__(34),isTypedArray=__webpack_require__(102),PARTIAL_COMPARE_FLAG=2,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=baseIsEqualDeep},function(module,exports,__webpack_require__){function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)))return seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,bitmask,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}var SetCache=__webpack_require__(85),arraySome=__webpack_require__(88),cacheHas=__webpack_require__(89),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;module.exports=equalArrays},function(module,exports,__webpack_require__){function SetCache(values){var index=-1,length=values?values.length:0;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}var MapCache=__webpack_require__(67),setCacheAdd=__webpack_require__(86),setCacheHas=__webpack_require__(87);SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports){function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}var HASH_UNDEFINED="__lodash_hash_undefined__";module.exports=setCacheAdd},function(module,exports){function setCacheHas(value){return this.__data__.has(value)}module.exports=setCacheHas},function(module,exports){function arraySome(array,predicate){for(var index=-1,length=array?array.length:0;++index<length;)if(predicate(array[index],index,array))return!0;return!1}module.exports=arraySome},function(module,exports){function cacheHas(cache,key){return cache.has(key)}module.exports=cacheHas},function(module,exports,__webpack_require__){function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=UNORDERED_COMPARE_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}var Symbol=__webpack_require__(91),Uint8Array=__webpack_require__(92),eq=__webpack_require__(49),equalArrays=__webpack_require__(84),mapToArray=__webpack_require__(93),setToArray=__webpack_require__(94),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=equalByTag},function(module,exports,__webpack_require__){var root=__webpack_require__(63),Symbol=root.Symbol;module.exports=Symbol},function(module,exports,__webpack_require__){var root=__webpack_require__(63),Uint8Array=root.Uint8Array;module.exports=Uint8Array},function(module,exports){function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}module.exports=mapToArray},function(module,exports){function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}module.exports=setToArray},function(module,exports,__webpack_require__){function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}var keys=__webpack_require__(24),PARTIAL_COMPARE_FLAG=2,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=equalObjects},function(module,exports,__webpack_require__){var DataView=__webpack_require__(97),Map=__webpack_require__(58),Promise=__webpack_require__(98),Set=__webpack_require__(99),WeakMap=__webpack_require__(100),baseGetTag=__webpack_require__(101),toSource=__webpack_require__(65),mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",objectProto=Object.prototype,objectToString=objectProto.toString,dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),root=__webpack_require__(63),DataView=getNative(root,"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),root=__webpack_require__(63),Promise=getNative(root,"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),root=__webpack_require__(63),Set=getNative(root,"Set");module.exports=Set},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),root=__webpack_require__(63),WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},function(module,exports){function baseGetTag(value){return objectToString.call(value)}var objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=baseGetTag},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(103),baseUnary=__webpack_require__(104),nodeUtil=__webpack_require__(105),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports,__webpack_require__){function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}var isLength=__webpack_require__(32),isObjectLike=__webpack_require__(33),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=baseIsTypedArray},function(module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(64),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(exports,__webpack_require__(106)(module))},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}var isStrictComparable=__webpack_require__(108),keys=__webpack_require__(24);module.exports=getMatchData},function(module,exports,__webpack_require__){function isStrictComparable(value){return value===value&&!isObject(value)}var isObject=__webpack_require__(31);module.exports=isStrictComparable},function(module,exports){function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}module.exports=matchesStrictComparable},function(module,exports,__webpack_require__){function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}var baseIsEqual=__webpack_require__(82),get=__webpack_require__(111),hasIn=__webpack_require__(122),isKey=__webpack_require__(120),isStrictComparable=__webpack_require__(108),matchesStrictComparable=__webpack_require__(109),toKey=__webpack_require__(121),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;module.exports=baseMatchesProperty},function(module,exports,__webpack_require__){function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}var baseGet=__webpack_require__(112);module.exports=get},function(module,exports,__webpack_require__){function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}var castPath=__webpack_require__(113),isKey=__webpack_require__(120),toKey=__webpack_require__(121);module.exports=baseGet},function(module,exports,__webpack_require__){function castPath(value){return isArray(value)?value:stringToPath(value)}var isArray=__webpack_require__(34),stringToPath=__webpack_require__(114);module.exports=castPath},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(115),toString=__webpack_require__(117),reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(string){string=toString(string);var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result});module.exports=stringToPath},function(module,exports,__webpack_require__){function memoizeCapped(func){var result=memoize(func,function(key){return cache.size===MAX_MEMOIZE_SIZE&&cache.clear(),key}),cache=result.cache;return result}var memoize=__webpack_require__(116),MAX_MEMOIZE_SIZE=500;module.exports=memoizeCapped},function(module,exports,__webpack_require__){function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}var MapCache=__webpack_require__(67),FUNC_ERROR_TEXT="Expected a function";memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){function toString(value){return null==value?"":baseToString(value)}var baseToString=__webpack_require__(118);module.exports=toString},function(module,exports,__webpack_require__){function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}var Symbol=__webpack_require__(91),isSymbol=__webpack_require__(119),INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=baseToString},function(module,exports,__webpack_require__){function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}var isObjectLike=__webpack_require__(33),symbolTag="[object Symbol]",objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=isSymbol},function(module,exports,__webpack_require__){function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}var isArray=__webpack_require__(34),isSymbol=__webpack_require__(119),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=isKey},function(module,exports,__webpack_require__){function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}var isSymbol=__webpack_require__(119),INFINITY=1/0;module.exports=toKey},function(module,exports,__webpack_require__){function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var baseHasIn=__webpack_require__(123),hasPath=__webpack_require__(124);module.exports=hasIn},function(module,exports){function baseHasIn(object,key){return null!=object&&key in Object(object)}module.exports=baseHasIn},function(module,exports,__webpack_require__){function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);for(var index=-1,length=path.length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:(length=object?object.length:0,!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object)))}var castPath=__webpack_require__(113),isArguments=__webpack_require__(27),isArray=__webpack_require__(34),isIndex=__webpack_require__(35),isKey=__webpack_require__(120),isLength=__webpack_require__(32),toKey=__webpack_require__(121);module.exports=hasPath},function(module,exports){function identity(value){return value}module.exports=identity},function(module,exports,__webpack_require__){function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}var baseProperty=__webpack_require__(127),basePropertyDeep=__webpack_require__(128),isKey=__webpack_require__(120),toKey=__webpack_require__(121);module.exports=property},function(module,exports){function baseProperty(key){return function(object){return null==object?void 0:object[key]}}module.exports=baseProperty},function(module,exports,__webpack_require__){function basePropertyDeep(path){return function(object){return baseGet(object,path)}}var baseGet=__webpack_require__(112);module.exports=basePropertyDeep},function(module,exports,__webpack_require__){function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}var isArray=__webpack_require__(34),isObjectLike=__webpack_require__(33),stringTag="[object String]",objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=isString},function(module,exports,__webpack_require__){function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var getPrototype=__webpack_require__(131),isObjectLike=__webpack_require__(33),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString;module.exports=isPlainObject},function(module,exports,__webpack_require__){var overArg=__webpack_require__(39),getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype},function(module,exports,__webpack_require__){var assignValue=__webpack_require__(133),copyObject=__webpack_require__(135),createAssigner=__webpack_require__(136),isArrayLike=__webpack_require__(29),isPrototype=__webpack_require__(37),keys=__webpack_require__(24),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))return void copyObject(source,keys(source),object);for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])});module.exports=assign},function(module,exports,__webpack_require__){function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}var baseAssignValue=__webpack_require__(134),eq=__webpack_require__(49),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=assignValue},function(module,exports){function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}var defineProperty=Object.defineProperty;module.exports=baseAssignValue},function(module,exports,__webpack_require__){function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}var assignValue=__webpack_require__(133),baseAssignValue=__webpack_require__(134);module.exports=copyObject},function(module,exports,__webpack_require__){function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}var baseRest=__webpack_require__(137),isIterateeCall=__webpack_require__(145);module.exports=createAssigner},function(module,exports,__webpack_require__){function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}var identity=__webpack_require__(125),overRest=__webpack_require__(138),setToString=__webpack_require__(140);module.exports=baseRest},function(module,exports,__webpack_require__){function overRest(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}var apply=__webpack_require__(139),nativeMax=Math.max;module.exports=overRest},function(module,exports){function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(141),shortOut=__webpack_require__(144),setToString=shortOut(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(142),identity=__webpack_require__(125),nativeDefineProperty=__webpack_require__(143),baseSetToString=nativeDefineProperty?function(func,string){return nativeDefineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},function(module,exports){function constant(value){return function(){return value}}module.exports=constant},function(module,exports,__webpack_require__){var getNative=__webpack_require__(59),nativeDefineProperty=getNative(Object,"defineProperty");module.exports=nativeDefineProperty},function(module,exports){function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=HOT_COUNT)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}var HOT_COUNT=500,HOT_SPAN=16,nativeNow=Date.now;module.exports=shortOut},function(module,exports,__webpack_require__){function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}var eq=__webpack_require__(49),isArrayLike=__webpack_require__(29),isIndex=__webpack_require__(35),isObject=__webpack_require__(31);module.exports=isIterateeCall},function(module,exports,__webpack_require__){(function(global){var g="object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this,hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0,oldRuntime=hadRuntime&&g.regeneratorRuntime;if(g.regeneratorRuntime=void 0,module.exports=__webpack_require__(147),hadRuntime)g.regeneratorRuntime=oldRuntime;else try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=void 0}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global,process){!function(global){"use strict";function wrap(innerFn,outerFn,self,tryLocsList){var generator=Object.create((outerFn||Generator).prototype),context=new Context(tryLocsList||[]);
return generator._invoke=makeInvokeMethod(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AwaitArgument(arg){this.arg=arg}function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value instanceof AwaitArgument?Promise.resolve(value.arg).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},reject)}reject(record.arg)}function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}"object"==typeof process&&process.domain&&(invoke=process.domain.bind(invoke));var previousPromise;this._invoke=enqueue}function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(;;){var delegate=context.delegate;if(delegate){if("return"===method||"throw"===method&&delegate.iterator[method]===undefined){context.delegate=null;var returnMethod=delegate.iterator.return;if(returnMethod){var record=tryCatch(returnMethod,delegate.iterator,arg);if("throw"===record.type){method="throw",arg=record.arg;continue}}if("return"===method)continue}var record=tryCatch(delegate.iterator[method],delegate.iterator,arg);if("throw"===record.type){context.delegate=null,method="throw",arg=record.arg;continue}method="next",arg=undefined;var info=record.arg;if(!info.done)return state=GenStateSuspendedYield,info;context[delegate.resultName]=info.value,context.next=delegate.nextLoc,context.delegate=null}if("next"===method)context.sent=context._sent=arg;else if("throw"===method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,arg;context.dispatchException(arg)&&(method="next",arg=undefined)}else"return"===method&&context.abrupt("return",arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){state=context.done?GenStateCompleted:GenStateSuspendedYield;var info={value:record.arg,done:context.done};if(record.arg!==ContinueSentinel)return info;context.delegate&&"next"===method&&(arg=undefined)}else"throw"===record.type&&(state=GenStateCompleted,method="throw",arg=record.arg)}}}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}var undefined,hasOwn=Object.prototype.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)return void(inModule&&(module.exports=runtime));runtime=global.regeneratorRuntime=inModule?module.exports:{},runtime.wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},Gp=GeneratorFunctionPrototype.prototype=Generator.prototype;GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return new AwaitArgument(arg)},defineIteratorMethods(AsyncIterator.prototype),runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[iteratorSymbol]=function(){return this},Gp[toStringTagSymbol]="Generator",Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootEntry=this.tryEntries[0],rootRecord=rootEntry.completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,!!caught}if(this.done)throw exception;for(var context=this,i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?this.next=finallyEntry.finallyLoc:this.complete(record),ContinueSentinel},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=record.arg,this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc)},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},ContinueSentinel}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this)}).call(exports,function(){return this}(),__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";var Stringify=__webpack_require__(149),Parse=__webpack_require__(151);module.exports={stringify:Stringify,parse:Parse}},function(module,exports,__webpack_require__){"use strict";var Utils=__webpack_require__(150),arrayPrefixGenerators={brackets:function(prefix){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix){return prefix}},defaults={delimiter:"&",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:Utils.encode},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots){var obj=object;if("function"==typeof filter)obj=filter(prefix,obj);else if(obj instanceof Date)obj=obj.toISOString();else if(null===obj){if(strictNullHandling)return encoder?encoder(prefix):prefix;obj=""}if("string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj||Utils.isBuffer(obj))return encoder?[encoder(prefix)+"="+encoder(obj)]:[prefix+"="+String(obj)];var values=[];if("undefined"==typeof obj)return values;var objKeys;if(Array.isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(values=Array.isArray(obj)?values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots)):values.concat(stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots)))}return values};module.exports=function(object,opts){var objKeys,filter,obj=object,options=opts||{},delimiter="undefined"==typeof options.delimiter?defaults.delimiter:options.delimiter,strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,skipNulls="boolean"==typeof options.skipNulls?options.skipNulls:defaults.skipNulls,encode="boolean"==typeof options.encode?options.encode:defaults.encode,encoder=encode?"function"==typeof options.encoder?options.encoder:defaults.encoder:null,sort="function"==typeof options.sort?options.sort:null,allowDots="undefined"!=typeof options.allowDots&&options.allowDots;if(null!==options.encoder&&void 0!==options.encoder&&"function"!=typeof options.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof options.filter?(filter=options.filter,obj=filter("",obj)):Array.isArray(options.filter)&&(objKeys=filter=options.filter);var keys=[];if("object"!=typeof obj||null===obj)return"";var arrayFormat;arrayFormat=options.arrayFormat in arrayPrefixGenerators?options.arrayFormat:"indices"in options?options.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),sort&&objKeys.sort(sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots)))}return keys.join(delimiter)}},function(module,exports){"use strict";var hexTable=function(){for(var array=new Array(256),i=0;i<256;++i)array[i]="%"+((i<16?"0":"")+i.toString(16)).toUpperCase();return array}();exports.arrayToObject=function(source,options){for(var obj=options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)"undefined"!=typeof source[i]&&(obj[i]=source[i]);return obj},exports.merge=function(target,source,options){if(!source)return target;if("object"!=typeof source){if(Array.isArray(target))target.push(source);else{if("object"!=typeof target)return[target,source];target[source]=!0}return target}if("object"!=typeof target)return[target].concat(source);var mergeTarget=target;return Array.isArray(target)&&!Array.isArray(source)&&(mergeTarget=exports.arrayToObject(target,options)),Object.keys(source).reduce(function(acc,key){var value=source[key];return Object.prototype.hasOwnProperty.call(acc,key)?acc[key]=exports.merge(acc[key],value,options):acc[key]=value,acc},mergeTarget)},exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}},exports.encode=function(str){if(0===str.length)return str;for(var string="string"==typeof str?str:String(str),out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},exports.compact=function(obj,references){if("object"!=typeof obj||null===obj)return obj;var refs=references||[],lookup=refs.indexOf(obj);if(lookup!==-1)return refs[lookup];if(refs.push(obj),Array.isArray(obj)){for(var compacted=[],i=0;i<obj.length;++i)obj[i]&&"object"==typeof obj[i]?compacted.push(exports.compact(obj[i],refs)):"undefined"!=typeof obj[i]&&compacted.push(obj[i]);return compacted}for(var keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j];obj[key]=exports.compact(obj[key],refs)}return obj},exports.isRegExp=function(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},exports.isBuffer=function(obj){return null!==obj&&"undefined"!=typeof obj&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},function(module,exports,__webpack_require__){"use strict";var Utils=__webpack_require__(150),defaults={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:Utils.decode},parseValues=function(str,options){for(var obj={},parts=str.split(options.delimiter,options.parameterLimit===1/0?void 0:options.parameterLimit),i=0;i<parts.length;++i){var part=parts[i],pos=part.indexOf("]=")===-1?part.indexOf("="):part.indexOf("]=")+1;if(pos===-1)obj[options.decoder(part)]="",options.strictNullHandling&&(obj[options.decoder(part)]=null);else{var key=options.decoder(part.slice(0,pos)),val=options.decoder(part.slice(pos+1));Object.prototype.hasOwnProperty.call(obj,key)?obj[key]=[].concat(obj[key]).concat(val):obj[key]=val}}return obj},parseObject=function parseObject(chain,val,options){if(!chain.length)return val;var obj,root=chain.shift();if("[]"===root)obj=[],obj=obj.concat(parseObject(chain,val,options));else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root[0]&&"]"===root[root.length-1]?root.slice(1,root.length-1):root,index=parseInt(cleanRoot,10);!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[],obj[index]=parseObject(chain,val,options)):obj[cleanRoot]=parseObject(chain,val,options)}return obj},parseKeys=function(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^\.\[]+)/g,"[$1]"):givenKey,parent=/^([^\[\]]*)/,child=/(\[[^\[\]]*\])/g,segment=parent.exec(key),keys=[];if(segment[1]){if(!options.plainObjects&&Object.prototype.hasOwnProperty(segment[1])&&!options.allowPrototypes)return;keys.push(segment[1])}for(var i=0;null!==(segment=child.exec(key))&&i<options.depth;)i+=1,(options.plainObjects||!Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g,""))||options.allowPrototypes)&&keys.push(segment[1]);return segment&&keys.push("["+key.slice(segment.index)+"]"),parseObject(keys,val,options)}};module.exports=function(str,opts){var options=opts||{};if(null!==options.decoder&&void 0!==options.decoder&&"function"!=typeof options.decoder)throw new TypeError("Decoder has to be a function.");if(options.delimiter="string"==typeof options.delimiter||Utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter,options.depth="number"==typeof options.depth?options.depth:defaults.depth,options.arrayLimit="number"==typeof options.arrayLimit?options.arrayLimit:defaults.arrayLimit,options.parseArrays=options.parseArrays!==!1,options.decoder="function"==typeof options.decoder?options.decoder:defaults.decoder,options.allowDots="boolean"==typeof options.allowDots?options.allowDots:defaults.allowDots,options.plainObjects="boolean"==typeof options.plainObjects?options.plainObjects:defaults.plainObjects,options.allowPrototypes="boolean"==typeof options.allowPrototypes?options.allowPrototypes:defaults.allowPrototypes,options.parameterLimit="number"==typeof options.parameterLimit?options.parameterLimit:defaults.parameterLimit,options.strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,""===str||null===str||"undefined"==typeof str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?parseValues(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=Utils.merge(obj,newObj,options)}return Utils.compact(obj)}},function(module,exports,__webpack_require__){function serialize(obj,prefix){var str=[],useArraySyntax=!1;return Array.isArray(obj)&&prefix&&(useArraySyntax=!0),Object.keys(obj).forEach(function(prop){var key,query,val=obj[prop];key=prefix?prefix+"["+(useArraySyntax?"":prop)+"]":prop,query="object"==typeof val?serialize(val,key):encodeURIComponent(key)+"="+encodeURIComponent(val),str.push(query)}),str.join("&")}var querystring=__webpack_require__(153),extend=__webpack_require__(156),url=__webpack_require__(157);module.exports=function(uri,q){var parts=url.parse(uri,!0),parsedQuery=extend(!0,{},parts.query,"string"==typeof q?querystring.parse(q):q);return parts.search="?"+serialize(parsedQuery),url.format(parts)}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(154),exports.encode=exports.stringify=__webpack_require__(155)},function(module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?Array.isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj}},function(module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?Object.keys(obj).map(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return Array.isArray(obj[k])?obj[k].map(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""}},function(module,exports){var undefined,hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,isPlainObject=function(obj){"use strict";if(!obj||"[object Object]"!==toString.call(obj)||obj.nodeType||obj.setInterval)return!1;var has_own_constructor=hasOwn.call(obj,"constructor"),has_is_property_of_method=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!has_own_constructor&&!has_is_property_of_method)return!1;var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)};module.exports=function extend(){"use strict";var options,name,src,copy,copyIsArray,clone,target=arguments[0],i=1,length=arguments.length,deep=!1;for("boolean"==typeof target?(deep=target,target=arguments[1]||{},i=2):("object"!=typeof target&&"function"!=typeof target||target==undefined)&&(target={});i<length;++i)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&Array.isArray(src)?src:[]):clone=src&&isPlainObject(src)?src:{},target[name]=extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy));return target}},function(module,exports,__webpack_require__){function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}function urlFormat(obj){return isString(obj)&&(obj=urlParse(obj)),obj instanceof Url?obj.format():Url.prototype.format.call(obj)}function urlResolve(source,relative){return urlParse(source,!1,!0).resolve(relative)}function urlResolveObject(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative}function isString(arg){return"string"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}var punycode=__webpack_require__(158);exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=__webpack_require__(153);Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var hostEnd=-1,i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}var auth,atSign;atSign=hostEnd===-1?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd),atSign!==-1&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}hostEnd===-1&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)newpart+=part.charCodeAt(j)>127?"x":part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}if(this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),!ipv6Hostname){for(var domainArray=this.hostname.split("."),newOut=[],i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i],esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}var hash=rest.indexOf("#");hash!==-1&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(qm!==-1?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var p=this.pathname||"",s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=encodeURIComponent(auth),auth=auth.replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&host!==!1?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}),search=search.replace("#","%23"),protocol+host+pathname+search+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}var result=new Url;if(Object.keys(this).forEach(function(k){result[k]=this[k]},this),result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol)return Object.keys(relative).forEach(function(k){"protocol"!==k&&(result[k]=relative[k])}),slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result;if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol])return Object.keys(relative).forEach(function(k){result[k]=relative[k]}),result.href=result.format(),result;if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@");authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return result.search=relative.search,result.query=relative.query,isNull(result.pathname)&&isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;i>=0;i--)last=srcPath[i],"."==last?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@");authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return mustEndAbs=mustEndAbs||result.host&&srcPath.length,mustEndAbs&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),
isNull(result.pathname)&&isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(port=port[0],":"!==port&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(module,global){!function(root){function error(type){throw RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";parts.length>1&&(result=parts[0]+"@",string=parts[1]),string=string.replace(regexSeparators,".");var labels=string.split("."),encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)value=string.charCodeAt(counter++),value>=55296&&value<=56319&&counter<length?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--)):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function basicToDigit(codePoint){return codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias;for(basic=input.lastIndexOf(delimiter),basic<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;index>=inputLength&&error("invalid-input"),digit=basicToDigit(input.charCodeAt(index++)),(digit>=base||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(digit<t);k+=base)baseMinusT=base-t,w>floor(maxInt/baseMinusT)&&error("overflow"),w*=baseMinusT;out=output.length+1,bias=adapt(i-oldi,out,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(input=ucs2decode(input),inputLength=input.length,n=initialN,delta=0,bias=initialBias,j=0;j<inputLength;++j)currentValue=input[j],currentValue<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)currentValue=input[j],currentValue>=n&&currentValue<m&&(m=currentValue);for(handledCPCountPlusOne=handledCPCount+1,m-n>floor((maxInt-delta)/handledCPCountPlusOne)&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if(currentValue=input[j],currentValue<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(q<t);k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}var freeGlobal=("object"==typeof exports&&exports&&!exports.nodeType&&exports,"object"==typeof module&&module&&!module.nodeType&&module,"object"==typeof global&&global);freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode},__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this)}).call(exports,__webpack_require__(106)(module),function(){return this}())},function(module,exports,__webpack_require__){function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objectToString.call(value)==numberTag}var isObjectLike=__webpack_require__(33),numberTag="[object Number]",objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=isNumber},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_errors=__webpack_require__(14),_response=__webpack_require__(16),_response2=_interopRequireDefault(_response),KinveyResponse=function(_Response){function KinveyResponse(){return _classCallCheck(this,KinveyResponse),_possibleConstructorReturn(this,(KinveyResponse.__proto__||Object.getPrototypeOf(KinveyResponse)).apply(this,arguments))}return _inherits(KinveyResponse,_Response),_createClass(KinveyResponse,[{key:"error",get:function(){if(this.isSuccess())return null;var data=this.data||{},name=data.name||data.error,message=data.message||data.description,debug=data.debug,code=this.statusCode;return"FeatureUnavailableError"===name?new _errors.FeatureUnavailableError(message,debug,code):"IncompleteRequestBodyError"===name?new _errors.IncompleteRequestBodyError(message,debug,code):"InsufficientCredentials"===name?new _errors.InsufficientCredentialsError(message,debug,code):"InvalidCredentials"===name?new _errors.InvalidCredentialsError(message,debug,code):"InvalidIdentifierError"===name?new _errors.InvalidIdentifierError(message,debug,code):"InvalidQuerySyntaxError"===name?new _errors.InvalidQuerySyntaxError(message,debug,code):"JSONParseError"===name?new _errors.JSONParseError(message,debug,code):"MissingQueryError"===name?new _errors.MissingQueryError(message,debug,code):"MissingRequestHeaderError"===name?new _errors.MissingRequestHeaderError(message,debug,code):"MissingRequestParameterError"===name?new _errors.MissingRequestParameterError(message,debug,code):"EntityNotFound"===name||"CollectionNotFound"===name||"AppNotFound"===name||"UserNotFound"===name||"BlobNotFound"===name||"DocumentNotFound"===name||code===_response.StatusCode.NotFound?new _errors.NotFoundError(message,debug,code):"ParameterValueOutOfRangeError"===name?new _errors.ParameterValueOutOfRangeError(message,debug,code):"ServerError"===name||code===_response.StatusCode.ServerError?new _errors.ServerError(message,debug,code):_get(KinveyResponse.prototype.__proto__||Object.getPrototypeOf(KinveyResponse.prototype),"error",this)}}]),KinveyResponse}(_response2.default);exports.default=KinveyResponse},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Client=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(14),_utils=__webpack_require__(162),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_sharedInstance=null;exports.Client=function(){function Client(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(_classCallCheck(this,Client),options=(0,_assign2.default)({apiHostname:"https://baas.kinvey.com",micHostname:"https://auth.kinvey.com",liveServiceHostname:"https://kls.kinvey.com"},options),options.apiHostname&&(0,_isString2.default)(options.apiHostname)){var apiHostnameParsed=_url2.default.parse(options.apiHostname);options.apiProtocol=apiHostnameParsed.protocol,options.apiHost=apiHostnameParsed.host}if(options.micHostname&&(0,_isString2.default)(options.micHostname)){var micHostnameParsed=_url2.default.parse(options.micHostname);options.micProtocol=micHostnameParsed.protocol,options.micHost=micHostnameParsed.host}if(options.liveServiceHostname&&(0,_isString2.default)(options.liveServiceHostname)){var liveServiceHostnameParsed=_url2.default.parse(options.liveServiceHostname);options.liveServiceProtocol=liveServiceHostnameParsed.protocol,options.liveServiceHost=liveServiceHostnameParsed.host}this.apiProtocol=options.apiProtocol,this.apiHost=options.apiHost,this.micProtocol=options.micProtocol,this.micHost=options.micHost,this.liveServiceProtocol=options.liveServiceProtocol,this.liveServiceHost=options.liveServiceHost,this.appKey=options.appKey,this.appSecret=options.appSecret,this.masterSecret=options.masterSecret,this.encryptionKey=options.encryptionKey,this.appVersion=options.appVersion}return _createClass(Client,[{key:"toPlainObject",value:function(){return{apiHostname:this.apiHostname,apiProtocol:this.apiProtocol,apiHost:this.apiHost,micHostname:this.micHostname,micProtocol:this.micProtocol,micHost:this.micHost,liveServiceHostname:this.liveServiceHostname,liveServiceHost:this.liveServiceHost,liveServiceProtocol:this.liveServiceProtocol,appKey:this.appKey,appSecret:this.appSecret,masterSecret:this.masterSecret,encryptionKey:this.encryptionKey,appVersion:this.appVersion}}},{key:"apiHostname",get:function(){return _url2.default.format({protocol:this.apiProtocol,host:this.apiHost})}},{key:"baseUrl",get:function(){return this.apiHostname}},{key:"protocol",get:function(){return this.apiProtocol}},{key:"host",get:function(){return this.apiHost}},{key:"micHostname",get:function(){return _url2.default.format({protocol:this.micProtocol,host:this.micHost})}},{key:"liveServiceHostname",get:function(){return _url2.default.format({protocol:this.liveServiceProtocol,host:this.liveServiceHost})}},{key:"activeUser",get:function(){return(0,_utils.getActiveUser)(this)}},{key:"appVersion",get:function(){return this._appVersion},set:function(appVersion){appVersion&&!(0,_isString2.default)(appVersion)&&(appVersion=String(appVersion)),this._appVersion=appVersion}}],[{key:"init",value:function(options){var client=new Client(options);return _sharedInstance=client,client}},{key:"sharedInstance",value:function(){if(!_sharedInstance)throw new _errors.KinveyError("You have not initialized the library. Please call Kinvey.init() to initialize the library.");return _sharedInstance}}]),Client}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _device=__webpack_require__(163);Object.keys(_device).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _device[key]}})});var _log=__webpack_require__(164);Object.keys(_log).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _log[key]}})});var _object=__webpack_require__(166);Object.keys(_object).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _object[key]}})});var _observable=__webpack_require__(167);Object.keys(_observable).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _observable[key]}})});var _popup=__webpack_require__(183);Object.defineProperty(exports,"Popup",{enumerable:!0,get:function(){return _popup.Popup}});var _storage=__webpack_require__(227);Object.keys(_storage).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _storage[key]}})});var _string=__webpack_require__(231);Object.keys(_string).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _string[key]}})})},function(module,exports,__webpack_require__){(function(global,process){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function browserDetect(ua){ua=ua.toLowerCase();var rChrome=/(chrome)\/([\w]+)/,rFirefox=/(firefox)\/([\w.]+)/,rIE=/(msie) ([\w.]+)/i,rOpera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rSafari=/(safari)\/([\w.]+)/;return rChrome.exec(ua)||rFirefox.exec(ua)||rIE.exec(ua)||rOpera.exec(ua)||rSafari.exec(ua)||[]}function deviceInformation(){var browser=void 0,platform=void 0,version=void 0,manufacturer=void 0,id=void 0,libraries=[];if(void 0!==global.cordova&&void 0!==global.device){var device=global.device;libraries.push("phonegap/"+device.cordova),platform=device.platform,version=device.version,manufacturer=device.model,id=device.uuid}else void 0!==global.Titanium?(libraries.push("titanium/"+global.Titanium.getVersion()),"mobileweb"===global.Titanium.Platform.getName()?(browser=browserDetect(global.Titanium.Platform.getModel()),platform=browser[1],version=browser[2],manufacturer=global.Titanium.Platform.getOstype()):(platform=global.Titanium.Platform.getOsname(),version=global.Titanium.Platform.getVersion(),manufacturer=global.Titanium.Platform.getManufacturer()),id=global.Titanium.Platform.getId()):void 0!==global.forge?(libraries.push("triggerio/"+(global.forge.config.platform_version||"")),id=global.forge.config.uuid):void 0!==process&&(platform=process.title,version=process.version,manufacturer=process.platform);void 0!==global.angular&&libraries.push("angularjs/"+global.angular.version.full),void 0!==global.Backbone&&libraries.push("backbonejs/"+global.Backbone.VERSION),void 0!==global.Ember&&libraries.push("emberjs/"+global.Ember.VERSION),void 0!==global.jQuery&&libraries.push("jquery/"+global.jQuery.fn.jquery),void 0!==global.ko&&libraries.push("knockout/"+global.ko.version),void 0!==global.Zepto&&libraries.push("zeptojs"),null!==platform&&void 0!==platform||!global.navigator||(browser=browserDetect(global.navigator.userAgent),platform=browser[1],version=browser[2],manufacturer=global.navigator.platform);var parts=["js-kinvey-javascript-sdk-core"];return 0!==libraries.length&&parts.push("("+libraries.sort().join(", ")+")"),parts.concat([platform,version,manufacturer,id]).map(function(part){return part?part.toString().replace(/\s/g,"_").toLowerCase():"unknown"}).join(" ")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),deviceReady=void 0;exports.Device=function(){function Device(){_classCallCheck(this,Device)}return _createClass(Device,null,[{key:"isPhoneGap",value:function(){return"undefined"!=typeof document&&(document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1)}},{key:"ready",value:function(){return deviceReady||(deviceReady=this.isPhoneGap()?new Promise(function(resolve){var onDeviceReady=function onDeviceReady(){document.removeEventListener("deviceready",onDeviceReady),resolve()};document.addEventListener("deviceready",onDeviceReady,!1)}):Promise.resolve()),deviceReady}},{key:"toString",value:function(){return deviceInformation()}}]),Device}()}).call(exports,function(){return this}(),__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Log=void 0;var _loglevel=__webpack_require__(165),_loglevel2=_interopRequireDefault(_loglevel),originalFactory=_loglevel2.default.methodFactory;_loglevel2.default.methodFactory=function(methodName,logLevel,loggerName){var rawMethod=originalFactory(methodName,logLevel,loggerName);return function(message){message="Kinvey: "+message;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];args.length>0?rawMethod(message,args):rawMethod(message)}},_loglevel2.default.setDefaultLevel(_loglevel2.default.levels.SILENT),exports.Log=_loglevel2.default},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,definition){"use strict";__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(){"use strict";function realMethod(methodName){return typeof console!==undefinedType&&(void 0!==console[methodName]?bindMethod(console,methodName):void 0!==console.log?bindMethod(console,"log"):noop)}function bindMethod(obj,methodName){var method=obj[methodName];if("function"==typeof method.bind)return method.bind(obj);try{return Function.prototype.bind.call(method,obj)}catch(e){return function(){return Function.prototype.apply.apply(method,[obj,arguments])}}}function enableLoggingWhenConsoleArrives(methodName,level,loggerName){return function(){typeof console!==undefinedType&&(replaceLoggingMethods.call(this,level,loggerName),this[methodName].apply(this,arguments))}}function replaceLoggingMethods(level,loggerName){for(var i=0;i<logMethods.length;i++){var methodName=logMethods[i];this[methodName]=i<level?noop:this.methodFactory(methodName,level,loggerName)}}function defaultMethodFactory(methodName,level,loggerName){return realMethod(methodName)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(name,defaultLevel,factory){function persistLevelIfPossible(levelNum){var levelName=(logMethods[levelNum]||"silent").toUpperCase();try{return void(window.localStorage[storageKey]=levelName)}catch(ignore){}try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";"}catch(ignore){}}function getPersistedLevel(){var storedLevel;try{storedLevel=window.localStorage[storageKey]}catch(ignore){}if(typeof storedLevel===undefinedType)try{var cookie=window.document.cookie,location=cookie.indexOf(encodeURIComponent(storageKey)+"=");location&&(storedLevel=/^([^;]+)/.exec(cookie.slice(location))[1])}catch(ignore){}return void 0===self.levels[storedLevel]&&(storedLevel=void 0),storedLevel}var currentLevel,self=this,storageKey="loglevel";name&&(storageKey+=":"+name),self.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},self.methodFactory=factory||defaultMethodFactory,self.getLevel=function(){return currentLevel},self.setLevel=function(level,persist){if("string"==typeof level&&void 0!==self.levels[level.toUpperCase()]&&(level=self.levels[level.toUpperCase()]),!("number"==typeof level&&level>=0&&level<=self.levels.SILENT))throw"log.setLevel() called with invalid level: "+level;if(currentLevel=level,persist!==!1&&persistLevelIfPossible(level),replaceLoggingMethods.call(self,level,name),typeof console===undefinedType&&level<self.levels.SILENT)return"No console available for logging"},self.setDefaultLevel=function(level){getPersistedLevel()||self.setLevel(level,!1)},self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist)},self.disableAll=function(persist){self.setLevel(self.levels.SILENT,persist)};var initialLevel=getPersistedLevel();null==initialLevel&&(initialLevel=null==defaultLevel?"WARN":defaultLevel),self.setLevel(initialLevel,!1)}var noop=function(){},undefinedType="undefined",logMethods=["trace","debug","info","warn","error"],defaultLogger=new Logger,_loggersByName={};defaultLogger.getLogger=function(name){if("string"!=typeof name||""===name)throw new TypeError("You must supply a name when creating a logger.");var logger=_loggersByName[name];return logger||(logger=_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory)),logger};var _log=typeof window!==undefinedType?window.log:void 0;return defaultLogger.noConflict=function(){return typeof window!==undefinedType&&window.log===defaultLogger&&(window.log=_log),defaultLogger},defaultLogger})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function nested(obj,dotProperty,value){if(!dotProperty)return obj=value||obj;for(var parts=dotProperty.split("."),current=parts.shift();current&&obj;)obj=obj[current],current=parts.shift();return value||obj}function isDefined(obj){return void 0!==obj&&null!==obj}function use(nsInterface){return function(){var _this=this,adapter=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(0,_forEach2.default)(nsInterface,function(methodName){(0,_isFunction2.default)(adapter[methodName])&&(_this.prototype[methodName]=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return adapter[methodName].apply(this,args)})})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.nested=nested,exports.isDefined=isDefined,exports.use=use;var _forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.KinveyObservable=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Observable2=__webpack_require__(168),_toPromise2=__webpack_require__(182);exports.KinveyObservable=function(_Observable){function KinveyObservable(){return _classCallCheck(this,KinveyObservable),_possibleConstructorReturn(this,(KinveyObservable.__proto__||Object.getPrototypeOf(KinveyObservable)).apply(this,arguments))}return _inherits(KinveyObservable,_Observable),_createClass(KinveyObservable,[{key:"toPromise",value:function(){return _toPromise2.toPromise.call(this)}}],[{key:"create",value:function(subscriber){return new KinveyObservable(subscriber)}}]),KinveyObservable}(_Observable2.Observable)},function(module,exports,__webpack_require__){"use strict";var root_1=__webpack_require__(169),toSubscriber_1=__webpack_require__(170),observable_1=__webpack_require__(181),Observable=function(){function Observable(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var operator=this.operator,sink=toSubscriber_1.toSubscriber(observerOrNext,error,complete);if(operator?operator.call(sink,this):sink.add(this._subscribe(sink)),sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink},Observable.prototype.forEach=function(next,PromiseCtor){var _this=this;if(PromiseCtor||(root_1.root.Rx&&root_1.root.Rx.config&&root_1.root.Rx.config.Promise?PromiseCtor=root_1.root.Rx.config.Promise:root_1.root.Promise&&(PromiseCtor=root_1.root.Promise)),!PromiseCtor)throw new Error("no Promise impl found");return new PromiseCtor(function(resolve,reject){var subscription=_this.subscribe(function(value){if(subscription)try{next(value)}catch(err){reject(err),subscription.unsubscribe()}else next(value)},reject,resolve)})},Observable.prototype._subscribe=function(subscriber){return this.source.subscribe(subscriber)},Observable.prototype[observable_1.$$observable]=function(){return this},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();exports.Observable=Observable},function(module,exports){(function(global){"use strict";var objectTypes={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};exports.root=objectTypes[typeof self]&&self||objectTypes[typeof window]&&window;var freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(exports.root=freeGlobal)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function toSubscriber(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber_1.Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber_1.$$rxSubscriber])return nextOrObserver[rxSubscriber_1.$$rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber_1.Subscriber(nextOrObserver,error,complete):new Subscriber_1.Subscriber}var Subscriber_1=__webpack_require__(171),rxSubscriber_1=__webpack_require__(180);exports.toSubscriber=toSubscriber},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},isFunction_1=__webpack_require__(172),Subscription_1=__webpack_require__(173),Observer_1=__webpack_require__(179),rxSubscriber_1=__webpack_require__(180),Subscriber=function(_super){function Subscriber(destinationOrNext,error,complete){switch(_super.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Observer_1.empty;break;case 1:if(!destinationOrNext){this.destination=Observer_1.empty;break}if("object"==typeof destinationOrNext){destinationOrNext instanceof Subscriber?(this.destination=destinationOrNext,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,destinationOrNext));break}default:this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,destinationOrNext,error,complete)}}return __extends(Subscriber,_super),Subscriber.prototype[rxSubscriber_1.$$rxSubscriber]=function(){return this},Subscriber.create=function(next,error,complete){var subscriber=new Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber},Subscriber.prototype.next=function(value){this.isStopped||this._next(value)},Subscriber.prototype.error=function(err){this.isStopped||(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this))},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){this.destination.error(err),this.unsubscribe()},Subscriber.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},Subscriber}(Subscription_1.Subscription);exports.Subscriber=Subscriber;var SafeSubscriber=function(_super){function SafeSubscriber(_parent,observerOrNext,error,complete){_super.call(this),this._parent=_parent;var next,context=this;isFunction_1.isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(context=observerOrNext,next=observerOrNext.next,error=observerOrNext.error,
complete=observerOrNext.complete,isFunction_1.isFunction(context.unsubscribe)&&this.add(context.unsubscribe.bind(context)),context.unsubscribe=this.unsubscribe.bind(this)),this._context=context,this._next=next,this._error=error,this._complete=complete}return __extends(SafeSubscriber,_super),SafeSubscriber.prototype.next=function(value){if(!this.isStopped&&this._next){var _parent=this._parent;_parent.syncErrorThrowable?this.__tryOrSetError(_parent,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}},SafeSubscriber.prototype.error=function(err){if(!this.isStopped){var _parent=this._parent;if(this._error)_parent.syncErrorThrowable?(this.__tryOrSetError(_parent,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else{if(!_parent.syncErrorThrowable)throw this.unsubscribe(),err;_parent.syncErrorValue=err,_parent.syncErrorThrown=!0,this.unsubscribe()}}},SafeSubscriber.prototype.complete=function(){if(!this.isStopped){var _parent=this._parent;this._complete?_parent.syncErrorThrowable?(this.__tryOrSetError(_parent,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},SafeSubscriber.prototype.__tryOrUnsub=function(fn,value){try{fn.call(this._context,value)}catch(err){throw this.unsubscribe(),err}},SafeSubscriber.prototype.__tryOrSetError=function(parent,fn,value){try{fn.call(this._context,value)}catch(err){return parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0}return!1},SafeSubscriber.prototype._unsubscribe=function(){var _parent=this._parent;this._context=null,this._parent=null,_parent.unsubscribe()},SafeSubscriber}(Subscriber)},function(module,exports){"use strict";function isFunction(x){return"function"==typeof x}exports.isFunction=isFunction},function(module,exports,__webpack_require__){"use strict";var isArray_1=__webpack_require__(174),isObject_1=__webpack_require__(175),isFunction_1=__webpack_require__(172),tryCatch_1=__webpack_require__(176),errorObject_1=__webpack_require__(177),UnsubscriptionError_1=__webpack_require__(178),Subscription=function(){function Subscription(unsubscribe){this.closed=!1,unsubscribe&&(this._unsubscribe=unsubscribe)}return Subscription.prototype.unsubscribe=function(){var errors,hasErrors=!1;if(!this.closed){this.closed=!0;var _a=this,_unsubscribe=_a._unsubscribe,_subscriptions=_a._subscriptions;if(this._subscriptions=null,isFunction_1.isFunction(_unsubscribe)){var trial=tryCatch_1.tryCatch(_unsubscribe).call(this);trial===errorObject_1.errorObject&&(hasErrors=!0,(errors=errors||[]).push(errorObject_1.errorObject.e))}if(isArray_1.isArray(_subscriptions))for(var index=-1,len=_subscriptions.length;++index<len;){var sub=_subscriptions[index];if(isObject_1.isObject(sub)){var trial=tryCatch_1.tryCatch(sub.unsubscribe).call(sub);if(trial===errorObject_1.errorObject){hasErrors=!0,errors=errors||[];var err=errorObject_1.errorObject.e;err instanceof UnsubscriptionError_1.UnsubscriptionError?errors=errors.concat(err.errors):errors.push(err)}}}if(hasErrors)throw new UnsubscriptionError_1.UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){if(!teardown||teardown===Subscription.EMPTY)return Subscription.EMPTY;if(teardown===this)return this;var sub=teardown;switch(typeof teardown){case"function":sub=new Subscription(teardown);case"object":if(sub.closed||"function"!=typeof sub.unsubscribe)break;this.closed?sub.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(sub);break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.")}return sub},Subscription.prototype.remove=function(subscription){if(null!=subscription&&subscription!==this&&subscription!==Subscription.EMPTY){var subscriptions=this._subscriptions;if(subscriptions){var subscriptionIndex=subscriptions.indexOf(subscription);subscriptionIndex!==-1&&subscriptions.splice(subscriptionIndex,1)}}},Subscription.EMPTY=function(empty){return empty.closed=!0,empty}(new Subscription),Subscription}();exports.Subscription=Subscription},function(module,exports){"use strict";exports.isArray=Array.isArray||function(x){return x&&"number"==typeof x.length}},function(module,exports){"use strict";function isObject(x){return null!=x&&"object"==typeof x}exports.isObject=isObject},function(module,exports,__webpack_require__){"use strict";function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObject_1.errorObject.e=e,errorObject_1.errorObject}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}var tryCatchTarget,errorObject_1=__webpack_require__(177);exports.tryCatch=tryCatch},function(module,exports){"use strict";exports.errorObject={e:{}}},function(module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},UnsubscriptionError=function(_super){function UnsubscriptionError(errors){_super.call(this),this.errors=errors;var err=Error.call(this,errors?errors.length+" errors occurred during unsubscription:\n  "+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"");this.name=err.name="UnsubscriptionError",this.stack=err.stack,this.message=err.message}return __extends(UnsubscriptionError,_super),UnsubscriptionError}(Error);exports.UnsubscriptionError=UnsubscriptionError},function(module,exports){"use strict";exports.empty={closed:!0,next:function(value){},error:function(err){throw err},complete:function(){}}},function(module,exports,__webpack_require__){"use strict";var root_1=__webpack_require__(169),Symbol=root_1.root.Symbol;exports.$$rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},function(module,exports,__webpack_require__){"use strict";function getSymbolObservable(context){var $$observable,Symbol=context.Symbol;return"function"==typeof Symbol?Symbol.observable?$$observable=Symbol.observable:($$observable=Symbol("observable"),Symbol.observable=$$observable):$$observable="@@observable",$$observable}var root_1=__webpack_require__(169);exports.getSymbolObservable=getSymbolObservable,exports.$$observable=getSymbolObservable(root_1.root)},function(module,exports,__webpack_require__){"use strict";function toPromise(PromiseCtor){var _this=this;if(PromiseCtor||(root_1.root.Rx&&root_1.root.Rx.config&&root_1.root.Rx.config.Promise?PromiseCtor=root_1.root.Rx.config.Promise:root_1.root.Promise&&(PromiseCtor=root_1.root.Promise)),!PromiseCtor)throw new Error("no Promise impl found");return new PromiseCtor(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})}var root_1=__webpack_require__(169);exports.toPromise=toPromise},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Popup=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_device=__webpack_require__(163),_events=__webpack_require__(184),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_bind=__webpack_require__(185),_bind2=_interopRequireDefault(_bind),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction);exports.Popup=function(_EventEmitter){function Popup(){return _classCallCheck(this,Popup),_possibleConstructorReturn(this,(Popup.__proto__||Object.getPrototypeOf(Popup)).apply(this,arguments))}return _inherits(Popup,_EventEmitter),_createClass(Popup,[{key:"open",value:function(){function open(_x,_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var interval,eventListeners,popupWindow,titaniumWebView,titaniumCloseButton,clickHandler,loadStartCallback,loadStopCallback,loadErrorCallback,exitCallback,_titaniumWebView,tiWindow,_this2=this,url=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(interval=void 0,eventListeners=void 0,popupWindow=void 0,titaniumWebView=void 0,titaniumCloseButton=void 0,"undefined"==typeof global.cordova){_context.next=10;break}return _context.next=8,_device.Device.ready();case 8:if("undefined"!=typeof global.cordova.InAppBrowser){_context.next=10;break}throw new Error("Cordova InAppBrowser Plugin is not installed. Please refer to https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser for help with installing the InAppBrowser plugin.");case 10:if(clickHandler=function(){popupWindow.close()},loadStartCallback=function(event){_this2.emit("loadstart",event)},loadStopCallback=function(event){_this2.emit("loadstop",event)},loadErrorCallback=function(event){_this2.emit("error",event)},exitCallback=function(){clearInterval(interval),popupWindow.close(),_this2.popupWindow=null,popupWindow&&(0,_isFunction2.default)(popupWindow.removeEventListener)&&(popupWindow.removeEventListener("loadstart",eventListeners.loadStopCallback),popupWindow.removeEventListener("loadstop",eventListeners.loadStopCallback),popupWindow.removeEventListener("loaderror",eventListeners.loadErrorCallback),popupWindow.removeEventListener("close",eventListeners.exitCallback),popupWindow.removeEventListener("androidback",eventListeners.exitCallback),popupWindow.removeEventListener("exit",eventListeners.exitCallback)),titaniumWebView&&(0,_isFunction2.default)(titaniumWebView.removeEventListener)&&(titaniumWebView.removeEventListener("load",eventListeners.loadHandler),titaniumWebView.removeEventListener("error",eventListeners.loadHandler)),titaniumCloseButton&&(0,_isFunction2.default)(titaniumCloseButton.removeEventListener)&&titaniumCloseButton.removeEventListener("click",eventListeners.clickHandler),_this2.emit("closed")},eventListeners={clickHandler:(0,_bind2.default)(clickHandler,this),loadStartCallback:(0,_bind2.default)(loadStartCallback,this),loadStopCallback:(0,_bind2.default)(loadStopCallback,this),loadErrorCallback:(0,_bind2.default)(loadErrorCallback,this),exitCallback:(0,_bind2.default)(exitCallback,this)},"undefined"==typeof global.Titanium||"undefined"==typeof global.Titanium.UI){_context.next=27;break}_titaniumWebView=global.Titanium.UI.createWebView({width:"100%",height:"100%",url:url}),_titaniumWebView.addEventListener("load",eventListeners.loadStopCallback),_titaniumWebView.addEventListener("error",eventListeners.loadErrorCallback),popupWindow=global.Titanium.UI.createWindow({backgroundColor:"white",barColor:"#000",title:options.title||"Kinvey Mobile Identity Connect",modal:!0}),popupWindow.add(_titaniumWebView),"iphone"===global.Titanium.Platform.osname||"ipad"===global.Titanium.Platform.osname?(tiWindow=global.Titanium.UI.createWindow({backgroundColor:"white",barColor:"#e3e3e3",title:options.title||"Kinvey Mobile Identity Connect"}),tiWindow.add(_titaniumWebView),titaniumCloseButton=global.Titanium.UI.createButton({title:"Close",style:global.Titanium.UI.iPhone.SystemButtonStyle.DONE}),tiWindow.setLeftNavButton(titaniumCloseButton),titaniumCloseButton.addEventListener("click",eventListeners.clickHandler),popupWindow=global.Titanium.UI.iOS.createNavigationWindow({backgroundColor:"white",window:tiWindow,modal:!0})):"android"===global.Titanium.Platform.osname&&popupWindow.addEventListener("androidback",eventListeners.exitCallback),popupWindow.addEventListener("close",eventListeners.exitCallback),popupWindow.open(),_context.next=34;break;case 27:if(popupWindow=global.open(url,"_blank","location=yes"),!popupWindow){_context.next=33;break}(0,_isFunction2.default)(popupWindow.addEventListener)&&(popupWindow.addEventListener("loadstart",eventListeners.loadStartCallback),popupWindow.addEventListener("loadstop",eventListeners.loadStopCallback),popupWindow.addEventListener("loaderror",eventListeners.loadErrorCallback),popupWindow.addEventListener("exit",eventListeners.exitCallback)),"undefined"==typeof global.cordova&&(interval=setInterval(function(){if(popupWindow.closed)eventListeners.exitCallback();else try{eventListeners.loadStopCallback({url:popupWindow.location.href})}catch(error){}},100)),_context.next=34;break;case 33:throw new Error("The popup was blocked.");case 34:return this.popupWindow=popupWindow,_context.abrupt("return",this);case 36:case"end":return _context.stop()}},_callee,this)}));return open}()},{key:"close",value:function(){return this.popupWindow&&this.popupWindow.close(),this}}]),Popup}(_events.EventEmitter)}).call(exports,function(){return this}())},function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},function(module,exports,__webpack_require__){var baseRest=__webpack_require__(137),createWrap=__webpack_require__(186),getHolder=__webpack_require__(219),replaceHolders=__webpack_require__(221),BIND_FLAG=1,PARTIAL_FLAG=32,bind=baseRest(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)});bind.placeholder={},module.exports=bind},function(module,exports,__webpack_require__){function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var length=partials?partials.length:0;if(length||(bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG),partials=holders=void 0),ary=void 0===ary?ary:nativeMax(toInteger(ary),0),arity=void 0===arity?arity:toInteger(arity),length-=holders?holders.length:0,bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=void 0}var data=isBindKey?void 0:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data&&mergeData(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],arity=newData[9]=null==newData[9]?isBindKey?0:func.length:nativeMax(newData[9]-length,0),!arity&&bitmask&(CURRY_FLAG|CURRY_RIGHT_FLAG)&&(bitmask&=~(CURRY_FLAG|CURRY_RIGHT_FLAG)),bitmask&&bitmask!=BIND_FLAG)result=bitmask==CURRY_FLAG||bitmask==CURRY_RIGHT_FLAG?createCurry(func,bitmask,arity):bitmask!=PARTIAL_FLAG&&bitmask!=(BIND_FLAG|PARTIAL_FLAG)||holders.length?createHybrid.apply(void 0,newData):createPartial(func,bitmask,thisArg,partials);else var result=createBind(func,bitmask,thisArg);var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}var baseSetData=__webpack_require__(187),createBind=__webpack_require__(189),createCurry=__webpack_require__(192),createHybrid=__webpack_require__(193),createPartial=__webpack_require__(222),getData=__webpack_require__(201),mergeData=__webpack_require__(223),setData=__webpack_require__(209),setWrapToString=__webpack_require__(210),toInteger=__webpack_require__(224),FUNC_ERROR_TEXT="Expected a function",BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,nativeMax=Math.max;module.exports=createWrap},function(module,exports,__webpack_require__){var identity=__webpack_require__(125),metaMap=__webpack_require__(188),baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity;module.exports=baseSetData},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(100),metaMap=WeakMap&&new WeakMap;module.exports=metaMap},function(module,exports,__webpack_require__){function createBind(func,bitmask,thisArg){function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}var isBind=bitmask&BIND_FLAG,Ctor=createCtor(func);return wrapper}var createCtor=__webpack_require__(190),root=__webpack_require__(63),BIND_FLAG=1;module.exports=createBind},function(module,exports,__webpack_require__){function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}var baseCreate=__webpack_require__(191),isObject=__webpack_require__(31);module.exports=createCtor},function(module,exports,__webpack_require__){function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}var isObject=__webpack_require__(31),objectCreate=Object.create;module.exports=baseCreate},function(module,exports,__webpack_require__){function createCurry(func,bitmask,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);if(length-=holders.length,length<arity)return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,void 0,args,holders,void 0,void 0,arity-length);var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}var Ctor=createCtor(func);return wrapper}var apply=__webpack_require__(139),createCtor=__webpack_require__(190),createHybrid=__webpack_require__(193),createRecurry=__webpack_require__(197),getHolder=__webpack_require__(219),replaceHolders=__webpack_require__(221),root=__webpack_require__(63);module.exports=createCurry},function(module,exports,__webpack_require__){function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){function wrapper(){for(var length=arguments.length,args=Array(length),index=length;index--;)args[index]=arguments[index];if(isCurried)var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder);if(partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;return length=args.length,argPos?args=reorder(args,argPos):isFlip&&length>1&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurried=bitmask&(CURRY_FLAG|CURRY_RIGHT_FLAG),isFlip=bitmask&FLIP_FLAG,Ctor=isBindKey?void 0:createCtor(func);return wrapper}var composeArgs=__webpack_require__(194),composeArgsRight=__webpack_require__(195),countHolders=__webpack_require__(196),createCtor=__webpack_require__(190),createRecurry=__webpack_require__(197),getHolder=__webpack_require__(219),reorder=__webpack_require__(220),replaceHolders=__webpack_require__(221),root=__webpack_require__(63),BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,ARY_FLAG=128,FLIP_FLAG=512;module.exports=createHybrid},function(module,exports){function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}var nativeMax=Math.max;module.exports=composeArgs},function(module,exports){function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}var nativeMax=Math.max;module.exports=composeArgsRight},function(module,exports){function countHolders(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}module.exports=countHolders},function(module,exports,__webpack_require__){function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&CURRY_FLAG,newHolders=isCurry?holders:void 0,newHoldersRight=isCurry?void 0:holders,newPartials=isCurry?partials:void 0,newPartialsRight=isCurry?void 0:partials;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG,bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG),bitmask&CURRY_BOUND_FLAG||(bitmask&=~(BIND_FLAG|BIND_KEY_FLAG));var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity],result=wrapFunc.apply(void 0,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}var isLaziable=__webpack_require__(198),setData=__webpack_require__(209),setWrapToString=__webpack_require__(210),BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64;module.exports=createRecurry},function(module,exports,__webpack_require__){function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"!=typeof other||!(funcName in LazyWrapper.prototype))return!1;if(func===other)return!0;var data=getData(other);return!!data&&func===data[0]}var LazyWrapper=__webpack_require__(199),getData=__webpack_require__(201),getFuncName=__webpack_require__(203),lodash=__webpack_require__(205);module.exports=isLaziable},function(module,exports,__webpack_require__){function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}var baseCreate=__webpack_require__(191),baseLodash=__webpack_require__(200),MAX_ARRAY_LENGTH=4294967295;LazyWrapper.prototype=baseCreate(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,module.exports=LazyWrapper},function(module,exports){function baseLodash(){}module.exports=baseLodash},function(module,exports,__webpack_require__){var metaMap=__webpack_require__(188),noop=__webpack_require__(202),getData=metaMap?function(func){return metaMap.get(func)}:noop;module.exports=getData},function(module,exports){function noop(){}module.exports=noop},function(module,exports,__webpack_require__){function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}var realNames=__webpack_require__(204),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=getFuncName},function(module,exports){var realNames={};module.exports=realNames},function(module,exports,__webpack_require__){function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var LazyWrapper=__webpack_require__(199),LodashWrapper=__webpack_require__(206),baseLodash=__webpack_require__(200),isArray=__webpack_require__(34),isObjectLike=__webpack_require__(33),wrapperClone=__webpack_require__(207),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,module.exports=lodash},function(module,exports,__webpack_require__){function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=void 0}var baseCreate=__webpack_require__(191),baseLodash=__webpack_require__(200);LodashWrapper.prototype=baseCreate(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,module.exports=LodashWrapper},function(module,exports,__webpack_require__){function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}var LazyWrapper=__webpack_require__(199),LodashWrapper=__webpack_require__(206),copyArray=__webpack_require__(208);module.exports=wrapperClone},function(module,exports){function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}module.exports=copyArray},function(module,exports,__webpack_require__){var baseSetData=__webpack_require__(187),shortOut=__webpack_require__(144),setData=shortOut(baseSetData);module.exports=setData},function(module,exports,__webpack_require__){
function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}var getWrapDetails=__webpack_require__(211),insertWrapDetails=__webpack_require__(212),setToString=__webpack_require__(140),updateWrapDetails=__webpack_require__(213);module.exports=setWrapToString},function(module,exports){function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}var reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;module.exports=getWrapDetails},function(module,exports){function insertWrapDetails(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(length>1?"& ":"")+details[lastIndex],details=details.join(length>2?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;module.exports=insertWrapDetails},function(module,exports,__webpack_require__){function updateWrapDetails(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}var arrayEach=__webpack_require__(19),arrayIncludes=__webpack_require__(214),BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256,FLIP_FLAG=512,wrapFlags=[["ary",ARY_FLAG],["bind",BIND_FLAG],["bindKey",BIND_KEY_FLAG],["curry",CURRY_FLAG],["curryRight",CURRY_RIGHT_FLAG],["flip",FLIP_FLAG],["partial",PARTIAL_FLAG],["partialRight",PARTIAL_RIGHT_FLAG],["rearg",REARG_FLAG]];module.exports=updateWrapDetails},function(module,exports,__webpack_require__){function arrayIncludes(array,value){var length=array?array.length:0;return!!length&&baseIndexOf(array,value,0)>-1}var baseIndexOf=__webpack_require__(215);module.exports=arrayIncludes},function(module,exports,__webpack_require__){function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}var baseFindIndex=__webpack_require__(216),baseIsNaN=__webpack_require__(217),strictIndexOf=__webpack_require__(218);module.exports=baseIndexOf},function(module,exports){function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}module.exports=baseFindIndex},function(module,exports){function baseIsNaN(value){return value!==value}module.exports=baseIsNaN},function(module,exports){function strictIndexOf(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}module.exports=strictIndexOf},function(module,exports){function getHolder(func){var object=func;return object.placeholder}module.exports=getHolder},function(module,exports,__webpack_require__){function reorder(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:void 0}return array}var copyArray=__webpack_require__(208),isIndex=__webpack_require__(35),nativeMin=Math.min;module.exports=reorder},function(module,exports){function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}var PLACEHOLDER="__lodash_placeholder__";module.exports=replaceHolders},function(module,exports,__webpack_require__){function createPartial(func,bitmask,thisArg,partials){function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}var isBind=bitmask&BIND_FLAG,Ctor=createCtor(func);return wrapper}var apply=__webpack_require__(139),createCtor=__webpack_require__(190),root=__webpack_require__(63),BIND_FLAG=1;module.exports=createPartial},function(module,exports,__webpack_require__){function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(BIND_FLAG|BIND_KEY_FLAG|ARY_FLAG),isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&source[7].length<=source[8]&&bitmask==CURRY_FLAG;if(!isCommon&&!isCombo)return data;srcBitmask&BIND_FLAG&&(data[2]=source[2],newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG);var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}return value=source[5],value&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]),value=source[7],value&&(data[7]=value),srcBitmask&ARY_FLAG&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8])),null==data[9]&&(data[9]=source[9]),data[0]=source[0],data[1]=newBitmask,data}var composeArgs=__webpack_require__(194),composeArgsRight=__webpack_require__(195),replaceHolders=__webpack_require__(221),PLACEHOLDER="__lodash_placeholder__",BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,ARY_FLAG=128,REARG_FLAG=256,nativeMin=Math.min;module.exports=mergeData},function(module,exports,__webpack_require__){function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}var toFinite=__webpack_require__(225);module.exports=toInteger},function(module,exports,__webpack_require__){function toFinite(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}var toNumber=__webpack_require__(226),INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308;module.exports=toFinite},function(module,exports,__webpack_require__){function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var isObject=__webpack_require__(31),isSymbol=__webpack_require__(119),NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=toNumber},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getActiveUser(client){return _localStorage2.default.get(""+client.appKey+userCollectionName)}function setActiveUser(client,data){if(data)try{return _localStorage2.default.set(""+client.appKey+userCollectionName,data)}catch(error){return!1}return _localStorage2.default.remove(""+client.appKey+userCollectionName)}function getIdentitySession(client,identity){return _localStorage2.default.get(""+client.appKey+identity)}function setIdentitySession(client,identity,session){if(session)try{return _localStorage2.default.set(""+client.appKey+identity,session)}catch(error){return!1}return _localStorage2.default.remove(""+client.appKey+identity)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getActiveUser=getActiveUser,exports.setActiveUser=setActiveUser,exports.getIdentitySession=getIdentitySession,exports.setIdentitySession=setIdentitySession;var _localStorage=__webpack_require__(228),_localStorage2=_interopRequireDefault(_localStorage),userCollectionName=process&&process.env&&process.env.KINVEY_USER_COLLECTION_NAME||"kinvey_user"||"kinvey_user"}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(global){"use strict";function accessor(key,value){return 1===arguments.length?get(key):set(key,value)}function get(key){return JSON.parse(ls.getItem(key))}function set(key,value){try{return ls.setItem(key,JSON.stringify(value)),!0}catch(e){return!1}}function remove(key){return ls.removeItem(key)}function clear(){return ls.clear()}var stub=__webpack_require__(229),tracking=__webpack_require__(230),ls="localStorage"in global&&global.localStorage?global.localStorage:stub;accessor.set=set,accessor.get=get,accessor.remove=remove,accessor.clear=clear,accessor.on=tracking.on,accessor.off=tracking.off,module.exports=accessor}).call(exports,function(){return this}())},function(module,exports){"use strict";function getItem(key){return key in ms?ms[key]:null}function setItem(key,value){return ms[key]=value,!0}function removeItem(key){var found=key in ms;return!!found&&delete ms[key]}function clear(){return ms={},!0}var ms={};module.exports={getItem:getItem,setItem:setItem,removeItem:removeItem,clear:clear}},function(module,exports){(function(global){"use strict";function listen(){global.addEventListener?global.addEventListener("storage",change,!1):global.attachEvent?global.attachEvent("onstorage",change):global.onstorage=change}function change(e){function fire(listener){listener(JSON.parse(e.newValue),JSON.parse(e.oldValue),e.url||e.uri)}e||(e=global.event);var all=listeners[e.key];all&&all.forEach(fire)}function on(key,fn){listeners[key]?listeners[key].push(fn):listeners[key]=[fn],listening===!1&&listen()}function off(key,fn){var ns=listeners[key];ns.length>1?ns.splice(ns.indexOf(fn),1):listeners[key]=[]}var listeners={},listening=!1;module.exports={on:on,off:off}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function randomString(size){var prefix=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return""+prefix+(0,_uid2.default)(size)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomString=randomString;var _uid=__webpack_require__(232),_uid2=_interopRequireDefault(_uid)},function(module,exports){function uid(len){return len=len||7,Math.random().toString(35).substr(2,len)}module.exports=uid},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkRack=exports.Middleware=exports.CacheRack=void 0;var _middleware=__webpack_require__(234),_rack=__webpack_require__(402),_rack2=_interopRequireDefault(_rack);exports.CacheRack=_rack.CacheRack,exports.Middleware=_middleware.Middleware,exports.NetworkRack=_rack.NetworkRack,exports.default=_rack2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerializeMiddleware=exports.ParseMiddleware=exports.HttpMiddleware=exports.CacheMiddleware=void 0;var _cache=__webpack_require__(235),_cache2=_interopRequireDefault(_cache),_middleware=__webpack_require__(238),_middleware2=_interopRequireDefault(_middleware),_http=__webpack_require__(359),_http2=_interopRequireDefault(_http),_parse=__webpack_require__(400),_parse2=_interopRequireDefault(_parse),_serialize=__webpack_require__(401),_serialize2=_interopRequireDefault(_serialize);exports.CacheMiddleware=_cache2.default,exports.HttpMiddleware=_http2.default,exports.ParseMiddleware=_parse2.default,exports.SerializeMiddleware=_serialize2.default,exports.default=_middleware2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(236),_middleware=__webpack_require__(238),_middleware2=_interopRequireDefault(_middleware),_storage=__webpack_require__(240),_storage2=_interopRequireDefault(_storage),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_isEmpty=__webpack_require__(358),_isEmpty2=_interopRequireDefault(_isEmpty),CacheMiddleware=function(_Middleware){function CacheMiddleware(){var name=arguments.length<=0||void 0===arguments[0]?"Cache Middleware":arguments[0];return _classCallCheck(this,CacheMiddleware),_possibleConstructorReturn(this,(CacheMiddleware.__proto__||Object.getPrototypeOf(CacheMiddleware)).call(this,name))}return _inherits(CacheMiddleware,_Middleware),_createClass(CacheMiddleware,[{key:"handle",value:function(){function handle(_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request){var method,body,appKey,collection,entityId,storage,data,response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(method=request.method,body=request.body,appKey=request.appKey,collection=request.collection,entityId=request.entityId,storage=new _storage2.default(appKey),data=void 0,response={statusCode:"POST"===method?201:200,headers:{},data:data},_context.prev=8,"GET"!==method){_context.next=21;break}if(!entityId){_context.next=16;break}return _context.next=13,storage.findById(collection,entityId);case 13:data=_context.sent,_context.next=19;break;case 16:return _context.next=18,storage.find(collection);case 18:data=_context.sent;case 19:_context.next=43;break;case 21:if("POST"!==method&&"PUT"!==method){_context.next=27;break}return _context.next=24,storage.save(collection,body);case 24:data=_context.sent,_context.next=43;break;case 27:if("DELETE"!==method){_context.next=43;break}if(!collection||!entityId){_context.next=34;break}return _context.next=31,storage.removeById(collection,entityId);case 31:data=_context.sent,_context.next=43;break;case 34:if(collection){_context.next=40;break}return _context.next=37,storage.clear();case 37:data=_context.sent,_context.next=43;break;case 40:return _context.next=42,storage.remove(collection,body);case 42:data=_context.sent;case 43:response.data=data,data&&!(0,_isEmpty2.default)(data)||(response.statusCode=204),_context.next=50;break;case 47:_context.prev=47,_context.t0=_context.catch(8),_context.t0 instanceof _errors.NotFoundError?response.statusCode=404:response.statusCode=500;case 50:return _context.abrupt("return",{response:response});case 51:case"end":return _context.stop()}},_callee,this,[[8,47]])}));return handle}()}]),CacheMiddleware}(_middleware2.default);exports.default=CacheMiddleware},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NotFoundError=void 0;var _notfound=__webpack_require__(237),_notfound2=_interopRequireDefault(_notfound);exports.NotFoundError=_notfound2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _es6Error=__webpack_require__(15),_es6Error2=_interopRequireDefault(_es6Error),NotFoundError=function(_ExtendableError){function NotFoundError(){return _classCallCheck(this,NotFoundError),_possibleConstructorReturn(this,(NotFoundError.__proto__||Object.getPrototypeOf(NotFoundError)).apply(this,arguments))}return _inherits(NotFoundError,_ExtendableError),NotFoundError}(_es6Error2.default);exports.default=NotFoundError},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_asciitree=__webpack_require__(239),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),Middleware=function(){function Middleware(){var name=arguments.length<=0||void 0===arguments[0]?"Middleware":arguments[0];_classCallCheck(this,Middleware),this.name=name}return _createClass(Middleware,[{key:"handle",value:function(){function handle(){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:throw new Error("A subclass middleware must override the handle function.");case 1:case"end":return _context.stop()}},_callee,this)}));return handle}()},{key:"generateTree",value:function(){var level=arguments.length<=0||void 0===arguments[0]?0:arguments[0],root={value:this.name,level:level,nodes:[]};return root}},{key:"toString",value:function(){var root=this.generateTree();return _asciitree.AsciiTree.generate(root)}}]),Middleware}();exports.default=Middleware},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function compose(node,end){if(0===node.level)return node.value;for(var ret="\r\n",c=end?c2:c0,i=1;i<node.level;i+=1)ret=""+ret+(levels[i]?" ":c3),ret+="  ";return""+ret+c+c1+" "+node.value}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),levels=[],c0=String.fromCharCode(9500),c1=String.fromCharCode(9472),c2=String.fromCharCode(9492),c3=String.fromCharCode(9474);exports.AsciiTree=function(){function AsciiTree(){_classCallCheck(this,AsciiTree)}return _createClass(AsciiTree,null,[{key:"generate",value:function(){var _this=this,tree=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],end=arguments[1],result=compose(tree,end);return tree.nodes.length>0&&!function(){var last=tree.nodes.length-1;tree.nodes.forEach(function(subTree,index){levels[subTree.level]=index===last,result+=_this.generate(subTree,index===last)})}(),result}}]),AsciiTree}()},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(236),_webstorage=__webpack_require__(241),_indexeddb=__webpack_require__(284),_indexeddb2=_interopRequireDefault(_indexeddb),_websql=__webpack_require__(349),_websql2=_interopRequireDefault(_websql),_titaniumdb=__webpack_require__(352),_titaniumdb2=_interopRequireDefault(_titaniumdb),_memory=__webpack_require__(353),_memory2=_interopRequireDefault(_memory),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_promiseQueue=__webpack_require__(355),_promiseQueue2=_interopRequireDefault(_promiseQueue),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||void 0||"_id",kmdAttribute=process&&process.env&&process.env.KINVEY_KMD_ATTRIBUTE||void 0||"_kmd";_promiseQueue2.default.configure(_promise2.default);var queue=new _promiseQueue2.default(1,1/0),StorageAdapter={IndexedDB:"IndexedDB",LocalStorage:"LocalStorage",Memory:"Memory",SessionStorage:"SessionStorage",TitaniumDB:"TitaniumDB",WebSQL:"WebSQL"};Object.freeze(StorageAdapter);var Storage=function(){function Storage(name){var _this=this,adapters=arguments.length<=1||void 0===arguments[1]?[StorageAdapter.TitaniumDB,StorageAdapter.WebSQL,StorageAdapter.IndexedDB,StorageAdapter.LocalStorage,StorageAdapter.SessionStorage,StorageAdapter.Memory]:arguments[1];if(_classCallCheck(this,Storage),!name)throw new Error("Unable to create a Storage instance without a name.");if(!(0,_isString2.default)(name))throw new Error("The name is not a string. A name must be a string to create a Storage instance.");(0,_isArray2.default)(adapters)||(adapters=[adapters]),adapters.some(function(adapter){switch(adapter){case StorageAdapter.IndexedDB:if(_indexeddb2.default.isSupported())return _this.adapter=new _indexeddb2.default(name),!0;break;case StorageAdapter.LocalStorage:if(_webstorage.LocalStorage.isSupported())return _this.adapter=new _webstorage.LocalStorage(name),!0;break;case StorageAdapter.SessionStorage:if(_webstorage.SessionStorage.isSupported())return _this.adapter=new _webstorage.SessionStorage(name),!0;break;case StorageAdapter.TitaniumDB:if(_titaniumdb2.default.isSupported())return _this.adapter=new _titaniumdb2.default(name),!0;break;case StorageAdapter.WebSQL:if(_websql2.default.isSupported())return _this.adapter=new _websql2.default(name),!0;break;case StorageAdapter.Memory:if(_memory2.default.isSupported())return _this.adapter=new _memory2.default(name),!0}return!1})}return _createClass(Storage,[{key:"generateObjectId",value:function(){for(var length=arguments.length<=0||void 0===arguments[0]?24:arguments[0],chars="abcdef0123456789",objectId="",i=0,j=chars.length;i<length;i+=1){var pos=Math.floor(Math.random()*j);objectId+=chars.substring(pos,pos+1)}return objectId}},{key:"find",value:function(){function find(_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(collection){var entities;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,this.adapter.find(collection);case 3:if(entities=_context.sent){_context.next=6;break}return _context.abrupt("return",[]);case 6:return _context.abrupt("return",entities);case 9:if(_context.prev=9,_context.t0=_context.catch(0),!(_context.t0 instanceof _errors.NotFoundError)){_context.next=13;break}return _context.abrupt("return",[]);case 13:throw _context.t0;case 14:case"end":return _context.stop()}},_callee,this,[[0,9]])}));return find}()},{key:"findById",value:function(){function findById(_x4,_x5){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(collection,id){return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if((0,_isString2.default)(id)){_context2.next=2;break}throw new Error("id must be a string",id);case 2:return _context2.abrupt("return",this.adapter.findById(collection,id));case 3:case"end":return _context2.stop()}},_callee2,this)}));return findById}()},{key:"save",value:function(collection){var _this2=this,entities=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return queue.add(_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(){var singular;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(singular=!1,entities){_context3.next=3;break}return _context3.abrupt("return",null);case 3:return(0,_isArray2.default)(entities)||(singular=!0,entities=[entities]),entities=entities.map(function(entity){var id=entity[idAttribute],kmd=entity[kmdAttribute]||{};return id||(id=_this2.generateObjectId(),kmd.local=!0),entity[idAttribute]=id,entity[kmdAttribute]=kmd,entity}),_context3.next=7,_this2.adapter.save(collection,entities);case 7:if(entities=_context3.sent,!(singular&&entities.length>0)){_context3.next=10;break}return _context3.abrupt("return",entities[0]);case 10:return _context3.abrupt("return",entities);case 11:case"end":return _context3.stop()}},_callee3,_this2)})))}},{key:"remove",value:function(){function remove(_x7,_x8){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(collection){var responses,_this3=this,entities=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_promise2.default.all(entities.map(function(entity){return _this3.removeById(collection,entity[idAttribute])}));case 2:return responses=_context4.sent,_context4.abrupt("return",responses.reduce(function(entities,entity){return entities.push(entity),entities},[]));case 4:case"end":return _context4.stop()}},_callee4,this)}));return remove}()},{key:"removeById",value:function(collection,id){var _this4=this;return queue.add(function(){if(id){if(!(0,_isString2.default)(id))throw new Error("id must be a string",id);return _this4.adapter.removeById(collection,id)}})}},{key:"clear",value:function(){var _this5=this;return queue.add(function(){return _this5.adapter.clear()})}}]),Storage}();exports.default=Storage}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process,global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionStorage=exports.LocalStorage=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(236),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_keyBy=__webpack_require__(242),_keyBy2=_interopRequireDefault(_keyBy),_merge=__webpack_require__(246),_merge2=_interopRequireDefault(_merge),_values=__webpack_require__(278),_values2=_interopRequireDefault(_values),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_findIndex=__webpack_require__(281),_findIndex2=_interopRequireDefault(_findIndex),_find=__webpack_require__(282),_find2=_interopRequireDefault(_find),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||void 0||"_id",masterCollectionName="master",WebStorage=function(){function WebStorage(){var name=arguments.length<=0||void 0===arguments[0]?"kinvey":arguments[0];_classCallCheck(this,WebStorage),this.name=name}return _createClass(WebStorage,[{key:"masterCollectionName",get:function(){return this.name+"_"+masterCollectionName}}]),WebStorage}();exports.default=WebStorage;exports.LocalStorage=function(_WebStorage){function LocalStorage(name){_classCallCheck(this,LocalStorage);var _this=_possibleConstructorReturn(this,(LocalStorage.__proto__||Object.getPrototypeOf(LocalStorage)).call(this,name));return global.localStorage.setItem(_this.masterCollectionName,JSON.stringify([])),_this}return _inherits(LocalStorage,_WebStorage),_createClass(LocalStorage,[{key:"find",value:function(){function find(_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(collection){var entities;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(entities=global.localStorage.getItem(""+this.name+collection),!entities){_context.next=3;break}return _context.abrupt("return",JSON.parse(entities));case 3:return _context.abrupt("return",entities);case 4:case"end":return _context.stop()}},_callee,this)}));return find}()},{key:"findById",value:function(){function findById(_x3,_x4){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(collection,id){var entities,entity;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.find(collection);case 2:if(entities=_context2.sent,entity=(0,_find2.default)(entities,function(entity){return entity[idAttribute]===id})){_context2.next=6;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+this.name+" localstorage database."));case 6:return _context2.abrupt("return",entity);case 7:case"end":return _context2.stop()}},_callee2,this)}));return findById}()},{key:"save",value:function(){function save(_x5,_x6){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(collection,entities){var collections,existingEntities,existingEntitiesById,entitiesById,existingEntityIds;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this.find(this.masterCollectionName);case 2:return collections=_context3.sent,(0,_findIndex2.default)(collections,collection)===-1&&(collections.push(collection),global.localStorage.setItem(this.masterCollectionName,JSON.stringify(collections))),_context3.next=6,this.find(collection);case 6:return existingEntities=_context3.sent,existingEntitiesById=(0,_keyBy2.default)(existingEntities,idAttribute),entitiesById=(0,_keyBy2.default)(entities,idAttribute),existingEntityIds=Object.keys(existingEntitiesById),(0,_forEach2.default)(existingEntityIds,function(id){var existingEntity=existingEntitiesById[id],entity=entitiesById[id];entity&&(entitiesById[id]=(0,_merge2.default)(existingEntity,entity))}),global.localStorage.setItem(""+this.name+collection,JSON.stringify((0,_values2.default)(entitiesById))),_context3.abrupt("return",entities);case 13:case"end":return _context3.stop()}},_callee3,this)}));return save}()},{key:"removeById",value:function(){function removeById(_x7,_x8){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(collection,id){var entities,entitiesById,entity;return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.find(collection);case 2:if(entities=_context4.sent,entitiesById=(0,_keyBy2.default)(entities,idAttribute),entity=entitiesById[id]){_context4.next=7;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+" "+("collection on the "+this.name+" memory database."));case 7:return delete entitiesById[id],_context4.next=10,this.save(collection,(0,_values2.default)(entitiesById));case 10:return _context4.abrupt("return",entity);case 11:case"end":return _context4.stop()}},_callee4,this)}));return removeById}()},{key:"clear",value:function(){function clear(){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(){var collections,_this2=this;return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,this.find(this.masterCollectionName);case 2:collections=_context5.sent,(0,_forEach2.default)(collections,function(collection){global.localStorage.removeItem(""+_this2.name+collection)}),global.localStorage.setItem(this.masterCollectionName,JSON.stringify([]));case 5:case"end":return _context5.stop()}},_callee5,this)}));return clear}()}],[{key:"isSupported",value:function(){if(global.localStorage){var item="testLocalStorageSupport";try{return global.localStorage.setItem(item,item),global.localStorage.removeItem(item),!0}catch(e){return!1}}return!1}}]),LocalStorage}(WebStorage),exports.SessionStorage=function(_WebStorage2){function SessionStorage(name){_classCallCheck(this,SessionStorage);var _this3=_possibleConstructorReturn(this,(SessionStorage.__proto__||Object.getPrototypeOf(SessionStorage)).call(this,name));return global.sessionStorage.setItem(_this3.masterCollectionName,JSON.stringify([])),_this3}return _inherits(SessionStorage,_WebStorage2),_createClass(SessionStorage,[{key:"find",value:function(){function find(_x9){return _ref6.apply(this,arguments)}var _ref6=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee6(collection){var entities;return _regeneratorRuntime2.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(entities=global.sessionStorage.getItem(""+this.name+collection),!entities){_context6.next=3;break}return _context6.abrupt("return",JSON.parse(entities));case 3:return _context6.abrupt("return",entities);case 4:case"end":return _context6.stop()}},_callee6,this)}));return find}()},{key:"findById",value:function(){function findById(_x10,_x11){return _ref7.apply(this,arguments)}var _ref7=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee7(collection,id){var entities,entity;return _regeneratorRuntime2.default.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,this.find(collection);case 2:if(entities=_context7.sent,entity=(0,_find2.default)(entities,function(entity){return entity[idAttribute]===id})){_context7.next=6;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+this.name+" localstorage database."));case 6:return _context7.abrupt("return",entity);case 7:case"end":return _context7.stop()}},_callee7,this)}));return findById}()},{key:"save",value:function(){function save(_x12,_x13){return _ref8.apply(this,arguments)}var _ref8=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee8(collection,entities){var collections,existingEntities,existingEntitiesById,entitiesById,existingEntityIds;return _regeneratorRuntime2.default.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,this.find(this.masterCollectionName);case 2:return collections=_context8.sent,(0,_findIndex2.default)(collections,collection)===-1&&(collections.push(collection),global.sessionStorage.setItem(this.masterCollectionName,JSON.stringify(collections))),_context8.next=6,this.find(collection);case 6:return existingEntities=_context8.sent,existingEntitiesById=(0,_keyBy2.default)(existingEntities,idAttribute),entitiesById=(0,_keyBy2.default)(entities,idAttribute),existingEntityIds=Object.keys(existingEntitiesById),(0,_forEach2.default)(existingEntityIds,function(id){var existingEntity=existingEntitiesById[id],entity=entitiesById[id];entity&&(entitiesById[id]=(0,_merge2.default)(existingEntity,entity))}),global.sessionStorage.setItem(""+this.name+collection,JSON.stringify((0,_values2.default)(entitiesById))),_context8.abrupt("return",entities);case 13:case"end":return _context8.stop()}},_callee8,this)}));return save}()},{key:"removeById",value:function(){function removeById(_x14,_x15){return _ref9.apply(this,arguments)}var _ref9=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee9(collection,id){var entities,entitiesById,entity;return _regeneratorRuntime2.default.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,this.find(collection);case 2:if(entities=_context9.sent,entitiesById=(0,_keyBy2.default)(entities,idAttribute),entity=entitiesById[id]){_context9.next=7;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+" "+("collection on the "+this.name+" memory database."));case 7:return delete entitiesById[id],global.sessionStorage.setItem(""+this.name+collection,JSON.stringify((0,_values2.default)(entitiesById))),_context9.abrupt("return",entity);case 10:case"end":return _context9.stop()}},_callee9,this)}));return removeById}()},{key:"clear",value:function(){function clear(){return _ref10.apply(this,arguments)}var _ref10=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee10(){var collections,_this4=this;return _regeneratorRuntime2.default.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,this.find(this.masterCollectionName);case 2:collections=_context10.sent,(0,_forEach2.default)(collections,function(collection){global.sessionStorage.removeItem(""+_this4.name+collection)}),global.sessionStorage.setItem(this.masterCollectionName,JSON.stringify([]));case 5:case"end":return _context10.stop()}},_callee10,this)}));return clear}()}],[{key:"isSupported",value:function(){if(global.sessionStorage){var item="testSessionStorageSupport";try{return global.sessionStorage.setItem(item,item),global.sessionStorage.removeItem(item),!0}catch(e){return!1}}return!1}}]),SessionStorage}(WebStorage)}).call(exports,__webpack_require__(9),function(){return this}())},function(module,exports,__webpack_require__){var baseAssignValue=__webpack_require__(134),createAggregator=__webpack_require__(243),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});module.exports=keyBy},function(module,exports,__webpack_require__){function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,baseIteratee(iteratee,2),accumulator)}}var arrayAggregator=__webpack_require__(244),baseAggregator=__webpack_require__(245),baseIteratee=__webpack_require__(41),isArray=__webpack_require__(34);module.exports=createAggregator},function(module,exports){function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=array?array.length:0;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}module.exports=arrayAggregator},function(module,exports,__webpack_require__){function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}var baseEach=__webpack_require__(20);module.exports=baseAggregator},function(module,exports,__webpack_require__){var baseMerge=__webpack_require__(247),createAssigner=__webpack_require__(136),merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});module.exports=merge},function(module,exports,__webpack_require__){function baseMerge(object,source,srcIndex,customizer,stack){if(object!==source){if(!isArray(source)&&!isTypedArray(source))var props=baseKeysIn(source);arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObject(srcValue))stack||(stack=new Stack),baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}})}}var Stack=__webpack_require__(44),arrayEach=__webpack_require__(19),assignMergeValue=__webpack_require__(248),baseKeysIn=__webpack_require__(249),baseMergeDeep=__webpack_require__(251),isArray=__webpack_require__(34),isObject=__webpack_require__(31),isTypedArray=__webpack_require__(102);module.exports=baseMerge},function(module,exports,__webpack_require__){function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&("number"!=typeof key||void 0!==value||key in object)||baseAssignValue(object,key,value)}var baseAssignValue=__webpack_require__(134),eq=__webpack_require__(49);module.exports=assignMergeValue},function(module,exports,__webpack_require__){function baseKeysIn(object){if(!isObject(object))return nativeKeysIn(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}var isObject=__webpack_require__(31),isPrototype=__webpack_require__(37),nativeKeysIn=__webpack_require__(250),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=baseKeysIn},function(module,exports){function nativeKeysIn(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}module.exports=nativeKeysIn},function(module,exports,__webpack_require__){function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;isCommon&&(newValue=srcValue,isArray(srcValue)||isTypedArray(srcValue)?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):(isCommon=!1,newValue=baseClone(srcValue,!0)):isPlainObject(srcValue)||isArguments(srcValue)?isArguments(objValue)?newValue=toPlainObject(objValue):!isObject(objValue)||srcIndex&&isFunction(objValue)?(isCommon=!1,newValue=baseClone(srcValue,!0)):newValue=objValue:isCommon=!1),isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue)}var assignMergeValue=__webpack_require__(248),baseClone=__webpack_require__(252),copyArray=__webpack_require__(208),isArguments=__webpack_require__(27),isArray=__webpack_require__(34),isArrayLikeObject=__webpack_require__(28),isFunction=__webpack_require__(30),isObject=__webpack_require__(31),isPlainObject=__webpack_require__(130),isTypedArray=__webpack_require__(102),toPlainObject=__webpack_require__(276);module.exports=baseMergeDeep},function(module,exports,__webpack_require__){function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=initCloneObject(isFunc?{}:value),!isDeep)return copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?getAllKeys(value):keys(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))}),result}var Stack=__webpack_require__(44),arrayEach=__webpack_require__(19),assignValue=__webpack_require__(133),baseAssign=__webpack_require__(253),cloneBuffer=__webpack_require__(254),copyArray=__webpack_require__(208),copySymbols=__webpack_require__(255),getAllKeys=__webpack_require__(258),getTag=__webpack_require__(96),initCloneArray=__webpack_require__(261),initCloneByTag=__webpack_require__(262),initCloneObject=__webpack_require__(273),isArray=__webpack_require__(34),isBuffer=__webpack_require__(274),isObject=__webpack_require__(31),keys=__webpack_require__(24),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1,module.exports=baseClone},function(module,exports,__webpack_require__){function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}var copyObject=__webpack_require__(135),keys=__webpack_require__(24);module.exports=baseAssign},function(module,exports){function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}module.exports=cloneBuffer},function(module,exports,__webpack_require__){function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}var copyObject=__webpack_require__(135),getSymbols=__webpack_require__(256);module.exports=copySymbols},function(module,exports,__webpack_require__){var overArg=__webpack_require__(39),stubArray=__webpack_require__(257),nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray;module.exports=getSymbols},function(module,exports){function stubArray(){return[]}module.exports=stubArray},function(module,exports,__webpack_require__){function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var baseGetAllKeys=__webpack_require__(259),getSymbols=__webpack_require__(256),keys=__webpack_require__(24);module.exports=getAllKeys},function(module,exports,__webpack_require__){function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}var arrayPush=__webpack_require__(260),isArray=__webpack_require__(34);module.exports=baseGetAllKeys},function(module,exports){function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}module.exports=arrayPush},function(module,exports){function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=initCloneArray},function(module,exports,__webpack_require__){function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}var cloneArrayBuffer=__webpack_require__(263),cloneDataView=__webpack_require__(264),cloneMap=__webpack_require__(265),cloneRegExp=__webpack_require__(268),cloneSet=__webpack_require__(269),cloneSymbol=__webpack_require__(271),cloneTypedArray=__webpack_require__(272),boolTag="[object Boolean]",dateTag="[object Date]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";module.exports=initCloneByTag},function(module,exports,__webpack_require__){function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}var Uint8Array=__webpack_require__(92);module.exports=cloneArrayBuffer},function(module,exports,__webpack_require__){function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}var cloneArrayBuffer=__webpack_require__(263);module.exports=cloneDataView},function(module,exports,__webpack_require__){function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}var addMapEntry=__webpack_require__(266),arrayReduce=__webpack_require__(267),mapToArray=__webpack_require__(93);module.exports=cloneMap},function(module,exports){function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}module.exports=addMapEntry},function(module,exports){function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}module.exports=arrayReduce},function(module,exports){function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}var reFlags=/\w*$/;module.exports=cloneRegExp},function(module,exports,__webpack_require__){function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),!0):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}var addSetEntry=__webpack_require__(270),arrayReduce=__webpack_require__(267),setToArray=__webpack_require__(94);module.exports=cloneSet},function(module,exports){function addSetEntry(set,value){return set.add(value),set}module.exports=addSetEntry},function(module,exports,__webpack_require__){function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}var Symbol=__webpack_require__(91),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=cloneSymbol},function(module,exports,__webpack_require__){function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}var cloneArrayBuffer=__webpack_require__(263);module.exports=cloneTypedArray},function(module,exports,__webpack_require__){function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}var baseCreate=__webpack_require__(191),getPrototype=__webpack_require__(131),isPrototype=__webpack_require__(37);module.exports=initCloneObject},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(63),stubFalse=__webpack_require__(275),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer}).call(exports,__webpack_require__(106)(module))},function(module,exports){function stubFalse(){return!1}module.exports=stubFalse},function(module,exports,__webpack_require__){function toPlainObject(value){return copyObject(value,keysIn(value))}var copyObject=__webpack_require__(135),keysIn=__webpack_require__(277);module.exports=toPlainObject},function(module,exports,__webpack_require__){function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var arrayLikeKeys=__webpack_require__(25),baseKeysIn=__webpack_require__(249),isArrayLike=__webpack_require__(29);module.exports=keysIn},function(module,exports,__webpack_require__){function values(object){return object?baseValues(object,keys(object)):[]}var baseValues=__webpack_require__(279),keys=__webpack_require__(24);module.exports=values},function(module,exports,__webpack_require__){function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}var arrayMap=__webpack_require__(280);module.exports=baseValues},function(module,exports){function arrayMap(array,iteratee){for(var index=-1,length=array?array.length:0,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}module.exports=arrayMap},function(module,exports,__webpack_require__){function findIndex(array,predicate,fromIndex){var length=array?array.length:0;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,baseIteratee(predicate,3),index)}var baseFindIndex=__webpack_require__(216),baseIteratee=__webpack_require__(41),toInteger=__webpack_require__(224),nativeMax=Math.max;module.exports=findIndex},function(module,exports,__webpack_require__){var createFind=__webpack_require__(283),findIndex=__webpack_require__(281),find=createFind(findIndex);module.exports=find},function(module,exports,__webpack_require__){function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=baseIteratee(predicate,3);collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:void 0}}var baseIteratee=__webpack_require__(41),isArrayLike=__webpack_require__(29),keys=__webpack_require__(24);module.exports=createFind},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(236),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction),dbCache={},TransactionMode={ReadWrite:"readwrite",ReadOnly:"readonly"};Object.freeze(TransactionMode);var IndexedDB=function(){function IndexedDB(name){if(_classCallCheck(this,IndexedDB),!name)throw new Error("A name is required to use the IndexedDB adapter.",name);if(!(0,_isString2.default)(name))throw new Error("The name must be a string to use the IndexedDB adapter",name);this.name=name,this.inTransaction=!1,this.queue=[]}return _createClass(IndexedDB,[{key:"openTransaction",value:function(collection){var write=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],success=arguments[2],_this=this,error=arguments[3],force=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],indexedDB=global.indexedDB||global.webkitIndexedDB||global.mozIndexedDB||global.msIndexedDB,db=dbCache[this.name];if(db){var containsCollection=(0,_isFunction2.default)(db.objectStoreNames.contains)?db.objectStoreNames.contains(collection):db.objectStoreNames.indexOf(collection)!==-1;if(containsCollection)try{var mode=write?TransactionMode.ReadWrite:TransactionMode.ReadOnly,txn=db.transaction(collection,mode);if(txn)return success(txn);throw new Error("Unable to open a transaction for "+collection+(" collection on the "+this.name+" IndexedDB database."))}catch(err){return error(err)}else if(!write)return error(new _errors.NotFoundError("The "+collection+" collection was not found on"+(" the "+this.name+" IndexedDB database.")))}if(!force&&this.inTransaction)return this.queue.push(function(){
_this.openTransaction(collection,write,success,error)});this.inTransaction=!0;var request=void 0;if(db){var version=db.version+1;db.close(),request=indexedDB.open(this.name,version)}else request=indexedDB.open(this.name);return request.onupgradeneeded=function(e){db=e.target.result,dbCache[_this.name]=db,write&&db.createObjectStore(collection,{keyPath:"_id"})},request.onsuccess=function(e){db=e.target.result,dbCache[_this.name]=db,db.onversionchange=function(){db&&(db.close(),db=null,dbCache[_this.name]=null)};var wrap=function(done){var callbackFn=function(arg){if(done(arg),_this.inTransaction=!1,_this.queue.length>0){var pending=_this.queue;_this.queue=[],(0,_forEach2.default)(pending,function(fn){fn.call(_this)})}};return callbackFn};return _this.openTransaction(collection,write,wrap(success),wrap(error),!0)},request.onblocked=function(){error(new Error("The "+_this.name+" IndexedDB database version can't be upgraded because the database is already open."))},request.onerror=function(e){error(new Error("Unable to open the "+_this.name+" IndexedDB database."+(" "+e.target.error.message+".")))},request}},{key:"find",value:function(){function find(_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(collection){var _this2=this;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new _promise2.default(function(resolve,reject){_this2.openTransaction(collection,!1,function(txn){var store=txn.objectStore(collection),request=store.openCursor(),entities=[];request.onsuccess=function(e){var cursor=e.target.result;return cursor?(entities.push(cursor.value),cursor.continue()):resolve(entities)},request.onerror=function(e){reject(e)}},reject)}));case 1:case"end":return _context.stop()}},_callee,this)}));return find}()},{key:"findById",value:function(){function findById(_x4,_x5){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(collection,id){var _this3=this;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",new _promise2.default(function(resolve,reject){_this3.openTransaction(collection,!1,function(txn){var store=txn.objectStore(collection),request=store.get(id);request.onsuccess=function(e){var entity=e.target.result;entity?resolve(entity):reject(new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+_this3.name+" IndexedDB database.")))},request.onerror=function(){reject(new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+_this3.name+" IndexedDB database.")))}},reject)}));case 1:case"end":return _context2.stop()}},_callee2,this)}));return findById}()},{key:"save",value:function(){function save(_x6,_x7){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(collection,entities){var singular,_this4=this;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(singular=!1,(0,_isArray2.default)(entities)||(singular=!0,entities=[entities]),0!==entities.length){_context3.next=4;break}return _context3.abrupt("return",null);case 4:return _context3.abrupt("return",new _promise2.default(function(resolve,reject){_this4.openTransaction(collection,!0,function(txn){var store=txn.objectStore(collection);(0,_forEach2.default)(entities,function(entity){store.put(entity)}),txn.oncomplete=function(){resolve(singular?entities[0]:entities)},txn.onerror=function(e){reject(new Error("An error occurred while saving the entities to the "+collection+(" collection on the "+_this4.name+" IndexedDB database. "+e.target.error.message+".")))}},reject)}));case 5:case"end":return _context3.stop()}},_callee3,this)}));return save}()},{key:"removeById",value:function(){function removeById(_x8,_x9){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(collection,id){var _this5=this;return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",new _promise2.default(function(resolve,reject){_this5.openTransaction(collection,!0,function(txn){var store=txn.objectStore(collection),request=store.get(id);store.delete(id),txn.oncomplete=function(){var entity=request.result;entity?resolve(entity):reject(new _errors.NotFoundError("An entity with id = "+id+" was not found in the "+collection+(" collection on the "+_this5.name+" IndexedDB database.")))},txn.onerror=function(){reject(new _errors.NotFoundError("An entity with id = "+id+" was not found in the "+collection+(" collection on the "+_this5.name+" IndexedDB database.")))}},reject)}));case 1:case"end":return _context4.stop()}},_callee4,this)}));return removeById}()},{key:"clear",value:function(){function clear(){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(){var _this6=this;return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",new _promise2.default(function(resolve,reject){var indexedDB=global.indexedDB||global.webkitIndexedDB||global.mozIndexedDB||global.msIndexedDB,request=indexedDB.deleteDatabase(_this6.name);request.onsuccess=function(){dbCache={},resolve()},request.onerror=function(e){reject(new Error("An error occurred while clearing the "+_this6.name+" IndexedDB database."+(" "+e.target.error.message+".")))}}));case 1:case"end":return _context5.stop()}},_callee5,this)}));return clear}()}],[{key:"isSupported",value:function(){var indexedDB=global.indexedDB||global.webkitIndexedDB||global.mozIndexedDB||global.msIndexedDB;return!!indexedDB}}]),IndexedDB}();exports.default=IndexedDB}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){__webpack_require__(286),__webpack_require__(306),__webpack_require__(332),__webpack_require__(336),module.exports=__webpack_require__(305).Promise},function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(287),test={};test[__webpack_require__(289)("toStringTag")]="z",test+""!="[object z]"&&__webpack_require__(293)(Object.prototype,"toString",function(){return"[object "+classof(this)+"]"},!0)},function(module,exports,__webpack_require__){var cof=__webpack_require__(288),TAG=__webpack_require__(289)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=tryGet(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var store=__webpack_require__(290)("wks"),uid=__webpack_require__(292),Symbol=__webpack_require__(291).Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},function(module,exports,__webpack_require__){var global=__webpack_require__(291),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports,__webpack_require__){var global=__webpack_require__(291),hide=__webpack_require__(294),has=__webpack_require__(304),SRC=__webpack_require__(292)("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);__webpack_require__(305).inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(has(val,"name")||hide(val,"name",key)),O[key]!==val&&(isFunction&&(has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===global?O[key]=val:safe?O[key]?O[key]=val:hide(O,key,val):(delete O[key],hide(O,key,val)))})(Function.prototype,TO_STRING,function(){return"function"==typeof this&&this[SRC]||$toString.call(this)})},function(module,exports,__webpack_require__){var dP=__webpack_require__(295),createDesc=__webpack_require__(303);module.exports=__webpack_require__(299)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(296),IE8_DOM_DEFINE=__webpack_require__(298),toPrimitive=__webpack_require__(302),dP=Object.defineProperty;exports.f=__webpack_require__(299)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(297);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(299)&&!__webpack_require__(300)(function(){return 7!=Object.defineProperty(__webpack_require__(301)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(300)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(297),document=__webpack_require__(291).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(297);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(307)(!0);__webpack_require__(310)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(308),defined=__webpack_require__(309);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(311),$export=__webpack_require__(312),redefine=__webpack_require__(293),hide=__webpack_require__(294),has=__webpack_require__(304),Iterators=__webpack_require__(315),$iterCreate=__webpack_require__(316),setToStringTag=__webpack_require__(329),getPrototypeOf=__webpack_require__(330),ITERATOR=__webpack_require__(289)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function(){return new Constructor(this,kind)};case VALUES:return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)),IteratorPrototype!==Object.prototype&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis))),DEF_VALUES&&$native&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports){module.exports=!1},function(module,exports,__webpack_require__){var global=__webpack_require__(291),core=__webpack_require__(305),hide=__webpack_require__(294),redefine=__webpack_require__(293),ctx=__webpack_require__(313),PROTOTYPE="prototype",$export=function(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE],exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&void 0!==target[key],out=(own?target:source)[key],exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,target&&redefine(target,key,out,type&$export.U),exports[key]!=out&&hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};global.core=core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(314);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(317),descriptor=__webpack_require__(303),setToStringTag=__webpack_require__(329),IteratorPrototype={};__webpack_require__(294)(IteratorPrototype,__webpack_require__(289)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(296),dPs=__webpack_require__(318),enumBugKeys=__webpack_require__(327),IE_PROTO=__webpack_require__(326)("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var iframeDocument,iframe=__webpack_require__(301)("iframe"),i=enumBugKeys.length,lt="<",gt=">";for(iframe.style.display="none",__webpack_require__(328).appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty[PROTOTYPE]=anObject(O),result=new Empty,Empty[PROTOTYPE]=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports,__webpack_require__){var dP=__webpack_require__(295),anObject=__webpack_require__(296),getKeys=__webpack_require__(319);module.exports=__webpack_require__(299)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(320),enumBugKeys=__webpack_require__(327);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var has=__webpack_require__(304),toIObject=__webpack_require__(321),arrayIndexOf=__webpack_require__(323)(!1),IE_PROTO=__webpack_require__(326)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(322),defined=__webpack_require__(309);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(288);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(321),toLength=__webpack_require__(324),toIndex=__webpack_require__(325);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(308),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(308),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},function(module,exports,__webpack_require__){var shared=__webpack_require__(290)("keys"),uid=__webpack_require__(292);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(291).document&&document.documentElement},function(module,exports,__webpack_require__){var def=__webpack_require__(295).f,has=__webpack_require__(304),TAG=__webpack_require__(289)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports,__webpack_require__){var has=__webpack_require__(304),toObject=__webpack_require__(331),IE_PROTO=__webpack_require__(326)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports,__webpack_require__){var defined=__webpack_require__(309);module.exports=function(it){return Object(defined(it))}},function(module,exports,__webpack_require__){for(var $iterators=__webpack_require__(333),redefine=__webpack_require__(293),global=__webpack_require__(291),hide=__webpack_require__(294),Iterators=__webpack_require__(315),wks=__webpack_require__(289),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var key,NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto){proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues;for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}}},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(334),step=__webpack_require__(335),Iterators=__webpack_require__(315),toIObject=__webpack_require__(321);module.exports=__webpack_require__(310)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(289)("unscopables"),ArrayProto=Array.prototype;void 0==ArrayProto[UNSCOPABLES]&&__webpack_require__(294)(ArrayProto,UNSCOPABLES,{}),module.exports=function(key){ArrayProto[UNSCOPABLES][key]=!0}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){"use strict";var Internal,GenericPromiseCapability,Wrapper,LIBRARY=__webpack_require__(311),global=__webpack_require__(291),ctx=__webpack_require__(313),classof=__webpack_require__(287),$export=__webpack_require__(312),isObject=__webpack_require__(297),aFunction=__webpack_require__(314),anInstance=__webpack_require__(337),forOf=__webpack_require__(338),speciesConstructor=__webpack_require__(342),task=__webpack_require__(343).set,microtask=__webpack_require__(345)(),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode="process"==classof(process),empty=function(){},USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[__webpack_require__(289)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),sameConstructor=function(a,b){return a===b||a===$Promise&&b===Wrapper},isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},newPromiseCapability=function(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)},PromiseCapability=GenericPromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)},perform=function(exec){try{exec()}catch(e){return{error:e}}},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),handler===!0?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var abrupt,handler,console,value=promise._v;if(isUnhandled(promise)&&(abrupt=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,abrupt)throw abrupt.error})},isUnhandled=function(promise){if(1==promise._h)return!1;for(var reaction,chain=promise._a||promise._c,i=0;chain.length>i;)if(reaction=chain[i++],reaction.fail||!isUnhandled(reaction.promise))return!1;return!0},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,promise=promise._w||promise,promise._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,PROMISE,"_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=__webpack_require__(346)($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),PromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),__webpack_require__(329)($Promise,PROMISE),__webpack_require__(347)(PROMISE),Wrapper=__webpack_require__(305)[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function(r){var capability=newPromiseCapability(this),$$reject=capability.reject;return $$reject(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;return $$resolve(x),capability.promise}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(348)(function(iter){$Promise.all(iter).catch(empty)})),PROMISE,{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,abrupt=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return abrupt&&reject(abrupt.error),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,abrupt=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return abrupt&&reject(abrupt.error),capability.promise}})},function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(313),call=__webpack_require__(339),isArrayIter=__webpack_require__(340),anObject=__webpack_require__(296),toLength=__webpack_require__(324),getIterFn=__webpack_require__(341),BREAK={},RETURN={},exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if(result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]),result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if(result=call(iterator,f,step.value,entries),result===BREAK||result===RETURN)return result};exports.BREAK=BREAK,exports.RETURN=RETURN},function(module,exports,__webpack_require__){var anObject=__webpack_require__(296);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(315),ITERATOR=__webpack_require__(289)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(287),ITERATOR=__webpack_require__(289)("iterator"),Iterators=__webpack_require__(315);module.exports=__webpack_require__(305).getIteratorMethod=function(it){if(void 0!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(296),aFunction=__webpack_require__(314),SPECIES=__webpack_require__(289)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(313),invoke=__webpack_require__(344),html=__webpack_require__(328),cel=__webpack_require__(301),global=__webpack_require__(291),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function(){
var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==__webpack_require__(288)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){var global=__webpack_require__(291),macrotask=__webpack_require__(343).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(288)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(Observer){var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},function(module,exports,__webpack_require__){var redefine=__webpack_require__(293);module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(291),dP=__webpack_require__(295),DESCRIPTORS=__webpack_require__(299),SPECIES=__webpack_require__(289)("species");module.exports=function(KEY){var C=global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(289)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports,__webpack_require__){(function(process,global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(236),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_map=__webpack_require__(350),_map2=_interopRequireDefault(_map),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||void 0||"_id",masterCollectionName="sqlite_master",size=5e6,dbCache={},WebSQL=function(){function WebSQL(){var name=arguments.length<=0||void 0===arguments[0]?"kinvey":arguments[0];_classCallCheck(this,WebSQL),this.name=name}return _createClass(WebSQL,[{key:"openDatabase",value:function(){var db=dbCache[this.name];return db||(db=global.openDatabase(this.name,1,"",size),dbCache[this.name]=db),db}},{key:"openTransaction",value:function(collection,query,parameters){var _this=this,write=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],db=this.openDatabase(),escapedCollection='"'+collection+'"',isMaster=collection===masterCollectionName,isMulti=(0,_isArray2.default)(query);query=isMulti?query:[[query,parameters]];var promise=new _promise2.default(function(resolve,reject){var writeTxn=write||!(0,_isFunction2.default)(db.readTransaction);db[writeTxn?"transaction":"readTransaction"](function(tx){write&&!isMaster&&tx.executeSql("CREATE TABLE IF NOT EXISTS "+escapedCollection+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)");var pending=query.length,responses=[];0===pending?resolve(isMulti?responses:responses.shift()):(0,_forEach2.default)(query,function(parts){var sql=parts[0].replace("#{collection}",escapedCollection);tx.executeSql(sql,parts[1],function(_,resultSet){var response={rowCount:resultSet.rowsAffected,result:[]};if(resultSet.rows.length)for(var i=0,len=resultSet.rows.length;i<len;i+=1)try{var value=resultSet.rows.item(i).value,entity=isMaster?value:JSON.parse(value);response.result.push(entity)}catch(error){}responses.push(response),pending-=1,0===pending&&resolve(isMulti?responses:responses.shift())})})},function(error){if(error=(0,_isString2.default)(error)?error:error.message,error&&error.indexOf("no such table")===-1)return reject(new _errors.NotFoundError("The "+collection+" collection was not found on"+(" the "+_this.name+" WebSQL database.")));var query="SELECT name AS value from #{collection} WHERE type = ? AND name = ?",parameters=["table",collection];return _this.openTransaction(masterCollectionName,query,parameters).then(function(response){return reject(0===response.result.length?new _errors.NotFoundError("The "+collection+" collection was not found on"+(" the "+_this.name+" WebSQL database.")):new Error("Unable to open a transaction for the "+collection+(" collection on the "+_this.name+" WebSQL database.")))}).catch(function(error){reject(new Error("Unable to open a transaction for the "+collection+(" collection on the "+_this.name+" WebSQL database."),error))})})});return promise}},{key:"find",value:function(){function find(_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(collection){var sql,response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return sql="SELECT value FROM #{collection}",_context.next=3,this.openTransaction(collection,sql,[]);case 3:return response=_context.sent,_context.abrupt("return",response.result);case 5:case"end":return _context.stop()}},_callee,this)}));return find}()},{key:"findById",value:function(){function findById(_x4,_x5){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(collection,id){var sql,response,entities;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return sql="SELECT value FROM #{collection} WHERE key = ?",_context2.next=3,this.openTransaction(collection,sql,[id]);case 3:if(response=_context2.sent,entities=response.result,0!==entities.length){_context2.next=7;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+this.name+" WebSQL database."));case 7:return _context2.abrupt("return",entities[0]);case 8:case"end":return _context2.stop()}},_callee2,this)}));return findById}()},{key:"save",value:function(){function save(_x6,_x7){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(collection,entities){var queries;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return queries=[],entities=(0,_map2.default)(entities,function(entity){return queries.push(["REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[entity[idAttribute],JSON.stringify(entity)]]),entity}),_context3.next=4,this.openTransaction(collection,queries,null,!0);case 4:return _context3.abrupt("return",entities);case 5:case"end":return _context3.stop()}},_callee3,this)}));return save}()},{key:"removeById",value:function(){function removeById(_x8,_x9){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(collection,id){var queries,response,entities,count;return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return queries=[["SELECT value FROM #{collection} WHERE key = ?",[id]],["DELETE FROM #{collection} WHERE key = ?",[id]]],_context4.next=3,this.openTransaction(collection,queries,null,!0);case 3:if(response=_context4.sent,entities=response[0].result,count=response[1].rowCount,count=count||entities.length,0!==count){_context4.next=9;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+this.name+" WebSQL database."));case 9:return _context4.abrupt("return",entities[0]);case 10:case"end":return _context4.stop()}},_callee4,this)}));return removeById}()},{key:"clear",value:function(){function clear(){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(){var response,tables,queries;return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,this.openTransaction(masterCollectionName,"SELECT name AS value FROM #{collection} WHERE type = ?",["table"],!1);case 2:if(response=_context5.sent,tables=response.result,0!==tables.length){_context5.next=6;break}return _context5.abrupt("return",null);case 6:return queries=tables.filter(function(table){return/^[a-zA-Z0-9\-]{1,128}/.test(table)}).map(function(table){return["DROP TABLE IF EXISTS '"+table+"'"]}),_context5.next=9,this.openTransaction(masterCollectionName,queries,null,!0);case 9:return dbCache={},_context5.abrupt("return",null);case 11:case"end":return _context5.stop()}},_callee5,this)}));return clear}()}],[{key:"isSupported",value:function(){return!!global.openDatabase}}]),WebSQL}();exports.default=WebSQL}).call(exports,__webpack_require__(9),function(){return this}())},function(module,exports,__webpack_require__){function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee,3))}var arrayMap=__webpack_require__(280),baseIteratee=__webpack_require__(41),baseMap=__webpack_require__(351),isArray=__webpack_require__(34);module.exports=map},function(module,exports,__webpack_require__){function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}var baseEach=__webpack_require__(20),isArrayLike=__webpack_require__(29);module.exports=baseMap},function(module,exports,__webpack_require__){(function(global,process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(236),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_map=__webpack_require__(350),_map2=_interopRequireDefault(_map),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction),Titanium=global.Titanium,idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||void 0||"_id",TitaniumDB=function(){function TitaniumDB(){var name=arguments.length<=0||void 0===arguments[0]?"kinvey":arguments[0];_classCallCheck(this,TitaniumDB),this.name=name}return _createClass(TitaniumDB,[{key:"execute",value:function(){function execute(_x2,_x3,_x4){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(collection,query,parameters){var escapedCollection,isMulti,response,_this=this;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return escapedCollection='"'+collection+'"',isMulti=(0,_isArray2.default)(query),query=isMulti?query:[[query,parameters]],_context.prev=3,this.db||(this.db=Titanium.Database.open(this.name)),this.db.execute("BEGIN TRANSACTION"),this.db.execute("CREATE TABLE IF NOT EXISTS "+escapedCollection+" (key BLOB PRIMARY KEY NOT NULL, value BLOB NOT NULL)"),response=(0,_map2.default)(query,function(parts){var sql=parts[0].replace("#{collection}",escapedCollection),cursor=_this.db.execute(sql,parts[1]),response={rowCount:_this.db.getRowsAffected(),result:null};if(cursor){for(response.result=[];cursor.isValidRow();){var entity=JSON.parse(cursor.fieldByName("value"));response.result.push(entity),cursor.next()}cursor.close()}return response}),this.db.execute("COMMIT TRANSACTION"),_context.abrupt("return",isMulti?response:response.shift());case 12:throw _context.prev=12,_context.t0=_context.catch(3),new Error(_context.t0.message);case 15:case"end":return _context.stop()}},_callee,this,[[3,12]])}));return execute}()},{key:"find",value:function(collection){var sql="SELECT value FROM #{collection}",promise=this.execute(collection,sql,[]).then(function(response){return response.result}).catch(function(error){if(error instanceof _errors.NotFoundError)return[];throw error});return promise}},{key:"findById",value:function(collection,id){var _this2=this,sql="SELECT value FROM #{collection} WHERE key = ?",promise=this.execute(collection,sql,[id]).then(function(response){var entities=response.result;if(0===entities.length)throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+" "+("collection on the "+_this2.name+" webSQL database."));return entities[0]});return promise}},{key:"save",value:function(collection,entities){var queries=[];entities=(0,_map2.default)(entities,function(entity){return queries.push(["INSERT OR REPLACE INTO #{collection} (key, value) VALUES (?, ?)",[entity[idAttribute],JSON.stringify(entity)]]),entity});var promise=this.execute(collection,queries,null).then(function(){return entities});return promise}},{key:"removeById",value:function(collection,id){var _this3=this,promise=this.execute(collection,[["SELECT value FROM #{collection} WHERE key = ?",[id]],["DELETE FROM #{collection} WHERE key = ?",[id]]],null).then(function(response){var entities=response[0].result,count=response[1].rowCount||entities.length;if(0===count)throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+" "+("collection on the "+_this3.name+" webSQL database."));return{count:1,entities:entities}});return promise}},{key:"clear",value:function(){function clear(){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(){return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(this.db||(this.db=Titanium.Database.open(this.name)),!(0,_isFunction2.default)(this.db.remove)){_context2.next=4;break}return this.db.remove(),_context2.abrupt("return",null);case 4:if(!this.db.file||!this.db.file.deleteFile()){_context2.next=6;break}return _context2.abrupt("return",null);case 6:throw new Error("The mechanism to delete the database is not implemented for this platform.");case 7:case"end":return _context2.stop()}},_callee2,this)}));return clear}()}],[{key:"isSupported",value:function(){return"undefined"!=typeof Titanium&&"undefined"!=typeof Titanium.Database}}]),TitaniumDB}();exports.default=TitaniumDB}).call(exports,function(){return this}(),__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fastMemoryCache=__webpack_require__(354),_fastMemoryCache2=_interopRequireDefault(_fastMemoryCache),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_keyBy=__webpack_require__(242),_keyBy2=_interopRequireDefault(_keyBy),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_values=__webpack_require__(278),_values2=_interopRequireDefault(_values),_find=__webpack_require__(282),_find2=_interopRequireDefault(_find),_errors=__webpack_require__(236),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||void 0||"_id",caches={},Memory=function(){function Memory(name){if(_classCallCheck(this,Memory),!name)throw new Error("A name for the collection is required to use the memory persistence adapter.",name);if(!(0,_isString2.default)(name))throw new Error("The name of the collection must be a string to use the memory persistence adapter",name);this.name=name,this.cache=caches[name],this.cache||(this.cache=new _fastMemoryCache2.default,caches[name]=this.cache)}return _createClass(Memory,[{key:"find",value:function(){function find(_x){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(collection){var entities;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(entities=this.cache.get(collection),!entities){_context.next=3;break}return _context.abrupt("return",JSON.parse(entities));case 3:return _context.abrupt("return",[]);case 4:case"end":return _context.stop()}},_callee,this)}));return find}()},{key:"findById",value:function(){function findById(_x2,_x3){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(collection,id){var entities,entity;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.find(collection);case 2:if(entities=_context2.sent,entity=(0,_find2.default)(entities,function(entity){return entity[idAttribute]===id})){_context2.next=6;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+this.name+" memory database."));case 6:return _context2.abrupt("return",entity);case 7:case"end":return _context2.stop()}},_callee2,this)}));return findById}()},{key:"save",value:function(){function save(_x4,_x5){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(collection,entities){var singular,existingEntities,entityIds;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(singular=!1,(0,_isArray2.default)(entities)||(entities=[entities],singular=!0),0!==entities.length){_context3.next=4;break}return _context3.abrupt("return",entities);case 4:return _context3.next=6,this.find(collection);case 6:return existingEntities=_context3.sent,existingEntities=(0,_keyBy2.default)(existingEntities,idAttribute),entities=(0,_keyBy2.default)(entities,idAttribute),entityIds=Object.keys(entities),(0,_forEach2.default)(entityIds,function(id){existingEntities[id]=entities[id]}),this.cache.set(collection,JSON.stringify((0,_values2.default)(existingEntities))),entities=(0,_values2.default)(entities),_context3.abrupt("return",singular?entities[0]:entities);case 14:case"end":return _context3.stop()}},_callee3,this)}));return save}()},{key:"removeById",value:function(){function removeById(_x6,_x7){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(collection,id){var entities,entity;return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.find(collection);case 2:if(entities=_context4.sent,entities=(0,_keyBy2.default)(entities,idAttribute),entity=entities[id]){_context4.next=7;break}throw new _errors.NotFoundError("An entity with _id = "+id+" was not found in the "+collection+(" collection on the "+this.name+" memory database."));case 7:return delete entities[id],this.cache.set(collection,JSON.stringify((0,_values2.default)(entities))),_context4.abrupt("return",entity);case 10:case"end":return _context4.stop()}},_callee4,this)}));return removeById}()},{key:"clear",value:function(){function clear(){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(){return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return this.cache.clear(),_context5.abrupt("return",null);case 2:case"end":return _context5.stop()}},_callee5,this)}));return clear}()}],[{key:"isSupported",value:function(){return!0}}]),Memory}();exports.default=Memory}).call(exports,__webpack_require__(9))},function(module,exports){"use strict";function MemoryCache(){this._cache=createMap(),this._timeouts=createMap()}function createMap(){return Object.create(null)}MemoryCache.prototype.get=function(key){return this._cache[key]},MemoryCache.prototype.set=function(key,value,expireTime){this.delete(key),this._cache[key]=value,expireTime&&(this._timeouts[key]=setTimeout(this.delete.bind(this,key),1e3*expireTime))},MemoryCache.prototype.delete=function(key){delete this._cache[key],key in this._timeouts&&(clearTimeout(this._timeouts[key]),delete this._timeouts[key])},MemoryCache.prototype.clear=function(){this._cache=createMap();for(var key in this._timeouts)clearTimeout(this._timeouts[key]);this._timeouts=createMap()},module.exports=MemoryCache},function(module,exports,__webpack_require__){(function(process){module.exports=__webpack_require__(process.env.PROMISE_QUEUE_COVERAGE?356:357)}).call(exports,__webpack_require__(9))},function(module,exports){},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";"object"==typeof module&&module.exports?module.exports=factory():(__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}(this,function(){"use strict";function Queue(maxPendingPromises,maxQueuedPromises){this.pendingPromises=0,this.maxPendingPromises="undefined"!=typeof maxPendingPromises?maxPendingPromises:1/0,this.maxQueuedPromises="undefined"!=typeof maxQueuedPromises?maxQueuedPromises:1/0,this.queue=[]}var LocalPromise="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw new Error("Queue.configure() before use Queue")}}},noop=function(){},resolveWith=function(value){return value&&"function"==typeof value.then?value:new LocalPromise(function(resolve){resolve(value)})};return Queue.configure=function(GlobalPromise){LocalPromise=GlobalPromise},Queue.prototype.add=function(promiseGenerator){var self=this;return new LocalPromise(function(resolve,reject,notify){return self.queue.length>=self.maxQueuedPromises?void reject(new Error("Queue limit reached")):(self.queue.push({promiseGenerator:promiseGenerator,resolve:resolve,reject:reject,notify:notify||noop}),void self._dequeue())})},Queue.prototype.getPendingLength=function(){return this.pendingPromises},Queue.prototype.getQueueLength=function(){return this.queue.length},Queue.prototype._dequeue=function(){var self=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var item=this.queue.shift();if(!item)return!1;try{this.pendingPromises++,resolveWith(item.promiseGenerator()).then(function(value){self.pendingPromises--,item.resolve(value),self._dequeue()},function(err){self.pendingPromises--,item.reject(err),self._dequeue()},function(message){item.notify(message)})}catch(err){self.pendingPromises--,item.reject(err),self._dequeue()}return!0},Queue})},function(module,exports,__webpack_require__){function isEmpty(value){if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isArguments(value)))return!value.length;var tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!nativeKeys(value).length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}var getTag=__webpack_require__(96),isArguments=__webpack_require__(27),isArray=__webpack_require__(34),isArrayLike=__webpack_require__(29),isBuffer=__webpack_require__(274),isPrototype=__webpack_require__(37),nativeKeys=__webpack_require__(38),mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=isEmpty},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_middleware=__webpack_require__(238),_middleware2=_interopRequireDefault(_middleware),_network=__webpack_require__(360),_network2=_interopRequireDefault(_network),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),HttpMiddleware=function(_Middleware){function HttpMiddleware(){var name=arguments.length<=0||void 0===arguments[0]?"Http Middleware":arguments[0];return _classCallCheck(this,HttpMiddleware),_possibleConstructorReturn(this,(HttpMiddleware.__proto__||Object.getPrototypeOf(HttpMiddleware)).call(this,name))}return _inherits(HttpMiddleware,_Middleware),_createClass(HttpMiddleware,[{key:"handle",value:function(){function handle(_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request,response){var http;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return http=new _network2.default,_context.abrupt("return",http.handle(request,response));
case 2:case"end":return _context.stop()}},_callee,this)}));return handle}()}]),HttpMiddleware}(_middleware2.default);exports.default=HttpMiddleware},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_$http=__webpack_require__(361),_node=__webpack_require__(362),_titanium=__webpack_require__(394),_xhr=__webpack_require__(399),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),HttpAdapter={$Http:"$Http",Node:"Node",Titanium:"Titanium",XHR:"XHR"};Object.freeze(HttpAdapter);var Http=function(){function Http(){var _this=this,adapters=arguments.length<=0||void 0===arguments[0]?[HttpAdapter.Titanium,HttpAdapter.$Http,HttpAdapter.Node,HttpAdapter.XHR]:arguments[0];_classCallCheck(this,Http),(0,_isArray2.default)(adapters)||(adapters=[adapters]),adapters.some(function(adapter){switch(adapter){case HttpAdapter.$Http:if(_$http.$Http.isSupported())return _this.adapter=new _$http.$Http,!0;break;case HttpAdapter.Node:if(_node.NodeHttp.isSupported())return _this.adapter=new _node.NodeHttp,!0;break;case HttpAdapter.TitaniumHttp:if(_titanium.TitaniumHttp.isSupported())return _this.adapter=new _titanium.TitaniumHttp,!0;break;case HttpAdapter.XHR:if(_xhr.XHR.isSupported())return _this.adapter=new _xhr.XHR,!0}return!1})}return _createClass(Http,[{key:"handle",value:function(){function handle(_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request,response){return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.adapter){_context.next=2;break}return _context.abrupt("return",this.adapter.handle(request,response));case 2:throw new Error("Unable to handle the request. An adapter is not specified.");case 3:case"end":return _context.stop()}},_callee,this)}));return handle}()}]),Http}();exports.default=Http},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.$Http=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),angular=void 0,$http=void 0;if("undefined"!=typeof window&&"undefined"!=typeof global.angular){angular=global.angular;var $injector=angular.injector(["ng"]);$http=$injector.get("$http")}exports.$Http=function(){function $Http(){_classCallCheck(this,$Http)}return _createClass($Http,[{key:"handle",value:function(){function handle(_x){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request){var url,method,headers,body,response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return url=request.url,method=request.method,headers=request.headers,body=request.body,_context.prev=4,_context.next=7,$http({url:url,method:method,headers:headers,data:body});case 7:return response=_context.sent,_context.abrupt("return",{response:{statusCode:response.status,headers:response.headers(),data:response.data}});case 11:return _context.prev=11,_context.t0=_context.catch(4),_context.abrupt("return",{response:{statusCode:_context.t0.status,headers:_context.t0.headers(),data:_context.t0.data}});case 14:case"end":return _context.stop()}},_callee,this,[[4,11]])}));return handle}()}],[{key:"isSupported",value:function(){return!!angular}}]),$Http}()}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(Buffer){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeHttp=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_http=__webpack_require__(367),_http2=_interopRequireDefault(_http),_https=__webpack_require__(393),_https2=_interopRequireDefault(_https),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url);exports.NodeHttp=function(){function NodeHttp(){_classCallCheck(this,NodeHttp)}return _createClass(NodeHttp,[{key:"handle",value:function(request){var promise=new _promise2.default(function(resolve,reject){var method=request.method,headers=request.headers,body=request.body,path=_url2.default.parse(request.url),adapter="https:"===path.protocol?_https2.default:_http2.default;if(body&&!headers["content-length"]&&!headers["Content-Length"]){var length=0;body instanceof Buffer?length=body.length:body&&(length=Buffer.byteLength(body)),headers["Content-Length"]=length}var httpRequest=adapter.request({host:path.hostname,path:path.pathname+(path.search?path.search:""),port:path.port,method:method,headers:headers},function(response){var data=[];response.on("data",function(chunk){data.push(new Buffer(chunk))}),response.on("end",function(){resolve({response:{statusCode:response.statusCode,headers:response.headers,data:Buffer.concat(data)}})})});httpRequest.on("error",function(error){reject(error)}),body&&httpRequest.write(body),httpRequest.end()});return promise}}],[{key:"isSupported",value:function(){return"object"===_typeof(exports)&&"undefined"==typeof window}}]),NodeHttp}()}).call(exports,__webpack_require__(363).Buffer)},function(module,exports,__webpack_require__){(function(Buffer,global){"use strict";function typedArraySupport(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length),that.__proto__=Buffer.prototype):(null===that&&(that=new Buffer(length)),that.length=length),that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"==typeof arg){if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?fromArrayBuffer(that,value,encodingOrOffset,length):"string"==typeof value?fromString(that,value,encodingOrOffset):fromObject(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function alloc(that,size,fill,encoding){return assertSize(size),size<=0?createBuffer(that,size):void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromString(that,string,encoding){if("string"==typeof encoding&&""!==encoding||(encoding="utf8"),!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding);that=createBuffer(that,length);var actual=that.write(string,encoding);return actual!==length&&(that=that.slice(0,actual)),that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function fromArrayBuffer(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");return array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length),Buffer.TYPED_ARRAY_SUPPORT?(that=array,that.__proto__=Buffer.prototype):that=fromArrayLike(that,array),that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length);return that=createBuffer(that,len),0===that.length?that:(obj.copy(that,0,0,len),that)}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||isnan(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function SlowBuffer(length){return+length!=length&&(length=0),Buffer.alloc(+length)}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if(end>>>=0,start>>>=0,end<=start)return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,isNaN(byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val=255&val,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}var indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&(encoding=String(encoding).toLowerCase(),"ucs2"===encoding||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;indexSize=2,arrLength/=2,valLength/=2,byteOffset/=2}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else foundIndex!==-1&&(i-=i-foundIndex),foundIndex=-1}else for(byteOffset+valLength>arrLength&&(byteOffset=arrLength-valLength),i=byteOffset;i>=0;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;if(strLen%2!==0)throw new TypeError("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],128===(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128===(192&secondByte)&&128===(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128===(192&secondByte)&&128===(192&thirdByte)&&128===(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=stringtrim(str).replace(INVALID_BASE64_RE,""),str.length<2)return"";for(;str.length%4!==0;)str+="=";return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isnan(val){return val!==val}var base64=__webpack_require__(364),ieee754=__webpack_require__(365),isArray=__webpack_require__(366);exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisStart>=thisEnd&&start>=end)return 0;if(thisStart>=thisEnd)return-1;if(start>=end)return 1;if(start>>>=0,end>>>=0,thisStart>>>=0,thisEnd>>>=0,this===target)return 0;for(var x=thisEnd-thisStart,y=end-start,len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset=0|offset,isFinite(length)?(length=0|length,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start,end=void 0===end?len:~~end,start<0?(start+=len,start<0&&(start=0)):start>len&&(start=len),end<0?(end+=len,end<0&&(end=0)):end>len&&(end=len),end<start&&(end=start);var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT)newBuf=this.subarray(start,end),newBuf.__proto__=Buffer.prototype;else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;++i)newBuf[i]=this[i+start]}return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?(255-this[offset]+1)*-1:this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8);
},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,byteLength=0|byteLength,!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,byteLength=0|byteLength,!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length){var code=val.charCodeAt(0);code<256&&(val=code)}if(void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val=255&val);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0);var i;if("number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length;for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g}).call(exports,__webpack_require__(363).Buffer,function(){return this}())},function(module,exports){"use strict";function placeHoldersCount(b64){var len=b64.length;if(len%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===b64[len-2]?2:"="===b64[len-1]?1:0}function byteLength(b64){return 3*b64.length/4-placeHoldersCount(b64)}function toByteArray(b64){var i,j,l,tmp,placeHolders,arr,len=b64.length;placeHolders=placeHoldersCount(b64),arr=new Arr(3*len/4-placeHolders),l=placeHolders>0?len-4:len;var L=0;for(i=0,j=0;i<l;i+=4,j+=3)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[L++]=tmp>>16&255,arr[L++]=tmp>>8&255,arr[L++]=255&tmp;return 2===placeHolders?(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[L++]=255&tmp):1===placeHolders&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[L++]=tmp>>8&255,arr[L++]=255&tmp),arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}function encodeChunk(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output.push(tripletToBase64(tmp));return output.join("")}function fromByteArray(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,output="",parts=[],maxChunkLength=16383,i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength)parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength));return 1===extraBytes?(tmp=uint8[len-1],output+=lookup[tmp>>2],output+=lookup[tmp<<4&63],output+="=="):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],output+=lookup[tmp>>10],output+=lookup[tmp>>4&63],output+=lookup[tmp<<2&63],output+="="),parts.push(output),parts.join("")}exports.byteLength=byteLength,exports.toByteArray=toByteArray,exports.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:(s?-1:1)*(1/0);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){var http=module.exports,Request=(__webpack_require__(184).EventEmitter,__webpack_require__(368)),url=__webpack_require__(157);http.request=function(params,cb){"string"==typeof params&&(params=url.parse(params)),params||(params={}),params.host||params.port||(params.port=parseInt(window.location.port,10)),!params.host&&params.hostname&&(params.host=params.hostname),params.protocol||(params.scheme?params.protocol=params.scheme+":":params.protocol=window.location.protocol),params.host||(params.host=window.location.hostname||window.location.host),/:/.test(params.host)&&(params.port||(params.port=params.host.split(":")[1]),params.host=params.host.split(":")[0]),params.port||(params.port="https:"==params.protocol?443:80);var req=new Request(new xhrHttp,params);return cb&&req.on("response",cb),req},http.get=function(params,cb){params.method="GET";var req=http.request(params,cb);return req.end(),req},http.Agent=function(){},http.Agent.defaultMaxSockets=4;var xhrHttp=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var axs=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],i=0;i<axs.length;i++)try{var ax=new window.ActiveXObject(axs[i]);return function(){if(ax){var ax_=ax;return ax=null,ax_}return new window.ActiveXObject(axs[i])}}catch(e){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(module,exports,__webpack_require__){var Stream=__webpack_require__(369),Response=__webpack_require__(388),Base64=__webpack_require__(392),inherits=__webpack_require__(370),Request=module.exports=function(xhr,params){var self=this;self.writable=!0,self.xhr=xhr,self.body=[],self.uri=(params.protocol||"http:")+"//"+params.host+(params.port?":"+params.port:"")+(params.path||"/"),"undefined"==typeof params.withCredentials&&(params.withCredentials=!0);try{xhr.withCredentials=params.withCredentials}catch(e){}if(params.responseType)try{xhr.responseType=params.responseType}catch(e){}if(xhr.open(params.method||"GET",self.uri,!0),xhr.onerror=function(event){self.emit("error",new Error("Network error"))},self._headers={},params.headers)for(var keys=objectKeys(params.headers),i=0;i<keys.length;i++){var key=keys[i];if(self.isSafeRequestHeader(key)){var value=params.headers[key];self.setHeader(key,value)}}params.auth&&this.setHeader("Authorization","Basic "+Base64.btoa(params.auth));var res=new Response;res.on("close",function(){self.emit("close")}),res.on("ready",function(){self.emit("response",res)}),res.on("error",function(err){self.emit("error",err)}),xhr.onreadystatechange=function(){xhr.__aborted||res.handle(xhr)}};inherits(Request,Stream),Request.prototype.setHeader=function(key,value){this._headers[key.toLowerCase()]=value},Request.prototype.getHeader=function(key){return this._headers[key.toLowerCase()]},Request.prototype.removeHeader=function(key){delete this._headers[key.toLowerCase()]},Request.prototype.write=function(s){this.body.push(s)},Request.prototype.destroy=function(s){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},Request.prototype.end=function(s){void 0!==s&&this.body.push(s);for(var keys=objectKeys(this._headers),i=0;i<keys.length;i++){var key=keys[i],value=this._headers[key];if(isArray(value))for(var j=0;j<value.length;j++)this.xhr.setRequestHeader(key,value[j]);else this.xhr.setRequestHeader(key,value)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(isArray(this.body[0])){for(var body=[],i=0;i<this.body.length;i++)body.push.apply(body,this.body[i]);this.xhr.send(body)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var len=0,i=0;i<this.body.length;i++)len+=this.body[i].length;for(var body=new this.body[0].constructor(len),k=0,i=0;i<this.body.length;i++)for(var b=this.body[i],j=0;j<b.length;j++)body[k++]=b[j];this.xhr.send(body)}else if(isXHR2Compatible(this.body[0]))this.xhr.send(this.body[0]);else{for(var body="",i=0;i<this.body.length;i++)body+=this.body[i].toString();this.xhr.send(body)}},Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],Request.prototype.isSafeRequestHeader=function(headerName){return!!headerName&&indexOf(Request.unsafeHeaders,headerName.toLowerCase())===-1};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys},isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},indexOf=function(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++)if(xs[i]===x)return i;return-1},isXHR2Compatible=function(obj){return"undefined"!=typeof Blob&&obj instanceof Blob||("undefined"!=typeof ArrayBuffer&&obj instanceof ArrayBuffer||("undefined"!=typeof FormData&&obj instanceof FormData||void 0))}},function(module,exports,__webpack_require__){function Stream(){EE.call(this)}module.exports=Stream;var EE=__webpack_require__(184).EventEmitter,inherits=__webpack_require__(370);inherits(Stream,EE),Stream.Readable=__webpack_require__(371),Stream.Writable=__webpack_require__(384),Stream.Duplex=__webpack_require__(385),Stream.Transform=__webpack_require__(386),Stream.PassThrough=__webpack_require__(387),Stream.Stream=Stream,Stream.prototype.pipe=function(dest,options){function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,"function"==typeof dest.destroy&&dest.destroy())}function onerror(er){if(cleanup(),0===EE.listenerCount(this,"error"))throw er}function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}var source=this;source.on("data",ondata),dest.on("drain",ondrain),dest._isStdio||options&&options.end===!1||(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;return source.on("error",onerror),dest.on("error",onerror),source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){(function(process){exports=module.exports=__webpack_require__(372),exports.Stream=__webpack_require__(369),exports.Readable=exports,exports.Writable=__webpack_require__(380),exports.Duplex=__webpack_require__(379),exports.Transform=__webpack_require__(382),exports.PassThrough=__webpack_require__(383),process.browser||"disable"!==process.env.READABLE_STREAM||(module.exports=__webpack_require__(369))}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){function ReadableState(options,stream){var Duplex=__webpack_require__(379);options=options||{};var hwm=options.highWaterMark,defaultHwm=options.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode),this.defaultEncoding=options.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(381).StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){__webpack_require__(379);return this instanceof Readable?(this._readableState=new ReadableState(options,this),this.readable=!0,void Stream.call(this)):new Readable(options)}function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er)stream.emit("error",er);else if(util.isNullOrUndefined(chunk))state.reading=!1,state.ended||onEofChunk(stream,state);else if(state.objectMode||chunk&&chunk.length>0)if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else!state.decoder||addToFront||encoding||(chunk=state.decoder.write(chunk)),addToFront||(state.reading=!1),state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state);else addToFront||(state.reading=!1);return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}function roundUpToNextPowerOf2(n){if(n>=MAX_HWM)n=MAX_HWM;else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}function howMuchToRead(n,state){return 0===state.length&&state.ended?0:state.objectMode?0===n?0:1:isNaN(n)||util.isNull(n)?state.flowing&&state.buffer.length?state.buffer[0].length:state.length:n<=0?0:(n>state.highWaterMark&&(state.highWaterMark=roundUpToNextPowerOf2(n)),n>state.length?state.ended?state.length:(state.needReadable=!0,0):n)}function chunkInvalid(state,chunk){var er=null;return util.isBuffer(chunk)||util.isString(chunk)||util.isNullOrUndefined(chunk)||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?process.nextTick(function(){emitReadable_(stream)}):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,process.nextTick(function(){maybeReadMore_(stream,state)}))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EE.listenerCount(src,"data")&&(state.flowing=!0,flow(src))}}function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,process.nextTick(function(){resume_(stream,state)}))}function resume_(stream,state){state.resumeScheduled=!1,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;if(debug("flow",state.flowing),state.flowing)do var chunk=stream.read();while(null!==chunk&&state.flowing)}function fromList(n,state){var ret,list=state.buffer,length=state.length,stringMode=!!state.decoder,objectMode=!!state.objectMode;if(0===list.length)return null;if(0===length)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length)ret=stringMode?list.join(""):Buffer.concat(list,length),list.length=0;else if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n),list[0]=buf.slice(n)}else if(n===list[0].length)ret=list.shift();else{ret=stringMode?"":new Buffer(n);for(var c=0,i=0,l=list.length;i<l&&c<n;i++){var buf=list[0],cpy=Math.min(n-c,buf.length);stringMode?ret+=buf.slice(0,cpy):buf.copy(ret,c,0,cpy),cpy<buf.length?list[0]=buf.slice(cpy):list.shift(),c+=cpy}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");state.endEmitted||(state.ended=!0,process.nextTick(function(){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}module.exports=Readable;var isArray=__webpack_require__(373),Buffer=__webpack_require__(374).Buffer;Readable.ReadableState=ReadableState;var EE=__webpack_require__(184).EventEmitter;EE.listenerCount||(EE.listenerCount=function(emitter,type){return emitter.listeners(type).length});var Stream=__webpack_require__(369),util=__webpack_require__(377);util.inherits=__webpack_require__(370);var StringDecoder,debug=__webpack_require__(378);debug=debug&&debug.debuglog?debug.debuglog("stream"):function(){},util.inherits(Readable,Stream),Readable.prototype.push=function(chunk,encoding){var state=this._readableState;return util.isString(chunk)&&!state.objectMode&&(encoding=encoding||state.defaultEncoding,encoding!==state.encoding&&(chunk=new Buffer(chunk,encoding),encoding="")),readableAddChunk(this,state,chunk,encoding,!1)},Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",!0)},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(381).StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;Readable.prototype.read=function(n){debug("read",n);var state=this._readableState,nOrig=n;if((!util.isNumber(n)||n>0)&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(n=howMuchToRead(n,state),0===n&&state.ended)return 0===state.length&&endReadable(this),null;var doRead=state.needReadable;debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&(doRead=!0,debug("length less than watermark",doRead)),(state.ended||state.reading)&&(doRead=!1,debug("reading or ended",doRead)),doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1),doRead&&!state.reading&&(n=howMuchToRead(nOrig,state));var ret;return ret=n>0?fromList(n,state):null,util.isNull(ret)&&(state.needReadable=!0,n=0),state.length-=n,0!==state.length||state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&0===state.length&&endReadable(this),util.isNull(ret)||this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){function onunpipe(readable){debug("onunpipe"),readable===src&&cleanup()}function onend(){debug("onend"),dest.end()}function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",cleanup),src.removeListener("data",ondata),!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain()}function ondata(chunk){debug("ondata");var ret=dest.write(chunk);!1===ret&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EE.listenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==!1)&&dest!==process.stdout&&dest!==process.stderr,endFn=doEnd?onend:cleanup;state.endEmitted?process.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=pipeOnDrain(src);return dest.on("drain",ondrain),src.on("data",ondata),dest._events&&dest._events.error?isArray(dest._events.error)?dest._events.error.unshift(onerror):dest._events.error=[onerror,dest._events.error]:dest.on("error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState;if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes?this:(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this),this);if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);return i===-1?this:(state.pipes.splice(i,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this),this)},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev&&!1!==this._readableState.flowing&&this.resume(),"readable"===ev&&this.readable){var state=this._readableState;if(!state.readableListening)if(state.readableListening=!0,state.emittedReadable=!1,state.needReadable=!0,state.reading)state.length&&emitReadable(this,state);else{var self=this;process.nextTick(function(){debug("readable nexttick read 0"),self.read(0)})}}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,state.reading||(debug("resume read 0"),this.read(0)),resume(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var state=this._readableState,paused=!1,self=this;stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&self.push(chunk)}self.push(null)}),stream.on("data",function(chunk){if(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),chunk&&(state.objectMode||chunk.length)){var ret=self.push(chunk);ret||(paused=!0,stream.pause())}});for(var i in stream)util.isFunction(stream[i])&&util.isUndefined(this[i])&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));var events=["error","close","destroy","pause","resume"];return forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))}),self._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,
stream.resume())},self},Readable._fromList=fromList}).call(exports,__webpack_require__(9))},function(module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}},function(module,exports,__webpack_require__){(function(Buffer,global){"use strict";function typedArraySupport(){function Bar(){}try{var arr=new Uint8Array(1);return arr.foo=function(){return 42},arr.constructor=Bar,42===arr.foo()&&arr.constructor===Bar&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof arg?fromNumber(this,arg):"string"==typeof arg?fromString(this,arg,arguments.length>1?arguments[1]:"utf8"):fromObject(this,arg)):arguments.length>1?new Buffer(arg,arguments[1]):new Buffer(arg)}function fromNumber(that,length){if(that=allocate(that,length<0?0:0|checked(length)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<length;i++)that[i]=0;return that}function fromString(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");var length=0|byteLength(string,encoding);return that=allocate(that,length),that.write(string,encoding),that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(null==object)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(object.buffer instanceof ArrayBuffer)return fromTypedArray(that,object);if(object instanceof ArrayBuffer)return fromArrayBuffer(that,object)}return object.length?fromArrayLike(that,object):fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=0|checked(buffer.length);return that=allocate(that,length),buffer.copy(that,0,0,length),that}function fromArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function fromTypedArray(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function fromArrayBuffer(that,array){return Buffer.TYPED_ARRAY_SUPPORT?(array.byteLength,that=Buffer._augment(new Uint8Array(array))):that=fromTypedArray(that,new Uint8Array(array)),that}function fromArrayLike(that,array){var length=0|checked(array.length);that=allocate(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function fromJsonObject(that,object){var array,length=0;"Buffer"===object.type&&isArray(object.data)&&(array=object.data,length=0|checked(array.length)),that=allocate(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function allocate(that,length){Buffer.TYPED_ARRAY_SUPPORT?(that=Buffer._augment(new Uint8Array(length)),that.__proto__=Buffer.prototype):(that.length=length,that._isBuffer=!0);var fromPool=0!==length&&length<=Buffer.poolSize>>>1;return fromPool&&(that.parent=rootParent),that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);return delete buf.parent,buf}function byteLength(string,encoding){"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if(start=0|start,end=void 0===end||end===1/0?this.length:0|end,encoding||(encoding="utf8"),start<0&&(start=0),end>this.length&&(end=this.length),end<=start)return"";for(;;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");length>strLen/2&&(length=strLen/2);for(var i=0;i<length;i++){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var firstByte=buf[i],codePoint=null,bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:secondByte=buf[i+1],128===(192&secondByte)&&(tempCodePoint=(31&firstByte)<<6|63&secondByte,tempCodePoint>127&&(codePoint=tempCodePoint));break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128===(192&secondByte)&&128===(192&thirdByte)&&(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte,tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)&&(codePoint=tempCodePoint));break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128===(192&secondByte)&&128===(192&thirdByte)&&128===(192&fourthByte)&&(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte,tempCodePoint>65535&&tempCodePoint<1114112&&(codePoint=tempCodePoint))}}null===codePoint?(codePoint=65533,bytesPerSequence=1):codePoint>65535&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return decodeCodePointsArray(res)}function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);for(var res="",i=0;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++)ret+=String.fromCharCode(127&buf[i]);return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||end>len)&&(end=len);for(var out="",i=start;i<end;i++)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(offset<0)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}function base64clean(str){if(str=stringtrim(str).replace(INVALID_BASE64_RE,""),str.length<2)return"";for(;str.length%4!==0;)str+="=";return str}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;i++){if(codePoint=string.charCodeAt(i),codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){(units-=3)>-1&&bytes.push(239,191,189);continue}if(i+1===length){(units-=3)>-1&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){(units-=3)>-1&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else leadSurrogate&&(units-=3)>-1&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);i++)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}var base64=__webpack_require__(375),ieee754=__webpack_require__(365),isArray=__webpack_require__(376);exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len&&a[i]===b[i];)++i;return i!==len&&(x=a[i],y=b[i]),x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(0===list.length)return new Buffer(0);var i;if(void 0===length)for(length=0,i=0;i<list.length;i++)length+=list[i].length;var buf=new Buffer(length),pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var length=0|this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return this.length>0&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:Buffer.compare(this,b)},Buffer.prototype.indexOf=function(val,byteOffset){function arrayIndexOf(arr,val,byteOffset){for(var foundIndex=-1,i=0;byteOffset+i<arr.length;i++)if(arr[byteOffset+i]===val[foundIndex===-1?0:i-foundIndex]){if(foundIndex===-1&&(foundIndex=i),i-foundIndex+1===val.length)return byteOffset+foundIndex}else foundIndex=-1;return-1}if(byteOffset>2147483647?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset>>=0,0===this.length)return-1;if(byteOffset>=this.length)return-1;if(byteOffset<0&&(byteOffset=Math.max(this.length+byteOffset,0)),"string"==typeof val)return 0===val.length?-1:String.prototype.indexOf.call(this,val,byteOffset);if(Buffer.isBuffer(val))return arrayIndexOf(this,val,byteOffset);if("number"==typeof val)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,val,byteOffset):arrayIndexOf(this,[val],byteOffset);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(offset){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(offset)},Buffer.prototype.set=function(v,offset){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(v,offset)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else if(isFinite(offset))offset=0|offset,isFinite(length)?(length=0|length,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0);else{var swap=encoding;encoding=offset,offset=0|length,length=swap}var remaining=this.length-offset;if((void 0===length||length>remaining)&&(length=remaining),string.length>0&&(length<0||offset<0)||offset>this.length)throw new RangeError("attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(start,end){var len=this.length;start=~~start,end=void 0===end?len:~~end,start<0?(start+=len,start<0&&(start=0)):start>len&&(start=len),end<0?(end+=len,end<0&&(end=0)):end>len&&(end=len),end<start&&(end=start);var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT)newBuf=Buffer._augment(this.subarray(start,end));else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,void 0);for(var i=0;i<sliceLen;i++)newBuf[i]=this[i+start]}return newBuf.length&&(newBuf.parent=this.parent||this),newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;byteLength>0&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset=0|offset,byteLength=0|byteLength,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];i>0&&(mul*=256);)val+=this[offset+--i]*mul;return mul*=128,val>=mul&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?(255-this[offset]+1)*-1:this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value,offset=0|offset,byteLength=0|byteLength,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value,offset=0|offset,byteLength=0|byteLength,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=value<0?1:0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset=0|offset,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=value<0?1:0;for(this[offset+i]=255&value;--i>=0&&(mul*=256);)this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset=0|offset,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),end>0&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var i,len=end-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;i>=0;i--)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;i++)target[i+targetStart]=this[i+start];else target._set(this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(value,start,end){if(value||(value=0),start||(start=0),end||(end=this.length),end<start)throw new RangeError("end < start");if(end!==start&&0!==this.length){if(start<0||start>=this.length)throw new RangeError("start out of bounds");if(end<0||end>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof value)for(i=start;i<end;i++)this[i]=value;else{var bytes=utf8ToBytes(value.toString()),len=bytes.length;for(i=start;i<end;i++)this[i]=bytes[i%len]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var buf=new Uint8Array(this.length),i=0,len=buf.length;i<len;i+=1)buf[i]=this[i];return buf.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(arr){return arr.constructor=Buffer,arr._isBuffer=!0,arr._set=arr.set,arr.get=BP.get,arr.set=BP.set,arr.write=BP.write,arr.toString=BP.toString,arr.toLocaleString=BP.toString,arr.toJSON=BP.toJSON,arr.equals=BP.equals,arr.compare=BP.compare,arr.indexOf=BP.indexOf,arr.copy=BP.copy,arr.slice=BP.slice,arr.readUIntLE=BP.readUIntLE,arr.readUIntBE=BP.readUIntBE,arr.readUInt8=BP.readUInt8,arr.readUInt16LE=BP.readUInt16LE,arr.readUInt16BE=BP.readUInt16BE,arr.readUInt32LE=BP.readUInt32LE,arr.readUInt32BE=BP.readUInt32BE,arr.readIntLE=BP.readIntLE,arr.readIntBE=BP.readIntBE,arr.readInt8=BP.readInt8,arr.readInt16LE=BP.readInt16LE,arr.readInt16BE=BP.readInt16BE,arr.readInt32LE=BP.readInt32LE,arr.readInt32BE=BP.readInt32BE,arr.readFloatLE=BP.readFloatLE,arr.readFloatBE=BP.readFloatBE,arr.readDoubleLE=BP.readDoubleLE,arr.readDoubleBE=BP.readDoubleBE,arr.writeUInt8=BP.writeUInt8,arr.writeUIntLE=BP.writeUIntLE,arr.writeUIntBE=BP.writeUIntBE,arr.writeUInt16LE=BP.writeUInt16LE,arr.writeUInt16BE=BP.writeUInt16BE,arr.writeUInt32LE=BP.writeUInt32LE,arr.writeUInt32BE=BP.writeUInt32BE,arr.writeIntLE=BP.writeIntLE,arr.writeIntBE=BP.writeIntBE,arr.writeInt8=BP.writeInt8,arr.writeInt16LE=BP.writeInt16LE,arr.writeInt16BE=BP.writeInt16BE,arr.writeInt32LE=BP.writeInt32LE,arr.writeInt32BE=BP.writeInt32BE,arr.writeFloatLE=BP.writeFloatLE,arr.writeFloatBE=BP.writeFloatBE,arr.writeDoubleLE=BP.writeDoubleLE,arr.writeDoubleBE=BP.writeDoubleBE,arr.fill=BP.fill,arr.inspect=BP.inspect,arr.toArrayBuffer=BP.toArrayBuffer,arr};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g}).call(exports,__webpack_require__(363).Buffer,function(){return this}())},function(module,exports,__webpack_require__){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(exports){"use strict";function decode(elt){var code=elt.charCodeAt(0);return code===PLUS||code===PLUS_URL_SAFE?62:code===SLASH||code===SLASH_URL_SAFE?63:code<NUMBER?-1:code<NUMBER+10?code-NUMBER+26+26:code<UPPER+26?code-UPPER:code<LOWER+26?code-LOWER+26:void 0}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0,arr=new Arr(3*b64.length/4-placeHolders),l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;i<l;i+=4,j+=3)tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3)),push((16711680&tmp)>>16),push((65280&tmp)>>8),push(255&tmp);return 2===placeHolders?(tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4,push(255&tmp)):1===placeHolders&&(tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2,push(tmp>>8&255),push(255&tmp)),arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(63&num)}var i,temp,length,extraBytes=uint8.length%3,output="";for(i=0,length=uint8.length-extraBytes;i<length;i+=3)temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output+=tripletToBase64(temp);switch(extraBytes){case 1:temp=uint8[uint8.length-1],output+=encode(temp>>2),output+=encode(temp<<4&63),output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1],output+=encode(temp>>10),output+=encode(temp>>4&63),output+=encode(temp<<2&63),output+="="}return output}var Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,PLUS="+".charCodeAt(0),SLASH="/".charCodeAt(0),NUMBER="0".charCodeAt(0),LOWER="a".charCodeAt(0),UPPER="A".charCodeAt(0),PLUS_URL_SAFE="-".charCodeAt(0),SLASH_URL_SAFE="_".charCodeAt(0);exports.toByteArray=b64ToByteArray,exports.fromByteArray=uint8ToBase64}(exports)},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},function(module,exports,__webpack_require__){(function(Buffer){function isArray(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return"[object Date]"===objectToString(d)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,
exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer}).call(exports,__webpack_require__(363).Buffer)},function(module,exports){},function(module,exports,__webpack_require__){(function(process){function Duplex(options){return this instanceof Duplex?(Readable.call(this,options),Writable.call(this,options),options&&options.readable===!1&&(this.readable=!1),options&&options.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,options&&options.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(options)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++)f(xs[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys},util=__webpack_require__(377);util.inherits=__webpack_require__(370);var Readable=__webpack_require__(372),Writable=__webpack_require__(380);util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(method){Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])})}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){function WriteReq(chunk,encoding,cb){this.chunk=chunk,this.encoding=encoding,this.callback=cb}function WritableState(options,stream){var Duplex=__webpack_require__(379);options=options||{};var hwm=options.highWaterMark,defaultHwm=options.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:defaultHwm,this.objectMode=!!options.objectMode,stream instanceof Duplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=options.decodeStrings===!1;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function Writable(options){var Duplex=__webpack_require__(379);return this instanceof Writable||this instanceof Duplex?(this._writableState=new WritableState(options,this),this.writable=!0,void Stream.call(this)):new Writable(options)}function writeAfterEnd(stream,state,cb){var er=new Error("write after end");stream.emit("error",er),process.nextTick(function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=!0;if(!(util.isBuffer(chunk)||util.isString(chunk)||util.isNullOrUndefined(chunk)||state.objectMode)){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er),process.nextTick(function(){cb(er)}),valid=!1}return valid}function decodeChunk(state,chunk,encoding){return!state.objectMode&&state.decodeStrings!==!1&&util.isString(chunk)&&(chunk=new Buffer(chunk,encoding)),chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding),util.isBuffer(chunk)&&(encoding="buffer");var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;return ret||(state.needDrain=!0),state.writing||state.corked?state.buffer.push(new WriteReq(chunk,encoding,cb)):doWrite(stream,state,!1,len,chunk,encoding,cb),ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){sync?process.nextTick(function(){state.pendingcb--,cb(er)}):(state.pendingcb--,cb(er)),stream._writableState.errorEmitted=!0,stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);finished||state.corked||state.bufferProcessing||!state.buffer.length||clearBuffer(stream,state),sync?process.nextTick(function(){afterWrite(stream,state,finished,cb)}):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}function clearBuffer(stream,state){if(state.bufferProcessing=!0,stream._writev&&state.buffer.length>1){for(var cbs=[],c=0;c<state.buffer.length;c++)cbs.push(state.buffer[c].callback);state.pendingcb++,doWrite(stream,state,!0,state.length,state.buffer,"",function(err){for(var i=0;i<cbs.length;i++)state.pendingcb--,cbs[i](err)}),state.buffer=[]}else{for(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c],chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),state.writing){c++;break}}c<state.buffer.length?state.buffer=state.buffer.slice(c):state.buffer.length=0}state.bufferProcessing=!1}function needFinish(stream,state){return state.ending&&0===state.length&&!state.finished&&!state.writing}function prefinish(stream,state){state.prefinished||(state.prefinished=!0,stream.emit("prefinish"))}function finishMaybe(stream,state){var need=needFinish(stream,state);return need&&(0===state.pendingcb?(prefinish(stream,state),state.finished=!0,stream.emit("finish")):prefinish(stream,state)),need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?process.nextTick(cb):stream.once("finish",cb)),state.ended=!0}module.exports=Writable;var Buffer=__webpack_require__(374).Buffer;Writable.WritableState=WritableState;var util=__webpack_require__(377);util.inherits=__webpack_require__(370);var Stream=__webpack_require__(369);util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1;return util.isFunction(encoding)&&(cb=encoding,encoding=null),util.isBuffer(chunk)?encoding="buffer":encoding||(encoding=state.defaultEncoding),util.isFunction(cb)||(cb=function(){}),state.ended?writeAfterEnd(this,state,cb):validChunk(this,state,chunk,cb)&&(state.pendingcb++,ret=writeOrBuffer(this,state,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){var state=this._writableState;state.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.buffer.length||clearBuffer(this,state))},Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;util.isFunction(chunk)?(cb=chunk,chunk=null,encoding=null):util.isFunction(encoding)&&(cb=encoding,encoding=null),util.isNullOrUndefined(chunk)||this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||endWritable(this,state,cb)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding))throw new Error("Unknown encoding: "+encoding)}function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3,this.charLength=this.charReceived?3:0}var Buffer=__webpack_require__(374).Buffer,isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(encoding){switch(this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(encoding),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(buffer){for(var charStr="";this.charLength;){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;if(buffer.copy(this.charBuffer,this.charReceived,0,available),this.charReceived+=available,this.charReceived<this.charLength)return"";buffer=buffer.slice(available,buffer.length),charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(!(charCode>=55296&&charCode<=56319)){if(this.charReceived=this.charLength=0,0===buffer.length)return charStr;break}this.charLength+=this.surrogateSize,charStr=""}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end),end-=this.charReceived),charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1,charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;return this.charLength+=size,this.charReceived+=size,this.charBuffer.copy(this.charBuffer,size,0,size),buffer.copy(this.charBuffer,0,0,size),charStr.substring(0,end)}return charStr},StringDecoder.prototype.detectIncompleteChar=function(buffer){for(var i=buffer.length>=3?3:buffer.length;i>0;i--){var c=buffer[buffer.length-i];if(1==i&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i},StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length&&(res=this.write(buffer)),this.charReceived){var cr=this.charReceived,buf=this.charBuffer,enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res}},function(module,exports,__webpack_require__){function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null,ts.writecb=null,util.isNullOrUndefined(data)||stream.push(data),cb&&cb(er);var rs=stream._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&stream._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){util.isFunction(this._flush)?this._flush(function(er){done(stream,er)}):done(stream)})}function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState,ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}module.exports=Transform;var Duplex=__webpack_require__(379),util=__webpack_require__(377);util.inherits=__webpack_require__(370),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;util.isNull(ts.writechunk)||!ts.writecb||ts.transforming?ts.needTransform=!0:(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform))}},function(module,exports,__webpack_require__){function PassThrough(options){return this instanceof PassThrough?void Transform.call(this,options):new PassThrough(options)}module.exports=PassThrough;var Transform=__webpack_require__(382),util=__webpack_require__(377);util.inherits=__webpack_require__(370),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(380)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(379)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(382)},function(module,exports,__webpack_require__){module.exports=__webpack_require__(383)},function(module,exports,__webpack_require__){function parseHeaders(res){for(var lines=res.getAllResponseHeaders().split(/\r?\n/),headers={},i=0;i<lines.length;i++){var line=lines[i];if(""!==line){var m=line.match(/^([^:]+):\s*(.*)/);if(m){var key=m[1].toLowerCase(),value=m[2];void 0!==headers[key]?isArray(headers[key])?headers[key].push(value):headers[key]=[headers[key],value]:headers[key]=value}else headers[line]=!0}}return headers}var Stream=__webpack_require__(369),util=__webpack_require__(389),Response=module.exports=function(res){this.offset=0,this.readable=!0};util.inherits(Response,Stream);var capable={streaming:!0,status2:!0};Response.prototype.getResponse=function(xhr){var respType=String(xhr.responseType).toLowerCase();return"blob"===respType?xhr.responseBlob||xhr.response:"arraybuffer"===respType?xhr.response:xhr.responseText},Response.prototype.getHeader=function(key){return this.headers[key.toLowerCase()]},Response.prototype.handle=function(res){if(2===res.readyState&&capable.status2){try{this.statusCode=res.status,this.headers=parseHeaders(res)}catch(err){capable.status2=!1}capable.status2&&this.emit("ready")}else if(capable.streaming&&3===res.readyState){try{this.statusCode||(this.statusCode=res.status,this.headers=parseHeaders(res),this.emit("ready"))}catch(err){}try{this._emitData(res)}catch(err){capable.streaming=!1}}else 4===res.readyState&&(this.statusCode||(this.statusCode=res.status,this.emit("ready")),this._emitData(res),res.error?this.emit("error",this.getResponse(res)):this.emit("end"),this.emit("close"))},Response.prototype._emitData=function(res){var respBody=this.getResponse(res);return respBody.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(respBody,this.offset)),void(this.offset=respBody.byteLength)):void(respBody.length>this.offset&&(this.emit("data",respBody.slice(this.offset)),this.offset=respBody.length))};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},function(module,exports,__webpack_require__){(function(global,process){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=__webpack_require__(390);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__(391),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(exports,function(){return this}(),__webpack_require__(9))},function(module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){!function(){function InvalidCharacterError(message){this.message=message}var object=exports,chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError",object.btoa||(object.btoa=function(input){for(var block,charCode,idx=0,map=chars,output="";input.charAt(0|idx)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8)){if(charCode=input.charCodeAt(idx+=.75),charCode>255)throw new InvalidCharacterError("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");block=block<<8|charCode}return output}),object.atob||(object.atob=function(input){if(input=input.replace(/=+$/,""),input.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var bs,buffer,bc=0,idx=0,output="";buffer=input.charAt(idx++);~buffer&&(bs=bc%4?64*bs+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0)buffer=chars.indexOf(buffer);return output})}()},function(module,exports,__webpack_require__){var http=__webpack_require__(367),https=module.exports;for(var key in http)http.hasOwnProperty(key)&&(https[key]=http[key]);https.request=function(params,cb){return params||(params={}),params.scheme="https",http.request.call(this,params,cb)}},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TitaniumHttp=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_parseHeaders=__webpack_require__(395),_parseHeaders2=_interopRequireDefault(_parseHeaders),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction),Titanium=global.Titanium;exports.TitaniumHttp=function(){function TitaniumHttp(){_classCallCheck(this,TitaniumHttp)}return _createClass(TitaniumHttp,[{key:"handle",value:function(){function handle(_x){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request){var promise;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return promise=new _promise2.default(function(resolve,reject){var url=request.url,method=request.method,headers=request.headers,body=request.body,autoRedirect=request.autoRedirect,client=Titanium.Network.createHTTPClient();client.open(method,url);for(var keys=Object.keys(headers),i=0,len=keys.length;i<len;i+=1){var key=keys[i];client.setRequestHeader(key,headers[key])}client.autoRedirect=autoRedirect||!0,(0,_isFunction2.default)(client.setTlsVersion)&&Titanium.Network.TLS_VERSION_1_2&&client.setTlsVersion(Titanium.Network.TLS_VERSION_1_2),client.timeout=request.timeout||0,client.onload=function(){resolve({response:{statusCode:this.status,headers:(0,_parseHeaders2.default)(this.allResponseHeaders),data:this.responseText}})},client.onerror=function(e){reject(e.error)},client.send(body)}),_context.abrupt("return",promise);case 2:case"end":return _context.stop()}},_callee,this)}));return handle}()}],[{key:"isSupported",value:function(){return"undefined"!=typeof Titanium&&"undefined"!=typeof Titanium.Network}}]),TitaniumHttp}()}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var trim=__webpack_require__(396),forEach=__webpack_require__(397),isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)};module.exports=function(headers){if(!headers)return{};var result={};return forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=trim(row.slice(0,index)).toLowerCase(),value=trim(row.slice(index+1));"undefined"==typeof result[key]?result[key]=value:isArray(result[key])?result[key].push(value):result[key]=[result[key],value]}),result}},function(module,exports){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}},function(module,exports,__webpack_require__){function forEach(list,iterator,context){if(!isFunction(iterator))throw new TypeError("iterator must be a function");arguments.length<3&&(context=this),"[object Array]"===toString.call(list)?forEachArray(list,iterator,context):"string"==typeof list?forEachString(list,iterator,context):forEachObject(list,iterator,context)}function forEachArray(array,iterator,context){for(var i=0,len=array.length;i<len;i++)hasOwnProperty.call(array,i)&&iterator.call(context,array[i],i,array)}function forEachString(string,iterator,context){for(var i=0,len=string.length;i<len;i++)iterator.call(context,string.charAt(i),i,string)}function forEachObject(object,iterator,context){for(var k in object)hasOwnProperty.call(object,k)&&iterator.call(context,object[k],k,object)}var isFunction=__webpack_require__(398);module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty},function(module,exports){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.XHR=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,
"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_parseHeaders=__webpack_require__(395),_parseHeaders2=_interopRequireDefault(_parseHeaders);exports.XHR=function(){function XHR(){_classCallCheck(this,XHR)}return _createClass(XHR,[{key:"handle",value:function(request){var promise=new _promise2.default(function(resolve){var url=request.url,method=request.method,headers=request.headers,body=request.body,xhr=new XMLHttpRequest;xhr.open(method,url);var names=Object.keys(headers),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=names[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var name=_step.value;xhr.setRequestHeader(name,headers[name])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}xhr.onload=xhr.ontimeout=xhr.onabort=xhr.onerror=function(){var statusCode=xhr.status,data=xhr.response||null;return xhr.response&&(data=xhr.responseText||null),resolve({response:{statusCode:statusCode,headers:(0,_parseHeaders2.default)(xhr.getAllResponseHeaders()),data:data}})},xhr.send(body)});return promise}}],[{key:"isSupported",value:function(){return"undefined"!=typeof window&&"undefined"!=typeof window.XMLHttpRequest}}]),XHR}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_middleware=__webpack_require__(238),_middleware2=_interopRequireDefault(_middleware),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),ParseMiddleware=function(_Middleware){function ParseMiddleware(){var name=arguments.length<=0||void 0===arguments[0]?"Parse Middleware":arguments[0];return _classCallCheck(this,ParseMiddleware),_possibleConstructorReturn(this,(ParseMiddleware.__proto__||Object.getPrototypeOf(ParseMiddleware)).call(this,name))}return _inherits(ParseMiddleware,_Middleware),_createClass(ParseMiddleware,[{key:"handle",value:function(){function handle(_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request,response){var contentType;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(response&&response.data&&(contentType=response.headers["content-type"]||response.headers["Content-Type"],contentType&&0===contentType.indexOf("application/json")))try{response.data=JSON.parse(response.data)}catch(error){}return _context.abrupt("return",{response:response});case 2:case"end":return _context.stop()}},_callee,this)}));return handle}()}]),ParseMiddleware}(_middleware2.default);exports.default=ParseMiddleware},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_middleware=__webpack_require__(238),_middleware2=_interopRequireDefault(_middleware),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),SerializeMiddleware=function(_Middleware){function SerializeMiddleware(){var name=arguments.length<=0||void 0===arguments[0]?"Serialize Middleware":arguments[0];return _classCallCheck(this,SerializeMiddleware),_possibleConstructorReturn(this,(SerializeMiddleware.__proto__||Object.getPrototypeOf(SerializeMiddleware)).call(this,name))}return _inherits(SerializeMiddleware,_Middleware),_createClass(SerializeMiddleware,[{key:"handle",value:function(){function handle(_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(request){var contentType,body,keys,str,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,key;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!request||!request.body){_context.next=31;break}if(contentType=request.headers["content-type"]||request.headers["Content-Type"],!contentType){_context.next=31;break}if(0!==contentType.indexOf("application/json")){_context.next=7;break}request.body=JSON.stringify(request.body),_context.next=31;break;case 7:if(0!==contentType.indexOf("application/x-www-form-urlencoded")){_context.next=31;break}for(body=request.body,keys=Object.keys(body),str=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context.prev=14,_iterator=keys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)key=_step.value,str.push(global.encodeURIComponent(key)+"="+global.encodeURIComponent(body[key]));_context.next=22;break;case 18:_context.prev=18,_context.t0=_context.catch(14),_didIteratorError=!0,_iteratorError=_context.t0;case 22:_context.prev=22,_context.prev=23,!_iteratorNormalCompletion&&_iterator.return&&_iterator.return();case 25:if(_context.prev=25,!_didIteratorError){_context.next=28;break}throw _iteratorError;case 28:return _context.finish(25);case 29:return _context.finish(22);case 30:request.body=str.join("&");case 31:return _context.abrupt("return",{request:request});case 32:case"end":return _context.stop()}},_callee,this,[[14,18,22,30],[23,,25,29]])}));return handle}()}]),SerializeMiddleware}(_middleware2.default);exports.default=SerializeMiddleware}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkRack=exports.CacheRack=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_middleware=__webpack_require__(234),_middleware2=_interopRequireDefault(_middleware),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_findIndex=__webpack_require__(281),_findIndex2=_interopRequireDefault(_findIndex),_reduce=__webpack_require__(403),_reduce2=_interopRequireDefault(_reduce),Rack=function(_Middleware){function Rack(){var name=arguments.length<=0||void 0===arguments[0]?"Rack":arguments[0];_classCallCheck(this,Rack);var _this=_possibleConstructorReturn(this,(Rack.__proto__||Object.getPrototypeOf(Rack)).call(this,name));return _this.middlewares=[],_this.canceled=!1,_this}return _inherits(Rack,_Middleware),_createClass(Rack,[{key:"getMiddleware",value:function(){var index=arguments.length<=0||void 0===arguments[0]?-1:arguments[0],middlewares=this.middlewares;if(index<-1||index>=middlewares.length)throw new Error("Index "+index+" is out of bounds.");return middlewares[index]}},{key:"use",value:function(middleware){if(middleware){if(middleware instanceof _middleware2.default)return void this.middlewares.push(middleware);throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"useBefore",value:function(middlewareClass,middleware){if(middleware){if(middleware instanceof _middleware2.default){var middlewares=this.middlewares,index=(0,_findIndex2.default)(middlewares,function(existingMiddleware){return existingMiddleware instanceof middlewareClass});return void(index>-1&&(middlewares.splice(index,0,middleware),this.middlewares=middlewares))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"useAfter",value:function(middlewareClass,middleware){if(middleware){if(middleware instanceof _middleware2.default){var middlewares=this.middlewares,index=(0,_findIndex2.default)(middlewares,function(existingMiddleware){return existingMiddleware instanceof middlewareClass});return void(index>-1&&(middlewares.splice(index+1,0,middleware),this.middlewares=middlewares))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"swap",value:function(middlewareClass,middleware){if(middleware){if(middleware instanceof _middleware2.default){var middlewares=this.middlewares,index=(0,_findIndex2.default)(middlewares,function(existingMiddleware){return existingMiddleware instanceof middlewareClass});return void(index>-1&&(middlewares.splice(index,1,middleware),this.middlewares=middlewares))}throw new Error("Unable to use the middleware. It must be an instance of Middleware.")}}},{key:"remove",value:function(middlewareClass){var middlewares=this.middlewares,index=(0,_findIndex2.default)(middlewares,function(existingMiddleware){return existingMiddleware instanceof middlewareClass});index>-1&&(middlewares.splice(index,1),this.middlewares=middlewares,this.remove(middlewareClass))}},{key:"reset",value:function(){this.middlewares=[]}},{key:"execute",value:function(){function execute(_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(req){var _ref2,response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(req){_context.next=2;break}throw new Error("Request is undefined. Please provide a valid request.");case 2:return _context.next=4,(0,_reduce2.default)(this.middlewares,function(promise,middleware){return promise.then(function(_ref3){var request=_ref3.request,response=_ref3.response;return middleware.handle(request||req,response)})},Promise.resolve({request:req}));case 4:return _ref2=_context.sent,response=_ref2.response,_context.abrupt("return",response);case 7:case"end":return _context.stop()}},_callee,this)}));return execute}()},{key:"cancel",value:function(){this.canceled=!0}},{key:"handle",value:function(request){return this.execute(request)}},{key:"generateTree",value:function(){var level=arguments.length<=0||void 0===arguments[0]?0:arguments[0],root=_get(Rack.prototype.__proto__||Object.getPrototypeOf(Rack.prototype),"generateTree",this).call(this,level),middlewares=this.middlewares;return middlewares.forEach(function(middleware){root.nodes.push(middleware.generateTree(level+1))}),root}}]),Rack}(_middleware2.default);exports.default=Rack;exports.CacheRack=function(_Rack){function CacheRack(){var name=arguments.length<=0||void 0===arguments[0]?"Cache Rack":arguments[0];_classCallCheck(this,CacheRack);var _this2=_possibleConstructorReturn(this,(CacheRack.__proto__||Object.getPrototypeOf(CacheRack)).call(this,name));return _this2.use(new _middleware.CacheMiddleware),_this2}return _inherits(CacheRack,_Rack),CacheRack}(Rack),exports.NetworkRack=function(_Rack2){function NetworkRack(){var name=arguments.length<=0||void 0===arguments[0]?"Network Rack":arguments[0];_classCallCheck(this,NetworkRack);var _this3=_possibleConstructorReturn(this,(NetworkRack.__proto__||Object.getPrototypeOf(NetworkRack)).call(this,name));return _this3.use(new _middleware.SerializeMiddleware),_this3.use(new _middleware.HttpMiddleware),_this3.use(new _middleware.ParseMiddleware),_this3}return _inherits(NetworkRack,_Rack2),NetworkRack}(Rack)},function(module,exports,__webpack_require__){function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,baseIteratee(iteratee,4),accumulator,initAccum,baseEach)}var arrayReduce=__webpack_require__(267),baseEach=__webpack_require__(20),baseIteratee=__webpack_require__(41),baseReduce=__webpack_require__(404),isArray=__webpack_require__(34);module.exports=reduce},function(module,exports){function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}module.exports=baseReduce},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,slice=[].slice;!function(root,factory){return null!=__webpack_require__(406)?(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))):"undefined"!=typeof exports&&null!==exports?module.exports=factory():root.UrlPattern=factory()}(this,function(){var P,UrlPattern,astNodeContainsSegmentsForProvidedParams,astNodeToNames,astNodeToRegexString,baseAstNodeToRegexString,concatMap,defaultOptions,escapeForRegex,getParam,keysAndValuesToObject,newParser,regexGroupCount,stringConcatMap,stringify;return escapeForRegex=function(string){return string.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},concatMap=function(array,f){var i,length,results;for(results=[],i=-1,length=array.length;++i<length;)results=results.concat(f(array[i]));return results},stringConcatMap=function(array,f){var i,length,result;for(result="",i=-1,length=array.length;++i<length;)result+=f(array[i]);return result},regexGroupCount=function(regex){return new RegExp(regex.toString()+"|").exec("").length-1},keysAndValuesToObject=function(keys,values){var i,key,length,object,value;for(object={},i=-1,length=keys.length;++i<length;)key=keys[i],value=values[i],null!=value&&(null!=object[key]?(Array.isArray(object[key])||(object[key]=[object[key]]),object[key].push(value)):object[key]=value);return object},P={},P.Result=function(value,rest){this.value=value,this.rest=rest},P.Tagged=function(tag,value){this.tag=tag,this.value=value},P.tag=function(tag,parser){return function(input){var result,tagged;if(result=parser(input),null!=result)return tagged=new P.Tagged(tag,result.value),new P.Result(tagged,result.rest)}},P.regex=function(regex){return function(input){var matches,result;if(matches=regex.exec(input),null!=matches)return result=matches[0],new P.Result(result,input.slice(result.length))}},P.sequence=function(){var parsers;return parsers=1<=arguments.length?slice.call(arguments,0):[],function(input){var i,length,parser,rest,result,values;for(i=-1,length=parsers.length,values=[],rest=input;++i<length;){if(parser=parsers[i],result=parser(rest),null==result)return;values.push(result.value),rest=result.rest}return new P.Result(values,rest)}},P.pick=function(){var indexes,parsers;return indexes=arguments[0],parsers=2<=arguments.length?slice.call(arguments,1):[],function(input){var array,result;if(result=P.sequence.apply(P,parsers)(input),null!=result)return array=result.value,result.value=array[indexes],result}},P.string=function(string){var length;return length=string.length,function(input){if(input.slice(0,length)===string)return new P.Result(string,input.slice(length))}},P.lazy=function(fn){var cached;return cached=null,function(input){return null==cached&&(cached=fn()),cached(input)}},P.baseMany=function(parser,end,stringResult,atLeastOneResultRequired,input){var endResult,parserResult,rest,results;for(rest=input,results=stringResult?"":[];;){if(null!=end&&(endResult=end(rest),null!=endResult))break;if(parserResult=parser(rest),null==parserResult)break;stringResult?results+=parserResult.value:results.push(parserResult.value),rest=parserResult.rest}if(!atLeastOneResultRequired||0!==results.length)return new P.Result(results,rest)},P.many1=function(parser){return function(input){return P.baseMany(parser,null,!1,!0,input)}},P.concatMany1Till=function(parser,end){return function(input){return P.baseMany(parser,end,!0,!0,input)}},P.firstChoice=function(){var parsers;return parsers=1<=arguments.length?slice.call(arguments,0):[],function(input){var i,length,parser,result;for(i=-1,length=parsers.length;++i<length;)if(parser=parsers[i],result=parser(input),null!=result)return result}},newParser=function(options){var U;return U={},U.wildcard=P.tag("wildcard",P.string(options.wildcardChar)),U.optional=P.tag("optional",P.pick(1,P.string(options.optionalSegmentStartChar),P.lazy(function(){return U.pattern}),P.string(options.optionalSegmentEndChar))),U.name=P.regex(new RegExp("^["+options.segmentNameCharset+"]+")),U.named=P.tag("named",P.pick(1,P.string(options.segmentNameStartChar),P.lazy(function(){return U.name}))),U.escapedChar=P.pick(1,P.string(options.escapeChar),P.regex(/^./)),U.static=P.tag("static",P.concatMany1Till(P.firstChoice(P.lazy(function(){return U.escapedChar}),P.regex(/^./)),P.firstChoice(P.string(options.segmentNameStartChar),P.string(options.optionalSegmentStartChar),P.string(options.optionalSegmentEndChar),U.wildcard))),U.token=P.lazy(function(){return P.firstChoice(U.wildcard,U.optional,U.named,U.static)}),U.pattern=P.many1(P.lazy(function(){return U.token})),U},defaultOptions={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},baseAstNodeToRegexString=function(astNode,segmentValueCharset){if(Array.isArray(astNode))return stringConcatMap(astNode,function(node){return baseAstNodeToRegexString(node,segmentValueCharset)});switch(astNode.tag){case"wildcard":return"(.*?)";case"named":return"(["+segmentValueCharset+"]+)";case"static":return escapeForRegex(astNode.value);case"optional":return"(?:"+baseAstNodeToRegexString(astNode.value,segmentValueCharset)+")?"}},astNodeToRegexString=function(astNode,segmentValueCharset){return null==segmentValueCharset&&(segmentValueCharset=defaultOptions.segmentValueCharset),"^"+baseAstNodeToRegexString(astNode,segmentValueCharset)+"$"},astNodeToNames=function(astNode){if(Array.isArray(astNode))return concatMap(astNode,astNodeToNames);switch(astNode.tag){case"wildcard":return["_"];case"named":return[astNode.value];case"static":return[];case"optional":return astNodeToNames(astNode.value)}},getParam=function(params,key,nextIndexes,sideEffects){var index,maxIndex,result,value;if(null==sideEffects&&(sideEffects=!1),value=params[key],null!=value){if(index=nextIndexes[key]||0,maxIndex=Array.isArray(value)?value.length-1:0,!(index>maxIndex))return result=Array.isArray(value)?value[index]:value,sideEffects&&(nextIndexes[key]=index+1),result;if(sideEffects)throw new Error("too few values provided for key `"+key+"`")}else if(sideEffects)throw new Error("no values provided for key `"+key+"`")},astNodeContainsSegmentsForProvidedParams=function(astNode,params,nextIndexes){var i,length;if(Array.isArray(astNode)){for(i=-1,length=astNode.length;++i<length;)if(astNodeContainsSegmentsForProvidedParams(astNode[i],params,nextIndexes))return!0;return!1}switch(astNode.tag){case"wildcard":return null!=getParam(params,"_",nextIndexes,!1);case"named":return null!=getParam(params,astNode.value,nextIndexes,!1);case"static":return!1;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)}},stringify=function(astNode,params,nextIndexes){if(Array.isArray(astNode))return stringConcatMap(astNode,function(node){return stringify(node,params,nextIndexes)});switch(astNode.tag){case"wildcard":return getParam(params,"_",nextIndexes,!0);case"named":return getParam(params,astNode.value,nextIndexes,!0);case"static":return astNode.value;case"optional":return astNodeContainsSegmentsForProvidedParams(astNode.value,params,nextIndexes)?stringify(astNode.value,params,nextIndexes):""}},UrlPattern=function(arg1,arg2){var groupCount,options,parsed,parser,withoutWhitespace;if(arg1 instanceof UrlPattern)return this.isRegex=arg1.isRegex,this.regex=arg1.regex,this.ast=arg1.ast,void(this.names=arg1.names);if(this.isRegex=arg1 instanceof RegExp,"string"!=typeof arg1&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=arg1,null!=arg2){if(!Array.isArray(arg2))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(groupCount=regexGroupCount(this.regex),arg2.length!==groupCount)throw new Error("regex contains "+groupCount+" groups but array of group names contains "+arg2.length);this.names=arg2}}else{if(""===arg1)throw new Error("argument must not be the empty string");if(withoutWhitespace=arg1.replace(/\s+/g,""),withoutWhitespace!==arg1)throw new Error("argument must not contain whitespace");if(options={escapeChar:(null!=arg2?arg2.escapeChar:void 0)||defaultOptions.escapeChar,segmentNameStartChar:(null!=arg2?arg2.segmentNameStartChar:void 0)||defaultOptions.segmentNameStartChar,segmentNameCharset:(null!=arg2?arg2.segmentNameCharset:void 0)||defaultOptions.segmentNameCharset,segmentValueCharset:(null!=arg2?arg2.segmentValueCharset:void 0)||defaultOptions.segmentValueCharset,optionalSegmentStartChar:(null!=arg2?arg2.optionalSegmentStartChar:void 0)||defaultOptions.optionalSegmentStartChar,optionalSegmentEndChar:(null!=arg2?arg2.optionalSegmentEndChar:void 0)||defaultOptions.optionalSegmentEndChar,wildcardChar:(null!=arg2?arg2.wildcardChar:void 0)||defaultOptions.wildcardChar},parser=newParser(options),parsed=parser.pattern(arg1),null==parsed)throw new Error("couldn't parse pattern");if(""!==parsed.rest)throw new Error("could only partially parse pattern");this.ast=parsed.value,this.regex=new RegExp(astNodeToRegexString(this.ast,options.segmentValueCharset)),this.names=astNodeToNames(this.ast)}},UrlPattern.prototype.match=function(url){var groups,match;return match=this.regex.exec(url),null==match?null:(groups=match.slice(1),this.names?keysAndValuesToObject(this.names,groups):groups)},UrlPattern.prototype.stringify=function(params){if(null==params&&(params={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(params!==Object(params))throw new Error("argument must be an object or undefined");return stringify(this.ast,params,{})},UrlPattern.escapeForRegex=escapeForRegex,UrlPattern.concatMap=concatMap,UrlPattern.stringConcatMap=stringConcatMap,UrlPattern.regexGroupCount=regexGroupCount,UrlPattern.keysAndValuesToObject=keysAndValuesToObject,UrlPattern.P=P,UrlPattern.newParser=newParser,UrlPattern.defaultOptions=defaultOptions,UrlPattern.astNodeToRegexString=astNodeToRegexString,UrlPattern.astNodeToNames=astNodeToNames,UrlPattern.getParam=getParam,UrlPattern.astNodeContainsSegmentsForProvidedParams=astNodeContainsSegmentsForProvidedParams,UrlPattern.stringify=stringify,UrlPattern})},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(exports,{})},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_set=function set(object,property,value,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);null!==parent&&set(parent,property,value,receiver)}else if("value"in desc&&desc.writable)desc.value=value;else{var setter=desc.set;void 0!==setter&&setter.call(receiver,value)}return value},_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_kinveyrequest=__webpack_require__(408),_kinveyrequest2=_interopRequireDefault(_kinveyrequest),_request3=__webpack_require__(13),_cacherequest=__webpack_require__(12),_cacherequest2=_interopRequireDefault(_cacherequest),_response=__webpack_require__(16),_response2=_interopRequireDefault(_response),_errors=__webpack_require__(14),_query3=__webpack_require__(421),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_keyBy=__webpack_require__(242),_keyBy2=_interopRequireDefault(_keyBy),_reduce=__webpack_require__(403),_reduce2=_interopRequireDefault(_reduce),_result=__webpack_require__(427),_result2=_interopRequireDefault(_result),_values=__webpack_require__(278),_values2=_interopRequireDefault(_values),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",kmdAttribute=process&&process.env&&process.env.KINVEY_KMD_ATTRIBUTE||"_kmd"||"_kmd",maxIdsPerRequest=200,DeltaFetchRequest=function(_KinveyRequest){
function DeltaFetchRequest(){return _classCallCheck(this,DeltaFetchRequest),_possibleConstructorReturn(this,(DeltaFetchRequest.__proto__||Object.getPrototypeOf(DeltaFetchRequest)).apply(this,arguments))}return _inherits(DeltaFetchRequest,_KinveyRequest),_createClass(DeltaFetchRequest,[{key:"execute",value:function(){function execute(){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(){var cacheData,_request,_ret,request,_this2=this;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return cacheData=[],_context2.next=3,_get(DeltaFetchRequest.prototype.__proto__||Object.getPrototypeOf(DeltaFetchRequest.prototype),"execute",this).call(this);case 3:return _context2.prev=3,_request=new _cacherequest2.default({method:_request3.RequestMethod.GET,url:this.url,headers:this.headers,query:this.query,timeout:this.timeout,client:this.client}),_context2.next=7,_request.execute().then(function(cacheResponse){return cacheResponse.data});case 7:cacheData=_context2.sent,_context2.next=15;break;case 10:if(_context2.prev=10,_context2.t0=_context2.catch(3),_context2.t0 instanceof _errors.NotFoundError){_context2.next=14;break}throw _context2.t0;case 14:cacheData=[];case 15:if(!((0,_isArray2.default)(cacheData)&&cacheData.length>0)){_context2.next=20;break}return _context2.delegateYield(_regeneratorRuntime2.default.mark(function _callee(){var cacheDocuments,query,request,networkData,networkDocuments,deltaSet,cacheDocumentIds,deltaSetIds,promises,i,_query,ids,_request2,promise,responses,response,_query2;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return cacheDocuments=(0,_keyBy2.default)(cacheData,idAttribute),query=new _query3.Query((0,_result2.default)(_this2.query,"toJSON",_this2.query)),query.fields=[idAttribute,kmdAttribute+".lmt"],request=new _kinveyrequest2.default({method:_request3.RequestMethod.GET,url:_this2.url,headers:_this2.headers,auth:_this2.auth,query:query,timeout:_this2.timeout,client:_this2.client}),_context.next=6,request.execute().then(function(response){return response.data});case 6:for(networkData=_context.sent,networkDocuments=(0,_keyBy2.default)(networkData,idAttribute),deltaSet=networkDocuments,cacheDocumentIds=Object.keys(cacheDocuments),(0,_forEach2.default)(cacheDocumentIds,function(id){var cacheDocument=cacheDocuments[id],networkDocument=networkDocuments[id];networkDocument&&networkDocument[kmdAttribute]&&cacheDocument[kmdAttribute]&&networkDocument[kmdAttribute].lmt===cacheDocument[kmdAttribute].lmt?delete deltaSet[id]:delete cacheDocuments[id]}),deltaSetIds=Object.keys(deltaSet),promises=[],i=0;i<deltaSetIds.length;)_query=new _query3.Query((0,_result2.default)(_this2.query,"toJSON",_this2.query)),ids=deltaSetIds.slice(i,deltaSetIds.length>maxIdsPerRequest+i?maxIdsPerRequest:deltaSetIds.length),_query.contains(idAttribute,ids),_request2=new _kinveyrequest2.default({method:_request3.RequestMethod.GET,url:_this2.url,headers:_this2.headers,auth:_this2.auth,query:_query,timeout:_this2.timeout,client:_this2.client}),promise=_request2.execute(),promises.push(promise),i+=maxIdsPerRequest;return _context.next=17,_promise2.default.all(promises);case 17:return responses=_context.sent,response=(0,_reduce2.default)(responses,function(result,response){if(response.isSuccess()){var headers=result.headers;headers.addHeaders(response.headers),result.headers=headers,result.data=result.data.concat(response.data)}return result},new _response2.default({statusCode:_response.StatusCode.Ok,data:[]})),response.data=response.data.concat((0,_values2.default)(cacheDocuments)),_this2.query&&(_query2=new _query3.Query((0,_result2.default)(_this2.query,"toJSON",_this2.query)),_query2.skip(0).limit(0),response.data=_query2.process(response.data)),_context.abrupt("return",{v:response});case 22:case"end":return _context.stop()}},_callee,_this2)})(),"t1",17);case 17:if(_ret=_context2.t1,"object"!==("undefined"==typeof _ret?"undefined":_typeof(_ret))){_context2.next=20;break}return _context2.abrupt("return",_ret.v);case 20:return request=new _kinveyrequest2.default({method:_request3.RequestMethod.GET,url:this.url,headers:this.headers,auth:this.auth,query:this.query,timeout:this.timeout,client:this.client}),_context2.abrupt("return",request.execute());case 22:case"end":return _context2.stop()}},_callee2,this,[[3,10]])}));return execute}()},{key:"method",get:function(){return _get(DeltaFetchRequest.prototype.__proto__||Object.getPrototypeOf(DeltaFetchRequest.prototype),"method",this)},set:function(method){switch((0,_isString2.default)(method)||(method=String(method)),method=method.toUpperCase()){case _request3.RequestMethod.GET:_set(DeltaFetchRequest.prototype.__proto__||Object.getPrototypeOf(DeltaFetchRequest.prototype),"method",method,this);break;case _request3.RequestMethod.POST:case _request3.RequestMethod.PATCH:case _request3.RequestMethod.PUT:case _request3.RequestMethod.DELETE:default:throw new Error("Invalid request Method. Only RequestMethod.GET is allowed.")}}}]),DeltaFetchRequest}(_kinveyrequest2.default);exports.default=DeltaFetchRequest}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process,Buffer){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function byteCount(str){if(str){var count=0,stringLength=str.length;str=String(str||"");for(var i=0;i<stringLength;i+=1){var partCount=encodeURI(str[i]).split("%").length;count+=1===partCount?1:partCount-1}return count}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Properties=exports.AuthType=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_set=function set(object,property,value,receiver){var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);null!==parent&&set(parent,property,value,receiver)}else if("value"in desc&&desc.writable)desc.value=value;else{var setter=desc.set;void 0!==setter&&setter.call(receiver,value)}return value},_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_request=__webpack_require__(13),_headers=__webpack_require__(17),_headers2=_interopRequireDefault(_headers),_networkrequest=__webpack_require__(409),_networkrequest2=_interopRequireDefault(_networkrequest),_kinveyresponse=__webpack_require__(160),_kinveyresponse2=_interopRequireDefault(_kinveyresponse),_errors=__webpack_require__(14),_client=__webpack_require__(161),_social=__webpack_require__(410),_utils=__webpack_require__(162),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_qs=__webpack_require__(148),_qs2=_interopRequireDefault(_qs),_appendQuery=__webpack_require__(152),_appendQuery2=_interopRequireDefault(_appendQuery),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_isNumber=__webpack_require__(159),_isNumber2=_interopRequireDefault(_isNumber),_isEmpty=__webpack_require__(358),_isEmpty2=_interopRequireDefault(_isEmpty),socialIdentityAttribute=process&&process.env&&process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE||"_socialIdentity"||"_socialIdentity",tokenPathname=process&&process.env&&process.env.KINVEY_MIC_TOKEN_PATHNAME||"/oauth/token"||"/oauth/token",usersNamespace=process&&process.env&&process.env.KINVEY_USERS_NAMESPACE||"user"||"user",kmdAttribute=process&&process.env&&process.env.KINVEY_KMD_ATTRIBUTE||"_kmd"||"_kmd",defaultApiVersion=process&&process.env&&process.env.KINVEY_DEFAULT_API_VERSION||"4"||4,customPropertiesMaxBytesAllowed=process&&process.env&&process.env.KINVEY_MAX_HEADER_BYTES||"2000"||2e3,AuthType={All:"All",App:"App",Basic:"Basic",Default:"Default",Master:"Master",None:"None",Session:"Session"};Object.freeze(AuthType),exports.AuthType=AuthType;var Auth={all:function(client){try{return Auth.session(client)}catch(error){return Auth.basic(client)}},app:function(client){if(!client.appKey||!client.appSecret)throw new Error("Missing client appKey and/or appSecret. Use Kinvey.init() to set the appKey and appSecret for the client.");return{scheme:"Basic",username:client.appKey,password:client.appSecret}},basic:function(client){try{return Auth.master(client)}catch(error){return Auth.app(client)}},master:function(client){if(!client.appKey||!client.masterSecret)throw new Error("Missing client appKey and/or appSecret. Use Kinvey.init() to set the appKey and appSecret for the client.");return{scheme:"Basic",username:client.appKey,password:client.masterSecret}},none:function(){return null},session:function(client){var activeUser=client.activeUser;if(!activeUser)throw new _errors.NoActiveUserError("There is not an active user. Please login a user and retry the request.");return{scheme:"Kinvey",credentials:activeUser[kmdAttribute].authtoken}}},Properties=exports.Properties=function(_Headers){function Properties(){return _classCallCheck(this,Properties),_possibleConstructorReturn(this,(Properties.__proto__||Object.getPrototypeOf(Properties)).apply(this,arguments))}return _inherits(Properties,_Headers),Properties}(_headers2.default),KinveyRequest=function(_NetworkRequest){function KinveyRequest(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,KinveyRequest);var _this2=_possibleConstructorReturn(this,(KinveyRequest.__proto__||Object.getPrototypeOf(KinveyRequest)).call(this,options));return options=(0,_assign2.default)({authType:AuthType.None,query:null,apiVersion:defaultApiVersion,properties:new Properties,skipBL:!1,trace:!1,client:_client.Client.sharedInstance()},options),_this2.authType=options.authType,_this2.query=options.query,_this2.apiVersion=options.apiVersion,_this2.properties=options.properties,_this2.client=options.client,_this2.skipBL=options.skipBL,_this2.trace=options.trace,_this2}return _inherits(KinveyRequest,_NetworkRequest),_createClass(KinveyRequest,[{key:"execute",value:function(){function execute(_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var response,micSession,refreshMICRequest,newMicSession,data,loginRequest,activeUser,rawResponse=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,_get(KinveyRequest.prototype.__proto__||Object.getPrototypeOf(KinveyRequest.prototype),"execute",this).call(this);case 3:if(response=_context.sent,response instanceof _kinveyresponse2.default||(response=new _kinveyresponse2.default({statusCode:response.statusCode,headers:response.headers,data:response.data})),rawResponse!==!1||response.isSuccess()!==!1){_context.next=7;break}throw response.error;case 7:return _context.abrupt("return",response);case 10:if(_context.prev=10,_context.t0=_context.catch(0),!(_context.t0 instanceof _errors.InvalidCredentialsError)){_context.next=30;break}if(micSession=(0,_utils.getIdentitySession)(this.client,_social.SocialIdentity.MobileIdentityConnect),!micSession){_context.next=30;break}return refreshMICRequest=new KinveyRequest({method:_request.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:AuthType.App,url:_url2.default.format({protocol:micSession.protocol||this.client.micProtocol,host:micSession.host||this.client.micHost,pathname:tokenPathname}),body:{grant_type:"refresh_token",client_id:micSession.client_id,redirect_uri:micSession.redirect_uri,refresh_token:micSession.refresh_token},timeout:this.timeout,properties:this.properties}),_context.next=18,refreshMICRequest.execute().then(function(response){return response.data});case 18:return newMicSession=_context.sent,micSession=(0,_assign2.default)(micSession,newMicSession),data={},data[socialIdentityAttribute]={},data[socialIdentityAttribute][_social.SocialIdentity.MobileIdentityConnect]=micSession,loginRequest=new KinveyRequest({method:_request.RequestMethod.POST,authType:AuthType.App,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+usersNamespace+"/"+this.client.appKey+"/login"}),properties:this.properties,body:data,timeout:this.timeout,client:this.client}),_context.next=26,loginRequest.execute().then(function(response){return response.data});case 26:return activeUser=_context.sent,(0,_utils.setActiveUser)(this.client,activeUser),(0,_utils.setIdentitySession)(this.client,_social.SocialIdentity.MobileIdentityConnect,micSession),_context.abrupt("return",this.execute(rawResponse));case 30:throw _context.t0;case 31:case"end":return _context.stop()}},_callee,this,[[0,10]])}));return execute}()},{key:"headers",get:function(){var headers=_get(KinveyRequest.prototype.__proto__||Object.getPrototypeOf(KinveyRequest.prototype),"headers",this);if(headers.has("Accept")||headers.set("Accept","application/json; charset=utf-8"),headers.has("Content-Type")||headers.set("Content-Type","application/json; charset=utf-8"),headers.has("X-Kinvey-Api-Version")||headers.set("X-Kinvey-Api-Version",this.apiVersion),this.skipBL===!0?headers.set("X-Kinvey-Skip-Business-Logic",!0):headers.remove("X-Kinvey-Skip-Business-Logic"),this.trace===!0?(headers.set("X-Kinvey-Include-Headers-In-Response","X-Kinvey-Request-Id"),headers.set("X-Kinvey-ResponseWrapper",!0)):(headers.remove("X-Kinvey-Include-Headers-In-Response"),headers.remove("X-Kinvey-ResponseWrapper")),this.appVersion?headers.set("X-Kinvey-Client-App-Version",this.appVersion):headers.remove("X-Kinvey-Client-App-Version"),this.properties){var customPropertiesHeader=this.properties.toString();if((0,_isEmpty2.default)(customPropertiesHeader))headers.remove("X-Kinvey-Custom-Request-Properties");else{var customPropertiesByteCount=byteCount(customPropertiesHeader);if(customPropertiesByteCount>=customPropertiesMaxBytesAllowed)throw new Error("The custom properties are "+customPropertiesByteCount+" bytes."+("It must be less then "+customPropertiesMaxBytesAllowed+" bytes."),"Please remove some custom properties.");headers.set("X-Kinvey-Custom-Request-Properties",customPropertiesHeader)}}else headers.remove("X-Kinvey-Custom-Request-Properties");if(headers.set("X-Kinvey-Device-Information",_utils.Device.toString()),this.authType){var authInfo=void 0;switch(this.authType){case AuthType.All:authInfo=Auth.all(this.client);break;case AuthType.App:authInfo=Auth.app(this.client);break;case AuthType.Basic:authInfo=Auth.basic(this.client);break;case AuthType.Master:authInfo=Auth.master(this.client);break;case AuthType.None:authInfo=Auth.none(this.client);break;case AuthType.Session:authInfo=Auth.session(this.client);break;default:try{authInfo=Auth.session(this.client)}catch(error){try{authInfo=Auth.master(this.client)}catch(error2){throw error}}}if(authInfo){var credentials=authInfo.credentials;authInfo.username&&(credentials=new Buffer(authInfo.username+":"+authInfo.password).toString("base64")),headers.set("Authorization",authInfo.scheme+" "+credentials)}}else headers.remove("Authorization");return headers},set:function(headers){_set(KinveyRequest.prototype.__proto__||Object.getPrototypeOf(KinveyRequest.prototype),"headers",headers,this)}},{key:"url",get:function(){var urlString=_get(KinveyRequest.prototype.__proto__||Object.getPrototypeOf(KinveyRequest.prototype),"url",this),queryString=this.query?this.query.toQueryString():{};return(0,_isEmpty2.default)(queryString)?urlString:(0,_appendQuery2.default)(urlString,_qs2.default.stringify(queryString))},set:function(urlString){_set(KinveyRequest.prototype.__proto__||Object.getPrototypeOf(KinveyRequest.prototype),"url",urlString,this)}},{key:"apiVersion",get:function(){return this._apiVersion},set:function(apiVersion){this._apiVersion=(0,_isNumber2.default)(apiVersion)?apiVersion:defaultApiVersion}},{key:"properties",get:function(){return this._properties},set:function(properties){!properties||properties instanceof Properties||(properties=new Properties(properties)),this._properties=properties}},{key:"client",get:function(){return this._client},set:function(client){if(client){if(!(client instanceof _client.Client))throw new _errors.KinveyError("client must be an instance of the Client class.");this.appVersion=client.appVersion}this._client=client}}]),KinveyRequest}(_networkrequest2.default);exports.default=KinveyRequest}).call(exports,__webpack_require__(9),__webpack_require__(363).Buffer)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _request=__webpack_require__(13),_request2=_interopRequireDefault(_request),_kinveyJavascriptRack=__webpack_require__(233),NetworkRequest=function(_Request){function NetworkRequest(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,NetworkRequest);var _this=_possibleConstructorReturn(this,(NetworkRequest.__proto__||Object.getPrototypeOf(NetworkRequest)).call(this,options));return _this.rack=new _kinveyJavascriptRack.NetworkRack,_this}return _inherits(NetworkRequest,_Request),NetworkRequest}(_request2.default);exports.default=NetworkRequest},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _enums=__webpack_require__(411);Object.keys(_enums).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _enums[key]}})});var _facebook=__webpack_require__(412);Object.keys(_facebook).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _facebook[key]}})});var _google=__webpack_require__(416);Object.keys(_google).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _google[key]}})});var _linkedin=__webpack_require__(417);Object.keys(_linkedin).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _linkedin[key]}})});var _mic=__webpack_require__(418);Object.keys(_mic).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _mic[key]}})});var _windows=__webpack_require__(420);Object.keys(_windows).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _windows[key]}})})},function(module,exports,__webpack_require__){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SocialIdentity={Facebook:"facebook",Google:"google",Kinvey:process&&process.env&&process.env.KINVEY_IDENTITY||"kinvey"||"kinvey",LinkedIn:"linkedin",MobileIdentityConnect:process&&process.env&&process.env.KINVEY_MIC_IDENTITY||"kinveyAuth"||"kinveyAuth",Windows:"windows"};Object.freeze(SocialIdentity),exports.SocialIdentity=SocialIdentity}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Facebook=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_social=__webpack_require__(413),_enums=__webpack_require__(411),_errors=__webpack_require__(14),_utils=__webpack_require__(162),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_querystring=__webpack_require__(153),_querystring2=_interopRequireDefault(_querystring),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url);exports.Facebook=function(_Social){function Facebook(){return _classCallCheck(this,Facebook),_possibleConstructorReturn(this,(Facebook.__proto__||Object.getPrototypeOf(Facebook)).apply(this,arguments))}return _inherits(Facebook,_Social),_createClass(Facebook,[{key:"isSupported",value:function(){return!!_utils.Popup}},{key:"login",value:function(){function login(_x,_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(clientId){var session,promise,_this2=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(options=(0,_assign2.default)({force:!1,scope:"public_profile"},options),this.isSupported()){_context.next=3;break}throw new _errors.KinveyError("Unable to login with "+this.identity+". It is not supported on this platform.");case 3:if(session=this.session,!session||!this.isOnline(session)){_context.next=6;break}return _context.abrupt("return",session);case 6:if(clientId){_context.next=8;break}throw new _errors.KinveyError("Unable to login with "+this.identity+".  No client id was provided.");case 8:return promise=new _promise2.default(function(resolve,reject){function loadCallback(event){var urlString=event.url;try{urlString&&0===urlString.indexOf(redirectUri)&&redirected===!1&&(redirected=!0,popup.removeAllListeners(),popup.close(),oauthCallback(urlString))}catch(error){}}function errorCallback(event){var urlString=event.url;try{urlString&&0===urlString.indexOf(redirectUri)&&redirected===!1?(redirected=!0,popup.removeAllListeners(),popup.close(),oauthCallback(urlString)):redirected===!1&&(popup.removeAllListeners(),popup.close(),reject(new _errors.KinveyError(event.message,"",event.code)))}catch(error){}}function closedCallback(){redirected===!1&&(popup.removeAllListeners(),reject(new _errors.KinveyError("Facebook login has been cancelled.")))}var redirectUri=options.redirectUri||global.location.href,originalState=(0,_utils.randomString)(),popup=new _utils.Popup,redirected=!1,oauthCallback=function(urlString){var _url$parse=_url2.default.parse(urlString),hash=_url$parse.hash,_querystring$parse=_querystring2.default.parse(hash.substring(1)),access_token=_querystring$parse.access_token,expires_in=_querystring$parse.expires_in,error=_querystring$parse.error,error_description=_querystring$parse.error_description,error_reason=_querystring$parse.error_reason,state=_querystring$parse.state,expiresIn=parseInt(expires_in,10),expires=(new Date).getTime()/1e3+(expiresIn||31536e3);if(state===originalState)if(access_token){var _session={access_token:access_token,expires_in:expiresIn,expires:expires,client_id:clientId};_this2.session=_session,resolve(_session)}else error?(_this2.session=null,reject({reason:error_reason,error:error,description:error_description})):(_this2.session=null,reject({reason:"not_authorized",error:"access_denied",description:"Your app is not authorized."}));else _this2.session=null,reject({reason:"state_mismatch",error:"access_denied",description:"The state did not match."})};popup.on("loadstart",loadCallback),popup.on("loadstop",loadCallback),popup.on("error",errorCallback),popup.on("closed",closedCallback),popup.open(_url2.default.format({protocol:"https:",host:"www.facebook.com",pathname:"/dialog/oauth",query:{client_id:clientId,redirect_uri:redirectUri,response_type:"token",scope:options.scope,auth_type:options.force===!0?"rerequest":null,state:originalState}}))}),_context.abrupt("return",promise);case 10:case"end":return _context.stop()}},_callee,this)}));return login}()},{key:"logout",value:function(){function logout(){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(){return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:this.session=null;case 1:case"end":return _context2.stop()}},_callee2,this)}));return logout}()},{key:"identity",get:function(){return _enums.SocialIdentity.Facebook}}],[{key:"identity",get:function(){return _enums.SocialIdentity.Facebook}}]),Facebook}(_social.Social)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Social=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_client=__webpack_require__(161),_errors=__webpack_require__(14),_localStorage=__webpack_require__(228),_localStorage2=_interopRequireDefault(_localStorage),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),hello=void 0;"undefined"!=typeof window&&(hello=__webpack_require__(414));exports.Social=function(){function Social(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Social),this.client=options.client||_client.Client.sharedInstance()}return _createClass(Social,[{key:"isSupported",value:function(){return!!hello}},{key:"isOnline",value:function(session){var currentTime=(new Date).getTime()/1e3;return session&&session.access_token&&session.expires>currentTime}},{key:"login",value:function(){function login(_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(clientId){var session,helloSettings,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(options=(0,_assign2.default)({redirectUri:global.location.href,scope:null,force:null},options),this.isSupported()){_context.next=3;break}throw new _errors.KinveyError("Unable to login with "+this.identity+". It is not supported on this platform.");case 3:if(session=this.session,!session||!this.isOnline(session)){_context.next=6;break}return _context.abrupt("return",session);case 6:if(clientId){_context.next=8;break}throw new _errors.KinveyError("Unable to login with "+this.identity+".  No client id was provided.");case 8:return helloSettings={},helloSettings[this.identity]=clientId,hello.init(helloSettings),_context.next=13,hello(this.identity).login({redirect_uri:options.redirectUri,scope:options.scope,force:options.force});case 13:return session=hello(this.identity).getAuthResponse(),session.clientId=clientId,
this.session=session,_context.abrupt("return",session);case 17:case"end":return _context.stop()}},_callee,this)}));return login}()},{key:"logout",value:function(){function logout(){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(){var helloSettings;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.isSupported()){_context2.next=6;break}return helloSettings={},helloSettings[this.identity]=this.session.clientId,hello.init(helloSettings),_context2.next=6,hello(this.identity).logout();case 6:this.session=null;case 7:case"end":return _context2.stop()}},_callee2,this)}));return logout}()},{key:"identity",get:function(){throw new _errors.KinveyError("A subclass must override this property.")}},{key:"session",get:function(){return _localStorage2.default.get(""+this.client.appKey+this.identity)},set:function(session){session?_localStorage2.default.set(""+this.client.appKey+this.identity,session):_localStorage2.default.remove(""+this.client.appKey+this.identity)}}],[{key:"login",value:function(clientId,options){var social=new this(options);return social.login(clientId,options)}},{key:"logout",value:function(user,options){var social=new this;return social.logout(user,options)}},{key:"identity",get:function(){throw new _errors.KinveyError("A subclass must override this property.")}}]),Social}()}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(process,setImmediate){Object.create||(Object.create=function(){function F(){}return function(o){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return F.prototype=o,new F}}()),Object.keys||(Object.keys=function(o,k,r){r=[];for(k in o)r.hasOwnProperty.call(o,k)&&r.push(k);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(s){for(var j=0;j<this.length;j++)if(this[j]===s)return j;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(fun){if(void 0===this||null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisArg=arguments.length>=2?arguments[1]:void 0,i=0;i<len;i++)i in t&&fun.call(thisArg,t[i],i,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(fun,thisArg){var a=[];return this.forEach(function(val,i,t){fun.call(thisArg||void 0,val,i,t)&&a.push(val)}),a}),Array.prototype.map||(Array.prototype.map=function(fun,thisArg){var a=[];return this.forEach(function(val,i,t){a.push(fun.call(thisArg||void 0,val,i,t))}),a}),Array.isArray||(Array.isArray=function(o){return"[object Array]"===Object.prototype.toString.call(o)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(url){window.location=url}),Function.prototype.bind||(Function.prototype.bind=function(b){function C(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var a=[].slice,f=a.call(arguments,1),_this=this,D=function(){return _this.apply(this instanceof C?this:b||window,f.concat(a.call(arguments)))};return C.prototype=this.prototype,D.prototype=new C,D});var hello=function(name){return hello.use(name)};hello.utils={extend:function(r){return Array.prototype.slice.call(arguments,1).forEach(function(a){if(Array.isArray(r)&&Array.isArray(a))Array.prototype.push.apply(r,a);else if(r instanceof Object&&a instanceof Object&&r!==a)for(var x in a)r[x]=hello.utils.extend(r[x],a[x]);else Array.isArray(a)&&(a=a.slice(0)),r=a}),r}},hello.utils.extend(hello,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},scope:["basic"],scope_map:{basic:""},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(service){var self=Object.create(this);return self.settings=Object.create(this.settings),service&&(self.settings.default_service=service),self.utils.Event.call(self),self},init:function(services,options){var utils=this.utils;if(!services)return this.services;for(var x in services)services.hasOwnProperty(x)&&"object"!=typeof services[x]&&(services[x]={id:services[x]});return utils.extend(this.services,services),options&&(utils.extend(this.settings,options),"redirect_uri"in options&&(this.settings.redirect_uri=utils.url(options.redirect_uri).href)),this},login:function(){function emit(s,value){hello.emit(s,value)}function encodeFunction(s){return s}function filterEmpty(s){return!!s}var url,_this=this,utils=_this.utils,error=utils.error,promise=utils.Promise(),p=utils.args({network:"s",options:"o",callback:"f"},arguments),qs=utils.diffKey(p.options,_this.settings),opts=p.options=utils.merge(_this.settings,p.options||{});if(opts.popup=utils.merge(_this.settings.popup,p.options.popup||{}),p.network=p.network||_this.settings.default_service,promise.proxy.then(p.callback,p.callback),promise.proxy.then(emit.bind(this,"auth.login auth"),emit.bind(this,"auth.failed auth")),"string"!=typeof p.network||!(p.network in _this.services))return promise.reject(error("invalid_network","The provided network was not recognized"));var provider=_this.services[p.network],callbackId=utils.globalEvent(function(str){var obj;obj=str?JSON.parse(str):error("cancelled","The authentication was not completed"),obj.error?promise.reject(obj):(utils.store(obj.network,obj),promise.fulfill({network:obj.network,authResponse:obj}))}),redirectUri=utils.url(opts.redirect_uri).href,responseType=provider.oauth.response_type||opts.response_type;/\bcode\b/.test(responseType)&&!provider.oauth.grant&&(responseType=responseType.replace(/\bcode\b/,"token")),p.qs=utils.merge(qs,{client_id:encodeURIComponent(provider.id),response_type:encodeURIComponent(responseType),redirect_uri:encodeURIComponent(redirectUri),state:{client_id:provider.id,network:p.network,display:opts.display,callback:callbackId,state:opts.state,redirect_uri:redirectUri}});var session=utils.store(p.network),SCOPE_SPLIT=/[,\s]+/,scope=_this.settings.scope?[_this.settings.scope.toString()]:[],scopeMap=utils.merge(_this.settings.scope_map,provider.scope||{});if(opts.scope&&scope.push(opts.scope.toString()),session&&"scope"in session&&session.scope instanceof String&&scope.push(session.scope),scope=scope.join(",").split(SCOPE_SPLIT),scope=utils.unique(scope).filter(filterEmpty),p.qs.state.scope=scope.join(","),scope=scope.map(function(item){return item in scopeMap?scopeMap[item]:item}),scope=scope.join(",").split(SCOPE_SPLIT),scope=utils.unique(scope).filter(filterEmpty),p.qs.scope=scope.join(provider.scope_delim||","),opts.force===!1&&session&&"access_token"in session&&session.access_token&&"expires"in session&&session.expires>(new Date).getTime()/1e3){var diff=utils.diff((session.scope||"").split(SCOPE_SPLIT),(p.qs.state.scope||"").split(SCOPE_SPLIT));if(0===diff.length)return promise.fulfill({unchanged:!0,network:p.network,authResponse:session}),promise}if("page"===opts.display&&opts.page_uri&&(p.qs.state.page_uri=utils.url(opts.page_uri).href),"login"in provider&&"function"==typeof provider.login&&provider.login(p),(!/\btoken\b/.test(responseType)||parseInt(provider.oauth.version,10)<2||"none"===opts.display&&provider.oauth.grant&&session&&session.refresh_token)&&(p.qs.state.oauth=provider.oauth,p.qs.state.oauth_proxy=opts.oauth_proxy),p.qs.state=encodeURIComponent(JSON.stringify(p.qs.state)),1===parseInt(provider.oauth.version,10)?url=utils.qs(opts.oauth_proxy,p.qs,encodeFunction):"none"===opts.display&&provider.oauth.grant&&session&&session.refresh_token?(p.qs.refresh_token=session.refresh_token,url=utils.qs(opts.oauth_proxy,p.qs,encodeFunction)):url=utils.qs(provider.oauth.auth,p.qs,encodeFunction),emit("auth.init",p),"none"===opts.display)utils.iframe(url,redirectUri);else if("popup"===opts.display)var popup=utils.popup(url,redirectUri,opts.popup),timer=setInterval(function(){if((!popup||popup.closed)&&(clearInterval(timer),!promise.state)){var response=error("cancelled","Login has been cancelled");popup||(response=error("blocked","Popup was blocked")),response.network=p.network,promise.reject(response)}},100);else window.location=url;return promise.proxy},logout:function(){function emit(s,value){hello.emit(s,value)}var _this=this,utils=_this.utils,error=utils.error,promise=utils.Promise(),p=utils.args({name:"s",options:"o",callback:"f"},arguments);if(p.options=p.options||{},promise.proxy.then(p.callback,p.callback),promise.proxy.then(emit.bind(this,"auth.logout auth"),emit.bind(this,"error")),p.name=p.name||this.settings.default_service,p.authResponse=utils.store(p.name),!p.name||p.name in _this.services)if(p.name&&p.authResponse){var callback=function(opts){utils.store(p.name,null),promise.fulfill(hello.utils.merge({network:p.name},opts||{}))},_opts={};if(p.options.force){var logout=_this.services[p.name].logout;if(logout)if("function"==typeof logout&&(logout=logout(callback,p)),"string"==typeof logout)utils.iframe(logout),_opts.force=null,_opts.message="Logout success on providers site was indeterminate";else if(void 0===logout)return promise.proxy}callback(_opts)}else promise.reject(error("invalid_session","There was no session to remove"));else promise.reject(error("invalid_network","The network was unrecognized"));return promise.proxy},getAuthResponse:function(service){return service=service||this.settings.default_service,service&&service in this.services?this.utils.store(service)||null:null},events:{}}),hello.utils.extend(hello.utils,{error:function(code,message){return{error:{code:code,message:message}}},qs:function(url,params,formatFunction){if(params){formatFunction=formatFunction||encodeURIComponent;for(var x in params){var str="([\\?\\&])"+x+"=[^\\&]*",reg=new RegExp(str);url.match(reg)&&(url=url.replace(reg,"$1"+x+"="+formatFunction(params[x])),delete params[x])}}return this.isEmpty(params)?url:url+(url.indexOf("?")>-1?"&":"?")+this.param(params,formatFunction)},param:function(s,formatFunction){var b,m,a={};if("string"==typeof s){if(formatFunction=formatFunction||decodeURIComponent,m=s.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<m.length;i++)b=m[i].match(/([^=]+)=(.*)/),a[b[1]]=formatFunction(b[2]);return a}formatFunction=formatFunction||encodeURIComponent;var o=s;a=[];for(var x in o)o.hasOwnProperty(x)&&o.hasOwnProperty(x)&&a.push([x,"?"===o[x]?"?":formatFunction(o[x])].join("="));return a.join("&")},store:function(){function get(){var json={};try{json=JSON.parse(localStorage.getItem("hello"))||{}}catch(e){}return json}function set(json){localStorage.setItem("hello",JSON.stringify(json))}for(var localStorage,a=["localStorage","sessionStorage"],i=-1,prefix="test";a[++i];)try{localStorage=window[a[i]],localStorage.setItem(prefix+i,i),localStorage.removeItem(prefix+i);break}catch(e){localStorage=null}if(!localStorage){var cache=null;localStorage={getItem:function(prop){prop+="=";for(var m=document.cookie.split(";"),i=0;i<m.length;i++){var _m=m[i].replace(/(^\s+|\s+$)/,"");if(_m&&0===_m.indexOf(prop))return _m.substr(prop.length)}return cache},setItem:function(prop,value){cache=value,document.cookie=prop+"="+value}},cache=localStorage.getItem("hello")}return function(name,value,days){var json=get();if(name&&void 0===value)return json[name]||null;if(name&&null===value)try{delete json[name]}catch(e){json[name]=null}else{if(!name)return json;json[name]=value}return set(json),json||null}}(),append:function(node,attr,target){var n="string"==typeof node?document.createElement(node):node;if("object"==typeof attr)if("tagName"in attr)target=attr;else for(var x in attr)if(attr.hasOwnProperty(x))if("object"==typeof attr[x])for(var y in attr[x])attr[x].hasOwnProperty(y)&&(n[x][y]=attr[x][y]);else"html"===x?n.innerHTML=attr[x]:/^on/.test(x)?n[x]=attr[x]:n.setAttribute(x,attr[x]);return"body"===target?!function self(){document.body?document.body.appendChild(n):setTimeout(self,16)}():"object"==typeof target?target.appendChild(n):"string"==typeof target&&document.getElementsByTagName(target)[0].appendChild(n),n},iframe:function(src){this.append("iframe",{src:src,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var args=Array.prototype.slice.call(arguments);return args.unshift({}),this.extend.apply(null,args)},args:function(o,args){var p={},i=0,t=null,x=null;for(x in o)if(o.hasOwnProperty(x))break;if(1===args.length&&"object"==typeof args[0]&&"o!"!=o[x])for(x in args[0])if(o.hasOwnProperty(x)&&x in o)return args[0];for(x in o)if(o.hasOwnProperty(x))if(t=typeof args[i],"function"==typeof o[x]&&o[x].test(args[i])||"string"==typeof o[x]&&(o[x].indexOf("s")>-1&&"string"===t||o[x].indexOf("o")>-1&&"object"===t||o[x].indexOf("i")>-1&&"number"===t||o[x].indexOf("a")>-1&&"object"===t||o[x].indexOf("f")>-1&&"function"===t))p[x]=args[i++];else if("string"==typeof o[x]&&o[x].indexOf("!")>-1)return!1;return p},url:function(path){if(path){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(path,window.location);var a=document.createElement("a");return a.href=path,a.cloneNode(!1)}return window.location},diff:function(a,b){return b.filter(function(item){return a.indexOf(item)===-1})},diffKey:function(a,b){if(a||!b){var r={};for(var x in a)x in b||(r[x]=a[x]);return r}return a},unique:function(a){return Array.isArray(a)?a.filter(function(item,index){return a.indexOf(item)===index}):[]},isEmpty:function(obj){if(!obj)return!0;if(Array.isArray(obj))return!obj.length;if("object"==typeof obj)for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0},Promise:function(){var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,api=function(executor){return this instanceof api?(this.id="Thenable/1.0.6",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof executor&&executor.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new api(executor)};api.prototype={fulfill:function(value){return deliver(this,STATE_FULFILLED,"fulfillValue",value)},reject:function(value){return deliver(this,STATE_REJECTED,"rejectReason",value)},then:function(onFulfilled,onRejected){var curr=this,next=new api;return curr.onFulfilled.push(resolver(onFulfilled,next,"fulfill")),curr.onRejected.push(resolver(onRejected,next,"reject")),execute(curr),next.proxy}};var deliver=function(curr,state,name,value){return curr.state===STATE_PENDING&&(curr.state=state,curr[name]=value,execute(curr)),curr},execute=function(curr){curr.state===STATE_FULFILLED?execute_handlers(curr,"onFulfilled",curr.fulfillValue):curr.state===STATE_REJECTED&&execute_handlers(curr,"onRejected",curr.rejectReason)},execute_handlers=function(curr,name,value){if(0!==curr[name].length){var handlers=curr[name];curr[name]=[];var func=function(){for(var i=0;i<handlers.length;i++)handlers[i](value)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(func):"function"==typeof setImmediate?setImmediate(func):setTimeout(func,0)}},resolver=function(cb,next,method){return function(value){if("function"!=typeof cb)next[method].call(next,value);else{var result;try{result=cb(value)}catch(e){return void next.reject(e)}resolve(next,result)}}},resolve=function(promise,x){if(promise===x||promise.proxy===x)return void promise.reject(new TypeError("cannot resolve promise with itself"));var then;if("object"==typeof x&&null!==x||"function"==typeof x)try{then=x.then}catch(e){return void promise.reject(e)}if("function"!=typeof then)promise.fulfill(x);else{var resolved=!1;try{then.call(x,function(y){resolved||(resolved=!0,y===x?promise.reject(new TypeError("circular thenable chain")):resolve(promise,y))},function(r){resolved||(resolved=!0,promise.reject(r))})}catch(e){resolved||promise.reject(e)}}};return api}(),Event:function(){var separator=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(evt,callback){if(callback&&"function"==typeof callback)for(var a=evt.split(separator),i=0;i<a.length;i++)this.events[a[i]]=[callback].concat(this.events[a[i]]||[]);return this},this.off=function(evt,callback){return this.findEvents(evt,function(name,index){callback&&this.events[name][index]!==callback||(this.events[name][index]=null)}),this},this.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);args.push(evt);for(var handler=function(name,index){args[args.length-1]="*"===name?evt:name,this.events[name][index].apply(this,args)},_this=this;_this&&_this.findEvents;)_this.findEvents(evt+",*",handler),_this=_this.parent;return this},this.emitAfter=function(){var _this=this,args=arguments;return setTimeout(function(){_this.emit.apply(_this,args)},0),this},this.findEvents=function(evt,callback){var a=evt.split(separator);for(var name in this.events)if(this.events.hasOwnProperty(name)&&a.indexOf(name)>-1)for(var i=0;i<this.events[name].length;i++)this.events[name][i]&&callback.call(this,name,i)},this},globalEvent:function(callback,guid){return guid=guid||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[guid]=function(){try{callback.apply(this,arguments)&&delete window[guid]}catch(e){console.error(e)}},guid},popup:function(url,redirectUri,options){var documentElement=document.documentElement;if(options.height){var dualScreenTop=void 0!==window.screenTop?window.screenTop:screen.top,height=screen.height||window.innerHeight||documentElement.clientHeight;options.top=parseInt((height-options.height)/2,10)+dualScreenTop}if(options.width){var dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:screen.left,width=screen.width||window.innerWidth||documentElement.clientWidth;options.left=parseInt((width-options.width)/2,10)+dualScreenLeft}var optionsArray=[];Object.keys(options).forEach(function(name){var value=options[name];optionsArray.push(name+(null!==value?"="+value:""))}),navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1&&(url=redirectUri+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(url)));var popup=window.open(url,"_blank",optionsArray.join(","));return popup&&popup.focus&&popup.focus(),popup},responseHandler:function(window,parent){function authCallback(obj,window,parent){var cb=obj.callback,network=obj.network;if(_this.store(network,obj),!("display"in obj&&"page"===obj.display)){if(parent&&cb&&cb in parent){try{delete obj.callback}catch(e){}_this.store(network,obj);var str=JSON.stringify(obj);try{callback(parent,cb)(str)}catch(e){}}closeWindow()}}function callback(parent,callbackID){return 0!==callbackID.indexOf("_hellojs_")?function(){throw"Could not execute callback "+callbackID}:parent[callbackID]}function closeWindow(){if(window.frameElement)parent.document.body.removeChild(window.frameElement);else{try{window.close()}catch(e){}window.addEventListener&&window.addEventListener("load",function(){window.close()})}}var p,_this=this,location=window.location;if(p=_this.param(location.search),p&&p.state&&(p.code||p.oauth_token)){var state=JSON.parse(p.state);p.redirect_uri=state.redirect_uri||location.href.replace(/[\?\#].*$/,"");var path=state.oauth_proxy+"?"+_this.param(p);return void location.assign(path)}if(p=_this.merge(_this.param(location.search||""),_this.param(location.hash||"")),p&&"state"in p){try{var a=JSON.parse(p.state);_this.extend(p,a)}catch(e){console.error("Could not decode state parameter")}if("access_token"in p&&p.access_token&&p.network)p.expires_in&&0!==parseInt(p.expires_in,10)||(p.expires_in=0),p.expires_in=parseInt(p.expires_in,10),p.expires=(new Date).getTime()/1e3+(p.expires_in||31536e3),authCallback(p,window,parent);else if("error"in p&&p.error&&p.network)p.error={code:p.error,message:p.error_message||p.error_description},authCallback(p,window,parent);else if(p.callback&&p.callback in parent){var res=!!("result"in p&&p.result)&&JSON.parse(p.result);callback(parent,p.callback)(res),closeWindow()}p.page_uri&&location.assign(p.page_uri)}else if("oauth_redirect"in p)return void location.assign(decodeURIComponent(p.oauth_redirect))}}),hello.utils.Event.call(hello),function(hello){var oldSessions={},expired={};hello.on("auth.login, auth.logout",function(auth){auth&&"object"==typeof auth&&auth.network&&(oldSessions[auth.network]=hello.utils.store(auth.network)||{})}),function self(){var CURRENT_TIME=(new Date).getTime()/1e3,emit=function(eventName){hello.emit("auth."+eventName,{network:name,authResponse:session})};for(var name in hello.services)if(hello.services.hasOwnProperty(name)){if(!hello.services[name].id)continue;var session=hello.utils.store(name)||{},provider=hello.services[name],oldSess=oldSessions[name]||{};if(session&&"callback"in session){var cb=session.callback;try{delete session.callback}catch(e){}hello.utils.store(name,session);try{window[cb](session)}catch(e){}}if(session&&"expires"in session&&session.expires<CURRENT_TIME){var refresh=provider.refresh||session.refresh_token;!refresh||name in expired&&!(expired[name]<CURRENT_TIME)?refresh||name in expired||(emit("expired"),expired[name]=!0):(hello.emit("notice",name+" has expired trying to resignin"),hello.login(name,{display:"none",force:!1}),expired[name]=CURRENT_TIME+600);continue}if(oldSess.access_token===session.access_token&&oldSess.expires===session.expires)continue;!session.access_token&&oldSess.access_token?emit("logout"):session.access_token&&!oldSess.access_token?emit("login"):session.expires!==oldSess.expires&&emit("update"),oldSessions[name]=session,name in expired&&delete expired[name]}setTimeout(self,1e3)}()}(hello),hello.api=function(){function getPath(url){url=url.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(m,key,defaults){var val=defaults?defaults.replace(/^\|/,""):"";return key in p.query?(val=p.query[key],delete p.query[key]):p.data&&key in p.data?(val=p.data[key],delete p.data[key]):defaults||promise.reject(error("missing_attribute","The attribute "+key+" is missing from the request")),val}),url.match(/^https?:\/\//)||(url=o.base+url),p.url=url,utils.request(p,function(r,headers){if(!p.formatResponse)return void(("object"==typeof headers?headers.statusCode>=400:"object"==typeof r&&"error"in r)?promise.reject(r):promise.fulfill(r));if(r===!0?r={success:!0}:r||(r={}),"delete"===p.method&&(r=!r||utils.isEmpty(r)?{success:!0}:r),o.wrap&&(p.path in o.wrap||"default"in o.wrap)){var wrap=p.path in o.wrap?p.path:"default",b=((new Date).getTime(),o.wrap[wrap](r,headers,p));b&&(r=b)}r&&"paging"in r&&r.paging.next&&("?"===r.paging.next[0]?r.paging.next=p.path+r.paging.next:r.paging.next+="#"+p.path),!r||"error"in r?promise.reject(r):promise.fulfill(r)})}var _this=this,utils=_this.utils,error=utils.error,promise=utils.Promise(),p=utils.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);p.method=(p.method||"get").toLowerCase(),p.headers=p.headers||{},p.query=p.query||{},"get"!==p.method&&"delete"!==p.method||(utils.extend(p.query,p.data),p.data={});var data=p.data=p.data||{};if(promise.then(p.callback,p.callback),!p.path)return promise.reject(error("invalid_path","Missing the path parameter from the request"));p.path=p.path.replace(/^\/+/,"");var a=(p.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(a in _this.services){p.network=a;var reg=new RegExp("^"+a+":?/?");p.path=p.path.replace(reg,"")}p.network=_this.settings.default_service=p.network||_this.settings.default_service;var o=_this.services[p.network];if(!o)return promise.reject(error("invalid_network","Could not match the service requested: "+p.network));if(p.method in o&&p.path in o[p.method]&&o[p.method][p.path]===!1)return promise.reject(error("invalid_path","The provided path is not available on the selected network"));p.oauth_proxy||(p.oauth_proxy=_this.settings.oauth_proxy),"proxy"in p||(p.proxy=p.oauth_proxy&&o.oauth&&1===parseInt(o.oauth.version,10)),"timeout"in p||(p.timeout=_this.settings.timeout),"formatResponse"in p||(p.formatResponse=!0),p.authResponse=_this.getAuthResponse(p.network),p.authResponse&&p.authResponse.access_token&&(p.query.access_token=p.authResponse.access_token);var m,url=p.path;p.options=utils.clone(p.query),p.data=utils.clone(data);var actions=o[{delete:"del"}[p.method]||p.method]||{};if("get"===p.method){var query=url.split(/[\?#]/)[1];query&&(utils.extend(p.query,utils.param(query)),url=url.replace(/\?.*?(#|$)/,"$1"))}return(m=url.match(/#(.+)/,""))?(url=url.split("#")[0],p.path=m[1]):url in actions?(p.path=url,url=actions[url]):"default"in actions&&(url=actions.default),p.redirect_uri=_this.settings.redirect_uri,p.xhr=o.xhr,p.jsonp=o.jsonp,p.form=o.form,"function"==typeof url?url(p,getPath):getPath(url),promise.proxy},hello.utils.extend(hello.utils,{request:function(p,callback){function formatUrl(p,callback){var sign;p.authResponse&&p.authResponse.oauth&&1===parseInt(p.authResponse.oauth.version,10)&&(sign=p.query.access_token,delete p.query.access_token,p.proxy=!0),!p.data||"get"!==p.method&&"delete"!==p.method||(_this.extend(p.query,p.data),p.data=null);var path=_this.qs(p.url,p.query);p.proxy&&(path=_this.qs(p.oauth_proxy,{path:path,access_token:sign||"",then:p.proxy_response_type||("get"===p.method.toLowerCase()?"redirect":"proxy"),method:p.method.toLowerCase(),suppress_response_codes:!0})),callback(path)}var _this=this,error=_this.error;_this.isEmpty(p.data)||"FileList"in window||!_this.hasBinary(p.data)||(p.xhr=!1,p.jsonp=!1);var cors=this.request_cors(function(){return void 0===p.xhr||p.xhr&&("function"!=typeof p.xhr||p.xhr(p,p.query))});if(cors)return void formatUrl(p,function(url){var x=_this.xhr(p.method,url,p.headers,p.data,callback);x.onprogress=p.onprogress||null,x.upload&&p.onuploadprogress&&(x.upload.onprogress=p.onuploadprogress)});var _query=p.query;if(p.query=_this.clone(p.query),p.callbackID=_this.globalEvent(),p.jsonp!==!1){if(p.query.callback=p.callbackID,"function"==typeof p.jsonp&&p.jsonp(p,p.query),"get"===p.method)return void formatUrl(p,function(url){_this.jsonp(url,callback,p.callbackID,p.timeout)});p.query=_query}if(p.form!==!1){p.query.redirect_uri=p.redirect_uri,p.query.state=JSON.stringify({callback:p.callbackID});var opts;if("function"==typeof p.form&&(opts=p.form(p,p.query)),"post"===p.method&&opts!==!1)return void formatUrl(p,function(url){_this.post(url,p.data,opts,callback,p.callbackID,p.timeout)})}callback(error("invalid_request","There was no mechanism for handling this request"))},request_cors:function(callback){return"withCredentials"in new XMLHttpRequest&&callback()},domInstance:function(type,data){var test="HTML"+(type||"").replace(/^[a-z]/,function(m){return m.toUpperCase()})+"Element";return!!data&&(window[test]?data instanceof window[test]:window.Element?data instanceof window.Element&&(!type||data.tagName&&data.tagName.toLowerCase()===type):!(data instanceof Object||data instanceof Array||data instanceof String||data instanceof Number)&&data.tagName&&data.tagName.toLowerCase()===type)},clone:function(obj){if(null===obj||"object"!=typeof obj||obj instanceof Date||"nodeName"in obj||this.isBinary(obj)||"function"==typeof FormData&&obj instanceof FormData)return obj;if(Array.isArray(obj))return obj.map(this.clone.bind(this));var clone={};for(var x in obj)clone[x]=this.clone(obj[x]);return clone},xhr:function(method,url,headers,data,callback){function headersToJSON(s){for(var m,r={},reg=/([a-z\-]+):\s?(.*);?/gi;m=reg.exec(s);)r[m[1]]=m[2];return r}var r=new XMLHttpRequest,error=this.error,binary=!1;"blob"===method&&(binary=method,method="GET"),method=method.toUpperCase(),r.onload=function(e){var json=r.response;try{json=JSON.parse(r.responseText)}catch(_e){401===r.status&&(json=error("access_denied",r.statusText))}var headers=headersToJSON(r.getAllResponseHeaders());headers.statusCode=r.status,callback(json||("GET"===method?error("empty_response","Could not get resource"):{}),headers)},r.onerror=function(e){var json=r.responseText;try{json=JSON.parse(r.responseText)}catch(_e){}callback(json||error("access_denied","Could not get resource"))};var x;if("GET"===method||"DELETE"===method)data=null;else if(data&&"string"!=typeof data&&!(data instanceof FormData)&&!(data instanceof File)&&!(data instanceof Blob)){var f=new FormData;for(x in data)data.hasOwnProperty(x)&&(data[x]instanceof HTMLInputElement?"files"in data[x]&&data[x].files.length>0&&f.append(x,data[x].files[0]):data[x]instanceof Blob?f.append(x,data[x],data.name):f.append(x,data[x]));data=f}if(r.open(method,url,!0),binary&&("responseType"in r?r.responseType=binary:r.overrideMimeType("text/plain; charset=x-user-defined")),headers)for(x in headers)r.setRequestHeader(x,headers[x]);return r.send(data),r},jsonp:function(url,callback,callbackID,timeout){var operaFix,_this=this,error=_this.error,bool=0,head=document.getElementsByTagName("head")[0],result=error("server_error","server_error"),cb=function(){bool++||window.setTimeout(function(){callback(result),head.removeChild(script)},0)};callbackID=_this.globalEvent(function(json){return result=json,!0},callbackID),url=url.replace(new RegExp("=\\?(&|$)"),"="+callbackID+"$1");var script=_this.append("script",{id:callbackID,name:callbackID,src:url,async:!0,onload:cb,onerror:cb,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&cb()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(operaFix=_this.append("script",{text:"document.getElementById('"+callbackID+"').onerror();"}),script.async=!1),timeout&&window.setTimeout(function(){result=error("timeout","timeout"),cb()},timeout),head.appendChild(script),operaFix&&head.appendChild(operaFix)},post:function(url,data,options,callback,callbackID,timeout){var newform,_this=this,error=_this.error,doc=document,form=null,reenableAfterSubmit=[],i=0,x=null,bool=0,cb=function(r){bool++||callback(r)};_this.globalEvent(cb,callbackID);var win;try{win=doc.createElement('<iframe name="'+callbackID+'">')}catch(e){win=doc.createElement("iframe")}if(win.name=callbackID,win.id=callbackID,win.style.display="none",options&&options.callbackonload&&(win.onload=function(){cb({response:"posted",message:"Content was posted"})}),timeout&&setTimeout(function(){cb(error("timeout","The post operation timed out"))},timeout),doc.body.appendChild(win),_this.domInstance("form",data)){for(form=data.form,i=0;i<form.elements.length;i++)form.elements[i]!==data&&form.elements[i].setAttribute("disabled",!0);data=form}if(_this.domInstance("form",data))for(form=data,i=0;i<form.elements.length;i++)form.elements[i].disabled||"file"!==form.elements[i].type||(form.encoding=form.enctype="multipart/form-data",form.elements[i].setAttribute("name","file"));else{for(x in data)data.hasOwnProperty(x)&&_this.domInstance("input",data[x])&&"file"===data[x].type&&(form=data[x].form,form.encoding=form.enctype="multipart/form-data");form||(form=doc.createElement("form"),doc.body.appendChild(form),newform=form);var input;for(x in data)if(data.hasOwnProperty(x)){var el=_this.domInstance("input",data[x])||_this.domInstance("textArea",data[x])||_this.domInstance("select",data[x]);if(el&&data[x].form===form)el&&data[x].name!==x&&(data[x].setAttribute("name",x),data[x].name=x);else{var inputs=form.elements[x];if(input)for(inputs instanceof NodeList||(inputs=[inputs]),i=0;i<inputs.length;i++)inputs[i].parentNode.removeChild(inputs[i]);input=doc.createElement("input"),input.setAttribute("type","hidden"),input.setAttribute("name",x),el?input.value=data[x].value:_this.domInstance(null,data[x])?input.value=data[x].innerHTML||data[x].innerText:input.value=data[x],form.appendChild(input)}}for(i=0;i<form.elements.length;i++)input=form.elements[i],input.name in data||input.getAttribute("disabled")===!0||(input.setAttribute("disabled",!0),reenableAfterSubmit.push(input))}form.setAttribute("method","POST"),form.setAttribute("target",callbackID),
form.target=callbackID,form.setAttribute("action",url),setTimeout(function(){form.submit(),setTimeout(function(){try{newform&&newform.parentNode.removeChild(newform)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(ee){}}for(var i=0;i<reenableAfterSubmit.length;i++)reenableAfterSubmit[i]&&(reenableAfterSubmit[i].setAttribute("disabled",!1),reenableAfterSubmit[i].disabled=!1)},0)},100)},hasBinary:function(data){for(var x in data)if(data.hasOwnProperty(x)&&this.isBinary(data[x]))return!0;return!1},isBinary:function(data){return data instanceof Object&&(this.domInstance("input",data)&&"file"===data.type||"FileList"in window&&data instanceof window.FileList||"File"in window&&data instanceof window.File||"Blob"in window&&data instanceof window.Blob)},toBlob:function(dataURI){var reg=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,m=dataURI.match(reg);if(!m)return dataURI;for(var binary=atob(dataURI.replace(reg,"")),array=[],i=0;i<binary.length;i++)array.push(binary.charCodeAt(i));return new Blob([new Uint8Array(array)],{type:m[1]})}}),function(hello){var api=hello.api,utils=hello.utils;utils.extend(utils,{dataToJSON:function(p){var _this=this,w=window,data=p.data;if(_this.domInstance("form",data)?data=_this.nodeListToJSON(data.elements):"NodeList"in w&&data instanceof NodeList?data=_this.nodeListToJSON(data):_this.domInstance("input",data)&&(data=_this.nodeListToJSON([data])),("File"in w&&data instanceof w.File||"Blob"in w&&data instanceof w.Blob||"FileList"in w&&data instanceof w.FileList)&&(data={file:data}),!("FormData"in w&&data instanceof w.FormData))for(var x in data)if(data.hasOwnProperty(x))if("FileList"in w&&data[x]instanceof w.FileList)1===data[x].length&&(data[x]=data[x][0]);else{if(_this.domInstance("input",data[x])&&"file"===data[x].type)continue;_this.domInstance("input",data[x])||_this.domInstance("select",data[x])||_this.domInstance("textArea",data[x])?data[x]=data[x].value:_this.domInstance(null,data[x])&&(data[x]=data[x].innerHTML||data[x].innerText)}return p.data=data,data},nodeListToJSON:function(nodelist){for(var json={},i=0;i<nodelist.length;i++){var input=nodelist[i];!input.disabled&&input.name&&("file"===input.type?json[input.name]=input:json[input.name]=input.value||input.innerHTML)}return json}}),hello.api=function(){var p=utils.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return p.data&&utils.dataToJSON(p),api.call(this,p)}}(hello),hello.utils.responseHandler(window,window.opener||window.parent),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function _open(url,interactive){var ref={closed:!1};return chrome.identity.launchWebAuthFlow({url:url,interactive:interactive},function(responseUrl){if(void 0===responseUrl)return void(ref.closed=!0);var a=hello.utils.url(responseUrl),_popup={location:{assign:function(url){_open(url,!1)},search:a.search,hash:a.hash,href:a.href},close:function(){}};hello.utils.responseHandler(_popup,window)}),ref}hello.utils.popup=function(url){return _open(url,!0)},hello.utils.iframe=function(url){_open(url,!1)},hello.utils.request_cors=function(callback){return callback(),!0};var _cache={};chrome.storage.local.get("hello",function(r){_cache=r.hello||{}}),hello.utils.store=function(name,value){return 0===arguments.length?_cache:1===arguments.length?_cache[name]||null:value?(_cache[name]=value,chrome.storage.local.set({hello:_cache}),value):null===value?(delete _cache[name],chrome.storage.local.set({hello:_cache}),null):void 0}}(),function(){if(/^file:\/{3}[^\/]/.test(window.location.href)&&window.cordova){hello.utils.iframe=function(url,redirectUri){hello.utils.popup(url,redirectUri,{hidden:"yes"})};var utilPopup=hello.utils.popup;hello.utils.popup=function(url,redirectUri,options){var popup=utilPopup.call(this,url,redirectUri,options);try{if(popup&&popup.addEventListener){var a=hello.utils.url(redirectUri),redirectUriOrigin=a.origin||a.protocol+"//"+a.hostname;popup.addEventListener("loadstart",function(e){var url=e.url;if(0===url.indexOf(redirectUriOrigin)){var a=hello.utils.url(url),_popup={location:{assign:function(location){popup.executeScript({code:'window.location.href = "'+location+';"'})},search:a.search,hash:a.hash,href:a.href},close:function(){if(popup.close){popup.close();try{popup.closed=!0}catch(_e){}}}};hello.utils.responseHandler(_popup,window)}})}}catch(e){}return popup}}}(),function(hello){function formatError(o){o&&"error"in o&&(o.error={code:"server_error",message:o.error.message||o.error})}function formatFile(o,headers,req){if(!("object"!=typeof o||"undefined"!=typeof Blob&&o instanceof Blob||"undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer||"error"in o)){var path=("app_folder"!==o.root?o.root:"")+o.path.replace(/\&/g,"%26");path=path.replace(/^\//,""),o.thumb_exists&&(o.thumbnail=req.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+path+"?format=jpeg&size=m")+"&access_token="+req.options.access_token),o.type=o.is_dir?"folder":o.mime_type,o.name=o.path.replace(/.*\//g,""),o.is_dir?o.files=path.replace(/^\//,""):(o.downloadLink=hello.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+path)+"&access_token="+req.options.access_token,o.file="https://api-content.dropbox.com/1/files/auto/"+path),o.id||(o.id=o.path.replace(/^\//,""))}}function req(str){return function(p,cb){delete p.query.limit,cb(str)}}var OAuth1Settings={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},OAuth2Settings={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};hello.init({dropbox:{name:"Dropbox",oauth:OAuth2Settings,login:function(p){p.qs.scope="";var redirect=decodeURIComponent(p.qs.redirect_uri);0===redirect.indexOf("http:")&&0!==redirect.indexOf("http://localhost/")?hello.services.dropbox.oauth=OAuth1Settings:hello.services.dropbox.oauth=OAuth2Settings,p.options.popup.width=1e3,p.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":req("metadata/auto/@{parent|}"),"me/folder":req("metadata/auto/@{id}"),"me/folders":req("metadata/auto/"),default:function(p,callback){p.path.match("https://api-content.dropbox.com/1/files/")&&(p.method="blob"),callback(p.path)}},post:{"me/files":function(p,callback){var path=p.data.parent,fileName=p.data.name;p.data={file:p.data.file},"string"==typeof p.data.file&&(p.data.file=hello.utils.toBlob(p.data.file)),callback("https://api-content.dropbox.com/1/files_put/auto/"+path+"/"+fileName)},"me/folders":function(p,callback){var name=p.data.name;p.data={},callback("fileops/create_folder?root=@{root|sandbox}&"+hello.utils.param({path:name}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(o){if(formatError(o),!o.uid)return o;o.name=o.display_name;var m=o.name.split(" ");return o.first_name=m.shift(),o.last_name=m.join(" "),o.id=o.uid,delete o.uid,delete o.display_name,o},default:function(o,headers,req){return formatError(o),o.is_dir&&o.contents&&(o.data=o.contents,delete o.contents,o.data.forEach(function(item){item.root=o.root,formatFile(item,headers,req)})),formatFile(o,headers,req),o.is_deleted&&(o.success=!0),o}},xhr:function(p){if(p.data&&p.data.file){var file=p.data.file;file&&(file.files?p.data=file.files[0]:p.data=file)}return"delete"===p.method&&(p.method="post"),!0},form:function(p,qs){delete qs.state,delete qs.redirect_uri}}})}(hello),function(hello){function formatUser(o){return o.id&&(o.thumbnail=o.picture="https://graph.facebook.com/"+o.id+"/picture"),o}function formatFriends(o){return"data"in o&&o.data.forEach(formatUser),o}function format(o,headers,req){if("boolean"==typeof o&&(o={success:o}),o&&"data"in o){var token=req.query.access_token;if(!(o.data instanceof Array)){var data=o.data;delete o.data,o.data=[data]}o.data.forEach(function(d){d.picture&&(d.thumbnail=d.picture),d.pictures=(d.images||[]).sort(function(a,b){return a.width-b.width}),d.cover_photo&&d.cover_photo.id&&(d.thumbnail=base+d.cover_photo.id+"/picture?access_token="+token),"album"===d.type&&(d.files=d.photos=base+d.id+"/photos"),d.can_upload&&(d.upload_location=base+d.id+"/photos")})}return o}hello.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos",videos:"user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:""},refresh:!1,login:function(p){p.options.force&&(p.qs.auth_type="reauthenticate"),p.qs.display=p.options.display||"popup"},logout:function(callback,options){var callbackID=hello.utils.globalEvent(callback),redirect=encodeURIComponent(hello.settings.redirect_uri+"?"+hello.utils.param({callback:callbackID,result:JSON.stringify({force:!0}),state:"{}"})),token=(options.authResponse||{}).access_token;if(hello.utils.iframe("https://www.facebook.com/logout.php?next="+redirect+"&access_token="+token),!token)return!1},base:"https://graph.facebook.com/v2.7/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:formatUser,"me/friends":formatFriends,"me/following":formatFriends,"me/followers":formatFriends,"me/albums":format,"me/photos":format,"me/files":format,default:format},xhr:function(p,qs){return"get"!==p.method&&"post"!==p.method||(qs.suppress_response_codes=!0),"post"===p.method&&p.data&&"string"==typeof p.data.file&&(p.data.file=hello.utils.toBlob(p.data.file)),!0},jsonp:function(p,qs){var m=p.method;"get"===m||hello.utils.hasBinary(p.data)?"delete"===p.method&&(qs.method="delete",p.method="post"):(p.data.method=m,p.method="get")},form:function(p){return{callbackonload:!0}}}});var base="https://graph.facebook.com/"}(hello),function(hello){function getApiUrl(method,extraParams,skipNetwork){var url=(skipNetwork?"":"flickr:")+"?method="+method+"&api_key="+hello.services.flickr.id+"&format=json";for(var param in extraParams)extraParams.hasOwnProperty(param)&&(url+="&"+param+"="+extraParams[param]);return url}function withUser(cb){var auth=hello.getAuthResponse("flickr");cb(auth&&auth.user_nsid?auth.user_nsid:null)}function sign(url,params){return params||(params={}),function(p,callback){withUser(function(userId){params.user_id=userId,callback(getApiUrl(url,params,!0))})}}function getBuddyIcon(profile,size){var url="https://www.flickr.com/images/buddyicon.gif";return profile.nsid&&profile.iconserver&&profile.iconfarm&&(url="https://farm"+profile.iconfarm+".staticflickr.com/"+profile.iconserver+"/buddyicons/"+profile.nsid+(size?"_"+size:"")+".jpg"),url}function createPhotoUrl(id,farm,server,secret,size){return size=size?"_"+size:"","https://farm"+farm+".staticflickr.com/"+server+"/"+id+"_"+secret+size+".jpg"}function formatError(o){o&&o.stat&&"ok"!=o.stat.toLowerCase()&&(o.error={code:"invalid_request",message:o.message})}function formatPhotos(o){if(o.photoset||o.photos){var set="photoset"in o?"photoset":"photos";o=checkResponse(o,set),paging(o),o.data=o.photo,delete o.photo;for(var i=0;i<o.data.length;i++){var photo=o.data[i];photo.name=photo.title,photo.picture=createPhotoUrl(photo.id,photo.farm,photo.server,photo.secret,""),photo.pictures=createPictures(photo.id,photo.farm,photo.server,photo.secret),photo.source=createPhotoUrl(photo.id,photo.farm,photo.server,photo.secret,"b"),photo.thumbnail=createPhotoUrl(photo.id,photo.farm,photo.server,photo.secret,"m")}}return o}function createPictures(id,farm,server,secret){var NO_LIMIT=2048,sizes=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:NO_LIMIT}];return sizes.map(function(size){return{source:createPhotoUrl(id,farm,server,secret,size.id),width:size.max,height:size.max}})}function checkResponse(o,key){return key in o?o=o[key]:"error"in o||(o.error={code:"invalid_request",message:o.message||"Failed to get data from Flickr"}),o}function formatFriends(o){if(formatError(o),o.contacts){o=checkResponse(o,"contacts"),paging(o),o.data=o.contact,delete o.contact;for(var i=0;i<o.data.length;i++){var item=o.data[i];item.id=item.nsid,item.name=item.realname||item.username,item.thumbnail=getBuddyIcon(item,"m")}}return o}function paging(res){res.page&&res.pages&&res.page!==res.pages&&(res.paging={next:"?page="+ ++res.page})}hello.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:sign("flickr.people.getInfo"),"me/friends":sign("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":sign("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":sign("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":sign("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":sign("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":sign("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(o){if(formatError(o),o=checkResponse(o,"person"),o.id){if(o.realname){o.name=o.realname._content;var m=o.name.split(" ");o.first_name=m.shift(),o.last_name=m.join(" ")}o.thumbnail=getBuddyIcon(o,"l"),o.picture=getBuddyIcon(o,"l")}return o},"me/friends":formatFriends,"me/followers":formatFriends,"me/following":formatFriends,"me/albums":function(o){return formatError(o),o=checkResponse(o,"photosets"),paging(o),o.photoset&&(o.data=o.photoset,o.data.forEach(function(item){item.name=item.title._content,item.photos="https://api.flickr.com/services/rest"+getApiUrl("flickr.photosets.getPhotos",{photoset_id:item.id},!0)}),delete o.photoset),o},"me/photos":function(o){return formatError(o),formatPhotos(o)},default:function(o){return formatError(o),formatPhotos(o)}},xhr:!1,jsonp:function(p,qs){"get"==p.method&&(delete qs.callback,qs.jsoncallback=p.callbackID)}}})}(hello),function(hello){function formatError(o){!o.meta||400!==o.meta.code&&401!==o.meta.code||(o.error={code:"access_denied",message:o.meta.errorDetail})}function formatUser(o){o&&o.id&&(o.thumbnail=o.photo.prefix+"100x100"+o.photo.suffix,o.name=o.firstName+" "+o.lastName,o.first_name=o.firstName,o.last_name=o.lastName,o.contact&&o.contact.email&&(o.email=o.contact.email))}function formatRequest(p,qs){var token=qs.access_token;return delete qs.access_token,qs.oauth_token=token,qs.v=20121125,!0}hello.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(o){return formatError(o),o&&o.response&&(o=o.response.user,formatUser(o)),o},default:function(o){return formatError(o),o&&"response"in o&&"friends"in o.response&&"items"in o.response.friends&&(o.data=o.response.friends.items,o.data.forEach(formatUser),delete o.response),o}},xhr:formatRequest,jsonp:formatRequest}})}(hello),function(hello){function formatError(o,headers){var code=headers?headers.statusCode:o&&"meta"in o&&"status"in o.meta&&o.meta.status;401!==code&&403!==code||(o.error={code:"access_denied",message:o.message||(o.data?o.data.message:"Could not get response")},delete o.message)}function formatUser(o){o.id&&(o.thumbnail=o.picture=o.avatar_url,o.name=o.login)}function paging(res,headers,req){if(res.data&&res.data.length&&headers&&headers.Link){var next=headers.Link.match(/<(.*?)>;\s*rel=\"next\"/);next&&(res.paging={next:next[1]})}}hello.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(o,headers){return formatError(o,headers),formatUser(o),o},default:function(o,headers,req){return formatError(o,headers),Array.isArray(o)&&(o={data:o}),o.data&&(paging(o,headers,req),o.data.forEach(formatUser)),o}},xhr:function(p){return"get"!==p.method&&p.data&&(p.headers=p.headers||{},p.headers["Content-Type"]="application/json","object"==typeof p.data&&(p.data=JSON.stringify(p.data))),!0}}})}(hello),function(hello){function toInt(s){return parseInt(s,10)}function formatFeed(o){return paging(o),o.data=o.items,delete o.items,o}function formatItem(o){if(!o.error)return o.name||(o.name=o.title||o.message),o.picture||(o.picture=o.thumbnailLink),o.thumbnail||(o.thumbnail=o.thumbnailLink),"application/vnd.google-apps.folder"===o.mimeType&&(o.type="folder",o.files="https://www.googleapis.com/drive/v2/files?q=%22"+o.id+"%22+in+parents"),o}function formatImage(image){return{source:image.url,width:image.width,height:image.height}}function formatPhotos(o){o.data=o.feed.entry.map(formatEntry),delete o.feed}function gEntry(o){if(paging(o),"feed"in o&&"entry"in o.feed)o.data=o.feed.entry.map(formatEntry),delete o.feed;else{if("entry"in o)return formatEntry(o.entry);"items"in o?(o.data=o.items.map(formatItem),delete o.items):formatItem(o)}return o}function formatPerson(o){o.name=o.displayName||o.name,o.picture=o.picture||(o.image?o.image.url:null),o.thumbnail=o.picture}function formatFriends(o,headers,req){paging(o);if("feed"in o&&"entry"in o.feed){for(var token=req.query.access_token,i=0;i<o.feed.entry.length;i++){var a=o.feed.entry[i];if(a.id=a.id.$t,a.name=a.title.$t,delete a.title,a.gd$email&&(a.email=a.gd$email&&a.gd$email.length>0?a.gd$email[0].address:null,a.emails=a.gd$email,delete a.gd$email),a.updated&&(a.updated=a.updated.$t),a.link){var pic=a.link.length>0?a.link[0].href:null;pic&&a.link[0].gd$etag&&(pic+=(pic.indexOf("?")>-1?"&":"?")+"access_token="+token,a.picture=pic,a.thumbnail=pic),delete a.link}a.category&&delete a.category}o.data=o.feed.entry,delete o.feed}return o}function formatEntry(a){var _a,group=a.media$group,photo=group.media$content.length?group.media$content[0]:{},mediaContent=group.media$content||[],mediaThumbnail=group.media$thumbnail||[],pictures=mediaContent.concat(mediaThumbnail).map(formatImage).sort(function(a,b){return a.width-b.width}),i=0,p={id:a.id.$t,name:a.title.$t,description:a.summary.$t,updated_time:a.updated.$t,created_time:a.published.$t,picture:photo?photo.url:null,pictures:pictures,images:[],thumbnail:photo?photo.url:null,width:photo.width,height:photo.height};if("link"in a)for(i=0;i<a.link.length;i++){var d=a.link[i];if(d.rel.match(/\#feed$/)){p.upload_location=p.files=p.photos=d.href;break}}if("category"in a&&a.category.length)for(_a=a.category,i=0;i<_a.length;i++)_a[i].scheme&&_a[i].scheme.match(/\#kind$/)&&(p.type=_a[i].term.replace(/^.*?\#/,""));return"media$thumbnail"in group&&group.media$thumbnail.length&&(_a=group.media$thumbnail,p.thumbnail=_a[0].url,p.images=_a.map(formatImage)),_a=group.media$content,_a&&_a.length&&p.images.push(formatImage(_a[0])),p}function paging(res){if("feed"in res&&res.feed.openSearch$itemsPerPage){var limit=toInt(res.feed.openSearch$itemsPerPage.$t),start=toInt(res.feed.openSearch$startIndex.$t),total=toInt(res.feed.openSearch$totalResults.$t);start+limit<total&&(res.paging={next:"?start="+(start+limit)})}else"nextPageToken"in res&&(res.paging={next:"?pageToken="+res.nextPageToken})}function Multipart(){function addFile(item){var fr=new FileReader;fr.onload=function(e){addContent(btoa(e.target.result),item.type+lineBreak+"Content-Transfer-Encoding: base64")},fr.readAsBinaryString(item)}function addContent(content,type){body.push(lineBreak+"Content-Type: "+type+lineBreak+lineBreak+content),counter--,ready()}var body=[],boundary=(1e10*Math.random()).toString(32),counter=0,lineBreak="\r\n",delim=lineBreak+"--"+boundary,ready=function(){},dataUri=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(content,type){"string"!=typeof content&&"length"in Object(content)||(content=[content]);for(var i=0;i<content.length;i++){counter++;var item=content[i];if("undefined"!=typeof File&&item instanceof File||"undefined"!=typeof Blob&&item instanceof Blob)addFile(item);else if("string"==typeof item&&item.match(dataUri)){var m=item.match(dataUri);addContent(item.replace(dataUri,""),m[1]+lineBreak+"Content-Transfer-Encoding: base64")}else addContent(item,type)}},this.onready=function(fn){(ready=function(){0===counter&&(body.unshift(""),body.push("--"),fn(body.join(delim),boundary),body=[])})()}}function uploadDrive(p,callback){var data={};p.data&&"undefined"!=typeof HTMLInputElement&&p.data instanceof HTMLInputElement&&(p.data={file:p.data}),!p.data.name&&Object(Object(p.data.file).files).length&&"post"===p.method&&(p.data.name=p.data.file.files[0].name),"post"===p.method?p.data={title:p.data.name,parents:[{id:p.data.parent||"root"}],file:p.data.file}:(data=p.data,p.data={},data.parent&&(p.data.parents=[{id:p.data.parent||"root"}]),data.file&&(p.data.file=data.file),data.name&&(p.data.title=data.name));var file;if("file"in p.data&&(file=p.data.file,delete p.data.file,"object"==typeof file&&"files"in file&&(file=file.files),!file||!file.length))return void callback({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var parts=new Multipart;parts.append(JSON.stringify(p.data),"application/json"),file&&parts.append(file),parts.onready(function(body,boundary){p.headers["content-type"]='multipart/related; boundary="'+boundary+'"',p.data=body,callback("upload/drive/v2/files"+(data.id?"/"+data.id:"")+"?uploadType=multipart")})}function toJSON(p){if("object"==typeof p.data)try{p.data=JSON.stringify(p.data),p.headers["content-type"]="application/json"}catch(e){}}var contactsUrl="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";hello.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",share:"",create_event:"",offline_access:""},scope_delim:" ",login:function(p){"code"===p.qs.response_type&&(p.qs.access_type="offline"),p.options.force&&(p.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":contactsUrl,"me/followers":contactsUrl,"me/contacts":contactsUrl,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(p,callback){var key=p.query.id;delete p.query.id,callback(key.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/file":"drive/v2/files/@{id}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":uploadDrive,"me/folders":function(p,callback){p.data={title:p.data.name,parents:[{id:p.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},callback("drive/v2/files")}},put:{"me/files":uploadDrive},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},patch:{"me/file":"drive/v2/files/@{id}"},wrap:{me:function(o){return o.id&&(o.last_name=o.family_name||(o.name?o.name.familyName:null),o.first_name=o.given_name||(o.name?o.name.givenName:null),o.emails&&o.emails.length&&(o.email=o.emails[0].value),formatPerson(o)),o},"me/friends":function(o){return o.items&&(paging(o),o.data=o.items,o.data.forEach(formatPerson),delete o.items),o},"me/contacts":formatFriends,"me/followers":formatFriends,"me/following":formatFriends,"me/share":formatFeed,"me/feed":formatFeed,"me/albums":gEntry,"me/photos":formatPhotos,default:gEntry},xhr:function(p){return"post"===p.method||"put"===p.method?toJSON(p):"patch"===p.method&&(hello.utils.extend(p.query,p.data),p.data=null),!0},form:!1}})}(hello),function(hello){function formatImage(image){return{source:image.url,width:image.width,height:image.height}}function formatError(o){return"string"==typeof o?{error:{code:"invalid_request",message:o}}:(o&&"meta"in o&&"error_type"in o.meta&&(o.error={code:o.meta.error_type,message:o.meta.error_message}),o)}function formatFriends(o){return paging(o),o&&"data"in o&&o.data.forEach(formatFriend),o}function formatFriend(o){o.id&&(o.thumbnail=o.profile_picture,o.name=o.full_name||o.username)}function paging(res){"pagination"in res&&(res.paging={next:res.pagination.next_url},delete res.pagination)}hello.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",photos:"",friends:"relationships",publish:"likes comments",email:"",share:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(p,callback){var id=p.data.id;p.data={},callback("media/"+id+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(o){return formatError(o),"data"in o&&(o.id=o.data.id,o.thumbnail=o.data.profile_picture,o.name=o.data.full_name||o.data.username),o},"me/friends":formatFriends,"me/following":formatFriends,"me/followers":formatFriends,"me/photos":function(o){return formatError(o),paging(o),"data"in o&&(o.data=o.data.filter(function(d){return"image"===d.type}),o.data.forEach(function(d){d.name=d.caption?d.caption.text:null,d.thumbnail=d.images.thumbnail.url,d.picture=d.images.standard_resolution.url,d.pictures=Object.keys(d.images).map(function(key){var image=d.images[key];return formatImage(image)}).sort(function(a,b){return a.width-b.width})})),o},default:function(o){return o=formatError(o),paging(o),o}},xhr:function(p,qs){var method=p.method,proxy="get"!==method;return proxy&&("post"!==method&&"put"!==method||!p.query.access_token||(p.data.access_token=p.query.access_token,delete p.query.access_token),p.proxy=proxy),proxy},form:!1}})}(hello),function(hello){function formatError(o,headers){var errorCode,message;return o&&"Message"in o&&(message=o.Message,delete o.Message,"ErrorCode"in o?(errorCode=o.ErrorCode,delete o.ErrorCode):errorCode=getErrorCode(headers),o.error={code:errorCode,message:message,details:o}),o}function formatRequest(p,qs){var token=qs.access_token;return delete qs.access_token,p.headers.Authorization="Bearer "+token,"get"!==p.method&&p.data&&(p.headers["Content-Type"]="application/json","object"==typeof p.data&&(p.data=JSON.stringify(p.data))),"put"===p.method&&(p.method="patch"),!0}function getErrorCode(headers){switch(headers.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}hello.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting",email:"",friends:"",share:"",publish:"",photos:"",publish_files:"",files:"",videos:"",offline_access:""},scope_delim:" ",login:function(p){p.options.popup.width=400,p.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(p,callback){callback("meetings/start")},"meetings/start/scheduled":function(p,callback){var meetingId=p.data.meetingId;p.data={},callback("meetings/"+meetingId+"/start")},"meetings/schedule":function(p,callback){callback("meetings")}},patch:{"meetings/update":function(p,callback){callback("meetings/"+p.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(o,headers){return formatError(o,headers),o.email?(o.name=o.fullName,o.first_name=o.name.split(" ")[0],o.last_name=o.name.split(" ")[1],o.id=o.email,o):o},default:function(o,headers){return formatError(o,headers),o}},xhr:formatRequest}})}(hello),function(hello){function formatError(o){o&&"errorCode"in o&&(o.error={code:o.status,message:o.message})}function formatUser(o){if(!o.error)return o.first_name=o.firstName,o.last_name=o.lastName,o.name=o.formattedName||o.first_name+" "+o.last_name,o.thumbnail=o.pictureUrl,o.email=o.emailAddress,o}function formatFriends(o){return formatError(o),paging(o),o.values&&(o.data=o.values.map(formatUser),delete o.values),o}function paging(res){"_count"in res&&"_start"in res&&res._count+res._start<res._total&&(res.paging={next:"?start="+(res._start+res._count)+"&count="+res._count})}function empty(o,headers){"{}"===JSON.stringify(o)&&200===headers.statusCode&&(o.success=!0)}function formatQuery(qs){qs.access_token&&(qs.oauth2_access_token=qs.access_token,delete qs.access_token)}function like(p,callback){p.headers["x-li-format"]="json";var id=p.data.id;p.data=("delete"!==p.method).toString(),p.method="put",callback("people/~/network/updates/key="+id+"/is-liked")}hello.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",files:"",friends:"",photos:"",publish:"w_share",publish_files:"w_share",share:"",videos:"",offline_access:""},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(p,callback){var data={visibility:{code:"anyone"}};p.data.id?data.attribution={share:{id:p.data.id}}:(data.comment=p.data.message,p.data.picture&&p.data.link&&(data.content={"submitted-url":p.data.link,"submitted-image-url":p.data.picture})),p.data=JSON.stringify(data),
callback("people/~/shares?format=json")},"me/like":like},del:{"me/like":like},wrap:{me:function(o){return formatError(o),formatUser(o),o},"me/friends":formatFriends,"me/following":formatFriends,"me/followers":formatFriends,"me/share":function(o){return formatError(o),paging(o),o.values&&(o.data=o.values.map(formatUser),o.data.forEach(function(item){item.message=item.headline}),delete o.values),o},default:function(o,headers){formatError(o),empty(o,headers),paging(o)}},jsonp:function(p,qs){formatQuery(qs),"get"===p.method&&(qs.format="jsonp",qs["error-callback"]=p.callbackID)},xhr:function(p,qs){return"get"!==p.method&&(formatQuery(qs),p.headers["Content-Type"]="application/json",p.headers["x-li-format"]="json",p.proxy=!0,!0)}}})}(hello),function(hello){function formatRequest(p,qs){var token=qs.access_token;return delete qs.access_token,qs.oauth_token=token,qs["_status_code_map[302]"]=200,!0}function formatUser(o){return o.id&&(o.picture=o.avatar_url,o.thumbnail=o.avatar_url,o.name=o.username||o.full_name),o}function paging(res){"next_href"in res&&(res.paging={next:res.next_href})}hello.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json",default:function(p,callback){callback(p.path+".json")}},wrap:{me:function(o){return formatUser(o),o},default:function(o){return Array.isArray(o)&&(o={data:o.map(formatUser)}),paging(o),o}},xhr:formatRequest,jsonp:formatRequest}})}(hello),function(hello){function formatUser(o){if(o.id){if(o.name){var m=o.name.split(" ");o.first_name=m.shift(),o.last_name=m.join(" ")}o.thumbnail=o.profile_image_url_https||o.profile_image_url}return o}function formatFriends(o){return formatError(o),paging(o),o.users&&(o.data=o.users.map(formatUser),delete o.users),o}function formatError(o){if(o.errors){var e=o.errors[0];o.error={code:"request_failed",message:e.message}}}function paging(res){"next_cursor_str"in res&&(res.paging={next:"?cursor="+res.next_cursor_str})}function arrayToDataResponse(res){return Array.isArray(res)?{data:res}:res}var base="https://api.twitter.com/";hello.init({twitter:{oauth:{version:"1.0a",auth:base+"oauth/authenticate",request:base+"oauth/request_token",token:base+"oauth/access_token"},login:function(p){var prefix="?force_login=true";this.oauth.auth=this.oauth.auth.replace(prefix,"")+(p.options.force?prefix:"")},base:base+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(p,callback){var data=p.data;p.data=null;var status=[];data.message&&(status.push(data.message),delete data.message),data.link&&(status.push(data.link),delete data.link),data.picture&&(status.push(data.picture),delete data.picture),status.length&&(data.status=status.join(" ")),data.file?(data["media[]"]=data.file,delete data.file,p.data=data,callback("statuses/update_with_media.json")):"id"in data?callback("statuses/retweet/"+data.id+".json"):(hello.utils.extend(p.query,data),callback("statuses/update.json?include_entities=1"))},"me/like":function(p,callback){var id=p.data.id;p.data=null,callback("favorites/create.json?id="+id)}},del:{"me/like":function(){p.method="post";var id=p.data.id;p.data=null,callback("favorites/destroy.json?id="+id)}},wrap:{me:function(res){return formatError(res),formatUser(res),res},"me/friends":formatFriends,"me/followers":formatFriends,"me/following":formatFriends,"me/share":function(res){return formatError(res),paging(res),!res.error&&"length"in res?{data:res}:res},default:function(res){return res=arrayToDataResponse(res),paging(res),res}},xhr:function(p){return"get"!==p.method}}})}(hello),function(hello){function formatUser(o,req){return null!==o&&"response"in o&&null!==o.response&&o.response.length&&(o=o.response[0],o.id=o.uid,o.thumbnail=o.picture=o.photo_max,o.name=o.first_name+" "+o.last_name,req.authResponse&&null!==req.authResponse.email&&(o.email=req.authResponse.email)),o}function formatError(o){if(o.error){var e=o.error;o.error={code:e.error_code,message:e.error_msg}}}hello.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{email:"email",friends:"friends",photos:"photos",videos:"video",share:"share",offline_access:"offline"},refresh:!0,login:function(p){p.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(p,callback){p.query.fields="id,first_name,last_name,photo_max",callback("users.get")}},wrap:{me:function(res,headers,req){return formatError(res),formatUser(res,req)}},xhr:!1,jsonp:!0,form:!1}})}(hello),function(hello){function formatDefault(o){return"data"in o&&o.data.forEach(function(d){d.picture&&(d.thumbnail=d.picture),d.images&&(d.pictures=d.images.map(formatImage).sort(function(a,b){return a.width-b.width}))}),o}function formatImage(image){return{width:image.width,height:image.height,source:image.source}}function formatAlbums(o){return"data"in o&&o.data.forEach(function(d){d.photos=d.files="https://apis.live.net/v5.0/"+d.id+"/photos"}),o}function formatUser(o,headers,req){if(o.id){var token=req.query.access_token;if(o.emails&&(o.email=o.emails.preferred),o.is_friend!==!1){var id=o.user_id||o.id;o.thumbnail=o.picture="https://apis.live.net/v5.0/"+id+"/picture?access_token="+token}}return o}function formatFriends(o,headers,req){return"data"in o&&o.data.forEach(function(d){formatUser(d,headers,req)}),o}hello.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",share:"wl.share",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:formatUser,"me/friends":formatFriends,"me/contacts":formatFriends,"me/followers":formatFriends,"me/following":formatFriends,"me/albums":formatAlbums,"me/photos":formatDefault,default:formatDefault},xhr:function(p){return"get"===p.method||"delete"===p.method||hello.utils.hasBinary(p.data)||("string"==typeof p.data.file?p.data.file=hello.utils.toBlob(p.data.file):(p.data=JSON.stringify(p.data),p.headers={"Content-Type":"application/json"})),!0},jsonp:function(p){"get"===p.method||hello.utils.hasBinary(p.data)||(p.data.method=p.method,p.method="get")}}})}(hello),function(hello){function formatError(o){o&&"meta"in o&&"error_type"in o.meta&&(o.error={code:o.meta.error_type,message:o.meta.error_message})}function formatUser(o){if(formatError(o),o.query&&o.query.results&&o.query.results.profile){o=o.query.results.profile,o.id=o.guid,o.last_name=o.familyName,o.first_name=o.givenName||o.nickname;var a=[];o.first_name&&a.push(o.first_name),o.last_name&&a.push(o.last_name),o.name=a.join(" "),o.email=o.emails&&o.emails[0]?o.emails[0].handle:null,o.thumbnail=o.image?o.image.imageUrl:null}return o}function formatFriends(o,headers,request){formatError(o),paging(o,headers,request);return o.query&&o.query.results&&o.query.results.contact&&(o.data=o.query.results.contact,delete o.query,Array.isArray(o.data)||(o.data=[o.data]),o.data.forEach(formatFriend)),o}function formatFriend(contact){contact.id=null,!contact.fields||contact.fields instanceof Array||(contact.fields=[contact.fields]),(contact.fields||[]).forEach(function(field){"email"===field.type&&(contact.email=field.value),"name"===field.type&&(contact.first_name=field.value.givenName,contact.last_name=field.value.familyName,contact.name=field.value.givenName+" "+field.value.familyName),"yahooid"===field.type&&(contact.id=field.value)})}function paging(res,headers,request){return res.query&&res.query.count&&request.options&&(res.paging={next:"?start="+(res.query.count+(+request.options.start||1))}),res}function yql(q){return"https://query.yahooapis.com/v1/yql?q="+(q+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}hello.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(p){p.options.popup.width=560;try{delete p.qs.state.scope}catch(e){}},base:"https://social.yahooapis.com/v1/",get:{me:yql("select * from social.profile(0) where guid=me"),"me/friends":yql("select * from social.contacts(0) where guid=me"),"me/following":yql("select * from social.contacts(0) where guid=me")},wrap:{me:formatUser,"me/friends":formatFriends,"me/following":formatFriends,default:paging}}})}(hello),__WEBPACK_AMD_DEFINE_RESULT__=function(){return hello}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),"object"==typeof module&&module.exports&&(module.exports=hello)}).call(exports,__webpack_require__(9),__webpack_require__(415).setImmediate)},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate){function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}var nextTick=__webpack_require__(9).nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(exports,__webpack_require__(415).setImmediate,__webpack_require__(415).clearImmediate)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Google=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_social=__webpack_require__(413),_enums=__webpack_require__(411);exports.Google=function(_Social){function Google(){return _classCallCheck(this,Google),_possibleConstructorReturn(this,(Google.__proto__||Object.getPrototypeOf(Google)).apply(this,arguments))}return _inherits(Google,_Social),_createClass(Google,[{key:"identity",get:function(){return _enums.SocialIdentity.Google}}],[{key:"identity",get:function(){return _enums.SocialIdentity.Google}}]),Google}(_social.Social)},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LinkedIn=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_social=__webpack_require__(413),_enums=__webpack_require__(411);exports.LinkedIn=function(_Social){function LinkedIn(){return _classCallCheck(this,LinkedIn),_possibleConstructorReturn(this,(LinkedIn.__proto__||Object.getPrototypeOf(LinkedIn)).apply(this,arguments))}return _inherits(LinkedIn,_Social),_createClass(LinkedIn,[{key:"identity",get:function(){return _enums.SocialIdentity.LinkedIn}}],[{key:"identity",get:function(){return _enums.SocialIdentity.LinkedIn}}]),LinkedIn}(_social.Social)},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MobileIdentityConnect=exports.AuthorizationGrant=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_social=__webpack_require__(413),_enums=__webpack_require__(411),_request=__webpack_require__(11),_errors=__webpack_require__(14),_utils=__webpack_require__(162),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_path=__webpack_require__(419),_path2=_interopRequireDefault(_path),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),authPathname=process&&process.env&&process.env.KINVEY_MIC_AUTH_PATHNAME||"/oauth/auth"||"/oauth/auth",tokenPathname=process&&process.env&&process.env.KINVEY_MIC_TOKEN_PATHNAME||"/oauth/token"||"/oauth/token",invalidatePathname=process&&process.env&&process.env.KINVEY_MIC_INVALIDATE_PATHNAME||"/oauth/invalidate"||"/oauth/invalidate",AuthorizationGrant={AuthorizationCodeLoginPage:"AuthorizationCodeLoginPage",AuthorizationCodeAPI:"AuthorizationCodeAPI"};Object.freeze(AuthorizationGrant),exports.AuthorizationGrant=AuthorizationGrant;exports.MobileIdentityConnect=function(_Social){function MobileIdentityConnect(){return _classCallCheck(this,MobileIdentityConnect),_possibleConstructorReturn(this,(MobileIdentityConnect.__proto__||Object.getPrototypeOf(MobileIdentityConnect)).apply(this,arguments))}return _inherits(MobileIdentityConnect,_Social),_createClass(MobileIdentityConnect,[{key:"login",value:function(redirectUri){var _this2=this,authorizationGrant=arguments.length<=1||void 0===arguments[1]?AuthorizationGrant.AuthorizationCodeLoginPage:arguments[1],options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],clientId=this.client.appKey,promise=_promise2.default.resolve().then(function(){if(authorizationGrant===AuthorizationGrant.AuthorizationCodeLoginPage)return _this2.requestCodeWithPopup(clientId,redirectUri,options);if(authorizationGrant===AuthorizationGrant.AuthorizationCodeAPI)return _this2.requestTempLoginUrl(clientId,redirectUri,options).then(function(url){return _this2.requestCodeWithUrl(url,clientId,redirectUri,options)});throw new _errors.KinveyError("The authorization grant "+authorizationGrant+" is unsupported. Please use a supported authorization grant.")}).then(function(code){return _this2.requestToken(code,clientId,redirectUri,options)}).then(function(session){return session.client_id=clientId,session.redirect_uri=redirectUri,session.protocol=_this2.client.micProtocol,session.host=_this2.client.micHost,session});return promise}},{key:"requestTempLoginUrl",value:function(clientId,redirectUri){var options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],pathname="/";if(options.version){var version=options.version;(0,_isString2.default)(version)||(version=String(version)),pathname=_path2.default.join(pathname,0===version.indexOf("v")?version:"v"+version)}var request=new _request.KinveyRequest({method:_request.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:_url2.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:_path2.default.join(pathname,authPathname)}),properties:options.properties,body:{client_id:clientId,redirect_uri:redirectUri,response_type:"code"}});return request.execute().then(function(response){return response.data.temp_login_uri})}},{key:"requestCodeWithPopup",value:function(clientId,redirectUri){var _this3=this,options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],promise=_promise2.default.resolve().then(function(){var pathname="/";if(options.version){var version=options.version;(0,_isString2.default)(version)||(version=String(version)),pathname=_path2.default.join(pathname,0===version.indexOf("v")?version:"v"+version)}if(_utils.Popup){var popup=new _utils.Popup;return popup.open(_url2.default.format({protocol:_this3.client.micProtocol,host:_this3.client.micHost,pathname:_path2.default.join(pathname,authPathname),query:{client_id:clientId,redirect_uri:redirectUri,response_type:"code"}}))}throw new _errors.KinveyError("Popup is undefined."+(" Unable to login using authorization grant "+AuthorizationGrant.AuthorizationCodeLoginPage+"."))}).then(function(popup){var promise=new _promise2.default(function(resolve,reject){function loadCallback(event){try{event.url&&0===event.url.indexOf(redirectUri)&&redirected===!1&&(redirected=!0,popup.removeAllListeners(),popup.close(),resolve(_url2.default.parse(event.url,!0).query.code))}catch(error){}}function errorCallback(event){try{event.url&&0===event.url.indexOf(redirectUri)&&redirected===!1?(redirected=!0,popup.removeAllListeners(),popup.close(),resolve(_url2.default.parse(event.url,!0).query.code)):redirected===!1&&(popup.removeAllListeners(),popup.close(),reject(new _errors.KinveyError(event.message,"",event.code)))}catch(error){}}function closedCallback(){redirected===!1&&(popup.removeAllListeners(),reject(new _errors.KinveyError("Login has been cancelled.")))}var redirected=!1;popup.on("loadstart",loadCallback),popup.on("loadstop",loadCallback),popup.on("error",errorCallback),popup.on("closed",closedCallback)});return promise});return promise}},{key:"requestCodeWithUrl",value:function(loginUrl,clientId,redirectUri){var options=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],promise=_promise2.default.resolve().then(function(){var request=new _request.KinveyRequest({method:_request.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:loginUrl,properties:options.properties,body:{client_id:clientId,redirect_uri:redirectUri,response_type:"code",username:options.username,password:options.password},followRedirect:!1});return request.execute()}).then(function(response){var location=response.getHeader("location");if(location)return _url2.default.parse(location,!0).query.code;throw new _errors.KinveyError("Unable to authorize user with username "+options.username+".","A location header was not provided with a code to exchange for an auth token.")});return promise}},{key:"requestToken",value:function(code,clientId,redirectUri){var options=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],request=new _request.KinveyRequest({method:_request.RequestMethod.POST,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:_request.AuthType.App,url:_url2.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:tokenPathname}),properties:options.properties,body:{grant_type:"authorization_code",client_id:clientId,redirect_uri:redirectUri,code:code}}),promise=request.execute().then(function(response){return response.data});return promise}},{key:"logout",value:function(){function logout(_x7,_x8){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(user){var request,response,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return request=new _request.KinveyRequest({method:_request.RequestMethod.GET,headers:{"Content-Type":"application/x-www-form-urlencoded"},authType:_request.AuthType.App,url:_url2.default.format({protocol:this.client.micProtocol,host:this.client.micHost,pathname:invalidatePathname,query:{user:user._id}}),properties:options.properties}),_context.next=3,request.execute();case 3:return response=_context.sent,_context.abrupt("return",response.data);case 5:case"end":return _context.stop()}},_callee,this)}));return logout}()},{key:"identity",get:function(){return _enums.SocialIdentity.MobileIdentityConnect}}],[{key:"identity",get:function(){return _enums.SocialIdentity.MobileIdentityConnect}}]),MobileIdentityConnect}(_social.Social)}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash="/"===substr(path,-1);return path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/"),path||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.isAbsolute=function(path){return"/"===path.charAt(0)},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},exports.relative=function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}for(var outputParts=[],i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},exports.basename=function(path,ext){var f=splitPath(path)[2];return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){return splitPath(path)[3]};var substr="b"==="ab".substr(-1)?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return start<0&&(start=str.length+start),str.substr(start,len)}}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Windows=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_social=__webpack_require__(413),_enums=__webpack_require__(411);exports.Windows=function(_Social){function Windows(){return _classCallCheck(this,Windows),_possibleConstructorReturn(this,(Windows.__proto__||Object.getPrototypeOf(Windows)).apply(this,arguments))}return _inherits(Windows,_Social),_createClass(Windows,[{key:"identity",get:function(){return _enums.SocialIdentity.Windows}}],[{key:"identity",get:function(){return _enums.SocialIdentity.Windows}}]),Windows}(_social.Social)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Query=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(14),_utils=__webpack_require__(162),_sift=__webpack_require__(422),_sift2=_interopRequireDefault(_sift),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),_isNumber=__webpack_require__(159),_isNumber2=_interopRequireDefault(_isNumber),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isObject=__webpack_require__(31),_isObject2=_interopRequireDefault(_isObject),_isRegExp=__webpack_require__(423),_isRegExp2=_interopRequireDefault(_isRegExp),_isEmpty=__webpack_require__(358),_isEmpty2=_interopRequireDefault(_isEmpty),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_findKey=__webpack_require__(425),_findKey2=_interopRequireDefault(_findKey),unsupportedFilters=["$nearSphere"],Query=function(){
function Query(options){_classCallCheck(this,Query),options=(0,_assign2.default)({fields:[],filter:{},sort:{},limit:null,skip:0},options),this.fields=options.fields,this.filter=options.filter,this.sort=options.sort,this.limit=options.limit,this.skip=options.skip,this._parent=null}return _createClass(Query,[{key:"isSupportedOffline",value:function(){var _this=this,supported=!0;return(0,_forEach2.default)(unsupportedFilters,function(filter){return supported=!(0,_findKey2.default)(_this.filter,filter)}),supported}},{key:"equalTo",value:function(field,value){return this.addFilter(field,value)}},{key:"contains",value:function(field,values){return(0,_isArray2.default)(values)||(values=[values]),this.addFilter(field,"$in",values)}},{key:"containsAll",value:function(field,values){return(0,_isArray2.default)(values)||(values=[values]),this.addFilter(field,"$all",values)}},{key:"greaterThan",value:function(field,value){if(!(0,_isNumber2.default)(value)&&!(0,_isString2.default)(value))throw new _errors.QueryError("You must supply a number or string.");return this.addFilter(field,"$gt",value)}},{key:"greaterThanOrEqualTo",value:function(field,value){if(!(0,_isNumber2.default)(value)&&!(0,_isString2.default)(value))throw new _errors.QueryError("You must supply a number or string.");return this.addFilter(field,"$gte",value)}},{key:"lessThan",value:function(field,value){if(!(0,_isNumber2.default)(value)&&!(0,_isString2.default)(value))throw new _errors.QueryError("You must supply a number or string.");return this.addFilter(field,"$lt",value)}},{key:"lessThanOrEqualTo",value:function(field,value){if(!(0,_isNumber2.default)(value)&&!(0,_isString2.default)(value))throw new _errors.QueryError("You must supply a number or string.");return this.addFilter(field,"$lte",value)}},{key:"notEqualTo",value:function(field,value){return this.addFilter(field,"$ne",value)}},{key:"notContainedIn",value:function(field,values){return(0,_isArray2.default)(values)||(values=[values]),this.addFilter(field,"$nin",values)}},{key:"and",value:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.join("$and",args)}},{key:"nor",value:function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];if(this._parent&&this._parent.filter.$and){var _parent;return(_parent=this._parent).nor.apply(_parent,args)}return this.join("$nor",args)}},{key:"or",value:function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];if(this._parent){var _parent2;return(_parent2=this._parent).or.apply(_parent2,args)}return this.join("$or",args)}},{key:"exists",value:function(field,flag){return flag="undefined"==typeof flag||(flag||!1),this.addFilter(field,"$exists",flag)}},{key:"mod",value:function(field,divisor){var remainder=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if((0,_isString2.default)(divisor)&&(divisor=parseFloat(divisor)),(0,_isString2.default)(remainder)&&(remainder=parseFloat(remainder)),!(0,_isNumber2.default)(divisor))throw new _errors.QueryError("divisor must be a number");if(!(0,_isNumber2.default)(remainder))throw new _errors.QueryError("remainder must be a number");return this.addFilter(field,"$mod",[divisor,remainder])}},{key:"matches",value:function(field,regExp){var options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if((0,_isRegExp2.default)(regExp)||(regExp=new RegExp(regExp)),(regExp.ignoreCase||options.ignoreCase)&&options.ignoreCase!==!1)throw new _errors.QueryError("ignoreCase glag is not supported.");if(0!==regExp.source.indexOf("^"))throw new _errors.QueryError("regExp must have `^` at the beginning of the expression to make it an anchored expression.");var flags=[];(regExp.multiline||options.multiline)&&options.multiline!==!1&&flags.push("m"),options.extended&&flags.push("x"),options.dotMatchesAll&&flags.push("s");var result=this.addFilter(field,"$regex",regExp.source);return flags.length&&this.addFilter(field,"$options",flags.join("")),result}},{key:"near",value:function(field,coord,maxDistance){if(!(0,_isArray2.default)(coord)||!(0,_isNumber2.default)(coord[0])||!(0,_isNumber2.default)(coord[1]))throw new _errors.QueryError("coord must be a [number, number]");var result=this.addFilter(field,"$nearSphere",[coord[0],coord[1]]);return maxDistance&&this.addFilter(field,"$maxDistance",maxDistance),result}},{key:"withinBox",value:function(field,bottomLeftCoord,upperRightCoord){if(!(0,_isArray2.default)(bottomLeftCoord)||!bottomLeftCoord[0]||!bottomLeftCoord[1])throw new _errors.QueryError("bottomLeftCoord must be a [number, number]");if(!(0,_isArray2.default)(upperRightCoord)||!upperRightCoord[0]||!upperRightCoord[1])throw new _errors.QueryError("upperRightCoord must be a [number, number]");bottomLeftCoord[0]=parseFloat(bottomLeftCoord[0]),bottomLeftCoord[1]=parseFloat(bottomLeftCoord[1]),upperRightCoord[0]=parseFloat(upperRightCoord[0]),upperRightCoord[1]=parseFloat(upperRightCoord[1]);var coords=[[bottomLeftCoord[0],bottomLeftCoord[1]],[upperRightCoord[0],upperRightCoord[1]]];return this.addFilter(field,"$within",{$box:coords})}},{key:"withinPolygon",value:function(field,coords){if(!(0,_isArray2.default)(coords)||coords.length>3)throw new _errors.QueryError("coords must be [[number, number]]");return coords=coords.map(function(coord){if(!coord[0]||!coord[1])throw new _errors.QueryError("coords argument must be [number, number]");return[parseFloat(coord[0]),parseFloat(coord[1])]}),this.addFilter(field,"$within",{$polygon:coords})}},{key:"size",value:function(field,_size){if((0,_isString2.default)(_size)&&(_size=parseFloat(_size)),!(0,_isNumber2.default)(_size))throw new _errors.QueryError("size must be a number");return this.addFilter(field,"$size",_size)}},{key:"ascending",value:function(field){return this._parent?this._parent.ascending(field):this.sort[field]=1,this}},{key:"descending",value:function(field){return this._parent?this._parent.descending(field):this.sort[field]=-1,this}},{key:"addFilter",value:function(field,condition,values){return(0,_isObject2.default)(this.filter[field])||(this.filter[field]={}),condition&&values?this.filter[field][condition]=values:this.filter[field]=condition,this}},{key:"join",value:function(operator,queries){var _this2=this,that=this,currentQuery={};queries=queries.map(function(query){if(!(query instanceof Query)){if(!(0,_isObject2.default)(query))throw new _errors.QueryError("query argument must be of type: Kinvey.Query[] or Object[].");query=new Query(query)}return query.toJSON().filter}),0===queries.length&&(that=new Query,queries=[that.toJSON().filter],that.parent=this);var members=Object.keys(this.filter);return(0,_forEach2.default)(members,function(member){currentQuery[member]=_this2.filter[member],delete _this2.filter[member]}),this.filter[operator]=[currentQuery].concat(queries),that}},{key:"process",value:function(data){var _this3=this;if(this.isSupportedOffline()===!1&&!function(){var message="This query is not able to run locally. The following filters are not supported locally:";throw(0,_forEach2.default)(unsupportedFilters,function(filter){message=message+" "+filter}),new _errors.QueryError(message)}(),data){var _ret2=function(){if(!(0,_isArray2.default)(data))throw new _errors.QueryError("data argument must be of type: Array.");var json=_this3.toJSON();return data=(0,_sift2.default)(json.filter,data),json.fields&&json.fields.length>0&&(data=data.map(function(item){var keys=Object.keys(item);return(0,_forEach2.default)(keys,function(key){json.fields.indexOf(key)===-1&&delete item[key]}),item})),data=data.sort(function(a,b){var fields=Object.keys(json.sort);return(0,_forEach2.default)(fields,function(field){var aField=(0,_utils.nested)(a,field),bField=(0,_utils.nested)(b,field);if(aField&&!bField)return-1;if(bField&&!aField)return 1;if(aField!==bField){var modifier=json.sort[field];return(aField<bField?-1:1)*modifier}return 0}),0}),json.limit?{v:data.slice(json.skip,json.skip+json.limit)}:{v:data.slice(json.skip)}}();if("object"===("undefined"==typeof _ret2?"undefined":_typeof(_ret2)))return _ret2.v}return data}},{key:"toPlainObject",value:function(){if(this._parent)return this._parent.toPlainObject();var json={fields:this.fields,filter:this.filter,sort:this.sort,skip:this.skip,limit:this.limit};return json}},{key:"toJSON",value:function(){return this.toPlainObject()}},{key:"toQueryString",value:function(){var queryString={};(0,_isEmpty2.default)(this.filter)||(queryString.query=this.filter),(0,_isEmpty2.default)(this.fields)||(queryString.fields=this.fields.join(",")),this.limit&&(queryString.limit=this.limit),this.skip>0&&(queryString.skip=this.skip),(0,_isEmpty2.default)(this.sort)||(queryString.sort=this.sort);var keys=Object.keys(queryString);return(0,_forEach2.default)(keys,function(key){queryString[key]=(0,_isString2.default)(queryString[key])?queryString[key]:JSON.stringify(queryString[key])}),queryString}},{key:"toString",value:function(){return JSON.stringify(this.toQueryString())}},{key:"fields",get:function(){return this._fields},set:function(fields){if(fields=fields||[],!(0,_isArray2.default)(fields))throw new _errors.QueryError("fields must be an Array");this._parent?this._parent.fields=fields:this._fields=fields}},{key:"filter",get:function(){return this._filter},set:function(filter){this._filter=filter}},{key:"sort",get:function(){return this._sort},set:function(sort){if(sort&&!(0,_isObject2.default)(sort))throw new _errors.QueryError("sort must an Object");this._parent?this._parent.sort(sort):this._sort=sort||{}}},{key:"limit",get:function(){return this._limit},set:function(limit){if((0,_isString2.default)(limit)&&(limit=parseFloat(limit)),limit&&!(0,_isNumber2.default)(limit))throw new _errors.QueryError("limit must be a number");this._parent?this._parent.limit=limit:this._limit=limit}},{key:"skip",get:function(){return this._skip},set:function(){var skip=arguments.length<=0||void 0===arguments[0]?0:arguments[0];if((0,_isString2.default)(skip)&&(skip=parseFloat(skip)),!(0,_isNumber2.default)(skip))throw new _errors.QueryError("skip must be a number");this._parent?this._parent.skip(skip):this._skip=skip}}]),Query}();exports.Query=Query},function(module,exports){!function(){"use strict";function isFunction(value){return"function"==typeof value}function isArray(value){return"[object Array]"===Object.prototype.toString.call(value)}function comparable(value){return value instanceof Date?value.getTime():value instanceof Array?value.map(comparable):value}function get(obj,key){return obj.get?obj.get(key):obj[key]}function or(validator){return function(a,b){if(!isArray(b)||!b.length)return validator(a,b);for(var i=0,n=b.length;i<n;i++)if(validator(a,get(b,i)))return!0;return!1}}function and(validator){return function(a,b){if(!isArray(b)||!b.length)return validator(a,b);for(var i=0,n=b.length;i<n;i++)if(!validator(a,get(b,i)))return!1;return!0}}function validate(validator,b){return validator.v(validator.a,b)}function search(array,validator){for(var i=0;i<array.length;i++)if(validate(validator,get(array,i)))return i;return-1}function createValidator(a,validate){return{a:a,v:validate}}function nestedValidator(a,b){var values=[];return findValues(b,a.k,0,values),1===values.length?validate(a.nv,values[0]):!!~search(values,a.nv)}function findValues(current,keypath,index,values){if(index===keypath.length||void 0==current)return void values.push(current);var k=get(keypath,index);if(isArray(current)&&isNaN(Number(k)))for(var i=0,n=current.length;i<n;i++)findValues(get(current,i),keypath,index,values);else findValues(get(current,k),keypath,index+1,values)}function createNestedValidator(keypath,a){return{a:{k:keypath,nv:a},v:nestedValidator}}function parse(query){query=comparable(query),(!query||"Object"!==query.constructor.toString()&&"functionObject(){[nativecode]}"!==query.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(query={$eq:query});var validators=[];for(var key in query){var a=query[key];if("$options"!==key)if(operator[key])prepare[key]&&(a=prepare[key](a,query)),validators.push(createValidator(comparable(a),operator[key]));else{if(36===key.charCodeAt(0))throw new Error("Unknown operation "+key);validators.push(createNestedValidator(key.split("."),parse(a)))}}return 1===validators.length?validators[0]:createValidator(validators,operator.$and)}function createRootValidator(query,getter){var validator=parse(query);return getter&&(validator={a:validator,v:function(a,b){return validate(a,getter(b))}}),validator}function sift(query,array,getter){function filter(b){return validate(validator,b)}isFunction(array)&&(getter=array,array=void 0);var validator=createRootValidator(query,getter);return array?array.filter(filter):filter}var operator={$eq:or(function(a,b){return a(b)}),$ne:and(function(a,b){return!a(b)}),$or:function(a,b){for(var i=0,n=a.length;i<n;i++)if(validate(get(a,i),b))return!0;return!1},$gt:or(function(a,b){return sift.compare(comparable(b),a)>0}),$gte:or(function(a,b){return sift.compare(comparable(b),a)>=0}),$lt:or(function(a,b){return sift.compare(comparable(b),a)<0}),$lte:or(function(a,b){return sift.compare(comparable(b),a)<=0}),$mod:or(function(a,b){return b%a[0]==a[1]}),$in:function(a,b){if(!(b instanceof Array))return!!~a.indexOf(comparable(b));for(var i=b.length;i--;)if(~a.indexOf(comparable(get(b,i))))return!0;return!1},$nin:function(a,b){return!operator.$in(a,b)},$not:function(a,b){return!validate(a,b)},$type:function(a,b){return void 0!=b&&(b instanceof a||b.constructor==a)},$all:function(a,b){b||(b=[]);for(var i=a.length;i--;)if(!~comparable(b).indexOf(get(a,i)))return!1;return!0},$size:function(a,b){return!!b&&a===b.length},$nor:function(a,b){for(var i=0,n=a.length;i<n;i++)if(validate(get(a,i),b))return!1;return!0},$and:function(a,b){for(var i=0,n=a.length;i<n;i++)if(!validate(get(a,i),b))return!1;return!0},$regex:or(function(a,b){return"string"==typeof b&&a.test(b)}),$where:function(a,b){return a.call(b,b)},$elemMatch:function(a,b){return isArray(b)?!!~search(b,a):validate(a,b)},$exists:function(a,b){return void 0!=b===a}},prepare={$eq:function(a){return a instanceof RegExp?function(b){return"string"==typeof b&&a.test(b)}:a instanceof Function?a:isArray(a)&&!a.length?function(b){return isArray(b)&&!b.length}:null===a?function(b){return null==b}:function(b){return 0===sift.compare(comparable(b),a)}},$ne:function(a){return prepare.$eq(a)},$and:function(a){return a.map(parse)},$or:function(a){return a.map(parse)},$nor:function(a){return a.map(parse)},$not:function(a){return parse(a)},$regex:function(a,query){return new RegExp(a,query.$options)},$where:function(a){return"string"==typeof a?new Function("obj","return "+a):a},$elemMatch:function(a){return parse(a)},$exists:function(a){return!!a}};sift.use=function(plugin){if(isFunction(plugin))return plugin(sift);for(var key in plugin)36===key.charCodeAt(0)&&(operator[key]=plugin[key])},sift.indexOf=function(query,array,getter){return search(array,createRootValidator(query,getter))},sift.compare=function(a,b){if(a===b)return 0;if(typeof a==typeof b){if(a>b)return 1;if(a<b)return-1}},"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=sift),"undefined"!=typeof window&&(window.sift=sift)}()},function(module,exports,__webpack_require__){var baseIsRegExp=__webpack_require__(424),baseUnary=__webpack_require__(104),nodeUtil=__webpack_require__(105),nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;module.exports=isRegExp},function(module,exports,__webpack_require__){function baseIsRegExp(value){return isObject(value)&&objectToString.call(value)==regexpTag}var isObject=__webpack_require__(31),regexpTag="[object RegExp]",objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=baseIsRegExp},function(module,exports,__webpack_require__){function findKey(object,predicate){return baseFindKey(object,baseIteratee(predicate,3),baseForOwn)}var baseFindKey=__webpack_require__(426),baseForOwn=__webpack_require__(21),baseIteratee=__webpack_require__(41);module.exports=findKey},function(module,exports){function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}module.exports=baseFindKey},function(module,exports,__webpack_require__){function result(object,path,defaultValue){path=isKey(path,object)?[path]:castPath(path);var index=-1,length=path.length;for(length||(object=void 0,length=1);++index<length;){var value=null==object?void 0:object[toKey(path[index])];void 0===value&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object}var castPath=__webpack_require__(113),isFunction=__webpack_require__(30),isKey=__webpack_require__(120),toKey=__webpack_require__(121);module.exports=result},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncManager=exports.SyncOperation=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_request2=__webpack_require__(11),_errors=__webpack_require__(14),_client=__webpack_require__(161),_query=__webpack_require__(421),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_map=__webpack_require__(350),_map2=_interopRequireDefault(_map),_result=__webpack_require__(427),_result2=_interopRequireDefault(_result),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),appdataNamespace=process&&process.env&&process.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",syncCollectionName=process&&process.env&&process.env.KINVEY_SYNC_COLLECTION_NAME||"kinvey_sync"||"kinvey_sync",idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",SyncOperation={Create:_request2.RequestMethod.POST,Update:_request2.RequestMethod.PUT,Delete:_request2.RequestMethod.DELETE};Object.freeze(SyncOperation),exports.SyncOperation=SyncOperation;exports.SyncManager=function(){function SyncManager(collection){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(_classCallCheck(this,SyncManager),!collection)throw new _errors.SyncError("A collection is required.");if(!(0,_isString2.default)(collection))throw new _errors.SyncError("Collection must be a string.");this.collection=collection,this.client=options.client||_client.Client.sharedInstance()}return _createClass(SyncManager,[{key:"find",value:function(){function find(_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var syncEntities,request,query=arguments.length<=0||void 0===arguments[0]?new _query.Query:arguments[0],options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return syncEntities=[],query instanceof _query.Query||(query=new _query.Query((0,_result2.default)(query,"toJSON",query))),query.equalTo("collection",this.collection),request=new _request2.CacheRequest({method:_request2.RequestMethod.GET,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname}),properties:options.properties,query:query,timeout:options.timeout,client:this.client}),_context.next=6,request.execute().then(function(response){return response.data});case 6:return syncEntities=_context.sent,_context.abrupt("return",syncEntities);case 8:case"end":return _context.stop()}},_callee,this)}));return find}()},{key:"count",value:function(){function count(_x6,_x7){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(){var syncEntities,query=arguments.length<=0||void 0===arguments[0]?new _query.Query:arguments[0],options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.find(query,options);case 2:return syncEntities=_context2.sent,_context2.abrupt("return",syncEntities.length);case 4:case"end":return _context2.stop()}},_callee2,this)}));return count}()},{key:"addCreateOperation",value:function(){function addCreateOperation(_x10,_x11){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(entities){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",this.addOperation(SyncOperation.Create,entities,options));case 1:case"end":return _context3.stop()}},_callee3,this)}));return addCreateOperation}()},{key:"addUpdateOperation",value:function(){function addUpdateOperation(_x13,_x14){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(entities){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",this.addOperation(SyncOperation.Update,entities,options));case 1:case"end":return _context4.stop()}},_callee4,this)}));return addUpdateOperation}()},{key:"addDeleteOperation",value:function(){function addDeleteOperation(_x16,_x17){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(entities){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",this.addOperation(SyncOperation.Delete,entities,options));case 1:case"end":return _context5.stop()}},_callee5,this)}));return addDeleteOperation}()},{key:"addOperation",value:function(){function addOperation(_x19,_x20,_x21){return _ref6.apply(this,arguments)}var _ref6=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee7(){var singular,operation=arguments.length<=0||void 0===arguments[0]?SyncOperation.Create:arguments[0],_this=this,entities=arguments[1],options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return _regeneratorRuntime2.default.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return singular=!1,(0,_isArray2.default)(entities)||(singular=!0,entities=[entities]),_context7.next=4,_promise2.default.all((0,_map2.default)(entities,function(){var _ref7=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee6(entity){var id,query,findRequest,response,syncEntities,syncEntity,request;return _regeneratorRuntime2.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(entity){_context6.next=2;break}return _context6.abrupt("return",null);case 2:if(id=entity[idAttribute]){_context6.next=5;break}throw new _errors.SyncError("An entity is missing an _id. All entities must have an _id in order to be added to the sync table.",entity);case 5:return query=(new _query.Query).equalTo("entityId",id),findRequest=new _request2.CacheRequest({method:_request2.RequestMethod.GET,url:_url2.default.format({protocol:_this.client.protocol,host:_this.client.host,pathname:_this.pathname}),properties:options.properties,query:query,timeout:options.timeout}),_context6.next=9,findRequest.execute();case 9:return response=_context6.sent,syncEntities=response.data,syncEntity=1===syncEntities.length?syncEntities[0]:{collection:_this.collection,state:{},entityId:id},syncEntity.state=syncEntity.state||{},syncEntity.state.method=operation,request=new _request2.CacheRequest({method:_request2.RequestMethod.PUT,url:_url2.default.format({protocol:_this.client.protocol,host:_this.client.host,pathname:_this.pathname}),properties:options.properties,body:syncEntity,timeout:options.timeout}),_context6.abrupt("return",request.execute());case 16:case"end":return _context6.stop()}},_callee6,_this)}));return function(_x24){return _ref7.apply(this,arguments)}}()));case 4:return _context7.abrupt("return",singular?entities[0]:entities);case 5:case"end":return _context7.stop()}},_callee7,this)}));return addOperation}()},{key:"pull",value:function(){function pull(_x25,_x26){return _ref8.apply(this,arguments)}var _ref8=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee8(query){var count,config,request,response,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!query||query instanceof _query.Query){_context8.next=2;break}throw new _errors.SyncError("Invalid query. It must be an instance of the Query class.");case 2:return _context8.next=4,this.count();case 4:if(count=_context8.sent,!(count>0)){_context8.next=11;break}return _context8.next=8,this.push();case 8:return _context8.next=10,this.count();case 10:count=_context8.sent;case 11:if(!(count>0)){_context8.next=13;break}throw new _errors.SyncError("Unable to pull data from the network."+(" There are "+count+" entities that need")+" to be synced before data is loaded from the network.");case 13:return config={method:_request2.RequestMethod.GET,authType:_request2.AuthType.Default,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.backendPathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout,client:this.client},request=new _request2.KinveyRequest(config),options.useDeltaFetch===!0&&(request=new _request2.DeltaFetchRequest(config)),_context8.next=18,request.execute();case 18:return response=_context8.sent,_context8.abrupt("return",response.data);case 20:case"end":return _context8.stop()}},_callee8,this)}));return pull}()},{key:"push",value:function(){function push(_x28,_x29){return _ref9.apply(this,arguments)}var _ref9=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee14(query){var batchSize,i,syncEntities,_ret,_this2=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return batchSize=100,i=0,_context14.next=4,this.find(query);case 4:if(syncEntities=_context14.sent,!(syncEntities.length>0)){_context14.next=9;break}if(_ret=function(){var batchSync=function(){var _ref10=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee13(syncResults){var promise;return _regeneratorRuntime2.default.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return promise=new _promise2.default(function(){var _ref11=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee12(resolve){var batch,results;return _regeneratorRuntime2.default.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return batch=syncEntities.slice(i,i+batchSize),i+=batchSize,_context12.next=4,_promise2.default.all((0,_map2.default)(batch,function(syncEntity){var entityId=syncEntity.entityId,state=syncEntity.state,method=state.method;if(method===_request2.RequestMethod.DELETE){var request=new _request2.KinveyRequest({method:_request2.RequestMethod.DELETE,authType:_request2.AuthType.Default,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout,client:_this2.client});return request.execute().then(function(){var request=new _request2.CacheRequest({method:_request2.RequestMethod.DELETE,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname+"/"+syncEntity[idAttribute]}),properties:options.properties,timeout:options.timeout});return request.execute()}).then(function(){var result={_id:entityId};return result}).catch(function(){var _ref12=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee9(error){var getNetworkRequest,originalEntity,putCacheRequest,deleteSyncRequest;return _regeneratorRuntime2.default.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!(error instanceof _errors.InsufficientCredentialsError)){_context9.next=16;break}return _context9.prev=1,getNetworkRequest=new _request2.KinveyRequest({method:_request2.RequestMethod.GET,authType:_request2.AuthType.Default,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout,client:_this2.client}),_context9.next=5,getNetworkRequest.execute().then(function(response){return response.data});case 5:return originalEntity=_context9.sent,putCacheRequest=new _request2.CacheRequest({method:_request2.RequestMethod.PUT,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout,body:originalEntity}),_context9.next=9,putCacheRequest.execute();case 9:return deleteSyncRequest=new _request2.CacheRequest({method:_request2.RequestMethod.DELETE,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname+"/"+syncEntity[idAttribute]}),properties:options.properties,timeout:options.timeout}),_context9.next=12,deleteSyncRequest.execute();case 12:_context9.next=16;break;case 14:_context9.prev=14,_context9.t0=_context9.catch(1);case 16:return _context9.abrupt("return",{_id:entityId,error:error});case 17:case"end":return _context9.stop()}},_callee9,_this2,[[1,14]])}));return function(_x33){return _ref12.apply(this,arguments)}}())}if(method===_request2.RequestMethod.POST||method===_request2.RequestMethod.PUT){var _request=new _request2.CacheRequest({method:_request2.RequestMethod.GET,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout});return _request.execute().then(function(response){var entity=response.data,request=new _request2.KinveyRequest({method:method,authType:_request2.AuthType.Default,url:_url2.default.format({protocol:_this2.client.protocol,
host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout,body:entity,client:_this2.client});return method===_request2.RequestMethod.POST&&(delete entity[idAttribute],request.method=_request2.RequestMethod.POST,request.url=_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname}),request.body=entity),request.execute().then(function(response){return response.data}).then(function(){var _ref13=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee10(entity){var deleteRequest,putCacheRequest,deleteCacheRequest;return _regeneratorRuntime2.default.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return deleteRequest=new _request2.CacheRequest({method:_request2.RequestMethod.DELETE,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname+"/"+syncEntity[idAttribute]}),properties:options.properties,timeout:options.timeout}),_context10.next=3,deleteRequest.execute();case 3:return putCacheRequest=new _request2.CacheRequest({method:_request2.RequestMethod.PUT,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entity[idAttribute]}),properties:options.properties,timeout:options.timeout,body:entity}),_context10.next=6,putCacheRequest.execute().then(function(response){return response.data});case 6:if(entity=_context10.sent,method!==_request2.RequestMethod.POST){_context10.next=11;break}return deleteCacheRequest=new _request2.CacheRequest({method:_request2.RequestMethod.DELETE,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout}),_context10.next=11,deleteCacheRequest.execute();case 11:return _context10.abrupt("return",{_id:entityId,entity:entity});case 12:case"end":return _context10.stop()}},_callee10,_this2)}));return function(_x34){return _ref13.apply(this,arguments)}}()).catch(function(){var _ref14=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee11(error){var getNetworkRequest,originalEntity,putCacheRequest,deleteSyncRequest;return _regeneratorRuntime2.default.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(!(error instanceof _errors.InsufficientCredentialsError)){_context11.next=17;break}if(_context11.prev=1,method===_request2.RequestMethod.POST){_context11.next=13;break}return getNetworkRequest=new _request2.KinveyRequest({method:_request2.RequestMethod.GET,authType:_request2.AuthType.Default,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout,client:_this2.client}),_context11.next=6,getNetworkRequest.execute().then(function(response){return response.data});case 6:return originalEntity=_context11.sent,putCacheRequest=new _request2.CacheRequest({method:_request2.RequestMethod.PUT,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.backendPathname+"/"+entityId}),properties:options.properties,timeout:options.timeout,body:originalEntity}),_context11.next=10,putCacheRequest.execute();case 10:return deleteSyncRequest=new _request2.CacheRequest({method:_request2.RequestMethod.DELETE,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname+"/"+syncEntity[idAttribute]}),properties:options.properties,timeout:options.timeout}),_context11.next=13,deleteSyncRequest.execute();case 13:_context11.next=17;break;case 15:_context11.prev=15,_context11.t0=_context11.catch(1);case 17:return _context11.abrupt("return",{_id:entityId,entity:entity,error:error});case 18:case"end":return _context11.stop()}},_callee11,_this2,[[1,15]])}));return function(_x35){return _ref14.apply(this,arguments)}}())}).catch(function(error){return{_id:entityId,entity:void 0,error:error}})}return{_id:entityId,entity:void 0,error:new _errors.SyncError("Unable to sync the entity since the method was not recognized.",syncEntity)}}));case 4:if(results=_context12.sent,syncResults=syncResults.concat(results),!(i<syncEntities.length)){_context12.next=8;break}return _context12.abrupt("return",resolve(batchSync(syncResults)));case 8:return _context12.abrupt("return",resolve(syncResults));case 9:case"end":return _context12.stop()}},_callee12,_this2)}));return function(_x32){return _ref11.apply(this,arguments)}}()),_context13.abrupt("return",promise);case 2:case"end":return _context13.stop()}},_callee13,_this2)}));return function(_x31){return _ref10.apply(this,arguments)}}();return{v:batchSync([])}}(),"object"!==("undefined"==typeof _ret?"undefined":_typeof(_ret))){_context14.next=9;break}return _context14.abrupt("return",_ret.v);case 9:return _context14.abrupt("return",[]);case 10:case"end":return _context14.stop()}},_callee14,this)}));return push}()},{key:"sync",value:function(){function sync(_x36,_x37){return _ref15.apply(this,arguments)}var _ref15=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee15(query){var push,pull,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.next=2,this.push(null,options);case 2:return push=_context15.sent,_context15.next=5,this.pull(query,options);case 5:return pull=_context15.sent,_context15.abrupt("return",{push:push,pull:pull});case 7:case"end":return _context15.stop()}},_callee15,this)}));return sync}()},{key:"clear",value:function(){function clear(_x39,_x40){return _ref16.apply(this,arguments)}var _ref16=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee16(){var fetchRequest,fetchResponse,entities,removeRequest,removeResponse,query=arguments.length<=0||void 0===arguments[0]?new _query.Query:arguments[0],options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return query instanceof _query.Query||(query=new _query.Query(query)),query.equalTo("collection",this.collection),fetchRequest=new _request2.CacheRequest({method:_request2.RequestMethod.GET,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname}),properties:options.properties,query:query,timeout:options.timeout}),_context16.next=5,fetchRequest.execute();case 5:return fetchResponse=_context16.sent,entities=fetchResponse.data,removeRequest=new _request2.CacheRequest({method:_request2.RequestMethod.DELETE,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname}),properties:options.properties,body:entities,timeout:options.timeout}),_context16.next=10,removeRequest.execute();case 10:return removeResponse=_context16.sent,_context16.abrupt("return",removeResponse.data);case 12:case"end":return _context16.stop()}},_callee16,this)}));return clear}()},{key:"pathname",get:function(){return"/"+appdataNamespace+"/"+this.client.appKey+"/"+syncCollectionName}},{key:"backendPathname",get:function(){return"/"+appdataNamespace+"/"+this.client.appKey+"/"+this.collection}}]),SyncManager}()}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _acl=__webpack_require__(430);Object.keys(_acl).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _acl[key]}})});var _metadata=__webpack_require__(432);Object.keys(_metadata).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _metadata[key]}})});var _user=__webpack_require__(433);Object.keys(_user).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _user[key]}})})},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Acl=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(14),_clone=__webpack_require__(431),_clone2=_interopRequireDefault(_clone),_isPlainObject=__webpack_require__(130),_isPlainObject2=_interopRequireDefault(_isPlainObject),aclAttribute=process&&process.env&&process.env.KINVEY_ACL_ATTRIBUTE||"_acl"||"_acl";exports.Acl=function(){function Acl(){var entity=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(_classCallCheck(this,Acl),!(0,_isPlainObject2.default)(entity))throw new _errors.KinveyError("entity argument must be an object");this.acl=(0,_clone2.default)(entity[aclAttribute])}return _createClass(Acl,[{key:"addReader",value:function(user){var r=this.acl.r||[];return r.indexOf(user)===-1&&r.push(user),this.acl.r=r,this}},{key:"addReaderGroup",value:function(group){var groups=this.acl.groups||{},r=groups.r||[];return r.indexOf(group)===-1&&r.push(group),groups.r=r,this.acl.groups=groups,this}},{key:"addWriter",value:function(user){var w=this.acl.w||[];return w.indexOf(user)===-1&&w.push(user),this.acl.w=w,this}},{key:"addWriterGroup",value:function(group){var groups=this.acl.groups||{},w=groups.w||[];return w.indexOf(group)===-1&&w.push(group),groups.w=w,this.acl.groups=groups,this}},{key:"isGloballyReadable",value:function(){return this.acl.gr||!1}},{key:"isGloballyWritable",value:function(){return this.acl.gw||!1}},{key:"removeReader",value:function(user){var r=this.acl.r||[],pos=r.indexOf(user);return pos!==-1&&r.splice(pos,1),this.acl.r=r,this}},{key:"removeReaderGroup",value:function(group){var groups=this.acl.groups||{},r=groups.r||[],pos=r.indexOf(group);return pos!==-1&&r.splice(pos,1),groups.r=r,this.acl.groups=groups,this}},{key:"removeWriter",value:function(user){var w=this.acl.w||[],pos=w.indexOf(user);return pos!==-1&&w.splice(pos,1),this.acl.w=w,this}},{key:"removeWriterGroup",value:function(group){var groups=this.acl.groups||{},w=groups.w||[],pos=w.indexOf(group);return pos!==-1&&w.splice(pos,1),groups.w=w,this.acl.groups=groups,this}},{key:"toPlainObject",value:function(){return this.acl}},{key:"toJSON",value:function(){return this.toPlainObject()}},{key:"creator",get:function(){return this.acl.creator}},{key:"readers",get:function(){return this.acl.r||[]}},{key:"writers",get:function(){return this.acl.w||[]}},{key:"readerGroups",get:function(){return this.acl.groups?this.acl.groups.r:[]}},{key:"writerGroups",get:function(){return this.acl.groups?this.acl.groups.w:[]}},{key:"globallyReadable",set:function(gr){this.acl.gr=gr||!1}},{key:"globallyWritable",set:function(gw){this.acl.gw=gw||!1}}]),Acl}()}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){function clone(value){return baseClone(value,!1,!0)}var baseClone=__webpack_require__(252);module.exports=clone},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Metadata=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_errors=__webpack_require__(14),_clone=__webpack_require__(431),_clone2=_interopRequireDefault(_clone),_isPlainObject=__webpack_require__(130),_isPlainObject2=_interopRequireDefault(_isPlainObject),kmdAttribute=process&&process.env&&process.env.KINVEY_KMD_ATTRIBUTE||"_kmd"||"_kmd";exports.Metadata=function(){function Metadata(){var entity=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(_classCallCheck(this,Metadata),!(0,_isPlainObject2.default)(entity))throw new _errors.KinveyError("entity argument must be an object");this.kmd=(0,_clone2.default)(entity[kmdAttribute]||{})}return _createClass(Metadata,[{key:"isLocal",value:function(){return!!this.kmd.local}},{key:"toPlainObject",value:function(){return this.kmd}},{key:"toJSON",value:function(){return this.toPlainObject()}},{key:"createdAt",get:function(){if(this.kmd.ect)return Date.parse(this.kmd.ect)}},{key:"ect",get:function(){return this.createdAt}},{key:"emailVerification",get:function(){return this.kmd.emailVerification.status}},{key:"lastModified",get:function(){if(this.kmd.lmt)return Date.parse(this.kmd.lmt)}},{key:"lmt",get:function(){return this.lastModified}},{key:"authtoken",get:function(){return this.kmd.authtoken},set:function(authtoken){this.kmd.authtoken=authtoken}}]),Metadata}()}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.User=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_client=__webpack_require__(161),_acl=__webpack_require__(430),_metadata=__webpack_require__(432),_request=__webpack_require__(11),_errors=__webpack_require__(14),_datastore=__webpack_require__(7),_social=__webpack_require__(410),_utils=__webpack_require__(162),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_result=__webpack_require__(427),_result2=_interopRequireDefault(_result),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isObject=__webpack_require__(31),_isObject2=_interopRequireDefault(_isObject),_isEmpty=__webpack_require__(358),_isEmpty2=_interopRequireDefault(_isEmpty),usersNamespace=process&&process.env&&process.env.KINVEY_USERS_NAMESPACE||"user"||"user",rpcNamespace=process&&process.env&&process.env.KINVEY_RPC_NAMESPACE||"rpc"||"rpc",idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",kmdAttribute=process&&process.env&&process.env.KINVEY_KMD_ATTRIBUTE||"_kmd"||"_kmd",socialIdentityAttribute=process&&process.env&&process.env.KINVEY_SOCIAL_IDENTITY_ATTRIBUTE||"_socialIdentity"||"_socialIdentity",usernameAttribute=process&&process.env&&process.env.KINVEY_USERNAME_ATTRIBUTE||"username"||"username",emailAttribute=process&&process.env&&process.env.KINVEY_EMAIL_ATTRIBUTE||"email"||"email";exports.User=function(){function User(){var data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,User),this.data=data,this.client=options.client||_client.Client.sharedInstance()}return _createClass(User,[{key:"isActive",value:function(){var activeUser=User.getActiveUser(this.client);return!(!activeUser||activeUser[idAttribute]!==this[idAttribute])}},{key:"isEmailVerified",value:function(){var status=this.metadata.emailVerification;return"confirmed"===status}},{key:"login",value:function(){function login(_x3,_x4,_x5){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(username,password){var isActiveUser,activeUser,credentials,request,_ref2,data,options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(isActiveUser=this.isActive(),!isActiveUser){_context.next=3;break}throw new _errors.ActiveUserError("This user is already the active user.");case 3:if(activeUser=User.getActiveUser(this.client),!activeUser){_context.next=6;break}throw new _errors.ActiveUserError("An active user already exists. Please logout the active user before you login.");case 6:if(credentials=username,(0,_isObject2.default)(credentials)?options=password||{}:credentials={username:username,password:password},credentials[socialIdentityAttribute]||(credentials.username&&(credentials.username=String(credentials.username).trim()),credentials.password&&(credentials.password=String(credentials.password).trim())),credentials.username&&""!==credentials.username&&credentials.password&&""!==credentials.password||credentials[socialIdentityAttribute]){_context.next=11;break}throw new _errors.KinveyError("Username and/or password missing. Please provide both a username and password to login.");case 11:return request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.App,url:_url2.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/login"}),body:credentials,properties:options.properties,timeout:options.timeout,client:this.client}),_context.next=14,request.execute();case 14:return _ref2=_context.sent,data=_ref2.data,this.data=data,(0,_utils.setActiveUser)(this.client,this.data),_context.abrupt("return",this);case 19:case"end":return _context.stop()}},_callee,this)}));return login}()},{key:"loginWithMIC",value:function(){function loginWithMIC(_x7,_x8,_x9){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(redirectUri,authorizationGrant){var isActiveUser,activeUser,mic,session,options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(isActiveUser=this.isActive(),!isActiveUser){_context2.next=3;break}throw new _errors.ActiveUserError("This user is already the active user.");case 3:if(activeUser=User.getActiveUser(this.client),!activeUser){_context2.next=6;break}throw new _errors.ActiveUserError("An active user already exists. Please logout the active user before you login.");case 6:return mic=new _social.MobileIdentityConnect({client:this.client}),_context2.next=9,mic.login(redirectUri,authorizationGrant,options);case 9:return session=_context2.sent,_context2.abrupt("return",this.connectIdentity(_social.MobileIdentityConnect.identity,session,options));case 11:case"end":return _context2.stop()}},_callee2,this)}));return loginWithMIC}()},{key:"connectIdentity",value:function(){function connectIdentity(_x11,_x12,_x13){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(identity,session,options){var data,socialIdentity,isActive;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(data=this.data,socialIdentity=data[socialIdentityAttribute]||{},socialIdentity[identity]=session,data[socialIdentityAttribute]=socialIdentity,this.data=data,_context3.prev=5,isActive=this.isActive(),!isActive){_context3.next=9;break}return _context3.abrupt("return",this.update(data,options));case 9:return _context3.next=11,this.login(data,options);case 11:return(0,_utils.setIdentitySession)(this.client,identity,session),_context3.abrupt("return",this);case 15:if(_context3.prev=15,_context3.t0=_context3.catch(5),!(_context3.t0 instanceof _errors.NotFoundError)){_context3.next=21;break}return _context3.next=20,this.signup(data,options);case 20:return _context3.abrupt("return",this.connectIdentity(identity,session,options));case 21:throw _context3.t0;case 22:case"end":return _context3.stop()}},_callee3,this,[[5,15]])}));return connectIdentity}()},{key:"connectWithIdentity",value:function(){function connectWithIdentity(_x14,_x15,_x16){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(identity,session,options){return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",this.connectIdentity(identity,session,options));case 1:case"end":return _context4.stop()}},_callee4,this)}));return connectWithIdentity}()},{key:"connectFacebook",value:function(){function connectFacebook(_x17,_x18){return _ref6.apply(this,arguments)}var _ref6=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(clientId,options){var facebook,session;return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return facebook=new _social.Facebook({client:this.client}),_context5.next=3,facebook.login(clientId,options);case 3:return session=_context5.sent,_context5.abrupt("return",this.connectIdentity(_social.Facebook.identity,session,options));case 5:case"end":return _context5.stop()}},_callee5,this)}));return connectFacebook}()},{key:"disconnectFacebook",value:function(){function disconnectFacebook(_x19){return _ref7.apply(this,arguments)}var _ref7=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee6(options){return _regeneratorRuntime2.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",this.disconnectIdentity(_social.Facebook.identity,options));case 1:case"end":return _context6.stop()}},_callee6,this)}));return disconnectFacebook}()},{key:"connectGoogle",value:function(){function connectGoogle(_x20,_x21){return _ref8.apply(this,arguments)}var _ref8=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee7(clientId,options){var google,session;return _regeneratorRuntime2.default.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return google=new _social.Google({client:this.client}),_context7.next=3,google.login(clientId,options);case 3:return session=_context7.sent,_context7.abrupt("return",this.connectIdentity(_social.Google.identity,session,options));case 5:case"end":return _context7.stop()}},_callee7,this)}));return connectGoogle}()},{key:"disconnectGoogle",value:function(){function disconnectGoogle(_x22){return _ref9.apply(this,arguments)}var _ref9=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee8(options){return _regeneratorRuntime2.default.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.abrupt("return",this.disconnectIdentity(_social.Google.identity,options));case 1:case"end":return _context8.stop()}},_callee8,this)}));return disconnectGoogle}()},{key:"connectLinkedIn",value:function(){function connectLinkedIn(_x23,_x24){return _ref10.apply(this,arguments)}var _ref10=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee9(clientId,options){var linkedIn,session;return _regeneratorRuntime2.default.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return linkedIn=new _social.LinkedIn({client:this.client}),_context9.next=3,linkedIn.login(clientId,options);case 3:return session=_context9.sent,_context9.abrupt("return",this.connectIdentity(_social.LinkedIn.identity,session,options));case 5:case"end":return _context9.stop()}},_callee9,this)}));return connectLinkedIn}()},{key:"disconnectLinkedIn",value:function(){function disconnectLinkedIn(_x25){return _ref11.apply(this,arguments)}var _ref11=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee10(options){return _regeneratorRuntime2.default.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.abrupt("return",this.disconnectIdentity(_social.LinkedIn.identity,options));case 1:case"end":return _context10.stop()}},_callee10,this)}));return disconnectLinkedIn}()},{key:"disconnectIdentity",value:function(){function disconnectIdentity(_x26,_x27){return _ref12.apply(this,arguments)}var _ref12=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee11(identity,options){var data,socialIdentity;return _regeneratorRuntime2.default.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(_context11.prev=0,identity!==_social.Facebook.identity){_context11.next=6;break}return _context11.next=4,_social.Facebook.logout(this,options);case 4:_context11.next=19;break;case 6:if(identity!==_social.Google.identity){_context11.next=11;break}return _context11.next=9,_social.Google.logout(this,options);case 9:_context11.next=19;break;case 11:if(identity!==_social.LinkedIn.identity){_context11.next=16;break}return _context11.next=14,_social.LinkedIn.logout(this,options);case 14:_context11.next=19;break;case 16:if(identity!==_social.MobileIdentityConnect.identity){_context11.next=19;break}return _context11.next=19,_social.MobileIdentityConnect.logout(this,options);case 19:(0,_utils.setIdentitySession)(this.client,identity,null),_context11.next=25;break;case 22:_context11.prev=22,_context11.t0=_context11.catch(0),_utils.Log.error(_context11.t0);case 25:if(data=this.data,socialIdentity=data[socialIdentityAttribute]||{},delete socialIdentity[identity],data[socialIdentityAttribute]=socialIdentity,this.data=data,this[idAttribute]){_context11.next=32;break}return _context11.abrupt("return",this);case 32:return _context11.next=34,this.update(data,options);case 34:return _context11.abrupt("return",this);case 35:case"end":return _context11.stop()}},_callee11,this,[[0,22]])}));return disconnectIdentity}()},{key:"logout",value:function(){function logout(_x28){return _ref13.apply(this,arguments)}var _ref13=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee12(){var request,identities,promises,_this=this,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _regeneratorRuntime2.default.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.prev=0,request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.Session,url:_url2.default.format({protocol:this.client.apiProtocol,host:this.client.apiHost,pathname:this.pathname+"/_logout"}),properties:options.properties,timeout:options.timeout,client:this.client}),_context12.next=4,request.execute();case 4:_context12.next=9;break;case 6:_context12.prev=6,_context12.t0=_context12.catch(0),_utils.Log.error(_context12.t0);case 9:return _context12.prev=9,identities=Object.keys(this._socialIdentity||{}),promises=identities.map(function(identity){return _this.disconnectIdentity(identity,options)}),_context12.next=14,_promise2.default.all(promises);case 14:_context12.next=19;break;case 16:_context12.prev=16,_context12.t1=_context12.catch(9),_utils.Log.error(_context12.t1);case 19:return(0,_utils.setActiveUser)(this.client,null),_context12.next=22,_datastore.DataStore.clearCache({client:this.client});case 22:return _context12.abrupt("return",this);case 23:case"end":return _context12.stop()}},_callee12,this,[[0,6],[9,16]])}));return logout}()},{key:"signup",value:function(){function signup(_x30,_x31){return _ref14.apply(this,arguments)}var _ref14=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee13(data){var activeUser,request,response,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:if(options=(0,_assign2.default)({state:!0},options),options.state!==!0){_context13.next=5;break}if(activeUser=User.getActiveUser(this.client),!activeUser){_context13.next=5;break}throw new _errors.ActiveUserError("An active user already exists. Please logout the active user before you login.");case 5:return data instanceof User&&(data=data.data),request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.App,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname}),body:(0,_isEmpty2.default)(data)?null:data,properties:options.properties,timeout:options.timeout,client:this.client}),_context13.next=9,request.execute();case 9:return response=_context13.sent,this.data=response.data,options.state===!0&&(0,_utils.setActiveUser)(this.client,this.data),_context13.abrupt("return",this);case 13:case"end":return _context13.stop()}},_callee13,this)}));return signup}()},{key:"signupWithIdentity",value:function(identity,session,options){var data={};return data[socialIdentityAttribute]={},data[socialIdentityAttribute][identity]=session,this.signup(data,options)}},{key:"update",value:function(){function update(_x33,_x34){return _ref15.apply(this,arguments)}var _ref15=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee14(data,options){var userStore;return _regeneratorRuntime2.default.wrap(function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return data=(0,_assign2.default)(this.data,data),userStore=new _datastore.UserStore,_context14.next=4,userStore.update(data,options);case 4:return this.isActive()&&(0,_utils.setActiveUser)(this.client,this.data),_context14.abrupt("return",this);case 6:case"end":return _context14.stop()}},_callee14,this)}));return update}()},{key:"me",value:function(){function me(_x35){return _ref16.apply(this,arguments)}var _ref16=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee15(){var request,_ref17,data,activeUser,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _regeneratorRuntime2.default.wrap(function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return request=new _request.KinveyRequest({method:_request.RequestMethod.GET,authType:_request.AuthType.Session,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname+"/_me"}),properties:options.properties,timeout:options.timeout}),_context15.next=3,request.execute();case 3:return _ref17=_context15.sent,data=_ref17.data,this.data=data,this.authtoken||(activeUser=User.getActiveUser(this.client),activeUser&&(this.authtoken=activeUser.authtoken)),
(0,_utils.setActiveUser)(this.client,this.data),_context15.abrupt("return",this);case 9:case"end":return _context15.stop()}},_callee15,this)}));return me}()},{key:"verifyEmail",value:function(){function verifyEmail(_x37){return _ref18.apply(this,arguments)}var _ref18=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee16(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _regeneratorRuntime2.default.wrap(function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return options.client=this.client,_context16.abrupt("return",User.verifyEmail(this.username,options));case 2:case"end":return _context16.stop()}},_callee16,this)}));return verifyEmail}()},{key:"forgotUsername",value:function(){function forgotUsername(_x39){return _ref19.apply(this,arguments)}var _ref19=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee17(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _regeneratorRuntime2.default.wrap(function(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return options.client=this.client,_context17.abrupt("return",User.forgotUsername(this.email,options));case 2:case"end":return _context17.stop()}},_callee17,this)}));return forgotUsername}()},{key:"resetPassword",value:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return options.client=this.client,User.resetPassword(this.username,options)}},{key:"_id",get:function(){return this.data[idAttribute]}},{key:"_acl",get:function(){return new _acl.Acl(this.data)}},{key:"metadata",get:function(){return new _metadata.Metadata(this.data)},set:function(metadata){this.data[kmdAttribute]=(0,_result2.default)(metadata,"toPlainObjecta",metadata)}},{key:"_kmd",get:function(){return this.metadata},set:function(kmd){this.metadata=kmd}},{key:"_socialIdentity",get:function(){return this.data[socialIdentityAttribute]}},{key:"authtoken",get:function(){return this.metadata.authtoken},set:function(authtoken){var metadata=this.metadata;metadata.authtoken=authtoken,this.metadata=metadata}},{key:"username",get:function(){return this.data[usernameAttribute]}},{key:"email",get:function(){return this.data[emailAttribute]}},{key:"pathname",get:function(){return"/"+usersNamespace+"/"+this.client.appKey}}],[{key:"getActiveUser",value:function(){var client=arguments.length<=0||void 0===arguments[0]?_client.Client.sharedInstance():arguments[0],data=client.activeUser,user=null;return data&&(user=new this(data),user.client=client),user}},{key:"login",value:function(username,password,options){var user=new this({},options);return user.login(username,password,options)}},{key:"loginWithMIC",value:function(redirectUri,authorizationGrant){var options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],user=new this({},options);return user.loginWithMIC(redirectUri,authorizationGrant,options)}},{key:"connectIdentity",value:function(identity,session,options){var user=new this({},options);return user.connectIdentity(identity,session,options)}},{key:"connectFacebook",value:function(clientId,options){var user=new this({},options);return user.connectFacebook(clientId,options)}},{key:"connectGoogle",value:function(clientId,options){var user=new this({},options);return user.connectGoogle(clientId,options)}},{key:"connectLinkedIn",value:function(clientId,options){var user=new this({},options);return user.connectLinkedIn(clientId,options)}},{key:"logout",value:function(){function logout(_x44){return _ref20.apply(this,arguments)}var _ref20=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee18(){var user,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _regeneratorRuntime2.default.wrap(function(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:if(user=User.getActiveUser(options.client),!user){_context18.next=3;break}return _context18.abrupt("return",user.logout(options));case 3:return _context18.abrupt("return",null);case 4:case"end":return _context18.stop()}},_callee18,this)}));return logout}()},{key:"signup",value:function(data,options){var user=new this({},options);return user.signup(data,options)}},{key:"signupWithIdentity",value:function(identity,session,options){var user=new this({},options);return user.signupWithIdentity(identity,session,options)}},{key:"update",value:function(){function update(_x46,_x47){return _ref21.apply(this,arguments)}var _ref21=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee19(data,options){var user;return _regeneratorRuntime2.default.wrap(function(_context19){for(;;)switch(_context19.prev=_context19.next){case 0:if(user=User.getActiveUser(options.client),!user){_context19.next=3;break}return _context19.abrupt("return",user.update(data,options));case 3:return _context19.abrupt("return",null);case 4:case"end":return _context19.stop()}},_callee19,this)}));return update}()},{key:"me",value:function(){function me(_x48){return _ref22.apply(this,arguments)}var _ref22=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee20(options){var user;return _regeneratorRuntime2.default.wrap(function(_context20){for(;;)switch(_context20.prev=_context20.next){case 0:if(user=User.getActiveUser(options.client),!user){_context20.next=3;break}return _context20.abrupt("return",user.me(options));case 3:return _context20.abrupt("return",null);case 4:case"end":return _context20.stop()}},_callee20,this)}));return me}()},{key:"verifyEmail",value:function(){function verifyEmail(_x49,_x50){return _ref23.apply(this,arguments)}var _ref23=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee21(username){var client,request,_ref24,data,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context21){for(;;)switch(_context21.prev=_context21.next){case 0:if(username){_context21.next=2;break}throw new _errors.KinveyError("A username was not provided.","Please provide a username for the user that you would like to verify their email.");case 2:if((0,_isString2.default)(username)){_context21.next=4;break}throw new _errors.KinveyError("The provided username is not a string.");case 4:return client=options.client||_client.Client.sharedInstance(),request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.App,url:_url2.default.format({protocol:client.protocol,host:client.host,pathname:"/"+rpcNamespace+"/"+client.appKey+"/"+username+"/user-email-verification-initiate"}),properties:options.properties,timeout:options.timeout,client:client}),_context21.next=8,request.execute();case 8:return _ref24=_context21.sent,data=_ref24.data,_context21.abrupt("return",data);case 11:case"end":return _context21.stop()}},_callee21,this)}));return verifyEmail}()},{key:"forgotUsername",value:function(){function forgotUsername(_x52,_x53){return _ref25.apply(this,arguments)}var _ref25=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee22(email){var client,request,_ref26,data,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context22){for(;;)switch(_context22.prev=_context22.next){case 0:if(email){_context22.next=2;break}throw new _errors.KinveyError("An email was not provided.","Please provide an email for the user that you would like to retrieve their username.");case 2:if((0,_isString2.default)(email)){_context22.next=4;break}throw new _errors.KinveyError("The provided email is not a string.");case 4:return client=options.client||_client.Client.sharedInstance(),request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.App,url:_url2.default.format({protocol:client.protocol,host:client.host,pathname:"/"+rpcNamespace+"/"+client.appKey+"/user-forgot-username"}),properties:options.properties,data:{email:email},timeout:options.timeout,client:client}),_context22.next=8,request.execute();case 8:return _ref26=_context22.sent,data=_ref26.data,_context22.abrupt("return",data);case 11:case"end":return _context22.stop()}},_callee22,this)}));return forgotUsername}()},{key:"resetPassword",value:function(){function resetPassword(_x55,_x56){return _ref27.apply(this,arguments)}var _ref27=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee23(username){var client,request,_ref28,data,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context23){for(;;)switch(_context23.prev=_context23.next){case 0:if(username){_context23.next=2;break}throw new _errors.KinveyError("A username was not provided.","Please provide a username for the user that you would like to reset their password.");case 2:if((0,_isString2.default)(username)){_context23.next=4;break}throw new _errors.KinveyError("The provided username is not a string.");case 4:return client=options.client||_client.Client.sharedInstance(),request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.App,url:_url2.default.format({protocol:client.protocol,host:client.host,pathname:"/"+rpcNamespace+"/"+client.appKey+"/"+username+"/user-password-reset-initiate"}),properties:options.properties,timeout:options.timeout,client:client}),_context23.next=8,request.execute();case 8:return _ref28=_context23.sent,data=_ref28.data,_context23.abrupt("return",data);case 11:case"end":return _context23.stop()}},_callee23,this)}));return resetPassword}()},{key:"exists",value:function(username,options){var store=new _datastore.UserStore(options);return store.exists(username,options)}},{key:"restore",value:function(id,options){var store=new _datastore.UserStore(options);return store.restore(id,options)}}]),User}()}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){var baseDifference=__webpack_require__(435),baseFlatten=__webpack_require__(437),baseIteratee=__webpack_require__(41),baseRest=__webpack_require__(137),isArrayLikeObject=__webpack_require__(28),last=__webpack_require__(439),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=void 0),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),baseIteratee(iteratee,2)):[]});module.exports=differenceBy},function(module,exports,__webpack_require__){function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}var SetCache=__webpack_require__(85),arrayIncludes=__webpack_require__(214),arrayIncludesWith=__webpack_require__(436),arrayMap=__webpack_require__(280),baseUnary=__webpack_require__(104),cacheHas=__webpack_require__(89),LARGE_ARRAY_SIZE=200;module.exports=baseDifference},function(module,exports){function arrayIncludesWith(array,value,comparator){for(var index=-1,length=array?array.length:0;++index<length;)if(comparator(value,array[index]))return!0;return!1}module.exports=arrayIncludesWith},function(module,exports,__webpack_require__){function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var arrayPush=__webpack_require__(260),isFlattenable=__webpack_require__(438);module.exports=baseFlatten},function(module,exports,__webpack_require__){function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}var Symbol=__webpack_require__(91),isArguments=__webpack_require__(27),isArray=__webpack_require__(34),spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;module.exports=isFlattenable},function(module,exports){function last(array){var length=array?array.length:0;return length?array[length-1]:void 0}module.exports=last},function(module,exports,__webpack_require__){function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,baseIteratee(predicate,3))}var arrayFilter=__webpack_require__(441),baseFilter=__webpack_require__(442),baseIteratee=__webpack_require__(41),isArray=__webpack_require__(34);module.exports=filter},function(module,exports){function arrayFilter(array,predicate){for(var index=-1,length=array?array.length:0,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}module.exports=arrayFilter},function(module,exports,__webpack_require__){function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}var baseEach=__webpack_require__(20);module.exports=baseFilter},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(441),baseRest=__webpack_require__(137),baseXor=__webpack_require__(444),isArrayLikeObject=__webpack_require__(28),last=__webpack_require__(439),xorWith=baseRest(function(arrays){var comparator=last(arrays);return isArrayLikeObject(comparator)&&(comparator=void 0),baseXor(arrayFilter(arrays,isArrayLikeObject),void 0,comparator)});module.exports=xorWith},function(module,exports,__webpack_require__){function baseXor(arrays,iteratee,comparator){for(var index=-1,length=arrays.length;++index<length;)var result=result?arrayPush(baseDifference(result,arrays[index],iteratee,comparator),baseDifference(arrays[index],result,iteratee,comparator)):arrays[index];return result&&result.length?baseUniq(result,iteratee,comparator):[]}var arrayPush=__webpack_require__(260),baseDifference=__webpack_require__(435),baseUniq=__webpack_require__(445);module.exports=baseXor},function(module,exports,__webpack_require__){function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed===computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}var SetCache=__webpack_require__(85),arrayIncludes=__webpack_require__(214),arrayIncludesWith=__webpack_require__(436),cacheHas=__webpack_require__(89),createSet=__webpack_require__(446),setToArray=__webpack_require__(94),LARGE_ARRAY_SIZE=200;module.exports=baseUniq},function(module,exports,__webpack_require__){var Set=__webpack_require__(99),noop=__webpack_require__(202),setToArray=__webpack_require__(94),INFINITY=1/0,createSet=Set&&1/setToArray(new Set([,-0]))[1]==INFINITY?function(values){return new Set(values)}:noop;module.exports=createSet},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataStore=exports.DataStoreType=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_request=__webpack_require__(11),_errors=__webpack_require__(14),_client=__webpack_require__(161),_networkstore=__webpack_require__(10),_cachestore=__webpack_require__(8),_syncstore=__webpack_require__(448),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),appdataNamespace=process&&process.env&&process.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",DataStoreType={Cache:"Cache",Network:"Network",Sync:"Sync"};Object.freeze(DataStoreType),exports.DataStoreType=DataStoreType;var DataStore=function(){function DataStore(){throw _classCallCheck(this,DataStore),new _errors.KinveyError("Not allowed to construct a DataStore instance. Please use the collection() function to retrieve an instance of a DataStore instance.")}return _createClass(DataStore,null,[{key:"collection",value:function(_collection){var type=arguments.length<=1||void 0===arguments[1]?DataStoreType.Cache:arguments[1],options=arguments[2],store=void 0;if(!_collection)throw new _errors.KinveyError("A collection is required.");switch(type){case DataStoreType.Network:store=new _networkstore.NetworkStore(_collection,options);break;case DataStoreType.Sync:store=new _syncstore.SyncStore(_collection,options);break;case DataStoreType.Cache:default:store=new _cachestore.CacheStore(_collection,options)}return store}},{key:"getInstance",value:function(collection,type,options){return this.collection(collection,type,options)}},{key:"clearCache",value:function(){function clearCache(_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var client,pathname,request,response,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return client=options.client||_client.Client.sharedInstance(),pathname="/"+appdataNamespace+"/"+client.appKey,request=new _request.CacheRequest({method:_request.RequestMethod.DELETE,url:_url2.default.format({protocol:client.protocol,host:client.host,pathname:pathname,query:options.query}),properties:options.properties,timeout:options.timeout}),_context.next=5,request.execute();case 5:return response=_context.sent,_context.abrupt("return",response.data);case 7:case"end":return _context.stop()}},_callee,this)}));return clearCache}()}]),DataStore}();exports.DataStore=DataStore}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncStore=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_cachestore=__webpack_require__(8),_request=__webpack_require__(11),_errors=__webpack_require__(14),_query=__webpack_require__(421),_utils=__webpack_require__(162),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url);exports.SyncStore=function(_CacheStore){function SyncStore(){return _classCallCheck(this,SyncStore),_possibleConstructorReturn(this,(SyncStore.__proto__||Object.getPrototypeOf(SyncStore)).apply(this,arguments))}return _inherits(SyncStore,_CacheStore),_createClass(SyncStore,[{key:"find",value:function(query){var _this2=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(observer){var entities,request,response;return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,entities=[],!query||query instanceof _query.Query){_context.next=4;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 4:return request=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout}),_context.next=7,request.execute();case 7:response=_context.sent,entities=response.data,observer.next(entities),_context.next=15;break;case 12:_context.prev=12,_context.t0=_context.catch(0),observer.error(_context.t0);case 15:return _context.abrupt("return",observer.complete());case 16:case"end":return _context.stop()}},_callee,_this2,[[0,12]])}));return function(_x2){return _ref.apply(this,arguments)}}());return stream}},{key:"findById",value:function(id){var _this3=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(observer){var request,response,entity;return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,request=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this3.client.protocol,host:_this3.client.host,pathname:_this3.pathname+"/"+id,query:options.query}),properties:options.properties,timeout:options.timeout}),_context2.next=4,request.execute();case 4:response=_context2.sent,entity=response.data,observer.next(entity),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2.catch(0),observer.error(_context2.t0);case 12:return _context2.abrupt("return",observer.complete());case 13:case"end":return _context2.stop()}},_callee2,_this3,[[0,9]])}));return function(_x4){return _ref2.apply(this,arguments)}}());return stream}},{key:"count",value:function(query){var _this4=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stream=_utils.KinveyObservable.create(function(){var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(observer){var request,response,data;return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,!query||query instanceof _query.Query){_context3.next=3;break}throw new _errors.KinveyError("Invalid query. It must be an instance of the Query class.");case 3:return request=new _request.CacheRequest({method:_request.RequestMethod.GET,url:_url2.default.format({protocol:_this4.client.protocol,host:_this4.client.host,pathname:_this4.pathname,query:options.query}),properties:options.properties,query:query,timeout:options.timeout}),_context3.next=6,request.execute();case 6:response=_context3.sent,data=response.data,observer.next(data?data.length:0),_context3.next=14;break;case 11:return _context3.prev=11,_context3.t0=_context3.catch(0),_context3.abrupt("return",observer.error(_context3.t0));case 14:return _context3.abrupt("return",observer.complete());case 15:case"end":return _context3.stop()}},_callee3,_this4,[[0,11]])}));return function(_x6){return _ref3.apply(this,arguments)}}());return stream}},{key:"syncAutomatically",get:function(){return!1}}]),SyncStore}(_cachestore.CacheStore)},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):_promise2.default.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function randomInt(min,max){return Math.floor(Math.random()*(max-min))+min}function getStartIndex(rangeHeader,max){var start=rangeHeader?parseInt(rangeHeader.split("-")[1],10)+1:0;return start>=max?max-1:start}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileStore=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_request=__webpack_require__(11),_errors=__webpack_require__(14),_networkstore=__webpack_require__(10),_utils=__webpack_require__(162),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_map=__webpack_require__(350),_map2=_interopRequireDefault(_map),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction),_isNumber=__webpack_require__(159),_isNumber2=_interopRequireDefault(_isNumber),idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id",filesNamespace=process&&process.env&&process.env.KINVEY_FILES_NAMESPACE||"blob"||"blob",MAX_BACKOFF=process&&process.env&&process.env.KINVEY_MAX_BACKOFF||"32000"||32e3;exports.FileStore=function(_NetworkStore){function FileStore(){return _classCallCheck(this,FileStore),_possibleConstructorReturn(this,(FileStore.__proto__||Object.getPrototypeOf(FileStore)).apply(this,arguments))}return _inherits(FileStore,_NetworkStore),_createClass(FileStore,[{key:"find",value:function(){function find(_x,_x2){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(query){var stream,files,_this2=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return options.query=options.query||{},options.query.tls=options.tls===!0,(0,_isNumber2.default)(options.ttl)&&(options.query.ttl_in_seconds=options.ttl),stream=_get(FileStore.prototype.__proto__||Object.getPrototypeOf(FileStore.prototype),"find",this).call(this,query,options),_context.next=6,stream.toPromise();case 6:if(files=_context.sent,options.download!==!0){_context.next=9;break}return _context.abrupt("return",_promise2.default.all((0,_map2.default)(files,function(file){return _this2.downloadByUrl(file._downloadURL,options)})));case 9:return _context.abrupt("return",files);case 10:case"end":return _context.stop()}},_callee,this)}));return find}()},{key:"findById",value:function(id,options){return this.download(id,options)}},{key:"download",value:function(){function download(_x4,_x5){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(name){var file,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options.query=options.query||{},options.query.tls=options.tls===!0,(0,_isNumber2.default)(options.ttl)&&(options.query.ttl_in_seconds=options.ttl),_context2.next=5,_get(FileStore.prototype.__proto__||Object.getPrototypeOf(FileStore.prototype),"findById",this).call(this,name,options).toPromise();case 5:if(file=_context2.sent,options.stream!==!0){_context2.next=8;break}return _context2.abrupt("return",file);case 8:return options.mimeType=file.mimeType,_context2.abrupt("return",this.downloadByUrl(file._downloadURL,options));
case 10:case"end":return _context2.stop()}},_callee2,this)}));return download}()},{key:"downloadByUrl",value:function(){function downloadByUrl(_x7,_x8){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(url){var request,response,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return request=new _request.NetworkRequest({method:_request.RequestMethod.GET,url:url,timeout:options.timeout}),_context3.next=3,request.execute();case 3:return response=_context3.sent,_context3.abrupt("return",response.data);case 5:case"end":return _context3.stop()}},_callee3,this)}));return downloadByUrl}()},{key:"stream",value:function(name){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return options.stream=!0,this.download(name,options)}},{key:"upload",value:function(){function upload(_x11,_x12,_x13){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(file){var request,response,data,uploadUrl,headers,statusCheckRequest,statusCheckResponse,metadata=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return metadata=(0,_assign2.default)({filename:file._filename||file.name,public:!1,size:file.size||file.length,mimeType:file.mimeType||file.type||"application/octet-stream"},metadata),metadata._filename=metadata.filename,delete metadata.filename,metadata._public=metadata.public,delete metadata.public,request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.Default,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname}),properties:options.properties,timeout:options.timeout,body:metadata,client:this.client}),request.headers.set("X-Kinvey-Content-Type",metadata.mimeType),metadata[idAttribute]&&(request.method=_request.RequestMethod.PUT,request.url=_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname+"/"+metadata._id,query:options.query})),_context4.next=10,request.execute();case 10:return response=_context4.sent,data=response.data,uploadUrl=data._uploadURL,headers=new _request.Headers(data._requiredHeaders),headers.set("content-type",metadata.mimeType),delete data._expiresAt,delete data._requiredHeaders,delete data._uploadURL,statusCheckRequest=new _request.NetworkRequest({method:_request.RequestMethod.PUT,url:uploadUrl,timeout:options.timeout}),statusCheckRequest.headers.addAll(headers.toPlainObject()),statusCheckRequest.headers.set("Content-Length","0"),statusCheckRequest.headers.set("Content-Range","bytes */"+metadata.size),_context4.next=24,statusCheckRequest.execute(!0);case 24:if(statusCheckResponse=_context4.sent,_utils.Log.debug("File upload status check response",statusCheckResponse),statusCheckResponse.isSuccess()!==!1){_context4.next=34;break}if(statusCheckResponse.statusCode!==_request.StatusCode.ResumeIncomplete){_context4.next=33;break}return options.start=getStartIndex(statusCheckResponse.headers.get("range"),metadata.size),_context4.next=31,this.uploadToGCS(uploadUrl,headers,file,metadata,options);case 31:_context4.next=34;break;case 33:throw statusCheckResponse.error;case 34:return data._data=file,_context4.abrupt("return",data);case 36:case"end":return _context4.stop()}},_callee4,this)}));return upload}()},{key:"uploadToGCS",value:function(){function uploadToGCS(_x16,_x17,_x18,_x19,_x20){return _ref5.apply(this,arguments)}var _ref5=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee5(uploadUrl,headers,file,metadata){var fileSlice,fileSliceSize,request,response,_ret,_this3=this,options=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];return _regeneratorRuntime2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return options=(0,_assign2.default)({count:0,start:0,maxBackoff:MAX_BACKOFF},options),_utils.Log.debug("Start file upload"),_utils.Log.debug("File upload upload url",uploadUrl),_utils.Log.debug("File upload headers",headers.toPlainObject()),_utils.Log.debug("File upload file",file),_utils.Log.debug("File upload metadata",metadata),_utils.Log.debug("File upload options",options),fileSlice=(0,_isFunction2.default)(file.slice)?file.slice(options.start):file,fileSliceSize=fileSlice.size||fileSlice.length,request=new _request.NetworkRequest({method:_request.RequestMethod.PUT,url:uploadUrl,body:fileSlice,timeout:options.timeout}),request.headers.addAll(headers.toPlainObject()),request.headers.set("Content-Length",fileSliceSize),request.headers.set("Content-Range","bytes "+options.start+"-"+(metadata.size-1)+"/"+metadata.size),_context5.next=15,request.execute(!0);case 15:if(response=_context5.sent,_utils.Log.debug("File upload response",response),response.isSuccess()!==!1){_context5.next=29;break}if(response.statusCode!==_request.StatusCode.ResumeIncomplete){_context5.next=24;break}return _utils.Log.debug("File upload was incomplete. Trying to upload the remaining protion of the file."),options.start=getStartIndex(response.headers.get("range"),metadata.size),_context5.abrupt("return",this.uploadToGCS(uploadUrl,headers,file,metadata,options));case 24:if(!(response.statusCode>=500&&response.statusCode<600)){_context5.next=28;break}if(_ret=function(){_utils.Log.debug("File upload error.",response.statusCode);var backoff=Math.pow(2,options.count)+randomInt(1e3,1);if(backoff>=options.maxBackoff)throw response.error;return _utils.Log.debug("File upload will try again in "+backoff+" seconds."),{v:new _promise2.default(function(resolve){setTimeout(function(){options.count+=1,resolve(_this3.uploadToGCS(uploadUrl,headers,file,metadata,options))},backoff)})}}(),"object"!==("undefined"==typeof _ret?"undefined":_typeof(_ret))){_context5.next=28;break}return _context5.abrupt("return",_ret.v);case 28:throw response.error;case 29:return _context5.abrupt("return",response);case 30:case"end":return _context5.stop()}},_callee5,this)}));return uploadToGCS}()},{key:"create",value:function(file,metadata,options){return this.upload(file,metadata,options)}},{key:"update",value:function(file,metadata,options){return this.upload(file,metadata,options)}},{key:"remove",value:function(){throw new _errors.KinveyError("Please use removeById() to remove files one by one.")}},{key:"pathname",get:function(){return"/"+filesNamespace+"/"+this.client.appKey}}]),FileStore}(_networkstore.NetworkStore)}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserStore=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_request=__webpack_require__(11),_errors=__webpack_require__(14),_networkstore=__webpack_require__(10),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_isArray=__webpack_require__(34),_isArray2=_interopRequireDefault(_isArray),usersNamespace=process&&process.env&&process.env.KINVEY_USERS_NAMESPACE||"user"||"user",rpcNamespace=process&&process.env&&process.env.KINVEY_RPC_NAMESPACE||"rpc"||"rpc",idAttribute=process&&process.env&&process.env.KINVEY_ID_ATTRIBUTE||"_id"||"_id";exports.UserStore=function(_NetworkStore){function UserStore(options){return _classCallCheck(this,UserStore),_possibleConstructorReturn(this,(UserStore.__proto__||Object.getPrototypeOf(UserStore)).call(this,null,options))}return _inherits(UserStore,_NetworkStore),_createClass(UserStore,[{key:"create",value:function(){function create(){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:throw new _errors.KinveyError("Please use `User.signup()` to create a user.");case 1:case"end":return _context.stop()}},_callee,this)}));return create}()},{key:"update",value:function(){function update(_x,_x2){return _ref2.apply(this,arguments)}var _ref2=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee2(data){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(data){_context2.next=2;break}throw new _errors.KinveyError("No user was provided to be updated.");case 2:if(!(0,_isArray2.default)(data)){_context2.next=4;break}throw new _errors.KinveyError("Only one user can be updated at one time.",data);case 4:if(data[idAttribute]){_context2.next=6;break}throw new _errors.KinveyError("User must have an _id.");case 6:return _context2.abrupt("return",_get(UserStore.prototype.__proto__||Object.getPrototypeOf(UserStore.prototype),"update",this).call(this,data,options));case 7:case"end":return _context2.stop()}},_callee2,this)}));return update}()},{key:"exists",value:function(){function exists(_x4,_x5){return _ref3.apply(this,arguments)}var _ref3=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee3(username){var request,response,data,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.App,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:"/"+rpcNamespace+"/"+this.client.appKey+"/check-username-exists"}),properties:options.properties,data:{username:username},timeout:options.timeout,client:this.client}),_context3.next=3,request.execute();case 3:return response=_context3.sent,data=response.data||{},_context3.abrupt("return",data.usernameExists===!0);case 6:case"end":return _context3.stop()}},_callee3,this)}));return exists}()},{key:"restore",value:function(){function restore(_x7,_x8){return _ref4.apply(this,arguments)}var _ref4=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee4(id){var request,response,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _regeneratorRuntime2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.Master,url:_url2.default.format({protocol:this.client.protocol,host:this.client.host,pathname:this.pathname+"/"+id}),properties:options.properties,timeout:options.timeout,client:this.client}),_context4.next=3,request.execute();case 3:return response=_context4.sent,_context4.abrupt("return",response.data);case 5:case"end":return _context4.stop()}},_callee4,this)}));return restore}()},{key:"pathname",get:function(){return"/"+usersNamespace+"/"+this.client.appKey}}]),UserStore}(_networkstore.NetworkStore)}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Aggregation=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_result=__webpack_require__(427),_result2=_interopRequireDefault(_result),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_forEach=__webpack_require__(18),_forEach2=_interopRequireDefault(_forEach),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),_isObject=__webpack_require__(31),_isObject2=_interopRequireDefault(_isObject),_isFunction=__webpack_require__(30),_isFunction2=_interopRequireDefault(_isFunction),_errors=__webpack_require__(14),_query=__webpack_require__(421);exports.Aggregation=function(){function Aggregation(options){_classCallCheck(this,Aggregation),options=(0,_assign2.default)({query:null,initial:{},key:{},reduceFn:function(){}.toString()},options),this.query=options.query,this.initial=options.initial,this.key=options.key,this.reduceFn=options.reduceFn}return _createClass(Aggregation,[{key:"by",value:function(field){return this.key[field]=!0,this}},{key:"process",value:function(){var entities=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],groups={},response=[],aggregation=this.toJSON(),reduceFn=aggregation.reduceFn.replace(/function[\s\S]*?\([\s\S]*?\)/,"");aggregation.reduce=new Function(["doc","out"],reduceFn),this.query&&(entities=this.query.process(entities)),(0,_forEach2.default)(entities,function(entity){var group={},entityNames=Object.keys(entity);(0,_forEach2.default)(entityNames,function(name){group[name]=entity[name]});var key=JSON.stringify(group);if(!groups[key]){groups[key]=group;var attributes=Object.keys(aggregation.initial);(0,_forEach2.default)(attributes,function(attr){groups[key][attr]=aggregation.initial[attr]})}aggregation.reduce(entity,groups[key])});var segments=Object.keys(groups);return(0,_forEach2.default)(segments,function(segment){response.push(groups[segment])}),response}},{key:"toJSON",value:function(){var json={key:this.key,initial:this.initial,reduceFn:this.reduceFn,condition:this.query?this.query.toJSON().filter:{},query:this.query?this.query.toJSON():null};return json}},{key:"initial",get:function(){return this.aggregationInitial},set:function(initial){if(!(0,_isObject2.default)(initial))throw new _errors.KinveyError("initial must be an Object.");this.aggregationInitial=initial}},{key:"query",get:function(){return this.aggregationQuery},set:function(query){!query||query instanceof _query.Query||(query=new _query.Query((0,_result2.default)(query,"toJSON",query))),this.aggregationQuery=query}},{key:"reduceFn",get:function(){return this.aggregationReduceFn},set:function(fn){if((0,_isFunction2.default)(fn)&&(fn=fn.toString()),!(0,_isString2.default)(fn))throw new _errors.KinveyError("fn argument must be of type function or string.");this.aggregationReduceFn=fn}}],[{key:"count",value:function(){var field=arguments.length<=0||void 0===arguments[0]?"":arguments[0],aggregation=new Aggregation;return field&&aggregation.by(field),aggregation.initial={result:0},aggregation.reduceFn=function(doc,out){return out.result+=1,out},aggregation}},{key:"sum",value:function(){var field=arguments.length<=0||void 0===arguments[0]?"":arguments[0];field=field.replace("'","\\'");var aggregation=new Aggregation;return aggregation.initial={result:0},aggregation.reduceFn=function(doc,out){out.result+=doc["'"+field+"'"]},aggregation}},{key:"min",value:function(){var field=arguments.length<=0||void 0===arguments[0]?"":arguments[0];field=field.replace("'","\\'");var aggregation=new Aggregation;return aggregation.initial={result:1/0},aggregation.reduceFn=function(doc,out){out.result=Math.min(out.result,doc["'"+field+"'"])},aggregation}},{key:"max",value:function(){var field=arguments.length<=0||void 0===arguments[0]?"":arguments[0];field=field.replace("'","\\'");var aggregation=new Aggregation;return aggregation.initial={result:-(1/0)},aggregation.reduceFn=function(doc,out){out.result=Math.max(out.result,doc["'"+field+"'"])},aggregation}},{key:"average",value:function(){var field=arguments.length<=0||void 0===arguments[0]?"":arguments[0];field=field.replace("'","\\'");var aggregation=new Aggregation;return aggregation.initial={count:0,result:0},aggregation.reduceFn=function(doc,out){out.result=(out.result*out.count+doc["'"+field+"'"])/(out.count+1),out.count+=1},aggregation}}]),Aggregation}()},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomEndpoint=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_client=__webpack_require__(161),_request=__webpack_require__(11),_errors=__webpack_require__(14),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_assign=__webpack_require__(132),_assign2=_interopRequireDefault(_assign),_isString=__webpack_require__(129),_isString2=_interopRequireDefault(_isString),rpcNamespace=process&&process.env&&process.env.KINVEY_RPC_NAMESPACE||"rpc"||"rpc";exports.CustomEndpoint=function(){function CustomEndpoint(){throw _classCallCheck(this,CustomEndpoint),new _errors.KinveyError("Not allowed to create an instance of the `CustomEndpoint` class.","Please use `CustomEndpoint.execute()` function.")}return _createClass(CustomEndpoint,null,[{key:"execute",value:function(){function execute(_x,_x2,_x3){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(endpoint,args){var request,response,options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(options=(0,_assign2.default)({client:_client.Client.sharedInstance()},options),endpoint){_context.next=3;break}throw new _errors.KinveyError("An endpoint argument is required.");case 3:if((0,_isString2.default)(endpoint)){_context.next=5;break}throw new _errors.KinveyError("The endpoint argument must be a string.");case 5:return request=new _request.KinveyRequest({method:_request.RequestMethod.POST,authType:_request.AuthType.Default,url:_url2.default.format({protocol:options.client.protocol,host:options.client.host,pathname:"/"+rpcNamespace+"/"+options.client.appKey+"/custom/"+endpoint}),properties:options.properties,body:args,timeout:options.timeout,client:options.client}),_context.next=8,request.execute();case 8:return response=_context.sent,_context.abrupt("return",response.data);case 10:case"end":return _context.stop()}},_callee,this)}));return execute}()}]),CustomEndpoint}()}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}return info.done?void resolve(value):Promise.resolve(value).then(function(value){return step("next",value)},function(err){return step("throw",err)})}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Kinvey=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_client=__webpack_require__(161),_endpoint=__webpack_require__(452),_utils=__webpack_require__(162),_query=__webpack_require__(421),_aggregation=__webpack_require__(451),_datastore=__webpack_require__(7),_entity=__webpack_require__(429),_social=__webpack_require__(410),_request=__webpack_require__(11),_errors=__webpack_require__(14),_regeneratorRuntime=__webpack_require__(146),_regeneratorRuntime2=_interopRequireDefault(_regeneratorRuntime),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),appdataNamespace=process&&process.env&&process.env.KINVEY_DATASTORE_NAMESPACE||"appdata"||"appdata",Kinvey=function(){function Kinvey(){_classCallCheck(this,Kinvey)}return _createClass(Kinvey,null,[{key:"init",value:function(options){if(!options.appKey)throw new _errors.KinveyError("No App Key was provided. Unable to create a new Client without an App Key.");if(!options.appSecret&&!options.masterSecret)throw new _errors.KinveyError("No App Secret or Master Secret was provided. Unable to create a new Client without an App Key.");var client=_client.Client.init(options);return this.CustomEndpoint=_endpoint.CustomEndpoint,this.DataStore=_datastore.DataStore,this.Files=new _datastore.FileStore,this.User=_entity.User,this.UserStore=_entity.UserStore,client}},{key:"ping",value:function(){function ping(_x){return _ref.apply(this,arguments)}var _ref=_asyncToGenerator(_regeneratorRuntime2.default.mark(function _callee(){var request,response,client=arguments.length<=0||void 0===arguments[0]?_client.Client.sharedInstance():arguments[0];return _regeneratorRuntime2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return request=new _request.KinveyRequest({method:_request.RequestMethod.GET,authType:_request.AuthType.All,url:_url2.default.format({protocol:client.protocol,host:client.host,pathname:appdataNamespace+"/"+client.appKey})}),_context.next=3,request.execute();case 3:return response=_context.sent,_context.abrupt("return",response.data);case 5:case"end":return _context.stop()}},_callee,this)}));return ping}()},{key:"client",get:function(){return _client.Client.sharedInstance()}},{key:"appVersion",get:function(){return this.client.appVersion},set:function(appVersion){this.client.appVersion=appVersion}}]),Kinvey}();Kinvey.Acl=_entity.Acl,Kinvey.Aggregation=_aggregation.Aggregation,Kinvey.AuthorizationGrant=_social.AuthorizationGrant,Kinvey.DataStoreType=_datastore.DataStoreType,Kinvey.Log=_utils.Log,Kinvey.Metadata=_entity.Metadata,Kinvey.Query=_query.Query,Kinvey.SocialIdentity=_social.SocialIdentity,exports.Kinvey=Kinvey}).call(exports,__webpack_require__(9))},function(module,exports,__webpack_require__){(function(process,global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_kinveyJavascriptSdkCore=__webpack_require__(6),_device=__webpack_require__(455),_events=__webpack_require__(184),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),_url=__webpack_require__(157),_url2=_interopRequireDefault(_url),_bind=__webpack_require__(185),_bind2=_interopRequireDefault(_bind),pushNamespace=process&&process.env&&process.env.KINVEY_PUSH_NAMESPACE||"push"||"push",notificationEvent=process&&process.env&&process.env.KINVEY_NOTIFICATION_EVENT||"notification"||"notification",deviceIdCollectionName=process&&process.env&&process.env.KINVEY_DEVICE_COLLECTION_NAME||"kinvey_deviceId"||"kinvey_deviceId",pushSettingsCollectionName=process&&process.env&&process.env.KINVEY_PUSH_COLLECTION_NAME||"kinvey_pushSettings"||"kinvey_pushSettings",storage=global.localStorage,notificationEventListener=void 0,Push=function(_EventEmitter){function Push(){_classCallCheck(this,Push);var _this=_possibleConstructorReturn(this,(Push.__proto__||Object.getPrototypeOf(Push)).call(this));return _this.client=_kinveyJavascriptSdkCore.Client.sharedInstance(),notificationEventListener=(0,_bind2.default)(_this.notificationListener,_this),_device.Device.ready().then(function(){try{var pushOptions=JSON.parse(storage.getItem(pushSettingsCollectionName));if(pushOptions)return _this.register(pushOptions)}catch(error){}return null}),_this}return _inherits(Push,_EventEmitter),_createClass(Push,[{key:"isSupported",value:function(){return _device.Device.isiOS()||_device.Device.isAndroid()}},{key:"onNotification",value:function(listener){return this.on(notificationEvent,listener)}},{key:"onceNotification",value:function(listener){return this.once(notificationEvent,listener)}},{key:"notificationListener",value:function(data){this.emit(notificationEvent,data)}},{key:"register",value:function(){var _this2=this,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _device.Device.ready().then(function(){if(!_this2.isSupported())return _promise2.default.reject(new _kinveyJavascriptSdkCore.KinveyError("Kinvey currently only supports push notifications on iOS and Android platforms."));if("undefined"==typeof global.PushNotification)throw new _kinveyJavascriptSdkCore.KinveyError("PhoneGap Push Notification Plugin is not installed.","Please refer to http://devcenter.kinvey.com/phonegap/guides/push#ProjectSetUp for help with setting up your project.");return _this2.unregister().catch(function(){return null})}).then(function(){var promise=new _promise2.default(function(resolve,reject){return _this2.phonegapPush=global.PushNotification.init(options),_this2.phonegapPush.on(notificationEvent,notificationEventListener),_this2.phonegapPush.on("registration",function(data){resolve(data.registrationId)}),_this2.phonegapPush.on("error",function(error){reject(new _kinveyJavascriptSdkCore.KinveyError("An error occurred registering this device for push notifications.",error))}),_this2.phonegapPush}).then(function(deviceId){if(!deviceId)throw new _kinveyJavascriptSdkCore.KinveyError("Unable to retrieve the device id to register this device for push notifications.");var user=_kinveyJavascriptSdkCore.User.getActiveUser(_this2.client),request=new _kinveyJavascriptSdkCore.NetworkRequest({method:_kinveyJavascriptSdkCore.RequestMethod.POST,url:_url2.default.format({protocol:_this2.client.protocol,host:_this2.client.host,pathname:_this2.pathname+"/register-device"}),properties:options.properties,authType:user?_kinveyJavascriptSdkCore.AuthType.Session:_kinveyJavascriptSdkCore.AuthType.Master,data:{platform:global.device.platform.toLowerCase(),framework:"phonegap",deviceId:deviceId,userId:user?void 0:options.userId},timeout:options.timeout,client:_this2.client});return request.execute().then(function(response){return storage.setItem(deviceIdCollectionName,deviceId),storage.setItem(pushSettingsCollectionName,JSON.stringify(options)),response.data})});return promise})}},{key:"unregister",value:function(){var _this3=this,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return _device.Device.ready().then(function(){if(!_this3.isSupported())return _promise2.default.reject(new _kinveyJavascriptSdkCore.KinveyError("Kinvey currently only supports push notifications on iOS and Android platforms."));var promise=new _promise2.default(function(resolve,reject){_this3.phonegapPush&&(_this3.phonegapPush.off(notificationEvent,notificationEventListener),_this3.phonegapPush.unregister(function(){_this3.phonegapPush=null,resolve()},function(){reject(new _kinveyJavascriptSdkCore.KinveyError("Unable to unregister with the PhoneGap Push Plugin."))})),resolve()});return promise=promise.then(function(){return _promise2.default.resolve(storage.getItem(deviceIdCollectionName));
}).then(function(deviceId){if(!deviceId)throw new _kinveyJavascriptSdkCore.KinveyError("This device has not been registered for push notifications.");var user=_kinveyJavascriptSdkCore.User.getActiveUser(_this3.client),request=new _kinveyJavascriptSdkCore.NetworkRequest({method:_kinveyJavascriptSdkCore.RequestMethod.POST,url:_url2.default.format({protocol:_this3.client.protocol,host:_this3.client.host,pathname:_this3.pathname+"/unregister-device"}),properties:options.properties,authType:user?_kinveyJavascriptSdkCore.AuthType.Session:_kinveyJavascriptSdkCore.AuthType.Master,data:{platform:global.device.platform.toLowerCase(),framework:"phonegap",deviceId:deviceId,userId:user?null:options.userId},timeout:options.timeout,client:_this3.client});return request.execute()}).then(function(response){return storage.removeItem(deviceIdCollectionName),storage.removeItem(pushSettingsCollectionName),response.data})})}},{key:"pathname",get:function(){return"/"+pushNamespace+"/"+this.client.appKey}},{key:"client",get:function(){return this.pushClient},set:function(client){if(!client)throw new _kinveyJavascriptSdkCore.KinveyError("Kinvey.Push much have a client defined.");this.pushClient=client}}]),Push}(_events.EventEmitter);exports.default=Push}).call(exports,__webpack_require__(9),function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Device=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_promise=__webpack_require__(285),_promise2=_interopRequireDefault(_promise),deviceReady=void 0,Device=exports.Device=function(){function Device(){_classCallCheck(this,Device)}return _createClass(Device,null,[{key:"isPhoneGap",value:function(){return"undefined"!=typeof document&&(document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1)}},{key:"ready",value:function(){return deviceReady||(deviceReady=this.isPhoneGap()?new _promise2.default(function(resolve){var onDeviceReady=function onDeviceReady(){document.removeEventListener("deviceready",onDeviceReady),resolve()};document.addEventListener("deviceready",onDeviceReady,!1)}):_promise2.default.resolve()),deviceReady}}]),Device}();Device.isPhoneGap()&&Device.ready().then(function(){if("undefined"==typeof global.device)throw new Error("Cordova Device Plugin is not installed. Please refer to devcenter.kinvey.com/phonegap-v3.0/guides/getting-started for help with setting up your project.")})}).call(exports,function(){return this}())},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_456__}])});