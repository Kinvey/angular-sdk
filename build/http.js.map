{"version":3,"sources":["http.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;;;;;;;;AACA,IAAM,YAAY,QAAQ,QAAR,CAAiB,CAAC,IAAD,CAAjB,CAAZ;;IAEO;;;AACX,WADW,cACX,GAAc;0BADH,gBACG;;uEADH,2BAEH,mCADM;;AAEZ,UAAK,KAAL,GAAa,UAAU,GAAV,CAAc,OAAd,CAAb,CAFY;;GAAd;;eADW;;2BAMJ,SAAS;;;AACd,aAAO,2BAPE,sDAOW,QAAb,CAAsB,IAAtB,CAA2B,YAAM;AACtC,YAAM,UAAU,OAAK,KAAL,CAAW;AACzB,eAAK,QAAQ,GAAR;AACL,kBAAQ,QAAQ,MAAR;AACR,mBAAS,QAAQ,OAAR;AACT,gBAAM,QAAQ,IAAR;SAJQ,EAKb,IALa,CAKR,oBAAY;AAClB,kBAAQ,QAAR,GAAmB;AACjB,wBAAY,SAAS,MAAT;AACZ,qBAAS,SAAS,OAAT,EAAT;AACA,kBAAM,SAAS,IAAT;WAHR,CADkB;;AAOlB,iBAAO,OAAP,CAPkB;SAAZ,CALQ,CAab,KAba,CAaP,oBAAY;AACnB,kBAAQ,QAAR,GAAmB;AACjB,wBAAY,SAAS,MAAT;AACZ,qBAAS,SAAS,OAAT,EAAT;AACA,kBAAM,SAAS,IAAT;WAHR,CADmB;;AAOnB,iBAAO,OAAP,CAPmB;SAAZ,CAbH,CADgC;AAuBtC,eAAO,OAAP,CAvBsC;OAAN,CAAlC,CADc;;;;SANL","file":"http.js","sourcesContent":["import { KinveyMiddleware } from 'kinvey-javascript-sdk-core/build/rack/middleware';\nconst $injector = angular.injector(['ng']);\n\nexport class HttpMiddleware extends KinveyMiddleware {\n  constructor() {\n    super('Kinvey Angular Http Middleware');\n    this.$http = $injector.get('$http');\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const promise = this.$http({\n        url: request.url,\n        method: request.method,\n        headers: request.headers,\n        data: request.data\n      }).then(response => {\n        request.response = {\n          statusCode: response.status,\n          headers: response.headers(),\n          data: response.data\n        };\n\n        return request;\n      }).catch(response => {\n        request.response = {\n          statusCode: response.status,\n          headers: response.headers(),\n          data: response.data\n        };\n\n        return request;\n      });\n      return promise;\n    });\n  }\n}\n"],"sourceRoot":"/source/"}