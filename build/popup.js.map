{"version":3,"sources":["popup.js"],"names":[],"mappings":";;;;;;;;;;;;;;IAGa;;;;;;;2BACJ;;;AACL,UAAM,UAAU,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAC/C,cAAK,KAAL,GAAa,OAAO,IAAP,CAAY,MAAK,GAAL,EAAU,QAAtB,EAAgC,wBAAhC,CAAb,CAD+C;;AAG/C,YAAI,MAAK,KAAL,EAAY;AACd,gBAAK,QAAL,GAAgB,YAAY,YAAM;AAChC,gBAAI,MAAK,KAAL,CAAW,MAAX,EAAmB;AACrB,oBAAK,YAAL,GADqB;aAAvB,MAEO;AACL,kBAAI;AACF,sBAAK,WAAL,CAAiB;AACf,uBAAK,MAAK,KAAL,CAAW,QAAX,CAAoB,IAApB;iBADP,EADE;eAAJ,CAIE,OAAO,CAAP,EAAU;;eAAV;aAPJ;WAD0B,EAYzB,GAZa,CAAhB,CADc;SAAhB,MAcO;AACL,iBAAO,OAAO,IAAI,KAAJ,CAAU,wBAAV,CAAP,CAAP,CADK;SAdP;;AAkBA,eAAO,cAAP,CArB+C;OAArB,CAAtB,CADD;;AAyBL,aAAO,OAAP,CAzBK;;;;4BA4BC;;;AACN,UAAM,UAAU,IAAI,OAAJ,CAAY,mBAAW;AACrC,eAAK,KAAL,CAAW,KAAX,GADqC;AAErC,kBAFqC;OAAX,CAAtB,CADA;AAKN,aAAO,OAAP,CALM;;;;gCAQI,OAAO;AACjB,WAAK,IAAL,CAAU,QAAV,EAAoB,MAAM,GAAN,CAApB,CADiB;;;;mCAIJ;AACb,WAAK,KAAL,GADa;;;;mCAIA;AACb,mBAAa,KAAK,QAAL,CAAb,CADa;AAEb,WAAK,IAAL,CAAU,QAAV,EAFa;;;;SA7CJ","file":"popup.js","sourcesContent":["/**\n * @private\n */\nexport class PopupAdapter {\n  open() {\n    const promise = new Promise((resolve, reject) => {\n      this.popup = global.open(this.url, '_blank', 'toolbar=no,location=no');\n\n      if (this.popup) {\n        this.interval = setInterval(() => {\n          if (this.popup.closed) {\n            this.closeHandler();\n          } else {\n            try {\n              this.loadHandler({\n                url: this.popup.location.href\n              });\n            } catch (e) {\n              // catch any errors due to cross domain issues\n            }\n          }\n        }, 100);\n      } else {\n        return reject(new Error('The popup was blocked.'));\n      }\n\n      return resolve(this);\n    });\n\n    return promise;\n  }\n\n  close() {\n    const promise = new Promise(resolve => {\n      this.popup.close();\n      resolve();\n    });\n    return promise;\n  }\n\n  loadHandler(event) {\n    this.emit('loaded', event.url);\n  }\n\n  clickHandler() {\n    this.close();\n  }\n\n  closeHandler() {\n    clearTimeout(this.interval);\n    this.emit('closed');\n  }\n}\n"],"sourceRoot":"/source/"}